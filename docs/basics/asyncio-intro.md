---
layout: doc
title: ä»€ä¹ˆæ˜¯ asyncioï¼Ÿå¦‚ä½•åŸºäºå•çº¿ç¨‹å®ç°å¹¶å‘ï¼Ÿäº‹ä»¶å¾ªç¯åˆæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ
permalink: /docs/basics/asyncio-intro/
category: basics
tags: [asyncio, äº‹ä»¶å¾ªç¯, åç¨‹, å¼‚æ­¥ç¼–ç¨‹, å•çº¿ç¨‹å¹¶å‘]
description: æ·±å…¥ç†è§£ asyncio çš„åŸºæœ¬æ¦‚å¿µã€å·¥ä½œåŸç†ã€IO å¯†é›†å‹ä¸ CPU å¯†é›†å‹åŒºåˆ«ï¼Œä»¥åŠäº‹ä»¶å¾ªç¯æœºåˆ¶
author: Python ç¼–ç¨‹æŒ‡å—
date: 2024-01-15
updated: 2024-01-15
version: 1.0
difficulty: "ä¸­çº§"
---

# ä»€ä¹ˆæ˜¯ asyncioï¼Ÿå¦‚ä½•åŸºäºå•çº¿ç¨‹å®ç°å¹¶å‘ï¼Ÿäº‹ä»¶å¾ªç¯åˆæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ

## ğŸ“ æ¦‚è¿°

asyncio æ˜¯ Python 3.4 å¼•å…¥çš„å¼‚æ­¥ç¼–ç¨‹åº“ï¼Œé€šè¿‡å•çº¿ç¨‹äº‹ä»¶å¾ªç¯å®ç°é«˜å¹¶å‘å¤„ç†ã€‚æœ¬æ–‡å…¨é¢ä»‹ç» asyncio çš„æ ¸å¿ƒæ¦‚å¿µã€å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«ã€IO å¯†é›†å‹ä¸ CPU å¯†é›†å‹æ“ä½œï¼Œä»¥åŠååŒå¤šä»»åŠ¡å¤„ç†æ¨¡å‹ã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

- ç†è§£ asyncio çš„æ ¸å¿ƒæ¦‚å¿µå’Œåº”ç”¨åœºæ™¯
- æŒæ¡å¹¶å‘ã€å¹¶è¡Œã€å¤šä»»åŠ¡å¤„ç†çš„åŒºåˆ«
- ç†è§£ IO å¯†é›†å‹å’Œ CPU å¯†é›†å‹æ“ä½œçš„ç‰¹ç‚¹
- å­¦ä¼šè¯†åˆ«ä½•æ—¶ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹
- æŒæ¡è¿›ç¨‹ã€çº¿ç¨‹çš„åŸºæœ¬æ¦‚å¿µå’Œå·®å¼‚

## ğŸ“‹ å‰ç½®çŸ¥è¯†

- Python å‡½æ•°å’ŒåŸºæœ¬è¯­æ³•
- å¯¹è¿›ç¨‹å’Œçº¿ç¨‹æœ‰åŸºæœ¬äº†è§£
- ç†è§£åŒæ­¥å’Œå¼‚æ­¥çš„æ¦‚å¿µ

## ğŸ” è¯¦ç»†å†…å®¹

### æ¥”å­

**è®¸å¤šåº”ç”¨ç¨‹åºï¼Œå°¤å…¶åœ¨å½“ä»Šçš„ Web åº”ç”¨ç¨‹åºé¢†åŸŸï¼Œä¸¥é‡ä¾èµ– IO æ“ä½œã€‚è¿™äº›ç±»å‹çš„æ“ä½œåŒ…æ‹¬ä» Internet ä¸‹è½½ç½‘é¡µçš„å†…å®¹ã€é€šè¿‡ç½‘ç»œä¸ä¸€ç»„å¾®æœåŠ¡è¿›è¡Œé€šä¿¡ï¼Œæˆ–è€…é’ˆå¯¹ MySQLã€Postgres ç­‰æ•°æ®åº“åŒæ—¶è¿è¡Œå¤šä¸ªæŸ¥è¯¢ã€‚Web è¯·æ±‚æˆ–ä¸å¾®æœåŠ¡çš„é€šä¿¡å¯èƒ½éœ€è¦æ•°ç™¾æ¯«ç§’ï¼Œå¦‚æœç½‘ç»œå¾ˆæ…¢ï¼Œç”šè‡³å¯èƒ½éœ€è¦å‡ ç§’é’Ÿã€‚æ•°æ®åº“æŸ¥è¯¢å¯èƒ½è€—è´¹å¤§é‡æ—¶é—´ï¼Œå°¤å…¶æ˜¯åœ¨è¯¥æ•°æ®åº“å¤„äºé«˜è´Ÿè½½æˆ–æŸ¥è¯¢å¾ˆå¤æ‚çš„æƒ…å†µä¸‹ï¼Œè€Œä¸” Web æœåŠ¡å™¨å¯èƒ½éœ€è¦åŒæ—¶å¤„ç†æ•°ç™¾æˆ–æ•°åƒä¸ªè¯·æ±‚ã€‚**

**ä¸€æ¬¡å‘å‡ºè®¸å¤šè¿™æ ·çš„ IO è¯·æ±‚ä¼šå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œå¦‚æœåƒåœ¨é¡ºåºè¿è¡Œçš„åº”ç”¨ç¨‹åºä¸­é‚£æ ·ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ‰§è¡Œè¿™äº›è¯·æ±‚ï¼Œå°†çœ‹åˆ°å¤åˆçš„æ€§èƒ½å½±å“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ­£åœ¨ç¼–å†™ä¸€ä¸ªéœ€è¦ä¸‹è½½ 100 ä¸ªç½‘é¡µæˆ–æ‰§è¡Œ 100 ä¸ªæŸ¥è¯¢çš„åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªæŸ¥è¯¢éœ€è¦ 1 ç§’çš„æ‰§è¡Œæ—¶é—´ï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºå°†è‡³å°‘éœ€è¦ 100 ç§’æ‰èƒ½è¿è¡Œå®Œæˆã€‚ä½†æ˜¯ï¼Œå¦‚æœåˆ©ç”¨å¹¶å‘æ€§ï¼ŒåŒæ—¶å¯åŠ¨ä¸‹è½½å’Œç­‰å¾…ï¼Œç†è®ºä¸Šå¯åœ¨çŸ­çŸ­ 1 ç§’å†…å®Œæˆè¿™äº›æ“ä½œã€‚**

**asyncio æœ€åˆæ˜¯åœ¨ Python3.4 ä¸­å¼•å…¥çš„ï¼Œä½œä¸ºåœ¨å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ä¹‹å¤–ï¼Œå¤„ç†è¿™äº›é«˜åº¦å¹¶å‘å·¥ä½œè´Ÿè½½çš„å¦ä¸€ç§æ–¹å¼ã€‚å¯¹äºä½¿ç”¨ IO æ“ä½œçš„åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œé€‚å½“åœ°åˆ©ç”¨è¿™ä¸ªåº“å¯ä»¥æå¤§åœ°æé«˜æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡ï¼Œå¹¶å¯åŒæ—¶å¯åŠ¨è®¸å¤šé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ã€‚**

### ä»€ä¹ˆæ˜¯ asyncioï¼Ÿ

**åœ¨åŒæ­¥åº”ç”¨ç¨‹åºä¸­ï¼Œä»£ç æŒ‰é¡ºåºè¿è¡Œï¼Œä¸‹ä¸€è¡Œä»£ç åœ¨å‰ä¸€è¡Œä»£ç å®Œæˆåç«‹å³è¿è¡Œï¼Œå¹¶ä¸”ä¸€æ¬¡åªå‘ç”Ÿä¸€ä»¶äº‹ã€‚è¯¥æ¨¡å‹é€‚ç”¨äºè®¸å¤šåº”ç”¨ç¨‹åºï¼Œä½†å¦‚æœä¸€è¡Œä»£ç è¿è¡Œç‰¹åˆ«æ…¢æ€ä¹ˆåŠï¼Ÿè¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¿è¡Œå¾ˆæ…¢çš„ä»£ç è¡Œä¹‹åçš„å…¶å®ƒæ‰€æœ‰ä»£ç éƒ½å°†è¢«å¡ä½ï¼Œå¿…é¡»ç­‰å¾…è¯¥è¡Œä»£ç æ‰§è¡Œå®Œæˆã€‚è¿™äº›æ½œåœ¨çš„è¿è¡Œè¾ƒæ…¢çš„ä»£ç è¡Œå¯èƒ½ä¼šé˜»æ­¢åº”ç”¨ç¨‹åºè¿è¡Œä»»ä½•å…¶ä»–ä»£ç ã€‚è®¸å¤šäººåœ¨æ“ä½œå›¾å½¢ç•Œé¢åº”ç”¨ç¨‹åºæ—¶é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åœ¨ç•Œé¢ä¸Šå››å¤„å•å‡»ï¼Œç›´åˆ°åº”ç”¨ç¨‹åºå†»ç»“å¡æ­»ï¼Œå‡ºç°ä¸€ä¸ªå¾®è°ƒå™¨æˆ–ä¸€ä¸ªæ— å“åº”çš„ç”¨æˆ·ç•Œé¢ã€‚è¿™æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºè¢«é˜»æ­¢ä»è€Œå¯¼è‡´ç³Ÿç³•ç”¨æˆ·ä½“éªŒçš„ç¤ºä¾‹ã€‚**

**å°½ç®¡ä»»ä½•æ“ä½œéƒ½å¯ä»¥é˜»å¡åº”ç”¨ç¨‹åºï¼Œå¦‚æœå®ƒèŠ±è´¹çš„æ—¶é—´è¶³å¤Ÿé•¿ï¼Œè®¸å¤šåº”ç”¨ç¨‹åºä¼šé˜»å¡ç­‰ IOã€‚IO æ˜¯æŒ‡è®¡ç®—æœºçš„è¾“å…¥å’Œè¾“å‡ºè®¾å¤‡ï¼Œä¾‹å¦‚é”®ç›˜ã€ç¡¬ç›˜é©±åŠ¨å™¨ï¼Œä»¥åŠæœ€å¸¸è§çš„ç½‘å¡ï¼Œè¿™äº›æ“ä½œç­‰å¾…ç”¨æˆ·è¾“å…¥å†…å®¹æˆ–ä»åŸºäº Web çš„ API æ£€ç´¢å†…å®¹ã€‚åœ¨åŒæ­¥åº”ç”¨ç¨‹åºä¸­ï¼ˆç›¸å¯¹å¼‚æ­¥åº”ç”¨ç¨‹åºè€Œè¨€ï¼‰ï¼Œæˆ‘ä»¬å°†ç­‰å¾…è¿™äº›æ“ä½œå®Œæˆï¼Œç„¶åæ‰èƒ½è¿è¡Œå…¶å®ƒæ“ä½œã€‚è¿™å¯èƒ½å¯¼è‡´æ€§èƒ½å’Œå“åº”æ€§é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬åªèƒ½åœ¨åŒä¸€æ—¶é—´è¿è¡Œä¸€ä¸ªé•¿æ—¶é—´çš„æ“ä½œï¼Œå¹¶ä¸”è¯¥æ“ä½œå°†é˜»æ­¢åº”ç”¨ç¨‹åºæ‰§è¡Œå…¶å®ƒä»»ä½•æ“ä½œã€‚**

**æ­¤é—®é¢˜çš„ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯å¼•å…¥å¹¶å‘æ€§ã€‚ç®€å•æ¥è¯´ï¼Œå¹¶å‘æ„å‘³ç€å…è®¸åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ã€‚åœ¨å¹¶å‘ IO çš„æƒ…å†µä¸‹ï¼Œå…è®¸åŒæ—¶å‘å‡ºå¤šä¸ª Web è¯·æ±‚æˆ–å…è®¸å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿æ¥åˆ° Web æœåŠ¡å™¨ã€‚**

**æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åœ¨ Python ä¸­å®ç°è¿™ç§å¹¶å‘æ€§ï¼ŒPython ç”Ÿæ€ç³»ç»Ÿçš„æœ€æ–°æˆå‘˜ä¹‹ä¸€æ˜¯ asyncio åº“ã€‚asyncio æ˜¯å¼‚æ­¥ IO çš„ç¼©å†™ï¼Œå®ƒæ˜¯ä¸€ä¸ª Python åº“ï¼Œå…è®¸ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹è¿è¡Œä»£ç ã€‚è¿™è®©æˆ‘ä»¬å¯ä»¥ä¸€æ¬¡å¤„ç†å¤šä¸ª IO æ“ä½œï¼ŒåŒæ—¶ä»ç„¶å…è®¸åº”ç”¨ç¨‹åºä¿æŒå¯¹å¤–ç•Œçš„å“åº”ã€‚**

**é‚£ä»€ä¹ˆæ˜¯å¼‚æ­¥ç¼–ç¨‹å‘¢ï¼Ÿè¿™æ„å‘³ç€ä¸€ä¸ªç‰¹å®šçš„é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡å¯ä»¥åœ¨åå°è¿è¡Œï¼Œä¸ä¸»åº”ç”¨ç¨‹åºåˆ†å¼€ã€‚ç³»ç»Ÿå¯ä»¥è‡ªç”±åœ°æ‰§è¡Œä¸ä¾èµ–äºè¯¥ä»»åŠ¡çš„å…¶ä»–å·¥ä½œï¼Œè€Œä¸æ˜¯é˜»æ­¢å…¶ä»–æ‰€æœ‰åº”ç”¨ç¨‹åºä»£ç ç­‰å¾…è¯¥é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡å®Œæˆã€‚ä¸€æ—¦é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡å®Œæˆä¼šæ”¶åˆ°å®ƒå·²ç»å®Œæˆçš„é€šçŸ¥ï¼Œä»¥ä¾¿å¯¹ç»“æœè¿›è¡Œå¤„ç†ã€‚**

**åœ¨ Python 3.4 ä¸­ï¼Œasyncio é¦–å…ˆå¼•å…¥äº†è£…é¥°å™¨å’Œç”Ÿæˆå™¨é€šè¿‡ yield from æ¥å®šä¹‰åç¨‹ã€‚åç¨‹æ˜¯ä¸€ç§æ–¹æ³•ï¼Œå½“æœ‰ä¸€ä¸ªå¯èƒ½é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡æ—¶ï¼Œå®ƒå¯ä»¥æš‚åœï¼Œç„¶ååœ¨ä»»åŠ¡å®Œæˆæ—¶æ¢å¤ã€‚åœ¨ Python3.5 ä¸­ï¼Œå½“å…³é”®å­— async å’Œ await è¢«æ˜¾å¼æ·»åŠ åˆ°è¯­è¨€ä¸­æ—¶ï¼Œè¯¥è¯­è¨€å®ç°äº†å¯¹åç¨‹å’Œå¼‚æ­¥ç¼–ç¨‹çš„é¡¶çº§æ”¯æŒã€‚è¿™ç§è¯­æ³•åœ¨ C# å’Œ JavaScript ç­‰å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­å¾ˆå¸¸è§ï¼Œä½¿å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒæ˜¯åŒæ­¥è¿è¡Œçš„ã€‚è¿™æ ·çš„å¼‚æ­¥ä»£ç æ˜“äºé˜…è¯»å’Œç†è§£ï¼Œå› ä¸ºå®ƒçœ‹èµ·æ¥åƒå¤§å¤šæ•°è½¯ä»¶å·¥ç¨‹å¸ˆç†Ÿæ‚‰çš„é¡ºåºæµã€‚è€Œ asyncio æ˜¯ä¸€ä¸ªåº“ï¼Œä½¿ç”¨ç§°ä¸ºå•çº¿ç¨‹äº‹ä»¶å¾ªç¯çš„å¹¶å‘æ¨¡å‹ä»¥å¼‚æ­¥æ–¹å¼æ‰§è¡Œè¿™äº›åç¨‹ã€‚**

**è™½ç„¶ asyncio çš„åå­—å¯èƒ½ä¼šè®©æˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªåº“åªé€‚ç”¨äº IO æ“ä½œï¼Œä½†å®ƒä¹Ÿå¯é€šè¿‡ä¸å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ç›¸äº’æ“ä½œæ¥å¤„ç†å…¶ä»–ç±»å‹çš„æ“ä½œã€‚é€šè¿‡è¿™ç§äº’æ“ä½œæ€§ï¼Œå¯ä½¿ç”¨çº¿ç¨‹å’Œè¿›ç¨‹çš„ async ä¸ await è¯­æ³•ï¼Œä½¿è¿™äº›å·¥ä½œæµæ›´å®¹æ˜“ç†è§£ã€‚è¿™æ„å‘³ç€è¿™ä¸ªåº“ä¸ä»…é€‚ç”¨äºåŸºäº IO çš„å¹¶å‘æ€§ï¼Œè¿˜å¯ä»¥ç”¨äº CPU å¯†é›†å‹ä»£ç ã€‚ä¸ºæ›´å¥½åœ°ç†è§£ asyncio å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¤„ç†ä½•ç§ç±»å‹çš„å·¥ä½œè´Ÿè½½ï¼Œä»¥åŠå“ªç§å¹¶å‘æ¨¡å‹æœ€é€‚åˆå“ªç§å¹¶å‘ç±»å‹ï¼Œä¸‹é¢æ¢ç´¢ IO å¯†é›†å‹å’Œ CPU å¯†é›†å‹æ“ä½œä¹‹é—´çš„å·®å¼‚ã€‚**

### ä»€ä¹ˆæ˜¯ IO å¯†é›†å‹å’Œ CPU å¯†é›†å‹

**å°†ä¸€ä¸ªæ“ä½œç§°ä¸º IO å¯†é›†å‹æˆ– CPU å¯†é›†å‹æ—¶ï¼ŒæŒ‡çš„æ˜¯é˜»æ­¢è¯¥æ“ä½œæ›´å¿«åœ°è¿è¡Œçš„é™åˆ¶å› ç´ ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæé«˜æ“ä½œæ‰€ç»‘å®šçš„å¯¹è±¡çš„æ€§èƒ½ï¼Œè¯¥æ“ä½œå°†åœ¨æ›´çŸ­æ—¶é—´å†…å®Œæˆã€‚**

**åœ¨ CPU å¯†é›†å‹æ“ä½œçš„æƒ…å†µä¸‹ï¼Œå¦‚æœ CPU æ›´å¼ºå¤§ï¼Œå®ƒå°†æ›´å¿«åœ°å®Œæˆä»»åŠ¡ï¼Œä¾‹å¦‚å°†å…¶æ—¶é’Ÿé€Ÿåº¦ä» 2GHz æé«˜åˆ° 3GHzã€‚åœ¨ IO å¯†é›†å‹æ“ä½œçš„æƒ…å†µä¸‹ï¼Œå¦‚æœ IO è®¾å¤‡èƒ½åœ¨æ›´çŸ­çš„æ—¶é—´å†…å¤„ç†æ›´å¤šæ•°æ®ï¼Œç¨‹åºå°†å˜å¾—æ›´å¿«ã€‚è¿™å¯é€šè¿‡ ISP å¢åŠ ç½‘ç»œå¸¦å®½æˆ–å‡çº§åˆ°æ›´å¿«çš„ç½‘å¡æ¥å®ç°ã€‚**

**CPU å¯†é›†å‹æ“ä½œé€šå¸¸æ˜¯ Python ä¸­çš„è®¡ç®—å’Œå¤„ç†ä»£ç ï¼Œä¾‹å¦‚è®¡ç®— pi çš„æ•°å€¼ï¼Œæˆ–è€…åº”ç”¨ä¸šåŠ¡é€»è¾‘å¾ªç¯éå†å­—å…¸çš„å†…å®¹ã€‚åœ¨ IO å¯†é›†å‹æ“ä½œä¸­ï¼Œå¤§éƒ¨åˆ†æ—¶é—´å°†èŠ±åœ¨ç­‰å¾…ç½‘ç»œæˆ–å…¶ä»– IO è®¾å¤‡ä¸Šï¼Œä¾‹å¦‚å‘ Web æœåŠ¡å™¨å‘å‡ºè¯·æ±‚æˆ–ä»æœºå™¨çš„ç¡¬ç›˜é©±åŠ¨å™¨è¯»å–æ–‡ä»¶ã€‚**

```python
import httpx

res = httpx.get("http://www.baidu.com")  # IO å¯†é›†å‹ï¼ˆweb è¯·æ±‚ï¼‰

items = res.headers.items()

headers = [f"{key}: {val}" for key, val in items]  # CPU å¯†é›†å‹ï¼ˆå“åº”å¤„ç†ï¼‰

formatted_headers = "\n".join(headers)  # CPU å¯†é›†å‹ï¼ˆå­—ç¬¦ä¸²è¿æ¥ï¼‰

with open("headers.txt", "w", encoding="utf-8") as f:
    f.write(formatted_headers)  # IO å¯†é›†å‹ï¼ˆç£ç›˜å†™å…¥ï¼‰
```

**IO å¯†é›†å‹å’Œ CPU å¯†é›†å‹æ“ä½œé€šå¸¸å¹¶å­˜ï¼Œæˆ‘ä»¬é¦–å…ˆå‘å‡ºä¸€ä¸ª IO å¯†é›†å‹è¯·æ±‚æ¥ä¸‹è½½ http://www.baidu.com çš„å†…å®¹ã€‚ä¸€æ—¦å¾—åˆ°å“åº”ï¼Œå°†æ‰§è¡Œä¸€ä¸ª CPU å¯†é›†å‹å¾ªç¯æ¥æ ¼å¼åŒ–å“åº”å¤´ï¼Œå¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºä¸€ä¸ªç”±æ¢è¡Œç¬¦åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚ç„¶åæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶å°†å­—ç¬¦ä¸²å†™å…¥è¯¥æ–‡ä»¶ï¼Œè¿™ä¸¤ç§æ“ä½œéƒ½æ˜¯ IO å¯†é›†å‹æ“ä½œã€‚**

**å¼‚æ­¥ IO å…è®¸åœ¨æ‰§è¡Œ IO æ“ä½œæ—¶æš‚åœç‰¹å®šç¨‹åºçš„æ‰§è¡Œï¼Œå¯åœ¨åå°ç­‰å¾…åˆå§‹ IO å®Œæˆæ—¶è¿è¡Œå…¶ä»–ä»£ç ã€‚è¿™å…è®¸åŒæ—¶æ‰§è¡Œè®¸å¤š IO æ“ä½œï¼Œä»è€Œæ½œåœ¨åœ°åŠ å¿«åº”ç”¨ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ã€‚**

### äº†è§£å¹¶å‘ã€å¹¶è¡Œå’Œå¤šä»»åŠ¡å¤„ç†

**ä¸ºäº†æ·±åˆ»åœ°ç†è§£å¹¶å‘å¦‚ä½•å¸®åŠ©åº”ç”¨ç¨‹åºæ›´å¥½åœ°è¿è¡Œï¼Œé¦–å…ˆåº”å­¦ä¹ å¹¶å……åˆ†ç†è§£å¹¶å‘ç¼–ç¨‹çš„æœ¯è¯­ã€‚æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†å­¦ä¹ æ›´å¤šå…³äºå¹¶å‘çš„å«ä¹‰ï¼Œä»¥åŠ asyncio å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªç§°ä¸ºå¤šä»»åŠ¡çš„æ¦‚å¿µæ¥å®ç°å®ƒã€‚å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§æ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£å®‰æ’å’Œæ‰§è¡Œå„ç§ä»»åŠ¡ã€æ–¹æ³•ä¸é©±åŠ¨åŠ¨ä½œçš„ä¾‹ç¨‹ã€‚**

#### å¹¶å‘

**å½“æˆ‘ä»¬è¯´ä¸¤ä¸ªä»»åŠ¡å¹¶å‘æ—¶ï¼Œæ˜¯æŒ‡å®ƒä»¬åœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…åŒæ—¶æ‰§è¡Œã€‚ä¾‹å¦‚ä¸€ä¸ªé¢åŒ…å¸ˆè¦çƒ˜ç„™ä¸¤ç§ä¸åŒçš„è›‹ç³•ï¼Œè¦çƒ˜ç„™è¿™äº›è›‹ç³•ï¼Œéœ€è¦é¢„çƒ­çƒ¤ç®±ã€‚æ ¹æ®çƒ¤ç®±å’Œçƒ˜ç„™æ¸©åº¦çš„ä¸åŒï¼Œé¢„çƒ­å¯èƒ½éœ€è¦å‡ ååˆ†é’Ÿï¼Œä½†ä¸éœ€è¦ç­‰çƒ¤ç®±å®Œæˆé¢„çƒ­åæ‰å¼€å§‹å…¶ä»–å·¥ä½œï¼Œæ¯”å¦‚æŠŠé¢ç²‰ã€ç³–å’Œé¸¡è›‹æ··åˆåœ¨ä¸€èµ·ã€‚åœ¨çƒ¤ç®±é¢„çƒ­è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åšå…¶ä»–å·¥ä½œï¼Œç›´åˆ°çƒ¤ç®±å‘å‡ºæç¤ºéŸ³ï¼Œå‘Šè¯‰æˆ‘ä»¬å®ƒå·²ç»é¢„çƒ­å®Œæˆäº†ã€‚**

**æˆ‘ä»¬ä¹Ÿä¸éœ€è¦é™åˆ¶è‡ªå·±åœ¨å®Œæˆç¬¬ä¸€ä¸ªè›‹ç³•ä¹‹åæ‰å¼€å§‹åšç¬¬äºŒä¸ªè›‹ç³•ã€‚å¼€å§‹åšè›‹ç³•é¢ç³Šï¼Œå°†å…¶æ”¾è¿›æ…æ‹Œæœºï¼Œå½“ç¬¬ä¸€å›¢é¢ç³Šæ…æ‹Œå®Œæ¯•ï¼Œå°±å¼€å§‹å‡†å¤‡ç¬¬äºŒå›¢é¢ç³Šã€‚åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼ŒåŒæ—¶åœ¨ä¸åŒçš„ä»»åŠ¡ä¹‹é—´åˆ‡æ¢ã€‚è¿™ç§ä»»åŠ¡ä¹‹é—´çš„åˆ‡æ¢ï¼ˆçƒ¤ç®±åŠ çƒ­æ—¶åšå…¶ä»–äº‹æƒ…ï¼Œåœ¨ä¸¤ä¸ªä¸åŒçš„è›‹ç³•ä¹‹é—´åˆ‡æ¢ï¼‰æ˜¯å¹¶å‘è¡Œä¸ºã€‚**

#### å¹¶è¡Œ

**å½“æˆ‘ä»¬è¯´ä¸¤ä¸ªä»»åŠ¡å¹¶è¡Œæ—¶ï¼Œæ˜¯æŒ‡å®ƒä»¬åœ¨åŒä¸€ä¸ªæ—¶é—´ç‚¹åŒæ—¶æ‰§è¡Œã€‚å›åˆ°è›‹ç³•çƒ˜ç„™ç¤ºä¾‹ï¼Œå‡è®¾æœ‰ç¬¬äºŒä¸ªé¢åŒ…å¸ˆçš„å¸®åŠ©ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªé¢åŒ…å¸ˆå¯ä»¥åˆ¶ä½œç¬¬ 1 ä¸ªè›‹ç³•ï¼Œè€Œç¬¬äºŒä¸ªé¢åŒ…å¸ˆåŒæ—¶åˆ¶ä½œç¬¬ 2 ä¸ªè›‹ç³•ã€‚ä¸¤ä¸ªäººåŒæ—¶åˆ¶ä½œé¢ç³Šå±äºå¹¶è¡Œè¿è¡Œï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªä¸åŒçš„ä»»åŠ¡åŒæ—¶è¿è¡Œã€‚**

**ä¸€å¥è¯æ€»ç»“å¹¶å‘å’Œå¹¶è¡Œä¹‹é—´çš„åŒºåˆ«ï¼š**

- **å¹¶å‘ï¼šæœ‰å¤šä¸ªä»»åŠ¡åœ¨è¿è¡Œï¼Œä½†åœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹ï¼Œåªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨è¿è¡Œï¼›**
- **å¹¶è¡Œï¼šæœ‰å¤šä¸ªä»»åŠ¡åœ¨è¿è¡Œï¼Œä½†åœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹ï¼Œä»ç„¶æœ‰å¤šä¸ªä»»åŠ¡åŒæ—¶è¿è¡Œï¼›**

**å›åˆ°æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºï¼Œæƒ³è±¡æœ‰ä¸¤ä¸ªåº”ç”¨ç¨‹åºåœ¨è¿è¡Œã€‚åœ¨åªæœ‰å¹¶å‘çš„ç³»ç»Ÿä¸­ï¼Œå¯ä»¥åœ¨è¿™äº›åº”ç”¨ç¨‹åºä¹‹é—´åˆ‡æ¢ï¼Œå…ˆè®©ä¸€ä¸ªåº”ç”¨ç¨‹åºè¿è¡Œä¸€ä¼šå„¿ï¼Œç„¶åè®©å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºè¿è¡Œä¸€ä¼šå„¿ã€‚å¦‚æœåˆ‡æ¢çš„é€Ÿåº¦è¶³å¤Ÿå¿«ï¼Œå°±ä¼šå‡ºç°ä¸¤ä»¶äº‹åŒæ—¶å‘ç”Ÿçš„ç°è±¡ï¼ˆæˆ–è€…è¯´æ˜¯å‡è±¡ï¼‰ã€‚ä½†åœ¨ä¸€ä¸ªå¹¶è¡Œçš„ç³»ç»Ÿä¸­ï¼Œä¸¤ä¸ªåº”ç”¨ç¨‹åºåŒæ—¶è¿è¡Œï¼Œç³»ç»ŸåŒæ—¶å…¨åŠ›è¿è¡Œä¸¤ä¸ªä»»åŠ¡ï¼Œè€Œä¸æ˜¯åœ¨ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚**

**å¹¶å‘å’Œå¹¶è¡Œçš„æ¦‚å¿µç›¸ä¼¼ï¼Œå¹¶ä¸”ç»å¸¸å®¹æ˜“æ··æ·†ï¼Œä¸€å®šè¦å¯¹å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æœ‰æ¸…æ¥šçš„è®¤è¯†ã€‚**

![å¹¶è¡Œä¸å¹¶å‘çš„åŒºåˆ«](https://liberc.oss-cn-shanghai.aliyuncs.com/pastedimage/image/Pasted%20image%2020240223112423.png)

#### å¹¶è¡Œä¸å¹¶å‘çš„åŒºåˆ«

**å¹¶å‘å…³æ³¨çš„æ˜¯å¯ä»¥å½¼æ­¤ç‹¬ç«‹å‘ç”Ÿçš„å¤šä¸ªä»»åŠ¡ï¼Œå¯ä»¥åœ¨åªæœ‰ä¸€ä¸ªå†…æ ¸çš„ CPU ä¸Šå®ç°å¹¶å‘ï¼Œå› ä¸ºè¯¥æ“ä½œå°†é‡‡ç”¨æŠ¢å å¼å¤šä»»åŠ¡çš„æ–¹å¼åœ¨ä»»åŠ¡ä¹‹é—´åˆ‡æ¢ã€‚ç„¶è€Œå¹¶è¡Œæ„å‘³å¿…é¡»åŒæ—¶æ‰§è¡Œä¸¤ä¸ªæˆ–å¤šä¸ªä»»åŠ¡ï¼Œåœ¨åªå…·æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„æœºå™¨ä¸Šï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚å¦‚æœæƒ³æˆä¸ºå¯èƒ½ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡çš„å¤šæ ¸CPUã€‚**

**è™½ç„¶å¹¶è¡Œæ„å‘³ç€å¹¶å‘ï¼Œä½†å¹¶å‘å¹¶ä¸æ€»æ˜¯æ„å‘³ç€å¹¶è¡Œã€‚åœ¨å¤šæ ¸æœºå™¨ä¸Šè¿è¡Œçš„å¤šçº¿ç¨‹åº”ç”¨ç¨‹åºæ—¢æ˜¯å¹¶å‘çš„åˆæ˜¯å¹¶è¡Œçš„ã€‚åœ¨æ­¤è®¾ç½®ä¸­ï¼ŒåŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡ï¼Œå¹¶æœ‰å¤šä¸ªå†…æ ¸ç‹¬ç«‹æ‰§è¡Œä¸è¿™äº›ä»»åŠ¡ç›¸å…³çš„ä»£ç ã€‚ä½†æ˜¯ï¼Œé€šè¿‡å¤šä»»åŠ¡å¤„ç†ï¼Œå¯åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œè€Œåœ¨ç»™å®šæ—¶é—´åªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œã€‚**

#### ä»€ä¹ˆæ˜¯å¤šä»»åŠ¡

**å¤šä»»åŠ¡å¤„ç†åœ¨å½“ä»Šä¸–ç•Œæ— å¤„ä¸åœ¨ï¼Œäººä»¬ä¸€è¾¹åšæ—©é¤ä¸€è¾¹çœ‹ç”µè§†ï¼Œä¸€è¾¹æ¥ç”µè¯ä¸€è¾¹ç­‰æ°´çƒ§å¼€æ¥æ³¡èŒ¶ã€‚ç”šè‡³åœ¨æ—…è¡Œé€”ä¸­ï¼Œäººä»¬ä¹Ÿå¯ä»¥å¤šä»»åŠ¡å¤„ç†ï¼Œä¾‹å¦‚åœ¨æ­ä¹˜é£æœºæ—¶è¯»è‡ªå·±å–œæ¬¢çš„ä¹¦ã€‚æœ¬èŠ‚è®¨è®ºä¸¤ç§ä¸»è¦çš„å¤šä»»åŠ¡å¤„ç†ï¼šæŠ¢å å¼å¤šä»»åŠ¡å¤„ç†å’ŒååŒå¤šä»»åŠ¡å¤„ç†ã€‚**

**æŠ¢å å¼å¤šä»»åŠ¡å¤„ç†**

**åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šå¦‚ä½•é€šè¿‡ä¸€ä¸ªç§°ä¸ºæ—¶é—´ç‰‡çš„è¿‡ç¨‹ï¼Œåœ¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ä¹‹é—´åˆ‡æ¢ã€‚å½“æ“ä½œç³»ç»Ÿåœ¨ä»»åŠ¡ä¹‹é—´åˆ‡æ¢æ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæŠ¢å ã€‚è¿™ç§æœºåˆ¶å¦‚ä½•åœ¨åå°å·¥ä½œå–å†³äºæ“ä½œç³»ç»Ÿæœ¬èº«ã€‚å®ƒä¸»è¦æ˜¯é€šè¿‡ä½¿ç”¨å¤šä¸ªçº¿ç¨‹æˆ–å¤šä¸ªè¿›ç¨‹æ¥å®ç°çš„ã€‚**

**ååŒå¤šä»»åŠ¡å¤„ç†**

**åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œä¸æ˜¯ä¾èµ–æ“ä½œç³»ç»Ÿæ¥å†³å®šä½•æ—¶åœ¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ä¹‹é—´åˆ‡æ¢ï¼Œè€Œæ˜¯åœ¨åº”ç”¨ç¨‹åºä¸­æ˜¾å¼åœ°ç¼–å†™ä»£ç ï¼Œæ¥è®©å…¶ä»–ä»»åŠ¡å…ˆè¿è¡Œã€‚åº”ç”¨ç¨‹åºä¸­çš„ä»»åŠ¡åœ¨å®ƒä»¬ååŒçš„æ¨¡å‹ä¸­è¿è¡Œï¼Œæ˜ç¡®åœ°è¯´ï¼š"å…ˆæš‚åœæˆ‘çš„ä»»åŠ¡ä¸€æ®µæ—¶é—´ï¼Œè®©å…¶ä»–ä»»åŠ¡å…ˆæ‰§è¡Œ"ã€‚**

#### ååŒå¤šä»»åŠ¡å¤„ç†çš„ä¼˜åŠ¿

**asyncio ä½¿ç”¨ååŒå¤šä»»åŠ¡æ¥å®ç°å¹¶å‘æ€§ï¼Œå½“åº”ç”¨ç¨‹åºè¾¾åˆ°å¯ä»¥ç­‰å¾…ä¸€æ®µæ—¶é—´ä»¥è¿”å›ç»“æœçš„æ—¶é—´ç‚¹æ—¶ï¼Œåœ¨ä»£ç ä¸­æ˜¾å¼åœ°æ ‡è®°å®ƒï¼Œå¹¶è®©å…¶å®ƒä»£ç æ‰§è¡Œã€‚ä¸€æ—¦æ ‡è®°çš„ä»»åŠ¡å®Œæˆï¼Œåº”ç”¨ç¨‹åºå°±"é†’æ¥"å¹¶ç»§ç»­æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚è¿™æ˜¯ä¸€ç§å¹¶å‘å½¢å¼ï¼Œå› ä¸ºå¯åŒæ—¶å¯åŠ¨å¤šä¸ªä»»åŠ¡ï¼Œä½†é‡è¦çš„æ˜¯ï¼Œè¿™ä¸æ˜¯å¹¶è¡Œæ¨¡å¼ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šåŒæ—¶æ‰§è¡Œä»£ç ã€‚**

**ååŒå¤šä»»åŠ¡å¤„ç†ä¼˜äºæŠ¢å å¼å¤šä»»åŠ¡å¤„ç†ã€‚é¦–å…ˆï¼ŒååŒå¼å¤šä»»åŠ¡å¤„ç†çš„èµ„æºå¯†é›†åº¦è¾ƒä½ã€‚å½“æ“ä½œç³»ç»Ÿéœ€è¦åœ¨çº¿ç¨‹æˆ–è¿›ç¨‹ä¹‹é—´åˆ‡æ¢æ—¶ï¼Œå°†æ¶‰åŠä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯å¯†é›†æ“ä½œï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿåªæœ‰ä¿å­˜æœ‰å…³æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æˆ–çº¿ç¨‹çš„ä¿¡æ¯ä¹‹åæ‰èƒ½é‡æ–°è¿›è¡ŒåŠ è½½ã€‚**

### äº†è§£è¿›ç¨‹ã€çº¿ç¨‹ã€å¤šçº¿ç¨‹å’Œå¤šå¤„ç†

**ä¸ºæ›´å¥½åœ°äº†è§£ Python ä¸­å¹¶å‘çš„å·¥ä½œåŸç†ï¼Œé¦–å…ˆéœ€è¦äº†è§£çº¿ç¨‹å’Œè¿›ç¨‹å¦‚ä½•å·¥ä½œçš„åŸºç¡€çŸ¥è¯†ï¼Œç„¶åç ”ç©¶å¦‚ä½•å°†å®ƒä»¬ç”¨äºå¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ä»¥åŒæ—¶æ‰§è¡Œä»»åŠ¡ã€‚è®©æˆ‘ä»¬ä»è¿›ç¨‹å’Œçº¿ç¨‹çš„å®šä¹‰å¼€å§‹å­¦ä¹ ã€‚**

#### è¿›ç¨‹

**è¿›ç¨‹æ˜¯å…·æœ‰å…¶å®ƒåº”ç”¨ç¨‹åºæ— æ³•è®¿é—®çš„å†…å­˜ç©ºé—´çš„åº”ç”¨ç¨‹åºè¿è¡ŒçŠ¶æ€ï¼Œåˆ›å»º Python è¿›ç¨‹çš„ä¸€ä¸ªä¾‹å­æ˜¯è¿è¡Œä¸€ä¸ªç®€å•çš„ "hello world" åº”ç”¨ç¨‹åºï¼Œæˆ–åœ¨å‘½ä»¤è¡Œè¾“å…¥ Python æ¥å¯åŠ¨ REPLï¼ˆäº¤äº’å¼ç¯å¢ƒï¼‰ã€‚**

**å¤šä¸ªè¿›ç¨‹å¯ä»¥åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼Œå¦‚æœæœ‰ä¸€å°æ‹¥æœ‰å¤šæ ¸ CPU çš„æœºå™¨ï¼Œå°±å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªè¿›ç¨‹ã€‚åœ¨åªæœ‰ä¸€ä¸ªæ ¸çš„ CPU ä¸Šï¼Œä»å¯é€šè¿‡æ—¶é—´ç‰‡ï¼ŒåŒæ—¶è¿è¡Œå¤šä¸ªåº”ç”¨ç¨‹åºã€‚å½“æ“ä½œç³»ç»Ÿä½¿ç”¨æ—¶é—´ç‰‡æ—¶ï¼Œå®ƒä¼šåœ¨ä¸€æ®µæ—¶é—´åè‡ªåŠ¨åˆ‡æ¢ä¸‹ä¸€ä¸ªè¿›ç¨‹å¹¶è¿è¡Œå®ƒã€‚ç¡®å®šä½•æ—¶å‘ç”Ÿæ­¤åˆ‡æ¢çš„ç®—æ³•å› æ“ä½œç³»ç»Ÿè€Œå¼‚ã€‚**

#### çº¿ç¨‹

**çº¿ç¨‹å¯ä»¥è¢«è®¤ä¸ºæ˜¯è½»é‡çº§è¿›ç¨‹ï¼Œæ­¤å¤–çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿå¯ä»¥ç®¡ç†çš„æœ€å°ç»“æ„ï¼Œå®ƒä»¬ä¸åƒè¿›ç¨‹é‚£æ ·æœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œç›¸åï¼Œå®ƒä»¬å…±äº«è¿›ç¨‹çš„å†…å­˜ã€‚çº¿ç¨‹ä¸åˆ›å»ºå®ƒä»¬çš„è¿›ç¨‹å…³è”ï¼Œä¸€ä¸ªè¿›ç¨‹æ€»æ˜¯è‡³å°‘æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„çº¿ç¨‹ï¼Œé€šå¸¸ç§°ä¸ºä¸»çº¿ç¨‹ã€‚ä¸€ä¸ªè¿›ç¨‹è¿˜å¯ä»¥åˆ›å»ºå…¶ä»–çº¿ç¨‹ï¼Œé€šå¸¸ç§°ä¸ºå·¥ä½œçº¿ç¨‹æˆ–åå°çº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å¯ä¸ä¸»çº¿ç¨‹åŒæ—¶æ‰§è¡Œå…¶ä»–å·¥ä½œã€‚çº¿ç¨‹å¾ˆåƒè¿›ç¨‹ï¼Œå¯ä»¥åœ¨å¤šæ ¸ CPU ä¸Šå¹¶è¡Œè¿è¡Œï¼Œæ“ä½œç³»ç»Ÿä¹Ÿå¯é€šè¿‡æ—¶é—´ç‰‡åœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ã€‚å½“è¿è¡Œä¸€ä¸ªæ™®é€šçš„ Python åº”ç”¨ç¨‹åºæ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ä»¥åŠä¸€ä¸ªè´Ÿè´£æ‰§è¡Œå…·ä½“ä»£ç çš„ä¸»çº¿ç¨‹ã€‚**

> **è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„æœ€å°å•å…ƒï¼Œçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿç”¨æ¥è°ƒåº¦ CPU çš„æœ€å°å•å…ƒã€‚è¿›ç¨‹å¥½æ¯”ä¸€ä¸ªæˆ¿å­ï¼Œè€Œçº¿ç¨‹æ˜¯æˆ¿å­é‡Œé¢å¹²æ´»çš„äººï¼Œæ‰€ä»¥ä¸€ä¸ªè¿›ç¨‹é‡Œé¢å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹é‡Œé¢çš„èµ„æºã€‚å› æ­¤çœŸæ­£ç”¨æ¥å·¥ä½œçš„æ˜¯çº¿ç¨‹ï¼Œè¿›ç¨‹åªè´Ÿè´£æä¾›ç›¸åº”çš„å†…å­˜ç©ºé—´å’Œèµ„æºã€‚**

```python
import os
import threading

print(f"è¿›ç¨‹å¯åŠ¨ï¼Œpid ä¸º {os.getpid()}")
print(f"è¯¥è¿›ç¨‹å†…éƒ¨è¿è¡Œ {threading.active_count()} ä¸ªçº¿ç¨‹")
print(f"å½“å‰æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ˜¯ {threading.current_thread().name}")
"""
è¿›ç¨‹å¯åŠ¨ï¼Œpid ä¸º 16900
è¯¥è¿›ç¨‹å†…éƒ¨è¿è¡Œ 1 ä¸ªçº¿ç¨‹
å½“å‰æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ˜¯ MainThread
"""
```

**è¿›ç¨‹è¿˜å¯åˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å¯é€šè¿‡æ‰€è°“çš„å¤šçº¿ç¨‹æŠ€æœ¯åŒæ—¶å®Œæˆå…¶ä»–å·¥ä½œï¼Œå¹¶å…±äº«è¿›ç¨‹çš„å†…å­˜ã€‚**

```python
import threading

def hello_from_threading():
    print(f"Hello {threading.current_thread().name} çº¿ç¨‹")

hello_thread = threading.Thread(target=hello_from_threading)
hello_thread.start()

print(f"è¯¥è¿›ç¨‹å†…éƒ¨è¿è¡Œ {threading.active_count()} ä¸ªçº¿ç¨‹")
print(f"å½“å‰æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ˜¯ {threading.current_thread().name}")
hello_thread.join()
"""
Hello Thread-1 çº¿ç¨‹
è¯¥è¿›ç¨‹å†…éƒ¨è¿è¡Œ 2 ä¸ªçº¿ç¨‹
å½“å‰æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ˜¯ MainThread
"""
```

**æ³¨æ„ï¼šå½“ä½ æ‰§è¡Œè¿™æ®µä»£ç æ—¶ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°æ¥è‡ªä¸¤ä¸ªçº¿ç¨‹å°†æ¶ˆæ¯è¾“å‡ºåœ¨äº†åŒä¸€è¡Œï¼Œè¿™æ˜¯ä¸€ä¸ªç«æ€æ¡ä»¶ï¼Œåç»­è®¨è®ºã€‚**

**å¤šçº¿ç¨‹åº”ç”¨ç¨‹åºæ˜¯åœ¨è®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå®ç°å¹¶å‘çš„å¸¸ç”¨æ–¹æ³•ã€‚ç„¶è€Œåœ¨ Python ä¸­åˆ©ç”¨çº¿ç¨‹çš„å¹¶å‘æ€§å­˜åœ¨ä¸€äº›æŒ‘æˆ˜ï¼Œå› ä¸ºä¼šå—åˆ°å…¨å±€è§£é‡Šå™¨é”çš„é™åˆ¶ï¼Œå¯¼è‡´å¤šçº¿ç¨‹ä»…å¯¹ IO å¯†é›†å‹å·¥ä½œæœ‰ç”¨ã€‚**

**ä½†å¤šçº¿ç¨‹å¹¶ä¸æ˜¯å®ç°å¹¶å‘çš„å”¯ä¸€æ–¹æ³•ï¼Œè¿˜å¯åˆ›å»ºå¤šä¸ªè¿›ç¨‹æ¥åŒæ—¶å·¥ä½œï¼Œè¿™ç§°ä¸ºå¤šè¿›ç¨‹ã€‚åœ¨å¤šè¿›ç¨‹ä¸­ï¼Œçˆ¶è¿›ç¨‹åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªç”±å®ƒç®¡ç†çš„å­è¿›ç¨‹ï¼Œç„¶åå¯å°†ä»»åŠ¡åˆ†é…ç»™å­è¿›ç¨‹ã€‚**

**Python ä¹Ÿæä¾›äº†å¤šè¿›ç¨‹æ¨¡å—æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒçš„ API ç±»ä¼¼äº threading æ¨¡å—ã€‚**

```python
import multiprocessing
import os

def hello_from_process():
    print(f"å½“å‰å­è¿›ç¨‹çš„ pid ä¸º {os.getpid()}")

# åœ¨ Windows ä¸Šå¿…é¡»åŠ ä¸Š if __name__ == '__main__'
# å¦åˆ™å¤šè¿›ç¨‹ä¹å¯åŠ¨å¤±è´¥
if __name__ == '__main__':
    hello_process = multiprocessing.Process(target=hello_from_process)
    hello_process.start()
    hello_process.join()
"""
å½“å‰å­è¿›ç¨‹çš„ pid ä¸º 12532
"""
```

## ğŸ’¡ å®é™…åº”ç”¨

### ä½•æ—¶ä½¿ç”¨ asyncio

1. **IO å¯†é›†å‹åº”ç”¨**ï¼šç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“æŸ¥è¯¢
2. **é«˜å¹¶å‘æœåŠ¡å™¨**ï¼šWeb æœåŠ¡å™¨ã€API æœåŠ¡
3. **çˆ¬è™«åº”ç”¨**ï¼šåŒæ—¶æŠ“å–å¤šä¸ªç½‘é¡µ
4. **å®æ—¶åº”ç”¨**ï¼šèŠå¤©åº”ç”¨ã€æ¸¸æˆæœåŠ¡å™¨

### åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹

```python
import asyncio
import aiohttp

async def fetch_url(url):
    """å¼‚æ­¥è·å–URLå†…å®¹"""
    async with aiohttp.ClientSession() as session:
        async with session.get(url) as response:
            return await response.text()

async def main():
    """ä¸»å‡½æ•°"""
    urls = [
        'http://httpbin.org/delay/1',
        'http://httpbin.org/delay/2',
        'http://httpbin.org/delay/3'
    ]
    
    # å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡
    tasks = [fetch_url(url) for url in urls]
    results = await asyncio.gather(*tasks)
    
    print(f"è·å–äº† {len(results)} ä¸ªå“åº”")

# è¿è¡Œå¼‚æ­¥ç¨‹åº
asyncio.run(main())
```

## âš ï¸ æ³¨æ„äº‹é¡¹

- **GIL é™åˆ¶**ï¼šasyncio ä»ç„¶å—åˆ° GIL é™åˆ¶ï¼Œä½†é€šè¿‡åä½œå¼è°ƒåº¦é¿å…äº†ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€
- **CPU å¯†é›†å‹ä»»åŠ¡**ï¼šçº¯ CPU å¯†é›†å‹ä»»åŠ¡ä¸é€‚åˆ asyncioï¼Œåº”è€ƒè™‘å¤šè¿›ç¨‹
- **å…¼å®¹æ€§**ï¼šç¡®ä¿ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“æ”¯æŒå¼‚æ­¥æ“ä½œ
- **è°ƒè¯•å›°éš¾**ï¼šå¼‚æ­¥ä»£ç çš„è°ƒè¯•å’Œé”™è¯¯è¿½è¸ªç›¸å¯¹å¤æ‚

## ğŸ”— ç›¸å…³å†…å®¹

- [Python åç¨‹åŸºç¡€](../coroutine-basics/)
- [asyncio æ ¸å¿ƒç»„ä»¶](../asyncio-core/)
- [å¤šçº¿ç¨‹ç¼–ç¨‹](../multithreading/)
- [å¤šè¿›ç¨‹ç¼–ç¨‹](../multiprocessing/)

## ğŸ“š æ‰©å±•é˜…è¯»

- [asyncio å®˜æ–¹æ–‡æ¡£](https://docs.python.org/3/library/asyncio.html)
- [Real Python asyncio æ•™ç¨‹](https://realpython.com/async-io-python/)
- [asyncio è®¾è®¡æ¨¡å¼](https://github.com/python/asyncio/wiki)

## ğŸ·ï¸ æ ‡ç­¾

`asyncio` `äº‹ä»¶å¾ªç¯` `åç¨‹` `å¼‚æ­¥ç¼–ç¨‹` `å•çº¿ç¨‹å¹¶å‘`

---

**æœ€åæ›´æ–°**: 2024-01-15  
**ä½œè€…**: Python ç¼–ç¨‹æŒ‡å—  
**ç‰ˆæœ¬**: 1.0