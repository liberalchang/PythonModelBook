<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æŠ½è±¡åŸºç±» - PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£</title>
  <meta name="description" content="ç³»ç»ŸåŒ–æ•´ç†PythonçŸ¥è¯†ä½“ç³»çš„å¼€æºé¡¹ç›®">

  <!-- SEOæ ‡ç­¾ -->
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>æŠ½è±¡åŸºç±» | PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="æŠ½è±¡åŸºç±»" />
<meta name="author" content="Pythonå­¦ä¹ æŒ‡å—" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ç³»ç»ŸåŒ–æ•´ç†PythonçŸ¥è¯†ä½“ç³»çš„å¼€æºé¡¹ç›®" />
<meta property="og:description" content="ç³»ç»ŸåŒ–æ•´ç†PythonçŸ¥è¯†ä½“ç³»çš„å¼€æºé¡¹ç›®" />
<link rel="canonical" href="http://0.0.0.0:4000/PythonModelBook/docs/basics/abstract-classes/" />
<meta property="og:url" content="http://0.0.0.0:4000/PythonModelBook/docs/basics/abstract-classes/" />
<meta property="og:site_name" content="PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-01-01T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="æŠ½è±¡åŸºç±»" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Pythonå­¦ä¹ æŒ‡å—"},"dateModified":"2024-01-01T00:00:00+08:00","datePublished":"2024-01-01T00:00:00+08:00","description":"ç³»ç»ŸåŒ–æ•´ç†PythonçŸ¥è¯†ä½“ç³»çš„å¼€æºé¡¹ç›®","headline":"æŠ½è±¡åŸºç±»","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/PythonModelBook/docs/basics/abstract-classes/"},"url":"http://0.0.0.0:4000/PythonModelBook/docs/basics/abstract-classes/"}</script>
<!-- End Jekyll SEO tag -->


  <!-- æ ·å¼æ–‡ä»¶ -->
  <link rel="stylesheet" href="/PythonModelBook/assets/css/main.css">
  <link rel="stylesheet" href="/PythonModelBook/assets/css/light-theme.css">
  <link rel="stylesheet" href="/PythonModelBook/assets/css/dark-theme.css">

  <!-- å­—ä½“ -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- å›¾æ ‡ -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <!-- æœç´¢åŠŸèƒ½ -->
  <script src="https://unpkg.com/lunr/lunr.js"></script>
</head>

<body>
  <!-- å¯¼èˆªæ  -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-brand">
        <a href="/PythonModelBook/" class="brand-link">
          <i class="fab fa-python"></i>
          <span>PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£</span>
        </a>
      </div>

      <!-- æœç´¢æ¡† -->
      <div class="nav-search">
        <div class="search-container">
          <input type="text" id="search-input" placeholder="æœç´¢æ–‡æ¡£..." class="search-input">
          <i class="fas fa-search search-icon"></i>
          <div id="search-results" class="search-results"></div>
        </div>
      </div>

      <!-- å¯¼èˆªèœå• -->
      <div class="nav-menu">
        <a href="/PythonModelBook/" class="nav-link">é¦–é¡µ</a>
        <a href="/PythonModelBook/docs/" class="nav-link">æ–‡æ¡£</a>
        <a href="/PythonModelBook/about/" class="nav-link">å…³äº</a>
        <button id="theme-toggle" class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜">
          <i class="fas fa-moon"></i>
        </button>
      </div>

      <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
      <button class="mobile-menu-btn" id="mobile-menu-btn">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>

  <!-- ä¸»è¦å†…å®¹ -->
  <main class="main-content">
    <div class="page-container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <header class="page-header">
    <div class="page-header-content">
      <h1 class="page-title">æŠ½è±¡åŸºç±»</h1>
      
      
      <!-- é¢åŒ…å±‘å¯¼èˆª -->
      <nav class="breadcrumb">
        <a href="/PythonModelBook/" class="breadcrumb-item">
          <i class="fas fa-home"></i>
          é¦–é¡µ
        </a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-item current">æŠ½è±¡åŸºç±»</span>
      </nav>
    </div>
  </header>
  
  <!-- é¡µé¢å†…å®¹ -->
  <main class="page-content">
    <article class="page-article">
      <h1 id="pythonæŠ½è±¡åŸºç±»è¯¦è§£">PythonæŠ½è±¡åŸºç±»è¯¦è§£</h1>

<p>æŠ½è±¡åŸºç±»ï¼ˆAbstract Base Classesï¼Œç®€ç§°ABCï¼‰æ˜¯Pythonä¸­ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œå®ƒä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–ï¼Œä¸»è¦ç”¨äºå®šä¹‰æ¥å£å’Œè§„èŒƒå­ç±»çš„ç»“æ„ã€‚é€šè¿‡æŠ½è±¡åŸºç±»ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ›´æ¸…æ™°çš„ç»§æ‰¿å±‚æ¬¡å’Œæ›´å¼ºçš„ç±»å‹æ£€æŸ¥ã€‚</p>

<h2 id="-å­¦ä¹ ç›®æ ‡">ğŸ“š å­¦ä¹ ç›®æ ‡</h2>

<p>é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†èƒ½å¤Ÿï¼š</p>

<ul>
  <li>ç†è§£æŠ½è±¡åŸºç±»çš„æ¦‚å¿µå’Œä½œç”¨</li>
  <li>æŒæ¡abcæ¨¡å—çš„ä½¿ç”¨æ–¹æ³•</li>
  <li>å­¦ä¼šå®šä¹‰å’Œå®ç°æŠ½è±¡åŸºç±»</li>
  <li>äº†è§£æŠ½è±¡æ–¹æ³•ã€æŠ½è±¡å±æ€§çš„ä½¿ç”¨</li>
  <li>æŒæ¡è™šæ‹Ÿå­ç±»çš„æ³¨å†Œæœºåˆ¶</li>
  <li>åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨æŠ½è±¡åŸºç±»è®¾è®¡æ¨¡å¼</li>
</ul>

<h2 id="-æŠ½è±¡åŸºç±»æ¦‚è¿°">ğŸ” æŠ½è±¡åŸºç±»æ¦‚è¿°</h2>

<h3 id="ä»€ä¹ˆæ˜¯æŠ½è±¡åŸºç±»">ä»€ä¹ˆæ˜¯æŠ½è±¡åŸºç±»</h3>

<p>æŠ½è±¡åŸºç±»æ˜¯ä¸€ç§ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–çš„ç±»ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯ï¼š</p>

<ul>
  <li><strong>å®šä¹‰æ¥å£</strong>ï¼šè§„å®šå­ç±»å¿…é¡»å®ç°çš„æ–¹æ³•å’Œå±æ€§</li>
  <li><strong>å¼ºåˆ¶å®ç°</strong>ï¼šç¡®ä¿å­ç±»å®ç°äº†æ‰€æœ‰å¿…è¦çš„æ–¹æ³•</li>
  <li><strong>ç±»å‹æ£€æŸ¥</strong>ï¼šæä¾›isinstance()å’Œç±»å‹æ³¨è§£çš„æ”¯æŒ</li>
  <li><strong>ä»£ç è§„èŒƒ</strong>ï¼šä½œä¸ºä»£ç ç»“æ„çš„è§„èŒƒå’Œæ–‡æ¡£</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="k">class</span> <span class="nc">Animal</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">åŠ¨ç‰©æŠ½è±¡åŸºç±»</span><span class="sh">"""</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">make_sound</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">å‘å‡ºå£°éŸ³çš„æŠ½è±¡æ–¹æ³•</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">ç§»åŠ¨çš„æŠ½è±¡æ–¹æ³•</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="c1"># å¯ä»¥åŒ…å«å…·ä½“æ–¹æ³•
</span>    <span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">__class__</span><span class="p">.</span><span class="n">__name__</span><span class="si">}</span><span class="s"> is sleeping</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># å°è¯•å®ä¾‹åŒ–æŠ½è±¡åŸºç±»ä¼šæŠ¥é”™
# animal = Animal()  # TypeError: Can't instantiate abstract class
</span></code></pre></div></div>

<h2 id="ï¸-abcæ¨¡å—è¯¦è§£">ğŸ—ï¸ abcæ¨¡å—è¯¦è§£</h2>

<h3 id="æ ¸å¿ƒç»„ä»¶">æ ¸å¿ƒç»„ä»¶</h3>

<p>Pythonçš„<code class="language-plaintext highlighter-rouge">abc</code>æ¨¡å—æä¾›äº†åˆ›å»ºæŠ½è±¡åŸºç±»çš„å·¥å…·ï¼š</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">ABC</code>ç±»</strong>ï¼šæ‰€æœ‰æŠ½è±¡åŸºç±»çš„åŸºç±»</li>
  <li><strong><code class="language-plaintext highlighter-rouge">abstractmethod</code></strong>ï¼šæ ‡è®°æŠ½è±¡æ–¹æ³•çš„è£…é¥°å™¨</li>
  <li><strong><code class="language-plaintext highlighter-rouge">abstractproperty</code></strong>ï¼šæ ‡è®°æŠ½è±¡å±æ€§ï¼ˆPython 3.11ååºŸå¼ƒï¼‰</li>
  <li><strong><code class="language-plaintext highlighter-rouge">abstractclassmethod</code></strong>ï¼šæ ‡è®°æŠ½è±¡ç±»æ–¹æ³•</li>
  <li><strong><code class="language-plaintext highlighter-rouge">abstractstaticmethod</code></strong>ï¼šæ ‡è®°æŠ½è±¡é™æ€æ–¹æ³•</li>
  <li><strong><code class="language-plaintext highlighter-rouge">ABCMeta</code></strong>ï¼šæŠ½è±¡åŸºç±»çš„å…ƒç±»</li>
</ul>

<h3 id="åŸºæœ¬ä½¿ç”¨æ–¹æ³•">åŸºæœ¬ä½¿ç”¨æ–¹æ³•</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span><span class="p">,</span> <span class="n">abstractclassmethod</span><span class="p">,</span> <span class="n">abstractstaticmethod</span>

<span class="k">class</span> <span class="nc">Shape</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å›¾å½¢æŠ½è±¡åŸºç±»</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">è®¡ç®—é¢ç§¯çš„æŠ½è±¡æ–¹æ³•</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">è®¡ç®—å‘¨é•¿çš„æŠ½è±¡æ–¹æ³•</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractclassmethod</span>
    <span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">shape_str</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">ä»å­—ç¬¦ä¸²åˆ›å»ºå›¾å½¢çš„æŠ½è±¡ç±»æ–¹æ³•</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractstaticmethod</span>
    <span class="k">def</span> <span class="nf">validate_dimensions</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">éªŒè¯å°ºå¯¸çš„æŠ½è±¡é™æ€æ–¹æ³•</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="c1"># å…·ä½“æ–¹æ³•
</span>    <span class="k">def</span> <span class="nf">describe</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">: é¢ç§¯=</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="nf">area</span><span class="p">()</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="s">, å‘¨é•¿=</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="nf">perimeter</span><span class="p">()</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="sh">"</span>
</code></pre></div></div>

<h2 id="-å®ç°æŠ½è±¡åŸºç±»">ğŸ¯ å®ç°æŠ½è±¡åŸºç±»</h2>

<h3 id="å…·ä½“å­ç±»å®ç°">å…·ä½“å­ç±»å®ç°</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">math</span>

<span class="k">class</span> <span class="nc">Rectangle</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">çŸ©å½¢ç±»</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="sh">"</span><span class="s">çŸ©å½¢</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="n">self</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>
    
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">height</span>
    
    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">width</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">height</span><span class="p">)</span>
    
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">shape_str</span><span class="p">):</span>
        <span class="c1"># è§£æå­—ç¬¦ä¸² "rectangle:width,height"
</span>        <span class="n">parts</span> <span class="o">=</span> <span class="n">shape_str</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">:</span><span class="sh">'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="sh">'</span><span class="s">rectangle</span><span class="sh">'</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sh">"</span><span class="s">ä¸æ˜¯çŸ©å½¢å­—ç¬¦ä¸²</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="nf">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">,</span><span class="sh">'</span><span class="p">))</span>
        <span class="k">return</span> <span class="nf">cls</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
    
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">validate_dimensions</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">width</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">height</span> <span class="o">&gt;</span> <span class="mi">0</span>

<span class="k">class</span> <span class="nc">Circle</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">åœ†å½¢ç±»</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="sh">"</span><span class="s">åœ†å½¢</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
    
    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="p">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">radius</span> <span class="o">**</span> <span class="mi">2</span>
    
    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="p">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">radius</span>
    
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">shape_str</span><span class="p">):</span>
        <span class="c1"># è§£æå­—ç¬¦ä¸² "circle:radius"
</span>        <span class="n">parts</span> <span class="o">=</span> <span class="n">shape_str</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">:</span><span class="sh">'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="sh">'</span><span class="s">circle</span><span class="sh">'</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sh">"</span><span class="s">ä¸æ˜¯åœ†å½¢å­—ç¬¦ä¸²</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="nf">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="nf">cls</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
    
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">validate_dimensions</span><span class="p">(</span><span class="n">radius</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">radius</span> <span class="o">&gt;</span> <span class="mi">0</span>

<span class="c1"># ä½¿ç”¨ç¤ºä¾‹
</span><span class="n">rect</span> <span class="o">=</span> <span class="nc">Rectangle</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">circle</span> <span class="o">=</span> <span class="nc">Circle</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="nf">describe</span><span class="p">())</span>  <span class="c1"># çŸ©å½¢: é¢ç§¯=15.00, å‘¨é•¿=16.00
</span><span class="nf">print</span><span class="p">(</span><span class="n">circle</span><span class="p">.</span><span class="nf">describe</span><span class="p">())</span>  <span class="c1"># åœ†å½¢: é¢ç§¯=50.27, å‘¨é•¿=25.13
</span>
<span class="c1"># ä»å­—ç¬¦ä¸²åˆ›å»º
</span><span class="n">rect2</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">.</span><span class="nf">from_string</span><span class="p">(</span><span class="sh">"</span><span class="s">rectangle:10,6</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">rect2</span><span class="p">.</span><span class="nf">describe</span><span class="p">())</span>  <span class="c1"># çŸ©å½¢: é¢ç§¯=60.00, å‘¨é•¿=32.00
</span></code></pre></div></div>

<h2 id="-æŠ½è±¡å±æ€§">ğŸ”§ æŠ½è±¡å±æ€§</h2>

<h3 id="ä½¿ç”¨propertyå’Œabstractmethod">ä½¿ç”¨@propertyå’Œ@abstractmethod</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="k">class</span> <span class="nc">Vehicle</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">äº¤é€šå·¥å…·æŠ½è±¡åŸºç±»</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">brand</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_brand</span> <span class="o">=</span> <span class="n">brand</span>
    
    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">max_speed</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">æœ€å¤§é€Ÿåº¦æŠ½è±¡å±æ€§</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">fuel_type</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">ç‡ƒæ–™ç±»å‹æŠ½è±¡å±æ€§</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">brand</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_brand</span>
    
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">brand</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">__class__</span><span class="p">.</span><span class="n">__name__</span><span class="si">}</span><span class="s"> å¯åŠ¨äº†</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">Vehicle</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">æ±½è½¦ç±»</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">brand</span><span class="p">,</span> <span class="n">max_speed</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="n">brand</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_max_speed</span> <span class="o">=</span> <span class="n">max_speed</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_speed</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_max_speed</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fuel_type</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sh">"</span><span class="s">æ±½æ²¹</span><span class="sh">"</span>

<span class="k">class</span> <span class="nc">ElectricCar</span><span class="p">(</span><span class="n">Vehicle</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">ç”µåŠ¨æ±½è½¦ç±»</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">brand</span><span class="p">,</span> <span class="n">max_speed</span><span class="p">,</span> <span class="n">battery_capacity</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="n">brand</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_max_speed</span> <span class="o">=</span> <span class="n">max_speed</span>
        <span class="n">self</span><span class="p">.</span><span class="n">battery_capacity</span> <span class="o">=</span> <span class="n">battery_capacity</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_speed</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_max_speed</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fuel_type</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sh">"</span><span class="s">ç”µåŠ›</span><span class="sh">"</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">range</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="c1"># ç®€å•è®¡ç®—ç»­èˆªé‡Œç¨‹
</span>        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">battery_capacity</span> <span class="o">*</span> <span class="mi">5</span>

<span class="c1"># ä½¿ç”¨ç¤ºä¾‹
</span><span class="n">car</span> <span class="o">=</span> <span class="nc">Car</span><span class="p">(</span><span class="sh">"</span><span class="s">ä¸°ç”°</span><span class="sh">"</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>
<span class="n">electric_car</span> <span class="o">=</span> <span class="nc">ElectricCar</span><span class="p">(</span><span class="sh">"</span><span class="s">ç‰¹æ–¯æ‹‰</span><span class="sh">"</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">car</span><span class="p">.</span><span class="n">brand</span><span class="si">}</span><span class="s">: æœ€å¤§é€Ÿåº¦ </span><span class="si">{</span><span class="n">car</span><span class="p">.</span><span class="n">max_speed</span><span class="si">}</span><span class="s">km/h, ç‡ƒæ–™ç±»å‹: </span><span class="si">{</span><span class="n">car</span><span class="p">.</span><span class="n">fuel_type</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">electric_car</span><span class="p">.</span><span class="n">brand</span><span class="si">}</span><span class="s">: æœ€å¤§é€Ÿåº¦ </span><span class="si">{</span><span class="n">electric_car</span><span class="p">.</span><span class="n">max_speed</span><span class="si">}</span><span class="s">km/h, ç‡ƒæ–™ç±»å‹: </span><span class="si">{</span><span class="n">electric_car</span><span class="p">.</span><span class="n">fuel_type</span><span class="si">}</span><span class="s">, ç»­èˆª: </span><span class="si">{</span><span class="n">electric_car</span><span class="p">.</span><span class="nb">range</span><span class="si">}</span><span class="s">km</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="-ç±»å‹æ£€æŸ¥å’Œè™šæ‹Ÿå­ç±»">ğŸ” ç±»å‹æ£€æŸ¥å’Œè™šæ‹Ÿå­ç±»</h2>

<h3 id="isinstanceæ£€æŸ¥">isinstance()æ£€æŸ¥</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="k">class</span> <span class="nc">Drawable</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å¯ç»˜åˆ¶å¯¹è±¡æŠ½è±¡åŸºç±»</span><span class="sh">"""</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Rectangle</span><span class="p">(</span><span class="n">Drawable</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">ç»˜åˆ¶çŸ©å½¢</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Circle</span><span class="p">(</span><span class="n">Drawable</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">ç»˜åˆ¶åœ†å½¢</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">render_shape</span><span class="p">(</span><span class="n">shape</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">æ¸²æŸ“å›¾å½¢</span><span class="sh">"""</span>
    <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">Drawable</span><span class="p">):</span>
        <span class="n">shape</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">å¯¹è±¡ä¸å¯ç»˜åˆ¶</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># ä½¿ç”¨ç¤ºä¾‹
</span><span class="n">rect</span> <span class="o">=</span> <span class="nc">Rectangle</span><span class="p">()</span>
<span class="n">circle</span> <span class="o">=</span> <span class="nc">Circle</span><span class="p">()</span>

<span class="nf">render_shape</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>    <span class="c1"># ç»˜åˆ¶çŸ©å½¢
</span><span class="nf">render_shape</span><span class="p">(</span><span class="n">circle</span><span class="p">)</span>  <span class="c1"># ç»˜åˆ¶åœ†å½¢
</span><span class="nf">render_shape</span><span class="p">(</span><span class="sh">"</span><span class="s">text</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># å¯¹è±¡ä¸å¯ç»˜åˆ¶
</span></code></pre></div></div>

<h3 id="è™šæ‹Ÿå­ç±»æ³¨å†Œ">è™šæ‹Ÿå­ç±»æ³¨å†Œ</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="k">class</span> <span class="nc">Serializable</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å¯åºåˆ—åŒ–æŠ½è±¡åŸºç±»</span><span class="sh">"""</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="k">class</span> <span class="nc">JSONData</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">JSONæ•°æ®ç±»ï¼ˆä¸ç»§æ‰¿Serializableï¼‰</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
    
    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="n">json</span>
        <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># æ³¨å†Œä¸ºè™šæ‹Ÿå­ç±»
</span><span class="n">Serializable</span><span class="p">.</span><span class="nf">register</span><span class="p">(</span><span class="n">JSONData</span><span class="p">)</span>

<span class="c1"># ç°åœ¨JSONDataè¢«è®¤ä¸ºæ˜¯Serializableçš„å­ç±»
</span><span class="n">json_data</span> <span class="o">=</span> <span class="nc">JSONData</span><span class="p">({</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">å¼ ä¸‰</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">:</span> <span class="mi">25</span><span class="p">})</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">isinstance</span><span class="p">(</span><span class="n">json_data</span><span class="p">,</span> <span class="n">Serializable</span><span class="p">))</span>  <span class="c1"># True
</span><span class="nf">print</span><span class="p">(</span><span class="n">json_data</span><span class="p">.</span><span class="nf">serialize</span><span class="p">())</span>  <span class="c1"># {"name": "å¼ ä¸‰", "age": 25}
</span>
<span class="c1"># ä¹Ÿå¯ä»¥ä½¿ç”¨è£…é¥°å™¨å½¢å¼
</span><span class="nd">@Serializable.register</span>
<span class="k">class</span> <span class="nc">XMLData</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
    
    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="c1"># ç®€å•çš„XMLåºåˆ—åŒ–
</span>        <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="s">&lt;data&gt;</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">data</span><span class="si">}</span><span class="s">&lt;/data&gt;</span><span class="sh">"</span>

<span class="n">xml_data</span> <span class="o">=</span> <span class="nc">XMLData</span><span class="p">(</span><span class="sh">"</span><span class="s">Hello World</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">isinstance</span><span class="p">(</span><span class="n">xml_data</span><span class="p">,</span> <span class="n">Serializable</span><span class="p">))</span>  <span class="c1"># True
</span><span class="nf">print</span><span class="p">(</span><span class="n">xml_data</span><span class="p">.</span><span class="nf">serialize</span><span class="p">())</span>  <span class="c1"># &lt;data&gt;Hello World&lt;/data&gt;
</span></code></pre></div></div>

<h2 id="-å®é™…åº”ç”¨æ¡ˆä¾‹">ğŸ¨ å®é™…åº”ç”¨æ¡ˆä¾‹</h2>

<h3 id="æ¡ˆä¾‹1æ•°æ®åº“è¿æ¥å™¨">æ¡ˆä¾‹1ï¼šæ•°æ®åº“è¿æ¥å™¨</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>

<span class="k">class</span> <span class="nc">DatabaseConnector</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">æ•°æ®åº“è¿æ¥å™¨æŠ½è±¡åŸºç±»</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">database</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
        <span class="n">self</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">port</span>
        <span class="n">self</span><span class="p">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">database</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="bp">None</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">è¿æ¥æ•°æ®åº“</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">æ–­å¼€è¿æ¥</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">execute_query</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
        <span class="sh">"""</span><span class="s">æ‰§è¡ŒæŸ¥è¯¢</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">execute_command</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">æ‰§è¡Œå‘½ä»¤</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">is_connected</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">æ£€æŸ¥è¿æ¥çŠ¶æ€</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">connect</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">self</span>
    
    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="nf">disconnect</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MySQLConnector</span><span class="p">(</span><span class="n">DatabaseConnector</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">MySQLè¿æ¥å™¨</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">è¿æ¥åˆ°MySQLæ•°æ®åº“: </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">host</span><span class="si">}</span><span class="s">:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">port</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">database</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="s">mysql://</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">host</span><span class="si">}</span><span class="s">:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">port</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">database</span><span class="si">}</span><span class="sh">"</span>
        <span class="k">return</span> <span class="bp">True</span>
    
    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">æ–­å¼€MySQLè¿æ¥</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">return</span> <span class="bp">True</span>
    
    <span class="k">def</span> <span class="nf">execute_query</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ‰§è¡ŒMySQLæŸ¥è¯¢: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="c1"># æ¨¡æ‹ŸæŸ¥è¯¢ç»“æœ
</span>        <span class="k">return</span> <span class="p">[{</span><span class="sh">"</span><span class="s">id</span><span class="sh">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">å¼ ä¸‰</span><span class="sh">"</span><span class="p">},</span> <span class="p">{</span><span class="sh">"</span><span class="s">id</span><span class="sh">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">æå››</span><span class="sh">"</span><span class="p">}]</span>
    
    <span class="k">def</span> <span class="nf">execute_command</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ‰§è¡ŒMySQLå‘½ä»¤: </span><span class="si">{</span><span class="n">command</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_connected</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_connection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>

<span class="k">class</span> <span class="nc">PostgreSQLConnector</span><span class="p">(</span><span class="n">DatabaseConnector</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">PostgreSQLè¿æ¥å™¨</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">è¿æ¥åˆ°PostgreSQLæ•°æ®åº“: </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">host</span><span class="si">}</span><span class="s">:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">port</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">database</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="s">postgresql://</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">host</span><span class="si">}</span><span class="s">:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">port</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">database</span><span class="si">}</span><span class="sh">"</span>
        <span class="k">return</span> <span class="bp">True</span>
    
    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">æ–­å¼€PostgreSQLè¿æ¥</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">return</span> <span class="bp">True</span>
    
    <span class="k">def</span> <span class="nf">execute_query</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ‰§è¡ŒPostgreSQLæŸ¥è¯¢: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="c1"># æ¨¡æ‹ŸæŸ¥è¯¢ç»“æœ
</span>        <span class="k">return</span> <span class="p">[{</span><span class="sh">"</span><span class="s">id</span><span class="sh">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="sh">"</span><span class="s">username</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">admin</span><span class="sh">"</span><span class="p">},</span> <span class="p">{</span><span class="sh">"</span><span class="s">id</span><span class="sh">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="sh">"</span><span class="s">username</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">user</span><span class="sh">"</span><span class="p">}]</span>
    
    <span class="k">def</span> <span class="nf">execute_command</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ‰§è¡ŒPostgreSQLå‘½ä»¤: </span><span class="si">{</span><span class="n">command</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_connected</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_connection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>

<span class="c1"># æ•°æ®åº“ç®¡ç†å™¨
</span><span class="k">class</span> <span class="nc">DatabaseManager</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">connector</span><span class="p">:</span> <span class="n">DatabaseConnector</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">connector</span> <span class="o">=</span> <span class="n">connector</span>
    
    <span class="k">def</span> <span class="nf">get_users</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">è·å–ç”¨æˆ·åˆ—è¡¨</span><span class="sh">"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">self</span><span class="p">.</span><span class="n">connector</span><span class="p">.</span><span class="n">is_connected</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">connector</span><span class="p">.</span><span class="nf">connect</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">connector</span><span class="p">.</span><span class="nf">execute_query</span><span class="p">(</span><span class="sh">"</span><span class="s">SELECT * FROM users</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">create_user</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">åˆ›å»ºç”¨æˆ·</span><span class="sh">"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">self</span><span class="p">.</span><span class="n">connector</span><span class="p">.</span><span class="n">is_connected</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">connector</span><span class="p">.</span><span class="nf">connect</span><span class="p">()</span>
        
        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="s">INSERT INTO users (username) VALUES (</span><span class="sh">'</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="sh">'</span><span class="s">)</span><span class="sh">"</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">connector</span><span class="p">.</span><span class="nf">execute_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

<span class="c1"># ä½¿ç”¨ç¤ºä¾‹
</span><span class="n">mysql_conn</span> <span class="o">=</span> <span class="nc">MySQLConnector</span><span class="p">(</span><span class="sh">"</span><span class="s">localhost</span><span class="sh">"</span><span class="p">,</span> <span class="mi">3306</span><span class="p">,</span> <span class="sh">"</span><span class="s">myapp</span><span class="sh">"</span><span class="p">)</span>
<span class="n">postgres_conn</span> <span class="o">=</span> <span class="nc">PostgreSQLConnector</span><span class="p">(</span><span class="sh">"</span><span class="s">localhost</span><span class="sh">"</span><span class="p">,</span> <span class="mi">5432</span><span class="p">,</span> <span class="sh">"</span><span class="s">myapp</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨
</span><span class="k">with</span> <span class="n">mysql_conn</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">manager</span> <span class="o">=</span> <span class="nc">DatabaseManager</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">users</span> <span class="o">=</span> <span class="n">manager</span><span class="p">.</span><span class="nf">get_users</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">MySQLç”¨æˆ·: </span><span class="si">{</span><span class="n">users</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="k">with</span> <span class="n">postgres_conn</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">manager</span> <span class="o">=</span> <span class="nc">DatabaseManager</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">users</span> <span class="o">=</span> <span class="n">manager</span><span class="p">.</span><span class="nf">get_users</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">PostgreSQLç”¨æˆ·: </span><span class="si">{</span><span class="n">users</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="æ¡ˆä¾‹2æ¶ˆæ¯å¤„ç†ç³»ç»Ÿ">æ¡ˆä¾‹2ï¼šæ¶ˆæ¯å¤„ç†ç³»ç»Ÿ</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span>
<span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="k">class</span> <span class="nc">MessageProcessor</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">æ¶ˆæ¯å¤„ç†å™¨æŠ½è±¡åŸºç±»</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">self</span><span class="p">.</span><span class="n">processed_count</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">å¤„ç†æ¶ˆæ¯</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">validate_message</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">éªŒè¯æ¶ˆæ¯æ ¼å¼</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="k">def</span> <span class="nf">handle_message</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">å¤„ç†æ¶ˆæ¯çš„æ¨¡æ¿æ–¹æ³•</span><span class="sh">"""</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">[</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">] å¼€å§‹å¤„ç†æ¶ˆæ¯: </span><span class="si">{</span><span class="n">message</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">id</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">unknown</span><span class="sh">'</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">self</span><span class="p">.</span><span class="nf">validate_message</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">[</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">] æ¶ˆæ¯éªŒè¯å¤±è´¥</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">process</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">processed_count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">[</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">] æ¶ˆæ¯å¤„ç†æˆåŠŸ</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">[</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">] æ¶ˆæ¯å¤„ç†å¤±è´¥</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">[</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">] å¤„ç†å¼‚å¸¸: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>
    
    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="sh">"""</span><span class="s">è·å–å¤„ç†ç»Ÿè®¡</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="sh">"</span><span class="s">processor</span><span class="sh">"</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">processed_count</span><span class="sh">"</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">processed_count</span>
        <span class="p">}</span>

<span class="k">class</span> <span class="nc">EmailProcessor</span><span class="p">(</span><span class="n">MessageProcessor</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">é‚®ä»¶å¤„ç†å™¨</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="sh">"</span><span class="s">é‚®ä»¶å¤„ç†å™¨</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">validate_message</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">required_fields</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">to</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">subject</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">body</span><span class="sh">'</span><span class="p">]</span>
        <span class="k">return</span> <span class="nf">all</span><span class="p">(</span><span class="n">field</span> <span class="ow">in</span> <span class="n">message</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">required_fields</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="c1"># æ¨¡æ‹Ÿå‘é€é‚®ä»¶
</span>        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å‘é€é‚®ä»¶åˆ°: </span><span class="si">{</span><span class="n">message</span><span class="p">[</span><span class="sh">'</span><span class="s">to</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ä¸»é¢˜: </span><span class="si">{</span><span class="n">message</span><span class="p">[</span><span class="sh">'</span><span class="s">subject</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å†…å®¹: </span><span class="si">{</span><span class="n">message</span><span class="p">[</span><span class="sh">'</span><span class="s">body</span><span class="sh">'</span><span class="p">][</span><span class="si">:</span><span class="mi">50</span><span class="p">]</span><span class="si">}</span><span class="s">...</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>

<span class="k">class</span> <span class="nc">SMSProcessor</span><span class="p">(</span><span class="n">MessageProcessor</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">çŸ­ä¿¡å¤„ç†å™¨</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="sh">"</span><span class="s">çŸ­ä¿¡å¤„ç†å™¨</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">validate_message</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="sh">'</span><span class="s">phone</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">message</span> <span class="ow">and</span> <span class="sh">'</span><span class="s">text</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">message</span> <span class="ow">and</span> <span class="nf">len</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="sh">'</span><span class="s">text</span><span class="sh">'</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mi">160</span>
    
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="c1"># æ¨¡æ‹Ÿå‘é€çŸ­ä¿¡
</span>        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å‘é€çŸ­ä¿¡åˆ°: </span><span class="si">{</span><span class="n">message</span><span class="p">[</span><span class="sh">'</span><span class="s">phone</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å†…å®¹: </span><span class="si">{</span><span class="n">message</span><span class="p">[</span><span class="sh">'</span><span class="s">text</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>

<span class="k">class</span> <span class="nc">PushNotificationProcessor</span><span class="p">(</span><span class="n">MessageProcessor</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">æ¨é€é€šçŸ¥å¤„ç†å™¨</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="sh">"</span><span class="s">æ¨é€é€šçŸ¥å¤„ç†å™¨</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">validate_message</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="sh">'</span><span class="s">device_id</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">message</span> <span class="ow">and</span> <span class="sh">'</span><span class="s">title</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">message</span> <span class="ow">and</span> <span class="sh">'</span><span class="s">body</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">message</span>
    
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="c1"># æ¨¡æ‹Ÿå‘é€æ¨é€é€šçŸ¥
</span>        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å‘é€æ¨é€åˆ°è®¾å¤‡: </span><span class="si">{</span><span class="n">message</span><span class="p">[</span><span class="sh">'</span><span class="s">device_id</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ ‡é¢˜: </span><span class="si">{</span><span class="n">message</span><span class="p">[</span><span class="sh">'</span><span class="s">title</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å†…å®¹: </span><span class="si">{</span><span class="n">message</span><span class="p">[</span><span class="sh">'</span><span class="s">body</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>

<span class="c1"># æ¶ˆæ¯åˆ†å‘å™¨
</span><span class="k">class</span> <span class="nc">MessageDispatcher</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">processors</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MessageProcessor</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">def</span> <span class="nf">register_processor</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">processor</span><span class="p">:</span> <span class="n">MessageProcessor</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">æ³¨å†Œæ¶ˆæ¯å¤„ç†å™¨</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">processors</span><span class="p">[</span><span class="n">message_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">processor</span>
    
    <span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">åˆ†å‘æ¶ˆæ¯</span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">message_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">processors</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æœªæ‰¾åˆ°ç±»å‹ä¸º </span><span class="si">{</span><span class="n">message_type</span><span class="si">}</span><span class="s"> çš„å¤„ç†å™¨</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>
        
        <span class="n">processor</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">processors</span><span class="p">[</span><span class="n">message_type</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">processor</span><span class="p">.</span><span class="nf">handle_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">get_all_stats</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="sh">"""</span><span class="s">è·å–æ‰€æœ‰å¤„ç†å™¨çš„ç»Ÿè®¡ä¿¡æ¯</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">msg_type</span><span class="p">:</span> <span class="n">processor</span><span class="p">.</span><span class="nf">get_stats</span><span class="p">()</span> 
                <span class="k">for</span> <span class="n">msg_type</span><span class="p">,</span> <span class="n">processor</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">processors</span><span class="p">.</span><span class="nf">items</span><span class="p">()}</span>

<span class="c1"># ä½¿ç”¨ç¤ºä¾‹
</span><span class="n">dispatcher</span> <span class="o">=</span> <span class="nc">MessageDispatcher</span><span class="p">()</span>

<span class="c1"># æ³¨å†Œå¤„ç†å™¨
</span><span class="n">dispatcher</span><span class="p">.</span><span class="nf">register_processor</span><span class="p">(</span><span class="sh">"</span><span class="s">email</span><span class="sh">"</span><span class="p">,</span> <span class="nc">EmailProcessor</span><span class="p">())</span>
<span class="n">dispatcher</span><span class="p">.</span><span class="nf">register_processor</span><span class="p">(</span><span class="sh">"</span><span class="s">sms</span><span class="sh">"</span><span class="p">,</span> <span class="nc">SMSProcessor</span><span class="p">())</span>
<span class="n">dispatcher</span><span class="p">.</span><span class="nf">register_processor</span><span class="p">(</span><span class="sh">"</span><span class="s">push</span><span class="sh">"</span><span class="p">,</span> <span class="nc">PushNotificationProcessor</span><span class="p">())</span>

<span class="c1"># å¤„ç†ä¸åŒç±»å‹çš„æ¶ˆæ¯
</span><span class="n">messages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">email</span><span class="sh">"</span><span class="p">,</span> <span class="p">{</span>
        <span class="sh">"</span><span class="s">id</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">email_001</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">to</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">user@example.com</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">subject</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">æ¬¢è¿æ³¨å†Œ</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">body</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">æ„Ÿè°¢æ‚¨æ³¨å†Œæˆ‘ä»¬çš„æœåŠ¡ï¼Œè¯·ç‚¹å‡»é“¾æ¥æ¿€æ´»è´¦æˆ·...</span><span class="sh">"</span>
    <span class="p">}),</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">sms</span><span class="sh">"</span><span class="p">,</span> <span class="p">{</span>
        <span class="sh">"</span><span class="s">id</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">sms_001</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">phone</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">+86138****8888</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">text</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">æ‚¨çš„éªŒè¯ç æ˜¯: 123456</span><span class="sh">"</span>
    <span class="p">}),</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">push</span><span class="sh">"</span><span class="p">,</span> <span class="p">{</span>
        <span class="sh">"</span><span class="s">id</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">push_001</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">device_id</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">device_12345</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">title</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">æ–°æ¶ˆæ¯</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">body</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">æ‚¨æœ‰ä¸€æ¡æ–°çš„ç§ä¿¡</span><span class="sh">"</span>
    <span class="p">})</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">msg_type</span><span class="p">,</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>
    <span class="n">dispatcher</span><span class="p">.</span><span class="nf">dispatch</span><span class="p">(</span><span class="n">msg_type</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">-</span><span class="sh">"</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>

<span class="c1"># æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
</span><span class="n">stats</span> <span class="o">=</span> <span class="n">dispatcher</span><span class="p">.</span><span class="nf">get_all_stats</span><span class="p">()</span>
<span class="k">for</span> <span class="n">msg_type</span><span class="p">,</span> <span class="n">stat</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">msg_type</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">stat</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="-æœ€ä½³å®è·µ">ğŸ“ æœ€ä½³å®è·µ</h2>

<h3 id="1-è®¾è®¡åŸåˆ™">1. è®¾è®¡åŸåˆ™</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="c1"># âœ… å¥½çš„è®¾è®¡ï¼šèŒè´£å•ä¸€ï¼Œæ¥å£æ¸…æ™°
</span><span class="k">class</span> <span class="nc">Validator</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">éªŒè¯å™¨æŠ½è±¡åŸºç±»</span><span class="sh">"""</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">éªŒè¯æ•°æ®</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_error_message</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">è·å–é”™è¯¯ä¿¡æ¯</span><span class="sh">"""</span>
        <span class="k">pass</span>

<span class="c1"># âŒ ä¸å¥½çš„è®¾è®¡ï¼šèŒè´£æ··ä¹±
</span><span class="k">class</span> <span class="nc">BadProcessor</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">process_data</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">send_email</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">log_message</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div></div>

<h3 id="2-é”™è¯¯å¤„ç†">2. é”™è¯¯å¤„ç†</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="k">class</span> <span class="nc">DataProcessor</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">æ•°æ®å¤„ç†å™¨æŠ½è±¡åŸºç±»</span><span class="sh">"""</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">å¤„ç†æ•°æ®</span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="k">def</span> <span class="nf">safe_process</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">å®‰å…¨å¤„ç†æ•°æ®</span><span class="sh">"""</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="nf">process</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">NotImplementedError</span><span class="p">:</span>
            <span class="k">raise</span>  <span class="c1"># é‡æ–°æŠ›å‡ºæŠ½è±¡æ–¹æ³•æœªå®ç°é”™è¯¯
</span>        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å¤„ç†æ•°æ®æ—¶å‘ç”Ÿé”™è¯¯: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">None</span>
</code></pre></div></div>

<h3 id="3-æ–‡æ¡£å’Œç±»å‹æç¤º">3. æ–‡æ¡£å’Œç±»å‹æç¤º</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Protocol</span><span class="p">,</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Generic</span>

<span class="n">T</span> <span class="o">=</span> <span class="nc">TypeVar</span><span class="p">(</span><span class="sh">'</span><span class="s">T</span><span class="sh">'</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Repository</span><span class="p">(</span><span class="n">ABC</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="sh">"""</span><span class="s">é€šç”¨ä»“å‚¨æŠ½è±¡åŸºç±»
    
    Args:
        T: å®ä½“ç±»å‹
    </span><span class="sh">"""</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">ä¿å­˜å®ä½“
        
        Args:
            entity: è¦ä¿å­˜çš„å®ä½“
            
        Returns:
            ä¿å­˜åçš„å®ä½“
            
        Raises:
            RepositoryError: ä¿å­˜å¤±è´¥æ—¶æŠ›å‡º
        </span><span class="sh">"""</span>
        <span class="k">pass</span>
    
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">find_by_id</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span> <span class="o">|</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sh">"""</span><span class="s">æ ¹æ®IDæŸ¥æ‰¾å®ä½“
        
        Args:
            entity_id: å®ä½“ID
            
        Returns:
            æ‰¾åˆ°çš„å®ä½“ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›None
        </span><span class="sh">"""</span>
        <span class="k">pass</span>
</code></pre></div></div>

<h2 id="-æ‰©å±•é˜…è¯»">ğŸ”— æ‰©å±•é˜…è¯»</h2>

<ul>
  <li><a href="https://docs.python.org/3/library/abc.html">Pythonå®˜æ–¹æ–‡æ¡£ - abcæ¨¡å—</a></li>
  <li><a href="https://www.python.org/dev/peps/pep-3119/">PEP 3119 - æŠ½è±¡åŸºç±»ä»‹ç»</a></li>
  <li><a href="https://refactoring.guru/design-patterns/template-method">è®¾è®¡æ¨¡å¼ - æ¨¡æ¿æ–¹æ³•æ¨¡å¼</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Interface_segregation_principle">SOLIDåŸåˆ™ - æ¥å£éš”ç¦»åŸåˆ™</a></li>
</ul>

<hr />

<p>æŠ½è±¡åŸºç±»æ˜¯Pythoné¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„é‡è¦å·¥å…·ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬åˆ›å»ºæ›´æ¸…æ™°çš„æ¥å£å®šä¹‰å’Œæ›´å¼ºçš„ç±»å‹çº¦æŸã€‚é€šè¿‡åˆç†ä½¿ç”¨æŠ½è±¡åŸºç±»ï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¯è¯»æ€§ã€‚</p>

    </article>
    
    <!-- é¡µé¢ä¾§è¾¹æ  -->
    
    <aside class="page-sidebar">
      <!-- ç›®å½•å¯¼èˆª -->
      <div class="sidebar-section">
        <h3 class="sidebar-title">
          <i class="fas fa-list"></i>
          é¡µé¢ç›®å½•
        </h3>
        <div id="page-toc" class="page-toc">
          <!-- ç›®å½•å°†é€šè¿‡JavaScriptè‡ªåŠ¨ç”Ÿæˆ -->
        </div>
      </div>
      
      <!-- ç›¸å…³é“¾æ¥ -->
      
      
      <!-- å¿«é€Ÿå¯¼èˆª -->
      <div class="sidebar-section">
        <h3 class="sidebar-title">
          <i class="fas fa-compass"></i>
          å¿«é€Ÿå¯¼èˆª
        </h3>
        <ul class="quick-nav">
          <li><a href="/PythonModelBook/docs/basics/">åŸºç¡€è¯­æ³•</a></li>
          <li><a href="/PythonModelBook/docs/builtins/">å†…ç½®å‡½æ•°</a></li>
          <li><a href="/PythonModelBook/docs/stdlib/">æ ‡å‡†åº“</a></li>
          <li><a href="/PythonModelBook/docs/thirdparty/">ç¬¬ä¸‰æ–¹åº“</a></li>
        </ul>
      </div>
    </aside>
    
  </main>
  
  <!-- é¡µé¢åº•éƒ¨æ“ä½œ -->
  <footer class="page-footer">
    <div class="page-actions">
      
      
      <a href="https://github.com/username/PythonModelBook/issues/new" class="btn btn-outline" target="_blank">
        <i class="fas fa-bug"></i>
        æŠ¥å‘Šé—®é¢˜
      </a>
      
      <button id="share-page" class="btn btn-outline">
        <i class="fas fa-share"></i>
        åˆ†äº«é¡µé¢
      </button>
    </div>
    
    <!-- é¡µé¢ä¿¡æ¯ -->
    <div class="page-meta">
      
      <span class="meta-item">
        <i class="fas fa-calendar"></i>
        å‘å¸ƒæ—¶é—´ï¼š2024å¹´01æœˆ01æ—¥
      </span>
      
      
      
      
      
      <span class="meta-item">
        <i class="fas fa-user"></i>
        ä½œè€…ï¼šPythonå­¦ä¹ æŒ‡å—
      </span>
      
    </div>
  </footer>
</div>

<!-- é¡µé¢ç‰¹å®šçš„æ ·å¼ -->
<style>
.page-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
}

.page-header {
  margin-bottom: 3rem;
  text-align: center;
}

.page-title {
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 1rem;
}

.page-description {
  font-size: 1.2rem;
  color: var(--text-secondary);
  margin-bottom: 2rem;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.breadcrumb {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-size: 0.9rem;
  color: var(--text-secondary);
}

.breadcrumb-item {
  color: var(--text-secondary);
  text-decoration: none;
  transition: color 0.2s;
}

.breadcrumb-item:hover {
  color: var(--primary-color);
}

.breadcrumb-item.current {
  color: var(--primary-color);
  font-weight: 500;
}

.page-content {
  display: grid;
  grid-template-columns: 1fr 300px;
  gap: 3rem;
  align-items: start;
}

.page-article {
  min-width: 0;
}

.page-sidebar {
  position: sticky;
  top: 2rem;
}

.sidebar-section {
  background: var(--bg-secondary);
  border-radius: 8px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.sidebar-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.page-footer {
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid var(--border-color);
}

.page-actions {
  display: flex;
  gap: 1rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.page-meta {
  display: flex;
  gap: 2rem;
  font-size: 0.9rem;
  color: var(--text-secondary);
  flex-wrap: wrap;
}

.meta-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .page-container {
    padding: 1rem;
  }
  
  .page-content {
    grid-template-columns: 1fr;
    gap: 2rem;
  }
  
  .page-sidebar {
    position: static;
    order: -1;
  }
  
  .page-title {
    font-size: 2rem;
  }
  
  .page-actions {
    justify-content: center;
  }
  
  .page-meta {
    justify-content: center;
    text-align: center;
  }
}
</style>

<!-- é¡µé¢ç‰¹å®šçš„JavaScript -->
<script>
// è‡ªåŠ¨ç”Ÿæˆé¡µé¢ç›®å½•
document.addEventListener('DOMContentLoaded', function() {
  const tocContainer = document.getElementById('page-toc');
  if (!tocContainer) return;
  
  const headings = document.querySelectorAll('.page-article h2, .page-article h3, .page-article h4');
  if (headings.length === 0) {
    tocContainer.innerHTML = '<p class="no-toc">æ­¤é¡µé¢æ²¡æœ‰æ ‡é¢˜</p>';
    return;
  }
  
  const tocList = document.createElement('ul');
  tocList.className = 'toc-list';
  
  headings.forEach((heading, index) => {
    const id = heading.id || `heading-${index}`;
    heading.id = id;
    
    const li = document.createElement('li');
    li.className = `toc-item toc-${heading.tagName.toLowerCase()}`;
    
    const link = document.createElement('a');
    link.href = `#${id}`;
    link.textContent = heading.textContent;
    link.className = 'toc-link';
    
    li.appendChild(link);
    tocList.appendChild(li);
  });
  
  tocContainer.appendChild(tocList);
});

// åˆ†äº«åŠŸèƒ½
document.getElementById('share-page')?.addEventListener('click', function() {
  if (navigator.share) {
    navigator.share({
      title: document.title,
      url: window.location.href
    });
  } else {
    // å¤åˆ¶é“¾æ¥åˆ°å‰ªè´´æ¿
    navigator.clipboard.writeText(window.location.href).then(() => {
      alert('é¡µé¢é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
    });
  }
});
</script>
  </main>

  <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
  <button id="back-to-top" class="back-to-top" title="è¿”å›é¡¶éƒ¨">
    <i class="fas fa-chevron-up"></i>
  </button>

  <!-- é¡µè„š -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£</h3>
          <p>ç³»ç»ŸåŒ–æ•´ç†PythonçŸ¥è¯†ä½“ç³»çš„å¼€æºé¡¹ç›®</p>
        </div>
        <div class="footer-section">
          <h4>å¿«é€Ÿé“¾æ¥</h4>
          <ul>
            <li><a href="/PythonModelBook/docs/basics/">åŸºç¡€è¯­æ³•</a></li>
            <li><a href="/PythonModelBook/docs/builtins/">å†…ç½®å‡½æ•°</a></li>
            <li><a href="/PythonModelBook/docs/stdlib/">æ ‡å‡†åº“</a></li>
            <li><a href="/PythonModelBook/docs/thirdparty/">ç¬¬ä¸‰æ–¹åº“</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>ç¤¾åŒº</h4>
          <ul>
            <li><a href="https://github.com/liberalchang/PythonModelBook" target="_blank">GitHub</a></li>
            <li><a href="/PythonModelBook/CONTRIBUTING/">è´¡çŒ®æŒ‡å—</a></li>
            <li><a href="/PythonModelBook/about/">å…³äºé¡¹ç›®</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£. é‡‡ç”¨ <a href="/PythonModelBook/LICENSE">MIT License</a> å¼€æºåè®®.</p>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script src="/PythonModelBook/assets/js/main.js"></script>
  <script src="/PythonModelBook/assets/js/search.js"></script>
  
  <script src="/PythonModelBook/assets/js/docs.js"></script>
  
</body>

</html>