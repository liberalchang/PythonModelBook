<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•° - PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£</title>
  <meta name="description" content="åŒæ—¶è¿”å›é™¤æ³•çš„å•†å’Œä½™æ•°çš„å†…ç½®å‡½æ•°">

  <!-- SEOæ ‡ç­¾ -->
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•° | PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•°" />
<meta name="author" content="Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="åŒæ—¶è¿”å›é™¤æ³•çš„å•†å’Œä½™æ•°çš„å†…ç½®å‡½æ•°" />
<meta property="og:description" content="åŒæ—¶è¿”å›é™¤æ³•çš„å•†å’Œä½™æ•°çš„å†…ç½®å‡½æ•°" />
<link rel="canonical" href="http://0.0.0.0:4000/PythonModelBook/docs/builtins/divmod/" />
<meta property="og:url" content="http://0.0.0.0:4000/PythonModelBook/docs/builtins/divmod/" />
<meta property="og:site_name" content="PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-01-15T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•°" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ"},"dateModified":"2024-01-15T00:00:00+08:00","datePublished":"2024-01-15T00:00:00+08:00","description":"åŒæ—¶è¿”å›é™¤æ³•çš„å•†å’Œä½™æ•°çš„å†…ç½®å‡½æ•°","headline":"divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•°","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/PythonModelBook/docs/builtins/divmod/"},"url":"http://0.0.0.0:4000/PythonModelBook/docs/builtins/divmod/"}</script>
<!-- End Jekyll SEO tag -->


  <!-- æ ·å¼æ–‡ä»¶ -->
  <link rel="stylesheet" href="/PythonModelBook/assets/css/main.css">
  <link rel="stylesheet" href="/PythonModelBook/assets/css/light-theme.css">
  <link rel="stylesheet" href="/PythonModelBook/assets/css/dark-theme.css">

  <!-- å­—ä½“ -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- å›¾æ ‡ -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <!-- æœç´¢åŠŸèƒ½ -->
  <script src="https://unpkg.com/lunr/lunr.js"></script>
</head>

<body>
  <!-- å¯¼èˆªæ  -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-brand">
        <a href="/PythonModelBook/" class="brand-link">
          <i class="fab fa-python"></i>
          <span>PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£</span>
        </a>
      </div>

      <!-- æœç´¢æ¡† -->
      <div class="nav-search">
        <div class="search-container">
          <input type="text" id="search-input" placeholder="æœç´¢æ–‡æ¡£..." class="search-input">
          <i class="fas fa-search search-icon"></i>
          <div id="search-results" class="search-results"></div>
        </div>
      </div>

      <!-- å¯¼èˆªèœå• -->
      <div class="nav-menu">
        <a href="/PythonModelBook/" class="nav-link">é¦–é¡µ</a>
        <a href="/PythonModelBook/docs/" class="nav-link">æ–‡æ¡£</a>
        <a href="/PythonModelBook/about/" class="nav-link">å…³äº</a>
        <button id="theme-toggle" class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜">
          <i class="fas fa-moon"></i>
        </button>
      </div>

      <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
      <button class="mobile-menu-btn" id="mobile-menu-btn">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>

  <!-- ä¸»è¦å†…å®¹ -->
  <main class="main-content">
    <div class="doc-container">
  <!-- æ–‡æ¡£å†…å®¹åŒºåŸŸ -->
  <main class="doc-content">
    <article class="doc-article">
      <!-- æ–‡æ¡£å¤´éƒ¨ä¿¡æ¯ -->
      <header class="doc-header">
        <h1 class="doc-title">divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•°</h1>
        
        
        <p class="doc-description">åŒæ—¶è¿”å›é™¤æ³•çš„å•†å’Œä½™æ•°çš„å†…ç½®å‡½æ•°</p>
        
        
        <div class="doc-meta">
          
          <span class="doc-category">åˆ†ç±»: builtins</span>
          
          
          
          <span class="doc-difficulty">éš¾åº¦: åˆçº§</span>
          
          
          
          <span class="doc-updated">æ›´æ–°: 2024-01-15</span>
          
        </div>
        
        
        <div class="doc-tags">
          
          <span class="tag">æ•°å­¦è¿ç®—</span>
          
          <span class="tag">é™¤æ³•</span>
          
          <span class="tag">å–æ¨¡</span>
          
          <span class="tag">å•†å’Œä½™æ•°</span>
          
        </div>
        
      </header>
      
      <!-- æ–‡æ¡£æ­£æ–‡ -->
      <div class="doc-body">
        <h1 id="divmod---é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•°">divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•°</h1>

<h2 id="-æ¦‚è¿°">ğŸ“ æ¦‚è¿°</h2>

<p><code class="language-plaintext highlighter-rouge">divmod()</code> æ˜¯Pythonä¸­ç”¨äºåŒæ—¶æ‰§è¡Œé™¤æ³•å’Œå–æ¨¡è¿ç®—çš„å†…ç½®å‡½æ•°ã€‚å®ƒæ¥å—ä¸¤ä¸ªæ•°å­—å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å•†å’Œä½™æ•°çš„å…ƒç»„ã€‚è¿™ä¸ªå‡½æ•°åœ¨éœ€è¦åŒæ—¶è·å–é™¤æ³•ç»“æœå’Œä½™æ•°æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”æ•´é™¤è¿ç®—ç¬¦ <code class="language-plaintext highlighter-rouge">//</code> å’Œå–æ¨¡è¿ç®—ç¬¦ <code class="language-plaintext highlighter-rouge">%</code> åˆ†åˆ«è®¡ç®—æ›´åŠ é«˜æ•ˆã€‚</p>

<h2 id="-å­¦ä¹ ç›®æ ‡">ğŸ¯ å­¦ä¹ ç›®æ ‡</h2>

<ul>
  <li>æŒæ¡divmod()å‡½æ•°çš„åŸºæœ¬è¯­æ³•å’Œç”¨æ³•</li>
  <li>ç†è§£é™¤æ³•å’Œå–æ¨¡è¿ç®—çš„æ•°å­¦åŸç†</li>
  <li>å­¦ä¼šåœ¨å®é™…ç¼–ç¨‹ä¸­åº”ç”¨divmod()å‡½æ•°</li>
  <li>äº†è§£divmod()ä¸//å’Œ%è¿ç®—ç¬¦çš„å…³ç³»å’Œæ€§èƒ½å·®å¼‚</li>
  <li>æŒæ¡åœ¨æ—¶é—´è®¡ç®—ã€è¿›åˆ¶è½¬æ¢ç­‰åœºæ™¯ä¸­çš„åº”ç”¨</li>
</ul>

<h2 id="-å‰ç½®çŸ¥è¯†">ğŸ“‹ å‰ç½®çŸ¥è¯†</h2>

<ul>
  <li>PythonåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ•´æ•°ã€æµ®ç‚¹æ•°ï¼‰</li>
  <li>æ•°å­¦åŸºç¡€ï¼ˆé™¤æ³•ã€å–æ¨¡æ¦‚å¿µï¼‰</li>
  <li>åŸºæœ¬çš„ç®—æœ¯è¿ç®—ç¬¦</li>
  <li>å…ƒç»„çš„åŸºæœ¬ä½¿ç”¨</li>
</ul>

<h2 id="-è¯¦ç»†å†…å®¹">ğŸ” è¯¦ç»†å†…å®¹</h2>

<h3 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h3>

<table>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">divmod()</code> å‡½æ•°å®ç°äº†æ¬§å‡ é‡Œå¾—é™¤æ³•ï¼Œå¯¹äºä¸¤ä¸ªæ•°å­— a å’Œ bï¼Œè¿”å› (q, r)ï¼Œå…¶ä¸­ q æ˜¯å•†ï¼Œr æ˜¯ä½™æ•°ï¼Œæ»¡è¶³ç­‰å¼ï¼ša = b * q + rï¼Œä¸” 0 â‰¤</td>
      <td>r</td>
      <td>&lt;</td>
      <td>b</td>
      <td>ã€‚</td>
    </tr>
  </tbody>
</table>

<h3 id="è¯­æ³•æ ¼å¼">è¯­æ³•æ ¼å¼</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="å‚æ•°è¯´æ˜">å‚æ•°è¯´æ˜</h3>

<table>
  <thead>
    <tr>
      <th>å‚æ•°å</th>
      <th>ç±»å‹</th>
      <th>å¿…éœ€</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>a</td>
      <td>number</td>
      <td>æ˜¯</td>
      <td>è¢«é™¤æ•°</td>
    </tr>
    <tr>
      <td>b</td>
      <td>number</td>
      <td>æ˜¯</td>
      <td>é™¤æ•°ï¼ˆä¸èƒ½ä¸º0ï¼‰</td>
    </tr>
  </tbody>
</table>

<h3 id="è¿”å›å€¼">è¿”å›å€¼</h3>

<ul>
  <li><strong>è¿”å›ç±»å‹</strong>: tuple</li>
  <li><strong>è¿”å›å†…å®¹</strong>: (å•†, ä½™æ•°) çš„äºŒå…ƒç»„</li>
  <li><strong>ç­‰ä»·å…³ç³»</strong>: divmod(a, b) ç­‰ä»·äº (a // b, a % b)</li>
</ul>

<h2 id="-å®é™…åº”ç”¨">ğŸ’¡ å®é™…åº”ç”¨</h2>

<h3 id="åŸºç¡€é™¤æ³•å’Œå–æ¨¡è¿ç®—">åŸºç¡€é™¤æ³•å’Œå–æ¨¡è¿ç®—</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># åŸºç¡€é™¤æ³•å’Œå–æ¨¡è¿ç®—ç¤ºä¾‹
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">åŸºç¡€é™¤æ³•å’Œå–æ¨¡è¿ç®—ç¤ºä¾‹:</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 1. åŸºæœ¬æ•´æ•°è¿ç®—
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">1. åŸºæœ¬æ•´æ•°è¿ç®—:</span><span class="sh">"</span><span class="p">)</span>

<span class="n">basic_cases</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>    <span class="c1"># 17 Ã· 5 = 3 ä½™ 2
</span>    <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>    <span class="c1"># 20 Ã· 3 = 6 ä½™ 2
</span>    <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>   <span class="c1"># 100 Ã· 7 = 14 ä½™ 2
</span>    <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>   <span class="c1"># 50 Ã· 10 = 5 ä½™ 0
</span>    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>     <span class="c1"># 7 Ã· 3 = 2 ä½™ 1
</span><span class="p">]</span>

<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">basic_cases</span><span class="p">:</span>
    <span class="n">quotient</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    
    <span class="c1"># éªŒè¯ç»“æœ
</span>    <span class="n">verification</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">quotient</span> <span class="o">+</span> <span class="n">remainder</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">) = (</span><span class="si">{</span><span class="n">quotient</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">remainder</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">éªŒè¯: </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> Ã— </span><span class="si">{</span><span class="n">quotient</span><span class="si">}</span><span class="s"> + </span><span class="si">{</span><span class="n">remainder</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">verification</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="sh">'</span><span class="s">âœ“</span><span class="sh">'</span> <span class="k">if</span> <span class="n">verification</span> <span class="o">==</span> <span class="n">a</span> <span class="k">else</span> <span class="sh">'</span><span class="s">âœ—</span><span class="sh">'</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="c1"># ä¸è¿ç®—ç¬¦æ¯”è¾ƒ
</span>    <span class="n">op_quotient</span> <span class="o">=</span> <span class="n">a</span> <span class="o">//</span> <span class="n">b</span>
    <span class="n">op_remainder</span> <span class="o">=</span> <span class="n">a</span> <span class="o">%</span> <span class="n">b</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">è¿ç®—ç¬¦: </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s"> // </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">op_quotient</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s"> % </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">op_remainder</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ç»“æœä¸€è‡´: </span><span class="si">{</span><span class="p">(</span><span class="n">quotient</span><span class="p">,</span> <span class="n">remainder</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">op_quotient</span><span class="p">,</span> <span class="n">op_remainder</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">()</span>

<span class="c1"># 2. è´Ÿæ•°è¿ç®—
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">2. è´Ÿæ•°è¿ç®—:</span><span class="sh">"</span><span class="p">)</span>

<span class="n">negative_cases</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="o">-</span><span class="mi">17</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>   <span class="c1"># è´Ÿè¢«é™¤æ•°
</span>    <span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">),</span>   <span class="c1"># è´Ÿé™¤æ•°
</span>    <span class="p">(</span><span class="o">-</span><span class="mi">17</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">),</span>  <span class="c1"># åŒè´Ÿæ•°
</span>    <span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>   <span class="c1"># è´Ÿè¢«é™¤æ•°ï¼Œæ­£é™¤æ•°
</span>    <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span>   <span class="c1"># æ­£è¢«é™¤æ•°ï¼Œè´Ÿé™¤æ•°
</span><span class="p">]</span>

<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">negative_cases</span><span class="p">:</span>
    <span class="n">quotient</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">verification</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">quotient</span> <span class="o">+</span> <span class="n">remainder</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">) = (</span><span class="si">{</span><span class="n">quotient</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">remainder</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">éªŒè¯: </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> Ã— </span><span class="si">{</span><span class="n">quotient</span><span class="si">}</span><span class="s"> + </span><span class="si">{</span><span class="n">remainder</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">verification</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="sh">'</span><span class="s">âœ“</span><span class="sh">'</span> <span class="k">if</span> <span class="n">verification</span> <span class="o">==</span> <span class="n">a</span> <span class="k">else</span> <span class="sh">'</span><span class="s">âœ—</span><span class="sh">'</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="c1"># ä½™æ•°ç¬¦å·è§„åˆ™è¯´æ˜
</span>    <span class="k">if</span> <span class="n">remainder</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ä½™æ•°ç¬¦å·ä¸é™¤æ•°ä¸€è‡´: </span><span class="si">{</span><span class="n">remainder</span><span class="si">}</span><span class="s"> ä¸ </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> åŒå·</span><span class="sh">"</span> <span class="nf">if </span><span class="p">(</span><span class="n">remainder</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">b</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="sa">f</span><span class="sh">"</span><span class="s">ä½™æ•°ç¬¦å·è§„åˆ™å¼‚å¸¸</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">()</span>

<span class="c1"># 3. æµ®ç‚¹æ•°è¿ç®—
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">3. æµ®ç‚¹æ•°è¿ç®—:</span><span class="sh">"</span><span class="p">)</span>

<span class="n">float_cases</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mf">17.5</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">),</span>    <span class="c1"># æµ®ç‚¹æ•°é™¤æ³•
</span>    <span class="p">(</span><span class="mf">10.7</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">),</span>    <span class="c1"># å°æ•°è¿ç®—
</span>    <span class="p">(</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">),</span>   <span class="c1"># æ•´æ•°å½¢å¼çš„æµ®ç‚¹æ•°
</span>    <span class="p">(</span><span class="mf">15.75</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">),</span>   <span class="c1"># ç²¾ç¡®é™¤æ³•
</span>    <span class="p">(</span><span class="mf">22.3</span><span class="p">,</span> <span class="mf">4.7</span><span class="p">),</span>    <span class="c1"># ä¸ç²¾ç¡®é™¤æ³•
</span><span class="p">]</span>

<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">float_cases</span><span class="p">:</span>
    <span class="n">quotient</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">verification</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">quotient</span> <span class="o">+</span> <span class="n">remainder</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">) = (</span><span class="si">{</span><span class="n">quotient</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">remainder</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">éªŒè¯: </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> Ã— </span><span class="si">{</span><span class="n">quotient</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s"> + </span><span class="si">{</span><span class="n">remainder</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">verification</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">è¯¯å·®: </span><span class="si">{</span><span class="nf">abs</span><span class="p">(</span><span class="n">verification</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span><span class="si">:</span><span class="p">.</span><span class="mi">10</span><span class="n">f</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">()</span>

<span class="c1"># 4. ç‰¹æ®Šå€¼å¤„ç†
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">4. ç‰¹æ®Šå€¼å¤„ç†:</span><span class="sh">"</span><span class="p">)</span>

<span class="n">special_cases</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>         <span class="c1"># é›¶è¢«é™¤æ•°
</span>    <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>        <span class="c1"># é™¤æ•°ä¸º1
</span>    <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>       <span class="c1"># ç›¸ç­‰çš„æ•°
</span>    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>        <span class="c1"># è¢«é™¤æ•°å°äºé™¤æ•°
</span><span class="p">]</span>

<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">special_cases</span><span class="p">:</span>
    <span class="n">quotient</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">) = (</span><span class="si">{</span><span class="n">quotient</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">remainder</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">  é›¶è¢«é™¤æ•°çš„ç»“æœæ€»æ˜¯ (0, 0)</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  é™¤æ•°ä¸º1æ—¶ï¼Œå•†ç­‰äºè¢«é™¤æ•°ï¼Œä½™æ•°ä¸º0</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  ç›¸ç­‰æ•°å­—çš„é™¤æ³•ç»“æœä¸º (1, 0)</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span> <span class="ow">and</span> <span class="n">a</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  è¢«é™¤æ•°å°äºé™¤æ•°æ—¶ï¼Œå•†ä¸º0ï¼Œä½™æ•°ç­‰äºè¢«é™¤æ•°</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">()</span>

<span class="c1"># 5. é”™è¯¯å¤„ç†
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">5. é”™è¯¯å¤„ç†:</span><span class="sh">"</span><span class="p">)</span>

<span class="n">error_cases</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>        <span class="c1"># é™¤é›¶é”™è¯¯
</span>    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>         <span class="c1"># é›¶é™¤é›¶
</span>    <span class="p">(</span><span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">),</span> <span class="mi">5</span><span class="p">),</span>  <span class="c1"># æ— ç©·å¤§
</span>    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">)),</span>  <span class="c1"># é™¤ä»¥æ— ç©·å¤§
</span>    <span class="p">(</span><span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">nan</span><span class="sh">'</span><span class="p">),</span> <span class="mi">5</span><span class="p">),</span>  <span class="c1"># NaN
</span><span class="p">]</span>

<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">error_cases</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">) = </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">) é”™è¯¯: </span><span class="si">{</span><span class="nf">type</span><span class="p">(</span><span class="n">e</span><span class="p">).</span><span class="n">__name__</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="æ—¶é—´å’Œæ—¥æœŸè®¡ç®—">æ—¶é—´å’Œæ—¥æœŸè®¡ç®—</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># æ—¶é—´å’Œæ—¥æœŸè®¡ç®—åº”ç”¨
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">æ—¶é—´å’Œæ—¥æœŸè®¡ç®—åº”ç”¨:</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 1. ç§’æ•°è½¬æ¢ä¸ºæ—¶åˆ†ç§’
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">1. ç§’æ•°è½¬æ¢ä¸ºæ—¶åˆ†ç§’:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">seconds_to_hms</span><span class="p">(</span><span class="n">total_seconds</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å°†æ€»ç§’æ•°è½¬æ¢ä¸ºæ—¶:åˆ†:ç§’æ ¼å¼</span><span class="sh">"""</span>
    <span class="n">hours</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">total_seconds</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)</span>  <span class="c1"># 1å°æ—¶ = 3600ç§’
</span>    <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">remainder</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>        <span class="c1"># 1åˆ†é’Ÿ = 60ç§’
</span>    <span class="k">return</span> <span class="nf">int</span><span class="p">(</span><span class="n">hours</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">minutes</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>

<span class="c1"># æµ‹è¯•ä¸åŒçš„ç§’æ•°
</span><span class="n">test_seconds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3661</span><span class="p">,</span> <span class="mi">7200</span><span class="p">,</span> <span class="mi">3725</span><span class="p">,</span> <span class="mi">86400</span><span class="p">,</span> <span class="mi">90061</span><span class="p">,</span> <span class="mi">123456</span><span class="p">]</span>

<span class="k">for</span> <span class="n">total_sec</span> <span class="ow">in</span> <span class="n">test_seconds</span><span class="p">:</span>
    <span class="n">h</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="nf">seconds_to_hms</span><span class="p">(</span><span class="n">total_sec</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">total_sec</span><span class="si">}</span><span class="s">ç§’ = </span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s">å°æ—¶ </span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s">åˆ†é’Ÿ </span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s">ç§’</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="c1"># éªŒè¯è½¬æ¢
</span>    <span class="n">verification</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="mi">3600</span> <span class="o">+</span> <span class="n">m</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span> <span class="n">s</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">éªŒè¯: </span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s">Ã—3600 + </span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s">Ã—60 + </span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">verification</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="sh">'</span><span class="s">âœ“</span><span class="sh">'</span> <span class="k">if</span> <span class="n">verification</span> <span class="o">==</span> <span class="n">total_sec</span> <span class="k">else</span> <span class="sh">'</span><span class="s">âœ—</span><span class="sh">'</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">()</span>

<span class="c1"># 2. åˆ†é’Ÿè½¬æ¢ä¸ºå°æ—¶å’Œåˆ†é’Ÿ
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">2. åˆ†é’Ÿè½¬æ¢ä¸ºå°æ—¶å’Œåˆ†é’Ÿ:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">minutes_to_hm</span><span class="p">(</span><span class="n">total_minutes</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å°†æ€»åˆ†é’Ÿæ•°è½¬æ¢ä¸ºå°æ—¶:åˆ†é’Ÿæ ¼å¼</span><span class="sh">"""</span>
    <span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">total_minutes</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
    <span class="k">return</span> <span class="nf">int</span><span class="p">(</span><span class="n">hours</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">minutes</span><span class="p">)</span>

<span class="n">test_minutes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mi">1440</span><span class="p">,</span> <span class="mi">2000</span><span class="p">]</span>

<span class="k">for</span> <span class="n">total_min</span> <span class="ow">in</span> <span class="n">test_minutes</span><span class="p">:</span>
    <span class="n">h</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="nf">minutes_to_hm</span><span class="p">(</span><span class="n">total_min</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">total_min</span><span class="si">}</span><span class="s">åˆ†é’Ÿ = </span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s">å°æ—¶ </span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s">åˆ†é’Ÿ</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 3. å¤©æ•°è½¬æ¢ä¸ºå¹´æœˆæ—¥ï¼ˆç®€åŒ–ç‰ˆï¼‰
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">3. å¤©æ•°è½¬æ¢ä¸ºå¹´æœˆæ—¥ï¼ˆç®€åŒ–ç‰ˆï¼‰:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">days_to_ymd</span><span class="p">(</span><span class="n">total_days</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å°†æ€»å¤©æ•°è½¬æ¢ä¸ºå¹´æœˆæ—¥ï¼ˆç®€åŒ–è®¡ç®—ï¼Œä¸è€ƒè™‘é—°å¹´ï¼‰</span><span class="sh">"""</span>
    <span class="n">years</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">total_days</span><span class="p">,</span> <span class="mi">365</span><span class="p">)</span>
    <span class="n">months</span><span class="p">,</span> <span class="n">days</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">remainder</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>  <span class="c1"># ç®€åŒ–ï¼šæ¯æœˆ30å¤©
</span>    <span class="k">return</span> <span class="nf">int</span><span class="p">(</span><span class="n">years</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">months</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">days</span><span class="p">)</span>

<span class="n">test_days</span> <span class="o">=</span> <span class="p">[</span><span class="mi">400</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">3650</span><span class="p">]</span>

<span class="k">for</span> <span class="n">total_day</span> <span class="ow">in</span> <span class="n">test_days</span><span class="p">:</span>
    <span class="n">y</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="nf">days_to_ymd</span><span class="p">(</span><span class="n">total_day</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">total_day</span><span class="si">}</span><span class="s">å¤© â‰ˆ </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s">å¹´ </span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s">æœˆ </span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s">å¤©ï¼ˆç®€åŒ–è®¡ç®—ï¼‰</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 4. å·¥ä½œæ—¶é—´è®¡ç®—
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">4. å·¥ä½œæ—¶é—´è®¡ç®—:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">work_time_breakdown</span><span class="p">(</span><span class="n">total_minutes</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å·¥ä½œæ—¶é—´åˆ†è§£ï¼ˆ8å°æ—¶å·¥ä½œæ—¥ï¼‰</span><span class="sh">"""</span>
    <span class="c1"># ä¸€ä¸ªå·¥ä½œæ—¥ = 8å°æ—¶ = 480åˆ†é’Ÿ
</span>    <span class="n">work_days</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">total_minutes</span><span class="p">,</span> <span class="mi">480</span><span class="p">)</span>
    <span class="n">work_hours</span><span class="p">,</span> <span class="n">work_minutes</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">remainder</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="nf">int</span><span class="p">(</span><span class="n">work_days</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">work_hours</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">work_minutes</span><span class="p">)</span>

<span class="n">work_scenarios</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="sh">"</span><span class="s">åŠ ç­20åˆ†é’Ÿ</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">960</span><span class="p">,</span> <span class="sh">"</span><span class="s">ä¸¤ä¸ªå·¥ä½œæ—¥</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="sh">"</span><span class="s">2.5ä¸ªå·¥ä½œæ—¥</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2400</span><span class="p">,</span> <span class="sh">"</span><span class="s">ä¸€å‘¨å·¥ä½œæ—¶é—´</span><span class="sh">"</span><span class="p">),</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">description</span> <span class="ow">in</span> <span class="n">work_scenarios</span><span class="p">:</span>
    <span class="n">days</span><span class="p">,</span> <span class="n">hours</span><span class="p">,</span> <span class="n">mins</span> <span class="o">=</span> <span class="nf">work_time_breakdown</span><span class="p">(</span><span class="n">minutes</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">minutes</span><span class="si">}</span><span class="s">åˆ†é’Ÿ = </span><span class="si">{</span><span class="n">days</span><span class="si">}</span><span class="s">ä¸ªå·¥ä½œæ—¥ </span><span class="si">{</span><span class="n">hours</span><span class="si">}</span><span class="s">å°æ—¶ </span><span class="si">{</span><span class="n">mins</span><span class="si">}</span><span class="s">åˆ†é’Ÿ</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 5. æ—¶åŒºè½¬æ¢è¾…åŠ©
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">5. æ—¶åŒºè½¬æ¢è¾…åŠ©:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">timezone_offset_to_hm</span><span class="p">(</span><span class="n">offset_minutes</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">æ—¶åŒºåç§»åˆ†é’Ÿæ•°è½¬æ¢ä¸ºÂ±å°æ—¶:åˆ†é’Ÿæ ¼å¼</span><span class="sh">"""</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="sh">'</span><span class="s">+</span><span class="sh">'</span> <span class="k">if</span> <span class="n">offset_minutes</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="sh">'</span><span class="s">-</span><span class="sh">'</span>
    <span class="n">abs_offset</span> <span class="o">=</span> <span class="nf">abs</span><span class="p">(</span><span class="n">offset_minutes</span><span class="p">)</span>
    <span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">abs_offset</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">sign</span><span class="si">}{</span><span class="n">hours</span><span class="si">:</span><span class="mi">02</span><span class="n">d</span><span class="si">}</span><span class="s">:</span><span class="si">{</span><span class="n">minutes</span><span class="si">:</span><span class="mi">02</span><span class="n">d</span><span class="si">}</span><span class="sh">"</span>

<span class="c1"># å¸¸è§æ—¶åŒºåç§»ï¼ˆç›¸å¯¹äºUTCçš„åˆ†é’Ÿæ•°ï¼‰
</span><span class="n">timezone_offsets</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">480</span><span class="p">,</span> <span class="sh">"</span><span class="s">åŒ—äº¬æ—¶é—´ UTC+8</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="sh">"</span><span class="s">ç¾å›½ä¸œéƒ¨æ—¶é—´ UTC-5</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">330</span><span class="p">,</span> <span class="sh">"</span><span class="s">å°åº¦æ ‡å‡†æ—¶é—´ UTC+5:30</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="o">-</span><span class="mi">480</span><span class="p">,</span> <span class="sh">"</span><span class="s">ç¾å›½å¤ªå¹³æ´‹æ—¶é—´ UTC-8</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="sh">"</span><span class="s">æ ¼æ—å¨æ²»æ—¶é—´ UTC+0</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">570</span><span class="p">,</span> <span class="sh">"</span><span class="s">æ¾³å¤§åˆ©äºšé˜¿å¾·è±å¾· UTC+9:30</span><span class="sh">"</span><span class="p">),</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">offset</span><span class="p">,</span> <span class="n">description</span> <span class="ow">in</span> <span class="n">timezone_offsets</span><span class="p">:</span>
    <span class="n">formatted_offset</span> <span class="o">=</span> <span class="nf">timezone_offset_to_hm</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">formatted_offset</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="è¿›åˆ¶è½¬æ¢å’Œæ•°å­¦åº”ç”¨">è¿›åˆ¶è½¬æ¢å’Œæ•°å­¦åº”ç”¨</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># è¿›åˆ¶è½¬æ¢å’Œæ•°å­¦åº”ç”¨
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">è¿›åˆ¶è½¬æ¢å’Œæ•°å­¦åº”ç”¨:</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 1. åè¿›åˆ¶è½¬ä»»æ„è¿›åˆ¶
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">1. åè¿›åˆ¶è½¬ä»»æ„è¿›åˆ¶:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">decimal_to_base</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å°†åè¿›åˆ¶æ•°è½¬æ¢ä¸ºæŒ‡å®šè¿›åˆ¶</span><span class="sh">"""</span>
    <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="sh">"</span><span class="s">0</span><span class="sh">"</span>
    
    <span class="n">digits</span> <span class="o">=</span> <span class="sh">"</span><span class="s">0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ</span><span class="sh">"</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">while</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">number</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
        <span class="n">result</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">digits</span><span class="p">[</span><span class="n">remainder</span><span class="p">])</span>
    
    <span class="k">return</span> <span class="sh">''</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="nf">reversed</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>

<span class="c1"># æµ‹è¯•ä¸åŒè¿›åˆ¶è½¬æ¢
</span><span class="n">test_numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="n">bases</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">36</span><span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">åè¿›åˆ¶æ•°è½¬æ¢ä¸ºä¸åŒè¿›åˆ¶:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">test_numbers</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">åè¿›åˆ¶ </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s">:</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="n">bases</span><span class="p">:</span>
        <span class="n">converted</span> <span class="o">=</span> <span class="nf">decimal_to_base</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  </span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s">è¿›åˆ¶: </span><span class="si">{</span><span class="n">converted</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        
        <span class="c1"># éªŒè¯è½¬æ¢ï¼ˆå¯¹äºå¸¸è§è¿›åˆ¶ï¼‰
</span>        <span class="k">if</span> <span class="n">base</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">verification</span> <span class="o">=</span> <span class="nf">bin</span><span class="p">(</span><span class="n">num</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span>  <span class="c1"># å»æ‰'0b'å‰ç¼€
</span>            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">    éªŒè¯: bin(</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s">) = </span><span class="si">{</span><span class="n">verification</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="sh">'</span><span class="s">âœ“</span><span class="sh">'</span> <span class="k">if</span> <span class="n">converted</span> <span class="o">==</span> <span class="n">verification</span> <span class="k">else</span> <span class="sh">'</span><span class="s">âœ—</span><span class="sh">'</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">base</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="n">verification</span> <span class="o">=</span> <span class="nf">oct</span><span class="p">(</span><span class="n">num</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span>  <span class="c1"># å»æ‰'0o'å‰ç¼€
</span>            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">    éªŒè¯: oct(</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s">) = </span><span class="si">{</span><span class="n">verification</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="sh">'</span><span class="s">âœ“</span><span class="sh">'</span> <span class="k">if</span> <span class="n">converted</span> <span class="o">==</span> <span class="n">verification</span> <span class="k">else</span> <span class="sh">'</span><span class="s">âœ—</span><span class="sh">'</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">base</span> <span class="o">==</span> <span class="mi">16</span><span class="p">:</span>
            <span class="n">verification</span> <span class="o">=</span> <span class="nf">hex</span><span class="p">(</span><span class="n">num</span><span class="p">)[</span><span class="mi">2</span><span class="p">:].</span><span class="nf">upper</span><span class="p">()</span>  <span class="c1"># å»æ‰'0x'å‰ç¼€å¹¶è½¬å¤§å†™
</span>            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">    éªŒè¯: hex(</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s">) = </span><span class="si">{</span><span class="n">verification</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="sh">'</span><span class="s">âœ“</span><span class="sh">'</span> <span class="k">if</span> <span class="n">converted</span> <span class="o">==</span> <span class="n">verification</span> <span class="k">else</span> <span class="sh">'</span><span class="s">âœ—</span><span class="sh">'</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 2. åˆ†æ•°åŒ–ç®€
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">2. åˆ†æ•°åŒ–ç®€:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">gcd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">è®¡ç®—æœ€å¤§å…¬çº¦æ•°ï¼ˆæ¬§å‡ é‡Œå¾—ç®—æ³•ï¼‰</span><span class="sh">"""</span>
    <span class="k">while</span> <span class="n">b</span><span class="p">:</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">%</span> <span class="n">b</span>
    <span class="k">return</span> <span class="n">a</span>

<span class="k">def</span> <span class="nf">simplify_fraction</span><span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">åŒ–ç®€åˆ†æ•°</span><span class="sh">"""</span>
    <span class="c1"># ä½¿ç”¨æœ€å¤§å…¬çº¦æ•°åŒ–ç®€
</span>    <span class="n">common_divisor</span> <span class="o">=</span> <span class="nf">gcd</span><span class="p">(</span><span class="nf">abs</span><span class="p">(</span><span class="n">numerator</span><span class="p">),</span> <span class="nf">abs</span><span class="p">(</span><span class="n">denominator</span><span class="p">))</span>
    <span class="n">simplified_num</span> <span class="o">=</span> <span class="n">numerator</span> <span class="o">//</span> <span class="n">common_divisor</span>
    <span class="n">simplified_den</span> <span class="o">=</span> <span class="n">denominator</span> <span class="o">//</span> <span class="n">common_divisor</span>
    
    <span class="c1"># ç¡®ä¿åˆ†æ¯ä¸ºæ­£
</span>    <span class="k">if</span> <span class="n">simplified_den</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">simplified_num</span> <span class="o">=</span> <span class="o">-</span><span class="n">simplified_num</span>
        <span class="n">simplified_den</span> <span class="o">=</span> <span class="o">-</span><span class="n">simplified_den</span>
    
    <span class="k">return</span> <span class="n">simplified_num</span><span class="p">,</span> <span class="n">simplified_den</span>

<span class="c1"># æµ‹è¯•åˆ†æ•°åŒ–ç®€
</span><span class="n">fractions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span>   <span class="c1"># 12/18 = 2/3
</span>    <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span>   <span class="c1"># 15/25 = 3/5
</span>    <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span> <span class="c1"># 100/150 = 2/3
</span>    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>    <span class="c1"># 7/21 = 1/3
</span>    <span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="mi">36</span><span class="p">),</span>   <span class="c1"># 24/36 = 2/3
</span>    <span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>   <span class="c1"># -8/12 = -2/3
</span><span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">åˆ†æ•°åŒ–ç®€:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">den</span> <span class="ow">in</span> <span class="n">fractions</span><span class="p">:</span>
    <span class="n">simplified_num</span><span class="p">,</span> <span class="n">simplified_den</span> <span class="o">=</span> <span class="nf">simplify_fraction</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">den</span><span class="p">)</span>
    <span class="n">gcd_value</span> <span class="o">=</span> <span class="nf">gcd</span><span class="p">(</span><span class="nf">abs</span><span class="p">(</span><span class="n">num</span><span class="p">),</span> <span class="nf">abs</span><span class="p">(</span><span class="n">den</span><span class="p">))</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">den</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">simplified_num</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">simplified_den</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  æœ€å¤§å…¬çº¦æ•°: </span><span class="si">{</span><span class="n">gcd_value</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  åŒ–ç®€è¿‡ç¨‹: </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s">Ã·</span><span class="si">{</span><span class="n">gcd_value</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">num</span><span class="o">//</span><span class="n">gcd_value</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">den</span><span class="si">}</span><span class="s">Ã·</span><span class="si">{</span><span class="n">gcd_value</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">den</span><span class="o">//</span><span class="n">gcd_value</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">()</span>

<span class="c1"># 3. æ¬§å‡ é‡Œå¾—ç®—æ³•çš„è¯¦ç»†è¿‡ç¨‹
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">3. æ¬§å‡ é‡Œå¾—ç®—æ³•è¯¦ç»†è¿‡ç¨‹:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">extended_gcd_steps</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">æ˜¾ç¤ºæ¬§å‡ é‡Œå¾—ç®—æ³•çš„è¯¦ç»†æ­¥éª¤</span><span class="sh">"""</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">è®¡ç®— gcd(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">):</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">original_a</span><span class="p">,</span> <span class="n">original_b</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
    <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span>
    
    <span class="k">while</span> <span class="n">b</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">quotient</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  æ­¥éª¤</span><span class="si">{</span><span class="n">step</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> Ã— </span><span class="si">{</span><span class="n">quotient</span><span class="si">}</span><span class="s"> + </span><span class="si">{</span><span class="n">remainder</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">remainder</span>
        <span class="n">step</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  ç»“æœ: gcd(</span><span class="si">{</span><span class="n">original_a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">original_b</span><span class="si">}</span><span class="s">) = </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span>

<span class="c1"># æ¼”ç¤ºæ¬§å‡ é‡Œå¾—ç®—æ³•
</span><span class="n">gcd_examples</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">48</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span> <span class="p">(</span><span class="mi">1071</span><span class="p">,</span> <span class="mi">462</span><span class="p">),</span> <span class="p">(</span><span class="mi">252</span><span class="p">,</span> <span class="mi">105</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">gcd_examples</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nf">extended_gcd_steps</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">()</span>

<span class="c1"># 4. æ•°å­—åˆ†è§£
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">4. æ•°å­—åˆ†è§£åº”ç”¨:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">money_breakdown</span><span class="p">(</span><span class="n">amount_cents</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å°†é‡‘é¢ï¼ˆåˆ†ï¼‰åˆ†è§£ä¸ºä¸åŒé¢é¢</span><span class="sh">"""</span>
    <span class="c1"># é¢é¢ï¼ˆåˆ†ï¼‰ï¼š100å…ƒã€50å…ƒã€20å…ƒã€10å…ƒã€5å…ƒã€1å…ƒã€5è§’ã€1è§’ã€5åˆ†ã€1åˆ†
</span>    <span class="n">denominations</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">denomination_names</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">100å…ƒ</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">50å…ƒ</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">20å…ƒ</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">10å…ƒ</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">5å…ƒ</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">1å…ƒ</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">5è§’</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">1è§’</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">5åˆ†</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">1åˆ†</span><span class="sh">'</span><span class="p">]</span>
    
    <span class="n">breakdown</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">remaining</span> <span class="o">=</span> <span class="n">amount_cents</span>
    
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">denom</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">denominations</span><span class="p">):</span>
        <span class="n">count</span><span class="p">,</span> <span class="n">remaining</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">remaining</span><span class="p">,</span> <span class="n">denom</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">breakdown</span><span class="p">.</span><span class="nf">append</span><span class="p">((</span><span class="n">denomination_names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">count</span><span class="p">))</span>
    
    <span class="k">return</span> <span class="n">breakdown</span>

<span class="c1"># æµ‹è¯•é‡‘é¢åˆ†è§£
</span><span class="n">test_amounts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12345</span><span class="p">,</span> <span class="mi">6789</span><span class="p">,</span> <span class="mi">999</span><span class="p">,</span> <span class="mi">10050</span><span class="p">]</span>  <span class="c1"># å•ä½ï¼šåˆ†
</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">é‡‘é¢åˆ†è§£:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">test_amounts</span><span class="p">:</span>
    <span class="n">yuan</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">/</span> <span class="mi">100</span>
    <span class="n">breakdown</span> <span class="o">=</span> <span class="nf">money_breakdown</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="si">{</span><span class="n">yuan</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="s">å…ƒ (</span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s">åˆ†) çš„æœ€ä¼˜åˆ†è§£:</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">denom_name</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">breakdown</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  </span><span class="si">{</span><span class="n">denom_name</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s">å¼ /ä¸ª</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="c1"># éªŒè¯åˆ†è§£ç»“æœ
</span>    <span class="n">total_check</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">denominations</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">denom_name</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">breakdown</span><span class="p">):</span>
        <span class="n">total_check</span> <span class="o">+=</span> <span class="n">denominations</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">count</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  éªŒè¯: æ€»è®¡ </span><span class="si">{</span><span class="n">total_check</span><span class="si">}</span><span class="s">åˆ† </span><span class="si">{</span><span class="sh">'</span><span class="s">âœ“</span><span class="sh">'</span> <span class="k">if</span> <span class="n">total_check</span> <span class="o">==</span> <span class="n">amount</span> <span class="k">else</span> <span class="sh">'</span><span class="s">âœ—</span><span class="sh">'</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 5. åæ ‡ç³»è½¬æ¢
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">5. åæ ‡ç³»åº”ç”¨:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">linear_index_to_2d</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å°†ä¸€ç»´ç´¢å¼•è½¬æ¢ä¸ºäºŒç»´åæ ‡</span><span class="sh">"""</span>
    <span class="n">row</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span>

<span class="k">def</span> <span class="nf">coord_2d_to_linear</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å°†äºŒç»´åæ ‡è½¬æ¢ä¸ºä¸€ç»´ç´¢å¼•</span><span class="sh">"""</span>
    <span class="k">return</span> <span class="n">row</span> <span class="o">*</span> <span class="n">width</span> <span class="o">+</span> <span class="n">col</span>

<span class="c1"># æµ‹è¯•åæ ‡è½¬æ¢ï¼ˆä¾‹å¦‚ï¼š8x8æ£‹ç›˜ï¼‰
</span><span class="n">board_width</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">test_indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">42</span><span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ä¸€ç»´ç´¢å¼•ä¸äºŒç»´åæ ‡è½¬æ¢ï¼ˆ</span><span class="si">{</span><span class="n">board_width</span><span class="si">}</span><span class="s">x</span><span class="si">{</span><span class="n">board_width</span><span class="si">}</span><span class="s">ç½‘æ ¼ï¼‰:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">test_indices</span><span class="p">:</span>
    <span class="n">row</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="nf">linear_index_to_2d</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">board_width</span><span class="p">)</span>
    <span class="n">back_to_index</span> <span class="o">=</span> <span class="nf">coord_2d_to_linear</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">board_width</span><span class="p">)</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ç´¢å¼• </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s"> â†’ åæ ‡ (</span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s">) â†’ ç´¢å¼• </span><span class="si">{</span><span class="n">back_to_index</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="sh">'</span><span class="s">âœ“</span><span class="sh">'</span> <span class="k">if</span> <span class="n">back_to_index</span> <span class="o">==</span> <span class="n">index</span> <span class="k">else</span> <span class="sh">'</span><span class="s">âœ—</span><span class="sh">'</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 6. åˆ†é¡µè®¡ç®—
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">6. åˆ†é¡µè®¡ç®—:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">calculate_pagination</span><span class="p">(</span><span class="n">total_items</span><span class="p">,</span> <span class="n">items_per_page</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">è®¡ç®—åˆ†é¡µä¿¡æ¯</span><span class="sh">"""</span>
    <span class="n">total_pages</span><span class="p">,</span> <span class="n">remaining_items</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">total_items</span><span class="p">,</span> <span class="n">items_per_page</span><span class="p">)</span>
    
    <span class="c1"># å¦‚æœæœ‰å‰©ä½™é¡¹ç›®ï¼Œéœ€è¦é¢å¤–ä¸€é¡µ
</span>    <span class="k">if</span> <span class="n">remaining_items</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">total_pages</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="k">return</span> <span class="n">total_pages</span><span class="p">,</span> <span class="n">remaining_items</span>

<span class="k">def</span> <span class="nf">get_page_items</span><span class="p">(</span><span class="n">total_items</span><span class="p">,</span> <span class="n">items_per_page</span><span class="p">,</span> <span class="n">page_number</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">è·å–æŒ‡å®šé¡µé¢çš„é¡¹ç›®èŒƒå›´</span><span class="sh">"""</span>
    <span class="n">start_index</span> <span class="o">=</span> <span class="p">(</span><span class="n">page_number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">items_per_page</span>
    <span class="n">end_index</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">start_index</span> <span class="o">+</span> <span class="n">items_per_page</span><span class="p">,</span> <span class="n">total_items</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">start_index</span><span class="p">,</span> <span class="n">end_index</span>

<span class="c1"># æµ‹è¯•åˆ†é¡µè®¡ç®—
</span><span class="n">pagination_tests</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>  <span class="c1"># 100ä¸ªé¡¹ç›®ï¼Œæ¯é¡µ10ä¸ª
</span>    <span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>   <span class="c1"># 97ä¸ªé¡¹ç›®ï¼Œæ¯é¡µ10ä¸ª
</span>    <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>    <span class="c1"># 50ä¸ªé¡¹ç›®ï¼Œæ¯é¡µ7ä¸ª
</span>    <span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span> <span class="c1"># 1000ä¸ªé¡¹ç›®ï¼Œæ¯é¡µ25ä¸ª
</span><span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">åˆ†é¡µè®¡ç®—:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">total</span><span class="p">,</span> <span class="n">per_page</span> <span class="ow">in</span> <span class="n">pagination_tests</span><span class="p">:</span>
    <span class="n">total_pages</span><span class="p">,</span> <span class="n">remaining</span> <span class="o">=</span> <span class="nf">calculate_pagination</span><span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="n">per_page</span><span class="p">)</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">æ€»é¡¹ç›®: </span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s">, æ¯é¡µ: </span><span class="si">{</span><span class="n">per_page</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ€»é¡µæ•°: </span><span class="si">{</span><span class="n">total_pages</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æœ€åä¸€é¡µé¡¹ç›®æ•°: </span><span class="si">{</span><span class="n">remaining</span> <span class="k">if</span> <span class="n">remaining</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">per_page</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="c1"># æ˜¾ç¤ºå‰å‡ é¡µå’Œæœ€åä¸€é¡µçš„é¡¹ç›®èŒƒå›´
</span>    <span class="n">pages_to_show</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">total_pages</span><span class="p">]</span> <span class="k">if</span> <span class="n">total_pages</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="nf">list</span><span class="p">(</span><span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">total_pages</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">pages_to_show</span><span class="p">:</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="nf">get_page_items</span><span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="n">per_page</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
        <span class="n">item_count</span> <span class="o">=</span> <span class="n">end</span> <span class="o">-</span> <span class="n">start</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  ç¬¬</span><span class="si">{</span><span class="n">page</span><span class="si">}</span><span class="s">é¡µ: é¡¹ç›® </span><span class="si">{</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s">-</span><span class="si">{</span><span class="n">end</span><span class="si">}</span><span class="s"> (å…±</span><span class="si">{</span><span class="n">item_count</span><span class="si">}</span><span class="s">ä¸ª)</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="ç®—æ³•å’Œæ•°æ®ç»“æ„åº”ç”¨">ç®—æ³•å’Œæ•°æ®ç»“æ„åº”ç”¨</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ç®—æ³•å’Œæ•°æ®ç»“æ„åº”ç”¨
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">ç®—æ³•å’Œæ•°æ®ç»“æ„åº”ç”¨:</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 1. å“ˆå¸Œè¡¨å®ç°ä¸­çš„åº”ç”¨
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">1. å“ˆå¸Œè¡¨ç´¢å¼•è®¡ç®—:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">SimpleHashTable</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">ç®€å•å“ˆå¸Œè¡¨å®ç°</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="n">self</span><span class="p">.</span><span class="n">table</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">size</span><span class="p">)]</span>  <span class="c1"># ä½¿ç”¨é“¾è¡¨è§£å†³å†²çª
</span>    
    <span class="k">def</span> <span class="nf">_hash</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">ç®€å•å“ˆå¸Œå‡½æ•°</span><span class="sh">"""</span>
        <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">hash_value</span> <span class="o">=</span> <span class="nf">sum</span><span class="p">(</span><span class="nf">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">key</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hash_value</span> <span class="o">=</span> <span class="nf">hash</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        
        <span class="c1"># ä½¿ç”¨divmodç¡®ä¿ç´¢å¼•åœ¨æœ‰æ•ˆèŒƒå›´å†…
</span>        <span class="n">_</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="nf">abs</span><span class="p">(</span><span class="n">hash_value</span><span class="p">),</span> <span class="n">self</span><span class="p">.</span><span class="n">size</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">index</span>
    
    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">æ’å…¥é”®å€¼å¯¹</span><span class="sh">"""</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">_hash</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">bucket</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">table</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        
        <span class="c1"># æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨è¯¥é”®
</span>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">bucket</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
                <span class="n">bucket</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>  <span class="c1"># æ›´æ–°å€¼
</span>                <span class="k">return</span>
        
        <span class="c1"># æ·»åŠ æ–°çš„é”®å€¼å¯¹
</span>        <span class="n">bucket</span><span class="p">.</span><span class="nf">append</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
    
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">è·å–å€¼</span><span class="sh">"""</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">_hash</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">bucket</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">table</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">bucket</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">v</span>
        
        <span class="k">raise</span> <span class="nc">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">æ˜¾ç¤ºå“ˆå¸Œè¡¨å†…å®¹</span><span class="sh">"""</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bucket</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">table</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">bucket</span><span class="p">:</span>
                <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  ç´¢å¼• </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">bucket</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># æµ‹è¯•å“ˆå¸Œè¡¨
</span><span class="n">ht</span> <span class="o">=</span> <span class="nc">SimpleHashTable</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="n">test_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">apple</span><span class="sh">"</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">banana</span><span class="sh">"</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">cherry</span><span class="sh">"</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">date</span><span class="sh">"</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">elderberry</span><span class="sh">"</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="sh">"</span><span class="s">number key</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">apple</span><span class="sh">"</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>  <span class="c1"># æ›´æ–°å·²å­˜åœ¨çš„é”®
</span><span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">å“ˆå¸Œè¡¨æ“ä½œ:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">test_data</span><span class="p">:</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">ht</span><span class="p">.</span><span class="nf">_hash</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ’å…¥ (</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s">) â†’ å“ˆå¸Œç´¢å¼•: </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">ht</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">å“ˆå¸Œè¡¨å†…å®¹:</span><span class="sh">"</span><span class="p">)</span>
<span class="n">ht</span><span class="p">.</span><span class="nf">display</span><span class="p">()</span>

<span class="c1"># 2. å¾ªç¯æ•°ç»„ç´¢å¼•
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">2. å¾ªç¯æ•°ç»„ç´¢å¼•:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">CircularArray</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">å¾ªç¯æ•°ç»„å®ç°</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="n">self</span><span class="p">.</span><span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span>
        <span class="n">self</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># èµ·å§‹ä½ç½®
</span>        <span class="n">self</span><span class="p">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># å½“å‰å…ƒç´ æ•°é‡
</span>    
    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">æ·»åŠ å…ƒç´ </span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">count</span> <span class="o">&lt;</span> <span class="n">self</span><span class="p">.</span><span class="n">size</span><span class="p">:</span>
            <span class="c1"># æ•°ç»„æœªæ»¡ï¼Œç›´æ¥æ·»åŠ 
</span>            <span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">count</span><span class="p">)</span> <span class="o">%</span> <span class="n">self</span><span class="p">.</span><span class="n">size</span>
            <span class="n">self</span><span class="p">.</span><span class="n">array</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
            <span class="n">self</span><span class="p">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># æ•°ç»„å·²æ»¡ï¼Œè¦†ç›–æœ€æ—§çš„å…ƒç´ 
</span>            <span class="n">self</span><span class="p">.</span><span class="n">array</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">start</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
            <span class="n">self</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">self</span><span class="p">.</span><span class="n">size</span>
    
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">logical_index</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">æ ¹æ®é€»è¾‘ç´¢å¼•è·å–å…ƒç´ </span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">logical_index</span> <span class="o">&gt;=</span> <span class="n">self</span><span class="p">.</span><span class="n">count</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nc">IndexError</span><span class="p">(</span><span class="sh">"</span><span class="s">Index out of range</span><span class="sh">"</span><span class="p">)</span>
        
        <span class="c1"># ä½¿ç”¨divmodè®¡ç®—å®é™…ç‰©ç†ç´¢å¼•
</span>        <span class="n">_</span><span class="p">,</span> <span class="n">physical_index</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">logical_index</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">size</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">array</span><span class="p">[</span><span class="n">physical_index</span><span class="p">]</span>
    
    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">æ˜¾ç¤ºæ•°ç»„çŠ¶æ€</span><span class="sh">"""</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  å¤§å°: </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">size</span><span class="si">}</span><span class="s">, å…ƒç´ æ•°: </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">count</span><span class="si">}</span><span class="s">, èµ·å§‹ä½ç½®: </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">start</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  ç‰©ç†æ•°ç»„: </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">array</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">logical_view</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">count</span><span class="p">)]</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  é€»è¾‘è§†å›¾: </span><span class="si">{</span><span class="n">logical_view</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># æµ‹è¯•å¾ªç¯æ•°ç»„
</span><span class="n">circ_array</span> <span class="o">=</span> <span class="nc">CircularArray</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">test_items</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">B</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">C</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">D</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">E</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">F</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">G</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">H</span><span class="sh">'</span><span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">å¾ªç¯æ•°ç»„æ“ä½œ:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">test_items</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">æ·»åŠ å…ƒç´  </span><span class="sh">'</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="sh">'</span><span class="s">:</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">circ_array</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="n">circ_array</span><span class="p">.</span><span class="nf">display</span><span class="p">()</span>

<span class="c1"># 3. æ—¶é—´è½®ç®—æ³•
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">3. æ—¶é—´è½®ç®—æ³•æ¨¡æ‹Ÿ:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">TimeWheel</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">ç®€å•æ—¶é—´è½®å®ç°</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">slots</span><span class="o">=</span><span class="mi">60</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">slots</span> <span class="o">=</span> <span class="n">slots</span>  <span class="c1"># æ—¶é—´æ§½æ•°é‡ï¼ˆä¾‹å¦‚60ç§’ï¼‰
</span>        <span class="n">self</span><span class="p">.</span><span class="n">wheel</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">slots</span><span class="p">)]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">current_time</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">def</span> <span class="nf">add_task</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">delay</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">æ·»åŠ å»¶æ—¶ä»»åŠ¡</span><span class="sh">"""</span>
        <span class="c1"># è®¡ç®—ä»»åŠ¡åº”è¯¥æ”¾åœ¨å“ªä¸ªæ§½ä¸­
</span>        <span class="n">target_time</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">current_time</span> <span class="o">+</span> <span class="n">delay</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">slot_index</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">target_time</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">slots</span><span class="p">)</span>
        
        <span class="c1"># è®¡ç®—éœ€è¦è½¬å¤šå°‘åœˆ
</span>        <span class="n">rounds</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">delay</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">slots</span><span class="p">)</span>
        
        <span class="n">self</span><span class="p">.</span><span class="n">wheel</span><span class="p">[</span><span class="n">slot_index</span><span class="p">].</span><span class="nf">append</span><span class="p">({</span>
            <span class="sh">'</span><span class="s">task</span><span class="sh">'</span><span class="p">:</span> <span class="n">task</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">rounds</span><span class="sh">'</span><span class="p">:</span> <span class="n">rounds</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">target_time</span><span class="sh">'</span><span class="p">:</span> <span class="n">target_time</span>
        <span class="p">})</span>
        
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ä»»åŠ¡ </span><span class="sh">'</span><span class="si">{</span><span class="n">task</span><span class="si">}</span><span class="sh">'</span><span class="s"> å»¶æ—¶ </span><span class="si">{</span><span class="n">delay</span><span class="si">}</span><span class="s">ç§’ï¼Œæ”¾å…¥æ§½ </span><span class="si">{</span><span class="n">slot_index</span><span class="si">}</span><span class="s">ï¼Œéœ€ç­‰å¾… </span><span class="si">{</span><span class="n">rounds</span><span class="si">}</span><span class="s"> åœˆ</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">tick</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">æ—¶é—´å‰è¿›ä¸€ç§’</span><span class="sh">"""</span>
        <span class="n">current_slot</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">current_time</span> <span class="o">%</span> <span class="n">self</span><span class="p">.</span><span class="n">slots</span>
        <span class="n">tasks_to_execute</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">remaining_tasks</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="c1"># æ£€æŸ¥å½“å‰æ§½ä¸­çš„ä»»åŠ¡
</span>        <span class="k">for</span> <span class="n">task_info</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">wheel</span><span class="p">[</span><span class="n">current_slot</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">task_info</span><span class="p">[</span><span class="sh">'</span><span class="s">rounds</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">tasks_to_execute</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">task_info</span><span class="p">[</span><span class="sh">'</span><span class="s">task</span><span class="sh">'</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">task_info</span><span class="p">[</span><span class="sh">'</span><span class="s">rounds</span><span class="sh">'</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="n">remaining_tasks</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">task_info</span><span class="p">)</span>
        
        <span class="c1"># æ›´æ–°å½“å‰æ§½
</span>        <span class="n">self</span><span class="p">.</span><span class="n">wheel</span><span class="p">[</span><span class="n">current_slot</span><span class="p">]</span> <span class="o">=</span> <span class="n">remaining_tasks</span>
        
        <span class="c1"># æ‰§è¡Œåˆ°æœŸä»»åŠ¡
</span>        <span class="k">if</span> <span class="n">tasks_to_execute</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ—¶é—´ </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">current_time</span><span class="si">}</span><span class="s">: æ‰§è¡Œä»»åŠ¡ </span><span class="si">{</span><span class="n">tasks_to_execute</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        
        <span class="n">self</span><span class="p">.</span><span class="n">current_time</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">tasks_to_execute</span>

<span class="c1"># æµ‹è¯•æ—¶é—´è½®
</span><span class="n">time_wheel</span> <span class="o">=</span> <span class="nc">TimeWheel</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># 10ä¸ªæ—¶é—´æ§½
</span>
<span class="c1"># æ·»åŠ ä¸€äº›ä»»åŠ¡
</span><span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="sh">"</span><span class="s">ä»»åŠ¡A</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="sh">"</span><span class="s">ä»»åŠ¡B</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="sh">"</span><span class="s">ä»»åŠ¡C</span><span class="sh">"</span><span class="p">),</span>  <span class="c1"># éœ€è¦è½¬1åœˆå¤š
</span>    <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="sh">"</span><span class="s">ä»»åŠ¡D</span><span class="sh">"</span><span class="p">),</span>  <span class="c1"># éœ€è¦è½¬2åœˆå¤š
</span>    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="sh">"</span><span class="s">ä»»åŠ¡E</span><span class="sh">"</span><span class="p">),</span>
<span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">æ—¶é—´è½®ä»»åŠ¡è°ƒåº¦:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">delay</span><span class="p">,</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
    <span class="n">time_wheel</span><span class="p">.</span><span class="nf">add_task</span><span class="p">(</span><span class="n">delay</span><span class="p">,</span> <span class="n">task</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">æ—¶é—´è½®è¿è¡Œ:</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># æ¨¡æ‹Ÿ30ç§’çš„è¿è¡Œ
</span><span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
    <span class="n">executed</span> <span class="o">=</span> <span class="n">time_wheel</span><span class="p">.</span><span class="nf">tick</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">executed</span> <span class="ow">and</span> <span class="n">time_wheel</span><span class="p">.</span><span class="n">current_time</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ—¶é—´ </span><span class="si">{</span><span class="n">time_wheel</span><span class="p">.</span><span class="n">current_time</span><span class="si">}</span><span class="s">: æ— ä»»åŠ¡æ‰§è¡Œ</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 4. è´Ÿè½½å‡è¡¡ç®—æ³•
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">4. è½®è¯¢è´Ÿè½½å‡è¡¡:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">RoundRobinBalancer</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">è½®è¯¢è´Ÿè½½å‡è¡¡å™¨</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">servers</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">servers</span> <span class="o">=</span> <span class="n">servers</span>
        <span class="n">self</span><span class="p">.</span><span class="n">current_index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">self</span><span class="p">.</span><span class="n">request_count</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">def</span> <span class="nf">get_server</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">è·å–ä¸‹ä¸€ä¸ªæœåŠ¡å™¨</span><span class="sh">"""</span>
        <span class="c1"># ä½¿ç”¨divmodå®ç°è½®è¯¢
</span>        <span class="n">_</span><span class="p">,</span> <span class="n">server_index</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">request_count</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">servers</span><span class="p">))</span>
        <span class="n">selected_server</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">servers</span><span class="p">[</span><span class="n">server_index</span><span class="p">]</span>
        
        <span class="n">self</span><span class="p">.</span><span class="n">request_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">selected_server</span><span class="p">,</span> <span class="n">server_index</span>
    
    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">è·å–ç»Ÿè®¡ä¿¡æ¯</span><span class="sh">"""</span>
        <span class="n">requests_per_server</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">request_count</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">servers</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">total_requests</span><span class="sh">'</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">request_count</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">requests_per_server</span><span class="sh">'</span><span class="p">:</span> <span class="n">requests_per_server</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">extra_requests</span><span class="sh">'</span><span class="p">:</span> <span class="n">remainder</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">servers</span><span class="sh">'</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">servers</span>
        <span class="p">}</span>

<span class="c1"># æµ‹è¯•è´Ÿè½½å‡è¡¡
</span><span class="n">servers</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">Server-A</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Server-B</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Server-C</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Server-D</span><span class="sh">'</span><span class="p">]</span>
<span class="n">balancer</span> <span class="o">=</span> <span class="nc">RoundRobinBalancer</span><span class="p">(</span><span class="n">servers</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">è½®è¯¢è´Ÿè½½å‡è¡¡æµ‹è¯•:</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æœåŠ¡å™¨åˆ—è¡¨: </span><span class="si">{</span><span class="n">servers</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">è¯·æ±‚åˆ†å‘:</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># æ¨¡æ‹Ÿ15ä¸ªè¯·æ±‚
</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">15</span><span class="p">):</span>
    <span class="n">server</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">balancer</span><span class="p">.</span><span class="nf">get_server</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">è¯·æ±‚ </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">:</span><span class="mi">2</span><span class="n">d</span><span class="si">}</span><span class="s"> â†’ </span><span class="si">{</span><span class="n">server</span><span class="si">}</span><span class="s"> (ç´¢å¼• </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
</span><span class="n">stats</span> <span class="o">=</span> <span class="n">balancer</span><span class="p">.</span><span class="nf">get_stats</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">ç»Ÿè®¡ä¿¡æ¯:</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ€»è¯·æ±‚æ•°: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="sh">'</span><span class="s">total_requests</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ¯æœåŠ¡å™¨åŸºç¡€è¯·æ±‚æ•°: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="sh">'</span><span class="s">requests_per_server</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">é¢å¤–è¯·æ±‚æ•°: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="sh">'</span><span class="s">extra_requests</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å‰</span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="sh">'</span><span class="s">extra_requests</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">ä¸ªæœåŠ¡å™¨å„å¤šå¤„ç†1ä¸ªè¯·æ±‚</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="ï¸-æ³¨æ„äº‹é¡¹">âš ï¸ æ³¨æ„äº‹é¡¹</h2>

<h3 id="å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ">å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># divmod()å‡½æ•°çš„å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">divmod()å‡½æ•°å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ:</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># é™·é˜±1: è´Ÿæ•°çš„é™¤æ³•å’Œå–æ¨¡è¡Œä¸º
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">é™·é˜±1: è´Ÿæ•°çš„é™¤æ³•å’Œå–æ¨¡è¡Œä¸º</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># Pythonçš„é™¤æ³•å’Œå–æ¨¡éµå¾ªç‰¹å®šè§„åˆ™
</span><span class="n">test_cases</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>     <span class="c1"># æ­£æ•°æƒ…å†µ
</span>    <span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>    <span class="c1"># è´Ÿè¢«é™¤æ•°
</span>    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span>    <span class="c1"># è´Ÿé™¤æ•°
</span>    <span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span>   <span class="c1"># åŒè´Ÿæ•°
</span><span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Pythonçš„é™¤æ³•å’Œå–æ¨¡è§„åˆ™:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">test_cases</span><span class="p">:</span>
    <span class="n">q</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">floor_div</span> <span class="o">=</span> <span class="n">a</span> <span class="o">//</span> <span class="n">b</span>
    <span class="n">mod_result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">%</span> <span class="n">b</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">) = (</span><span class="si">{</span><span class="n">q</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s"> // </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">floor_div</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s"> % </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">mod_result</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">éªŒè¯: </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> Ã— </span><span class="si">{</span><span class="n">q</span><span class="si">}</span><span class="s"> + </span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">b</span> <span class="o">*</span> <span class="n">q</span> <span class="o">+</span> <span class="n">r</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="c1"># é‡è¦è§„åˆ™è¯´æ˜
</span>    <span class="k">if</span> <span class="n">r</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ä½™æ•°ç¬¦å·ä¸é™¤æ•°ä¸€è‡´: </span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s"> ä¸ </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="sh">'</span><span class="s">åŒå·</span><span class="sh">'</span> <span class="nf">if </span><span class="p">(</span><span class="n">r</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">b</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="sh">'</span><span class="s">å¼‚å·</span><span class="sh">'</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="c1"># ä¸å…¶ä»–è¯­è¨€çš„å·®å¼‚
</span>    <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ³¨æ„: åœ¨C/Javaä¸­ï¼Œ</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s"> / </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> çš„å•†å¯èƒ½æ˜¯ </span><span class="si">{</span><span class="n">a</span> <span class="o">//</span> <span class="n">b</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s">ï¼Œä½™æ•°æ˜¯ </span><span class="si">{</span><span class="n">a</span> <span class="o">%</span> <span class="n">b</span> <span class="o">-</span> <span class="n">b</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">é‡è¦è§„åˆ™:</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">1. Pythonä½¿ç”¨å‘ä¸‹å–æ•´é™¤æ³•ï¼ˆfloor divisionï¼‰</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">2. ä½™æ•°çš„ç¬¦å·æ€»æ˜¯ä¸é™¤æ•°ç›¸åŒ</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">3. æ»¡è¶³ç­‰å¼: a = b * q + rï¼Œä¸” 0 â‰¤ |r| &lt; |b|</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># é™·é˜±2: æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">é™·é˜±2: æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜</span><span class="sh">"</span><span class="p">)</span>

<span class="n">float_cases</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">),</span>
    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>     <span class="c1"># 0.1æ— æ³•ç²¾ç¡®è¡¨ç¤º
</span>    <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>     <span class="c1"># ä¸¤ä¸ªæ— æ³•ç²¾ç¡®è¡¨ç¤ºçš„æ•°
</span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
<span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">æµ®ç‚¹æ•°divmodå¯èƒ½çš„ç²¾åº¦é—®é¢˜:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">float_cases</span><span class="p">:</span>
    <span class="n">q</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">verification</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">q</span> <span class="o">+</span> <span class="n">r</span>
    <span class="n">error</span> <span class="o">=</span> <span class="nf">abs</span><span class="p">(</span><span class="n">verification</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">) = (</span><span class="si">{</span><span class="n">q</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">éªŒè¯: </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> Ã— </span><span class="si">{</span><span class="n">q</span><span class="si">}</span><span class="s"> + </span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">verification</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">è¯¯å·®: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">error</span> <span class="o">&gt;</span> <span class="mf">1e-15</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">âš ï¸  å­˜åœ¨ç²¾åº¦è¯¯å·®</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å»ºè®®: å¯¹äºç²¾ç¡®è®¡ç®—ï¼Œè€ƒè™‘ä½¿ç”¨decimalæ¨¡å—</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># ä½¿ç”¨decimalæ¨¡å—çš„ç²¾ç¡®è®¡ç®—
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">ä½¿ç”¨decimalæ¨¡å—è¿›è¡Œç²¾ç¡®è®¡ç®—:</span><span class="sh">"</span><span class="p">)</span>
<span class="kn">from</span> <span class="n">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span><span class="p">,</span> <span class="n">getcontext</span>

<span class="nf">getcontext</span><span class="p">().</span><span class="n">prec</span> <span class="o">=</span> <span class="mi">28</span>  <span class="c1"># è®¾ç½®ç²¾åº¦
</span>
<span class="n">decimal_a</span> <span class="o">=</span> <span class="nc">Decimal</span><span class="p">(</span><span class="sh">'</span><span class="s">1.0</span><span class="sh">'</span><span class="p">)</span>
<span class="n">decimal_b</span> <span class="o">=</span> <span class="nc">Decimal</span><span class="p">(</span><span class="sh">'</span><span class="s">0.3</span><span class="sh">'</span><span class="p">)</span>
<span class="n">q</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">decimal_a</span><span class="p">,</span> <span class="n">decimal_b</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Decimal divmod(</span><span class="si">{</span><span class="n">decimal_a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">decimal_b</span><span class="si">}</span><span class="s">) = (</span><span class="si">{</span><span class="n">q</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">éªŒè¯: </span><span class="si">{</span><span class="n">decimal_b</span><span class="si">}</span><span class="s"> Ã— </span><span class="si">{</span><span class="n">q</span><span class="si">}</span><span class="s"> + </span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">decimal_b</span> <span class="o">*</span> <span class="n">q</span> <span class="o">+</span> <span class="n">r</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># é™·é˜±3: é™¤é›¶é”™è¯¯
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">é™·é˜±3: é™¤é›¶é”™è¯¯å¤„ç†</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">safe_divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å®‰å…¨çš„divmodå‡½æ•°</span><span class="sh">"""</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">ZeroDivisionError</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">é”™è¯¯: ä¸èƒ½é™¤ä»¥é›¶ (divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">))</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">é”™è¯¯: </span><span class="si">{</span><span class="nf">type</span><span class="p">(</span><span class="n">e</span><span class="p">).</span><span class="n">__name__</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>

<span class="c1"># æµ‹è¯•é”™è¯¯å¤„ç†
</span><span class="n">error_cases</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">(</span><span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">),</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">)),</span>
<span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">é”™è¯¯å¤„ç†æµ‹è¯•:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">error_cases</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">safe_divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">):</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nf">safe_divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  ç»“æœ: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># é™·é˜±4: æ€§èƒ½è€ƒè™‘
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">é™·é˜±4: æ€§èƒ½è€ƒè™‘</span><span class="sh">"</span><span class="p">)</span>

<span class="kn">import</span> <span class="n">time</span>

<span class="c1"># æ¯”è¾ƒdivmodä¸åˆ†åˆ«ä½¿ç”¨//å’Œ%çš„æ€§èƒ½
</span><span class="n">test_data</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">)]</span>

<span class="c1"># æ–¹æ³•1: ä½¿ç”¨divmod
</span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
<span class="n">results1</span> <span class="o">=</span> <span class="p">[</span><span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">test_data</span><span class="p">]</span>
<span class="n">time1</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>

<span class="c1"># æ–¹æ³•2: åˆ†åˆ«ä½¿ç”¨//å’Œ%
</span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
<span class="n">results2</span> <span class="o">=</span> <span class="p">[(</span><span class="n">a</span> <span class="o">//</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">%</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">test_data</span><span class="p">]</span>
<span class="n">time2</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>

<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ€§èƒ½æ¯”è¾ƒ (100,000æ¬¡æ“ä½œ):</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">divmodæ–¹æ³•: </span><span class="si">{</span><span class="n">time1</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">ç§’</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">//å’Œ%æ–¹æ³•: </span><span class="si">{</span><span class="n">time2</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">ç§’</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ€§èƒ½å·®å¼‚: </span><span class="si">{</span><span class="nf">abs</span><span class="p">(</span><span class="n">time1</span> <span class="o">-</span> <span class="n">time2</span><span class="p">)</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">ç§’</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ç»“æœä¸€è‡´: </span><span class="si">{</span><span class="n">results1</span> <span class="o">==</span> <span class="n">results2</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">time1</span> <span class="o">&lt;</span> <span class="n">time2</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">divmodæ›´å¿«ï¼Œæ¨èåœ¨éœ€è¦åŒæ—¶è·å–å•†å’Œä½™æ•°æ—¶ä½¿ç”¨</span><span class="sh">"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">åˆ†åˆ«è®¡ç®—æ›´å¿«ï¼Œä½†å·®å¼‚é€šå¸¸å¾ˆå°</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># é™·é˜±5: ç±»å‹è½¬æ¢é—®é¢˜
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">é™·é˜±5: ç±»å‹è½¬æ¢é—®é¢˜</span><span class="sh">"</span><span class="p">)</span>

<span class="n">type_cases</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>        <span class="c1"># int, int
</span>    <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>      <span class="c1"># float, int
</span>    <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">),</span>      <span class="c1"># int, float
</span>    <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">),</span>    <span class="c1"># float, float
</span>    <span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>      <span class="c1"># bool, int (True = 1)
</span>    <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>     <span class="c1"># int, bool (True = 1)
</span><span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">ä¸åŒç±»å‹çš„divmodç»“æœ:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">type_cases</span><span class="p">:</span>
    <span class="n">q</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="nf">type</span><span class="p">(</span><span class="n">a</span><span class="p">).</span><span class="n">__name__</span><span class="si">}</span><span class="s">), </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="nf">type</span><span class="p">(</span><span class="n">b</span><span class="p">).</span><span class="n">__name__</span><span class="si">}</span><span class="s">)) = (</span><span class="si">{</span><span class="n">q</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="nf">type</span><span class="p">(</span><span class="n">q</span><span class="p">).</span><span class="n">__name__</span><span class="si">}</span><span class="s">), </span><span class="si">{</span><span class="n">r</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="nf">type</span><span class="p">(</span><span class="n">r</span><span class="p">).</span><span class="n">__name__</span><span class="si">}</span><span class="s">))</span><span class="sh">"</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">ç±»å‹è§„åˆ™:</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">1. å¦‚æœä»»ä¸€æ“ä½œæ•°æ˜¯floatï¼Œç»“æœä¸ºfloat</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">2. å¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯intï¼Œç»“æœä¸ºint</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">3. boolè¢«è§†ä¸ºintï¼ˆTrue=1, False=0ï¼‰</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># æœ€ä½³å®è·µæ€»ç»“
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">æœ€ä½³å®è·µæ€»ç»“:</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">1. ç†è§£Pythonçš„å‘ä¸‹å–æ•´é™¤æ³•è§„åˆ™</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">2. æ³¨æ„è´Ÿæ•°çš„é™¤æ³•å’Œå–æ¨¡è¡Œä¸º</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">3. å¯¹äºç²¾ç¡®è®¡ç®—ï¼Œè€ƒè™‘ä½¿ç”¨decimalæ¨¡å—</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">4. å§‹ç»ˆå¤„ç†é™¤é›¶é”™è¯¯</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">5. åœ¨éœ€è¦åŒæ—¶è·å–å•†å’Œä½™æ•°æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨divmod</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">6. æ³¨æ„ä¸åŒæ•°æ®ç±»å‹çš„ç»“æœç±»å‹</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">7. åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸­ï¼Œæµ‹è¯•divmodä¸åˆ†åˆ«è®¡ç®—çš„æ€§èƒ½</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">8. åœ¨ç®—æ³•å®ç°ä¸­ï¼Œdivmodå¸¸ç”¨äºç´¢å¼•è®¡ç®—å’Œæ•°å€¼åˆ†è§£</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="-æ€§èƒ½ä¼˜åŒ–">ğŸ”§ æ€§èƒ½ä¼˜åŒ–</h2>

<h3 id="divmod-æ€§èƒ½ä¼˜åŒ–æŠ€å·§">divmod() æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># divmod() æ€§èƒ½ä¼˜åŒ–æŠ€å·§
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">divmod() æ€§èƒ½ä¼˜åŒ–æŠ€å·§:</span><span class="sh">"</span><span class="p">)</span>
<span class="kn">import</span> <span class="n">time</span>

<span class="c1"># 1. æ‰¹é‡æ“ä½œä¼˜åŒ–
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">1. æ‰¹é‡æ“ä½œä¼˜åŒ–:</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># ç”Ÿæˆæµ‹è¯•æ•°æ®
</span><span class="n">test_data</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">)]</span>

<span class="c1"># æ–¹æ³•1: åˆ—è¡¨æ¨å¯¼å¼
</span><span class="k">def</span> <span class="nf">batch_divmod_list_comp</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>

<span class="c1"># æ–¹æ³•2: ç”Ÿæˆå™¨è¡¨è¾¾å¼
</span><span class="k">def</span> <span class="nf">batch_divmod_generator</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">return</span> <span class="nf">list</span><span class="p">(</span><span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span>

<span class="c1"># æ–¹æ³•3: ä¼ ç»Ÿå¾ªç¯
</span><span class="k">def</span> <span class="nf">batch_divmod_loop</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="n">results</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">results</span>

<span class="c1"># æ–¹æ³•4: é¢„åˆ†é…åˆ—è¡¨
</span><span class="k">def</span> <span class="nf">batch_divmod_preallocated</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="nf">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>

<span class="c1"># æ€§èƒ½æµ‹è¯•
</span><span class="n">methods</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">åˆ—è¡¨æ¨å¯¼å¼</span><span class="sh">"</span><span class="p">,</span> <span class="n">batch_divmod_list_comp</span><span class="p">),</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">ç”Ÿæˆå™¨è¡¨è¾¾å¼</span><span class="sh">"</span><span class="p">,</span> <span class="n">batch_divmod_generator</span><span class="p">),</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">ä¼ ç»Ÿå¾ªç¯</span><span class="sh">"</span><span class="p">,</span> <span class="n">batch_divmod_loop</span><span class="p">),</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">é¢„åˆ†é…åˆ—è¡¨</span><span class="sh">"</span><span class="p">,</span> <span class="n">batch_divmod_preallocated</span><span class="p">),</span>
<span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ‰¹é‡æ“ä½œæ€§èƒ½æµ‹è¯• (</span><span class="si">{</span><span class="nf">len</span><span class="p">(</span><span class="n">test_data</span><span class="p">)</span><span class="si">}</span><span class="s">æ¬¡æ“ä½œ):</span><span class="sh">"</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">methods</span><span class="p">:</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nf">func</span><span class="p">(</span><span class="n">test_data</span><span class="p">[:</span><span class="mi">10000</span><span class="p">])</span>  <span class="c1"># ä½¿ç”¨è¾ƒå°çš„æ•°æ®é›†è¿›è¡Œæµ‹è¯•
</span>    <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
    <span class="n">results</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">elapsed</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">elapsed</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">ç§’</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># éªŒè¯ç»“æœä¸€è‡´æ€§
</span><span class="n">first_result</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">results</span><span class="p">.</span><span class="nf">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="n">all_same</span> <span class="o">=</span> <span class="nf">all</span><span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">first_result</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">.</span><span class="nf">values</span><span class="p">())</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ‰€æœ‰æ–¹æ³•ç»“æœä¸€è‡´: </span><span class="si">{</span><span class="n">all_same</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 2. ç¼“å­˜ä¼˜åŒ–
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">2. ç¼“å­˜ä¼˜åŒ–:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">DivmodCache</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">divmodç»“æœç¼“å­˜</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">self</span><span class="p">.</span><span class="n">max_size</span> <span class="o">=</span> <span class="n">max_size</span>
        <span class="n">self</span><span class="p">.</span><span class="n">hits</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">self</span><span class="p">.</span><span class="n">misses</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">def</span> <span class="nf">divmod_cached</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">å¸¦ç¼“å­˜çš„divmod</span><span class="sh">"""</span>
        <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">cache</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">hits</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">misses</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="c1"># ç®€å•çš„ç¼“å­˜å¤§å°æ§åˆ¶
</span>        <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">cache</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">self</span><span class="p">.</span><span class="n">max_size</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
        
        <span class="k">return</span> <span class="n">result</span>
    
    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">hits</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">misses</span>
        <span class="n">hit_rate</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">hits</span> <span class="o">/</span> <span class="n">total</span> <span class="k">if</span> <span class="n">total</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">hits</span><span class="sh">'</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">hits</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">misses</span><span class="sh">'</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">misses</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">hit_rate</span><span class="sh">'</span><span class="p">:</span> <span class="n">hit_rate</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">cache_size</span><span class="sh">'</span><span class="p">:</span> <span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">cache</span><span class="p">)</span>
        <span class="p">}</span>

<span class="c1"># åˆ›å»ºé‡å¤æ•°æ®è¿›è¡Œç¼“å­˜æµ‹è¯•
</span><span class="kn">import</span> <span class="n">random</span>
<span class="n">random</span><span class="p">.</span><span class="nf">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">repeated_data</span> <span class="o">=</span> <span class="p">[(</span><span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">)]</span>
<span class="n">repeated_data</span> <span class="o">=</span> <span class="n">repeated_data</span> <span class="o">*</span> <span class="mi">10</span>  <span class="c1"># é‡å¤10æ¬¡å¢åŠ ç¼“å­˜å‘½ä¸­ç‡
</span><span class="n">random</span><span class="p">.</span><span class="nf">shuffle</span><span class="p">(</span><span class="n">repeated_data</span><span class="p">)</span>

<span class="n">cache</span> <span class="o">=</span> <span class="nc">DivmodCache</span><span class="p">()</span>

<span class="c1"># æ— ç¼“å­˜æµ‹è¯•
</span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
<span class="n">no_cache_results</span> <span class="o">=</span> <span class="p">[</span><span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">repeated_data</span><span class="p">]</span>
<span class="n">no_cache_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>

<span class="c1"># æœ‰ç¼“å­˜æµ‹è¯•
</span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
<span class="n">cache_results</span> <span class="o">=</span> <span class="p">[</span><span class="n">cache</span><span class="p">.</span><span class="nf">divmod_cached</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">repeated_data</span><span class="p">]</span>
<span class="n">cache_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>

<span class="n">stats</span> <span class="o">=</span> <span class="n">cache</span><span class="p">.</span><span class="nf">get_stats</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ç¼“å­˜æµ‹è¯•ç»“æœ:</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ•°æ®é‡: </span><span class="si">{</span><span class="nf">len</span><span class="p">(</span><span class="n">repeated_data</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ— ç¼“å­˜æ—¶é—´: </span><span class="si">{</span><span class="n">no_cache_time</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">ç§’</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æœ‰ç¼“å­˜æ—¶é—´: </span><span class="si">{</span><span class="n">cache_time</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">ç§’</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ€§èƒ½æå‡: </span><span class="si">{</span><span class="n">no_cache_time</span><span class="o">/</span><span class="n">cache_time</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ç¼“å­˜å‘½ä¸­ç‡: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="sh">'</span><span class="s">hit_rate</span><span class="sh">'</span><span class="p">]</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="o">%</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ç¼“å­˜å¤§å°: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="sh">'</span><span class="s">cache_size</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ç»“æœä¸€è‡´: </span><span class="si">{</span><span class="n">no_cache_results</span> <span class="o">==</span> <span class="n">cache_results</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 3. ç‰¹æ®Šæƒ…å†µä¼˜åŒ–
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">3. ç‰¹æ®Šæƒ…å†µä¼˜åŒ–:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">optimized_divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">ä¼˜åŒ–çš„divmodå®ç°</span><span class="sh">"""</span>
    <span class="c1"># ç‰¹æ®Šæƒ…å†µå¿«é€Ÿå¤„ç†
</span>    <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="n">b</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="nf">abs</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nf">abs</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="nf">if </span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">b</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">):</span>  <span class="c1"># åŒå·
</span>            <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="n">a</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># å¼‚å·
</span>            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="c1"># æµ‹è¯•ä¼˜åŒ–ç‰ˆæœ¬
</span><span class="n">optimization_cases</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>    <span class="c1"># é™¤æ•°ä¸º1
</span>    <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>   <span class="c1"># é™¤æ•°ä¸º-1
</span>    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>      <span class="c1"># è¢«é™¤æ•°ä¸º0
</span>    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>      <span class="c1"># ç›¸ç­‰
</span>    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>      <span class="c1"># è¢«é™¤æ•°å°äºé™¤æ•°ï¼ˆæ­£æ•°ï¼‰
</span>    <span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>     <span class="c1"># è¢«é™¤æ•°å°äºé™¤æ•°ï¼ˆè´Ÿè¢«é™¤æ•°ï¼‰
</span>    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">),</span>     <span class="c1"># è¢«é™¤æ•°å°äºé™¤æ•°ï¼ˆè´Ÿé™¤æ•°ï¼‰
</span>    <span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>    <span class="c1"># ä¸€èˆ¬æƒ…å†µ
</span><span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">ä¼˜åŒ–ç‰ˆæœ¬æµ‹è¯•:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">optimization_cases</span><span class="p">:</span>
    <span class="n">standard_result</span> <span class="o">=</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">optimized_result</span> <span class="o">=</span> <span class="nf">optimized_divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">divmod(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s">):</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  æ ‡å‡†ç‰ˆæœ¬: </span><span class="si">{</span><span class="n">standard_result</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  ä¼˜åŒ–ç‰ˆæœ¬: </span><span class="si">{</span><span class="n">optimized_result</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  ç»“æœä¸€è‡´: </span><span class="si">{</span><span class="n">standard_result</span> <span class="o">==</span> <span class="n">optimized_result</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">()</span>

<span class="c1"># 4. å‘é‡åŒ–æ“ä½œï¼ˆä½¿ç”¨NumPyï¼‰
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">4. å‘é‡åŒ–æ“ä½œï¼ˆNumPyï¼‰:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
    
    <span class="c1"># ç”Ÿæˆå¤§é‡æµ‹è¯•æ•°æ®
</span>    <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
    <span class="n">a_array</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)</span>
    <span class="n">b_array</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)</span>
    
    <span class="c1"># Pythonæ ‡å‡†æ–¹æ³•
</span>    <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
    <span class="n">python_results</span> <span class="o">=</span> <span class="p">[</span><span class="nf">divmod</span><span class="p">(</span><span class="nf">int</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="nf">int</span><span class="p">(</span><span class="n">b</span><span class="p">))</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nf">zip</span><span class="p">(</span><span class="n">a_array</span><span class="p">,</span> <span class="n">b_array</span><span class="p">)]</span>
    <span class="n">python_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
    
    <span class="c1"># NumPyå‘é‡åŒ–æ–¹æ³•
</span>    <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
    <span class="n">numpy_quotients</span> <span class="o">=</span> <span class="n">a_array</span> <span class="o">//</span> <span class="n">b_array</span>
    <span class="n">numpy_remainders</span> <span class="o">=</span> <span class="n">a_array</span> <span class="o">%</span> <span class="n">b_array</span>
    <span class="n">numpy_results</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="nf">zip</span><span class="p">(</span><span class="n">numpy_quotients</span><span class="p">,</span> <span class="n">numpy_remainders</span><span class="p">))</span>
    <span class="n">numpy_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
    
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å‘é‡åŒ–æ“ä½œæ€§èƒ½æ¯”è¾ƒ (</span><span class="si">{</span><span class="nf">len</span><span class="p">(</span><span class="n">a_array</span><span class="p">)</span><span class="si">}</span><span class="s">ä¸ªå…ƒç´ ):</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Pythonæ ‡å‡†æ–¹æ³•: </span><span class="si">{</span><span class="n">python_time</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">ç§’</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">NumPyå‘é‡åŒ–: </span><span class="si">{</span><span class="n">numpy_time</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">ç§’</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ€§èƒ½æå‡: </span><span class="si">{</span><span class="n">python_time</span><span class="o">/</span><span class="n">numpy_time</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="c1"># éªŒè¯ç»“æœä¸€è‡´æ€§ï¼ˆæ£€æŸ¥å‰å‡ ä¸ªï¼‰
</span>    <span class="n">sample_size</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">python_results</span><span class="p">))</span>
    <span class="n">results_match</span> <span class="o">=</span> <span class="n">python_results</span><span class="p">[:</span><span class="n">sample_size</span><span class="p">]</span> <span class="o">==</span> <span class="n">numpy_results</span><span class="p">[:</span><span class="n">sample_size</span><span class="p">]</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ç»“æœä¸€è‡´æ€§ï¼ˆå‰</span><span class="si">{</span><span class="n">sample_size</span><span class="si">}</span><span class="s">ä¸ªï¼‰: </span><span class="si">{</span><span class="n">results_match</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    
<span class="k">except</span> <span class="nb">ImportError</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">NumPyæœªå®‰è£…ï¼Œè·³è¿‡å‘é‡åŒ–æµ‹è¯•</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 5. å†…å­˜ä¼˜åŒ–
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">5. å†…å­˜ä¼˜åŒ–:</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">memory_efficient_batch_divmod</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å†…å­˜é«˜æ•ˆçš„æ‰¹é‡divmodå¤„ç†</span><span class="sh">"""</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">chunk_size</span><span class="p">):</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">chunk_size</span><span class="p">]</span>
        <span class="k">yield</span> <span class="p">[</span><span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">chunk</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">process_large_dataset</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">å¤„ç†å¤§æ•°æ®é›†</span><span class="sh">"""</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">chunk_results</span> <span class="ow">in</span> <span class="nf">memory_efficient_batch_divmod</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">1000</span><span class="p">):</span>
        <span class="n">results</span><span class="p">.</span><span class="nf">extend</span><span class="p">(</span><span class="n">chunk_results</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>

<span class="c1"># æµ‹è¯•å†…å­˜ä¼˜åŒ–
</span><span class="n">large_data</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)]</span>

<span class="c1"># æ ‡å‡†æ–¹æ³•
</span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
<span class="n">standard_results</span> <span class="o">=</span> <span class="p">[</span><span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">large_data</span><span class="p">]</span>
<span class="n">standard_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>

<span class="c1"># å†…å­˜ä¼˜åŒ–æ–¹æ³•
</span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
<span class="n">optimized_results</span> <span class="o">=</span> <span class="nf">process_large_dataset</span><span class="p">(</span><span class="n">large_data</span><span class="p">)</span>
<span class="n">optimized_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>

<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å†…å­˜ä¼˜åŒ–æµ‹è¯•:</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ•°æ®é‡: </span><span class="si">{</span><span class="nf">len</span><span class="p">(</span><span class="n">large_data</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">æ ‡å‡†æ–¹æ³•: </span><span class="si">{</span><span class="n">standard_time</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">ç§’</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ä¼˜åŒ–æ–¹æ³•: </span><span class="si">{</span><span class="n">optimized_time</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="s">ç§’</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ç»“æœä¸€è‡´: </span><span class="si">{</span><span class="n">standard_results</span> <span class="o">==</span> <span class="n">optimized_results</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">å†…å­˜ä¼˜åŒ–æ–¹æ³•é€‚ç”¨äºè¶…å¤§æ•°æ®é›†ï¼Œå¯ä»¥å‡å°‘å†…å­˜å³°å€¼ä½¿ç”¨</span><span class="sh">"</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">æ€§èƒ½ä¼˜åŒ–æ€»ç»“:</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">1. å¯¹äºæ‰¹é‡æ“ä½œï¼Œåˆ—è¡¨æ¨å¯¼å¼é€šå¸¸æœ€å¿«</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">2. é‡å¤è®¡ç®—åœºæ™¯ä¸‹ï¼Œç¼“å­˜å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">3. ç‰¹æ®Šæƒ…å†µçš„å¿«é€Ÿè·¯å¾„å¯ä»¥é¿å…ä¸å¿…è¦çš„è®¡ç®—</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">4. NumPyå‘é‡åŒ–æ“ä½œå¯¹å¤§æ•°ç»„æœ‰æ˜¾è‘—æ€§èƒ½ä¼˜åŠ¿</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">5. å¯¹äºè¶…å¤§æ•°æ®é›†ï¼Œè€ƒè™‘åˆ†å—å¤„ç†ä»¥ä¼˜åŒ–å†…å­˜ä½¿ç”¨</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">6. åœ¨æ€§èƒ½å…³é”®çš„ä»£ç ä¸­ï¼Œæµ‹è¯•ä¸åŒæ–¹æ³•çš„å®é™…æ€§èƒ½</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="-ç›¸å…³å‡½æ•°å’Œæ¨¡å—">ğŸ“š ç›¸å…³å‡½æ•°å’Œæ¨¡å—</h2>

<h3 id="ç›¸å…³å†…ç½®å‡½æ•°">ç›¸å…³å†…ç½®å‡½æ•°</h3>
<ul>
  <li><a href="./abs.md"><code class="language-plaintext highlighter-rouge">abs()</code></a> - ç»å¯¹å€¼å‡½æ•°</li>
  <li><a href="./round.md"><code class="language-plaintext highlighter-rouge">round()</code></a> - æ•°å­—å››èˆäº”å…¥å‡½æ•°</li>
  <li><a href="./pow.md"><code class="language-plaintext highlighter-rouge">pow()</code></a> - å¹‚è¿ç®—å‡½æ•°</li>
  <li><a href="./int.md"><code class="language-plaintext highlighter-rouge">int()</code></a> - æ•´æ•°è½¬æ¢å‡½æ•°</li>
  <li><a href="./float.md"><code class="language-plaintext highlighter-rouge">float()</code></a> - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•°</li>
  <li><a href="./min.md"><code class="language-plaintext highlighter-rouge">min()</code></a> - æœ€å°å€¼å‡½æ•°</li>
  <li><a href="./max.md"><code class="language-plaintext highlighter-rouge">max()</code></a> - æœ€å¤§å€¼å‡½æ•°</li>
</ul>

<h3 id="ç›¸å…³æ ‡å‡†åº“æ¨¡å—">ç›¸å…³æ ‡å‡†åº“æ¨¡å—</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">math</code> - æ•°å­¦å‡½æ•°ï¼ˆåŒ…æ‹¬gcd, lcmç­‰ï¼‰</li>
  <li><code class="language-plaintext highlighter-rouge">decimal</code> - åè¿›åˆ¶æµ®ç‚¹è¿ç®—</li>
  <li><code class="language-plaintext highlighter-rouge">fractions</code> - åˆ†æ•°è¿ç®—</li>
  <li><code class="language-plaintext highlighter-rouge">operator</code> - å‡½æ•°å½¢å¼çš„è¿ç®—ç¬¦</li>
  <li><code class="language-plaintext highlighter-rouge">itertools</code> - è¿­ä»£å·¥å…·</li>
</ul>

<h3 id="ç›¸å…³ç¬¬ä¸‰æ–¹åº“">ç›¸å…³ç¬¬ä¸‰æ–¹åº“</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">numpy</code> - æ•°å€¼è®¡ç®—ï¼ˆåŒ…æ‹¬å‘é‡åŒ–çš„é™¤æ³•å’Œå–æ¨¡ï¼‰</li>
  <li><code class="language-plaintext highlighter-rouge">pandas</code> - æ•°æ®åˆ†æï¼ˆåŒ…æ‹¬æ—¶é—´åºåˆ—çš„é™¤æ³•è¿ç®—ï¼‰</li>
  <li><code class="language-plaintext highlighter-rouge">sympy</code> - ç¬¦å·æ•°å­¦è®¡ç®—</li>
</ul>

<h2 id="-æ‰©å±•é˜…è¯»">ğŸ”— æ‰©å±•é˜…è¯»</h2>

<ul>
  <li><a href="https://docs.python.org/3/library/functions.html#divmod">Pythonå®˜æ–¹æ–‡æ¡£ - divmod()</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Euclidean_division">æ¬§å‡ é‡Œå¾—é™¤æ³•</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Modular_arithmetic">æ¨¡è¿ç®—</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Euclidean_algorithm">æ¬§å‡ é‡Œå¾—ç®—æ³•</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Time_complexity">æ—¶é—´å¤æ‚åº¦åˆ†æ</a></li>
</ul>

<h2 id="ï¸-æ ‡ç­¾">ğŸ·ï¸ æ ‡ç­¾</h2>

<p><code class="language-plaintext highlighter-rouge">æ•°å­¦è¿ç®—</code> <code class="language-plaintext highlighter-rouge">é™¤æ³•</code> <code class="language-plaintext highlighter-rouge">å–æ¨¡</code> <code class="language-plaintext highlighter-rouge">å•†å’Œä½™æ•°</code> <code class="language-plaintext highlighter-rouge">ç®—æ³•</code> <code class="language-plaintext highlighter-rouge">æ€§èƒ½ä¼˜åŒ–</code> <code class="language-plaintext highlighter-rouge">æ•°å€¼è®¡ç®—</code></p>

<hr />

<p><strong>æœ€åæ›´æ–°</strong>: 2024-01-15<br />
<strong>ä½œè€…</strong>: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ</p>

      </div>
      
      <!-- æ–‡æ¡£åº•éƒ¨ -->
      <footer class="doc-footer">
        
        <p class="doc-author">ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ</p>
        
        
        
        <p class="doc-version">ç‰ˆæœ¬: 1.0</p>
        
      </footer>
    </article>
  </main>
  
  <!-- å³ä¾§å¯¼èˆªæ  -->
  <aside class="doc-sidebar">
    <div class="toc-container">
      <h3>ç›®å½•</h3>
      <div id="toc"></div>
    </div>
    
    <!-- ç›¸å…³é“¾æ¥ -->
    <div class="related-links">
      <h3>ç›¸å…³å†…å®¹</h3>
      <ul>
        
        
      </ul>
    </div>
  </aside>
</div>

<!-- utterancesè¯„è®ºç³»ç»Ÿ -->
<div class="comments-section">
  <h3 class="comments-title">
    <i class="fas fa-comments"></i>
    è®¨è®ºä¸åé¦ˆ
  </h3>
  <div class="comments-description">
    <p>æ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€è®¨è®ºï¼Œåˆ†äº«ä½ çš„å­¦ä¹ å¿ƒå¾—æˆ–æå‡ºé—®é¢˜ã€‚è¯„è®ºåŸºäºGitHub Issuesï¼Œéœ€è¦GitHubè´¦å·ã€‚</p>
  </div>
  <div id="utterances-container">
    <script src="https://utteranc.es/client.js"
            repo="username/PythonModelBook"
            issue-term="pathname"
            theme="preferred-color-scheme"
            crossorigin="anonymous"
            async>
    </script>
  </div>
  

</div>

<style>
.doc-container {
  display: flex;
  max-width: 1200px;
  margin: 0 auto;
  gap: 2rem;
}

.doc-content {
  flex: 1;
  min-width: 0;
}

.doc-header {
  border-bottom: 1px solid #e1e4e8;
  padding-bottom: 1rem;
  margin-bottom: 2rem;
}

.doc-title {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
  color: #24292e;
}

.doc-description {
  font-size: 1.2rem;
  color: #586069;
  margin-bottom: 1rem;
}

.doc-meta {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  font-size: 0.9rem;
  color: #586069;
}

.doc-tags {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.tag {
  background: #f1f8ff;
  color: #0366d6;
  padding: 0.25rem 0.5rem;
  border-radius: 3px;
  font-size: 0.8rem;
}

.doc-body {
  line-height: 1.6;
}

.doc-body h2 {
  border-bottom: 1px solid #e1e4e8;
  padding-bottom: 0.3rem;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.doc-body pre {
  background: #f6f8fa;
  padding: 1rem;
  border-radius: 6px;
  overflow-x: auto;
}

.doc-body table {
  border-collapse: collapse;
  width: 100%;
  margin: 1rem 0;
}

.doc-body th,
.doc-body td {
  border: 1px solid #d0d7de;
  padding: 0.5rem;
  text-align: left;
}

.doc-body th {
  background: #f6f8fa;
  font-weight: 600;
}

.doc-sidebar {
  width: 300px;
  position: sticky;
  top: 2rem;
  height: fit-content;
}

.toc-container,
.related-links {
  background: #f6f8fa;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1rem;
}

.toc-container h3,
.related-links h3 {
  margin-top: 0;
  margin-bottom: 1rem;
  font-size: 1.1rem;
}

.related-links ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.related-links li {
  margin-bottom: 0.5rem;
}

.related-links a {
  color: #0366d6;
  text-decoration: none;
}

.related-links a:hover {
  text-decoration: underline;
}

.comments-section {
  max-width: 1200px;
  margin: 2rem auto;
  margin-top: 3rem;
  padding: 2rem;
  background: var(--bg-secondary, #f6f8fa);
  border-radius: var(--radius-xl, 12px);
  border: 1px solid var(--border-color, #e1e4e8);
}

.comments-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
  color: var(--text-primary, #24292e);
  font-size: 1.25rem;
  font-weight: 600;
}

.comments-title i {
  color: var(--primary-color, #0366d6);
}

.comments-description {
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: var(--bg-primary, #ffffff);
  border-radius: var(--radius-lg, 8px);
  border-left: 4px solid var(--primary-color, #0366d6);
}

.comments-description p {
  margin: 0;
  color: var(--text-secondary, #586069);
  font-size: 0.9rem;
  line-height: 1.5;
}

#utterances-container,
#giscus-container {
  margin-top: 1rem;
}

/* è¯„è®ºç³»ç»Ÿåˆ‡æ¢æŒ‰é’® */
.comment-system-toggle {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
  padding: 0.5rem;
  background: var(--bg-primary, #ffffff);
  border-radius: var(--radius-lg, 8px);
  border: 1px solid var(--border-color, #e1e4e8);
}

.comment-toggle-btn {
  flex: 1;
  padding: 0.5rem 1rem;
  background: transparent;
  border: none;
  border-radius: var(--radius-md, 6px);
  color: var(--text-secondary, #586069);
  font-size: 0.85rem;
  cursor: pointer;
  transition: all var(--transition-fast, 0.15s ease);
}

.comment-toggle-btn.active {
  background: var(--primary-color, #0366d6);
  color: var(--text-inverse, #ffffff);
}

.comment-toggle-btn:hover:not(.active) {
  background: var(--bg-secondary, #f6f8fa);
  color: var(--text-primary, #24292e);
}

@media (max-width: 768px) {
  .doc-container {
    flex-direction: column;
  }
  
  .doc-sidebar {
    width: 100%;
    position: static;
  }
}
</style>

<script>
// ç”Ÿæˆç›®å½•
document.addEventListener('DOMContentLoaded', function() {
  const toc = document.getElementById('toc');
  const headings = document.querySelectorAll('.doc-body h2, .doc-body h3, .doc-body h4');
  
  if (headings.length > 0) {
    const tocList = document.createElement('ul');
    
    headings.forEach(function(heading, index) {
      const id = 'heading-' + index;
      heading.id = id;
      
      const li = document.createElement('li');
      const a = document.createElement('a');
      a.href = '#' + id;
      a.textContent = heading.textContent;
      a.className = 'toc-link toc-' + heading.tagName.toLowerCase();
      
      li.appendChild(a);
      tocList.appendChild(li);
    });
    
    toc.appendChild(tocList);
  }
});

// è¯„è®ºç³»ç»Ÿåˆ‡æ¢åŠŸèƒ½
function switchCommentSystem(system) {
  const utterancesContainer = document.getElementById('utterances-container');
  const giscusContainer = document.getElementById('giscus-container');
  
  if (system === 'giscus') {
    utterancesContainer.style.display = 'none';
    giscusContainer.style.display = 'block';
  } else {
    utterancesContainer.style.display = 'block';
    giscusContainer.style.display = 'none';
  }
}
</script>
  </main>

  <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
  <button id="back-to-top" class="back-to-top" title="è¿”å›é¡¶éƒ¨">
    <i class="fas fa-chevron-up"></i>
  </button>

  <!-- é¡µè„š -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£</h3>
          <p>ç³»ç»ŸåŒ–æ•´ç†PythonçŸ¥è¯†ä½“ç³»çš„å¼€æºé¡¹ç›®</p>
        </div>
        <div class="footer-section">
          <h4>å¿«é€Ÿé“¾æ¥</h4>
          <ul>
            <li><a href="/PythonModelBook/docs/basics/">åŸºç¡€è¯­æ³•</a></li>
            <li><a href="/PythonModelBook/docs/builtins/">å†…ç½®å‡½æ•°</a></li>
            <li><a href="/PythonModelBook/docs/stdlib/">æ ‡å‡†åº“</a></li>
            <li><a href="/PythonModelBook/docs/thirdparty/">ç¬¬ä¸‰æ–¹åº“</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>ç¤¾åŒº</h4>
          <ul>
            <li><a href="https://github.com/liberalchang/PythonModelBook" target="_blank">GitHub</a></li>
            <li><a href="/PythonModelBook/CONTRIBUTING/">è´¡çŒ®æŒ‡å—</a></li>
            <li><a href="/PythonModelBook/about/">å…³äºé¡¹ç›®</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£. é‡‡ç”¨ <a href="/PythonModelBook/LICENSE">MIT License</a> å¼€æºåè®®.</p>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script src="/PythonModelBook/assets/js/main.js"></script>
  <script src="/PythonModelBook/assets/js/search.js"></script>
  
</body>

</html>