[
  
  
    
      
      {
        "title": "å…³äºé¡¹ç›®",
        "content": "å…³äºPythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£ğŸ¯ é¡¹ç›®æ„¿æ™¯PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£é¡¹ç›®è‡´åŠ›äºæ„å»ºä¸€ä¸ªå…¨é¢ã€ç³»ç»Ÿã€æ˜“äºç†è§£çš„Pythonå­¦ä¹ èµ„æºå¹³å°ã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡ç»“æ„åŒ–çš„å†…å®¹ç»„ç»‡å’Œä¼˜è´¨çš„æ–‡æ¡£è´¨é‡ï¼Œå¸®åŠ©Pythonå­¦ä¹ è€…ä»å…¥é—¨åˆ°ç²¾é€šï¼Œå»ºç«‹å®Œæ•´çš„çŸ¥è¯†ä½“ç³»ã€‚ğŸ“– é¡¹ç›®èƒŒæ™¯Pythonä½œä¸ºå½“ä»Šæœ€å—æ¬¢è¿çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ï¼Œåœ¨æ•°æ®ç§‘å­¦ã€Webå¼€å‘ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸéƒ½æœ‰å¹¿æ³›åº”ç”¨ã€‚ç„¶è€Œï¼Œç°æœ‰çš„å­¦ä¹ èµ„æºå¾€å¾€åˆ†æ•£ä¸”ç¼ºä¹ç³»ç»Ÿæ€§ï¼Œåˆå­¦è€…å¾ˆéš¾å»ºç«‹å®Œæ•´çš„çŸ¥è¯†æ¡†æ¶ã€‚æœ¬é¡¹ç›®åº”è¿è€Œç”Ÿï¼Œæ—¨åœ¨ï¼š  æä¾›ç³»ç»ŸåŒ–çš„PythonçŸ¥è¯†ç»“æ„  æ•´åˆåˆ†æ•£çš„å­¦ä¹ èµ„æº  å»ºç«‹æ¸…æ™°çš„å­¦ä¹ è·¯å¾„  ä¿ƒè¿›Pythonç¤¾åŒºçš„çŸ¥è¯†å…±äº«ğŸ—ï¸ é¡¹ç›®æ¶æ„å†…å®¹ç»„ç»‡æˆ‘ä»¬å°†PythonçŸ¥è¯†ä½“ç³»åˆ’åˆ†ä¸ºå››ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š  åŸºç¡€è¯­æ³• - Pythonè¯­è¨€çš„æ ¸å¿ƒæ¦‚å¿µå’Œè¯­æ³•ç»“æ„  å†…ç½®å‡½æ•° - Pythonè§£é‡Šå™¨è‡ªå¸¦çš„å‡½æ•°å’Œæ–¹æ³•  æ ‡å‡†åº“ - Pythonæ ‡å‡†åº“ä¸­çš„é‡è¦æ¨¡å—  ç¬¬ä¸‰æ–¹åº“ - æµè¡Œçš„ç¬¬ä¸‰æ–¹åº“å’Œæ¡†æ¶æŠ€æœ¯æ ˆ  é™æ€ç«™ç‚¹ç”Ÿæˆ: Jekyll  æ‰˜ç®¡å¹³å°: GitHub Pages  ç‰ˆæœ¬æ§åˆ¶: Git  æ–‡æ¡£æ ¼å¼: Markdown  æ ·å¼æ¡†æ¶: è‡ªå®šä¹‰CSS  è¯„è®ºç³»ç»Ÿ: DisqusğŸ‘¥ ç›®æ ‡ç”¨æˆ·ä¸»è¦ç”¨æˆ·ç¾¤ä½“  Pythonåˆå­¦è€…: åˆšå¼€å§‹å­¦ä¹ Pythonçš„ç¼–ç¨‹æ–°æ‰‹  è¿›é˜¶å­¦ä¹ è€…: æœ‰ä¸€å®šåŸºç¡€ï¼Œå¸Œæœ›ç³»ç»Ÿæå‡çš„å¼€å‘è€…  æ•™è‚²å·¥ä½œè€…: éœ€è¦æ•™å­¦èµ„æºçš„è€å¸ˆå’ŒåŸ¹è®­å¸ˆ  æŠ€æœ¯æ–‡æ¡£ä½œè€…: å¯»æ‰¾å‚è€ƒå’Œçµæ„Ÿçš„æ–‡æ¡£ç¼–å†™è€…ä½¿ç”¨åœºæ™¯  ç³»ç»Ÿå­¦ä¹ PythonçŸ¥è¯†  å¿«é€ŸæŸ¥æ‰¾ç‰¹å®šåŠŸèƒ½çš„ç”¨æ³•  å‡†å¤‡æŠ€æœ¯é¢è¯•  æ•™å­¦å’ŒåŸ¹è®­å‚è€ƒ  é¡¹ç›®å¼€å‘ä¸­çš„æŠ€æœ¯æŸ¥è¯¢âœ¨ é¡¹ç›®ç‰¹è‰²å†…å®¹ç‰¹è‰²  ç³»ç»Ÿæ€§: æŒ‰ç…§å­¦ä¹ è·¯å¾„ç»„ç»‡ï¼Œå¾ªåºæ¸è¿›  å®ç”¨æ€§: æ¯ä¸ªæ¦‚å¿µéƒ½é…æœ‰å®é™…åº”ç”¨ç¤ºä¾‹  å‡†ç¡®æ€§: å†…å®¹ç»è¿‡ä»”ç»†éªŒè¯ï¼Œç¡®ä¿å‡†ç¡®æ— è¯¯  æ—¶æ•ˆæ€§: å®šæœŸæ›´æ–°ï¼Œè·Ÿä¸ŠPythonå‘å±•æ­¥ä¼æŠ€æœ¯ç‰¹è‰²  å“åº”å¼è®¾è®¡: é€‚é…å„ç§è®¾å¤‡å’Œå±å¹•å°ºå¯¸  æœç´¢åŠŸèƒ½: æ”¯æŒå…¨æ–‡æœç´¢ï¼Œå¿«é€Ÿå®šä½å†…å®¹  å¯¼èˆªä¾¿åˆ©: æ¸…æ™°çš„ç›®å½•ç»“æ„å’Œé¡µé¢å¯¼èˆª  äº¤äº’ä½“éªŒ: æ”¯æŒè¯„è®ºå’Œè®¨è®ºğŸ¨ è®¾è®¡ç†å¿µç”¨æˆ·ä½“éªŒä¼˜å…ˆ  ç®€æ´æ¸…æ™°çš„ç•Œé¢è®¾è®¡  ç›´è§‚çš„å¯¼èˆªç»“æ„  å¿«é€Ÿçš„é¡µé¢åŠ è½½é€Ÿåº¦  è‰¯å¥½çš„ç§»åŠ¨ç«¯ä½“éªŒå†…å®¹è´¨é‡ä¿è¯  ç»Ÿä¸€çš„æ–‡æ¡£æ¨¡æ¿å’Œæ ¼å¼  è¯¦ç»†çš„ä»£ç ç¤ºä¾‹å’Œæ³¨é‡Š  å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ  å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨åœºæ™¯ğŸš€ å‘å±•è§„åˆ’çŸ­æœŸç›®æ ‡ï¼ˆ3-6ä¸ªæœˆï¼‰  å®Œå–„å››å¤§æ ¸å¿ƒæ¨¡å—çš„åŸºç¡€å†…å®¹  ä¼˜åŒ–ç½‘ç«™æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ  å»ºç«‹å†…å®¹è´¡çŒ®å’Œå®¡æ ¸æµç¨‹  å¢åŠ æ›´å¤šå®é™…åº”ç”¨æ¡ˆä¾‹ä¸­æœŸç›®æ ‡ï¼ˆ6-12ä¸ªæœˆï¼‰  æ·»åŠ äº¤äº’å¼ä»£ç ç¤ºä¾‹  å¼€å‘ç§»åŠ¨ç«¯åº”ç”¨  å»ºç«‹å¤šè¯­è¨€æ”¯æŒ  é›†æˆåœ¨çº¿ç¼–ç¨‹ç¯å¢ƒé•¿æœŸç›®æ ‡ï¼ˆ1-2å¹´ï¼‰  æ„å»ºå®Œæ•´çš„å­¦ä¹ è·¯å¾„ç³»ç»Ÿ  å¼€å‘ä¸ªæ€§åŒ–æ¨èåŠŸèƒ½  å»ºç«‹ç¤¾åŒºé—®ç­”å¹³å°  æä¾›è®¤è¯å’Œè¯„ä¼°ä½“ç³»ğŸ¤ ç¤¾åŒºå‚ä¸è´¡çŒ®æ–¹å¼æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼š  å†…å®¹è´¡çŒ®: ç¼–å†™æ–°æ–‡æ¡£ã€å®Œå–„ç°æœ‰å†…å®¹  æŠ€æœ¯è´¡çŒ®: æ”¹è¿›ç½‘ç«™åŠŸèƒ½ã€ä¼˜åŒ–æ€§èƒ½  è®¾è®¡è´¡çŒ®: æ”¹å–„ç”¨æˆ·ç•Œé¢å’Œä½“éªŒ  ç¿»è¯‘è´¡çŒ®: æä¾›å¤šè¯­è¨€æ”¯æŒ  åé¦ˆè´¡çŒ®: æŠ¥å‘Šé—®é¢˜ã€æå‡ºå»ºè®®ç¤¾åŒºä»·å€¼è§‚  å¼€æ”¾åŒ…å®¹: æ¬¢è¿ä¸åŒèƒŒæ™¯çš„è´¡çŒ®è€…  è´¨é‡ä¼˜å…ˆ: è¿½æ±‚é«˜è´¨é‡çš„å†…å®¹å’Œä»£ç   åä½œå…±èµ¢: é€šè¿‡åˆä½œåˆ›é€ æ›´å¤§ä»·å€¼  æŒç»­æ”¹è¿›: ä¸æ–­ä¼˜åŒ–å’Œå®Œå–„é¡¹ç›®ğŸ“Š é¡¹ç›®æ•°æ®å½“å‰çŠ¶æ€  æ–‡æ¡£æ•°é‡: 20+ ç¯‡  ä»£ç ç¤ºä¾‹: 100+ ä¸ª  æ¶µç›–ä¸»é¢˜: 50+ ä¸ª  é¡¹ç›®è´¡çŒ®è€…: 5+ äººè®¿é—®ç»Ÿè®¡  æœˆè®¿é—®é‡: æŒç»­å¢é•¿ä¸­  ç”¨æˆ·åé¦ˆ: ç§¯ææ­£é¢  GitHub Stars: ä¸æ–­å¢åŠ   ç¤¾åŒºæ´»è·ƒåº¦: ç¨³æ­¥æå‡ğŸ† è‡´è°¢æ ¸å¿ƒå›¢é˜Ÿæ„Ÿè°¢æ‰€æœ‰ä¸ºé¡¹ç›®åšå‡ºè´¡çŒ®çš„æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜ï¼ŒåŒ…æ‹¬å†…å®¹ç¼–å†™è€…ã€æŠ€æœ¯å¼€å‘è€…ã€è®¾è®¡å¸ˆå’Œé¡¹ç›®ç®¡ç†è€…ã€‚ç¤¾åŒºè´¡çŒ®è€…æ„Ÿè°¢æ‰€æœ‰æäº¤å†…å®¹ã€æŠ¥å‘Šé—®é¢˜ã€æå‡ºå»ºè®®çš„ç¤¾åŒºè´¡çŒ®è€…ã€‚æ­£æ˜¯æœ‰äº†å¤§å®¶çš„å‚ä¸ï¼Œè¿™ä¸ªé¡¹ç›®æ‰èƒ½ä¸æ–­å‘å±•å£®å¤§ã€‚æŠ€æœ¯æ”¯æŒæ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæœåŠ¡æä¾›å•†ï¼š  GitHub - ä»£ç æ‰˜ç®¡å’Œåä½œå¹³å°  Jekyll - é™æ€ç«™ç‚¹ç”Ÿæˆå™¨  Disqus - è¯„è®ºç³»ç»Ÿ  å„ç§å¼€æºåº“å’Œå·¥å…·ğŸ“ è”ç³»æˆ‘ä»¬å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ã€å»ºè®®æˆ–åˆä½œæ„å‘ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š  GitHub Issues: é¡¹ç›®é—®é¢˜åé¦ˆ  GitHub Discussions: é¡¹ç›®è®¨è®º  Email: project@example.com  ç¤¾äº¤åª’ä½“: @PythonModelBookè®©æˆ‘ä»¬ä¸€èµ·æ„å»ºæ›´å¥½çš„Pythonå­¦ä¹ èµ„æºï¼",
        "url": "/about/",
        "category": "é¡µé¢",
        "tags": []
      }
      
    
  
    
      ,
      {
        "title": "abs() - ç»å¯¹å€¼å‡½æ•°",
        "content": "abs() - ç»å¯¹å€¼å‡½æ•°ğŸ“ æ¦‚è¿°abs() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºè¿”å›æ•°å€¼çš„ç»å¯¹å€¼ã€‚å®ƒæ”¯æŒæ•´æ•°ã€æµ®ç‚¹æ•°å’Œå¤æ•°ï¼Œå¯¹äºè‡ªå®šä¹‰å¯¹è±¡ï¼Œä¼šè°ƒç”¨å¯¹è±¡çš„ __abs__() æ–¹æ³•ã€‚ç»å¯¹å€¼è¡¨ç¤ºæ•°å€¼åˆ°é›¶ç‚¹çš„è·ç¦»ï¼Œæ€»æ˜¯éè´Ÿæ•°ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡abs()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£ä¸åŒæ•°å€¼ç±»å‹çš„ç»å¯¹å€¼è®¡ç®—  å­¦ä¼šå¤„ç†å¤æ•°çš„ç»å¯¹å€¼ï¼ˆæ¨¡é•¿ï¼‰  äº†è§£è‡ªå®šä¹‰å¯¹è±¡çš„ç»å¯¹å€¼å®ç°ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  æ•°å­¦ä¸­ç»å¯¹å€¼çš„æ¦‚å¿µ  å¤æ•°çš„åŸºæœ¬çŸ¥è¯†ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µç»å¯¹å€¼æ˜¯æ•°å€¼åˆ°é›¶ç‚¹çš„è·ç¦»ï¼Œç”¨äºè¡¨ç¤ºæ•°å€¼çš„å¤§å°è€Œå¿½ç•¥ç¬¦å·ã€‚å¯¹äºå¤æ•°ï¼Œç»å¯¹å€¼è¡¨ç¤ºå¤æ•°çš„æ¨¡é•¿ï¼ˆåˆ°åŸç‚¹çš„è·ç¦»ï¼‰ã€‚è¯­æ³•æ ¼å¼abs(x)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  x      number      æ˜¯      æ—       è¦è®¡ç®—ç»å¯¹å€¼çš„æ•°å€¼      è¿”å›å€¼  ç±»å‹: ä¸è¾“å…¥ç±»å‹ç›¸å…³          æ•´æ•°è¾“å…¥ â†’ æ•´æ•°è¾“å‡º      æµ®ç‚¹æ•°è¾“å…¥ â†’ æµ®ç‚¹æ•°è¾“å‡º      å¤æ•°è¾“å…¥ â†’ æµ®ç‚¹æ•°è¾“å‡ºï¼ˆæ¨¡é•¿ï¼‰        è¯´æ˜: è¾“å…¥æ•°å€¼çš„ç»å¯¹å€¼ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# æ•´æ•°ç»å¯¹å€¼print(f\"abs(5): {abs(5)}\")      # è¾“å‡º: abs(5): 5print(f\"abs(-5): {abs(-5)}\")    # è¾“å‡º: abs(-5): 5print(f\"abs(0): {abs(0)}\")      # è¾“å‡º: abs(0): 0# æµ®ç‚¹æ•°ç»å¯¹å€¼print(f\"abs(3.14): {abs(3.14)}\")    # è¾“å‡º: abs(3.14): 3.14print(f\"abs(-3.14): {abs(-3.14)}\")  # è¾“å‡º: abs(-3.14): 3.14print(f\"abs(-0.0): {abs(-0.0)}\")    # è¾“å‡º: abs(-0.0): 0.0# ç‰¹æ®Šæµ®ç‚¹æ•°import mathprint(f\"abs(float('inf')): {abs(float('inf'))}\")    # è¾“å‡º: abs(float('inf')): infprint(f\"abs(float('-inf')): {abs(float('-inf'))}\")  # è¾“å‡º: abs(float('-inf')): infprint(f\"abs(float('nan')): {abs(float('nan'))}\")    # è¾“å‡º: abs(float('nan')): nanå¤æ•°ç»å¯¹å€¼# å¤æ•°çš„ç»å¯¹å€¼ï¼ˆæ¨¡é•¿ï¼‰complex_numbers = [    3 + 4j,      # æ ‡å‡†å¤æ•°    -3 + 4j,     # è´Ÿå®éƒ¨    3 - 4j,      # è´Ÿè™šéƒ¨    -3 - 4j,     # è´Ÿå®éƒ¨å’Œè™šéƒ¨    5 + 0j,      # çº¯å®æ•°    0 + 5j,      # çº¯è™šæ•°    0 + 0j,      # é›¶å¤æ•°]print(\"å¤æ•°ç»å¯¹å€¼è®¡ç®—:\")for c in complex_numbers:    abs_value = abs(c)    # éªŒè¯ï¼š|a + bi| = âˆš(aÂ² + bÂ²)    manual_calc = (c.real**2 + c.imag**2)**0.5    print(f\"abs({c}) = {abs_value:.6f}, æ‰‹åŠ¨è®¡ç®—: {manual_calc:.6f}\")# å¤æ•°ç»å¯¹å€¼çš„å‡ ä½•æ„ä¹‰print(\"\\nå‡ ä½•æ„ä¹‰æ¼”ç¤º:\")z = 3 + 4jprint(f\"å¤æ•° {z}:\")print(f\"  å®éƒ¨: {z.real}\")print(f\"  è™šéƒ¨: {z.imag}\")print(f\"  æ¨¡é•¿: {abs(z)}\")print(f\"  åœ¨å¤å¹³é¢ä¸Šåˆ°åŸç‚¹çš„è·ç¦»: {abs(z)}\")æ•°æ®å¤„ç†åº”ç”¨def analyze_deviations(data, target=0):    \"\"\"åˆ†ææ•°æ®åå·®\"\"\"    if not data:        return {}        # è®¡ç®—æ¯ä¸ªæ•°æ®ç‚¹ä¸ç›®æ ‡å€¼çš„åå·®    deviations = [x - target for x in data]        # è®¡ç®—ç»å¯¹åå·®    abs_deviations = [abs(d) for d in deviations]        # ç»Ÿè®¡ä¿¡æ¯    analysis = {        'data_count': len(data),        'target_value': target,        'deviations': deviations,        'abs_deviations': abs_deviations,        'max_abs_deviation': max(abs_deviations),        'min_abs_deviation': min(abs_deviations),        'mean_abs_deviation': sum(abs_deviations) / len(abs_deviations),        'total_abs_deviation': sum(abs_deviations)    }        return analysis# æµ‹è¯•æ•°æ®test_data = [2.1, 1.8, 2.3, 1.9, 2.0, 2.2, 1.7, 2.4]target_value = 2.0result = analyze_deviations(test_data, target_value)print(f\"æ•°æ®åˆ†æç»“æœ:\")print(f\"  æ•°æ®ç‚¹æ•°: {result['data_count']}\")print(f\"  ç›®æ ‡å€¼: {result['target_value']}\")print(f\"  æœ€å¤§ç»å¯¹åå·®: {result['max_abs_deviation']:.3f}\")print(f\"  æœ€å°ç»å¯¹åå·®: {result['min_abs_deviation']:.3f}\")print(f\"  å¹³å‡ç»å¯¹åå·®: {result['mean_abs_deviation']:.3f}\")print(f\"  æ€»ç»å¯¹åå·®: {result['total_abs_deviation']:.3f}\")æ•°å€¼æ¯”è¾ƒå’Œæ’åºdef sort_by_absolute_value(numbers):    \"\"\"æŒ‰ç»å¯¹å€¼å¤§å°æ’åº\"\"\"    return sorted(numbers, key=abs)def find_closest_to_zero(numbers):    \"\"\"æ‰¾åˆ°æœ€æ¥è¿‘é›¶çš„æ•°å€¼\"\"\"    if not numbers:        return None    return min(numbers, key=abs)def group_by_absolute_value(numbers, tolerance=0.1):    \"\"\"æŒ‰ç»å¯¹å€¼åˆ†ç»„ï¼ˆåœ¨å®¹å·®èŒƒå›´å†…ï¼‰\"\"\"    groups = []        for num in numbers:        abs_num = abs(num)                # æŸ¥æ‰¾æ˜¯å¦æœ‰ç›¸è¿‘çš„ç»„        found_group = False        for group in groups:            if abs(abs(group[0]) - abs_num) &lt;= tolerance:                group.append(num)                found_group = True                break                # å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›¸è¿‘çš„ç»„ï¼Œåˆ›å»ºæ–°ç»„        if not found_group:            groups.append([num])        return groups# æµ‹è¯•æ•°æ®test_numbers = [-5.2, 3.1, -3.0, 5.3, 0.1, -0.2, 2.9, -2.8]print(f\"åŸå§‹æ•°æ®: {test_numbers}\")print(f\"æŒ‰ç»å¯¹å€¼æ’åº: {sort_by_absolute_value(test_numbers)}\")print(f\"æœ€æ¥è¿‘é›¶çš„æ•°: {find_closest_to_zero(test_numbers)}\")groups = group_by_absolute_value(test_numbers, tolerance=0.3)print(f\"\\næŒ‰ç»å¯¹å€¼åˆ†ç»„ï¼ˆå®¹å·®0.3ï¼‰:\")for i, group in enumerate(groups, 1):    abs_values = [abs(x) for x in group]    print(f\"  ç»„{i}: {group} (ç»å¯¹å€¼: {abs_values})\")è‡ªå®šä¹‰å¯¹è±¡çš„ç»å¯¹å€¼class Vector2D:    \"\"\"äºŒç»´å‘é‡ç±»\"\"\"    def __init__(self, x, y):        self.x = x        self.y = y        def __abs__(self):        \"\"\"è¿”å›å‘é‡çš„é•¿åº¦ï¼ˆæ¨¡é•¿ï¼‰\"\"\"        return (self.x**2 + self.y**2)**0.5        def __str__(self):        return f\"Vector2D({self.x}, {self.y})\"        def __repr__(self):        return self.__str__()class Temperature:    \"\"\"æ¸©åº¦ç±»\"\"\"    def __init__(self, celsius):        self.celsius = celsius        def __abs__(self):        \"\"\"è¿”å›ä¸0Â°Cçš„æ¸©åº¦å·®\"\"\"        return abs(self.celsius)        def __str__(self):        return f\"{self.celsius}Â°C\"class BankAccount:    \"\"\"é“¶è¡Œè´¦æˆ·ç±»\"\"\"    def __init__(self, balance):        self.balance = balance        def __abs__(self):        \"\"\"è¿”å›è´¦æˆ·ä½™é¢çš„ç»å¯¹å€¼\"\"\"        return abs(self.balance)        def __str__(self):        return f\"è´¦æˆ·ä½™é¢: {self.balance}å…ƒ\"# æµ‹è¯•è‡ªå®šä¹‰å¯¹è±¡vectors = [    Vector2D(3, 4),    # é•¿åº¦ä¸º5    Vector2D(-3, 4),   # é•¿åº¦ä¸º5    Vector2D(0, 5),    # é•¿åº¦ä¸º5    Vector2D(1, 1),    # é•¿åº¦ä¸ºâˆš2]print(\"å‘é‡é•¿åº¦è®¡ç®—:\")for vector in vectors:    print(f\"{vector} çš„é•¿åº¦: {abs(vector):.3f}\")temperatures = [    Temperature(25),    # 25Â°C    Temperature(-10),   # -10Â°C    Temperature(0),     # 0Â°C]print(\"\\næ¸©åº¦å·®è®¡ç®—:\")for temp in temperatures:    print(f\"{temp} ä¸0Â°Cçš„å·®: {abs(temp)}Â°C\")accounts = [    BankAccount(1000),   # æ­£ä½™é¢    BankAccount(-500),   # è´Ÿä½™é¢ï¼ˆé€æ”¯ï¼‰    BankAccount(0),      # é›¶ä½™é¢]print(\"\\nè´¦æˆ·ä½™é¢ç»å¯¹å€¼:\")for account in accounts:    print(f\"{account} ç»å¯¹å€¼: {abs(account)}å…ƒ\")æ•°å€¼ç®—æ³•åº”ç”¨def newton_raphson_sqrt(number, precision=1e-10):    \"\"\"ä½¿ç”¨ç‰›é¡¿-æ‹‰å¤«é€Šæ–¹æ³•è®¡ç®—å¹³æ–¹æ ¹\"\"\"    if number &lt; 0:        raise ValueError(\"ä¸èƒ½è®¡ç®—è´Ÿæ•°çš„å¹³æ–¹æ ¹\")        if number == 0:        return 0        # åˆå§‹çŒœæµ‹    x = number / 2        while True:        # ç‰›é¡¿-æ‹‰å¤«é€Šè¿­ä»£å…¬å¼        next_x = (x + number / x) / 2                # æ£€æŸ¥æ”¶æ•›æ€§ï¼ˆä½¿ç”¨ç»å¯¹å€¼åˆ¤æ–­è¯¯å·®ï¼‰        if abs(next_x - x) &lt; precision:            return next_x                x = next_xdef find_root_bisection(func, a, b, precision=1e-6):    \"\"\"ä½¿ç”¨äºŒåˆ†æ³•æ‰¾å‡½æ•°æ ¹\"\"\"    if func(a) * func(b) &gt; 0:        raise ValueError(\"åŒºé—´ç«¯ç‚¹å‡½æ•°å€¼åŒå·ï¼Œæ— æ³•ä½¿ç”¨äºŒåˆ†æ³•\")        while abs(b - a) &gt; precision:        mid = (a + b) / 2                if abs(func(mid)) &lt; precision:            return mid                if func(a) * func(mid) &lt; 0:            b = mid        else:            a = mid        return (a + b) / 2# æµ‹è¯•æ•°å€¼ç®—æ³•print(\"ç‰›é¡¿-æ‹‰å¤«é€Šå¹³æ–¹æ ¹è®¡ç®—:\")test_numbers = [4, 9, 16, 25, 2, 10]for num in test_numbers:    calculated = newton_raphson_sqrt(num)    actual = num**0.5    error = abs(calculated - actual)    print(f\"âˆš{num}: è®¡ç®—å€¼={calculated:.10f}, å®é™…å€¼={actual:.10f}, è¯¯å·®={error:.2e}\")# æµ‹è¯•äºŒåˆ†æ³•æ±‚æ ¹print(\"\\näºŒåˆ†æ³•æ±‚æ ¹:\")# æ±‚è§£ xÂ² - 2 = 0 çš„æ ¹ï¼ˆå³âˆš2ï¼‰def f(x):    return x**2 - 2root = find_root_bisection(f, 1, 2)print(f\"xÂ² - 2 = 0 çš„æ ¹: {root:.10f}\")print(f\"éªŒè¯: f({root}) = {f(root):.2e}\")print(f\"ä¸âˆš2çš„è¯¯å·®: {abs(root - 2**0.5):.2e}\")âš ï¸ æ³¨æ„äº‹é¡¹æ•°æ®ç±»å‹ä¿æŒ# abs()ä¿æŒè¾“å…¥çš„æ•°æ®ç±»å‹ï¼ˆé™¤äº†å¤æ•°ï¼‰print(f\"abs(-5) çš„ç±»å‹: {type(abs(-5))}\")        # &lt;class 'int'&gt;print(f\"abs(-5.0) çš„ç±»å‹: {type(abs(-5.0))}\")    # &lt;class 'float'&gt;print(f\"abs(3+4j) çš„ç±»å‹: {type(abs(3+4j))}\")    # &lt;class 'float'&gt;# æ•´æ•°è¿ç®—ä¿æŒç²¾åº¦large_int = -123456789012345678901234567890abs_large = abs(large_int)print(f\"å¤§æ•´æ•°ç»å¯¹å€¼: {abs_large}\")print(f\"ç±»å‹ä¿æŒ: {type(abs_large)}\")æµ®ç‚¹æ•°ç²¾åº¦# æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜print(f\"abs(-0.0): {abs(-0.0)}\")  # 0.0print(f\"abs(-0.0) == 0.0: {abs(-0.0) == 0.0}\")  # True# æå°æ•°çš„å¤„ç†tiny_number = -1e-100print(f\"æå°æ•°ç»å¯¹å€¼: {abs(tiny_number)}\")print(f\"æ˜¯å¦ä¸ºé›¶: {abs(tiny_number) == 0}\")# NaNå’Œæ— ç©·å¤§çš„å¤„ç†special_values = [float('nan'), float('inf'), float('-inf')]for value in special_values:    print(f\"abs({value}): {abs(value)}\")æ€§èƒ½è€ƒè™‘import timeimport math# æ€§èƒ½æ¯”è¾ƒï¼šabs() vs æ¡ä»¶åˆ¤æ–­numbers = [-i if i % 2 else i for i in range(100000)]# æ–¹æ³•1ï¼šä½¿ç”¨abs()å‡½æ•°start_time = time.time()results1 = [abs(x) for x in numbers]time1 = time.time() - start_time# æ–¹æ³•2ï¼šä½¿ç”¨æ¡ä»¶åˆ¤æ–­start_time = time.time()results2 = [x if x &gt;= 0 else -x for x in numbers]time2 = time.time() - start_time# æ–¹æ³•3ï¼šä½¿ç”¨math.fabs()ï¼ˆä»…é€‚ç”¨äºæµ®ç‚¹æ•°ï¼‰float_numbers = [float(x) for x in numbers[:10000]]  # è½¬æ¢ä¸ºæµ®ç‚¹æ•°start_time = time.time()results3 = [math.fabs(x) for x in float_numbers]time3 = time.time() - start_timeprint(f\"abs()å‡½æ•°è€—æ—¶: {time1:.4f}ç§’\")print(f\"æ¡ä»¶åˆ¤æ–­è€—æ—¶: {time2:.4f}ç§’\")print(f\"math.fabs()è€—æ—¶: {time3:.4f}ç§’\")print(f\"\\næ€§èƒ½æ¯”è¾ƒ:\")print(f\"abs() vs æ¡ä»¶åˆ¤æ–­: {time2/time1:.2f}å€\")print(f\"abs() vs math.fabs(): {time3/time1:.2f}å€\")ğŸ”— ç›¸å…³å†…å®¹ç›¸å…³å‡½æ•°  round() - å››èˆäº”å…¥å‡½æ•° - æ•°å€¼å››èˆäº”å…¥  min() - æœ€å°å€¼å‡½æ•° - æ‰¾æœ€å°å€¼  max() - æœ€å¤§å€¼å‡½æ•° - æ‰¾æœ€å¤§å€¼  sum() - æ±‚å’Œå‡½æ•° - æ•°å€¼æ±‚å’Œ  pow() - å¹‚è¿ç®—å‡½æ•° - å¹‚è¿ç®—  divmod() - é™¤æ³•å–å•†ä½™å‡½æ•° - é™¤æ³•è¿ç®—æ•°å­¦æ¨¡å—  mathæ¨¡å— - æ•°å­¦å‡½æ•°åº“  cmathæ¨¡å— - å¤æ•°æ•°å­¦å‡½æ•°  decimalæ¨¡å— - ç²¾ç¡®å°æ•°è¿ç®—ç›¸å…³æ¦‚å¿µ  Pythonæ•°å€¼ç±»å‹ - æ•°å€¼ç±»å‹è¯¦è§£  å¤æ•°è¿ç®— - å¤æ•°è¯¦è§£  æ•°å€¼ç²¾åº¦ - ç²¾åº¦é—®é¢˜ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - abs()  Pythonæ•°å€¼ç±»å‹  å¤æ•°è¿ç®—  æ•°å­¦å‡½æ•°ğŸ·ï¸ æ ‡ç­¾æ•°å­¦è¿ç®— ç»å¯¹å€¼ æ•°å€¼å¤„ç† å¤æ•° ç®—æ³•æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/abs/",
        "category": "builtins",
        "tags": ["æ•°å­¦è¿ç®—","ç»å¯¹å€¼","æ•°å€¼å¤„ç†"]
      }
      
    
  
    
      ,
      {
        "title": "æŠ½è±¡åŸºç±»",
        "content": "PythonæŠ½è±¡åŸºç±»è¯¦è§£æŠ½è±¡åŸºç±»ï¼ˆAbstract Base Classesï¼Œç®€ç§°ABCï¼‰æ˜¯Pythonä¸­ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œå®ƒä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–ï¼Œä¸»è¦ç”¨äºå®šä¹‰æ¥å£å’Œè§„èŒƒå­ç±»çš„ç»“æ„ã€‚é€šè¿‡æŠ½è±¡åŸºç±»ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ›´æ¸…æ™°çš„ç»§æ‰¿å±‚æ¬¡å’Œæ›´å¼ºçš„ç±»å‹æ£€æŸ¥ã€‚ğŸ“š å­¦ä¹ ç›®æ ‡é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†èƒ½å¤Ÿï¼š  ç†è§£æŠ½è±¡åŸºç±»çš„æ¦‚å¿µå’Œä½œç”¨  æŒæ¡abcæ¨¡å—çš„ä½¿ç”¨æ–¹æ³•  å­¦ä¼šå®šä¹‰å’Œå®ç°æŠ½è±¡åŸºç±»  äº†è§£æŠ½è±¡æ–¹æ³•ã€æŠ½è±¡å±æ€§çš„ä½¿ç”¨  æŒæ¡è™šæ‹Ÿå­ç±»çš„æ³¨å†Œæœºåˆ¶  åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨æŠ½è±¡åŸºç±»è®¾è®¡æ¨¡å¼ğŸ” æŠ½è±¡åŸºç±»æ¦‚è¿°ä»€ä¹ˆæ˜¯æŠ½è±¡åŸºç±»æŠ½è±¡åŸºç±»æ˜¯ä¸€ç§ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–çš„ç±»ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯ï¼š  å®šä¹‰æ¥å£ï¼šè§„å®šå­ç±»å¿…é¡»å®ç°çš„æ–¹æ³•å’Œå±æ€§  å¼ºåˆ¶å®ç°ï¼šç¡®ä¿å­ç±»å®ç°äº†æ‰€æœ‰å¿…è¦çš„æ–¹æ³•  ç±»å‹æ£€æŸ¥ï¼šæä¾›isinstance()å’Œç±»å‹æ³¨è§£çš„æ”¯æŒ  ä»£ç è§„èŒƒï¼šä½œä¸ºä»£ç ç»“æ„çš„è§„èŒƒå’Œæ–‡æ¡£from abc import ABC, abstractmethodclass Animal(ABC):    \"\"\"åŠ¨ç‰©æŠ½è±¡åŸºç±»\"\"\"        @abstractmethod    def make_sound(self):        \"\"\"å‘å‡ºå£°éŸ³çš„æŠ½è±¡æ–¹æ³•\"\"\"        pass        @abstractmethod    def move(self):        \"\"\"ç§»åŠ¨çš„æŠ½è±¡æ–¹æ³•\"\"\"        pass        # å¯ä»¥åŒ…å«å…·ä½“æ–¹æ³•    def sleep(self):        print(f\"{self.__class__.__name__} is sleeping\")# å°è¯•å®ä¾‹åŒ–æŠ½è±¡åŸºç±»ä¼šæŠ¥é”™# animal = Animal()  # TypeError: Can't instantiate abstract classğŸ—ï¸ abcæ¨¡å—è¯¦è§£æ ¸å¿ƒç»„ä»¶Pythonçš„abcæ¨¡å—æä¾›äº†åˆ›å»ºæŠ½è±¡åŸºç±»çš„å·¥å…·ï¼š  ABCç±»ï¼šæ‰€æœ‰æŠ½è±¡åŸºç±»çš„åŸºç±»  abstractmethodï¼šæ ‡è®°æŠ½è±¡æ–¹æ³•çš„è£…é¥°å™¨  abstractpropertyï¼šæ ‡è®°æŠ½è±¡å±æ€§ï¼ˆPython 3.11ååºŸå¼ƒï¼‰  abstractclassmethodï¼šæ ‡è®°æŠ½è±¡ç±»æ–¹æ³•  abstractstaticmethodï¼šæ ‡è®°æŠ½è±¡é™æ€æ–¹æ³•  ABCMetaï¼šæŠ½è±¡åŸºç±»çš„å…ƒç±»åŸºæœ¬ä½¿ç”¨æ–¹æ³•from abc import ABC, abstractmethod, abstractclassmethod, abstractstaticmethodclass Shape(ABC):    \"\"\"å›¾å½¢æŠ½è±¡åŸºç±»\"\"\"        def __init__(self, name):        self.name = name        @abstractmethod    def area(self):        \"\"\"è®¡ç®—é¢ç§¯çš„æŠ½è±¡æ–¹æ³•\"\"\"        pass        @abstractmethod    def perimeter(self):        \"\"\"è®¡ç®—å‘¨é•¿çš„æŠ½è±¡æ–¹æ³•\"\"\"        pass        @abstractclassmethod    def from_string(cls, shape_str):        \"\"\"ä»å­—ç¬¦ä¸²åˆ›å»ºå›¾å½¢çš„æŠ½è±¡ç±»æ–¹æ³•\"\"\"        pass        @abstractstaticmethod    def validate_dimensions(*args):        \"\"\"éªŒè¯å°ºå¯¸çš„æŠ½è±¡é™æ€æ–¹æ³•\"\"\"        pass        # å…·ä½“æ–¹æ³•    def describe(self):        return f\"{self.name}: é¢ç§¯={self.area():.2f}, å‘¨é•¿={self.perimeter():.2f}\"ğŸ¯ å®ç°æŠ½è±¡åŸºç±»å…·ä½“å­ç±»å®ç°import mathclass Rectangle(Shape):    \"\"\"çŸ©å½¢ç±»\"\"\"        def __init__(self, width, height):        super().__init__(\"çŸ©å½¢\")        self.width = width        self.height = height        def area(self):        return self.width * self.height        def perimeter(self):        return 2 * (self.width + self.height)        @classmethod    def from_string(cls, shape_str):        # è§£æå­—ç¬¦ä¸² \"rectangle:width,height\"        parts = shape_str.split(':')        if parts[0] != 'rectangle':            raise ValueError(\"ä¸æ˜¯çŸ©å½¢å­—ç¬¦ä¸²\")        width, height = map(float, parts[1].split(','))        return cls(width, height)        @staticmethod    def validate_dimensions(width, height):        return width &gt; 0 and height &gt; 0class Circle(Shape):    \"\"\"åœ†å½¢ç±»\"\"\"        def __init__(self, radius):        super().__init__(\"åœ†å½¢\")        self.radius = radius        def area(self):        return math.pi * self.radius ** 2        def perimeter(self):        return 2 * math.pi * self.radius        @classmethod    def from_string(cls, shape_str):        # è§£æå­—ç¬¦ä¸² \"circle:radius\"        parts = shape_str.split(':')        if parts[0] != 'circle':            raise ValueError(\"ä¸æ˜¯åœ†å½¢å­—ç¬¦ä¸²\")        radius = float(parts[1])        return cls(radius)        @staticmethod    def validate_dimensions(radius):        return radius &gt; 0# ä½¿ç”¨ç¤ºä¾‹rect = Rectangle(5, 3)circle = Circle(4)print(rect.describe())  # çŸ©å½¢: é¢ç§¯=15.00, å‘¨é•¿=16.00print(circle.describe())  # åœ†å½¢: é¢ç§¯=50.27, å‘¨é•¿=25.13# ä»å­—ç¬¦ä¸²åˆ›å»ºrect2 = Rectangle.from_string(\"rectangle:10,6\")print(rect2.describe())  # çŸ©å½¢: é¢ç§¯=60.00, å‘¨é•¿=32.00ğŸ”§ æŠ½è±¡å±æ€§ä½¿ç”¨@propertyå’Œ@abstractmethodfrom abc import ABC, abstractmethodclass Vehicle(ABC):    \"\"\"äº¤é€šå·¥å…·æŠ½è±¡åŸºç±»\"\"\"        def __init__(self, brand):        self._brand = brand        @property    @abstractmethod    def max_speed(self):        \"\"\"æœ€å¤§é€Ÿåº¦æŠ½è±¡å±æ€§\"\"\"        pass        @property    @abstractmethod    def fuel_type(self):        \"\"\"ç‡ƒæ–™ç±»å‹æŠ½è±¡å±æ€§\"\"\"        pass        @property    def brand(self):        return self._brand        def start(self):        print(f\"{self.brand} {self.__class__.__name__} å¯åŠ¨äº†\")class Car(Vehicle):    \"\"\"æ±½è½¦ç±»\"\"\"        def __init__(self, brand, max_speed):        super().__init__(brand)        self._max_speed = max_speed        @property    def max_speed(self):        return self._max_speed        @property    def fuel_type(self):        return \"æ±½æ²¹\"class ElectricCar(Vehicle):    \"\"\"ç”µåŠ¨æ±½è½¦ç±»\"\"\"        def __init__(self, brand, max_speed, battery_capacity):        super().__init__(brand)        self._max_speed = max_speed        self.battery_capacity = battery_capacity        @property    def max_speed(self):        return self._max_speed        @property    def fuel_type(self):        return \"ç”µåŠ›\"        @property    def range(self):        # ç®€å•è®¡ç®—ç»­èˆªé‡Œç¨‹        return self.battery_capacity * 5# ä½¿ç”¨ç¤ºä¾‹car = Car(\"ä¸°ç”°\", 180)electric_car = ElectricCar(\"ç‰¹æ–¯æ‹‰\", 250, 100)print(f\"{car.brand}: æœ€å¤§é€Ÿåº¦ {car.max_speed}km/h, ç‡ƒæ–™ç±»å‹: {car.fuel_type}\")print(f\"{electric_car.brand}: æœ€å¤§é€Ÿåº¦ {electric_car.max_speed}km/h, ç‡ƒæ–™ç±»å‹: {electric_car.fuel_type}, ç»­èˆª: {electric_car.range}km\")ğŸ” ç±»å‹æ£€æŸ¥å’Œè™šæ‹Ÿå­ç±»isinstance()æ£€æŸ¥from abc import ABC, abstractmethodclass Drawable(ABC):    \"\"\"å¯ç»˜åˆ¶å¯¹è±¡æŠ½è±¡åŸºç±»\"\"\"        @abstractmethod    def draw(self):        passclass Rectangle(Drawable):    def draw(self):        print(\"ç»˜åˆ¶çŸ©å½¢\")class Circle(Drawable):    def draw(self):        print(\"ç»˜åˆ¶åœ†å½¢\")def render_shape(shape):    \"\"\"æ¸²æŸ“å›¾å½¢\"\"\"    if isinstance(shape, Drawable):        shape.draw()    else:        print(\"å¯¹è±¡ä¸å¯ç»˜åˆ¶\")# ä½¿ç”¨ç¤ºä¾‹rect = Rectangle()circle = Circle()render_shape(rect)    # ç»˜åˆ¶çŸ©å½¢render_shape(circle)  # ç»˜åˆ¶åœ†å½¢render_shape(\"text\")  # å¯¹è±¡ä¸å¯ç»˜åˆ¶è™šæ‹Ÿå­ç±»æ³¨å†Œfrom abc import ABC, abstractmethodclass Serializable(ABC):    \"\"\"å¯åºåˆ—åŒ–æŠ½è±¡åŸºç±»\"\"\"        @abstractmethod    def serialize(self):        passclass JSONData:    \"\"\"JSONæ•°æ®ç±»ï¼ˆä¸ç»§æ‰¿Serializableï¼‰\"\"\"        def __init__(self, data):        self.data = data        def serialize(self):        import json        return json.dumps(self.data)# æ³¨å†Œä¸ºè™šæ‹Ÿå­ç±»Serializable.register(JSONData)# ç°åœ¨JSONDataè¢«è®¤ä¸ºæ˜¯Serializableçš„å­ç±»json_data = JSONData({\"name\": \"å¼ ä¸‰\", \"age\": 25})print(isinstance(json_data, Serializable))  # Trueprint(json_data.serialize())  # {\"name\": \"å¼ ä¸‰\", \"age\": 25}# ä¹Ÿå¯ä»¥ä½¿ç”¨è£…é¥°å™¨å½¢å¼@Serializable.registerclass XMLData:    def __init__(self, data):        self.data = data        def serialize(self):        # ç®€å•çš„XMLåºåˆ—åŒ–        return f\"&lt;data&gt;{self.data}&lt;/data&gt;\"xml_data = XMLData(\"Hello World\")print(isinstance(xml_data, Serializable))  # Trueprint(xml_data.serialize())  # &lt;data&gt;Hello World&lt;/data&gt;ğŸ¨ å®é™…åº”ç”¨æ¡ˆä¾‹æ¡ˆä¾‹1ï¼šæ•°æ®åº“è¿æ¥å™¨from abc import ABC, abstractmethodfrom typing import List, Dict, Anyclass DatabaseConnector(ABC):    \"\"\"æ•°æ®åº“è¿æ¥å™¨æŠ½è±¡åŸºç±»\"\"\"        def __init__(self, host: str, port: int, database: str):        self.host = host        self.port = port        self.database = database        self._connection = None        @abstractmethod    def connect(self) -&gt; bool:        \"\"\"è¿æ¥æ•°æ®åº“\"\"\"        pass        @abstractmethod    def disconnect(self) -&gt; bool:        \"\"\"æ–­å¼€è¿æ¥\"\"\"        pass        @abstractmethod    def execute_query(self, query: str) -&gt; List[Dict[str, Any]]:        \"\"\"æ‰§è¡ŒæŸ¥è¯¢\"\"\"        pass        @abstractmethod    def execute_command(self, command: str) -&gt; bool:        \"\"\"æ‰§è¡Œå‘½ä»¤\"\"\"        pass        @property    @abstractmethod    def is_connected(self) -&gt; bool:        \"\"\"æ£€æŸ¥è¿æ¥çŠ¶æ€\"\"\"        pass        def __enter__(self):        self.connect()        return self        def __exit__(self, exc_type, exc_val, exc_tb):        self.disconnect()class MySQLConnector(DatabaseConnector):    \"\"\"MySQLè¿æ¥å™¨\"\"\"        def connect(self) -&gt; bool:        print(f\"è¿æ¥åˆ°MySQLæ•°æ®åº“: {self.host}:{self.port}/{self.database}\")        self._connection = f\"mysql://{self.host}:{self.port}/{self.database}\"        return True        def disconnect(self) -&gt; bool:        print(\"æ–­å¼€MySQLè¿æ¥\")        self._connection = None        return True        def execute_query(self, query: str) -&gt; List[Dict[str, Any]]:        print(f\"æ‰§è¡ŒMySQLæŸ¥è¯¢: {query}\")        # æ¨¡æ‹ŸæŸ¥è¯¢ç»“æœ        return [{\"id\": 1, \"name\": \"å¼ ä¸‰\"}, {\"id\": 2, \"name\": \"æå››\"}]        def execute_command(self, command: str) -&gt; bool:        print(f\"æ‰§è¡ŒMySQLå‘½ä»¤: {command}\")        return True        @property    def is_connected(self) -&gt; bool:        return self._connection is not Noneclass PostgreSQLConnector(DatabaseConnector):    \"\"\"PostgreSQLè¿æ¥å™¨\"\"\"        def connect(self) -&gt; bool:        print(f\"è¿æ¥åˆ°PostgreSQLæ•°æ®åº“: {self.host}:{self.port}/{self.database}\")        self._connection = f\"postgresql://{self.host}:{self.port}/{self.database}\"        return True        def disconnect(self) -&gt; bool:        print(\"æ–­å¼€PostgreSQLè¿æ¥\")        self._connection = None        return True        def execute_query(self, query: str) -&gt; List[Dict[str, Any]]:        print(f\"æ‰§è¡ŒPostgreSQLæŸ¥è¯¢: {query}\")        # æ¨¡æ‹ŸæŸ¥è¯¢ç»“æœ        return [{\"id\": 1, \"username\": \"admin\"}, {\"id\": 2, \"username\": \"user\"}]        def execute_command(self, command: str) -&gt; bool:        print(f\"æ‰§è¡ŒPostgreSQLå‘½ä»¤: {command}\")        return True        @property    def is_connected(self) -&gt; bool:        return self._connection is not None# æ•°æ®åº“ç®¡ç†å™¨class DatabaseManager:    def __init__(self, connector: DatabaseConnector):        self.connector = connector        def get_users(self):        \"\"\"è·å–ç”¨æˆ·åˆ—è¡¨\"\"\"        if not self.connector.is_connected:            self.connector.connect()                return self.connector.execute_query(\"SELECT * FROM users\")        def create_user(self, username: str):        \"\"\"åˆ›å»ºç”¨æˆ·\"\"\"        if not self.connector.is_connected:            self.connector.connect()                command = f\"INSERT INTO users (username) VALUES ('{username}')\"        return self.connector.execute_command(command)# ä½¿ç”¨ç¤ºä¾‹mysql_conn = MySQLConnector(\"localhost\", 3306, \"myapp\")postgres_conn = PostgreSQLConnector(\"localhost\", 5432, \"myapp\")# ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨with mysql_conn as conn:    manager = DatabaseManager(conn)    users = manager.get_users()    print(f\"MySQLç”¨æˆ·: {users}\")with postgres_conn as conn:    manager = DatabaseManager(conn)    users = manager.get_users()    print(f\"PostgreSQLç”¨æˆ·: {users}\")æ¡ˆä¾‹2ï¼šæ¶ˆæ¯å¤„ç†ç³»ç»Ÿfrom abc import ABC, abstractmethodfrom typing import Any, Dictfrom datetime import datetimeclass MessageProcessor(ABC):    \"\"\"æ¶ˆæ¯å¤„ç†å™¨æŠ½è±¡åŸºç±»\"\"\"        def __init__(self, name: str):        self.name = name        self.processed_count = 0        @abstractmethod    def process(self, message: Dict[str, Any]) -&gt; bool:        \"\"\"å¤„ç†æ¶ˆæ¯\"\"\"        pass        @abstractmethod    def validate_message(self, message: Dict[str, Any]) -&gt; bool:        \"\"\"éªŒè¯æ¶ˆæ¯æ ¼å¼\"\"\"        pass        def handle_message(self, message: Dict[str, Any]) -&gt; bool:        \"\"\"å¤„ç†æ¶ˆæ¯çš„æ¨¡æ¿æ–¹æ³•\"\"\"        print(f\"[{self.name}] å¼€å§‹å¤„ç†æ¶ˆæ¯: {message.get('id', 'unknown')}\")                if not self.validate_message(message):            print(f\"[{self.name}] æ¶ˆæ¯éªŒè¯å¤±è´¥\")            return False                try:            result = self.process(message)            if result:                self.processed_count += 1                print(f\"[{self.name}] æ¶ˆæ¯å¤„ç†æˆåŠŸ\")            else:                print(f\"[{self.name}] æ¶ˆæ¯å¤„ç†å¤±è´¥\")            return result        except Exception as e:            print(f\"[{self.name}] å¤„ç†å¼‚å¸¸: {e}\")            return False        def get_stats(self) -&gt; Dict[str, Any]:        \"\"\"è·å–å¤„ç†ç»Ÿè®¡\"\"\"        return {            \"processor\": self.name,            \"processed_count\": self.processed_count        }class EmailProcessor(MessageProcessor):    \"\"\"é‚®ä»¶å¤„ç†å™¨\"\"\"        def __init__(self):        super().__init__(\"é‚®ä»¶å¤„ç†å™¨\")        def validate_message(self, message: Dict[str, Any]) -&gt; bool:        required_fields = ['to', 'subject', 'body']        return all(field in message for field in required_fields)        def process(self, message: Dict[str, Any]) -&gt; bool:        # æ¨¡æ‹Ÿå‘é€é‚®ä»¶        print(f\"å‘é€é‚®ä»¶åˆ°: {message['to']}\")        print(f\"ä¸»é¢˜: {message['subject']}\")        print(f\"å†…å®¹: {message['body'][:50]}...\")        return Trueclass SMSProcessor(MessageProcessor):    \"\"\"çŸ­ä¿¡å¤„ç†å™¨\"\"\"        def __init__(self):        super().__init__(\"çŸ­ä¿¡å¤„ç†å™¨\")        def validate_message(self, message: Dict[str, Any]) -&gt; bool:        return 'phone' in message and 'text' in message and len(message['text']) &lt;= 160        def process(self, message: Dict[str, Any]) -&gt; bool:        # æ¨¡æ‹Ÿå‘é€çŸ­ä¿¡        print(f\"å‘é€çŸ­ä¿¡åˆ°: {message['phone']}\")        print(f\"å†…å®¹: {message['text']}\")        return Trueclass PushNotificationProcessor(MessageProcessor):    \"\"\"æ¨é€é€šçŸ¥å¤„ç†å™¨\"\"\"        def __init__(self):        super().__init__(\"æ¨é€é€šçŸ¥å¤„ç†å™¨\")        def validate_message(self, message: Dict[str, Any]) -&gt; bool:        return 'device_id' in message and 'title' in message and 'body' in message        def process(self, message: Dict[str, Any]) -&gt; bool:        # æ¨¡æ‹Ÿå‘é€æ¨é€é€šçŸ¥        print(f\"å‘é€æ¨é€åˆ°è®¾å¤‡: {message['device_id']}\")        print(f\"æ ‡é¢˜: {message['title']}\")        print(f\"å†…å®¹: {message['body']}\")        return True# æ¶ˆæ¯åˆ†å‘å™¨class MessageDispatcher:    def __init__(self):        self.processors: Dict[str, MessageProcessor] = {}        def register_processor(self, message_type: str, processor: MessageProcessor):        \"\"\"æ³¨å†Œæ¶ˆæ¯å¤„ç†å™¨\"\"\"        self.processors[message_type] = processor        def dispatch(self, message_type: str, message: Dict[str, Any]) -&gt; bool:        \"\"\"åˆ†å‘æ¶ˆæ¯\"\"\"        if message_type not in self.processors:            print(f\"æœªæ‰¾åˆ°ç±»å‹ä¸º {message_type} çš„å¤„ç†å™¨\")            return False                processor = self.processors[message_type]        return processor.handle_message(message)        def get_all_stats(self) -&gt; Dict[str, Any]:        \"\"\"è·å–æ‰€æœ‰å¤„ç†å™¨çš„ç»Ÿè®¡ä¿¡æ¯\"\"\"        return {msg_type: processor.get_stats()                 for msg_type, processor in self.processors.items()}# ä½¿ç”¨ç¤ºä¾‹dispatcher = MessageDispatcher()# æ³¨å†Œå¤„ç†å™¨dispatcher.register_processor(\"email\", EmailProcessor())dispatcher.register_processor(\"sms\", SMSProcessor())dispatcher.register_processor(\"push\", PushNotificationProcessor())# å¤„ç†ä¸åŒç±»å‹çš„æ¶ˆæ¯messages = [    (\"email\", {        \"id\": \"email_001\",        \"to\": \"user@example.com\",        \"subject\": \"æ¬¢è¿æ³¨å†Œ\",        \"body\": \"æ„Ÿè°¢æ‚¨æ³¨å†Œæˆ‘ä»¬çš„æœåŠ¡ï¼Œè¯·ç‚¹å‡»é“¾æ¥æ¿€æ´»è´¦æˆ·...\"    }),    (\"sms\", {        \"id\": \"sms_001\",        \"phone\": \"+86138****8888\",        \"text\": \"æ‚¨çš„éªŒè¯ç æ˜¯: 123456\"    }),    (\"push\", {        \"id\": \"push_001\",        \"device_id\": \"device_12345\",        \"title\": \"æ–°æ¶ˆæ¯\",        \"body\": \"æ‚¨æœ‰ä¸€æ¡æ–°çš„ç§ä¿¡\"    })]for msg_type, message in messages:    dispatcher.dispatch(msg_type, message)    print(\"-\" * 50)# æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯stats = dispatcher.get_all_stats()for msg_type, stat in stats.items():    print(f\"{msg_type}: {stat}\")ğŸ“ æœ€ä½³å®è·µ1. è®¾è®¡åŸåˆ™from abc import ABC, abstractmethod# âœ… å¥½çš„è®¾è®¡ï¼šèŒè´£å•ä¸€ï¼Œæ¥å£æ¸…æ™°class Validator(ABC):    \"\"\"éªŒè¯å™¨æŠ½è±¡åŸºç±»\"\"\"        @abstractmethod    def validate(self, data: Any) -&gt; bool:        \"\"\"éªŒè¯æ•°æ®\"\"\"        pass        @abstractmethod    def get_error_message(self) -&gt; str:        \"\"\"è·å–é”™è¯¯ä¿¡æ¯\"\"\"        pass# âŒ ä¸å¥½çš„è®¾è®¡ï¼šèŒè´£æ··ä¹±class BadProcessor(ABC):    @abstractmethod    def process_data(self, data):        pass        @abstractmethod    def send_email(self, email):        pass        @abstractmethod    def log_message(self, message):        pass2. é”™è¯¯å¤„ç†from abc import ABC, abstractmethodclass DataProcessor(ABC):    \"\"\"æ•°æ®å¤„ç†å™¨æŠ½è±¡åŸºç±»\"\"\"        @abstractmethod    def process(self, data):        \"\"\"å¤„ç†æ•°æ®\"\"\"        pass        def safe_process(self, data):        \"\"\"å®‰å…¨å¤„ç†æ•°æ®\"\"\"        try:            return self.process(data)        except NotImplementedError:            raise  # é‡æ–°æŠ›å‡ºæŠ½è±¡æ–¹æ³•æœªå®ç°é”™è¯¯        except Exception as e:            print(f\"å¤„ç†æ•°æ®æ—¶å‘ç”Ÿé”™è¯¯: {e}\")            return None3. æ–‡æ¡£å’Œç±»å‹æç¤ºfrom abc import ABC, abstractmethodfrom typing import Protocol, TypeVar, GenericT = TypeVar('T')class Repository(ABC, Generic[T]):    \"\"\"é€šç”¨ä»“å‚¨æŠ½è±¡åŸºç±»        Args:        T: å®ä½“ç±»å‹    \"\"\"        @abstractmethod    def save(self, entity: T) -&gt; T:        \"\"\"ä¿å­˜å®ä½“                Args:            entity: è¦ä¿å­˜çš„å®ä½“                    Returns:            ä¿å­˜åçš„å®ä½“                    Raises:            RepositoryError: ä¿å­˜å¤±è´¥æ—¶æŠ›å‡º        \"\"\"        pass        @abstractmethod    def find_by_id(self, entity_id: int) -&gt; T | None:        \"\"\"æ ¹æ®IDæŸ¥æ‰¾å®ä½“                Args:            entity_id: å®ä½“ID                    Returns:            æ‰¾åˆ°çš„å®ä½“ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›None        \"\"\"        passğŸ”— æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - abcæ¨¡å—  PEP 3119 - æŠ½è±¡åŸºç±»ä»‹ç»  è®¾è®¡æ¨¡å¼ - æ¨¡æ¿æ–¹æ³•æ¨¡å¼  SOLIDåŸåˆ™ - æ¥å£éš”ç¦»åŸåˆ™æŠ½è±¡åŸºç±»æ˜¯Pythoné¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„é‡è¦å·¥å…·ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬åˆ›å»ºæ›´æ¸…æ™°çš„æ¥å£å®šä¹‰å’Œæ›´å¼ºçš„ç±»å‹çº¦æŸã€‚é€šè¿‡åˆç†ä½¿ç”¨æŠ½è±¡åŸºç±»ï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¯è¯»æ€§ã€‚",
        "url": "/docs/basics/abstract-classes/",
        "category": "basics",
        "tags": ["Python","é¢å‘å¯¹è±¡","æŠ½è±¡åŸºç±»","ABC","æ¥å£è®¾è®¡"]
      }
      
    
  
    
      ,
      {
        "title": "all() - é€»è¾‘ä¸å‡½æ•°",
        "content": "all() - é€»è¾‘ä¸å‡½æ•°ğŸ“ æ¦‚è¿°all() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥å¯è¿­ä»£å¯¹è±¡ä¸­æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½ä¸ºçœŸå€¼ï¼ˆTrueï¼‰ã€‚å¦‚æœå¯è¿­ä»£å¯¹è±¡ä¸­æ‰€æœ‰å…ƒç´ éƒ½ä¸ºçœŸï¼Œåˆ™è¿”å›Trueï¼›å¦‚æœæœ‰ä»»ä½•å…ƒç´ ä¸ºå‡æˆ–å¯è¿­ä»£å¯¹è±¡ä¸ºç©ºï¼Œåˆ™è¿”å›Falseï¼ˆç©ºå¯è¿­ä»£å¯¹è±¡è¿”å›Trueï¼‰ã€‚1ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡all()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£all()ä¸any()çš„åŒºåˆ«  å­¦ä¼šåœ¨æ•°æ®éªŒè¯ä¸­ä½¿ç”¨all()  äº†è§£all()çš„çŸ­è·¯æ±‚å€¼ç‰¹æ€§  æŒæ¡åœ¨æ¡ä»¶æ£€æŸ¥ä¸­çš„åº”ç”¨æŠ€å·§ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  å¸ƒå°”å€¼å’ŒçœŸå€¼æµ‹è¯•  å¯è¿­ä»£å¯¹è±¡çš„æ¦‚å¿µ  æ¡ä»¶è¯­å¥å’Œé€»è¾‘è¿ç®—ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µall() å‡½æ•°å®ç°äº†é€»è¾‘ä¸ï¼ˆANDï¼‰æ“ä½œã€‚å®ƒéå†å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¦‚æœé‡åˆ°ç¬¬ä¸€ä¸ªå‡å€¼å°±ç«‹å³è¿”å›Falseï¼Œè¿™è¢«ç§°ä¸ºçŸ­è·¯æ±‚å€¼ã€‚ç‰¹åˆ«åœ°ï¼Œç©ºå¯è¿­ä»£å¯¹è±¡è¿”å›Trueã€‚è¯­æ³•æ ¼å¼all(iterable)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  iterable      iterable      æ˜¯      æ—       è¦æ£€æŸ¥çš„å¯è¿­ä»£å¯¹è±¡      è¿”å›å€¼            ç±»å‹      è¯´æ˜                  bool      å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½ä¸ºçœŸåˆ™è¿”å›Trueï¼Œå¦åˆ™è¿”å›False      ä¸any()çš„å¯¹æ¯”            å‡½æ•°      ç©ºåºåˆ—      å…¨çœŸ      å…¨å‡      éƒ¨åˆ†çœŸ                  all()      True      True      False      False              any()      False      True      False      True      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# åŸºæœ¬å¸ƒå°”å€¼åˆ—è¡¨bool_list = [True, True, True, True]print(all(bool_list))  # Trueï¼ˆæ‰€æœ‰éƒ½æ˜¯Trueï¼‰bool_list2 = [True, False, True, True]print(all(bool_list2))  # Falseï¼ˆæœ‰ä¸€ä¸ªFalseï¼‰# ç©ºåˆ—è¡¨empty_list = []print(all(empty_list))  # Trueï¼ˆç©ºåˆ—è¡¨è¿”å›Trueï¼‰# æ•°å­—åˆ—è¡¨numbers = [1, 2, 3, 4, 5]print(all(numbers))  # Trueï¼ˆæ‰€æœ‰æ•°å­—éƒ½éé›¶ï¼‰numbers2 = [1, 2, 0, 4, 5]print(all(numbers2))  # Falseï¼ˆ0æ˜¯å‡å€¼ï¼‰# å­—ç¬¦ä¸²åˆ—è¡¨strings = ['hello', 'world', 'python']print(all(strings))  # Trueï¼ˆæ‰€æœ‰å­—ç¬¦ä¸²éƒ½éç©ºï¼‰strings2 = ['hello', '', 'python']print(all(strings2))  # Falseï¼ˆç©ºå­—ç¬¦ä¸²æ˜¯å‡å€¼ï¼‰# æ··åˆç±»å‹mixed = [1, 'text', [1, 2], {'a': 1}]print(all(mixed))  # Trueï¼ˆæ‰€æœ‰éƒ½æ˜¯çœŸå€¼ï¼‰mixed2 = [1, 'text', [], {'a': 1}]print(all(mixed2))  # Falseï¼ˆç©ºåˆ—è¡¨æ˜¯å‡å€¼ï¼‰# å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦text = \"hello\"print(all(text))  # Trueï¼ˆæ‰€æœ‰å­—ç¬¦éƒ½æ˜¯çœŸå€¼ï¼‰text2 = \"\"  # ç©ºå­—ç¬¦ä¸²print(all(text2))  # Trueï¼ˆç©ºåºåˆ—è¿”å›Trueï¼‰# ç”Ÿæˆå™¨è¡¨è¾¾å¼numbers = [2, 4, 6, 8, 10]print(all(x % 2 == 0 for x in numbers))  # Trueï¼ˆæ‰€æœ‰æ•°å­—éƒ½æ˜¯å¶æ•°ï¼‰numbers2 = [2, 4, 5, 8, 10]print(all(x % 2 == 0 for x in numbers2))  # Falseï¼ˆ5ä¸æ˜¯å¶æ•°ï¼‰æ•°æ®éªŒè¯åº”ç”¨# è¡¨å•å®Œæ•´æ€§éªŒè¯def validate_required_fields(form_data, required_fields):    \"\"\"éªŒè¯æ‰€æœ‰å¿…å¡«å­—æ®µéƒ½å·²å¡«å†™\"\"\"    return all(form_data.get(field, '').strip() for field in required_fields)def validate_form_complete(form_data):    \"\"\"å®Œæ•´çš„è¡¨å•éªŒè¯\"\"\"    required_fields = ['name', 'email', 'phone', 'address']        # æ£€æŸ¥æ‰€æœ‰å¿…å¡«å­—æ®µ    all_required_filled = validate_required_fields(form_data, required_fields)        # æ£€æŸ¥é‚®ç®±æ ¼å¼    email = form_data.get('email', '')    valid_email = '@' in email and '.' in email.split('@')[-1]        # æ£€æŸ¥ç”µè¯æ ¼å¼    phone = form_data.get('phone', '')    valid_phone = phone.replace('-', '').replace(' ', '').replace('(', '').replace(')', '').isdigit()        # æ£€æŸ¥å§“åé•¿åº¦    name = form_data.get('name', '')    valid_name = len(name.strip()) &gt;= 2        # æ‰€æœ‰éªŒè¯æ¡ä»¶    validation_results = {        'required_fields': all_required_filled,        'valid_email': valid_email,        'valid_phone': valid_phone,        'valid_name': valid_name    }        # ä½¿ç”¨all()æ£€æŸ¥æ˜¯å¦æ‰€æœ‰éªŒè¯éƒ½é€šè¿‡    is_valid = all(validation_results.values())        return {        'is_valid': is_valid,        'details': validation_results    }# æµ‹è¯•è¡¨å•éªŒè¯test_forms = [    {        'name': 'å¼ ä¸‰',        'email': 'zhang@example.com',        'phone': '123-456-7890',        'address': 'åŒ—äº¬å¸‚æœé˜³åŒº'    },    {        'name': 'æ',  # å§“åå¤ªçŸ­        'email': 'invalid-email',  # é‚®ç®±æ ¼å¼é”™è¯¯        'phone': 'abc-def-ghij',  # ç”µè¯æ ¼å¼é”™è¯¯        'address': 'ä¸Šæµ·å¸‚'    },    {        'name': 'ç‹äº”',        'email': '',  # ç¼ºå°‘é‚®ç®±        'phone': '987-654-3210',        'address': 'å¹¿å·å¸‚'    }]print(\"è¡¨å•éªŒè¯ç»“æœ:\")for i, form in enumerate(test_forms):    result = validate_form_complete(form)    print(f\"\\nè¡¨å• {i+1}: {'é€šè¿‡' if result['is_valid'] else 'å¤±è´¥'}\")    for check, passed in result['details'].items():        status = 'âœ“' if passed else 'âœ—'        print(f\"  {status} {check}\")# æƒé™éªŒè¯def check_user_access(user, required_permissions):    \"\"\"æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å…·æœ‰æ‰€æœ‰å¿…éœ€æƒé™\"\"\"    user_permissions = set(user.get('permissions', []))    return all(perm in user_permissions for perm in required_permissions)def validate_operation_access(users, operation_permissions):    \"\"\"éªŒè¯ç”¨æˆ·ç»„æ˜¯å¦éƒ½æœ‰æ“ä½œæƒé™\"\"\"    access_results = {}        for user in users:        has_access = check_user_access(user, operation_permissions)        access_results[user['name']] = has_access        # æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰æƒé™    all_have_access = all(access_results.values())        return {        'all_authorized': all_have_access,        'individual_access': access_results    }# æµ‹è¯•æƒé™éªŒè¯users = [    {'name': 'ç®¡ç†å‘˜', 'permissions': ['read', 'write', 'delete', 'admin']},    {'name': 'ç¼–è¾‘è€…', 'permissions': ['read', 'write']},    {'name': 'æŸ¥çœ‹è€…', 'permissions': ['read']}]operations = [    ['read'],  # åªéœ€è¯»æƒé™    ['read', 'write'],  # éœ€è¦è¯»å†™æƒé™    ['read', 'write', 'delete']  # éœ€è¦è¯»å†™åˆ æƒé™]for i, perms in enumerate(operations):    result = validate_operation_access(users, perms)    print(f\"\\næ“ä½œ {i+1} (éœ€è¦æƒé™: {perms}):\")    print(f\"æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰æƒé™: {'æ˜¯' if result['all_authorized'] else 'å¦'}\")    for user, has_access in result['individual_access'].items():        status = 'âœ“' if has_access else 'âœ—'        print(f\"  {status} {user}\")# æ•°æ®å®Œæ•´æ€§æ£€æŸ¥def check_data_integrity(records):    \"\"\"æ£€æŸ¥æ•°æ®è®°å½•çš„å®Œæ•´æ€§\"\"\"    if not records:        return {'is_complete': True, 'issues': []}        issues = []        # æ£€æŸ¥æ‰€æœ‰è®°å½•æ˜¯å¦éƒ½æœ‰å¿…éœ€å­—æ®µ    required_fields = ['id', 'name', 'created_at']    all_have_required = all(        all(field in record for field in required_fields)        for record in records    )        if not all_have_required:        issues.append('éƒ¨åˆ†è®°å½•ç¼ºå°‘å¿…éœ€å­—æ®µ')        # æ£€æŸ¥æ‰€æœ‰IDæ˜¯å¦å”¯ä¸€    ids = [record.get('id') for record in records if 'id' in record]    all_ids_unique = len(ids) == len(set(ids))        if not all_ids_unique:        issues.append('å­˜åœ¨é‡å¤çš„ID')        # æ£€æŸ¥æ‰€æœ‰è®°å½•æ˜¯å¦éƒ½æœ‰æœ‰æ•ˆçš„æ—¶é—´æˆ³    all_valid_timestamps = all(        record.get('created_at') and         isinstance(record.get('created_at'), str) and         len(record.get('created_at', '')) &gt;= 10        for record in records    )        if not all_valid_timestamps:        issues.append('éƒ¨åˆ†è®°å½•çš„æ—¶é—´æˆ³æ— æ•ˆ')        return {        'is_complete': all([            all_have_required,            all_ids_unique,            all_valid_timestamps        ]),        'issues': issues    }# æµ‹è¯•æ•°æ®å®Œæ•´æ€§test_records = [    {'id': 1, 'name': 'è®°å½•1', 'created_at': '2024-01-15 10:00:00'},    {'id': 2, 'name': 'è®°å½•2', 'created_at': '2024-01-15 11:00:00'},    {'id': 3, 'name': 'è®°å½•3', 'created_at': '2024-01-15 12:00:00'}]test_records_with_issues = [    {'id': 1, 'name': 'è®°å½•1', 'created_at': '2024-01-15 10:00:00'},    {'id': 2, 'created_at': '2024-01-15 11:00:00'},  # ç¼ºå°‘name    {'id': 1, 'name': 'è®°å½•3', 'created_at': 'invalid'},  # é‡å¤IDï¼Œæ— æ•ˆæ—¶é—´æˆ³]print(\"\\næ•°æ®å®Œæ•´æ€§æ£€æŸ¥:\")for i, records in enumerate([test_records, test_records_with_issues]):    result = check_data_integrity(records)    print(f\"\\næ•°æ®é›† {i+1}:\")    print(f\"æ•°æ®å®Œæ•´: {'æ˜¯' if result['is_complete'] else 'å¦'}\")    if result['issues']:        for issue in result['issues']:            print(f\"  é—®é¢˜: {issue}\")ç®—æ³•å’Œé€»è¾‘åº”ç”¨# æ•°å­¦éªŒè¯def is_prime(n):    \"\"\"æ£€æŸ¥æ˜¯å¦ä¸ºè´¨æ•°\"\"\"    if n &lt; 2:        return False    if n == 2:        return True    if n % 2 == 0:        return False        # ä½¿ç”¨all()æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å¯èƒ½çš„å› å­éƒ½ä¸èƒ½æ•´é™¤n    return all(n % i != 0 for i in range(3, int(n**0.5) + 1, 2))def check_prime_list(numbers):    \"\"\"æ£€æŸ¥æ•°å­—åˆ—è¡¨ä¸­æ˜¯å¦æ‰€æœ‰æ•°å­—éƒ½æ˜¯è´¨æ•°\"\"\"    prime_results = {num: is_prime(num) for num in numbers}    all_prime = all(prime_results.values())        return {        'all_prime': all_prime,        'individual_results': prime_results    }# æµ‹è¯•è´¨æ•°æ£€æŸ¥test_numbers = [2, 3, 5, 7, 11, 13]test_numbers_mixed = [2, 3, 4, 5, 6, 7]print(\"è´¨æ•°æ£€æŸ¥:\")for i, numbers in enumerate([test_numbers, test_numbers_mixed]):    result = check_prime_list(numbers)    print(f\"\\næ•°å­—ç»„ {i+1}: {numbers}\")    print(f\"å…¨éƒ¨æ˜¯è´¨æ•°: {'æ˜¯' if result['all_prime'] else 'å¦'}\")    for num, is_prime_result in result['individual_results'].items():        status = 'è´¨æ•°' if is_prime_result else 'åˆæ•°'        print(f\"  {num}: {status}\")# æ’åºéªŒè¯def is_sorted(sequence, reverse=False):    \"\"\"æ£€æŸ¥åºåˆ—æ˜¯å¦å·²æ’åº\"\"\"    if len(sequence) &lt;= 1:        return True        if reverse:        return all(sequence[i] &gt;= sequence[i+1] for i in range(len(sequence)-1))    else:        return all(sequence[i] &lt;= sequence[i+1] for i in range(len(sequence)-1))def validate_sorted_data(data_sets):    \"\"\"éªŒè¯å¤šä¸ªæ•°æ®é›†çš„æ’åºçŠ¶æ€\"\"\"    results = {}        for name, data in data_sets.items():        results[name] = {            'ascending': is_sorted(data),            'descending': is_sorted(data, reverse=True)        }        # æ£€æŸ¥æ˜¯å¦æ‰€æœ‰æ•°æ®é›†éƒ½æ˜¯æœ‰åºçš„ï¼ˆå‡åºæˆ–é™åºï¼‰    all_sorted = all(        result['ascending'] or result['descending']         for result in results.values()    )        return {        'all_sorted': all_sorted,        'details': results    }# æµ‹è¯•æ’åºéªŒè¯data_sets = {    'å‡åºæ•°æ®': [1, 2, 3, 4, 5],    'é™åºæ•°æ®': [5, 4, 3, 2, 1],    'æ— åºæ•°æ®': [3, 1, 4, 1, 5],    'ç›¸ç­‰æ•°æ®': [2, 2, 2, 2, 2]}sort_result = validate_sorted_data(data_sets)print(f\"\\næ’åºéªŒè¯:\")print(f\"æ‰€æœ‰æ•°æ®é›†éƒ½æœ‰åº: {'æ˜¯' if sort_result['all_sorted'] else 'å¦'}\")for name, result in sort_result['details'].items():    print(f\"\\n{name}:\")    print(f\"  å‡åº: {'æ˜¯' if result['ascending'] else 'å¦'}\")    print(f\"  é™åº: {'æ˜¯' if result['descending'] else 'å¦'}\")# é…ç½®éªŒè¯def validate_server_config(config):    \"\"\"éªŒè¯æœåŠ¡å™¨é…ç½®\"\"\"    validations = []        # ç«¯å£èŒƒå›´éªŒè¯    port = config.get('port', 0)    valid_port = 1 &lt;= port &lt;= 65535    validations.append(('ç«¯å£èŒƒå›´', valid_port))        # å¿…éœ€é…ç½®é¡¹éªŒè¯    required_keys = ['host', 'port', 'database_url', 'secret_key']    has_required = all(key in config and config[key] for key in required_keys)    validations.append(('å¿…éœ€é…ç½®é¡¹', has_required))        # æ•°æ®åº“URLæ ¼å¼éªŒè¯    db_url = config.get('database_url', '')    valid_db_url = db_url.startswith(('postgresql://', 'mysql://', 'sqlite:///'))    validations.append(('æ•°æ®åº“URLæ ¼å¼', valid_db_url))        # å¯†é’¥é•¿åº¦éªŒè¯    secret_key = config.get('secret_key', '')    valid_secret = len(secret_key) &gt;= 32    validations.append(('å¯†é’¥é•¿åº¦', valid_secret))        # SSLé…ç½®éªŒè¯ï¼ˆå¦‚æœå¯ç”¨ï¼‰    if config.get('ssl_enabled', False):        ssl_cert = config.get('ssl_cert_path', '')        ssl_key = config.get('ssl_key_path', '')        valid_ssl = ssl_cert and ssl_key        validations.append(('SSLé…ç½®', valid_ssl))        # æ£€æŸ¥æ‰€æœ‰éªŒè¯æ˜¯å¦éƒ½é€šè¿‡    all_valid = all(result for _, result in validations)        return {        'is_valid': all_valid,        'validations': validations    }# æµ‹è¯•æœåŠ¡å™¨é…ç½®test_configs = [    {        'host': 'localhost',        'port': 8080,        'database_url': 'postgresql://user:pass@localhost/db',        'secret_key': 'a' * 32,        'ssl_enabled': False    },    {        'host': 'localhost',        'port': 99999,  # æ— æ•ˆç«¯å£        'database_url': 'invalid_url',  # æ— æ•ˆURL        'secret_key': 'short',  # å¯†é’¥å¤ªçŸ­        'ssl_enabled': True,  # å¯ç”¨SSLä½†ç¼ºå°‘è¯ä¹¦é…ç½®    }]print(\"\\næœåŠ¡å™¨é…ç½®éªŒè¯:\")for i, config in enumerate(test_configs):    result = validate_server_config(config)    print(f\"\\né…ç½® {i+1}: {'æœ‰æ•ˆ' if result['is_valid'] else 'æ— æ•ˆ'}\")    for validation_name, is_valid in result['validations']:        status = 'âœ“' if is_valid else 'âœ—'        print(f\"  {status} {validation_name}\")é«˜çº§ç”¨æ³•# çŸ­è·¯æ±‚å€¼æ¼”ç¤ºdef expensive_validation(x):    \"\"\"æ¨¡æ‹Ÿè€—æ—¶éªŒè¯\"\"\"    print(f\"éªŒè¯ {x}\")    import time    time.sleep(0.1)    return x &gt; 0print(\"çŸ­è·¯æ±‚å€¼æ¼”ç¤º:\")numbers = [1, 2, -1, 4, 5]  # -1ä¼šå¯¼è‡´çŸ­è·¯result = all(expensive_validation(x) for x in numbers)print(f\"ç»“æœ: {result}\")print()  # æ³¨æ„ï¼šåªä¼šéªŒè¯åˆ°-1å°±åœæ­¢# åµŒå¥—éªŒè¯class ValidationRule:    def __init__(self, name, validator):        self.name = name        self.validator = validator        def validate(self, value):        try:            return self.validator(value)        except Exception:            return False        def __repr__(self):        return f\"ValidationRule({self.name})\"class DataValidator:    def __init__(self):        self.rules = []        def add_rule(self, name, validator):        self.rules.append(ValidationRule(name, validator))        def validate_item(self, item):        \"\"\"éªŒè¯å•ä¸ªé¡¹ç›®æ˜¯å¦é€šè¿‡æ‰€æœ‰è§„åˆ™\"\"\"        results = {}        for rule in self.rules:            results[rule.name] = rule.validate(item)                # ä½¿ç”¨all()æ£€æŸ¥æ˜¯å¦é€šè¿‡æ‰€æœ‰éªŒè¯        is_valid = all(results.values())                return {            'is_valid': is_valid,            'rule_results': results        }        def validate_batch(self, items):        \"\"\"æ‰¹é‡éªŒè¯\"\"\"        results = []        for item in items:            result = self.validate_item(item)            results.append(result)                # æ£€æŸ¥æ˜¯å¦æ‰€æœ‰é¡¹ç›®éƒ½é€šè¿‡éªŒè¯        all_valid = all(result['is_valid'] for result in results)                return {            'all_valid': all_valid,            'individual_results': results        }# åˆ›å»ºéªŒè¯å™¨validator = DataValidator()validator.add_rule('éç©º', lambda x: x is not None and str(x).strip() != '')validator.add_rule('æ•°å­—', lambda x: isinstance(x, (int, float)))validator.add_rule('æ­£æ•°', lambda x: x &gt; 0)validator.add_rule('èŒƒå›´', lambda x: 1 &lt;= x &lt;= 100)# æµ‹è¯•æ•°æ®test_items = [50, 75, 0, 150, -10, None, 'text']print(\"æ‰¹é‡æ•°æ®éªŒè¯:\")batch_result = validator.validate_batch(test_items)print(f\"æ‰€æœ‰æ•°æ®æœ‰æ•ˆ: {'æ˜¯' if batch_result['all_valid'] else 'å¦'}\")for i, (item, result) in enumerate(zip(test_items, batch_result['individual_results'])):    print(f\"\\né¡¹ç›® {i+1}: {item} - {'é€šè¿‡' if result['is_valid'] else 'å¤±è´¥'}\")    for rule_name, passed in result['rule_results'].items():        status = 'âœ“' if passed else 'âœ—'        print(f\"  {status} {rule_name}\")# æ¡ä»¶ç»„åˆéªŒè¯def complex_business_validation(orders):    \"\"\"å¤æ‚çš„ä¸šåŠ¡éªŒè¯\"\"\"    validation_results = {}        for order in orders:        order_id = order.get('id', 'unknown')                # åŸºæœ¬å­—æ®µéªŒè¯        basic_validations = [            order.get('customer_id') is not None,            order.get('total_amount', 0) &gt; 0,            order.get('items') and len(order.get('items', [])) &gt; 0,            order.get('status') in ['pending', 'confirmed', 'shipped', 'delivered']        ]                basic_valid = all(basic_validations)                # å•†å“éªŒè¯        items = order.get('items', [])        item_validations = [            all(item.get('quantity', 0) &gt; 0 for item in items),            all(item.get('price', 0) &gt; 0 for item in items),            all(item.get('product_id') for item in items)        ]                items_valid = all(item_validations)                # é‡‘é¢éªŒè¯        calculated_total = sum(            item.get('quantity', 0) * item.get('price', 0)             for item in items        )        amount_valid = abs(calculated_total - order.get('total_amount', 0)) &lt; 0.01                # ç»¼åˆéªŒè¯        all_validations = [basic_valid, items_valid, amount_valid]        order_valid = all(all_validations)                validation_results[order_id] = {            'is_valid': order_valid,            'basic_valid': basic_valid,            'items_valid': items_valid,            'amount_valid': amount_valid        }        # æ£€æŸ¥æ˜¯å¦æ‰€æœ‰è®¢å•éƒ½æœ‰æ•ˆ    all_orders_valid = all(result['is_valid'] for result in validation_results.values())        return {        'all_valid': all_orders_valid,        'order_results': validation_results    }# æµ‹è¯•è®¢å•æ•°æ®test_orders = [    {        'id': 'ORD001',        'customer_id': 'CUST001',        'total_amount': 150.00,        'status': 'confirmed',        'items': [            {'product_id': 'PROD001', 'quantity': 2, 'price': 50.00},            {'product_id': 'PROD002', 'quantity': 1, 'price': 50.00}        ]    },    {        'id': 'ORD002',        'customer_id': 'CUST002',        'total_amount': 100.00,  # é‡‘é¢ä¸åŒ¹é…        'status': 'pending',        'items': [            {'product_id': 'PROD003', 'quantity': 1, 'price': 75.00}        ]    },    {        'id': 'ORD003',        'customer_id': None,  # ç¼ºå°‘å®¢æˆ·ID        'total_amount': 200.00,        'status': 'invalid_status',  # æ— æ•ˆçŠ¶æ€        'items': []    }]print(\"\\nè®¢å•éªŒè¯:\")order_validation = complex_business_validation(test_orders)print(f\"æ‰€æœ‰è®¢å•æœ‰æ•ˆ: {'æ˜¯' if order_validation['all_valid'] else 'å¦'}\")for order_id, result in order_validation['order_results'].items():    print(f\"\\nè®¢å• {order_id}: {'æœ‰æ•ˆ' if result['is_valid'] else 'æ— æ•ˆ'}\")    print(f\"  åŸºæœ¬ä¿¡æ¯: {'âœ“' if result['basic_valid'] else 'âœ—'}\")    print(f\"  å•†å“ä¿¡æ¯: {'âœ“' if result['items_valid'] else 'âœ—'}\")    print(f\"  é‡‘é¢è®¡ç®—: {'âœ“' if result['amount_valid'] else 'âœ—'}\")âš ï¸ æ³¨æ„äº‹é¡¹  all() ä½¿ç”¨çŸ­è·¯æ±‚å€¼ï¼Œé‡åˆ°ç¬¬ä¸€ä¸ªå‡å€¼å°±è¿”å›False  ç©ºå¯è¿­ä»£å¯¹è±¡è¿”å›Trueï¼ˆè¿™ä¸æ•°å­¦é€»è¾‘ä¸€è‡´ï¼‰  ä¸ç”Ÿæˆå™¨è¡¨è¾¾å¼ç»“åˆä½¿ç”¨æ—¶è¦æ³¨æ„æ€§èƒ½  ç†è§£ä¸any()çš„åŒºåˆ«å¾ˆé‡è¦# å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ# 1. ç©ºåºåˆ—çš„å¤„ç†empty_cases = [    [],    (),    '',    set(),    {}]print(\"ç©ºåºåˆ—çš„all()ç»“æœ:\")for case in empty_cases:    result = all(case)    print(f\"all({case!r}) = {result}\")  # éƒ½è¿”å›True# 2. all()ä¸any()çš„å¯¹æ¯”test_cases = [    [True, True, True],    [True, False, True],    [False, False, False],    []]print(\"\\nall()ä¸any()å¯¹æ¯”:\")for case in test_cases:    all_result = all(case)    any_result = any(case)    print(f\"{case}: all()={all_result}, any()={any_result}\")# 3. å¾·æ‘©æ ¹å®šå¾‹éªŒè¯def demonstrate_de_morgan(values):    \"\"\"æ¼”ç¤ºå¾·æ‘©æ ¹å®šå¾‹\"\"\"    # not (A and B) == (not A) or (not B)    # not all(values) == any(not x for x in values)        not_all = not all(values)    any_not = any(not x for x in values)        print(f\"å€¼: {values}\")    print(f\"not all(values): {not_all}\")    print(f\"any(not x for x in values): {any_not}\")    print(f\"å¾·æ‘©æ ¹å®šå¾‹æˆç«‹: {not_all == any_not}\")    print()print(\"å¾·æ‘©æ ¹å®šå¾‹æ¼”ç¤º:\")for case in [[True, True], [True, False], [False, False]]:    demonstrate_de_morgan(case)# 4. æ€§èƒ½è€ƒè™‘import timedef slow_check(x):    \"\"\"æ¨¡æ‹Ÿæ…¢é€Ÿæ£€æŸ¥\"\"\"    time.sleep(0.01)    return x &gt; 0large_numbers = [-1] + list(range(1, 100))  # ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºè´Ÿæ•°# ä½¿ç”¨all()withç”Ÿæˆå™¨ï¼ˆæ¨èï¼Œä¼šçŸ­è·¯ï¼‰start = time.time()result1 = all(slow_check(x) for x in large_numbers)time1 = time.time() - start# ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ï¼ˆä¸æ¨èï¼Œä¼šè®¡ç®—æ‰€æœ‰å€¼ï¼‰start = time.time()result2 = all([slow_check(x) for x in large_numbers])time2 = time.time() - startprint(f\"æ€§èƒ½æ¯”è¾ƒ:\")print(f\"ç”Ÿæˆå™¨è¡¨è¾¾å¼: {time1:.3f}ç§’\")print(f\"åˆ—è¡¨æ¨å¯¼å¼: {time2:.3f}ç§’\")print(f\"ç”Ÿæˆå™¨æ›´å¿«: {time2/time1:.1f}å€\")# 5. å¤æ‚æ¡ä»¶çš„å¯è¯»æ€§# ä¸æ¨èï¼šå¤æ‚çš„å•è¡Œè¡¨è¾¾å¼def bad_validation(data):    return all(item.get('id') and item.get('name') and item.get('value', 0) &gt; 0 and len(item.get('tags', [])) &gt; 0 for item in data)# æ¨èï¼šåˆ†è§£ä¸ºæ¸…æ™°çš„æ­¥éª¤def good_validation(data):    def is_valid_item(item):        has_id = item.get('id') is not None        has_name = item.get('name') is not None        has_positive_value = item.get('value', 0) &gt; 0        has_tags = len(item.get('tags', [])) &gt; 0                return all([has_id, has_name, has_positive_value, has_tags])        return all(is_valid_item(item) for item in data)# æµ‹è¯•æ•°æ®test_data = [    {'id': 1, 'name': 'item1', 'value': 10, 'tags': ['tag1']},    {'id': 2, 'name': 'item2', 'value': 0, 'tags': []},  # æ— æ•ˆ]print(f\"\\nå¤æ‚éªŒè¯ç»“æœ:\")print(f\"ä¸æ¨èæ–¹å¼: {bad_validation(test_data)}\")print(f\"æ¨èæ–¹å¼: {good_validation(test_data)}\")ğŸ”— ç›¸å…³å†…å®¹  any() - é€»è¾‘æˆ–å‡½æ•°  bool() - å¸ƒå°”å€¼å‡½æ•°  filter() - è¿‡æ»¤å‡½æ•°  map() - æ˜ å°„å‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - all()  PythonçœŸå€¼æµ‹è¯•  å¸ƒå°”è¿ç®—ğŸ·ï¸ æ ‡ç­¾é€»è¾‘åˆ¤æ–­ å¸ƒå°”å€¼ è¿­ä»£å™¨ çŸ­è·¯æ±‚å€¼ æ•°æ®éªŒè¯æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/all/",
        "category": "builtins",
        "tags": ["é€»è¾‘åˆ¤æ–­","å¸ƒå°”å€¼","è¿­ä»£å™¨"]
      }
      
    
  
    
      ,
      {
        "title": "any() - é€»è¾‘æˆ–å‡½æ•°",
        "content": "any() - é€»è¾‘æˆ–å‡½æ•°ğŸ“ æ¦‚è¿°any() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥å¯è¿­ä»£å¯¹è±¡ä¸­æ˜¯å¦æœ‰ä»»ä½•å…ƒç´ ä¸ºçœŸå€¼ï¼ˆTrueï¼‰ã€‚å¦‚æœå¯è¿­ä»£å¯¹è±¡ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ ä¸ºçœŸï¼Œåˆ™è¿”å›Trueï¼›å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½ä¸ºå‡æˆ–å¯è¿­ä»£å¯¹è±¡ä¸ºç©ºï¼Œåˆ™è¿”å›Falseã€‚1ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡any()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£çœŸå€¼å’Œå‡å€¼çš„æ¦‚å¿µ  å­¦ä¼šåœ¨æ¡ä»¶åˆ¤æ–­ä¸­ä½¿ç”¨any()  äº†è§£any()çš„çŸ­è·¯æ±‚å€¼ç‰¹æ€§  æŒæ¡åœ¨æ•°æ®éªŒè¯ä¸­çš„åº”ç”¨ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  å¸ƒå°”å€¼å’ŒçœŸå€¼æµ‹è¯•  å¯è¿­ä»£å¯¹è±¡çš„æ¦‚å¿µ  æ¡ä»¶è¯­å¥å’Œé€»è¾‘è¿ç®—ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µany() å‡½æ•°å®ç°äº†é€»è¾‘æˆ–ï¼ˆORï¼‰æ“ä½œã€‚å®ƒéå†å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¦‚æœé‡åˆ°ç¬¬ä¸€ä¸ªçœŸå€¼å°±ç«‹å³è¿”å›Trueï¼Œè¿™è¢«ç§°ä¸ºçŸ­è·¯æ±‚å€¼ã€‚è¯­æ³•æ ¼å¼any(iterable)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  iterable      iterable      æ˜¯      æ—       è¦æ£€æŸ¥çš„å¯è¿­ä»£å¯¹è±¡      è¿”å›å€¼            ç±»å‹      è¯´æ˜                  bool      å¦‚æœæœ‰ä»»ä½•å…ƒç´ ä¸ºçœŸåˆ™è¿”å›Trueï¼Œå¦åˆ™è¿”å›False      çœŸå€¼å’Œå‡å€¼åœ¨Pythonä¸­ï¼Œä»¥ä¸‹å€¼è¢«è®¤ä¸ºæ˜¯å‡å€¼ï¼š  False  None  0ï¼ˆä»»ä½•æ•°å€¼ç±»å‹çš„é›¶ï¼‰  ç©ºåºåˆ—ï¼š'', [], (), {}  ç©ºé›†åˆï¼šset()  è‡ªå®šä¹‰å¯¹è±¡çš„__bool__()æˆ–__len__()è¿”å›Falseæˆ–0å…¶ä»–æ‰€æœ‰å€¼éƒ½è¢«è®¤ä¸ºæ˜¯çœŸå€¼ã€‚ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# åŸºæœ¬å¸ƒå°”å€¼åˆ—è¡¨bool_list = [False, False, True, False]print(any(bool_list))  # Trueï¼ˆå› ä¸ºæœ‰ä¸€ä¸ªTrueï¼‰bool_list2 = [False, False, False]print(any(bool_list2))  # Falseï¼ˆæ‰€æœ‰éƒ½æ˜¯Falseï¼‰# ç©ºåˆ—è¡¨empty_list = []print(any(empty_list))  # Falseï¼ˆç©ºåˆ—è¡¨ï¼‰# æ•°å­—åˆ—è¡¨numbers = [0, 0, 1, 0]print(any(numbers))  # Trueï¼ˆ1æ˜¯çœŸå€¼ï¼‰numbers2 = [0, 0, 0]print(any(numbers2))  # Falseï¼ˆ0æ˜¯å‡å€¼ï¼‰# å­—ç¬¦ä¸²åˆ—è¡¨strings = ['', '', 'hello', '']print(any(strings))  # Trueï¼ˆ'hello'æ˜¯çœŸå€¼ï¼‰strings2 = ['', '', '']print(any(strings2))  # Falseï¼ˆç©ºå­—ç¬¦ä¸²æ˜¯å‡å€¼ï¼‰# æ··åˆç±»å‹mixed = [0, '', None, False, 'text']print(any(mixed))  # Trueï¼ˆ'text'æ˜¯çœŸå€¼ï¼‰mixed2 = [0, '', None, False]print(any(mixed2))  # Falseï¼ˆæ‰€æœ‰éƒ½æ˜¯å‡å€¼ï¼‰# å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦text = \"hello\"print(any(text))  # Trueï¼ˆæ‰€æœ‰å­—ç¬¦éƒ½æ˜¯çœŸå€¼ï¼‰text2 = \"\"print(any(text2))  # Falseï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰# ç”Ÿæˆå™¨è¡¨è¾¾å¼numbers = [1, 2, 3, 4, 5]print(any(x &gt; 3 for x in numbers))  # Trueï¼ˆ4å’Œ5å¤§äº3ï¼‰print(any(x &gt; 10 for x in numbers))  # Falseï¼ˆæ²¡æœ‰æ•°å­—å¤§äº10ï¼‰æ¡ä»¶åˆ¤æ–­åº”ç”¨# ç”¨æˆ·æƒé™æ£€æŸ¥def check_user_permissions(user_roles, required_permissions):    \"\"\"æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å…·æœ‰æ‰€éœ€æƒé™ä¹‹ä¸€\"\"\"    user_permissions = get_permissions_for_roles(user_roles)    return any(perm in user_permissions for perm in required_permissions)def get_permissions_for_roles(roles):    \"\"\"æ ¹æ®è§’è‰²è·å–æƒé™ï¼ˆæ¨¡æ‹Ÿå‡½æ•°ï¼‰\"\"\"    role_permissions = {        'admin': ['read', 'write', 'delete', 'manage'],        'editor': ['read', 'write'],        'viewer': ['read'],        'guest': []    }        all_permissions = set()    for role in roles:        all_permissions.update(role_permissions.get(role, []))    return list(all_permissions)# æµ‹è¯•æƒé™æ£€æŸ¥user_roles = ['editor', 'viewer']required_perms = ['write', 'delete']has_permission = check_user_permissions(user_roles, required_perms)print(f\"ç”¨æˆ·è§’è‰² {user_roles} æ˜¯å¦æœ‰æƒé™ {required_perms}: {has_permission}\")# è¡¨å•éªŒè¯def validate_form_data(form_data):    \"\"\"éªŒè¯è¡¨å•æ•°æ®\"\"\"    required_fields = ['name', 'email', 'phone']        # æ£€æŸ¥æ˜¯å¦æœ‰å¿…å¡«å­—æ®µä¸ºç©º    missing_fields = [field for field in required_fields                      if not form_data.get(field, '').strip()]        has_missing = any(missing_fields)        # æ£€æŸ¥é‚®ç®±æ ¼å¼    email = form_data.get('email', '')    invalid_email = email and '@' not in email        # æ£€æŸ¥ç”µè¯æ ¼å¼    phone = form_data.get('phone', '')    invalid_phone = phone and not phone.replace('-', '').replace(' ', '').isdigit()        errors = []    if has_missing:        errors.append(f\"ç¼ºå°‘å¿…å¡«å­—æ®µ: {', '.join(missing_fields)}\")    if invalid_email:        errors.append(\"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®\")    if invalid_phone:        errors.append(\"ç”µè¯æ ¼å¼ä¸æ­£ç¡®\")        return {        'is_valid': not any(errors),        'errors': errors    }# æµ‹è¯•è¡¨å•éªŒè¯test_forms = [    {'name': 'å¼ ä¸‰', 'email': 'zhang@example.com', 'phone': '123-456-7890'},    {'name': '', 'email': 'invalid-email', 'phone': 'abc'},    {'name': 'æå››', 'email': '', 'phone': ''},]for i, form in enumerate(test_forms):    result = validate_form_data(form)    print(f\"\\nè¡¨å• {i+1}: {form}\")    print(f\"éªŒè¯ç»“æœ: {'é€šè¿‡' if result['is_valid'] else 'å¤±è´¥'}\")    if result['errors']:        for error in result['errors']:            print(f\"  é”™è¯¯: {error}\")# æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥import osdef find_config_file(possible_paths):    \"\"\"åœ¨å¤šä¸ªå¯èƒ½è·¯å¾„ä¸­æŸ¥æ‰¾é…ç½®æ–‡ä»¶\"\"\"    existing_paths = [path for path in possible_paths if os.path.exists(path)]        if any(existing_paths):        return existing_paths[0]  # è¿”å›ç¬¬ä¸€ä¸ªå­˜åœ¨çš„è·¯å¾„    return None# æ¨¡æ‹Ÿé…ç½®æ–‡ä»¶è·¯å¾„config_paths = [    './config.json',    './settings/config.json',    '/etc/myapp/config.json',    '~/.myapp/config.json']config_file = find_config_file(config_paths)if config_file:    print(f\"\\næ‰¾åˆ°é…ç½®æ–‡ä»¶: {config_file}\")else:    print(\"\\næœªæ‰¾åˆ°é…ç½®æ–‡ä»¶\")æ•°æ®åˆ†æåº”ç”¨# æ•°æ®è´¨é‡æ£€æŸ¥def analyze_data_quality(data):    \"\"\"åˆ†ææ•°æ®è´¨é‡\"\"\"    if not data:        return {'has_issues': False, 'issues': []}        issues = []        # æ£€æŸ¥æ˜¯å¦æœ‰ç¼ºå¤±å€¼    has_missing = any(value is None or value == '' for row in data for value in row.values())    if has_missing:        issues.append('å­˜åœ¨ç¼ºå¤±å€¼')        # æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤è®°å½•    seen_records = set()    has_duplicates = False    for row in data:        row_tuple = tuple(sorted(row.items()))        if row_tuple in seen_records:            has_duplicates = True            break        seen_records.add(row_tuple)        if has_duplicates:        issues.append('å­˜åœ¨é‡å¤è®°å½•')        # æ£€æŸ¥æ•°å€¼å­—æ®µæ˜¯å¦æœ‰å¼‚å¸¸å€¼    numeric_fields = ['age', 'salary', 'score']    for field in numeric_fields:        values = [row.get(field) for row in data if row.get(field) is not None]        if values:            # ç®€å•çš„å¼‚å¸¸å€¼æ£€æµ‹ï¼šè¶…å‡º3ä¸ªæ ‡å‡†å·®            mean_val = sum(values) / len(values)            variance = sum((x - mean_val) ** 2 for x in values) / len(values)            std_dev = variance ** 0.5                        has_outliers = any(abs(val - mean_val) &gt; 3 * std_dev for val in values)            if has_outliers:                issues.append(f'{field}å­—æ®µå­˜åœ¨å¼‚å¸¸å€¼')        return {        'has_issues': any(issues),        'issues': issues    }# æµ‹è¯•æ•°æ®test_data = [    {'name': 'å¼ ä¸‰', 'age': 25, 'salary': 50000, 'score': 85},    {'name': 'æå››', 'age': None, 'salary': 60000, 'score': 92},  # ç¼ºå¤±å€¼    {'name': 'ç‹äº”', 'age': 30, 'salary': 55000, 'score': 88},    {'name': 'å¼ ä¸‰', 'age': 25, 'salary': 50000, 'score': 85},  # é‡å¤è®°å½•    {'name': 'èµµå…­', 'age': 150, 'salary': 70000, 'score': 95},  # å¼‚å¸¸å¹´é¾„]quality_result = analyze_data_quality(test_data)print(f\"\\næ•°æ®è´¨é‡åˆ†æ:\")print(f\"å­˜åœ¨é—®é¢˜: {quality_result['has_issues']}\")if quality_result['issues']:    for issue in quality_result['issues']:        print(f\"  - {issue}\")# æœç´¢å’Œè¿‡æ»¤def search_products(products, search_terms):    \"\"\"åœ¨äº§å“åˆ—è¡¨ä¸­æœç´¢\"\"\"    results = []        for product in products:        # æ£€æŸ¥æœç´¢è¯æ˜¯å¦åœ¨äº§å“ä¿¡æ¯ä¸­        product_text = f\"{product['name']} {product['description']} {' '.join(product['tags'])}\".lower()                # ä½¿ç”¨any()æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æœç´¢è¯åŒ¹é…        matches = any(term.lower() in product_text for term in search_terms)                if matches:            results.append(product)        return results# äº§å“æ•°æ®products = [    {        'name': 'Pythonç¼–ç¨‹ä¹¦ç±',        'description': 'å­¦ä¹ Pythonç¼–ç¨‹çš„å…¥é—¨ä¹¦ç±',        'tags': ['ç¼–ç¨‹', 'æ•™è‚²', 'Python']    },    {        'name': 'JavaScriptæŒ‡å—',        'description': 'å‰ç«¯å¼€å‘å¿…å¤‡çš„JavaScriptæ•™ç¨‹',        'tags': ['ç¼–ç¨‹', 'å‰ç«¯', 'JavaScript']    },    {        'name': 'æ•°æ®ç§‘å­¦å·¥å…·åŒ…',        'description': 'åŒ…å«pandasã€numpyç­‰æ•°æ®åˆ†æå·¥å…·',        'tags': ['æ•°æ®ç§‘å­¦', 'Python', 'åˆ†æ']    },    {        'name': 'ç½‘é¡µè®¾è®¡æ¨¡æ¿',        'description': 'å“åº”å¼ç½‘é¡µè®¾è®¡æ¨¡æ¿é›†åˆ',        'tags': ['è®¾è®¡', 'ç½‘é¡µ', 'æ¨¡æ¿']    }]# æœç´¢æµ‹è¯•search_queries = [    ['Python', 'ç¼–ç¨‹'],    ['JavaScript'],    ['æ•°æ®', 'åˆ†æ'],    ['ç§»åŠ¨', 'åº”ç”¨']  # æ— åŒ¹é…ç»“æœ]for query in search_queries:    results = search_products(products, query)    print(f\"\\næœç´¢ '{' '.join(query)}' çš„ç»“æœ:\")    if results:        for product in results:            print(f\"  - {product['name']}\")    else:        print(\"  æ— åŒ¹é…ç»“æœ\")# ç½‘ç»œè¿æ¥æ£€æŸ¥def check_network_connectivity(hosts):    \"\"\"æ£€æŸ¥ç½‘ç»œè¿æ¥æ€§ï¼ˆæ¨¡æ‹Ÿï¼‰\"\"\"    def ping_host(host):        \"\"\"æ¨¡æ‹Ÿpingæ“ä½œ\"\"\"        # æ¨¡æ‹Ÿç½‘ç»œæ£€æŸ¥ç»“æœ        import random        success_rate = {            'google.com': 0.95,            'github.com': 0.90,            'stackoverflow.com': 0.85,            'nonexistent.com': 0.0        }        return random.random() &lt; success_rate.get(host, 0.5)        # æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•ä¸»æœºå¯è¾¾    connectivity_results = {host: ping_host(host) for host in hosts}        has_connectivity = any(connectivity_results.values())        return {        'has_internet': has_connectivity,        'results': connectivity_results,        'reachable_hosts': [host for host, reachable in connectivity_results.items() if reachable]    }# æµ‹è¯•ç½‘ç»œè¿æ¥test_hosts = ['google.com', 'github.com', 'stackoverflow.com', 'nonexistent.com']connectivity = check_network_connectivity(test_hosts)print(f\"\\nç½‘ç»œè¿æ¥æ£€æŸ¥:\")print(f\"æœ‰ç½‘ç»œè¿æ¥: {connectivity['has_internet']}\")print(f\"å¯è¾¾ä¸»æœº: {connectivity['reachable_hosts']}\")for host, reachable in connectivity['results'].items():    status = 'âœ“' if reachable else 'âœ—'    print(f\"  {status} {host}\")é«˜çº§ç”¨æ³•# çŸ­è·¯æ±‚å€¼æ¼”ç¤ºdef expensive_operation(x):    \"\"\"æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ\"\"\"    print(f\"æ‰§è¡Œè€—æ—¶æ“ä½œ: {x}\")    import time    time.sleep(0.1)  # æ¨¡æ‹Ÿè€—æ—¶    return x &gt; 5print(\"çŸ­è·¯æ±‚å€¼æ¼”ç¤º:\")numbers = [1, 2, 8, 4, 5]  # 8 &gt; 5ï¼Œä¼šåœ¨ç¬¬ä¸‰ä¸ªå…ƒç´ å¤„çŸ­è·¯result = any(expensive_operation(x) for x in numbers)print(f\"ç»“æœ: {result}\")print()  # æ³¨æ„ï¼šåªä¼šæ‰§è¡Œå‰3ä¸ªæ“ä½œ# å¤æ‚æ¡ä»¶ç»„åˆclass Student:    def __init__(self, name, grades, attendance, behavior):        self.name = name        self.grades = grades  # å„ç§‘æˆç»©åˆ—è¡¨        self.attendance = attendance  # å‡ºå‹¤ç‡        self.behavior = behavior  # è¡Œä¸ºè¯„åˆ†        def __repr__(self):        return f\"Student({self.name})\"def evaluate_student_performance(students):    \"\"\"è¯„ä¼°å­¦ç”Ÿè¡¨ç°\"\"\"    results = {}        for student in students:        # å¤šä¸ªæ¡ä»¶çš„å¤åˆåˆ¤æ–­        excellent_conditions = [            any(grade &gt;= 90 for grade in student.grades),  # æœ‰ä»»ä½•ä¸€ç§‘ä¼˜ç§€            student.attendance &gt;= 0.95,  # å‡ºå‹¤ç‡é«˜            student.behavior &gt;= 85  # è¡Œä¸ºè¡¨ç°å¥½        ]                # éœ€è¦æ»¡è¶³ä»»æ„ä¸¤ä¸ªæ¡ä»¶        excellent_count = sum(excellent_conditions)        is_excellent = excellent_count &gt;= 2                # è­¦å‘Šæ¡ä»¶        warning_conditions = [            any(grade &lt; 60 for grade in student.grades),  # æœ‰ä»»ä½•ä¸€ç§‘ä¸åŠæ ¼            student.attendance &lt; 0.8,  # å‡ºå‹¤ç‡ä½            student.behavior &lt; 70  # è¡Œä¸ºè¡¨ç°å·®        ]                needs_attention = any(warning_conditions)                results[student.name] = {            'is_excellent': is_excellent,            'needs_attention': needs_attention,            'avg_grade': sum(student.grades) / len(student.grades),            'attendance': student.attendance,            'behavior': student.behavior        }        return results# æµ‹è¯•å­¦ç”Ÿæ•°æ®students = [    Student('å¼ ä¸‰', [85, 92, 78, 88], 0.96, 90),  # ä¼˜ç§€å­¦ç”Ÿ    Student('æå››', [45, 55, 62, 58], 0.75, 65),  # éœ€è¦å…³æ³¨    Student('ç‹äº”', [88, 85, 90, 87], 0.92, 85),  # è¡¨ç°è‰¯å¥½    Student('èµµå…­', [95, 88, 92, 90], 0.98, 95),  # éå¸¸ä¼˜ç§€]evaluation = evaluate_student_performance(students)print(\"å­¦ç”Ÿè¡¨ç°è¯„ä¼°:\")for name, result in evaluation.items():    print(f\"\\n{name}:\")    print(f\"  ä¼˜ç§€å­¦ç”Ÿ: {'æ˜¯' if result['is_excellent'] else 'å¦'}\")    print(f\"  éœ€è¦å…³æ³¨: {'æ˜¯' if result['needs_attention'] else 'å¦'}\")    print(f\"  å¹³å‡æˆç»©: {result['avg_grade']:.1f}\")    print(f\"  å‡ºå‹¤ç‡: {result['attendance']:.1%}\")    print(f\"  è¡Œä¸ºè¯„åˆ†: {result['behavior']}\")# é…ç½®éªŒè¯def validate_configuration(config):    \"\"\"éªŒè¯é…ç½®æ–‡ä»¶\"\"\"    errors = []    warnings = []        # å¿…éœ€é…ç½®é¡¹    required_keys = ['database', 'api', 'logging']    missing_keys = [key for key in required_keys if key not in config]        if any(missing_keys):        errors.append(f\"ç¼ºå°‘å¿…éœ€é…ç½®é¡¹: {', '.join(missing_keys)}\")        # æ•°æ®åº“é…ç½®éªŒè¯    if 'database' in config:        db_config = config['database']        db_required = ['host', 'port', 'name']        db_missing = [key for key in db_required if key not in db_config]                if any(db_missing):            errors.append(f\"æ•°æ®åº“é…ç½®ç¼ºå°‘: {', '.join(db_missing)}\")                # ç«¯å£èŒƒå›´æ£€æŸ¥        port = db_config.get('port')        if port and not (1 &lt;= port &lt;= 65535):            errors.append(\"æ•°æ®åº“ç«¯å£è¶…å‡ºæœ‰æ•ˆèŒƒå›´\")        # APIé…ç½®éªŒè¯    if 'api' in config:        api_config = config['api']                # æ£€æŸ¥URLæ ¼å¼        base_url = api_config.get('base_url', '')        invalid_url_indicators = [            not base_url.startswith(('http://', 'https://')),            ' ' in base_url,            base_url.endswith('/')        ]                if any(invalid_url_indicators):            warnings.append(\"APIåŸºç¡€URLæ ¼å¼å¯èƒ½ä¸æ­£ç¡®\")        # æ—¥å¿—é…ç½®éªŒè¯    if 'logging' in config:        log_config = config['logging']        valid_levels = ['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL']                level = log_config.get('level', '').upper()        if level and level not in valid_levels:            errors.append(f\"æ— æ•ˆçš„æ—¥å¿—çº§åˆ«: {level}\")        return {        'is_valid': not any(errors),        'has_warnings': any(warnings),        'errors': errors,        'warnings': warnings    }# æµ‹è¯•é…ç½®test_configs = [    {        'database': {'host': 'localhost', 'port': 5432, 'name': 'mydb'},        'api': {'base_url': 'https://api.example.com', 'timeout': 30},        'logging': {'level': 'INFO', 'file': 'app.log'}    },    {        'database': {'host': 'localhost'},  # ç¼ºå°‘portå’Œname        'api': {'base_url': 'invalid url with spaces/'},  # æ— æ•ˆURL        'logging': {'level': 'INVALID'}  # æ— æ•ˆæ—¥å¿—çº§åˆ«    },    {        'api': {'base_url': 'https://api.example.com'},        # ç¼ºå°‘databaseå’Œloggingé…ç½®    }]for i, config in enumerate(test_configs):    print(f\"\\né…ç½® {i+1} éªŒè¯ç»“æœ:\")    validation = validate_configuration(config)        print(f\"  æœ‰æ•ˆ: {'æ˜¯' if validation['is_valid'] else 'å¦'}\")    print(f\"  æœ‰è­¦å‘Š: {'æ˜¯' if validation['has_warnings'] else 'å¦'}\")        if validation['errors']:        print(\"  é”™è¯¯:\")        for error in validation['errors']:            print(f\"    - {error}\")        if validation['warnings']:        print(\"  è­¦å‘Š:\")        for warning in validation['warnings']:            print(f\"    - {warning}\")âš ï¸ æ³¨æ„äº‹é¡¹  any() ä½¿ç”¨çŸ­è·¯æ±‚å€¼ï¼Œé‡åˆ°ç¬¬ä¸€ä¸ªçœŸå€¼å°±è¿”å›True  ç©ºå¯è¿­ä»£å¯¹è±¡è¿”å›False  ä¸ç”Ÿæˆå™¨è¡¨è¾¾å¼ç»“åˆä½¿ç”¨æ—¶è¦æ³¨æ„æ€§èƒ½  ç†è§£Pythonçš„çœŸå€¼æµ‹è¯•è§„åˆ™å¾ˆé‡è¦# å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ# 1. ç©ºåºåˆ—çš„å¤„ç†empty_cases = [    [],    (),    '',    set(),    {}]print(\"ç©ºåºåˆ—çš„any()ç»“æœ:\")for case in empty_cases:    result = any(case)    print(f\"any({case!r}) = {result}\")# 2. æ•°å­—0çš„å¤„ç†number_cases = [    [0],    [0, 0, 0],    [0, 1],    [0.0],    [0, 0.0, False]]print(\"\\nåŒ…å«0çš„åºåˆ—:\")for case in number_cases:    result = any(case)    print(f\"any({case}) = {result}\")# 3. å­—ç¬¦ä¸²çš„å¤„ç†string_cases = [    [''],    ['', ''],    ['', 'hello'],    ['0'],  # å­—ç¬¦ä¸²'0'æ˜¯çœŸå€¼    ['False']  # å­—ç¬¦ä¸²'False'ä¹Ÿæ˜¯çœŸå€¼]print(\"\\nå­—ç¬¦ä¸²åºåˆ—:\")for case in string_cases:    result = any(case)    print(f\"any({case}) = {result}\")# 4. ç”Ÿæˆå™¨è¡¨è¾¾å¼çš„æ€§èƒ½è€ƒè™‘import timedef slow_check(x):    \"\"\"æ¨¡æ‹Ÿæ…¢é€Ÿæ£€æŸ¥\"\"\"    time.sleep(0.01)    return x &gt; 50large_numbers = list(range(100))# ä½¿ç”¨any()withç”Ÿæˆå™¨ï¼ˆæ¨èï¼‰start = time.time()result1 = any(slow_check(x) for x in large_numbers)time1 = time.time() - start# ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ï¼ˆä¸æ¨èï¼‰start = time.time()result2 = any([slow_check(x) for x in large_numbers])time2 = time.time() - startprint(f\"\\næ€§èƒ½æ¯”è¾ƒ:\")print(f\"ç”Ÿæˆå™¨è¡¨è¾¾å¼: {time1:.3f}ç§’\")print(f\"åˆ—è¡¨æ¨å¯¼å¼: {time2:.3f}ç§’\")print(f\"ç”Ÿæˆå™¨æ›´å¿«: {time2/time1:.1f}å€\")# 5. è‡ªå®šä¹‰å¯¹è±¡çš„çœŸå€¼æµ‹è¯•class CustomObject:    def __init__(self, value):        self.value = value        def __bool__(self):        return self.value &gt; 0        def __repr__(self):        return f\"CustomObject({self.value})\"custom_objects = [    CustomObject(-1),    CustomObject(0),    CustomObject(1)]print(f\"\\nè‡ªå®šä¹‰å¯¹è±¡:\")for obj in custom_objects:    print(f\"bool({obj}) = {bool(obj)}\")print(f\"any({custom_objects}) = {any(custom_objects)}\")# 6. ä¸all()çš„ç»„åˆä½¿ç”¨def complex_validation(data_sets):    \"\"\"å¤æ‚çš„æ•°æ®éªŒè¯\"\"\"    # æ£€æŸ¥æ˜¯å¦æ‰€æœ‰æ•°æ®é›†éƒ½è‡³å°‘æœ‰ä¸€ä¸ªæœ‰æ•ˆå€¼    all_have_valid = all(any(x &gt; 0 for x in dataset) for dataset in data_sets)        # æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ•°æ®é›†å®Œå…¨æ— æ•ˆ    any_completely_invalid = any(all(x &lt;= 0 for x in dataset) for dataset in data_sets)        return {        'all_have_valid': all_have_valid,        'any_completely_invalid': any_completely_invalid    }test_data_sets = [    [1, 2, 3],      # å…¨éƒ¨æœ‰æ•ˆ    [-1, 0, 2],     # éƒ¨åˆ†æœ‰æ•ˆ    [-1, -2, -3]    # å…¨éƒ¨æ— æ•ˆ]validation_result = complex_validation(test_data_sets)print(f\"\\nå¤æ‚éªŒè¯ç»“æœ:\")print(f\"æ‰€æœ‰æ•°æ®é›†éƒ½æœ‰æœ‰æ•ˆå€¼: {validation_result['all_have_valid']}\")print(f\"å­˜åœ¨å®Œå…¨æ— æ•ˆçš„æ•°æ®é›†: {validation_result['any_completely_invalid']}\")ğŸ”— ç›¸å…³å†…å®¹  all() - é€»è¾‘ä¸å‡½æ•°  bool() - å¸ƒå°”å€¼å‡½æ•°  filter() - è¿‡æ»¤å‡½æ•°  map() - æ˜ å°„å‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - any()  PythonçœŸå€¼æµ‹è¯•  å¸ƒå°”è¿ç®—ğŸ·ï¸ æ ‡ç­¾é€»è¾‘åˆ¤æ–­ å¸ƒå°”å€¼ è¿­ä»£å™¨ çŸ­è·¯æ±‚å€¼ æ¡ä»¶æ£€æŸ¥æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/any/",
        "category": "builtins",
        "tags": ["é€»è¾‘åˆ¤æ–­","å¸ƒå°”å€¼","è¿­ä»£å™¨"]
      }
      
    
  
    
      ,
      {
        "title": "bool() - å¸ƒå°”è½¬æ¢å‡½æ•°",
        "content": "bool() - å¸ƒå°”è½¬æ¢å‡½æ•°ğŸ“ æ¦‚è¿°bool() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºå°†å€¼è½¬æ¢ä¸ºå¸ƒå°”ç±»å‹ï¼ˆTrueæˆ–Falseï¼‰ã€‚å®ƒæ˜¯Pythoné€»è¾‘åˆ¤æ–­çš„åŸºç¡€ï¼Œéµå¾ªPythonçš„çœŸå€¼æµ‹è¯•è§„åˆ™ï¼Œå¹¿æ³›åº”ç”¨äºæ¡ä»¶åˆ¤æ–­å’Œé€»è¾‘è¿ç®—ä¸­ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡bool()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£Pythonçš„çœŸå€¼æµ‹è¯•è§„åˆ™  å­¦ä¼šåˆ¤æ–­ä¸åŒæ•°æ®ç±»å‹çš„çœŸå‡å€¼  äº†è§£å¸ƒå°”å€¼åœ¨é€»è¾‘è¿ç®—ä¸­çš„åº”ç”¨ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  æ¡ä»¶è¯­å¥åŸºç¡€  é€»è¾‘è¿ç®—ç¬¦æ¦‚å¿µğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µbool() å‡½æ•°æ ¹æ®Pythonçš„çœŸå€¼æµ‹è¯•è§„åˆ™å°†è¾“å…¥å€¼è½¬æ¢ä¸ºå¸ƒå°”å€¼ã€‚åœ¨Pythonä¸­ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªçœŸå€¼ï¼Œå¯ä»¥åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚è¯­æ³•æ ¼å¼# æ— å‚æ•°è°ƒç”¨ï¼Œè¿”å›Falsebool()# è½¬æ¢å€¼ä¸ºå¸ƒå°”ç±»å‹bool(x)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  x      any      å¦      æ—       è¦è½¬æ¢çš„å€¼      è¿”å›å€¼  ç±»å‹: bool  è¯´æ˜: Trueæˆ–FalseğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# æ— å‚æ•°è°ƒç”¨result = bool()  # è¿”å› Falseprint(f\"æ— å‚æ•°è°ƒç”¨: {result}\")  # è¾“å‡º: æ— å‚æ•°è°ƒç”¨: Falseprint(f\"ç±»å‹: {type(result)}\")  # è¾“å‡º: ç±»å‹: &lt;class 'bool'&gt;# æ•°å€¼è½¬æ¢print(f\"bool(0): {bool(0)}\")        # è¾“å‡º: bool(0): Falseprint(f\"bool(1): {bool(1)}\")        # è¾“å‡º: bool(1): Trueprint(f\"bool(-1): {bool(-1)}\")      # è¾“å‡º: bool(-1): Trueprint(f\"bool(0.0): {bool(0.0)}\")    # è¾“å‡º: bool(0.0): Falseprint(f\"bool(3.14): {bool(3.14)}\")  # è¾“å‡º: bool(3.14): True# å­—ç¬¦ä¸²è½¬æ¢print(f\"bool(''): {bool('')}\")           # è¾“å‡º: bool(''): Falseprint(f\"bool('hello'): {bool('hello')}\") # è¾“å‡º: bool('hello'): Trueprint(f\"bool(' '): {bool(' ')}\")         # è¾“å‡º: bool(' '): True (ç©ºæ ¼ä¸æ˜¯ç©ºå­—ç¬¦ä¸²)å®¹å™¨ç±»å‹çš„çœŸå€¼æµ‹è¯•# åˆ—è¡¨print(f\"bool([]): {bool([])}\")           # è¾“å‡º: bool([]): False (ç©ºåˆ—è¡¨)print(f\"bool([1, 2]): {bool([1, 2])}\")   # è¾“å‡º: bool([1, 2]): True (éç©ºåˆ—è¡¨)print(f\"bool([0]): {bool([0])}\")         # è¾“å‡º: bool([0]): True (åŒ…å«å…ƒç´ ï¼Œå³ä½¿æ˜¯0)# å­—å…¸print(f\"bool({{}}): {bool({})}\")         # è¾“å‡º: bool({}): False (ç©ºå­—å…¸)print(f\"bool({{'a': 1}}): {bool({'a': 1})}\") # è¾“å‡º: bool({'a': 1}): True (éç©ºå­—å…¸)# å…ƒç»„print(f\"bool(()): {bool(())}\")           # è¾“å‡º: bool(()): False (ç©ºå…ƒç»„)print(f\"bool((1,)): {bool((1,))}\")       # è¾“å‡º: bool((1,)): True (éç©ºå…ƒç»„)# é›†åˆprint(f\"bool(set()): {bool(set())}\")     # è¾“å‡º: bool(set()): False (ç©ºé›†åˆ)print(f\"bool({{1, 2}}): {bool({1, 2})}\") # è¾“å‡º: bool({1, 2}): True (éç©ºé›†åˆ)ç‰¹æ®Šå€¼çš„çœŸå€¼æµ‹è¯•# Noneå€¼print(f\"bool(None): {bool(None)}\")       # è¾“å‡º: bool(None): False# å¸ƒå°”å€¼æœ¬èº«print(f\"bool(True): {bool(True)}\")       # è¾“å‡º: bool(True): Trueprint(f\"bool(False): {bool(False)}\")     # è¾“å‡º: bool(False): False# å¤æ•°print(f\"bool(0+0j): {bool(0+0j)}\")       # è¾“å‡º: bool(0+0j): Falseprint(f\"bool(1+0j): {bool(1+0j)}\")       # è¾“å‡º: bool(1+0j): Trueprint(f\"bool(0+1j): {bool(0+1j)}\")       # è¾“å‡º: bool(0+1j): True# å‡½æ•°å’Œç±»def my_function():    passclass MyClass:    passprint(f\"bool(my_function): {bool(my_function)}\") # è¾“å‡º: bool(my_function): Trueprint(f\"bool(MyClass): {bool(MyClass)}\")         # è¾“å‡º: bool(MyClass): Trueè‡ªå®šä¹‰å¯¹è±¡çš„çœŸå€¼æµ‹è¯•class CustomObject:    def __init__(self, value):        self.value = value        def __bool__(self):        \"\"\"è‡ªå®šä¹‰çœŸå€¼æµ‹è¯•\"\"\"        return self.value &gt; 0        def __str__(self):        return f\"CustomObject({self.value})\"class LegacyObject:    def __init__(self, items):        self.items = items        def __len__(self):        \"\"\"å¦‚æœæ²¡æœ‰__bool__ï¼Œä¼šä½¿ç”¨__len__\"\"\"        return len(self.items)        def __str__(self):        return f\"LegacyObject({self.items})\"class AlwaysTrueObject:    \"\"\"æ²¡æœ‰å®šä¹‰__bool__æˆ–__len__çš„å¯¹è±¡æ€»æ˜¯True\"\"\"    def __init__(self, data):        self.data = data        def __str__(self):        return f\"AlwaysTrueObject({self.data})\"# æµ‹è¯•è‡ªå®šä¹‰å¯¹è±¡objects = [    CustomObject(5),      # __bool__è¿”å›True    CustomObject(0),      # __bool__è¿”å›False    CustomObject(-3),     # __bool__è¿”å›False    LegacyObject([1, 2]), # __len__è¿”å›2ï¼Œè½¬æ¢ä¸ºTrue    LegacyObject([]),     # __len__è¿”å›0ï¼Œè½¬æ¢ä¸ºFalse    AlwaysTrueObject(None), # æ²¡æœ‰ç‰¹æ®Šæ–¹æ³•ï¼Œæ€»æ˜¯True]for obj in objects:    print(f\"bool({obj}): {bool(obj)}\")å®é™…æ¡ˆä¾‹ï¼šæ•°æ®éªŒè¯def validate_user_data(user_data):    \"\"\"éªŒè¯ç”¨æˆ·æ•°æ®çš„å®Œæ•´æ€§\"\"\"    validation_results = {}        # æ£€æŸ¥å¿…éœ€å­—æ®µ    required_fields = ['name', 'email', 'age']    for field in required_fields:        value = user_data.get(field)        validation_results[f'{field}_exists'] = bool(value)                # æ›´è¯¦ç»†çš„éªŒè¯        if field == 'name':            validation_results['name_valid'] = bool(value and len(value.strip()) &gt; 0)        elif field == 'email':            validation_results['email_valid'] = bool(value and '@' in value)        elif field == 'age':            validation_results['age_valid'] = bool(value and isinstance(value, int) and value &gt; 0)        # æ£€æŸ¥å¯é€‰å­—æ®µ    optional_fields = ['phone', 'address', 'bio']    for field in optional_fields:        value = user_data.get(field)        validation_results[f'{field}_provided'] = bool(value)        # æ€»ä½“éªŒè¯ç»“æœ    validation_results['all_required_valid'] = all([        validation_results['name_valid'],        validation_results['email_valid'],        validation_results['age_valid']    ])        return validation_results# æµ‹è¯•æ•°æ®test_users = [    {'name': 'å¼ ä¸‰', 'email': 'zhangsan@example.com', 'age': 25, 'phone': '123456789'},    {'name': '', 'email': 'invalid-email', 'age': -5},    {'name': 'æå››', 'email': 'lisi@example.com'},  # ç¼ºå°‘age    {'name': 'ç‹äº”', 'email': 'wangwu@example.com', 'age': 30, 'bio': 'è¿™æ˜¯ä¸ªäººç®€ä»‹'}]for i, user in enumerate(test_users, 1):    print(f\"\\nç”¨æˆ· {i}: {user}\")    results = validate_user_data(user)    for key, value in results.items():        print(f\"  {key}: {value}\")æ¡ä»¶åˆ¤æ–­ä¸­çš„åº”ç”¨def smart_print(data):    \"\"\"æ™ºèƒ½æ‰“å°å‡½æ•°ï¼Œæ ¹æ®æ•°æ®ç±»å‹å’Œå†…å®¹å†³å®šè¾“å‡ºæ ¼å¼\"\"\"    if not bool(data):  # ç­‰ä»·äº if not data:        print(\"æ•°æ®ä¸ºç©ºæˆ–å‡å€¼\")        return        if isinstance(data, str):        print(f\"å­—ç¬¦ä¸²: '{data}'\")    elif isinstance(data, (list, tuple)):        if len(data) == 1:            print(f\"å•å…ƒç´ åºåˆ—: {data}\")        else:            print(f\"å¤šå…ƒç´ åºåˆ—: {data[:3]}{'...' if len(data) &gt; 3 else ''}\")    elif isinstance(data, dict):        print(f\"å­—å…¸ï¼ŒåŒ…å« {len(data)} ä¸ªé”®\")    elif isinstance(data, (int, float)):        print(f\"æ•°å€¼: {data}\")    else:        print(f\"å…¶ä»–ç±»å‹: {type(data).__name__}\")# æµ‹è¯•æ•°æ®test_data = [    \"\",           # ç©ºå­—ç¬¦ä¸²    \"hello\",      # éç©ºå­—ç¬¦ä¸²    [],           # ç©ºåˆ—è¡¨    [1, 2, 3],    # éç©ºåˆ—è¡¨    {},           # ç©ºå­—å…¸    {'a': 1},     # éç©ºå­—å…¸    0,            # é›¶å€¼    42,           # éé›¶å€¼    None,         # Noneå€¼    False,        # Falseå€¼    True,         # Trueå€¼]for data in test_data:    print(f\"\\nè¾“å…¥: {repr(data)}\")    smart_print(data)é€»è¾‘è¿ç®—ä¼˜åŒ–def efficient_data_processing(data_sources):    \"\"\"é«˜æ•ˆçš„æ•°æ®å¤„ç†ï¼Œä½¿ç”¨çŸ­è·¯æ±‚å€¼\"\"\"    results = []        for source in data_sources:        # ä½¿ç”¨bool()è¿›è¡Œæ˜¾å¼æ£€æŸ¥        if not bool(source.get('enabled', True)):            print(f\"è·³è¿‡ç¦ç”¨çš„æ•°æ®æº: {source.get('name', 'Unknown')}\")            continue                # çŸ­è·¯æ±‚å€¼ï¼šå¦‚æœæ•°æ®ä¸ºç©ºï¼Œä¸è¿›è¡Œåç»­å¤„ç†        data = source.get('data')        if not bool(data):  # ç­‰ä»·äº if not data:            print(f\"æ•°æ®æº {source.get('name')} æ— æ•°æ®\")            continue                # æ¡ä»¶é“¾ï¼šä½¿ç”¨andçš„çŸ­è·¯ç‰¹æ€§        if (bool(source.get('validated')) and             bool(source.get('processed')) and             len(data) &gt; 0):                        results.append({                'name': source.get('name'),                'count': len(data),                'sample': data[:3]            })        return results# æµ‹è¯•æ•°æ®æºdata_sources = [    {        'name': 'source1',        'enabled': True,        'validated': True,        'processed': True,        'data': [1, 2, 3, 4, 5]    },    {        'name': 'source2',        'enabled': False,  # ç¦ç”¨        'data': [6, 7, 8]    },    {        'name': 'source3',        'enabled': True,        'validated': False,  # æœªéªŒè¯        'data': [9, 10]    },    {        'name': 'source4',        'enabled': True,        'validated': True,        'processed': True,        'data': []  # ç©ºæ•°æ®    }]results = efficient_data_processing(data_sources)print(f\"\\nå¤„ç†ç»“æœ: {results}\")âš ï¸ æ³¨æ„äº‹é¡¹çœŸå€¼æµ‹è¯•è§„åˆ™æ€»ç»“# Pythonä¸­è¢«è®¤ä¸ºæ˜¯Falseçš„å€¼falsy_values = [    None,    False,    0,           # æ•´æ•°é›¶    0.0,         # æµ®ç‚¹æ•°é›¶    0j,          # å¤æ•°é›¶    '',          # ç©ºå­—ç¬¦ä¸²    [],          # ç©ºåˆ—è¡¨    (),          # ç©ºå…ƒç»„    {},          # ç©ºå­—å…¸    set(),       # ç©ºé›†åˆ    frozenset(), # ç©ºå†»ç»“é›†åˆ]print(\"å‡å€¼åˆ—è¡¨:\")for value in falsy_values:    print(f\"  {repr(value):15} -&gt; {bool(value)}\")print(\"\\né™¤äº†ä¸Šè¿°å€¼ï¼Œå…¶ä»–æ‰€æœ‰å€¼éƒ½è¢«è®¤ä¸ºæ˜¯True\")å¸¸è§è¯¯åŒº# è¯¯åŒº1ï¼šå­—ç¬¦ä¸²\"False\"ä¸ç­‰äºFalseprint(f\"bool('False'): {bool('False')}\")  # Trueï¼Œå› ä¸ºæ˜¯éç©ºå­—ç¬¦ä¸²print(f\"bool('0'): {bool('0')}\")          # Trueï¼Œå› ä¸ºæ˜¯éç©ºå­—ç¬¦ä¸²# è¯¯åŒº2ï¼šåŒ…å«å‡å€¼çš„å®¹å™¨ä»ç„¶æ˜¯çœŸå€¼print(f\"bool([0]): {bool([0])}\")          # Trueï¼Œåˆ—è¡¨éç©ºprint(f\"bool([False]): {bool([False])}\")  # Trueï¼Œåˆ—è¡¨éç©ºprint(f\"bool([None]): {bool([None])}\")    # Trueï¼Œåˆ—è¡¨éç©º# è¯¯åŒº3ï¼šæ•°å€¼æ¯”è¾ƒå’Œå¸ƒå°”è½¬æ¢çš„åŒºåˆ«print(f\"0 == False: {0 == False}\")        # Trueï¼Œå€¼ç›¸ç­‰print(f\"0 is False: {0 is False}\")        # Falseï¼Œä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡print(f\"bool(0) is False: {bool(0) is False}\")  # Trueï¼Œéƒ½æ˜¯Falseå¯¹è±¡# è¯¯åŒº4ï¼šæµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜print(f\"bool(0.1 + 0.2 - 0.3): {bool(0.1 + 0.2 - 0.3)}\")  # Trueï¼Œå› ä¸ºä¸ç­‰äº0print(f\"0.1 + 0.2 - 0.3: {0.1 + 0.2 - 0.3}\")  # æ˜¾ç¤ºå®é™…å€¼æ€§èƒ½è€ƒè™‘import time# æ€§èƒ½æ¯”è¾ƒï¼šæ˜¾å¼bool()è°ƒç”¨ vs éšå¼è½¬æ¢data = list(range(100000))# æ–¹æ³•1ï¼šæ˜¾å¼ä½¿ç”¨bool()start_time = time.time()results1 = [bool(x) for x in data]time1 = time.time() - start_time# æ–¹æ³•2ï¼šéšå¼å¸ƒå°”è½¬æ¢start_time = time.time()results2 = [not not x for x in data]  # åŒé‡å¦å®šå®ç°å¸ƒå°”è½¬æ¢time2 = time.time() - start_time# æ–¹æ³•3ï¼šç›´æ¥æ¯”è¾ƒstart_time = time.time()results3 = [x != 0 for x in data]time3 = time.time() - start_timeprint(f\"bool()å‡½æ•°è€—æ—¶: {time1:.4f}ç§’\")print(f\"åŒé‡å¦å®šè€—æ—¶: {time2:.4f}ç§’\")print(f\"ç›´æ¥æ¯”è¾ƒè€—æ—¶: {time3:.4f}ç§’\")# åœ¨æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œé€šå¸¸ä¸éœ€è¦æ˜¾å¼è°ƒç”¨bool()# æ¨èå†™æ³•if data:  # è€Œä¸æ˜¯ if bool(data):    print(\"æ•°æ®å­˜åœ¨\")ğŸ”— ç›¸å…³å†…å®¹ç›¸å…³å‡½æ•°  int() - æ•´æ•°è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºæ•´æ•°  float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºæµ®ç‚¹æ•°  str() - å­—ç¬¦ä¸²è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºå­—ç¬¦ä¸²  any() - é€»è¾‘æˆ–å‡½æ•° - æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä¸€å…ƒç´ ä¸ºçœŸ  all() - é€»è¾‘ä¸å‡½æ•° - æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½ä¸ºçœŸé€»è¾‘è¿ç®—  é€»è¾‘è¿ç®—ç¬¦ - and, or, notè¿ç®—ç¬¦  æ¡ä»¶è¯­å¥ - if, elif, elseè¯­å¥  æ¯”è¾ƒè¿ç®—ç¬¦ - æ¯”è¾ƒè¿ç®—è¯¦è§£ç›¸å…³æ¦‚å¿µ  Pythonæ•°æ®ç±»å‹ - åŸºæœ¬æ•°æ®ç±»å‹  çœŸå€¼æµ‹è¯• - çœŸå€¼æµ‹è¯•è¯¦è§£  çŸ­è·¯æ±‚å€¼ - é€»è¾‘è¿ç®—ä¼˜åŒ–ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - bool()  PythonçœŸå€¼æµ‹è¯•  å¸ƒå°”è¿ç®—  æ¡ä»¶è¡¨è¾¾å¼ğŸ·ï¸ æ ‡ç­¾ç±»å‹è½¬æ¢ å¸ƒå°”å€¼ çœŸå€¼æµ‹è¯• é€»è¾‘åˆ¤æ–­ æ¡ä»¶è¯­å¥æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/bool/",
        "category": "builtins",
        "tags": ["ç±»å‹è½¬æ¢","å¸ƒå°”å€¼","é€»è¾‘åˆ¤æ–­"]
      }
      
    
  
    
      ,
      {
        "title": "bytes() - å­—èŠ‚å¯¹è±¡æ„é€ å‡½æ•°",
        "content": "bytes() - å­—èŠ‚å¯¹è±¡æ„é€ å‡½æ•°ğŸ“ æ¦‚è¿°bytes() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä¸å¯å˜çš„å­—èŠ‚åºåˆ—å¯¹è±¡ã€‚å­—èŠ‚å¯¹è±¡æ˜¯ç”±0-255èŒƒå›´å†…çš„æ•´æ•°ç»„æˆçš„åºåˆ—ï¼Œä¸»è¦ç”¨äºå¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€æ–‡ä»¶I/Oã€ç½‘ç»œé€šä¿¡ã€ç¼–ç è½¬æ¢ç­‰åœºæ™¯ã€‚ä¸å­—ç¬¦ä¸²ä¸åŒï¼Œå­—èŠ‚å¯¹è±¡ç›´æ¥è¡¨ç¤ºåŸå§‹çš„äºŒè¿›åˆ¶æ•°æ®ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡bytes()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œè¯­æ³•  ç†è§£å­—èŠ‚å¯¹è±¡ä¸å­—ç¬¦ä¸²çš„åŒºåˆ«å’Œè”ç³»  å­¦ä¼šå­—èŠ‚å¯¹è±¡çš„ç¼–ç å’Œè§£ç æ“ä½œ  äº†è§£å­—èŠ‚å¯¹è±¡åœ¨æ–‡ä»¶å¤„ç†å’Œç½‘ç»œç¼–ç¨‹ä¸­çš„åº”ç”¨  æŒæ¡å­—èŠ‚å¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•å’Œæ“ä½œğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  å­—ç¬¦ä¸²çš„åŸºæœ¬æ¦‚å¿µå’Œæ“ä½œ  ç¼–ç ï¼ˆå¦‚UTF-8ã€ASCIIï¼‰çš„åŸºæœ¬æ¦‚å¿µ  äºŒè¿›åˆ¶å’Œåå…­è¿›åˆ¶æ•°çš„åŸºæœ¬çŸ¥è¯†  å¯è¿­ä»£å¯¹è±¡çš„æ¦‚å¿µğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µå­—èŠ‚å¯¹è±¡ï¼ˆbytesï¼‰æ˜¯ä¸å¯å˜çš„å­—èŠ‚åºåˆ—ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯0-255èŒƒå›´å†…çš„æ•´æ•°ã€‚å®ƒæ˜¯Pythonä¸­å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„ä¸»è¦æ•°æ®ç±»å‹ï¼Œä¸å­—ç¬¦ä¸²ç±»ä¼¼ä½†ä¸“é—¨ç”¨äºäºŒè¿›åˆ¶æ•°æ®ã€‚è¯­æ³•æ ¼å¼bytes([source[, encoding[, errors]]])å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  source      å¤šç§ç±»å‹      å¦      æ—       æ•°æ®æºï¼šå­—ç¬¦ä¸²ã€å¯è¿­ä»£å¯¹è±¡ã€æ•´æ•°æˆ–ç¼“å†²åŒºå¯¹è±¡              encoding      å­—ç¬¦ä¸²      å¦      æ—       å½“sourceä¸ºå­—ç¬¦ä¸²æ—¶çš„ç¼–ç æ–¹å¼              errors      å­—ç¬¦ä¸²      å¦      â€˜strictâ€™      ç¼–ç é”™è¯¯çš„å¤„ç†æ–¹å¼      è¿”å›å€¼  ç±»å‹: byteså¯¹è±¡  å†…å®¹: ä¸å¯å˜çš„å­—èŠ‚åºåˆ—ğŸ’¡ ä»£ç ç¤ºä¾‹åŸºæœ¬ç”¨æ³•# åˆ›å»ºç©ºçš„å­—èŠ‚å¯¹è±¡empty_bytes = bytes()print(empty_bytes)  # è¾“å‡º: b''print(type(empty_bytes))  # è¾“å‡º: &lt;class 'bytes'&gt;print(len(empty_bytes))  # è¾“å‡º: 0# ä»æ•´æ•°åˆ›å»ºæŒ‡å®šé•¿åº¦çš„é›¶å­—èŠ‚zero_bytes = bytes(5)print(zero_bytes)  # è¾“å‡º: b'\\x00\\x00\\x00\\x00\\x00'print(len(zero_bytes))  # è¾“å‡º: 5# ä»æ•´æ•°åˆ—è¡¨åˆ›å»ºå­—èŠ‚å¯¹è±¡int_list = [65, 66, 67, 68, 69]  # ASCIIç bytes_from_list = bytes(int_list)print(bytes_from_list)  # è¾“å‡º: b'ABCDE'# ä»èŒƒå›´å¯¹è±¡åˆ›å»ºå­—èŠ‚å¯¹è±¡bytes_from_range = bytes(range(65, 70))print(bytes_from_range)  # è¾“å‡º: b'ABCDE'# å­—èŠ‚å­—é¢é‡literal_bytes = b'Hello, World!'print(literal_bytes)  # è¾“å‡º: b'Hello, World!'print(type(literal_bytes))  # è¾“å‡º: &lt;class 'bytes'&gt;ä»å­—ç¬¦ä¸²åˆ›å»ºå­—èŠ‚å¯¹è±¡# ä»å­—ç¬¦ä¸²åˆ›å»ºå­—èŠ‚å¯¹è±¡ï¼ˆéœ€è¦æŒ‡å®šç¼–ç ï¼‰text = \"Hello, ä¸–ç•Œ!\"# UTF-8ç¼–ç utf8_bytes = bytes(text, 'utf-8')print(f\"UTF-8ç¼–ç : {utf8_bytes}\")print(f\"é•¿åº¦: {len(utf8_bytes)}å­—èŠ‚\")# ASCIIç¼–ç ï¼ˆä¼šå‡ºé”™ï¼Œå› ä¸ºåŒ…å«éASCIIå­—ç¬¦ï¼‰try:    ascii_bytes = bytes(text, 'ascii')except UnicodeEncodeError as e:    print(f\"ASCIIç¼–ç é”™è¯¯: {e}\")# ä½¿ç”¨é”™è¯¯å¤„ç†ascii_bytes_ignore = bytes(text, 'ascii', errors='ignore')print(f\"ASCIIç¼–ç ï¼ˆå¿½ç•¥é”™è¯¯ï¼‰: {ascii_bytes_ignore}\")ascii_bytes_replace = bytes(text, 'ascii', errors='replace')print(f\"ASCIIç¼–ç ï¼ˆæ›¿æ¢é”™è¯¯ï¼‰: {ascii_bytes_replace}\")# ä¸åŒç¼–ç çš„æ¯”è¾ƒtext_simple = \"Hello\"print(f\"åŸæ–‡æœ¬: {text_simple}\")print(f\"UTF-8: {bytes(text_simple, 'utf-8')}\")print(f\"ASCII: {bytes(text_simple, 'ascii')}\")print(f\"Latin-1: {bytes(text_simple, 'latin-1')}\")å­—èŠ‚å¯¹è±¡çš„åŸºæœ¬æ“ä½œ# å­—èŠ‚å¯¹è±¡çš„åŸºæœ¬æ“ä½œdata = b'Hello, World!'# é•¿åº¦print(f\"é•¿åº¦: {len(data)}\")# ç´¢å¼•è®¿é—®print(f\"ç¬¬ä¸€ä¸ªå­—èŠ‚: {data[0]} (å­—ç¬¦: {chr(data[0])})\")print(f\"æœ€åä¸€ä¸ªå­—èŠ‚: {data[-1]} (å­—ç¬¦: {chr(data[-1])})\")# åˆ‡ç‰‡print(f\"å‰5ä¸ªå­—èŠ‚: {data[:5]}\")print(f\"å6ä¸ªå­—èŠ‚: {data[-6:]}\")print(f\"æ¯éš”2ä¸ªå­—èŠ‚: {data[::2]}\")# éå†å­—èŠ‚å¯¹è±¡print(\"éå†å­—èŠ‚å€¼:\")for i, byte_val in enumerate(data[:5]):    print(f\"  ç´¢å¼•{i}: {byte_val} (0x{byte_val:02x}) '{chr(byte_val)}'\")# æ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªå­—èŠ‚æˆ–å­åºåˆ—print(f\"åŒ…å«å­—èŠ‚72(H): {72 in data}\")print(f\"åŒ…å«å­åºåˆ—b'World': {b'World' in data}\")print(f\"åŒ…å«å­åºåˆ—b'Python': {b'Python' in data}\")# æŸ¥æ‰¾print(f\"'World'çš„ä½ç½®: {data.find(b'World')}\")print(f\"'o'çš„ä½ç½®: {data.find(b'o')}\")print(f\"'xyz'çš„ä½ç½®: {data.find(b'xyz')}\")å­—èŠ‚å¯¹è±¡çš„æ–¹æ³•# å­—èŠ‚å¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•data = b'Hello, World! Hello, Python!'# å¤§å°å†™è½¬æ¢print(f\"åŸå§‹: {data}\")print(f\"å¤§å†™: {data.upper()}\")print(f\"å°å†™: {data.lower()}\")print(f\"æ ‡é¢˜: {data.title()}\")# æ›¿æ¢replaced = data.replace(b'Hello', b'Hi')print(f\"æ›¿æ¢å: {replaced}\")# åˆ†å‰²split_result = data.split(b' ')print(f\"æŒ‰ç©ºæ ¼åˆ†å‰²: {split_result}\")split_comma = data.split(b',')print(f\"æŒ‰é€—å·åˆ†å‰²: {split_comma}\")# è¿æ¥parts = [b'Python', b'is', b'awesome']joined = b' '.join(parts)print(f\"è¿æ¥ç»“æœ: {joined}\")# å»é™¤ç©ºç™½padded_data = b'  Hello, World!  'print(f\"åŸå§‹ï¼ˆå¸¦ç©ºæ ¼ï¼‰: {repr(padded_data)}\")print(f\"å»é™¤ç©ºç™½: {repr(padded_data.strip())}\")print(f\"å»é™¤å·¦ç©ºç™½: {repr(padded_data.lstrip())}\")print(f\"å»é™¤å³ç©ºç™½: {repr(padded_data.rstrip())}\")# åˆ¤æ–­æ–¹æ³•test_data = b'12345'print(f\"æ˜¯å¦å…¨ä¸ºæ•°å­—: {test_data.isdigit()}\")print(f\"æ˜¯å¦å…¨ä¸ºå­—æ¯: {test_data.isalpha()}\")print(f\"æ˜¯å¦å…¨ä¸ºå­—æ¯æ•°å­—: {test_data.isalnum()}\")test_alpha = b'Hello'print(f\"'{test_alpha}'æ˜¯å¦å…¨ä¸ºå­—æ¯: {test_alpha.isalpha()}\")ğŸš€ é«˜çº§åº”ç”¨ç¼–ç å’Œè§£ç # ç¼–ç å’Œè§£ç ç¤ºä¾‹original_text = \"Pythonç¼–ç¨‹ï¼šä»å…¥é—¨åˆ°ç²¾é€š\"print(f\"åŸå§‹æ–‡æœ¬: {original_text}\")# ç¼–ç ä¸ºä¸åŒæ ¼å¼encodings = ['utf-8', 'utf-16', 'utf-32', 'gbk']for encoding in encodings:    try:        encoded = original_text.encode(encoding)        print(f\"\\n{encoding}ç¼–ç :\")        print(f\"  å­—èŠ‚å¯¹è±¡: {encoded}\")        print(f\"  é•¿åº¦: {len(encoded)}å­—èŠ‚\")        print(f\"  åå…­è¿›åˆ¶: {encoded.hex()}\")                # è§£ç å›æ–‡æœ¬        decoded = encoded.decode(encoding)        print(f\"  è§£ç ç»“æœ: {decoded}\")        print(f\"  è§£ç æ­£ç¡®: {decoded == original_text}\")            except UnicodeEncodeError as e:        print(f\"{encoding}ç¼–ç å¤±è´¥: {e}\")# å¤„ç†ç¼–ç é”™è¯¯problematic_text = \"Hello ğŸŒ World\"print(f\"\\né—®é¢˜æ–‡æœ¬: {problematic_text}\")# ä¸åŒçš„é”™è¯¯å¤„ç†ç­–ç•¥error_strategies = ['strict', 'ignore', 'replace', 'xmlcharrefreplace']for strategy in error_strategies:    try:        encoded = problematic_text.encode('ascii', errors=strategy)        print(f\"ASCIIç¼–ç ï¼ˆ{strategy}ï¼‰: {encoded}\")    except UnicodeEncodeError as e:        print(f\"ASCIIç¼–ç ï¼ˆ{strategy}ï¼‰å¤±è´¥: {e}\")äºŒè¿›åˆ¶æ–‡ä»¶å¤„ç†import osimport tempfile# äºŒè¿›åˆ¶æ–‡ä»¶è¯»å†™ç¤ºä¾‹def binary_file_demo():    \"\"\"äºŒè¿›åˆ¶æ–‡ä»¶å¤„ç†æ¼”ç¤º\"\"\"    # åˆ›å»ºä¸´æ—¶æ–‡ä»¶    with tempfile.NamedTemporaryFile(delete=False) as temp_file:        temp_filename = temp_file.name        try:        # å‡†å¤‡äºŒè¿›åˆ¶æ•°æ®        header = b'\\x89PNG\\r\\n\\x1a\\n'  # PNGæ–‡ä»¶å¤´        data = b'This is binary data: ' + bytes(range(256))        footer = b'\\x00\\x00\\x00\\x00IEND\\xaeB`\\x82'  # PNGæ–‡ä»¶å°¾                full_data = header + data + footer                # å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶        with open(temp_filename, 'wb') as f:            f.write(full_data)                print(f\"å†™å…¥äº† {len(full_data)} å­—èŠ‚åˆ°æ–‡ä»¶\")                # è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶        with open(temp_filename, 'rb') as f:            read_data = f.read()                print(f\"ä»æ–‡ä»¶è¯»å–äº† {len(read_data)} å­—èŠ‚\")        print(f\"æ•°æ®ä¸€è‡´: {read_data == full_data}\")                # åˆ†ææ–‡ä»¶å¤´        print(f\"\\næ–‡ä»¶å¤´åˆ†æ:\")        print(f\"  å‰8å­—èŠ‚: {read_data[:8]}\")        print(f\"  åå…­è¿›åˆ¶: {read_data[:8].hex()}\")        print(f\"  æ˜¯å¦ä¸ºPNG: {read_data.startswith(b'\\x89PNG')}\")                # æŸ¥æ‰¾ç‰¹å®šæ¨¡å¼        pattern = b'binary data'        position = read_data.find(pattern)        if position != -1:            print(f\"  æ‰¾åˆ°æ¨¡å¼'{pattern.decode()}'åœ¨ä½ç½®: {position}\")            finally:        # æ¸…ç†ä¸´æ—¶æ–‡ä»¶        if os.path.exists(temp_filename):            os.unlink(temp_filename)binary_file_demo()ç½‘ç»œæ•°æ®å¤„ç†import structimport socketfrom datetime import datetime# ç½‘ç»œåè®®æ•°æ®åŒ…æ„é€ class NetworkPacket:    \"\"\"ç®€å•çš„ç½‘ç»œæ•°æ®åŒ…ç±»\"\"\"        def __init__(self, packet_type, sequence, timestamp, payload):        self.packet_type = packet_type        self.sequence = sequence        self.timestamp = timestamp        self.payload = payload.encode('utf-8') if isinstance(payload, str) else payload        def pack(self):        \"\"\"å°†æ•°æ®åŒ…æ‰“åŒ…ä¸ºå­—èŠ‚åºåˆ—\"\"\"        # åŒ…å¤´æ ¼å¼: ç±»å‹(1å­—èŠ‚) + åºåˆ—å·(4å­—èŠ‚) + æ—¶é—´æˆ³(8å­—èŠ‚) + è½½è·é•¿åº¦(4å­—èŠ‚)        header = struct.pack('!BIQi',                            self.packet_type,                           self.sequence,                            int(self.timestamp),                           len(self.payload))        return header + self.payload        @classmethod    def unpack(cls, data):        \"\"\"ä»å­—èŠ‚åºåˆ—è§£åŒ…æ•°æ®åŒ…\"\"\"        if len(data) &lt; 17:  # æœ€å°åŒ…å¤´é•¿åº¦            raise ValueError(\"æ•°æ®åŒ…å¤ªçŸ­\")                # è§£åŒ…åŒ…å¤´        packet_type, sequence, timestamp, payload_length = struct.unpack('!BIQi', data[:17])                # æ£€æŸ¥è½½è·é•¿åº¦        if len(data) &lt; 17 + payload_length:            raise ValueError(\"è½½è·æ•°æ®ä¸å®Œæ•´\")                # æå–è½½è·        payload = data[17:17+payload_length]                return cls(packet_type, sequence, timestamp, payload)        def __str__(self):        return f\"Packet(type={self.packet_type}, seq={self.sequence}, time={self.timestamp}, payload={len(self.payload)}bytes)\"# ç½‘ç»œæ•°æ®åŒ…ç¤ºä¾‹print(\"ç½‘ç»œæ•°æ®åŒ…å¤„ç†ç¤ºä¾‹:\")# åˆ›å»ºæ•°æ®åŒ…packet1 = NetworkPacket(1, 12345, datetime.now().timestamp(), \"Hello, Network!\")packet2 = NetworkPacket(2, 12346, datetime.now().timestamp(), b\"\\x01\\x02\\x03\\x04\")print(f\"åŸå§‹æ•°æ®åŒ…1: {packet1}\")print(f\"åŸå§‹æ•°æ®åŒ…2: {packet2}\")# æ‰“åŒ…packed1 = packet1.pack()packed2 = packet2.pack()print(f\"\\næ‰“åŒ…å:\")print(f\"  æ•°æ®åŒ…1: {len(packed1)}å­—èŠ‚, åå…­è¿›åˆ¶: {packed1.hex()[:40]}...\")print(f\"  æ•°æ®åŒ…2: {len(packed2)}å­—èŠ‚, åå…­è¿›åˆ¶: {packed2.hex()}\")# è§£åŒ…unpacked1 = NetworkPacket.unpack(packed1)unpacked2 = NetworkPacket.unpack(packed2)print(f\"\\nè§£åŒ…å:\")print(f\"  æ•°æ®åŒ…1: {unpacked1}\")print(f\"  æ•°æ®åŒ…2: {unpacked2}\")# éªŒè¯æ•°æ®å®Œæ•´æ€§print(f\"\\næ•°æ®å®Œæ•´æ€§éªŒè¯:\")print(f\"  åŒ…1è½½è·ä¸€è‡´: {packet1.payload == unpacked1.payload}\")print(f\"  åŒ…2è½½è·ä¸€è‡´: {packet2.payload == unpacked2.payload}\")# æ¨¡æ‹Ÿç½‘ç»œä¼ è¾“def simulate_network_transmission(packets):    \"\"\"æ¨¡æ‹Ÿç½‘ç»œä¼ è¾“\"\"\"    # å°†å¤šä¸ªæ•°æ®åŒ…åˆå¹¶    combined_data = b''    for packet in packets:        packed = packet.pack()        combined_data += packed        print(f\"\\næ¨¡æ‹Ÿç½‘ç»œä¼ è¾“:\")    print(f\"  æ€»æ•°æ®é•¿åº¦: {len(combined_data)}å­—èŠ‚\")        # æ¨¡æ‹Ÿæ¥æ”¶å’Œè§£æ    received_packets = []    offset = 0        while offset &lt; len(combined_data):        try:            packet = NetworkPacket.unpack(combined_data[offset:])            received_packets.append(packet)                        # è®¡ç®—ä¸‹ä¸€ä¸ªæ•°æ®åŒ…çš„åç§»            packet_size = 17 + len(packet.payload)            offset += packet_size                    except ValueError as e:            print(f\"  è§£æé”™è¯¯: {e}\")            break        print(f\"  æˆåŠŸæ¥æ”¶ {len(received_packets)} ä¸ªæ•°æ®åŒ…\")    return received_packets# æµ‹è¯•ç½‘ç»œä¼ è¾“æ¨¡æ‹Ÿtest_packets = [packet1, packet2]received = simulate_network_transmission(test_packets)æ•°æ®åºåˆ—åŒ–å’Œååºåˆ—åŒ–import jsonimport pickleimport base64from datetime import datetime# å¤æ‚æ•°æ®ç»“æ„çš„åºåˆ—åŒ–class DataSerializer:    \"\"\"æ•°æ®åºåˆ—åŒ–å·¥å…·ç±»\"\"\"        @staticmethod    def serialize_json(data):        \"\"\"JSONåºåˆ—åŒ–ï¼ˆæ–‡æœ¬æ ¼å¼ï¼‰\"\"\"        json_str = json.dumps(data, ensure_ascii=False, default=str)        return json_str.encode('utf-8')        @staticmethod    def deserialize_json(data_bytes):        \"\"\"JSONååºåˆ—åŒ–\"\"\"        json_str = data_bytes.decode('utf-8')        return json.loads(json_str)        @staticmethod    def serialize_pickle(data):        \"\"\"Pickleåºåˆ—åŒ–ï¼ˆäºŒè¿›åˆ¶æ ¼å¼ï¼‰\"\"\"        return pickle.dumps(data)        @staticmethod    def deserialize_pickle(data_bytes):        \"\"\"Pickleååºåˆ—åŒ–\"\"\"        return pickle.loads(data_bytes)        @staticmethod    def serialize_base64(data):        \"\"\"Base64ç¼–ç \"\"\"        if isinstance(data, str):            data = data.encode('utf-8')        return base64.b64encode(data)        @staticmethod    def deserialize_base64(data_bytes):        \"\"\"Base64è§£ç \"\"\"        return base64.b64decode(data_bytes)# æµ‹è¯•æ•°æ®test_data = {    'name': 'å¼ ä¸‰',    'age': 30,    'scores': [85, 92, 78],    'metadata': {        'created': datetime.now(),        'tags': ['student', 'python', 'ç¼–ç¨‹']    },    'binary_data': bytes(range(10))}print(\"æ•°æ®åºåˆ—åŒ–ç¤ºä¾‹:\")print(f\"åŸå§‹æ•°æ®: {test_data}\")# JSONåºåˆ—åŒ–ï¼ˆéœ€è¦å¤„ç†ä¸å¯åºåˆ—åŒ–çš„ç±»å‹ï¼‰json_serializable_data = {    'name': test_data['name'],    'age': test_data['age'],    'scores': test_data['scores'],    'metadata': {        'created': test_data['metadata']['created'].isoformat(),        'tags': test_data['metadata']['tags']    },    'binary_data': test_data['binary_data'].hex()  # è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²}json_bytes = DataSerializer.serialize_json(json_serializable_data)print(f\"\\nJSONåºåˆ—åŒ–:\")print(f\"  é•¿åº¦: {len(json_bytes)}å­—èŠ‚\")print(f\"  å†…å®¹: {json_bytes.decode('utf-8')[:100]}...\")# JSONååºåˆ—åŒ–json_restored = DataSerializer.deserialize_json(json_bytes)print(f\"  ååºåˆ—åŒ–: {json_restored['name']}, {json_restored['age']}\")# Pickleåºåˆ—åŒ–ï¼ˆå¯ä»¥å¤„ç†ä»»æ„Pythonå¯¹è±¡ï¼‰pickle_bytes = DataSerializer.serialize_pickle(test_data)print(f\"\\nPickleåºåˆ—åŒ–:\")print(f\"  é•¿åº¦: {len(pickle_bytes)}å­—èŠ‚\")print(f\"  åå…­è¿›åˆ¶: {pickle_bytes.hex()[:50]}...\")# Pickleååºåˆ—åŒ–pickle_restored = DataSerializer.deserialize_pickle(pickle_bytes)print(f\"  ååºåˆ—åŒ–æˆåŠŸ: {pickle_restored['name']}\")print(f\"  æ—¥æœŸå¯¹è±¡: {pickle_restored['metadata']['created']}\")print(f\"  äºŒè¿›åˆ¶æ•°æ®: {pickle_restored['binary_data']}\")# Base64ç¼–ç original_binary = b\"\\x89PNG\\r\\n\\x1a\\nè¿™æ˜¯ä¸€äº›äºŒè¿›åˆ¶æ•°æ®\"base64_encoded = DataSerializer.serialize_base64(original_binary)print(f\"\\nBase64ç¼–ç :\")print(f\"  åŸå§‹: {original_binary}\")print(f\"  ç¼–ç : {base64_encoded}\")print(f\"  ç¼–ç å­—ç¬¦ä¸²: {base64_encoded.decode('ascii')}\")# Base64è§£ç base64_decoded = DataSerializer.deserialize_base64(base64_encoded)print(f\"  è§£ç : {base64_decoded}\")print(f\"  ä¸€è‡´æ€§: {original_binary == base64_decoded}\")âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µç¼–ç é—®é¢˜# å¸¸è§ç¼–ç é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ# é—®é¢˜1ï¼šå¿˜è®°æŒ‡å®šç¼–ç text = \"Hello, ä¸–ç•Œ!\"try:    # é”™è¯¯ï¼šæ²¡æœ‰æŒ‡å®šç¼–ç     wrong_bytes = bytes(text)  # TypeErrorexcept TypeError as e:    print(f\"é”™è¯¯1: {e}\")# æ­£ç¡®åšæ³•correct_bytes = bytes(text, 'utf-8')print(f\"æ­£ç¡®: {correct_bytes}\")# é—®é¢˜2ï¼šç¼–ç ä¸åŒ¹é…utf8_bytes = \"ä¸­æ–‡\".encode('utf-8')print(f\"UTF-8å­—èŠ‚: {utf8_bytes}\")try:    # é”™è¯¯ï¼šç”¨é”™è¯¯çš„ç¼–ç è§£ç     wrong_decode = utf8_bytes.decode('gbk')except UnicodeDecodeError as e:    print(f\"é”™è¯¯2: {e}\")# æ­£ç¡®åšæ³•correct_decode = utf8_bytes.decode('utf-8')print(f\"æ­£ç¡®è§£ç : {correct_decode}\")# é—®é¢˜3ï¼šå¤„ç†ä¸å®Œæ•´çš„å­—èŠ‚åºåˆ—incomplete_utf8 = b'\\xe4\\xb8\\xad'  # \"ä¸­\"çš„UTF-8ç¼–ç çš„å‰3å­—èŠ‚ä¸­çš„3å­—èŠ‚print(f\"å®Œæ•´UTF-8: {incomplete_utf8}\")print(f\"è§£ç : {incomplete_utf8.decode('utf-8')}\")# ä¸å®Œæ•´çš„åºåˆ—incomplete = b'\\xe4\\xb8'  # ç¼ºå°‘æœ€åä¸€ä¸ªå­—èŠ‚try:    incomplete.decode('utf-8')except UnicodeDecodeError as e:    print(f\"é”™è¯¯3: {e}\")# ä½¿ç”¨é”™è¯¯å¤„ç†print(f\"å¿½ç•¥é”™è¯¯: {incomplete.decode('utf-8', errors='ignore')}\")print(f\"æ›¿æ¢é”™è¯¯: {incomplete.decode('utf-8', errors='replace')}\")æ€§èƒ½ä¼˜åŒ–import time# å­—èŠ‚å¯¹è±¡æ€§èƒ½ä¼˜åŒ–def performance_comparison():    \"\"\"æ€§èƒ½æ¯”è¾ƒ\"\"\"    n = 100000        # æ–¹æ³•1ï¼šé€ä¸ªæ·»åŠ ï¼ˆä½æ•ˆï¼‰    start = time.time()    result1 = b''    for i in range(n):        result1 += bytes([i % 256])    time1 = time.time() - start        # æ–¹æ³•2ï¼šä½¿ç”¨åˆ—è¡¨ç„¶åè½¬æ¢ï¼ˆé«˜æ•ˆï¼‰    start = time.time()    byte_list = []    for i in range(n):        byte_list.append(i % 256)    result2 = bytes(byte_list)    time2 = time.time() - start        # æ–¹æ³•3ï¼šä½¿ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆæœ€é«˜æ•ˆï¼‰    start = time.time()    result3 = bytes(i % 256 for i in range(n))    time3 = time.time() - start        print(f\"æ€§èƒ½æ¯”è¾ƒï¼ˆ{n}ä¸ªå­—èŠ‚ï¼‰:\")    print(f\"  é€ä¸ªæ·»åŠ : {time1:.4f}ç§’\")    print(f\"  åˆ—è¡¨è½¬æ¢: {time2:.4f}ç§’\")    print(f\"  ç”Ÿæˆå™¨: {time3:.4f}ç§’\")    print(f\"  ç»“æœä¸€è‡´: {result1 == result2 == result3}\")    print(f\"  æœ€å¿«æ–¹æ³•æ¯”æœ€æ…¢å¿«: {time1 / time3:.1f}å€\")performance_comparison()# å¤§æ–‡ä»¶å¤„ç†ä¼˜åŒ–def efficient_file_processing():    \"\"\"é«˜æ•ˆçš„æ–‡ä»¶å¤„ç†\"\"\"    import tempfile    import os        # åˆ›å»ºå¤§æ–‡ä»¶    with tempfile.NamedTemporaryFile(delete=False) as temp_file:        temp_filename = temp_file.name        # å†™å…¥1MBæ•°æ®        data = bytes(range(256)) * 4096  # 1MB        temp_file.write(data)        try:        # æ–¹æ³•1ï¼šä¸€æ¬¡æ€§è¯»å–ï¼ˆå†…å­˜æ¶ˆè€—å¤§ï¼‰        start = time.time()        with open(temp_filename, 'rb') as f:            all_data = f.read()        time1 = time.time() - start                # æ–¹æ³•2ï¼šåˆ†å—è¯»å–ï¼ˆå†…å­˜å‹å¥½ï¼‰        start = time.time()        chunk_size = 8192  # 8KBå—        processed_size = 0        with open(temp_filename, 'rb') as f:            while True:                chunk = f.read(chunk_size)                if not chunk:                    break                processed_size += len(chunk)                # å¤„ç†å—æ•°æ®ï¼ˆè¿™é‡Œåªæ˜¯è®¡æ•°ï¼‰        time2 = time.time() - start                print(f\"\\næ–‡ä»¶å¤„ç†æ€§èƒ½:\")        print(f\"  æ–‡ä»¶å¤§å°: {len(data)}å­—èŠ‚\")        print(f\"  ä¸€æ¬¡æ€§è¯»å–: {time1:.4f}ç§’\")        print(f\"  åˆ†å—è¯»å–: {time2:.4f}ç§’\")        print(f\"  å¤„ç†å¤§å°ä¸€è‡´: {len(all_data) == processed_size}\")            finally:        os.unlink(temp_filename)efficient_file_processing()å†…å­˜ç®¡ç†import sysimport gc# å†…å­˜ä½¿ç”¨åˆ†ædef memory_analysis():    \"\"\"å†…å­˜ä½¿ç”¨åˆ†æ\"\"\"    # ä¸åŒå¤§å°çš„å­—èŠ‚å¯¹è±¡    sizes = [100, 1000, 10000, 100000]        print(\"å­—èŠ‚å¯¹è±¡å†…å­˜ä½¿ç”¨åˆ†æ:\")    for size in sizes:        # åˆ›å»ºå­—èŠ‚å¯¹è±¡        data = bytes(range(256)) * (size // 256 + 1)        data = data[:size]  # æˆªå–åˆ°æŒ‡å®šå¤§å°                # æµ‹é‡å†…å­˜ä½¿ç”¨        obj_size = sys.getsizeof(data)        overhead = obj_size - size                print(f\"  {size}å­—èŠ‚æ•°æ®:\")        print(f\"    å¯¹è±¡å¤§å°: {obj_size}å­—èŠ‚\")        print(f\"    å¼€é”€: {overhead}å­—èŠ‚ ({overhead/size*100:.1f}%)\")        # å­—èŠ‚å¯¹è±¡vså­—ç¬¦ä¸²å†…å­˜æ¯”è¾ƒ    text = \"Hello, World!\" * 1000    text_bytes = text.encode('utf-8')        print(f\"\\nå­—ç¬¦ä¸²vså­—èŠ‚å¯¹è±¡:\")    print(f\"  å­—ç¬¦ä¸²: {sys.getsizeof(text)}å­—èŠ‚\")    print(f\"  å­—èŠ‚å¯¹è±¡: {sys.getsizeof(text_bytes)}å­—èŠ‚\")    print(f\"  å­—ç¬¦ä¸²é•¿åº¦: {len(text)}å­—ç¬¦\")    print(f\"  å­—èŠ‚å¯¹è±¡é•¿åº¦: {len(text_bytes)}å­—èŠ‚\")memory_analysis()# å†…å­˜æ³„æ¼é¢„é˜²def prevent_memory_leaks():    \"\"\"é¢„é˜²å†…å­˜æ³„æ¼\"\"\"    print(\"\\nå†…å­˜æ³„æ¼é¢„é˜²ç¤ºä¾‹:\")        # é—®é¢˜ï¼šå¾ªç¯å¼•ç”¨    class DataProcessor:        def __init__(self):            self.data = b''            self.callbacks = []                def add_callback(self, callback):            self.callbacks.append(callback)                def process(self, new_data):            self.data += new_data            for callback in self.callbacks:                callback(self.data)        # åˆ›å»ºå¤„ç†å™¨    processor = DataProcessor()        # æ·»åŠ å›è°ƒï¼ˆå¯èƒ½é€ æˆå¾ªç¯å¼•ç”¨ï¼‰    def callback(data):        # è¿™ä¸ªå›è°ƒæŒæœ‰å¯¹processorçš„å¼•ç”¨        print(f\"å¤„ç†äº† {len(data)} å­—èŠ‚\")        processor.add_callback(callback)        # å¤„ç†æ•°æ®    for i in range(5):        processor.process(bytes([i] * 100))        # æ¸…ç†ï¼ˆé‡è¦ï¼ï¼‰    processor.callbacks.clear()    del processor    gc.collect()  # å¼ºåˆ¶åƒåœ¾å›æ”¶        print(\"  å·²æ¸…ç†èµ„æº\")prevent_memory_leaks()ğŸ”§ å®é™…åº”ç”¨åœºæ™¯å›¾åƒå¤„ç†# ç®€å•çš„å›¾åƒæ•°æ®å¤„ç†class SimpleImage:    \"\"\"ç®€å•çš„å›¾åƒç±»ï¼ˆæ¼”ç¤ºç”¨ï¼‰\"\"\"        def __init__(self, width, height, channels=3):        self.width = width        self.height = height        self.channels = channels        # åˆ›å»ºç©ºç™½å›¾åƒæ•°æ®        self.data = bytes(width * height * channels)        def set_pixel(self, x, y, color):        \"\"\"è®¾ç½®åƒç´ é¢œè‰²\"\"\"        if 0 &lt;= x &lt; self.width and 0 &lt;= y &lt; self.height:            offset = (y * self.width + x) * self.channels            # è½¬æ¢ä¸ºå¯å˜çš„bytearrayè¿›è¡Œä¿®æ”¹            data_array = bytearray(self.data)            for i, c in enumerate(color[:self.channels]):                data_array[offset + i] = c            self.data = bytes(data_array)        def get_pixel(self, x, y):        \"\"\"è·å–åƒç´ é¢œè‰²\"\"\"        if 0 &lt;= x &lt; self.width and 0 &lt;= y &lt; self.height:            offset = (y * self.width + x) * self.channels            return tuple(self.data[offset:offset + self.channels])        return None        def save_ppm(self, filename):        \"\"\"ä¿å­˜ä¸ºPPMæ ¼å¼ï¼ˆç®€å•çš„å›¾åƒæ ¼å¼ï¼‰\"\"\"        with open(filename, 'wb') as f:            # PPMå¤´éƒ¨            header = f\"P6\\n{self.width} {self.height}\\n255\\n\".encode('ascii')            f.write(header)            # å›¾åƒæ•°æ®            f.write(self.data)        @classmethod    def load_ppm(cls, filename):        \"\"\"ä»PPMæ–‡ä»¶åŠ è½½\"\"\"        with open(filename, 'rb') as f:            # è¯»å–å¤´éƒ¨            magic = f.readline().strip()            if magic != b'P6':                raise ValueError(\"ä¸æ˜¯P6 PPMæ–‡ä»¶\")                        # è·³è¿‡æ³¨é‡Š            line = f.readline()            while line.startswith(b'#'):                line = f.readline()                        # è§£æå°ºå¯¸            width, height = map(int, line.split())                        # è¯»å–æœ€å¤§å€¼            max_val = int(f.readline().strip())            if max_val != 255:                raise ValueError(\"åªæ”¯æŒ8ä½PPMæ–‡ä»¶\")                        # è¯»å–å›¾åƒæ•°æ®            data = f.read()                        # åˆ›å»ºå›¾åƒå¯¹è±¡            image = cls(width, height)            image.data = data            return image# åˆ›å»ºç®€å•å›¾åƒprint(\"å›¾åƒå¤„ç†ç¤ºä¾‹:\")image = SimpleImage(100, 100)# ç»˜åˆ¶ç®€å•å›¾æ¡ˆfor x in range(100):    for y in range(100):        # åˆ›å»ºæ¸å˜æ•ˆæœ        r = (x * 255) // 100        g = (y * 255) // 100        b = 128        image.set_pixel(x, y, (r, g, b))# æ£€æŸ¥å‡ ä¸ªåƒç´ print(f\"åƒç´ (0,0): {image.get_pixel(0, 0)}\")print(f\"åƒç´ (50,50): {image.get_pixel(50, 50)}\")print(f\"åƒç´ (99,99): {image.get_pixel(99, 99)}\")print(f\"å›¾åƒæ•°æ®å¤§å°: {len(image.data)}å­—èŠ‚\")åŠ å¯†å’Œå“ˆå¸Œimport hashlibimport hmacimport secrets# åŠ å¯†å’Œå“ˆå¸Œç¤ºä¾‹class CryptoUtils:    \"\"\"åŠ å¯†å·¥å…·ç±»\"\"\"        @staticmethod    def hash_data(data, algorithm='sha256'):        \"\"\"è®¡ç®—æ•°æ®å“ˆå¸Œ\"\"\"        if isinstance(data, str):            data = data.encode('utf-8')                hasher = hashlib.new(algorithm)        hasher.update(data)        return hasher.digest()        @staticmethod    def hash_file(filename, algorithm='sha256', chunk_size=8192):        \"\"\"è®¡ç®—æ–‡ä»¶å“ˆå¸Œ\"\"\"        hasher = hashlib.new(algorithm)        with open(filename, 'rb') as f:            while True:                chunk = f.read(chunk_size)                if not chunk:                    break                hasher.update(chunk)        return hasher.digest()        @staticmethod    def hmac_sign(data, key, algorithm='sha256'):        \"\"\"HMACç­¾å\"\"\"        if isinstance(data, str):            data = data.encode('utf-8')        if isinstance(key, str):            key = key.encode('utf-8')                return hmac.new(key, data, algorithm).digest()        @staticmethod    def simple_xor_encrypt(data, key):        \"\"\"ç®€å•XORåŠ å¯†ï¼ˆä»…ç”¨äºæ¼”ç¤ºï¼‰\"\"\"        if isinstance(data, str):            data = data.encode('utf-8')        if isinstance(key, str):            key = key.encode('utf-8')                # æ‰©å±•å¯†é’¥åˆ°æ•°æ®é•¿åº¦        extended_key = (key * (len(data) // len(key) + 1))[:len(data)]                # XORæ“ä½œ        encrypted = bytes(a ^ b for a, b in zip(data, extended_key))        return encrypted        @staticmethod    def generate_salt(length=32):        \"\"\"ç”Ÿæˆéšæœºç›å€¼\"\"\"        return secrets.token_bytes(length)# åŠ å¯†ç¤ºä¾‹print(\"åŠ å¯†å’Œå“ˆå¸Œç¤ºä¾‹:\")# æ•°æ®å“ˆå¸Œoriginal_data = \"è¿™æ˜¯éœ€è¦å“ˆå¸Œçš„é‡è¦æ•°æ®\"sha256_hash = CryptoUtils.hash_data(original_data)md5_hash = CryptoUtils.hash_data(original_data, 'md5')print(f\"åŸå§‹æ•°æ®: {original_data}\")print(f\"SHA256å“ˆå¸Œ: {sha256_hash.hex()}\")print(f\"MD5å“ˆå¸Œ: {md5_hash.hex()}\")# HMACç­¾åsecret_key = \"my_secret_key\"signature = CryptoUtils.hmac_sign(original_data, secret_key)print(f\"HMACç­¾å: {signature.hex()}\")# éªŒè¯ç­¾åverify_signature = CryptoUtils.hmac_sign(original_data, secret_key)print(f\"ç­¾åéªŒè¯: {signature == verify_signature}\")# ç®€å•åŠ å¯†encryption_key = \"encryption_key_123\"encrypted_data = CryptoUtils.simple_xor_encrypt(original_data, encryption_key)print(f\"åŠ å¯†æ•°æ®: {encrypted_data.hex()}\")# è§£å¯†ï¼ˆXORåŠ å¯†æ˜¯å¯¹ç§°çš„ï¼‰decrypted_data = CryptoUtils.simple_xor_encrypt(encrypted_data, encryption_key)print(f\"è§£å¯†æ•°æ®: {decrypted_data.decode('utf-8')}\")print(f\"è§£å¯†æ­£ç¡®: {decrypted_data.decode('utf-8') == original_data}\")# ç”Ÿæˆéšæœºç›å€¼salt = CryptoUtils.generate_salt()print(f\"éšæœºç›å€¼: {salt.hex()}\")# å¯†ç å“ˆå¸Œï¼ˆåŠ ç›ï¼‰password = \"user_password_123\"salted_password = salt + password.encode('utf-8')password_hash = CryptoUtils.hash_data(salted_password)print(f\"åŠ ç›å¯†ç å“ˆå¸Œ: {password_hash.hex()}\")ğŸ”— ç›¸å…³å‡½æ•°å†…ç½®å‡½æ•°  bytearray() - åˆ›å»ºå¯å˜å­—èŠ‚æ•°ç»„  str() - å­—ç¬¦ä¸²æ„é€ å‡½æ•°  int() - æ•´æ•°è½¬æ¢å‡½æ•°  len() - è·å–é•¿åº¦  iter() - åˆ›å»ºè¿­ä»£å™¨  memoryview() - åˆ›å»ºå†…å­˜è§†å›¾æ ‡å‡†åº“æ¨¡å—  codecs - ç¼–è§£ç å™¨          encode(), decode() - ç¼–ç è§£ç       open() - ç¼–ç æ–‡ä»¶æ“ä½œ        base64 - Base64ç¼–ç           b64encode(), b64decode() - Base64ç¼–è§£ç       urlsafe_b64encode() - URLå®‰å…¨ç¼–ç         binascii - äºŒè¿›åˆ¶å’ŒASCIIè½¬æ¢          hexlify(), unhexlify() - åå…­è¿›åˆ¶è½¬æ¢      crc32() - CRC32æ ¡éªŒ        struct - äºŒè¿›åˆ¶æ•°æ®ç»“æ„          pack(), unpack() - æ•°æ®æ‰“åŒ…è§£åŒ…        hashlib - å“ˆå¸Œç®—æ³•          md5(), sha256() - å“ˆå¸Œå‡½æ•°        hmac - HMACç®—æ³•  secrets - å®‰å…¨éšæœºæ•°ç¬¬ä¸‰æ–¹åº“  cryptography - ç°ä»£åŠ å¯†åº“  Pillow - å›¾åƒå¤„ç†  numpy - æ•°å€¼è®¡ç®—          np.frombuffer() - ä»å­—èŠ‚åˆ›å»ºæ•°ç»„      np.tobytes() - è½¬æ¢ä¸ºå­—èŠ‚      ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - bytes()  Pythonå®˜æ–¹æ–‡æ¡£ - äºŒè¿›åˆ¶åºåˆ—ç±»å‹  Pythonå®˜æ–¹æ–‡æ¡£ - ç¼–è§£ç å™¨  å­—ç¬¦ç¼–ç è¯¦è§£  äºŒè¿›åˆ¶æ•°æ®å¤„ç†æŒ‡å—ğŸ·ï¸ æ ‡ç­¾å­—èŠ‚ äºŒè¿›åˆ¶ ç¼–ç  æ•°æ®ç±»å‹ æ–‡ä»¶å¤„ç† ç½‘ç»œç¼–ç¨‹æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/bytes/",
        "category": "builtins",
        "tags": ["å­—èŠ‚","äºŒè¿›åˆ¶","ç¼–ç ","æ•°æ®ç±»å‹"]
      }
      
    
  
    
      ,
      {
        "title": "calendaræ¨¡å—",
        "content": "calendaræ¨¡å—ğŸ“ æ¦‚è¿°calendaræ¨¡å—æä¾›äº†ä¸æ—¥å†ç›¸å…³çš„å®ç”¨å‡½æ•°ï¼Œå¯ä»¥ç”Ÿæˆæ–‡æœ¬å’ŒHTMLæ ¼å¼çš„æ—¥å†ï¼Œè¿›è¡Œæ—¥æœŸè®¡ç®—ï¼Œä»¥åŠå¤„ç†ä¸æ˜ŸæœŸã€æœˆä»½ç›¸å…³çš„å„ç§æ“ä½œã€‚è¯¥æ¨¡å—éµå¾ªç†æƒ³åŒ–çš„æ—¥å†ï¼Œå½“å‰çš„å…¬å†å‘å‰å’Œå‘åæ— é™å»¶ä¼¸ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡æ—¥å†çš„ç”Ÿæˆå’Œæ˜¾ç¤º  å­¦ä¼šæ—¥æœŸå’Œæ˜ŸæœŸçš„è®¡ç®—  äº†è§£é—°å¹´åˆ¤æ–­å’Œæœˆä»½å¤©æ•°è®¡ç®—  æŒæ¡æ—¥å†çš„è‡ªå®šä¹‰å’Œæ ¼å¼åŒ–  å­¦ä¼šHTMLæ—¥å†çš„ç”ŸæˆğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  åŸºæœ¬çš„æ—¥æœŸæ—¶é—´æ¦‚å¿µ  äº†è§£å…¬å†ç³»ç»ŸğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ—¥å†å‡½æ•°æ—¥å†æ˜¾ç¤ºimport calendar# æ˜¾ç¤ºæ•´å¹´æ—¥å†print(\"2024å¹´æ—¥å†:\")print(calendar.calendar(2024))# æ˜¾ç¤ºæŒ‡å®šæœˆä»½çš„æ—¥å†print(\"\\n2024å¹´1æœˆæ—¥å†:\")print(calendar.month(2024, 1))# è®¾ç½®æ—¥å†æ ¼å¼calendar.setfirstweekday(calendar.MONDAY)  # è®¾ç½®å‘¨ä¸€ä¸ºä¸€å‘¨çš„ç¬¬ä¸€å¤©print(\"\\nä»¥å‘¨ä¸€ä¸ºé¦–çš„2024å¹´1æœˆæ—¥å†:\")print(calendar.month(2024, 1))# æ¢å¤é»˜è®¤è®¾ç½®ï¼ˆå‘¨æ—¥ä¸ºé¦–ï¼‰calendar.setfirstweekday(calendar.SUNDAY)æ—¥å†ä¿¡æ¯è·å–# è·å–æœˆä»½çš„æ—¥å†çŸ©é˜µmonth_calendar = calendar.monthcalendar(2024, 1)print(\"2024å¹´1æœˆæ—¥å†çŸ©é˜µ:\")for week in month_calendar:    print(week)# è¾“å‡º: [[0, 1, 2, 3, 4, 5, 6], [7, 8, 9, 10, 11, 12, 13], ...]# æ³¨æ„: 0è¡¨ç¤ºä¸å±äºå½“æœˆçš„æ—¥æœŸ# è·å–æœˆä»½èŒƒå›´first_weekday, days_in_month = calendar.monthrange(2024, 1)print(f\"\\n2024å¹´1æœˆç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸ{first_weekday}ï¼Œå…±æœ‰{days_in_month}å¤©\")# first_weekday: 0=å‘¨ä¸€, 1=å‘¨äºŒ, ..., 6=å‘¨æ—¥# è·å–æŒ‡å®šæ—¥æœŸæ˜¯æ˜ŸæœŸå‡ weekday = calendar.weekday(2024, 1, 1)print(f\"2024å¹´1æœˆ1æ—¥æ˜¯æ˜ŸæœŸ{weekday}\")# 0=å‘¨ä¸€, 1=å‘¨äºŒ, ..., 6=å‘¨æ—¥æ—¥æœŸè®¡ç®—å‡½æ•°é—°å¹´å’Œå¤©æ•°è®¡ç®—# åˆ¤æ–­æ˜¯å¦ä¸ºé—°å¹´years = [2020, 2021, 2022, 2023, 2024]for year in years:    is_leap = calendar.isleap(year)    print(f\"{year}å¹´æ˜¯{'é—°å¹´' if is_leap else 'å¹³å¹´'}\")# è®¡ç®—æŒ‡å®šå¹´ä»½èŒƒå›´å†…çš„é—°å¹´æ•°é‡leap_count = calendar.leapdays(2020, 2025)print(f\"\\n2020-2024å¹´é—´æœ‰{leap_count}ä¸ªé—°å¹´\")# è·å–æœˆä»½å¤©æ•°months = [(2024, 2), (2023, 2), (2024, 4), (2024, 12)]for year, month in months:    days = calendar.monthrange(year, month)[1]    print(f\"{year}å¹´{month}æœˆæœ‰{days}å¤©\")æ˜ŸæœŸç›¸å…³è®¡ç®—# æ˜ŸæœŸåç§°weekday_names = {    0: 'å‘¨ä¸€', 1: 'å‘¨äºŒ', 2: 'å‘¨ä¸‰', 3: 'å‘¨å››',    4: 'å‘¨äº”', 5: 'å‘¨å…­', 6: 'å‘¨æ—¥'}# è®¡ç®—ä¸€å¹´ä¸­æ¯ä¸ªæœˆ1å·æ˜¯æ˜ŸæœŸå‡ print(\"2024å¹´å„æœˆ1å·çš„æ˜ŸæœŸ:\")for month in range(1, 13):    weekday = calendar.weekday(2024, month, 1)    month_name = calendar.month_name[month]    print(f\"{month_name}1æ—¥: {weekday_names[weekday]}\")# è·å–æ˜ŸæœŸå’Œæœˆä»½çš„åç§°print(\"\\næ˜ŸæœŸåç§°:\")for i in range(7):    print(f\"{i}: {calendar.day_name[i]} ({calendar.day_abbr[i]})\")print(\"\\næœˆä»½åç§°:\")for i in range(1, 13):    print(f\"{i}: {calendar.month_name[i]} ({calendar.month_abbr[i]})\")è‡ªå®šä¹‰æ—¥å†ç±»TextCalendarç±»# åˆ›å»ºè‡ªå®šä¹‰æ–‡æœ¬æ—¥å†text_cal = calendar.TextCalendar(firstweekday=0)  # å‘¨ä¸€ä¸ºé¦–# ç”Ÿæˆæœˆä»½æ—¥å†month_str = text_cal.formatmonth(2024, 1)print(\"è‡ªå®šä¹‰æœˆå†:\")print(month_str)# ç”Ÿæˆå¹´åº¦æ—¥å†year_str = text_cal.formatyear(2024, w=2, l=1, c=6, m=3)print(\"\\nè‡ªå®šä¹‰å¹´å†:\")print(year_str)# è¿­ä»£æœˆä»½ä¸­çš„æ—¥æœŸprint(\"\\n2024å¹´1æœˆçš„æ‰€æœ‰æ—¥æœŸ:\")for week in text_cal.monthdays2calendar(2024, 1):    for day, weekday in week:        if day != 0:            print(f\"{day}æ—¥({weekday_names[weekday]})\", end=\"  \")    print()  # æ¢è¡ŒHTMLCalendarç±»# åˆ›å»ºHTMLæ—¥å†html_cal = calendar.HTMLCalendar(firstweekday=0)# ç”ŸæˆHTMLæœˆå†html_month = html_cal.formatmonth(2024, 1)print(\"HTMLæœˆå†:\")print(html_month[:200] + \"...\")  # åªæ˜¾ç¤ºå‰200ä¸ªå­—ç¬¦# ç”ŸæˆHTMLå¹´å†html_year = html_cal.formatyear(2024)print(f\"\\nHTMLå¹´å†é•¿åº¦: {len(html_year)} å­—ç¬¦\")# ä¿å­˜HTMLæ—¥å†åˆ°æ–‡ä»¶with open('calendar_2024.html', 'w', encoding='utf-8') as f:    f.write(f\"\"\"&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;    &lt;title&gt;2024å¹´æ—¥å†&lt;/title&gt;    &lt;meta charset=\"utf-8\"&gt;    &lt;style&gt;        table { border-collapse: collapse; margin: 20px; }        th, td { border: 1px solid #ccc; padding: 5px; text-align: center; }        th { background-color: #f0f0f0; }        .today { background-color: #ffeb3b; }    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;h1&gt;2024å¹´æ—¥å†&lt;/h1&gt;    {html_year}&lt;/body&gt;&lt;/html&gt;    \"\"\")print(\"HTMLæ—¥å†å·²ä¿å­˜åˆ° calendar_2024.html\")æ—¥å†æ ¼å¼åŒ–é€‰é¡¹            å‚æ•°      è¯´æ˜      é»˜è®¤å€¼                  firstweekday      ä¸€å‘¨çš„ç¬¬ä¸€å¤© (0=å‘¨ä¸€, 6=å‘¨æ—¥)      0              w      æ—¥æœŸåˆ—å®½      2              l      æ¯å‘¨è¡Œæ•°      1              c      æœˆä»½é—´è·      6              m      æ¯è¡Œæœˆä»½æ•°      3      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•def get_month_info(year, month):    \"\"\"è·å–æŒ‡å®šæœˆä»½çš„è¯¦ç»†ä¿¡æ¯\"\"\"    # åŸºæœ¬ä¿¡æ¯    first_weekday, days_in_month = calendar.monthrange(year, month)    month_name = calendar.month_name[month]        # è®¡ç®—å·¥ä½œæ—¥å’Œå‘¨æœ«å¤©æ•°    workdays = 0    weekends = 0        for day in range(1, days_in_month + 1):        weekday = calendar.weekday(year, month, day)        if weekday &lt; 5:  # å‘¨ä¸€åˆ°å‘¨äº”            workdays += 1        else:  # å‘¨å…­å‘¨æ—¥            weekends += 1        info = {        'å¹´ä»½': year,        'æœˆä»½': f\"{month}æœˆ ({month_name})\",        'æ€»å¤©æ•°': days_in_month,        'å·¥ä½œæ—¥': workdays,        'å‘¨æœ«': weekends,        'ç¬¬ä¸€å¤©æ˜ŸæœŸ': weekday_names[first_weekday],        'æ˜¯å¦é—°å¹´': 'æ˜¯' if calendar.isleap(year) else 'å¦'    }        return info# ä½¿ç”¨ç¤ºä¾‹month_info = get_month_info(2024, 2)print(\"æœˆä»½ä¿¡æ¯:\")for key, value in month_info.items():    print(f\"{key}: {value}\")é«˜çº§ç”¨æ³•class CustomCalendar:    \"\"\"è‡ªå®šä¹‰æ—¥å†ç±»\"\"\"        def __init__(self, locale='zh_CN'):        self.locale = locale        self.holidays = {}  # å­˜å‚¨èŠ‚å‡æ—¥                # ä¸­æ–‡æ˜ŸæœŸå’Œæœˆä»½åç§°        self.cn_weekdays = ['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥']        self.cn_months = ['', 'ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ',                         'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'åä¸€æœˆ', 'åäºŒæœˆ']        def add_holiday(self, year, month, day, name):        \"\"\"æ·»åŠ èŠ‚å‡æ—¥\"\"\"        date_key = f\"{year}-{month:02d}-{day:02d}\"        self.holidays[date_key] = name        def is_holiday(self, year, month, day):        \"\"\"æ£€æŸ¥æ˜¯å¦ä¸ºèŠ‚å‡æ—¥\"\"\"        date_key = f\"{year}-{month:02d}-{day:02d}\"        return date_key in self.holidays        def get_holiday_name(self, year, month, day):        \"\"\"è·å–èŠ‚å‡æ—¥åç§°\"\"\"        date_key = f\"{year}-{month:02d}-{day:02d}\"        return self.holidays.get(date_key, '')        def format_chinese_month(self, year, month):        \"\"\"ç”Ÿæˆä¸­æ–‡æ ¼å¼çš„æœˆå†\"\"\"        month_cal = calendar.monthcalendar(year, month)        month_name = self.cn_months[month]                result = f\"\\n{year}å¹´{month_name}\\n\"        result += \"  \" + \"  \".join(self.cn_weekdays) + \"\\n\"        result += \"-\" * 20 + \"\\n\"                for week in month_cal:            week_str = \"\"            for day in week:                if day == 0:                    week_str += \"  \"                else:                    if self.is_holiday(year, month, day):                        week_str += f\"{day:2d}*\"  # èŠ‚å‡æ—¥æ ‡è®°*                    else:                        week_str += f\"{day:2d} \"                week_str += \" \"            result += week_str + \"\\n\"                # æ·»åŠ èŠ‚å‡æ—¥è¯´æ˜        holidays_in_month = []        for day in range(1, calendar.monthrange(year, month)[1] + 1):            if self.is_holiday(year, month, day):                holiday_name = self.get_holiday_name(year, month, day)                holidays_in_month.append(f\"{day}æ—¥: {holiday_name}\")                if holidays_in_month:            result += \"\\nèŠ‚å‡æ—¥:\\n\"            for holiday in holidays_in_month:                result += f\"  {holiday}\\n\"                return result        def get_year_statistics(self, year):        \"\"\"è·å–å¹´åº¦ç»Ÿè®¡ä¿¡æ¯\"\"\"        total_days = 366 if calendar.isleap(year) else 365        total_workdays = 0        total_weekends = 0        total_holidays = 0                for month in range(1, 13):            days_in_month = calendar.monthrange(year, month)[1]            for day in range(1, days_in_month + 1):                weekday = calendar.weekday(year, month, day)                                if self.is_holiday(year, month, day):                    total_holidays += 1                elif weekday &lt; 5:  # å‘¨ä¸€åˆ°å‘¨äº”                    total_workdays += 1                else:  # å‘¨å…­å‘¨æ—¥                    total_weekends += 1                return {            'æ€»å¤©æ•°': total_days,            'å·¥ä½œæ—¥': total_workdays,            'å‘¨æœ«': total_weekends,            'èŠ‚å‡æ—¥': total_holidays,            'æ˜¯å¦é—°å¹´': calendar.isleap(year)        }# ä½¿ç”¨ç¤ºä¾‹cal = CustomCalendar()# æ·»åŠ ä¸€äº›èŠ‚å‡æ—¥cal.add_holiday(2024, 1, 1, 'å…ƒæ—¦')cal.add_holiday(2024, 2, 10, 'æ˜¥èŠ‚')cal.add_holiday(2024, 2, 11, 'æ˜¥èŠ‚')cal.add_holiday(2024, 2, 12, 'æ˜¥èŠ‚')cal.add_holiday(2024, 5, 1, 'åŠ³åŠ¨èŠ‚')cal.add_holiday(2024, 10, 1, 'å›½åº†èŠ‚')cal.add_holiday(2024, 10, 2, 'å›½åº†èŠ‚')cal.add_holiday(2024, 10, 3, 'å›½åº†èŠ‚')# æ˜¾ç¤ºä¸­æ–‡æœˆå†print(cal.format_chinese_month(2024, 1))print(cal.format_chinese_month(2024, 10))# æ˜¾ç¤ºå¹´åº¦ç»Ÿè®¡stats = cal.get_year_statistics(2024)print(\"2024å¹´ç»Ÿè®¡ä¿¡æ¯:\")for key, value in stats.items():    print(f\"{key}: {value}\")å®é™…æ¡ˆä¾‹import calendarimport datetimeclass WorkdayCalculator:    \"\"\"å·¥ä½œæ—¥è®¡ç®—å™¨\"\"\"        def __init__(self):        self.holidays = set()  # å­˜å‚¨èŠ‚å‡æ—¥        self.workdays = set(range(5))  # é»˜è®¤å‘¨ä¸€åˆ°å‘¨äº”ä¸ºå·¥ä½œæ—¥        def add_holiday(self, year, month, day):        \"\"\"æ·»åŠ èŠ‚å‡æ—¥\"\"\"        date = datetime.date(year, month, day)        self.holidays.add(date)        def remove_holiday(self, year, month, day):        \"\"\"ç§»é™¤èŠ‚å‡æ—¥\"\"\"        date = datetime.date(year, month, day)        self.holidays.discard(date)        def set_workdays(self, workdays):        \"\"\"è®¾ç½®å·¥ä½œæ—¥ï¼ˆ0=å‘¨ä¸€, 6=å‘¨æ—¥ï¼‰\"\"\"        self.workdays = set(workdays)        def is_workday(self, year, month, day):        \"\"\"åˆ¤æ–­æ˜¯å¦ä¸ºå·¥ä½œæ—¥\"\"\"        date = datetime.date(year, month, day)                # å¦‚æœæ˜¯èŠ‚å‡æ—¥ï¼Œä¸æ˜¯å·¥ä½œæ—¥        if date in self.holidays:            return False                # æ£€æŸ¥æ˜¯å¦åœ¨å·¥ä½œæ—¥èŒƒå›´å†…        weekday = calendar.weekday(year, month, day)        return weekday in self.workdays        def count_workdays(self, start_year, start_month, start_day,                       end_year, end_month, end_day):        \"\"\"è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·¥ä½œæ—¥æ•°é‡\"\"\"        start_date = datetime.date(start_year, start_month, start_day)        end_date = datetime.date(end_year, end_month, end_day)                if start_date &gt; end_date:            start_date, end_date = end_date, start_date                workday_count = 0        current_date = start_date                while current_date &lt;= end_date:            if self.is_workday(current_date.year, current_date.month, current_date.day):                workday_count += 1            current_date += datetime.timedelta(days=1)                return workday_count        def get_month_workdays(self, year, month):        \"\"\"è·å–æŒ‡å®šæœˆä»½çš„å·¥ä½œæ—¥åˆ—è¡¨\"\"\"        days_in_month = calendar.monthrange(year, month)[1]        workdays = []                for day in range(1, days_in_month + 1):            if self.is_workday(year, month, day):                weekday = calendar.weekday(year, month, day)                workdays.append({                    'date': f\"{year}-{month:02d}-{day:02d}\",                    'day': day,                    'weekday': weekday,                    'weekday_name': weekday_names[weekday]                })                return workdays        def generate_work_calendar(self, year, month):        \"\"\"ç”Ÿæˆå·¥ä½œæ—¥å†\"\"\"        month_cal = calendar.monthcalendar(year, month)        month_name = calendar.month_name[month]                result = f\"\\n{year}å¹´{month}æœˆå·¥ä½œæ—¥å†\\n\"        result += \"å‘¨ä¸€ å‘¨äºŒ å‘¨ä¸‰ å‘¨å›› å‘¨äº” å‘¨å…­ å‘¨æ—¥\\n\"        result += \"-\" * 28 + \"\\n\"                for week in month_cal:            week_str = \"\"            for day in week:                if day == 0:                    week_str += \"   \"                else:                    if self.is_workday(year, month, day):                        week_str += f\"{day:2d}W\"  # Wè¡¨ç¤ºå·¥ä½œæ—¥                    elif datetime.date(year, month, day) in self.holidays:                        week_str += f\"{day:2d}H\"  # Hè¡¨ç¤ºèŠ‚å‡æ—¥                    else:                        week_str += f\"{day:2d} \"  # æ™®é€šå‘¨æœ«                week_str += \" \"            result += week_str + \"\\n\"                # ç»Ÿè®¡ä¿¡æ¯        workdays = self.get_month_workdays(year, month)        result += f\"\\næœ¬æœˆå·¥ä½œæ—¥: {len(workdays)}å¤©\\n\"                return result# ä½¿ç”¨ç¤ºä¾‹calc = WorkdayCalculator()# æ·»åŠ èŠ‚å‡æ—¥calc.add_holiday(2024, 1, 1)  # å…ƒæ—¦calc.add_holiday(2024, 5, 1)  # åŠ³åŠ¨èŠ‚calc.add_holiday(2024, 10, 1) # å›½åº†èŠ‚# ç”Ÿæˆå·¥ä½œæ—¥å†print(calc.generate_work_calendar(2024, 1))print(calc.generate_work_calendar(2024, 5))# è®¡ç®—å·¥ä½œæ—¥workdays = calc.count_workdays(2024, 1, 1, 2024, 1, 31)print(f\"2024å¹´1æœˆå·¥ä½œæ—¥æ€»æ•°: {workdays}å¤©\")# è·å–æœˆä»½å·¥ä½œæ—¥è¯¦æƒ…january_workdays = calc.get_month_workdays(2024, 1)print(f\"\\n2024å¹´1æœˆå·¥ä½œæ—¥è¯¦æƒ… (å…±{len(january_workdays)}å¤©):\")for workday in january_workdays[:5]:  # åªæ˜¾ç¤ºå‰5ä¸ª    print(f\"  {workday['date']} ({workday['weekday_name']})\")if len(january_workdays) &gt; 5:    print(f\"  ... è¿˜æœ‰{len(january_workdays) - 5}ä¸ªå·¥ä½œæ—¥\")âš ï¸ æ³¨æ„äº‹é¡¹  æ—¥å†ç³»ç»Ÿ: calendaræ¨¡å—ä½¿ç”¨ç†æƒ³åŒ–çš„å…¬å†ï¼Œä¸è€ƒè™‘å†å²ä¸Šçš„æ—¥å†æ”¹é©  æ˜ŸæœŸç¼–å·: Pythonä¸­å‘¨ä¸€ä¸º0ï¼Œå‘¨æ—¥ä¸º6ï¼Œä¸æŸäº›ç³»ç»Ÿä¸åŒ  æ—¶åŒº: calendaræ¨¡å—ä¸å¤„ç†æ—¶åŒºï¼Œåªå¤„ç†æ—¥æœŸ  æœ¬åœ°åŒ–: æœˆä»½å’Œæ˜ŸæœŸåç§°é»˜è®¤ä¸ºè‹±æ–‡ï¼Œéœ€è¦è‡ªå®šä¹‰ä¸­æ–‡æ˜¾ç¤º  æ€§èƒ½: å¯¹äºå¤§é‡æ—¥æœŸè®¡ç®—ï¼Œè€ƒè™‘ä½¿ç”¨datetimeæ¨¡å—  é—°ç§’: calendaræ¨¡å—ä¸è€ƒè™‘é—°ç§’ğŸ”— ç›¸å…³å†…å®¹  datetimeæ¨¡å— - æ›´å¼ºå¤§çš„æ—¥æœŸæ—¶é—´å¤„ç†  timeæ¨¡å— - æ—¶é—´ç›¸å…³çš„åŸºç¡€åŠŸèƒ½  å†…ç½®å‡½æ•° - äº†è§£ç›¸å…³çš„å†…ç½®å‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Python calendaræ¨¡å—å®˜æ–¹æ–‡æ¡£  å…¬å†ç³»ç»Ÿè¯¦è§£  ISO 8601æ—¥æœŸæ ‡å‡†ğŸ·ï¸ æ ‡ç­¾æ—¥å† æœˆå† å¹´å† å·¥ä½œæ—¥ èŠ‚å‡æ—¥ æ ‡å‡†åº“æœ€åæ›´æ–°: 2024-01-01ä½œè€…: Pythonæ–‡æ¡£å›¢é˜Ÿç‰ˆæœ¬: 1.0",
        "url": "/docs/stdlib/calendar/",
        "category": "stdlib",
        "tags": ["æ—¥å†","æœˆå†","å¹´å†","æ ‡å‡†åº“"]
      }
      
    
  
    
      ,
      {
        "title": "ç±»çš„å®šä¹‰ä¸åŸºç¡€æ¦‚å¿µ",
        "content": "ç±»çš„å®šä¹‰ä¸åŸºç¡€æ¦‚å¿µğŸ“ æ¦‚è¿°ç±»æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒæ˜¯åˆ›å»ºå¯¹è±¡çš„è“å›¾æˆ–æ¨¡æ¿ã€‚åœ¨Pythonä¸­ï¼Œç±»å®šä¹‰äº†å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œé€šè¿‡ç±»å¯ä»¥åˆ›å»ºå…·æœ‰ç›¸åŒç»“æ„å’Œè¡Œä¸ºçš„å¤šä¸ªå¯¹è±¡å®ä¾‹ã€‚ç†è§£ç±»çš„å®šä¹‰å’ŒåŸºç¡€æ¦‚å¿µæ˜¯æŒæ¡Pythoné¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç¬¬ä¸€æ­¥ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡Pythonç±»çš„åŸºæœ¬å®šä¹‰è¯­æ³•  ç†è§£æ„é€ å‡½æ•°__init__çš„ä½œç”¨å’Œç”¨æ³•  åŒºåˆ†å®ä¾‹å±æ€§å’Œç±»å±æ€§çš„æ¦‚å¿µå’Œä½¿ç”¨  å­¦ä¼šå®šä¹‰å’Œä½¿ç”¨å®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•  ç†è§£Pythonä¸­â€ä¸€åˆ‡çš†å¯¹è±¡â€çš„å“²å­¦æ€æƒ³  æŒæ¡æŠ½è±¡ã€å°è£…ç­‰é¢å‘å¯¹è±¡åŸºæœ¬æ¦‚å¿µğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•å’Œæ•°æ®ç±»å‹  å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨  å˜é‡ä½œç”¨åŸŸçš„æ¦‚å¿µ  åŸºæœ¬çš„ç¼–ç¨‹æ€ç»´ğŸ” è¯¦ç»†å†…å®¹ç±»çš„åŸºæœ¬è¯­æ³•åœ¨Pythonä¸­ï¼Œä½¿ç”¨classå…³é”®å­—æ¥å®šä¹‰ç±»ï¼ŒåŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼šclass ClassName:    \"\"\"ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸²\"\"\"    # ç±»å±æ€§å®šä¹‰    class_attribute = value        # æ„é€ å‡½æ•°ï¼Œç”¨äºåˆå§‹åŒ–å¯¹è±¡å±æ€§    def __init__(self, parameter1, parameter2):        \"\"\"æ„é€ å‡½æ•°\"\"\"        # å®ä¾‹å±æ€§å®šä¹‰        self.instance_attribute1 = parameter1        self.instance_attribute2 = parameter2        # å®ä¾‹æ–¹æ³•å®šä¹‰    def instance_method(self):        \"\"\"å®ä¾‹æ–¹æ³•\"\"\"        print(f\"è¿™æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œè®¿é—®å®ä¾‹å±æ€§: {self.instance_attribute1}\")ç±»å‘½åè§„èŒƒ  ç±»åä½¿ç”¨å¤§é©¼å³°å‘½åæ³•ï¼ˆPascalCaseï¼‰  æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™  é¿å…ä½¿ç”¨Pythonå…³é”®å­—å’Œå†…ç½®å‡½æ•°å# æ­£ç¡®çš„ç±»åç¤ºä¾‹class Person:          # äººclass BankAccount:     # é“¶è¡Œè´¦æˆ·class HttpRequest:     # HTTPè¯·æ±‚class DatabaseManager: # æ•°æ®åº“ç®¡ç†å™¨# é”™è¯¯çš„ç±»åç¤ºä¾‹class person:          # åº”è¯¥é¦–å­—æ¯å¤§å†™class bank_account:    # åº”è¯¥ä½¿ç”¨å¤§é©¼å³°å‘½åclass list:            # ä¸åº”è¯¥ä½¿ç”¨å†…ç½®ç±»å‹åæ„é€ å‡½æ•°__init____init__æ–¹æ³•æ˜¯Pythonç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œåœ¨åˆ›å»ºç±»çš„å®ä¾‹æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œç”¨äºåˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ã€‚import mathclass Circle:    \"\"\"åœ†å½¢ç±»\"\"\"        def __init__(self, radius):        \"\"\"åˆå§‹åŒ–åœ†å½¢                Args:            radius (float): åœ†çš„åŠå¾„        \"\"\"        if radius &lt;= 0:            raise ValueError(\"åŠå¾„å¿…é¡»å¤§äº0\")        self.radius = radius  # åˆå§‹åŒ–åœ†çš„åŠå¾„        def area(self):        \"\"\"è®¡ç®—åœ†çš„é¢ç§¯\"\"\"        return math.pi * self.radius ** 2        def circumference(self):        \"\"\"è®¡ç®—åœ†çš„å‘¨é•¿\"\"\"        return 2 * math.pi * self.radius        def __str__(self):        \"\"\"å­—ç¬¦ä¸²è¡¨ç¤º\"\"\"        return f\"Circle(radius={self.radius})\"# åˆ›å»ºåœ†å½¢å®ä¾‹my_circle = Circle(5)print(f\"åœ†çš„ä¿¡æ¯: {my_circle}\")print(f\"åœ†çš„é¢ç§¯: {my_circle.area():.2f}\")print(f\"åœ†çš„å‘¨é•¿: {my_circle.circumference():.2f}\")æ„é€ å‡½æ•°çš„ç‰¹ç‚¹  ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯selfï¼Œä»£è¡¨å®ä¾‹æœ¬èº«  åœ¨åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨  å¯ä»¥æ¥å—å‚æ•°æ¥åˆå§‹åŒ–å®ä¾‹å±æ€§  å¯ä»¥åŒ…å«å‚æ•°éªŒè¯å’Œåˆå§‹åŒ–é€»è¾‘å®ä¾‹å±æ€§ä¸ç±»å±æ€§å®ä¾‹å±æ€§å®ä¾‹å±æ€§æ˜¯æ¯ä¸ªå®ä¾‹ç‹¬æœ‰çš„å±æ€§ï¼Œåœ¨__init__æ–¹æ³•ä¸­é€šè¿‡selfè¿›è¡Œå®šä¹‰å’Œèµ‹å€¼ã€‚class Person:    \"\"\"äººå‘˜ç±»\"\"\"        def __init__(self, name, age, email):        \"\"\"åˆå§‹åŒ–äººå‘˜ä¿¡æ¯\"\"\"        self.name = name      # å®ä¾‹å±æ€§ï¼šå§“å        self.age = age        # å®ä¾‹å±æ€§ï¼šå¹´é¾„        self.email = email    # å®ä¾‹å±æ€§ï¼šé‚®ç®±        self._id = None       # ç§æœ‰å±æ€§ï¼šIDï¼ˆä»¥ä¸‹åˆ’çº¿å¼€å¤´è¡¨ç¤ºç§æœ‰ï¼‰        def set_id(self, person_id):        \"\"\"è®¾ç½®äººå‘˜ID\"\"\"        self._id = person_id        def get_info(self):        \"\"\"è·å–äººå‘˜ä¿¡æ¯\"\"\"        return f\"å§“å: {self.name}, å¹´é¾„: {self.age}, é‚®ç®±: {self.email}\"# åˆ›å»ºä¸åŒçš„äººå‘˜å®ä¾‹person1 = Person(\"å¼ ä¸‰\", 25, \"zhangsan@example.com\")person2 = Person(\"æå››\", 30, \"lisi@example.com\")print(person1.get_info())print(person2.get_info())ç±»å±æ€§ç±»å±æ€§æ˜¯å±äºç±»æœ¬èº«çš„å±æ€§ï¼Œå®šä¹‰åœ¨ç±»ä¸­ä½†åœ¨æ–¹æ³•ä¹‹å¤–ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«è¯¥ç±»å±æ€§ã€‚class Employee:    \"\"\"å‘˜å·¥ç±»\"\"\"        # ç±»å±æ€§    company_name = \"ç§‘æŠ€æœ‰é™å…¬å¸\"  # å…¬å¸åç§°    employee_count = 0           # å‘˜å·¥æ€»æ•°    base_salary = 5000          # åŸºç¡€å·¥èµ„        def __init__(self, name, department, position):        \"\"\"åˆå§‹åŒ–å‘˜å·¥ä¿¡æ¯\"\"\"        self.name = name              # å®ä¾‹å±æ€§ï¼šå§“å        self.department = department  # å®ä¾‹å±æ€§ï¼šéƒ¨é—¨        self.position = position      # å®ä¾‹å±æ€§ï¼šèŒä½        self.employee_id = Employee.employee_count + 1  # å‘˜å·¥ID                # æ¯åˆ›å»ºä¸€ä¸ªå‘˜å·¥ï¼Œå‘˜å·¥æ€»æ•°åŠ 1        Employee.employee_count += 1        def get_full_info(self):        \"\"\"è·å–å®Œæ•´å‘˜å·¥ä¿¡æ¯\"\"\"        return {            \"å…¬å¸\": Employee.company_name,            \"å‘˜å·¥ID\": self.employee_id,            \"å§“å\": self.name,            \"éƒ¨é—¨\": self.department,            \"èŒä½\": self.position        }        @classmethod    def get_company_info(cls):        \"\"\"è·å–å…¬å¸ä¿¡æ¯ï¼ˆç±»æ–¹æ³•ï¼‰\"\"\"        return f\"{cls.company_name}ï¼Œå½“å‰å‘˜å·¥æ€»æ•°ï¼š{cls.employee_count}\"        @classmethod    def set_company_name(cls, new_name):        \"\"\"è®¾ç½®å…¬å¸åç§°ï¼ˆç±»æ–¹æ³•ï¼‰\"\"\"        cls.company_name = new_name# åˆ›å»ºå‘˜å·¥å®ä¾‹emp1 = Employee(\"ç‹äº”\", \"æŠ€æœ¯éƒ¨\", \"è½¯ä»¶å·¥ç¨‹å¸ˆ\")emp2 = Employee(\"èµµå…­\", \"å¸‚åœºéƒ¨\", \"å¸‚åœºä¸“å‘˜\")emp3 = Employee(\"å­™ä¸ƒ\", \"äººäº‹éƒ¨\", \"äººäº‹ä¸“å‘˜\")# è®¿é—®å®ä¾‹å±æ€§print(f\"å‘˜å·¥1ä¿¡æ¯: {emp1.get_full_info()}\")print(f\"å‘˜å·¥2ä¿¡æ¯: {emp2.get_full_info()}\")# è®¿é—®ç±»å±æ€§print(f\"\\né€šè¿‡å®ä¾‹è®¿é—®ç±»å±æ€§: {emp1.company_name}\")print(f\"é€šè¿‡ç±»åè®¿é—®ç±»å±æ€§: {Employee.company_name}\")print(f\"å‘˜å·¥æ€»æ•°: {Employee.employee_count}\")# ä¿®æ”¹ç±»å±æ€§Employee.set_company_name(\"æ–°ç§‘æŠ€æœ‰é™å…¬å¸\")print(f\"\\nå…¬å¸ä¿¡æ¯: {Employee.get_company_info()}\")æ–¹æ³•ç±»å‹å®ä¾‹æ–¹æ³•å®ä¾‹æ–¹æ³•æ˜¯æœ€å¸¸è§çš„æ–¹æ³•ç±»å‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯selfï¼Œç”¨äºè®¿é—®å®ä¾‹å±æ€§å’Œå…¶ä»–å®ä¾‹æ–¹æ³•ã€‚class Rectangle:    \"\"\"çŸ©å½¢ç±»\"\"\"        def __init__(self, width, height):        \"\"\"åˆå§‹åŒ–çŸ©å½¢\"\"\"        self.width = width        self.height = height        def area(self):        \"\"\"è®¡ç®—é¢ç§¯ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        return self.width * self.height        def perimeter(self):        \"\"\"è®¡ç®—å‘¨é•¿ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        return 2 * (self.width + self.height)        def scale(self, factor):        \"\"\"ç¼©æ”¾çŸ©å½¢ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        self.width *= factor        self.height *= factor        def is_square(self):        \"\"\"åˆ¤æ–­æ˜¯å¦ä¸ºæ­£æ–¹å½¢ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        return self.width == self.height# ä½¿ç”¨å®ä¾‹æ–¹æ³•rect = Rectangle(4, 6)print(f\"çŸ©å½¢é¢ç§¯: {rect.area()}\")print(f\"çŸ©å½¢å‘¨é•¿: {rect.perimeter()}\")print(f\"æ˜¯å¦ä¸ºæ­£æ–¹å½¢: {rect.is_square()}\")rect.scale(2)print(f\"ç¼©æ”¾åé¢ç§¯: {rect.area()}\")ç±»æ–¹æ³•ç±»æ–¹æ³•ä½¿ç”¨@classmethodè£…é¥°å™¨å®šä¹‰ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯clsï¼Œä»£è¡¨ç±»æœ¬èº«ã€‚class Student:    \"\"\"å­¦ç”Ÿç±»\"\"\"        school_name = \"Pythonå­¦é™¢\"  # ç±»å±æ€§    student_count = 0          # å­¦ç”Ÿæ€»æ•°        def __init__(self, name, grade, student_id=None):        \"\"\"åˆå§‹åŒ–å­¦ç”Ÿä¿¡æ¯\"\"\"        self.name = name        self.grade = grade        self.student_id = student_id or self._generate_student_id()        Student.student_count += 1        def _generate_student_id(self):        \"\"\"ç”Ÿæˆå­¦ç”ŸIDï¼ˆç§æœ‰æ–¹æ³•ï¼‰\"\"\"        return f\"STU{Student.student_count + 1:04d}\"        @classmethod    def from_string(cls, student_string):        \"\"\"ä»å­—ç¬¦ä¸²åˆ›å»ºå­¦ç”Ÿå¯¹è±¡ï¼ˆç±»æ–¹æ³•ï¼‰\"\"\"        name, grade = student_string.split('-')        return cls(name, int(grade))        @classmethod    def from_dict(cls, student_dict):        \"\"\"ä»å­—å…¸åˆ›å»ºå­¦ç”Ÿå¯¹è±¡ï¼ˆç±»æ–¹æ³•ï¼‰\"\"\"        return cls(            student_dict['name'],            student_dict['grade'],            student_dict.get('student_id')        )        @classmethod    def get_school_info(cls):        \"\"\"è·å–å­¦æ ¡ä¿¡æ¯ï¼ˆç±»æ–¹æ³•ï¼‰\"\"\"        return f\"å­¦æ ¡: {cls.school_name}, å­¦ç”Ÿæ€»æ•°: {cls.student_count}\"        @classmethod    def set_school_name(cls, new_name):        \"\"\"è®¾ç½®å­¦æ ¡åç§°ï¼ˆç±»æ–¹æ³•ï¼‰\"\"\"        cls.school_name = new_name        def __str__(self):        return f\"Student(ID: {self.student_id}, Name: {self.name}, Grade: {self.grade})\"# ä½¿ç”¨ä¸åŒæ–¹å¼åˆ›å»ºå­¦ç”Ÿå¯¹è±¡student1 = Student(\"å¼ ä¸‰\", 10)student2 = Student.from_string(\"æå››-11\")student3 = Student.from_dict({    'name': 'ç‹äº”',    'grade': 12,    'student_id': 'STU9999'})print(student1)print(student2)print(student3)print(Student.get_school_info())é™æ€æ–¹æ³•é™æ€æ–¹æ³•ä½¿ç”¨@staticmethodè£…é¥°å™¨å®šä¹‰ï¼Œä¸éœ€è¦selfæˆ–clså‚æ•°ï¼Œä¸ç±»å’Œå®ä¾‹éƒ½æ²¡æœ‰ç›´æ¥å…³è”ã€‚class MathUtils:    \"\"\"æ•°å­¦å·¥å…·ç±»\"\"\"        @staticmethod    def is_prime(n):        \"\"\"åˆ¤æ–­æ˜¯å¦ä¸ºè´¨æ•°ï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\"        if n &lt; 2:            return False        for i in range(2, int(n ** 0.5) + 1):            if n % i == 0:                return False        return True        @staticmethod    def factorial(n):        \"\"\"è®¡ç®—é˜¶ä¹˜ï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\"        if n &lt; 0:            raise ValueError(\"é˜¶ä¹˜ä¸èƒ½è®¡ç®—è´Ÿæ•°\")        if n &lt;= 1:            return 1        result = 1        for i in range(2, n + 1):            result *= i        return result        @staticmethod    def gcd(a, b):        \"\"\"è®¡ç®—æœ€å¤§å…¬çº¦æ•°ï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\"        while b:            a, b = b, a % b        return a        @staticmethod    def lcm(a, b):        \"\"\"è®¡ç®—æœ€å°å…¬å€æ•°ï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\"        return abs(a * b) // MathUtils.gcd(a, b)class Person:    \"\"\"äººå‘˜ç±»\"\"\"        def __init__(self, name, birth_year):        self.name = name        self.birth_year = birth_year        @staticmethod    def is_adult(age):        \"\"\"åˆ¤æ–­æ˜¯å¦æˆå¹´ï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\"        return age &gt;= 18        @staticmethod    def calculate_age(birth_year, current_year=2024):        \"\"\"è®¡ç®—å¹´é¾„ï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\"        return current_year - birth_year        def get_age(self, current_year=2024):        \"\"\"è·å–å½“å‰å¹´é¾„ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        return self.calculate_age(self.birth_year, current_year)        def is_person_adult(self, current_year=2024):        \"\"\"åˆ¤æ–­æ­¤äººæ˜¯å¦æˆå¹´ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        age = self.get_age(current_year)        return self.is_adult(age)# ä½¿ç”¨é™æ€æ–¹æ³•print(f\"17æ˜¯è´¨æ•°å—ï¼Ÿ {MathUtils.is_prime(17)}\")print(f\"5çš„é˜¶ä¹˜: {MathUtils.factorial(5)}\")print(f\"12å’Œ18çš„æœ€å¤§å…¬çº¦æ•°: {MathUtils.gcd(12, 18)}\")print(f\"12å’Œ18çš„æœ€å°å…¬å€æ•°: {MathUtils.lcm(12, 18)}\")# é™æ€æ–¹æ³•å¯ä»¥é€šè¿‡ç±»åæˆ–å®ä¾‹è°ƒç”¨print(f\"20å²æ˜¯å¦æˆå¹´: {Person.is_adult(20)}\")person = Person(\"å¼ ä¸‰\", 2000)print(f\"16å²æ˜¯å¦æˆå¹´: {person.is_adult(16)}\")print(f\"å¼ ä¸‰æ˜¯å¦æˆå¹´: {person.is_person_adult()}\")ğŸ’¡ å®é™…åº”ç”¨é“¶è¡Œè´¦æˆ·ç®¡ç†ç³»ç»Ÿfrom datetime import datetimefrom typing import List, Optionalclass BankAccount:    \"\"\"é“¶è¡Œè´¦æˆ·ç±»\"\"\"        # ç±»å±æ€§    bank_name = \"Pythoné“¶è¡Œ\"    account_count = 0    interest_rate = 0.03  # å¹´åˆ©ç‡3%        def __init__(self, owner_name: str, initial_balance: float = 0):        \"\"\"åˆå§‹åŒ–é“¶è¡Œè´¦æˆ·                Args:            owner_name: è´¦æˆ·æŒæœ‰äººå§“å            initial_balance: åˆå§‹ä½™é¢        \"\"\"        if initial_balance &lt; 0:            raise ValueError(\"åˆå§‹ä½™é¢ä¸èƒ½ä¸ºè´Ÿæ•°\")                # å®ä¾‹å±æ€§        self.owner_name = owner_name        self.balance = initial_balance        self.account_number = self._generate_account_number()        self.transaction_history: List[dict] = []        self.created_at = datetime.now()                # æ›´æ–°è´¦æˆ·æ€»æ•°        BankAccount.account_count += 1                # è®°å½•å¼€æˆ·äº¤æ˜“        if initial_balance &gt; 0:            self._add_transaction(\"å¼€æˆ·å­˜æ¬¾\", initial_balance)        def _generate_account_number(self) -&gt; str:        \"\"\"ç”Ÿæˆè´¦æˆ·å·ç ï¼ˆç§æœ‰æ–¹æ³•ï¼‰\"\"\"        return f\"ACC{BankAccount.account_count + 1:08d}\"        def _add_transaction(self, transaction_type: str, amount: float, balance_after: Optional[float] = None):        \"\"\"æ·»åŠ äº¤æ˜“è®°å½•ï¼ˆç§æœ‰æ–¹æ³•ï¼‰\"\"\"        self.transaction_history.append({            \"æ—¶é—´\": datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"),            \"ç±»å‹\": transaction_type,            \"é‡‘é¢\": amount,            \"ä½™é¢\": balance_after or self.balance        })        def deposit(self, amount: float) -&gt; bool:        \"\"\"å­˜æ¬¾ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        if amount &lt;= 0:            print(\"å­˜æ¬¾é‡‘é¢å¿…é¡»å¤§äº0\")            return False                self.balance += amount        self._add_transaction(\"å­˜æ¬¾\", amount)        print(f\"å­˜æ¬¾æˆåŠŸï¼å½“å‰ä½™é¢: Â¥{self.balance:.2f}\")        return True        def withdraw(self, amount: float) -&gt; bool:        \"\"\"å–æ¬¾ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        if amount &lt;= 0:            print(\"å–æ¬¾é‡‘é¢å¿…é¡»å¤§äº0\")            return False                if amount &gt; self.balance:            print(\"ä½™é¢ä¸è¶³ï¼Œå–æ¬¾å¤±è´¥\")            return False                self.balance -= amount        self._add_transaction(\"å–æ¬¾\", -amount)        print(f\"å–æ¬¾æˆåŠŸï¼å½“å‰ä½™é¢: Â¥{self.balance:.2f}\")        return True        def transfer(self, target_account: 'BankAccount', amount: float) -&gt; bool:        \"\"\"è½¬è´¦ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        if amount &lt;= 0:            print(\"è½¬è´¦é‡‘é¢å¿…é¡»å¤§äº0\")            return False                if amount &gt; self.balance:            print(\"ä½™é¢ä¸è¶³ï¼Œè½¬è´¦å¤±è´¥\")            return False                # æ‰§è¡Œè½¬è´¦        self.balance -= amount        target_account.balance += amount                # è®°å½•äº¤æ˜“        self._add_transaction(f\"è½¬è´¦ç»™{target_account.owner_name}\", -amount)        target_account._add_transaction(f\"æ¥è‡ª{self.owner_name}çš„è½¬è´¦\", amount)                print(f\"è½¬è´¦æˆåŠŸï¼å‘{target_account.owner_name}è½¬è´¦Â¥{amount:.2f}\")        print(f\"å½“å‰ä½™é¢: Â¥{self.balance:.2f}\")        return True        def get_balance(self) -&gt; float:        \"\"\"æŸ¥è¯¢ä½™é¢ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        return self.balance        def get_transaction_history(self, limit: int = 10) -&gt; List[dict]:        \"\"\"è·å–äº¤æ˜“å†å²ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        return self.transaction_history[-limit:]        def calculate_interest(self, months: int = 12) -&gt; float:        \"\"\"è®¡ç®—åˆ©æ¯ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        return self.balance * (BankAccount.interest_rate / 12) * months        @classmethod    def from_existing_account(cls, owner_name: str, account_number: str, balance: float):        \"\"\"ä»ç°æœ‰è´¦æˆ·ä¿¡æ¯åˆ›å»ºå¯¹è±¡ï¼ˆç±»æ–¹æ³•ï¼‰\"\"\"        account = cls(owner_name, balance)        account.account_number = account_number        return account        @classmethod    def get_bank_info(cls) -&gt; str:        \"\"\"è·å–é“¶è¡Œä¿¡æ¯ï¼ˆç±»æ–¹æ³•ï¼‰\"\"\"        return f\"é“¶è¡Œ: {cls.bank_name}, æ€»è´¦æˆ·æ•°: {cls.account_count}, å¹´åˆ©ç‡: {cls.interest_rate*100}%\"        @classmethod    def set_interest_rate(cls, new_rate: float):        \"\"\"è®¾ç½®åˆ©ç‡ï¼ˆç±»æ–¹æ³•ï¼‰\"\"\"        if 0 &lt;= new_rate &lt;= 1:            cls.interest_rate = new_rate            print(f\"åˆ©ç‡å·²æ›´æ–°ä¸º: {new_rate*100}%\")        else:            print(\"åˆ©ç‡å¿…é¡»åœ¨0-100%ä¹‹é—´\")        @staticmethod    def is_valid_amount(amount: float) -&gt; bool:        \"\"\"éªŒè¯é‡‘é¢æ˜¯å¦æœ‰æ•ˆï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\"        return isinstance(amount, (int, float)) and amount &gt; 0        @staticmethod    def format_currency(amount: float) -&gt; str:        \"\"\"æ ¼å¼åŒ–è´§å¸æ˜¾ç¤ºï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\"        return f\"Â¥{amount:,.2f}\"        def __str__(self) -&gt; str:        \"\"\"å­—ç¬¦ä¸²è¡¨ç¤º\"\"\"        return f\"BankAccount(è´¦æˆ·å·: {self.account_number}, æŒæœ‰äºº: {self.owner_name}, ä½™é¢: {self.format_currency(self.balance)})\"        def __repr__(self) -&gt; str:        \"\"\"å¼€å‘è€…è¡¨ç¤º\"\"\"        return f\"BankAccount('{self.owner_name}', {self.balance})\"# ä½¿ç”¨é“¶è¡Œè´¦æˆ·ç³»ç»Ÿif __name__ == \"__main__\":    # åˆ›å»ºè´¦æˆ·    account1 = BankAccount(\"å¼ ä¸‰\", 1000)    account2 = BankAccount(\"æå››\", 500)        print(\"=== è´¦æˆ·ä¿¡æ¯ ===\")    print(account1)    print(account2)    print(f\"\\n{BankAccount.get_bank_info()}\")        print(\"\\n=== é“¶è¡Œæ“ä½œ ===\")    # å­˜æ¬¾    account1.deposit(200)        # å–æ¬¾    account1.withdraw(150)        # è½¬è´¦    account1.transfer(account2, 300)        # æŸ¥è¯¢ä½™é¢    print(f\"\\nå¼ ä¸‰è´¦æˆ·ä½™é¢: {BankAccount.format_currency(account1.get_balance())}\")    print(f\"æå››è´¦æˆ·ä½™é¢: {BankAccount.format_currency(account2.get_balance())}\")        # è®¡ç®—åˆ©æ¯    interest = account1.calculate_interest(12)    print(f\"å¼ ä¸‰è´¦æˆ·å¹´åˆ©æ¯: {BankAccount.format_currency(interest)}\")        # æŸ¥çœ‹äº¤æ˜“å†å²    print(\"\\n=== å¼ ä¸‰çš„äº¤æ˜“å†å² ===\")    for transaction in account1.get_transaction_history():        print(f\"{transaction['æ—¶é—´']} - {transaction['ç±»å‹']}: {BankAccount.format_currency(transaction['é‡‘é¢'])}, ä½™é¢: {BankAccount.format_currency(transaction['ä½™é¢'])}\")å­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿfrom typing import Dict, List, Optionalfrom statistics import mean, medianclass Subject:    \"\"\"ç§‘ç›®ç±»\"\"\"        def __init__(self, name: str, credit: int):        \"\"\"åˆå§‹åŒ–ç§‘ç›®                Args:            name: ç§‘ç›®åç§°            credit: å­¦åˆ†        \"\"\"        self.name = name        self.credit = credit        def __str__(self):        return f\"{self.name}({self.credit}å­¦åˆ†)\"class Grade:    \"\"\"æˆç»©ç±»\"\"\"        def __init__(self, subject: Subject, score: float, semester: str):        \"\"\"åˆå§‹åŒ–æˆç»©                Args:            subject: ç§‘ç›®å¯¹è±¡            score: åˆ†æ•°            semester: å­¦æœŸ        \"\"\"        if not 0 &lt;= score &lt;= 100:            raise ValueError(\"åˆ†æ•°å¿…é¡»åœ¨0-100ä¹‹é—´\")                self.subject = subject        self.score = score        self.semester = semester        self.grade_point = self._calculate_grade_point(score)        self.letter_grade = self._get_letter_grade(score)        @staticmethod    def _calculate_grade_point(score: float) -&gt; float:        \"\"\"è®¡ç®—ç»©ç‚¹ï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\"        if score &gt;= 90:            return 4.0        elif score &gt;= 80:            return 3.0 + (score - 80) * 0.1        elif score &gt;= 70:            return 2.0 + (score - 70) * 0.1        elif score &gt;= 60:            return 1.0 + (score - 60) * 0.1        else:            return 0.0        @staticmethod    def _get_letter_grade(score: float) -&gt; str:        \"\"\"è·å–ç­‰çº§æˆç»©ï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\"        if score &gt;= 90:            return 'A'        elif score &gt;= 80:            return 'B'        elif score &gt;= 70:            return 'C'        elif score &gt;= 60:            return 'D'        else:            return 'F'        def __str__(self):        return f\"{self.subject.name}: {self.score}åˆ† ({self.letter_grade})\"class Student:    \"\"\"å­¦ç”Ÿç±»\"\"\"        # ç±»å±æ€§    school_name = \"Pythonå¤§å­¦\"    student_count = 0        def __init__(self, name: str, student_id: str, major: str):        \"\"\"åˆå§‹åŒ–å­¦ç”Ÿ                Args:            name: å­¦ç”Ÿå§“å            student_id: å­¦å·            major: ä¸“ä¸š        \"\"\"        self.name = name        self.student_id = student_id        self.major = major        self.grades: List[Grade] = []  # æˆç»©åˆ—è¡¨                Student.student_count += 1        def add_grade(self, subject: Subject, score: float, semester: str):        \"\"\"æ·»åŠ æˆç»©ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        grade = Grade(subject, score, semester)        self.grades.append(grade)        print(f\"å·²æ·»åŠ æˆç»©: {grade}\")        def get_grades_by_semester(self, semester: str) -&gt; List[Grade]:        \"\"\"æŒ‰å­¦æœŸè·å–æˆç»©ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        return [grade for grade in self.grades if grade.semester == semester]        def get_subject_grade(self, subject_name: str) -&gt; Optional[Grade]:        \"\"\"è·å–æŒ‡å®šç§‘ç›®æˆç»©ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        for grade in self.grades:            if grade.subject.name == subject_name:                return grade        return None        def calculate_gpa(self, semester: Optional[str] = None) -&gt; float:        \"\"\"è®¡ç®—GPAï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        if semester:            grades = self.get_grades_by_semester(semester)        else:            grades = self.grades                if not grades:            return 0.0                total_points = sum(grade.grade_point * grade.subject.credit for grade in grades)        total_credits = sum(grade.subject.credit for grade in grades)                return total_points / total_credits if total_credits &gt; 0 else 0.0        def calculate_average_score(self, semester: Optional[str] = None) -&gt; float:        \"\"\"è®¡ç®—å¹³å‡åˆ†ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        if semester:            grades = self.get_grades_by_semester(semester)        else:            grades = self.grades                if not grades:            return 0.0                return mean([grade.score for grade in grades])        def get_total_credits(self, semester: Optional[str] = None) -&gt; int:        \"\"\"è·å–æ€»å­¦åˆ†ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        if semester:            grades = self.get_grades_by_semester(semester)        else:            grades = self.grades                return sum(grade.subject.credit for grade in grades)        def get_grade_distribution(self) -&gt; Dict[str, int]:        \"\"\"è·å–æˆç»©åˆ†å¸ƒï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        distribution = {'A': 0, 'B': 0, 'C': 0, 'D': 0, 'F': 0}        for grade in self.grades:            distribution[grade.letter_grade] += 1        return distribution        def is_honor_student(self, gpa_threshold: float = 3.5) -&gt; bool:        \"\"\"åˆ¤æ–­æ˜¯å¦ä¸ºä¼˜ç§€å­¦ç”Ÿï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        return self.calculate_gpa() &gt;= gpa_threshold        def get_transcript(self) -&gt; str:        \"\"\"è·å–æˆç»©å•ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰\"\"\"        transcript = f\"\\n=== {self.name} çš„æˆç»©å• ===\\n\"        transcript += f\"å­¦å·: {self.student_id}\\n\"        transcript += f\"ä¸“ä¸š: {self.major}\\n\"        transcript += f\"å­¦æ ¡: {Student.school_name}\\n\\n\"                # æŒ‰å­¦æœŸåˆ†ç»„æ˜¾ç¤ºæˆç»©        semesters = set(grade.semester for grade in self.grades)        for semester in sorted(semesters):            transcript += f\"--- {semester} ---\\n\"            semester_grades = self.get_grades_by_semester(semester)            for grade in semester_grades:                transcript += f\"{grade.subject.name:12} {grade.score:6.1f}åˆ† {grade.letter_grade:2} {grade.subject.credit}å­¦åˆ†\\n\"                        semester_gpa = self.calculate_gpa(semester)            semester_avg = self.calculate_average_score(semester)            transcript += f\"å­¦æœŸGPA: {semester_gpa:.2f}, å¹³å‡åˆ†: {semester_avg:.1f}\\n\\n\"                # æ€»ä½“ç»Ÿè®¡        overall_gpa = self.calculate_gpa()        overall_avg = self.calculate_average_score()        total_credits = self.get_total_credits()                transcript += f\"--- æ€»ä½“ç»Ÿè®¡ ---\\n\"        transcript += f\"æ€»GPA: {overall_gpa:.2f}\\n\"        transcript += f\"æ€»å¹³å‡åˆ†: {overall_avg:.1f}\\n\"        transcript += f\"æ€»å­¦åˆ†: {total_credits}\\n\"        transcript += f\"ä¼˜ç§€å­¦ç”Ÿ: {'æ˜¯' if self.is_honor_student() else 'å¦'}\\n\"                return transcript        @classmethod    def create_from_info(cls, info_dict: Dict):        \"\"\"ä»ä¿¡æ¯å­—å…¸åˆ›å»ºå­¦ç”Ÿï¼ˆç±»æ–¹æ³•ï¼‰\"\"\"        return cls(            info_dict['name'],            info_dict['student_id'],            info_dict['major']        )        @classmethod    def get_school_stats(cls) -&gt; str:        \"\"\"è·å–å­¦æ ¡ç»Ÿè®¡ä¿¡æ¯ï¼ˆç±»æ–¹æ³•ï¼‰\"\"\"        return f\"å­¦æ ¡: {cls.school_name}, å­¦ç”Ÿæ€»æ•°: {cls.student_count}\"        @staticmethod    def compare_students(student1: 'Student', student2: 'Student') -&gt; str:        \"\"\"æ¯”è¾ƒä¸¤ä¸ªå­¦ç”Ÿçš„æˆç»©ï¼ˆé™æ€æ–¹æ³•ï¼‰\"\"\"        gpa1 = student1.calculate_gpa()        gpa2 = student2.calculate_gpa()        avg1 = student1.calculate_average_score()        avg2 = student2.calculate_average_score()                result = f\"å­¦ç”Ÿæ¯”è¾ƒ:\\n\"        result += f\"{student1.name}: GPA {gpa1:.2f}, å¹³å‡åˆ† {avg1:.1f}\\n\"        result += f\"{student2.name}: GPA {gpa2:.2f}, å¹³å‡åˆ† {avg2:.1f}\\n\"                if gpa1 &gt; gpa2:            result += f\"{student1.name} çš„GPAæ›´é«˜\"        elif gpa2 &gt; gpa1:            result += f\"{student2.name} çš„GPAæ›´é«˜\"        else:            result += \"ä¸¤äººGPAç›¸åŒ\"                return result        def __str__(self):        return f\"Student({self.name}, {self.student_id}, {self.major})\"# ä½¿ç”¨å­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿif __name__ == \"__main__\":    # åˆ›å»ºç§‘ç›®    math = Subject(\"é«˜ç­‰æ•°å­¦\", 4)    physics = Subject(\"å¤§å­¦ç‰©ç†\", 3)    english = Subject(\"å¤§å­¦è‹±è¯­\", 2)    programming = Subject(\"ç¨‹åºè®¾è®¡\", 3)        # åˆ›å»ºå­¦ç”Ÿ    student1 = Student(\"å¼ ä¸‰\", \"2024001\", \"è®¡ç®—æœºç§‘å­¦\")    student2 = Student(\"æå››\", \"2024002\", \"è½¯ä»¶å·¥ç¨‹\")        # æ·»åŠ æˆç»©    student1.add_grade(math, 92, \"2024æ˜¥å­£\")    student1.add_grade(physics, 88, \"2024æ˜¥å­£\")    student1.add_grade(english, 85, \"2024æ˜¥å­£\")    student1.add_grade(programming, 95, \"2024ç§‹å­£\")        student2.add_grade(math, 78, \"2024æ˜¥å­£\")    student2.add_grade(physics, 82, \"2024æ˜¥å­£\")    student2.add_grade(english, 90, \"2024æ˜¥å­£\")    student2.add_grade(programming, 88, \"2024ç§‹å­£\")        # æ˜¾ç¤ºæˆç»©å•    print(student1.get_transcript())    print(student2.get_transcript())        # æ¯”è¾ƒå­¦ç”Ÿ    print(Student.compare_students(student1, student2))        # å­¦æ ¡ç»Ÿè®¡    print(f\"\\n{Student.get_school_stats()}\")âš ï¸ æ³¨æ„äº‹é¡¹  å‘½åè§„èŒƒ: ç±»åä½¿ç”¨å¤§é©¼å³°å‘½åæ³•ï¼Œæ–¹æ³•å’Œå±æ€§ä½¿ç”¨å°å†™åŠ ä¸‹åˆ’çº¿  ç§æœ‰å±æ€§: ä»¥å•ä¸‹åˆ’çº¿å¼€å¤´çš„å±æ€§è¡¨ç¤ºç§æœ‰ï¼Œä¸åº”åœ¨ç±»å¤–éƒ¨ç›´æ¥è®¿é—®  æ–‡æ¡£å­—ç¬¦ä¸²: ä¸ºç±»å’Œæ–¹æ³•æ·»åŠ æ¸…æ™°çš„æ–‡æ¡£å­—ç¬¦ä¸²  å‚æ•°éªŒè¯: åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œå¿…è¦çš„å‚æ•°éªŒè¯  ç±»å‹æç¤º: ä½¿ç”¨ç±»å‹æç¤ºæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§  æ–¹æ³•é€‰æ‹©: æ ¹æ®åŠŸèƒ½é€‰æ‹©åˆé€‚çš„æ–¹æ³•ç±»å‹ï¼ˆå®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•ã€é™æ€æ–¹æ³•ï¼‰  å±æ€§è®¿é—®: ä¼˜å…ˆä½¿ç”¨æ–¹æ³•æ¥è®¿é—®å’Œä¿®æ”¹å±æ€§ï¼Œè€Œä¸æ˜¯ç›´æ¥è®¿é—®ğŸ”— ç›¸å…³å†…å®¹  ç±»çš„ç»§æ‰¿ - å­¦ä¹ ç±»çš„ç»§æ‰¿æœºåˆ¶  ç±»çš„æ–¹æ³• - æ·±å…¥äº†è§£å„ç§æ–¹æ³•ç±»å‹  é­”æœ¯æ–¹æ³• - å­¦ä¹ ç‰¹æ®Šæ–¹æ³•çš„ä½¿ç”¨  å±æ€§ç®¡ç† - æŒæ¡å±æ€§çš„é«˜çº§ç®¡ç†ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - ç±»  PEP 8 - Pythonä»£ç é£æ ¼æŒ‡å—  é¢å‘å¯¹è±¡ç¼–ç¨‹åŸåˆ™ğŸ·ï¸ æ ‡ç­¾ç±» é¢å‘å¯¹è±¡ æ„é€ å‡½æ•° å®ä¾‹å±æ€§ ç±»å±æ€§ å®ä¾‹æ–¹æ³• ç±»æ–¹æ³• é™æ€æ–¹æ³•æœ€åæ›´æ–°: 2024-01-01ä½œè€…: Pythonæ–‡æ¡£å›¢é˜Ÿç‰ˆæœ¬: 1.0",
        "url": "/docs/basics/class-definition/",
        "category": "basics",
        "tags": ["ç±»","é¢å‘å¯¹è±¡","æ„é€ å‡½æ•°","å®ä¾‹å±æ€§","ç±»å±æ€§"]
      }
      
    
  
    
      ,
      {
        "title": "ç±»çš„ç»§æ‰¿",
        "content": "ç±»çš„ç»§æ‰¿æ¦‚è¿°ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå…è®¸ä¸€ä¸ªç±»ï¼ˆå­ç±»ï¼‰ä»å¦ä¸€ä¸ªç±»ï¼ˆçˆ¶ç±»ï¼‰è·å–å±æ€§å’Œæ–¹æ³•ã€‚é€šè¿‡ç»§æ‰¿ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä»£ç å¤ç”¨ï¼Œå»ºç«‹ç±»ä¹‹é—´çš„å±‚æ¬¡å…³ç³»ï¼Œå¹¶æ”¯æŒå¤šæ€æ€§ã€‚Pythonæ”¯æŒå•ç»§æ‰¿å’Œå¤šç»§æ‰¿ï¼Œä¸ºé¢å‘å¯¹è±¡è®¾è®¡æä¾›äº†å¼ºå¤§çš„å·¥å…·ã€‚å­¦ä¹ ç›®æ ‡é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†èƒ½å¤Ÿï¼š  ç†è§£ç»§æ‰¿çš„åŸºæœ¬æ¦‚å¿µå’Œè¯­æ³•  æŒæ¡æ–¹æ³•é‡å†™å’Œsuper()å‡½æ•°çš„ä½¿ç”¨  äº†è§£ç»§æ‰¿ä¸­çš„åˆå§‹åŒ–è¿‡ç¨‹  ç†è§£è®¿é—®æ§åˆ¶åœ¨ç»§æ‰¿ä¸­çš„è¡¨ç°  æŒæ¡å¤šç»§æ‰¿çš„æ¦‚å¿µå’Œæ–¹æ³•è§£æé¡ºåºï¼ˆMROï¼‰  èƒ½å¤Ÿè®¾è®¡åˆç†çš„ç±»ç»§æ‰¿ç»“æ„å‰ç½®çŸ¥è¯†  Pythonç±»çš„å®šä¹‰å’ŒåŸºæœ¬ä½¿ç”¨  å®ä¾‹å±æ€§å’Œç±»å±æ€§çš„åŒºåˆ«  æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨  é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€æ¦‚å¿µè¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µç»§æ‰¿å…è®¸å­ç±»ä»çˆ¶ç±»è·å–ç‰¹å¾ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰ï¼Œå®ç°ä»£ç å¤ç”¨å’Œå±‚æ¬¡åŒ–è®¾è®¡ã€‚åŸºæœ¬è¯­æ³•class å­ç±»å(çˆ¶ç±»å):    # å­ç±»çš„å®šä¹‰    pass# å¤šç»§æ‰¿è¯­æ³•class å­ç±»å(çˆ¶ç±»1, çˆ¶ç±»2, ...):    # å­ç±»çš„å®šä¹‰    passç®€å•ç»§æ‰¿ç¤ºä¾‹class Animal:    def __init__(self, name):        self.name = name        def speak(self):        print(f\"{self.name} å‘å‡ºå£°éŸ³\")        def move(self):        print(f\"{self.name} åœ¨ç§»åŠ¨\")class Dog(Animal):    def speak(self):        print(f\"{self.name} æ±ªæ±ªå«\")class Cat(Animal):    def speak(self):        print(f\"{self.name} å–µå–µå«\")# ä½¿ç”¨ç¤ºä¾‹dog = Dog(\"å°é»‘\")cat = Cat(\"å°ç™½\")dog.speak()  # å°é»‘ æ±ªæ±ªå«dog.move()   # å°é»‘ åœ¨ç§»åŠ¨cat.speak()  # å°ç™½ å–µå–µå«cat.move()   # å°ç™½ åœ¨ç§»åŠ¨ç»§æ‰¿ä¸­çš„è®¿é—®æ§åˆ¶åœ¨ç»§æ‰¿å…³ç³»ä¸­ï¼Œè®¿é—®æ§åˆ¶è§„åˆ™ä¾ç„¶æœ‰æ•ˆï¼šclass Parent:    def __init__(self):        self.public_attr = \"å…¬æœ‰å±æ€§\"        self._protected_attr = \"å—ä¿æŠ¤å±æ€§\"        self.__private_attr = \"ç§æœ‰å±æ€§\"        def public_method(self):        return \"å…¬æœ‰æ–¹æ³•\"        def _protected_method(self):        return \"å—ä¿æŠ¤æ–¹æ³•\"        def __private_method(self):        return \"ç§æœ‰æ–¹æ³•\"        def access_private(self):        return self.__private_method()  # ç±»å†…éƒ¨å¯ä»¥è®¿é—®ç§æœ‰æ–¹æ³•class Child(Parent):    def test_access(self):        print(self.public_attr)        # âœ“ å¯ä»¥è®¿é—®        print(self._protected_attr)    # âœ“ å¯ä»¥è®¿é—®        # print(self.__private_attr)   # âœ— ä¸èƒ½ç›´æ¥è®¿é—®                self.public_method()            # âœ“ å¯ä»¥è°ƒç”¨        self._protected_method()        # âœ“ å¯ä»¥è°ƒç”¨        # self.__private_method()       # âœ— ä¸èƒ½ç›´æ¥è°ƒç”¨                # é€šè¿‡çˆ¶ç±»çš„å…¬æœ‰æ–¹æ³•é—´æ¥è®¿é—®ç§æœ‰æˆå‘˜        print(self.access_private())    # âœ“ å¯ä»¥è°ƒç”¨# ä½¿ç”¨ç¤ºä¾‹child = Child()child.test_access()æ–¹æ³•é‡å†™å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œæä¾›è‡ªå·±çš„å®ç°ï¼šclass Vehicle:    def __init__(self, brand):        self.brand = brand        def start(self):        print(f\"{self.brand} å¯åŠ¨äº†\")        def stop(self):        print(f\"{self.brand} åœæ­¢äº†\")class Car(Vehicle):    def start(self):        print(f\"{self.brand} æ±½è½¦ç‚¹ç«å¯åŠ¨\")        print(\"æ£€æŸ¥å®‰å…¨å¸¦\")        print(\"å¯åŠ¨å¼•æ“\")class Bicycle(Vehicle):    def start(self):        print(f\"{self.brand} è‡ªè¡Œè½¦å¼€å§‹éª‘è¡Œ\")        print(\"è¸©è¸æ¿\")# ä½¿ç”¨ç¤ºä¾‹car = Car(\"å¥”é©°\")bike = Bicycle(\"æ·å®‰ç‰¹\")car.start()   # é‡å†™çš„æ–¹æ³•car.stop()    # ç»§æ‰¿çš„æ–¹æ³•bike.start()  # é‡å†™çš„æ–¹æ³•super()å‡½æ•°çš„ä½¿ç”¨super()å‡½æ•°ç”¨äºè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯åœ¨æ–¹æ³•é‡å†™æ—¶ï¼šclass Animal:    def __init__(self, name, age):        self.name = name        self.age = age        def introduce(self):        print(f\"æˆ‘æ˜¯ {self.name}ï¼Œ{self.age} å²\")class Dog(Animal):    def __init__(self, name, age, breed):        super().__init__(name, age)  # è°ƒç”¨çˆ¶ç±»çš„__init__        self.breed = breed        def introduce(self):        super().introduce()  # è°ƒç”¨çˆ¶ç±»çš„introduceæ–¹æ³•        print(f\"æˆ‘æ˜¯ {self.breed} å“ç§çš„ç‹—\")        def bark(self):        print(f\"{self.name} åœ¨æ±ªæ±ªå«\")# ä½¿ç”¨ç¤ºä¾‹dog = Dog(\"æ—ºè´¢\", 3, \"é‡‘æ¯›\")dog.introduce()# è¾“å‡ºï¼š# æˆ‘æ˜¯ æ—ºè´¢ï¼Œ3 å²# æˆ‘æ˜¯ é‡‘æ¯› å“ç§çš„ç‹—ç»§æ‰¿ä¸­çš„åˆå§‹åŒ–ç†è§£ç»§æ‰¿ä¸­çš„åˆå§‹åŒ–è¿‡ç¨‹éå¸¸é‡è¦ï¼šclass Parent:    def __init__(self, value):        self.parent_value = value        print(f\"Parentåˆå§‹åŒ–: {value}\")class Child(Parent):    def __init__(self, value, child_value):        super().__init__(value)  # å¿…é¡»æ˜¾å¼è°ƒç”¨çˆ¶ç±»çš„__init__        self.child_value = child_value        print(f\"Childåˆå§‹åŒ–: {child_value}\")# æ­£ç¡®çš„åˆå§‹åŒ–child = Child(\"çˆ¶ç±»å€¼\", \"å­ç±»å€¼\")print(child.parent_value)  # çˆ¶ç±»å€¼print(child.child_value)   # å­ç±»å€¼å¦‚æœå­ç±»æ²¡æœ‰å®šä¹‰__init__æ–¹æ³•ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„__init__ï¼šclass Parent:    def __init__(self):        self.value = \"æ¥è‡ªçˆ¶ç±»\"        print(\"çˆ¶ç±»åˆå§‹åŒ–\")class Child(Parent):    pass  # æ²¡æœ‰å®šä¹‰__init__# ä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„__init__child = Child()  # è¾“å‡º: çˆ¶ç±»åˆå§‹åŒ–print(child.value)  # æ¥è‡ªçˆ¶ç±»å¤šç»§æ‰¿Pythonæ”¯æŒå¤šç»§æ‰¿ï¼Œä½†éœ€è¦æ³¨æ„æ–¹æ³•è§£æé¡ºåºï¼ˆMROï¼‰ï¼šclass Flyable:    def fly(self):        print(\"æˆ‘å¯ä»¥é£è¡Œ\")class Swimmable:    def swim(self):        print(\"æˆ‘å¯ä»¥æ¸¸æ³³\")class Duck(Animal, Flyable, Swimmable):    def __init__(self, name):        super().__init__(name)        def speak(self):        print(f\"{self.name} å˜å˜å«\")# ä½¿ç”¨ç¤ºä¾‹duck = Duck(\"å”è€é¸­\")duck.speak()  # å”è€é¸­ å˜å˜å«duck.fly()    # æˆ‘å¯ä»¥é£è¡Œduck.swim()   # æˆ‘å¯ä»¥æ¸¸æ³³duck.move()   # å”è€é¸­ åœ¨ç§»åŠ¨ï¼ˆç»§æ‰¿è‡ªAnimalï¼‰# æŸ¥çœ‹æ–¹æ³•è§£æé¡ºåºprint(Duck.__mro__)# (&lt;class '__main__.Duck'&gt;, &lt;class '__main__.Animal'&gt;, #  &lt;class '__main__.Flyable'&gt;, &lt;class '__main__.Swimmable'&gt;, #  &lt;class 'object'&gt;)ç»§æ‰¿ç›¸å…³çš„ç‰¹æ®Šå±æ€§class A:    passclass B(A):    passclass C(B):    pass# æŸ¥çœ‹ç»§æ‰¿å…³ç³»print(C.__bases__)      # ç›´æ¥çˆ¶ç±»: (&lt;class '__main__.B'&gt;,)print(C.__mro__)        # æ–¹æ³•è§£æé¡ºåºprint(C.mro())          # åŒä¸Šprint(A.__subclasses__()) # Açš„å­ç±»: [&lt;class '__main__.B'&gt;]# å®ä¾‹æ£€æŸ¥c = C()print(isinstance(c, C))  # Trueprint(isinstance(c, B))  # Trueprint(isinstance(c, A))  # Trueprint(issubclass(C, A))  # Trueå®é™…åº”ç”¨æ¡ˆä¾‹æ¡ˆä¾‹1ï¼šå‘˜å·¥ç®¡ç†ç³»ç»Ÿclass Employee:    \"\"\"å‘˜å·¥åŸºç±»\"\"\"    def __init__(self, name, employee_id, salary):        self.name = name        self.employee_id = employee_id        self.salary = salary        def get_info(self):        return f\"å‘˜å·¥: {self.name}, ID: {self.employee_id}, è–ªèµ„: {self.salary}\"        def calculate_bonus(self):        return self.salary * 0.1  # åŸºç¡€å¥–é‡‘10%class Manager(Employee):    \"\"\"ç»ç†ç±»\"\"\"    def __init__(self, name, employee_id, salary, team_size):        super().__init__(name, employee_id, salary)        self.team_size = team_size        def calculate_bonus(self):        base_bonus = super().calculate_bonus()        team_bonus = self.team_size * 1000  # æ¯ä¸ªå›¢é˜Ÿæˆå‘˜1000å¥–é‡‘        return base_bonus + team_bonus        def get_info(self):        base_info = super().get_info()        return f\"{base_info}, å›¢é˜Ÿè§„æ¨¡: {self.team_size}\"class Developer(Employee):    \"\"\"å¼€å‘è€…ç±»\"\"\"    def __init__(self, name, employee_id, salary, programming_languages):        super().__init__(name, employee_id, salary)        self.programming_languages = programming_languages        def calculate_bonus(self):        base_bonus = super().calculate_bonus()        skill_bonus = len(self.programming_languages) * 500  # æ¯ç§è¯­è¨€500å¥–é‡‘        return base_bonus + skill_bonus        def get_info(self):        base_info = super().get_info()        languages = \", \".join(self.programming_languages)        return f\"{base_info}, æŠ€èƒ½: {languages}\"# ä½¿ç”¨ç¤ºä¾‹manager = Manager(\"å¼ ä¸‰\", \"M001\", 15000, 5)developer = Developer(\"æå››\", \"D001\", 12000, [\"Python\", \"Java\", \"JavaScript\"])print(manager.get_info())print(f\"ç»ç†å¥–é‡‘: {manager.calculate_bonus()}\")print()print(developer.get_info())print(f\"å¼€å‘è€…å¥–é‡‘: {developer.calculate_bonus()}\")æ¡ˆä¾‹2ï¼šå›¾å½¢ç»˜åˆ¶ç³»ç»Ÿimport mathclass Shape:    \"\"\"å›¾å½¢åŸºç±»\"\"\"    def __init__(self, color=\"black\"):        self.color = color        def area(self):        raise NotImplementedError(\"å­ç±»å¿…é¡»å®ç°areaæ–¹æ³•\")        def perimeter(self):        raise NotImplementedError(\"å­ç±»å¿…é¡»å®ç°perimeteræ–¹æ³•\")        def describe(self):        return f\"è¿™æ˜¯ä¸€ä¸ª{self.color}è‰²çš„å›¾å½¢\"class Circle(Shape):    \"\"\"åœ†å½¢ç±»\"\"\"    def __init__(self, radius, color=\"black\"):        super().__init__(color)        self.radius = radius        def area(self):        return math.pi * self.radius ** 2        def perimeter(self):        return 2 * math.pi * self.radius        def describe(self):        base_desc = super().describe()        return f\"{base_desc}ï¼ŒåŠå¾„ä¸º{self.radius}çš„åœ†å½¢\"class Rectangle(Shape):    \"\"\"çŸ©å½¢ç±»\"\"\"    def __init__(self, width, height, color=\"black\"):        super().__init__(color)        self.width = width        self.height = height        def area(self):        return self.width * self.height        def perimeter(self):        return 2 * (self.width + self.height)        def describe(self):        base_desc = super().describe()        return f\"{base_desc}ï¼Œå®½{self.width}é«˜{self.height}çš„çŸ©å½¢\"class Square(Rectangle):    \"\"\"æ­£æ–¹å½¢ç±»ï¼ˆç»§æ‰¿è‡ªçŸ©å½¢ï¼‰\"\"\"    def __init__(self, side, color=\"black\"):        super().__init__(side, side, color)  # æ­£æ–¹å½¢çš„å®½é«˜ç›¸ç­‰        self.side = side        def describe(self):        return f\"è¿™æ˜¯ä¸€ä¸ª{self.color}è‰²çš„ï¼Œè¾¹é•¿ä¸º{self.side}çš„æ­£æ–¹å½¢\"# ä½¿ç”¨ç¤ºä¾‹shapes = [    Circle(5, \"çº¢\"),    Rectangle(4, 6, \"è“\"),    Square(3, \"ç»¿\")]for shape in shapes:    print(shape.describe())    print(f\"é¢ç§¯: {shape.area():.2f}\")    print(f\"å‘¨é•¿: {shape.perimeter():.2f}\")    print(\"-\" * 30)æ³¨æ„äº‹é¡¹  åˆç†ä½¿ç”¨ç»§æ‰¿ï¼šç»§æ‰¿åº”è¯¥è¡¨ç¤ºâ€æ˜¯ä¸€ä¸ªâ€çš„å…³ç³»ï¼Œè€Œä¸æ˜¯â€æœ‰ä¸€ä¸ªâ€çš„å…³ç³»  é¿å…è¿‡æ·±çš„ç»§æ‰¿å±‚æ¬¡ï¼šè¿‡æ·±çš„ç»§æ‰¿ä¼šå¢åŠ ä»£ç å¤æ‚æ€§  è°¨æ…ä½¿ç”¨å¤šç»§æ‰¿ï¼šå¤šç»§æ‰¿å¯èƒ½å¯¼è‡´é’»çŸ³é—®é¢˜ï¼Œéœ€è¦ç†è§£MRO  æ­£ç¡®è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–ï¼šåœ¨å­ç±»çš„__init__ä¸­è®°å¾—è°ƒç”¨super().__init__()  éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ï¼šå­ç±»å¯¹è±¡åº”è¯¥èƒ½å¤Ÿæ›¿æ¢çˆ¶ç±»å¯¹è±¡è€Œä¸å½±å“ç¨‹åºæ­£ç¡®æ€§ç›¸å…³å†…å®¹  ç±»çš„å®šä¹‰ - äº†è§£ç±»çš„åŸºæœ¬å®šä¹‰  å¤šæ€æ€§ - ç»§æ‰¿å®ç°å¤šæ€çš„åŸºç¡€  æŠ½è±¡ç±» - ä½¿ç”¨æŠ½è±¡ç±»å®šä¹‰æ¥å£  è®¾è®¡æ¨¡å¼ - ç»§æ‰¿åœ¨è®¾è®¡æ¨¡å¼ä¸­çš„åº”ç”¨æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ï¼šç±»çš„ç»§æ‰¿  ã€ŠEffective Pythonã€‹ä¸­å…³äºç»§æ‰¿çš„æœ€ä½³å®è·µ  é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ï¼ˆSOLIDåŸåˆ™ï¼‰  ç»„åˆvsç»§æ‰¿çš„é€‰æ‹©ç­–ç•¥",
        "url": "/docs/basics/class-inheritance/",
        "category": "PythonåŸºç¡€",
        "tags": ["é¢å‘å¯¹è±¡","ç»§æ‰¿","å¤šæ€","æ–¹æ³•é‡å†™"]
      }
      
    
  
    
      ,
      {
        "title": "compile() - ä»£ç ç¼–è¯‘å‡½æ•°",
        "content": "compile() - ä»£ç ç¼–è¯‘å‡½æ•°ğŸ“ æ¦‚è¿°compile() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºå°†å­—ç¬¦ä¸²å½¢å¼çš„Pythonä»£ç ç¼–è¯‘ä¸ºä»£ç å¯¹è±¡ã€‚ç¼–è¯‘åçš„ä»£ç å¯¹è±¡å¯ä»¥è¢« exec() æˆ– eval() å‡½æ•°æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œã€‚è¿™ä¸ªå‡½æ•°åœ¨åŠ¨æ€ä»£ç ç”Ÿæˆã€æ€§èƒ½ä¼˜åŒ–ã€ä»£ç åˆ†æç­‰åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡compile()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œè¯­æ³•  ç†è§£ä»£ç å¯¹è±¡çš„æ¦‚å¿µå’Œç‰¹æ€§  å­¦ä¼šä¸åŒç¼–è¯‘æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯  æŒæ¡ç¼–è¯‘ä¼˜åŒ–å’Œç¼“å­˜æŠ€æœ¯  äº†è§£å­—èŠ‚ç åˆ†æå’Œè°ƒè¯•æŠ€æœ¯ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  è¡¨è¾¾å¼å’Œè¯­å¥çš„åŒºåˆ«  å¼‚å¸¸å¤„ç†çš„åŸºæœ¬çŸ¥è¯†  æ–‡ä»¶æ“ä½œåŸºç¡€  é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µcompile() å‡½æ•°å°†æºä»£ç å­—ç¬¦ä¸²ç¼–è¯‘æˆä»£ç å¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ï¼š  è¯æ³•åˆ†æï¼ˆLexical Analysisï¼‰  è¯­æ³•åˆ†æï¼ˆSyntax Analysisï¼‰  æŠ½è±¡è¯­æ³•æ ‘ç”Ÿæˆï¼ˆAST Generationï¼‰  å­—èŠ‚ç ç”Ÿæˆï¼ˆBytecode Generationï¼‰ç¼–è¯‘åçš„ä»£ç å¯¹è±¡å¯ä»¥è¢«é‡å¤æ‰§è¡Œï¼Œé¿å…äº†é‡å¤ç¼–è¯‘çš„å¼€é”€ã€‚è¯­æ³•æ ¼å¼compile(source, filename, mode, flags=0, dont_inherit=False, optimize=-1)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  source      å­—ç¬¦ä¸²ã€å­—èŠ‚ä¸²æˆ–ASTå¯¹è±¡      æ˜¯      æ—       è¦ç¼–è¯‘çš„æºä»£ç               filename      å­—ç¬¦ä¸²      æ˜¯      æ—       æ–‡ä»¶åï¼ˆç”¨äºé”™è¯¯æŠ¥å‘Šï¼‰              mode      å­—ç¬¦ä¸²      æ˜¯      æ—       ç¼–è¯‘æ¨¡å¼ï¼šâ€™execâ€™ã€â€™evalâ€™ã€â€™singleâ€™              flags      æ•´æ•°      å¦      0      ç¼–è¯‘æ ‡å¿—              dont_inherit      å¸ƒå°”å€¼      å¦      False      æ˜¯å¦ç»§æ‰¿ç¼–è¯‘æ ‡å¿—              optimize      æ•´æ•°      å¦      -1      ä¼˜åŒ–çº§åˆ«ï¼š-1ã€0ã€1ã€2      ç¼–è¯‘æ¨¡å¼  â€˜execâ€™: ç¼–è¯‘è¯­å¥åºåˆ—ï¼Œè¿”å›None  â€˜evalâ€™: ç¼–è¯‘å•ä¸ªè¡¨è¾¾å¼ï¼Œè¿”å›è¡¨è¾¾å¼çš„å€¼  â€˜singleâ€™: ç¼–è¯‘å•ä¸ªäº¤äº’å¼è¯­å¥è¿”å›å€¼  ç±»å‹: ä»£ç å¯¹è±¡ï¼ˆcode objectï¼‰  å†…å®¹: å¯æ‰§è¡Œçš„å­—èŠ‚ç å¯¹è±¡ğŸ’¡ ä»£ç ç¤ºä¾‹åŸºæœ¬ç”¨æ³•# åŸºæœ¬ç¼–è¯‘ç¤ºä¾‹print(\"åŸºæœ¬ç¼–è¯‘ç¤ºä¾‹:\")# ç¼–è¯‘è¡¨è¾¾å¼ï¼ˆevalæ¨¡å¼ï¼‰expr_source = \"2 + 3 * 4\"expr_code = compile(expr_source, '&lt;string&gt;', 'eval')result = eval(expr_code)print(f\"è¡¨è¾¾å¼ '{expr_source}' = {result}\")  # 14# ç¼–è¯‘è¯­å¥ï¼ˆexecæ¨¡å¼ï¼‰stmt_source = \"\"\"x = 10y = 20z = x + yprint(f'x + y = {z}')\"\"\"stmt_code = compile(stmt_source, '&lt;string&gt;', 'exec')exec(stmt_code)# ç¼–è¯‘å•ä¸ªäº¤äº’å¼è¯­å¥ï¼ˆsingleæ¨¡å¼ï¼‰single_source = \"print('Hello from single mode!')\"single_code = compile(single_source, '&lt;string&gt;', 'single')exec(single_code)# æŸ¥çœ‹ä»£ç å¯¹è±¡å±æ€§print(f\"\\nä»£ç å¯¹è±¡å±æ€§:\")print(f\"  æ–‡ä»¶å: {expr_code.co_filename}\")print(f\"  åç§°: {expr_code.co_name}\")print(f\"  å‚æ•°æ•°é‡: {expr_code.co_argcount}\")print(f\"  å±€éƒ¨å˜é‡æ•°é‡: {expr_code.co_nlocals}\")print(f\"  å­—èŠ‚ç : {expr_code.co_code[:20]}...\")  # æ˜¾ç¤ºå‰20ä¸ªå­—èŠ‚# æ¯”è¾ƒç¼–è¯‘æ€§èƒ½import timeprint(f\"\\næ€§èƒ½æ¯”è¾ƒ:\")# é‡å¤æ‰§è¡Œå­—ç¬¦ä¸²ä»£ç ï¼ˆæ¯æ¬¡éƒ½ç¼–è¯‘ï¼‰code_string = \"sum(range(1000))\"start_time = time.time()for _ in range(1000):    result = eval(code_string)string_time = time.time() - start_time# é‡å¤æ‰§è¡Œç¼–è¯‘åçš„ä»£ç compiled_code = compile(code_string, '&lt;string&gt;', 'eval')start_time = time.time()for _ in range(1000):    result = eval(compiled_code)compiled_time = time.time() - start_timeprint(f\"å­—ç¬¦ä¸²æ‰§è¡Œæ—¶é—´: {string_time:.4f}ç§’\")print(f\"ç¼–è¯‘åæ‰§è¡Œæ—¶é—´: {compiled_time:.4f}ç§’\")print(f\"æ€§èƒ½æå‡: {string_time/compiled_time:.1f}å€\")ç¼–è¯‘æ ‡å¿—å’Œä¼˜åŒ–# ç¼–è¯‘æ ‡å¿—å’Œä¼˜åŒ–ç¤ºä¾‹print(\"\\nç¼–è¯‘æ ‡å¿—å’Œä¼˜åŒ–ç¤ºä¾‹:\")# å¯¼å…¥ç¼–è¯‘æ ‡å¿—from __future__ import annotationsimport ast# ä¸åŒä¼˜åŒ–çº§åˆ«çš„ç¼–è¯‘code_source = \"\"\"def calculate(x):    \"\"\"è®¡ç®—å‡½æ•°\"\"\"    assert x &gt; 0, \"x must be positive\"  # æ–­è¨€åœ¨ä¼˜åŒ–æ—¶å¯èƒ½è¢«ç§»é™¤    result = x * 2 + 1    return resultvalue = calculate(10)\"\"\"print(\"ä¸åŒä¼˜åŒ–çº§åˆ«ç¼–è¯‘:\")# æ— ä¼˜åŒ–ï¼ˆoptimize=0ï¼‰code_no_opt = compile(code_source, '&lt;string&gt;', 'exec', optimize=0)print(f\"  æ— ä¼˜åŒ–å­—èŠ‚ç é•¿åº¦: {len(code_no_opt.co_code)}\")# åŸºæœ¬ä¼˜åŒ–ï¼ˆoptimize=1ï¼‰code_opt1 = compile(code_source, '&lt;string&gt;', 'exec', optimize=1)print(f\"  åŸºæœ¬ä¼˜åŒ–å­—èŠ‚ç é•¿åº¦: {len(code_opt1.co_code)}\")# é«˜çº§ä¼˜åŒ–ï¼ˆoptimize=2ï¼‰code_opt2 = compile(code_source, '&lt;string&gt;', 'exec', optimize=2)print(f\"  é«˜çº§ä¼˜åŒ–å­—èŠ‚ç é•¿åº¦: {len(code_opt2.co_code)}\")# ä½¿ç”¨ç¼–è¯‘æ ‡å¿—print(f\"\\nç¼–è¯‘æ ‡å¿—ç¤ºä¾‹:\")# å¯ç”¨é™¤æ³•ç‰¹æ€§from __future__ import divisiondivision_code = \"result = 3 / 2\"  # åœ¨Python 3ä¸­é»˜è®¤æ˜¯çœŸé™¤æ³•# ç¼–è¯‘æ—¶æŒ‡å®šæ ‡å¿—flags = 0try:    compiled_with_flags = compile(division_code, '&lt;string&gt;', 'exec', flags=flags)    namespace = {}    exec(compiled_with_flags, namespace)    print(f\"  é™¤æ³•ç»“æœ: {namespace['result']}\")except Exception as e:    print(f\"  ç¼–è¯‘å¤±è´¥: {e}\")# è¯­æ³•æ£€æŸ¥ç¼–è¯‘print(f\"\\nè¯­æ³•æ£€æŸ¥:\")valid_codes = [    \"x = 1 + 2\",    \"def func(): return 42\",    \"[x for x in range(10) if x % 2 == 0]\"]invalid_codes = [    \"x = 1 +\",  # è¯­æ³•é”™è¯¯    \"def func( return 42\",  # æ‹¬å·ä¸åŒ¹é…    \"if x == 1 print('hello')\",  # ç¼ºå°‘å†’å·]print(\"æœ‰æ•ˆä»£ç ç¼–è¯‘:\")for code in valid_codes:    try:        compile(code, '&lt;string&gt;', 'exec')        print(f\"  âœ“ '{code}' - ç¼–è¯‘æˆåŠŸ\")    except SyntaxError as e:        print(f\"  âœ— '{code}' - è¯­æ³•é”™è¯¯: {e}\")print(\"\\næ— æ•ˆä»£ç ç¼–è¯‘:\")for code in invalid_codes:    try:        compile(code, '&lt;string&gt;', 'exec')        print(f\"  âœ“ '{code}' - ç¼–è¯‘æˆåŠŸï¼ˆä¸åº”è¯¥æˆåŠŸï¼‰\")    except SyntaxError as e:        print(f\"  âœ— '{code}' - è¯­æ³•é”™è¯¯: {e.msg}\")ä»£ç ç¼“å­˜ç³»ç»Ÿimport hashlibimport pickleimport osfrom typing import Dict, Any, Optional# ä»£ç ç¼“å­˜ç³»ç»Ÿclass CodeCache:    \"\"\"ä»£ç ç¼–è¯‘ç¼“å­˜ç³»ç»Ÿ\"\"\"        def __init__(self, cache_dir: str = \"code_cache\"):        self.cache_dir = cache_dir        self.memory_cache: Dict[str, Any] = {}                # åˆ›å»ºç¼“å­˜ç›®å½•        if not os.path.exists(cache_dir):            os.makedirs(cache_dir)        def _get_cache_key(self, source: str, mode: str, optimize: int) -&gt; str:        \"\"\"ç”Ÿæˆç¼“å­˜é”®\"\"\"        content = f\"{source}|{mode}|{optimize}\"        return hashlib.md5(content.encode()).hexdigest()        def _get_cache_path(self, cache_key: str) -&gt; str:        \"\"\"è·å–ç¼“å­˜æ–‡ä»¶è·¯å¾„\"\"\"        return os.path.join(self.cache_dir, f\"{cache_key}.pyc\")        def get_from_memory(self, cache_key: str) -&gt; Optional[Any]:        \"\"\"ä»å†…å­˜ç¼“å­˜è·å–\"\"\"        return self.memory_cache.get(cache_key)        def save_to_memory(self, cache_key: str, code_obj: Any):        \"\"\"ä¿å­˜åˆ°å†…å­˜ç¼“å­˜\"\"\"        self.memory_cache[cache_key] = code_obj        def get_from_disk(self, cache_key: str) -&gt; Optional[Any]:        \"\"\"ä»ç£ç›˜ç¼“å­˜è·å–\"\"\"        cache_path = self._get_cache_path(cache_key)        if os.path.exists(cache_path):            try:                with open(cache_path, 'rb') as f:                    return pickle.load(f)            except Exception:                # ç¼“å­˜æ–‡ä»¶æŸåï¼Œåˆ é™¤å®ƒ                os.remove(cache_path)        return None        def save_to_disk(self, cache_key: str, code_obj: Any):        \"\"\"ä¿å­˜åˆ°ç£ç›˜ç¼“å­˜\"\"\"        cache_path = self._get_cache_path(cache_key)        try:            with open(cache_path, 'wb') as f:                pickle.dump(code_obj, f)        except Exception as e:            print(f\"ä¿å­˜ç¼“å­˜å¤±è´¥: {e}\")        def compile_with_cache(self, source: str, filename: str = '&lt;string&gt;',                           mode: str = 'exec', optimize: int = -1) -&gt; Any:        \"\"\"å¸¦ç¼“å­˜çš„ç¼–è¯‘\"\"\"        # ç”Ÿæˆç¼“å­˜é”®        cache_key = self._get_cache_key(source, mode, optimize)                # å°è¯•ä»å†…å­˜ç¼“å­˜è·å–        code_obj = self.get_from_memory(cache_key)        if code_obj is not None:            return code_obj                # å°è¯•ä»ç£ç›˜ç¼“å­˜è·å–        code_obj = self.get_from_disk(cache_key)        if code_obj is not None:            # ä¿å­˜åˆ°å†…å­˜ç¼“å­˜            self.save_to_memory(cache_key, code_obj)            return code_obj                # ç¼–è¯‘ä»£ç         try:            code_obj = compile(source, filename, mode, optimize=optimize)                        # ä¿å­˜åˆ°ç¼“å­˜            self.save_to_memory(cache_key, code_obj)            self.save_to_disk(cache_key, code_obj)                        return code_obj                    except Exception as e:            raise RuntimeError(f\"ç¼–è¯‘å¤±è´¥: {e}\")        def clear_cache(self):        \"\"\"æ¸…ç©ºç¼“å­˜\"\"\"        # æ¸…ç©ºå†…å­˜ç¼“å­˜        self.memory_cache.clear()                # æ¸…ç©ºç£ç›˜ç¼“å­˜        for filename in os.listdir(self.cache_dir):            if filename.endswith('.pyc'):                os.remove(os.path.join(self.cache_dir, filename))        def get_cache_stats(self) -&gt; Dict[str, Any]:        \"\"\"è·å–ç¼“å­˜ç»Ÿè®¡\"\"\"        disk_files = [f for f in os.listdir(self.cache_dir) if f.endswith('.pyc')]                return {            'memory_cache_size': len(self.memory_cache),            'disk_cache_size': len(disk_files),            'cache_dir': self.cache_dir        }# æµ‹è¯•ä»£ç ç¼“å­˜print(\"\\nä»£ç ç¼“å­˜ç³»ç»Ÿç¤ºä¾‹:\")cache = CodeCache()# æµ‹è¯•ä»£ç test_codes = [    \"result = sum(range(100))\",    \"def factorial(n): return 1 if n &lt;= 1 else n * factorial(n-1)\",    \"squares = [x**2 for x in range(10)]\",    \"import math; result = math.sqrt(16)\"]print(\"é¦–æ¬¡ç¼–è¯‘ï¼ˆæ— ç¼“å­˜ï¼‰:\")start_time = time.time()for i, code in enumerate(test_codes):    compiled_code = cache.compile_with_cache(code)    print(f\"  ä»£ç  {i+1}: ç¼–è¯‘å®Œæˆ\")first_time = time.time() - start_timeprint(f\"\\nç¬¬äºŒæ¬¡ç¼–è¯‘ï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰:\")start_time = time.time()for i, code in enumerate(test_codes):    compiled_code = cache.compile_with_cache(code)    print(f\"  ä»£ç  {i+1}: ä»ç¼“å­˜è·å–\")second_time = time.time() - start_timeprint(f\"\\næ€§èƒ½å¯¹æ¯”:\")print(f\"é¦–æ¬¡ç¼–è¯‘æ—¶é—´: {first_time:.4f}ç§’\")print(f\"ç¼“å­˜ç¼–è¯‘æ—¶é—´: {second_time:.4f}ç§’\")print(f\"æ€§èƒ½æå‡: {first_time/second_time:.1f}å€\")# ç¼“å­˜ç»Ÿè®¡stats = cache.get_cache_stats()print(f\"\\nç¼“å­˜ç»Ÿè®¡:\")print(f\"  å†…å­˜ç¼“å­˜å¤§å°: {stats['memory_cache_size']}\")print(f\"  ç£ç›˜ç¼“å­˜å¤§å°: {stats['disk_cache_size']}\")print(f\"  ç¼“å­˜ç›®å½•: {stats['cache_dir']}\")# æ¸…ç†ç¼“å­˜cache.clear_cache()print(f\"\\nç¼“å­˜å·²æ¸…ç†\")åŠ¨æ€ä»£ç ç”Ÿæˆå™¨from typing import List, Dict, Any, Callableimport inspect# åŠ¨æ€ä»£ç ç”Ÿæˆå™¨class DynamicCodeGenerator:    \"\"\"åŠ¨æ€ä»£ç ç”Ÿæˆå™¨\"\"\"        def __init__(self):        self.code_cache = CodeCache()        self.generated_functions: Dict[str, Callable] = {}        def generate_getter_setter(self, class_name: str, fields: List[str]) -&gt; str:        \"\"\"ç”Ÿæˆgetter/setterç±»ä»£ç \"\"\"        lines = [f\"class {class_name}:\"]        lines.append(\"    def __init__(self):\")                # åˆå§‹åŒ–å­—æ®µ        for field in fields:            lines.append(f\"        self._{field} = None\")                lines.append(\"\")                # ç”Ÿæˆgetterå’Œsetter        for field in fields:            # Getter            lines.append(f\"    def get_{field}(self):\")            lines.append(f\"        return self._{field}\")            lines.append(\"\")                        # Setter            lines.append(f\"    def set_{field}(self, value):\")            lines.append(f\"        self._{field} = value\")            lines.append(f\"        return self\")            lines.append(\"\")                # __str__ æ–¹æ³•        lines.append(\"    def __str__(self):\")        field_strs = [f\"'{field}: {{self._{field}}}''.replace('{field}', field) for field in fields]        lines.append(f\"        return f'{class_name}(' + ', '.join([{', '.join(field_strs)}]) + ')'\")                return \"\\n\".join(lines)        def generate_validator_function(self, func_name: str, rules: Dict[str, Any]) -&gt; str:        \"\"\"ç”ŸæˆéªŒè¯å‡½æ•°ä»£ç \"\"\"        lines = [f\"def {func_name}(data):\"]        lines.append(\"    errors = []\")        lines.append(\"\")                for field, rule in rules.items():            lines.append(f\"    # éªŒè¯ {field}\")            lines.append(f\"    if '{field}' not in data:\")            lines.append(f\"        errors.append('{field} is required')\")            lines.append(f\"    else:\")            lines.append(f\"        value = data['{field}']\")                        if 'type' in rule:                type_name = rule['type'].__name__                lines.append(f\"        if not isinstance(value, {rule['type'].__name__}):\")                lines.append(f\"            errors.append('{field} must be {type_name}')\")                        if 'min_length' in rule:                lines.append(f\"        elif len(value) &lt; {rule['min_length']}:\")                lines.append(f\"            errors.append('{field} must be at least {rule['min_length']} characters')\")                        if 'max_length' in rule:                lines.append(f\"        elif len(value) &gt; {rule['max_length']}:\")                lines.append(f\"            errors.append('{field} must be at most {rule['max_length']} characters')\")                        if 'min_value' in rule:                lines.append(f\"        elif value &lt; {rule['min_value']}:\")                lines.append(f\"            errors.append('{field} must be at least {rule['min_value']}')\")                        if 'max_value' in rule:                lines.append(f\"        elif value &gt; {rule['max_value']}:\")                lines.append(f\"            errors.append('{field} must be at most {rule['max_value']}')\")                        lines.append(\"\")                lines.append(\"    return {'valid': len(errors) == 0, 'errors': errors}\")                return \"\\n\".join(lines)        def generate_math_function(self, func_name: str, expression: str, variables: List[str]) -&gt; str:        \"\"\"ç”Ÿæˆæ•°å­¦å‡½æ•°ä»£ç \"\"\"        params = ', '.join(variables)        lines = [            f\"def {func_name}({params}):\",            f\"    return {expression}\"        ]        return \"\\n\".join(lines)        def compile_and_execute(self, code: str, func_name: str = None) -&gt; Any:        \"\"\"ç¼–è¯‘å¹¶æ‰§è¡Œä»£ç \"\"\"        try:            # ç¼–è¯‘ä»£ç             compiled_code = self.code_cache.compile_with_cache(code)                        # æ‰§è¡Œä»£ç             namespace = {}            exec(compiled_code, namespace)                        # å¦‚æœæŒ‡å®šäº†å‡½æ•°åï¼Œè¿”å›å‡½æ•°            if func_name and func_name in namespace:                func = namespace[func_name]                self.generated_functions[func_name] = func                return func                        return namespace                    except Exception as e:            raise RuntimeError(f\"ä»£ç ç¼–è¯‘æˆ–æ‰§è¡Œå¤±è´¥: {e}\")        def get_function(self, func_name: str) -&gt; Optional[Callable]:        \"\"\"è·å–ç”Ÿæˆçš„å‡½æ•°\"\"\"        return self.generated_functions.get(func_name)        def list_functions(self) -&gt; List[str]:        \"\"\"åˆ—å‡ºæ‰€æœ‰ç”Ÿæˆçš„å‡½æ•°\"\"\"        return list(self.generated_functions.keys())# æµ‹è¯•åŠ¨æ€ä»£ç ç”Ÿæˆå™¨print(\"\\nåŠ¨æ€ä»£ç ç”Ÿæˆå™¨ç¤ºä¾‹:\")generator = DynamicCodeGenerator()# ç”Ÿæˆgetter/setterç±»print(\"1. ç”Ÿæˆgetter/setterç±»:\")user_class_code = generator.generate_getter_setter('User', ['name', 'age', 'email'])print(\"ç”Ÿæˆçš„ç±»ä»£ç :\")print(user_class_code[:200] + \"...\")# ç¼–è¯‘å¹¶ä½¿ç”¨ç±»namespace = generator.compile_and_execute(user_class_code)User = namespace['User']# æµ‹è¯•ç”Ÿæˆçš„ç±»user = User()user.set_name('Alice').set_age(30).set_email('alice@example.com')print(f\"\\nç”¨æˆ·å¯¹è±¡: {user}\")print(f\"å§“å: {user.get_name()}\")print(f\"å¹´é¾„: {user.get_age()}\")print(f\"é‚®ç®±: {user.get_email()}\")# ç”ŸæˆéªŒè¯å‡½æ•°print(f\"\\n2. ç”ŸæˆéªŒè¯å‡½æ•°:\")validation_rules = {    'name': {'type': str, 'min_length': 2, 'max_length': 50},    'age': {'type': int, 'min_value': 0, 'max_value': 150},    'email': {'type': str, 'min_length': 5, 'max_length': 100}}validator_code = generator.generate_validator_function('validate_user', validation_rules)validate_user = generator.compile_and_execute(validator_code, 'validate_user')# æµ‹è¯•éªŒè¯å‡½æ•°test_data = [    {'name': 'Alice', 'age': 30, 'email': 'alice@example.com'},    {'name': 'B', 'age': 30, 'email': 'bob@example.com'},  # åå­—å¤ªçŸ­    {'name': 'Charlie', 'age': -5, 'email': 'charlie@example.com'},  # å¹´é¾„æ— æ•ˆ    {'name': 'David', 'email': 'david@example.com'},  # ç¼ºå°‘å¹´é¾„]for i, data in enumerate(test_data, 1):    result = validate_user(data)    print(f\"  æµ‹è¯• {i}: {'æœ‰æ•ˆ' if result['valid'] else 'æ— æ•ˆ'}\")    if not result['valid']:        print(f\"    é”™è¯¯: {result['errors']}\")# ç”Ÿæˆæ•°å­¦å‡½æ•°print(f\"\\n3. ç”Ÿæˆæ•°å­¦å‡½æ•°:\")math_functions = [    ('quadratic', 'a * x**2 + b * x + c', ['a', 'b', 'c', 'x']),    ('distance', '((x2 - x1)**2 + (y2 - y1)**2)**0.5', ['x1', 'y1', 'x2', 'y2']),    ('compound_interest', 'principal * (1 + rate)**time', ['principal', 'rate', 'time'])]for func_name, expression, variables in math_functions:    math_code = generator.generate_math_function(func_name, expression, variables)    func = generator.compile_and_execute(math_code, func_name)    print(f\"  ç”Ÿæˆå‡½æ•°: {func_name}\")# æµ‹è¯•æ•°å­¦å‡½æ•°print(f\"\\næ•°å­¦å‡½æ•°æµ‹è¯•:\")quadratic = generator.get_function('quadratic')distance = generator.get_function('distance')compound_interest = generator.get_function('compound_interest')print(f\"  äºŒæ¬¡å‡½æ•° f(x) = 2xÂ² + 3x + 1, x=5: {quadratic(2, 3, 1, 5)}\")print(f\"  è·ç¦» (0,0) åˆ° (3,4): {distance(0, 0, 3, 4)}\")print(f\"  å¤åˆ© æœ¬é‡‘1000, åˆ©ç‡5%, æ—¶é—´10å¹´: {compound_interest(1000, 0.05, 10):.2f}\")# åˆ—å‡ºæ‰€æœ‰ç”Ÿæˆçš„å‡½æ•°print(f\"\\nç”Ÿæˆçš„å‡½æ•°åˆ—è¡¨: {generator.list_functions()}\")ğŸš€ é«˜çº§åº”ç”¨å­—èŠ‚ç åˆ†æå·¥å…·import disimport typesfrom typing import List, Dict, Any# å­—èŠ‚ç åˆ†æå·¥å…·class BytecodeAnalyzer:    \"\"\"å­—èŠ‚ç åˆ†æå·¥å…·\"\"\"        def __init__(self):        self.analysis_cache = {}        def analyze_code(self, code_obj: types.CodeType) -&gt; Dict[str, Any]:        \"\"\"åˆ†æä»£ç å¯¹è±¡\"\"\"        analysis = {            'basic_info': self._get_basic_info(code_obj),            'bytecode': self._get_bytecode_info(code_obj),            'constants': self._get_constants_info(code_obj),            'variables': self._get_variables_info(code_obj),            'complexity': self._calculate_complexity(code_obj)        }                return analysis        def _get_basic_info(self, code_obj: types.CodeType) -&gt; Dict[str, Any]:        \"\"\"è·å–åŸºæœ¬ä¿¡æ¯\"\"\"        return {            'name': code_obj.co_name,            'filename': code_obj.co_filename,            'first_line': code_obj.co_firstlineno,            'arg_count': code_obj.co_argcount,            'local_count': code_obj.co_nlocals,            'stack_size': code_obj.co_stacksize,            'flags': code_obj.co_flags        }        def _get_bytecode_info(self, code_obj: types.CodeType) -&gt; Dict[str, Any]:        \"\"\"è·å–å­—èŠ‚ç ä¿¡æ¯\"\"\"        instructions = list(dis.get_instructions(code_obj))                # ç»Ÿè®¡æŒ‡ä»¤ç±»å‹        instruction_counts = {}        for instr in instructions:            instruction_counts[instr.opname] = instruction_counts.get(instr.opname, 0) + 1                return {            'instruction_count': len(instructions),            'instruction_types': len(instruction_counts),            'instruction_distribution': instruction_counts,            'bytecode_size': len(code_obj.co_code)        }        def _get_constants_info(self, code_obj: types.CodeType) -&gt; Dict[str, Any]:        \"\"\"è·å–å¸¸é‡ä¿¡æ¯\"\"\"        constants = code_obj.co_consts or ()                # æŒ‰ç±»å‹åˆ†ç±»å¸¸é‡        constant_types = {}        for const in constants:            const_type = type(const).__name__            if const_type not in constant_types:                constant_types[const_type] = []            constant_types[const_type].append(const)                return {            'constant_count': len(constants),            'constant_types': constant_types,            'has_none': None in constants,            'has_strings': any(isinstance(c, str) for c in constants),            'has_numbers': any(isinstance(c, (int, float)) for c in constants)        }        def _get_variables_info(self, code_obj: types.CodeType) -&gt; Dict[str, Any]:        \"\"\"è·å–å˜é‡ä¿¡æ¯\"\"\"        return {            'var_names': list(code_obj.co_varnames or ()),            'free_vars': list(code_obj.co_freevars or ()),            'cell_vars': list(code_obj.co_cellvars or ()),            'global_names': list(code_obj.co_names or ())        }        def _calculate_complexity(self, code_obj: types.CodeType) -&gt; Dict[str, Any]:        \"\"\"è®¡ç®—å¤æ‚åº¦\"\"\"        instructions = list(dis.get_instructions(code_obj))                # è®¡ç®—å¾ªç¯å¤æ‚åº¦ï¼ˆç®€åŒ–ç‰ˆï¼‰        branch_instructions = {            'POP_JUMP_IF_FALSE', 'POP_JUMP_IF_TRUE', 'JUMP_IF_FALSE_OR_POP',            'JUMP_IF_TRUE_OR_POP', 'JUMP_FORWARD', 'JUMP_ABSOLUTE'        }                branch_count = sum(1 for instr in instructions if instr.opname in branch_instructions)        cyclomatic_complexity = branch_count + 1                return {            'cyclomatic_complexity': cyclomatic_complexity,            'branch_count': branch_count,            'instruction_density': len(instructions) / max(1, len(code_obj.co_code))        }        def compare_codes(self, code1: types.CodeType, code2: types.CodeType) -&gt; Dict[str, Any]:        \"\"\"æ¯”è¾ƒä¸¤ä¸ªä»£ç å¯¹è±¡\"\"\"        analysis1 = self.analyze_code(code1)        analysis2 = self.analyze_code(code2)                comparison = {            'bytecode_size_diff': analysis2['bytecode']['bytecode_size'] - analysis1['bytecode']['bytecode_size'],            'instruction_count_diff': analysis2['bytecode']['instruction_count'] - analysis1['bytecode']['instruction_count'],            'complexity_diff': analysis2['complexity']['cyclomatic_complexity'] - analysis1['complexity']['cyclomatic_complexity'],            'constant_count_diff': analysis2['constants']['constant_count'] - analysis1['constants']['constant_count']        }                return {            'code1_analysis': analysis1,            'code2_analysis': analysis2,            'differences': comparison        }        def print_analysis(self, analysis: Dict[str, Any]):        \"\"\"æ‰“å°åˆ†æç»“æœ\"\"\"        print(f\"ä»£ç åˆ†ææŠ¥å‘Š:\")        print(f\"=\" * 40)                # åŸºæœ¬ä¿¡æ¯        basic = analysis['basic_info']        print(f\"åç§°: {basic['name']}\")        print(f\"æ–‡ä»¶: {basic['filename']}\")        print(f\"èµ·å§‹è¡Œ: {basic['first_line']}\")        print(f\"å‚æ•°æ•°é‡: {basic['arg_count']}\")        print(f\"å±€éƒ¨å˜é‡æ•°é‡: {basic['local_count']}\")        print(f\"æ ˆå¤§å°: {basic['stack_size']}\")                # å­—èŠ‚ç ä¿¡æ¯        bytecode = analysis['bytecode']        print(f\"\\nå­—èŠ‚ç ä¿¡æ¯:\")        print(f\"  æŒ‡ä»¤æ•°é‡: {bytecode['instruction_count']}\")        print(f\"  æŒ‡ä»¤ç±»å‹: {bytecode['instruction_types']}\")        print(f\"  å­—èŠ‚ç å¤§å°: {bytecode['bytecode_size']} å­—èŠ‚\")                # å¸¸é‡ä¿¡æ¯        constants = analysis['constants']        print(f\"\\nå¸¸é‡ä¿¡æ¯:\")        print(f\"  å¸¸é‡æ•°é‡: {constants['constant_count']}\")        print(f\"  åŒ…å«None: {constants['has_none']}\")        print(f\"  åŒ…å«å­—ç¬¦ä¸²: {constants['has_strings']}\")        print(f\"  åŒ…å«æ•°å­—: {constants['has_numbers']}\")                # å¤æ‚åº¦ä¿¡æ¯        complexity = analysis['complexity']        print(f\"\\nå¤æ‚åº¦ä¿¡æ¯:\")        print(f\"  åœˆå¤æ‚åº¦: {complexity['cyclomatic_complexity']}\")        print(f\"  åˆ†æ”¯æ•°é‡: {complexity['branch_count']}\")        print(f\"  æŒ‡ä»¤å¯†åº¦: {complexity['instruction_density']:.2f}\")# æµ‹è¯•å­—èŠ‚ç åˆ†æprint(\"\\nå­—èŠ‚ç åˆ†æç¤ºä¾‹:\")analyzer = BytecodeAnalyzer()# åˆ†æä¸åŒå¤æ‚åº¦çš„ä»£ç simple_code = compile(\"result = 2 + 3\", '&lt;string&gt;', 'exec')complex_code = compile(\"\"\"def fibonacci(n):    if n &lt;= 1:        return n    else:        return fibonacci(n-1) + fibonacci(n-2)result = fibonacci(10)\"\"\", '&lt;string&gt;', 'exec')print(\"ç®€å•ä»£ç åˆ†æ:\")simple_analysis = analyzer.analyze_code(simple_code)analyzer.print_analysis(simple_analysis)print(f\"\\nå¤æ‚ä»£ç åˆ†æ:\")complex_analysis = analyzer.analyze_code(complex_code)analyzer.print_analysis(complex_analysis)# æ¯”è¾ƒä»£ç print(f\"\\nä»£ç æ¯”è¾ƒ:\")comparison = analyzer.compare_codes(simple_code, complex_code)differences = comparison['differences']print(f\"å­—èŠ‚ç å¤§å°å·®å¼‚: {differences['bytecode_size_diff']} å­—èŠ‚\")print(f\"æŒ‡ä»¤æ•°é‡å·®å¼‚: {differences['instruction_count_diff']}\")print(f\"å¤æ‚åº¦å·®å¼‚: {differences['complexity_diff']}\")print(f\"å¸¸é‡æ•°é‡å·®å¼‚: {differences['constant_count_diff']}\")# æ˜¾ç¤ºå­—èŠ‚ç print(f\"\\nç®€å•ä»£ç å­—èŠ‚ç :\")dis.dis(simple_code)print(f\"\\nå¤æ‚ä»£ç å­—èŠ‚ç ï¼ˆå‰20è¡Œï¼‰:\")instructions = list(dis.get_instructions(complex_code))for i, instr in enumerate(instructions[:20]):    print(f\"  {i:2d} {instr.opname:20} {instr.arg or '':10} {instr.argval or ''}\")if len(instructions) &gt; 20:    print(f\"  ... è¿˜æœ‰ {len(instructions) - 20} æ¡æŒ‡ä»¤\")ä»£ç ä¼˜åŒ–åˆ†æå™¨import astimport timefrom typing import List, Tuple, Dict, Any# ä»£ç ä¼˜åŒ–åˆ†æå™¨class CodeOptimizer:    \"\"\"ä»£ç ä¼˜åŒ–åˆ†æå™¨\"\"\"        def __init__(self):        self.optimization_rules = {            'constant_folding': self._suggest_constant_folding,            'loop_optimization': self._suggest_loop_optimization,            'function_calls': self._suggest_function_optimization,            'data_structures': self._suggest_data_structure_optimization        }        def analyze_and_optimize(self, source_code: str) -&gt; Dict[str, Any]:        \"\"\"åˆ†æå¹¶æä¾›ä¼˜åŒ–å»ºè®®\"\"\"        try:            # è§£æAST            tree = ast.parse(source_code)                        # ç¼–è¯‘åŸå§‹ä»£ç             original_code = compile(source_code, '&lt;string&gt;', 'exec')                        # åˆ†æä»£ç             analysis = {                'original_code': source_code,                'ast_analysis': self._analyze_ast(tree),                'optimization_suggestions': self._get_optimization_suggestions(tree),                'performance_analysis': self._analyze_performance(original_code)            }                        return analysis                    except Exception as e:            return {'error': f\"åˆ†æå¤±è´¥: {e}\"}        def _analyze_ast(self, tree: ast.AST) -&gt; Dict[str, Any]:        \"\"\"åˆ†æAST\"\"\"        node_counts = {}                for node in ast.walk(tree):            node_type = type(node).__name__            node_counts[node_type] = node_counts.get(node_type, 0) + 1                return {            'total_nodes': sum(node_counts.values()),            'node_types': len(node_counts),            'node_distribution': node_counts        }        def _get_optimization_suggestions(self, tree: ast.AST) -&gt; List[Dict[str, Any]]:        \"\"\"è·å–ä¼˜åŒ–å»ºè®®\"\"\"        suggestions = []                for rule_name, rule_func in self.optimization_rules.items():            rule_suggestions = rule_func(tree)            suggestions.extend(rule_suggestions)                return suggestions        def _suggest_constant_folding(self, tree: ast.AST) -&gt; List[Dict[str, Any]]:        \"\"\"å»ºè®®å¸¸é‡æŠ˜å ä¼˜åŒ–\"\"\"        suggestions = []                for node in ast.walk(tree):            if isinstance(node, ast.BinOp):                # æ£€æŸ¥æ˜¯å¦ä¸ºå¸¸é‡è¿ç®—                if (isinstance(node.left, ast.Constant) and                     isinstance(node.right, ast.Constant)):                    suggestions.append({                        'type': 'constant_folding',                        'description': 'å¯ä»¥é¢„è®¡ç®—å¸¸é‡è¡¨è¾¾å¼',                        'line': getattr(node, 'lineno', 'unknown'),                        'suggestion': 'å°†å¸¸é‡è¿ç®—é¢„å…ˆè®¡ç®—'                    })                return suggestions        def _suggest_loop_optimization(self, tree: ast.AST) -&gt; List[Dict[str, Any]]:        \"\"\"å»ºè®®å¾ªç¯ä¼˜åŒ–\"\"\"        suggestions = []                for node in ast.walk(tree):            if isinstance(node, (ast.For, ast.While)):                # æ£€æŸ¥åµŒå¥—å¾ªç¯                nested_loops = [n for n in ast.walk(node)                                if isinstance(n, (ast.For, ast.While)) and n != node]                                if nested_loops:                    suggestions.append({                        'type': 'loop_optimization',                        'description': 'å‘ç°åµŒå¥—å¾ªç¯ï¼Œè€ƒè™‘ä¼˜åŒ–',                        'line': getattr(node, 'lineno', 'unknown'),                        'suggestion': 'è€ƒè™‘å¾ªç¯å±•å¼€æˆ–ç®—æ³•ä¼˜åŒ–'                    })                                # æ£€æŸ¥å¾ªç¯ä¸­çš„å‡½æ•°è°ƒç”¨                function_calls = [n for n in ast.walk(node) if isinstance(n, ast.Call)]                if len(function_calls) &gt; 3:                    suggestions.append({                        'type': 'loop_optimization',                        'description': 'å¾ªç¯ä¸­æœ‰å¤šä¸ªå‡½æ•°è°ƒç”¨',                        'line': getattr(node, 'lineno', 'unknown'),                        'suggestion': 'è€ƒè™‘å°†ä¸å˜çš„å‡½æ•°è°ƒç”¨ç§»å‡ºå¾ªç¯'                    })                return suggestions        def _suggest_function_optimization(self, tree: ast.AST) -&gt; List[Dict[str, Any]]:        \"\"\"å»ºè®®å‡½æ•°ä¼˜åŒ–\"\"\"        suggestions = []                for node in ast.walk(tree):            if isinstance(node, ast.FunctionDef):                # æ£€æŸ¥å‡½æ•°é•¿åº¦                function_lines = getattr(node, 'end_lineno', 0) - getattr(node, 'lineno', 0)                if function_lines &gt; 50:                    suggestions.append({                        'type': 'function_optimization',                        'description': f'å‡½æ•° {node.name} è¿‡é•¿ ({function_lines} è¡Œ)',                        'line': getattr(node, 'lineno', 'unknown'),                        'suggestion': 'è€ƒè™‘æ‹†åˆ†ä¸ºæ›´å°çš„å‡½æ•°'                    })                                # æ£€æŸ¥å‚æ•°æ•°é‡                if len(node.args.args) &gt; 7:                    suggestions.append({                        'type': 'function_optimization',                        'description': f'å‡½æ•° {node.name} å‚æ•°è¿‡å¤š ({len(node.args.args)} ä¸ª)',                        'line': getattr(node, 'lineno', 'unknown'),                        'suggestion': 'è€ƒè™‘ä½¿ç”¨å¯¹è±¡æˆ–å­—å…¸ä¼ é€’å‚æ•°'                    })                return suggestions        def _suggest_data_structure_optimization(self, tree: ast.AST) -&gt; List[Dict[str, Any]]:        \"\"\"å»ºè®®æ•°æ®ç»“æ„ä¼˜åŒ–\"\"\"        suggestions = []                for node in ast.walk(tree):            # æ£€æŸ¥åˆ—è¡¨æ¨å¯¼å¼ vs å¾ªç¯            if isinstance(node, ast.For):                # ç®€å•æ£€æŸ¥æ˜¯å¦å¯ä»¥ç”¨åˆ—è¡¨æ¨å¯¼å¼                if (len(node.body) == 1 and                     isinstance(node.body[0], ast.Expr) and                    isinstance(node.body[0].value, ast.Call)):                                        call_node = node.body[0].value                    if (isinstance(call_node.func, ast.Attribute) and                        call_node.func.attr == 'append'):                        suggestions.append({                            'type': 'data_structure_optimization',                            'description': 'å¯ä»¥ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼æ›¿ä»£å¾ªç¯',                            'line': getattr(node, 'lineno', 'unknown'),                            'suggestion': 'ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼æé«˜æ€§èƒ½'                        })                return suggestions        def _analyze_performance(self, code_obj: types.CodeType) -&gt; Dict[str, Any]:        \"\"\"åˆ†ææ€§èƒ½\"\"\"        # ä½¿ç”¨å­—èŠ‚ç åˆ†æå™¨        analyzer = BytecodeAnalyzer()        bytecode_analysis = analyzer.analyze_code(code_obj)                # æ€§èƒ½è¯„åˆ†ï¼ˆç®€åŒ–ç‰ˆï¼‰        complexity = bytecode_analysis['complexity']['cyclomatic_complexity']        instruction_count = bytecode_analysis['bytecode']['instruction_count']                performance_score = max(0, 100 - complexity * 5 - instruction_count * 0.1)                return {            'performance_score': performance_score,            'complexity_rating': 'Low' if complexity &lt;= 5 else 'Medium' if complexity &lt;= 10 else 'High',            'instruction_efficiency': instruction_count / max(1, len(code_obj.co_code)),            'bytecode_analysis': bytecode_analysis        }        def generate_optimized_code(self, original_code: str, suggestions: List[Dict[str, Any]]) -&gt; str:        \"\"\"ç”Ÿæˆä¼˜åŒ–åçš„ä»£ç ï¼ˆç®€åŒ–ç‰ˆï¼‰\"\"\"        optimized_code = original_code                # è¿™é‡Œåªæ˜¯ç¤ºä¾‹ï¼Œå®é™…çš„ä»£ç ä¼˜åŒ–éœ€è¦æ›´å¤æ‚çš„ASTè½¬æ¢        for suggestion in suggestions:            if suggestion['type'] == 'constant_folding':                # ç®€å•çš„å¸¸é‡æŠ˜å ç¤ºä¾‹                optimized_code = optimized_code.replace('2 + 3', '5')                optimized_code = optimized_code.replace('10 * 2', '20')                return optimized_code# æµ‹è¯•ä»£ç ä¼˜åŒ–åˆ†æå™¨print(\"\\nä»£ç ä¼˜åŒ–åˆ†æå™¨ç¤ºä¾‹:\")optimizer = CodeOptimizer()# æµ‹è¯•ä»£ç test_code = \"\"\"def process_data(data_list, threshold, multiplier, offset, debug_mode, log_file, config):    \"\"\"å¤„ç†æ•°æ®çš„å‡½æ•°ï¼ˆæ•…æ„å†™å¾—ä¸å¤Ÿä¼˜åŒ–ï¼‰\"\"\"    result = []        # å¸¸é‡è¿ç®—ï¼ˆå¯ä»¥ä¼˜åŒ–ï¼‰    magic_number = 2 + 3 * 4        # åµŒå¥—å¾ªç¯ï¼ˆå¯èƒ½éœ€è¦ä¼˜åŒ–ï¼‰    for i in range(len(data_list)):        for j in range(len(data_list)):            if i != j:                # å¾ªç¯ä¸­çš„é‡å¤è®¡ç®—ï¼ˆå¯ä»¥ä¼˜åŒ–ï¼‰                value = data_list[i] * multiplier + offset                if value &gt; threshold:                    # å¯ä»¥ç”¨åˆ—è¡¨æ¨å¯¼å¼ä¼˜åŒ–çš„æ¨¡å¼                    result.append(value)        # æ›´å¤šå¤„ç†é€»è¾‘...    for item in data_list:        processed = item * 10 + 5  # å¦ä¸€ä¸ªå¸¸é‡è¿ç®—        if processed &gt; 100:            result.append(processed)        return result# è°ƒç”¨å‡½æ•°data = [1, 2, 3, 4, 5]result = process_data(data, 50, 2, 10, True, 'log.txt', {'debug': True})\"\"\"# åˆ†æä»£ç print(\"åˆ†ææµ‹è¯•ä»£ç :\")analysis = optimizer.analyze_and_optimize(test_code)if 'error' in analysis:    print(f\"åˆ†æå¤±è´¥: {analysis['error']}\")else:    # æ˜¾ç¤ºASTåˆ†æ    ast_analysis = analysis['ast_analysis']    print(f\"\\nASTåˆ†æ:\")    print(f\"  æ€»èŠ‚ç‚¹æ•°: {ast_analysis['total_nodes']}\")    print(f\"  èŠ‚ç‚¹ç±»å‹æ•°: {ast_analysis['node_types']}\")    print(f\"  ä¸»è¦èŠ‚ç‚¹ç±»å‹: {list(ast_analysis['node_distribution'].keys())[:5]}\")        # æ˜¾ç¤ºä¼˜åŒ–å»ºè®®    suggestions = analysis['optimization_suggestions']    print(f\"\\nä¼˜åŒ–å»ºè®® ({len(suggestions)} æ¡):\")    for i, suggestion in enumerate(suggestions, 1):        print(f\"  {i}. {suggestion['description']} (è¡Œ {suggestion['line']})\")        print(f\"     å»ºè®®: {suggestion['suggestion']}\")        # æ˜¾ç¤ºæ€§èƒ½åˆ†æ    performance = analysis['performance_analysis']    print(f\"\\næ€§èƒ½åˆ†æ:\")    print(f\"  æ€§èƒ½è¯„åˆ†: {performance['performance_score']:.1f}/100\")    print(f\"  å¤æ‚åº¦ç­‰çº§: {performance['complexity_rating']}\")    print(f\"  æŒ‡ä»¤æ•ˆç‡: {performance['instruction_efficiency']:.2f}\")        # ç”Ÿæˆä¼˜åŒ–åçš„ä»£ç     optimized_code = optimizer.generate_optimized_code(test_code, suggestions)    if optimized_code != test_code:        print(f\"\\nå·²ç”Ÿæˆä¼˜åŒ–åçš„ä»£ç ï¼ˆéƒ¨åˆ†ä¼˜åŒ–ï¼‰\")    else:        print(f\"\\næœªç”Ÿæˆä¼˜åŒ–ä»£ç ï¼ˆéœ€è¦æ‰‹åŠ¨ä¼˜åŒ–ï¼‰\")âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µç¼–è¯‘é”™è¯¯å¤„ç†# ç¼–è¯‘é”™è¯¯å¤„ç†ç¤ºä¾‹print(\"\\nç¼–è¯‘é”™è¯¯å¤„ç†ç¤ºä¾‹:\")# é”™è¯¯å¤„ç†åŒ…è£…å™¨class CompileErrorHandler:    \"\"\"ç¼–è¯‘é”™è¯¯å¤„ç†å™¨\"\"\"        def __init__(self):        self.error_patterns = {            'SyntaxError': self._handle_syntax_error,            'IndentationError': self._handle_indentation_error,            'TabError': self._handle_tab_error        }        def safe_compile(self, source: str, filename: str = '&lt;string&gt;',                     mode: str = 'exec') -&gt; tuple[Any, List[str]]:        \"\"\"å®‰å…¨ç¼–è¯‘ï¼Œè¿”å›ä»£ç å¯¹è±¡å’Œé”™è¯¯ä¿¡æ¯\"\"\"        errors = []                try:            code_obj = compile(source, filename, mode)            return code_obj, errors                    except Exception as e:            error_type = type(e).__name__                        # ä½¿ç”¨ä¸“é—¨çš„é”™è¯¯å¤„ç†å™¨            if error_type in self.error_patterns:                error_info = self.error_patterns[error_type](e, source)            else:                error_info = self._handle_generic_error(e, source)                        errors.append(error_info)            return None, errors        def _handle_syntax_error(self, error: SyntaxError, source: str) -&gt; Dict[str, Any]:        \"\"\"å¤„ç†è¯­æ³•é”™è¯¯\"\"\"        return {            'type': 'SyntaxError',            'message': str(error),            'line': error.lineno,            'column': error.offset,            'text': error.text,            'suggestion': self._suggest_syntax_fix(error)        }        def _handle_indentation_error(self, error: IndentationError, source: str) -&gt; Dict[str, Any]:        \"\"\"å¤„ç†ç¼©è¿›é”™è¯¯\"\"\"        return {            'type': 'IndentationError',            'message': str(error),            'line': error.lineno,            'suggestion': 'æ£€æŸ¥ç¼©è¿›æ˜¯å¦ä¸€è‡´ï¼Œå»ºè®®ä½¿ç”¨4ä¸ªç©ºæ ¼'        }        def _handle_tab_error(self, error: TabError, source: str) -&gt; Dict[str, Any]:        \"\"\"å¤„ç†åˆ¶è¡¨ç¬¦é”™è¯¯\"\"\"        return {            'type': 'TabError',            'message': str(error),            'line': error.lineno,            'suggestion': 'ä¸è¦æ··ç”¨åˆ¶è¡¨ç¬¦å’Œç©ºæ ¼ï¼Œå»ºè®®åªä½¿ç”¨ç©ºæ ¼'        }        def _handle_generic_error(self, error: Exception, source: str) -&gt; Dict[str, Any]:        \"\"\"å¤„ç†é€šç”¨é”™è¯¯\"\"\"        return {            'type': type(error).__name__,            'message': str(error),            'suggestion': 'æ£€æŸ¥ä»£ç è¯­æ³•å’Œç»“æ„'        }        def _suggest_syntax_fix(self, error: SyntaxError) -&gt; str:        \"\"\"å»ºè®®è¯­æ³•ä¿®å¤\"\"\"        message = str(error).lower()                if 'invalid syntax' in message:            if error.text and ':' not in error.text:                return 'å¯èƒ½ç¼ºå°‘å†’å·(:)'            elif error.text and '(' in error.text and ')' not in error.text:                return 'å¯èƒ½ç¼ºå°‘å³æ‹¬å·(])'            elif error.text and '[' in error.text and ']' not in error.text:                return 'å¯èƒ½ç¼ºå°‘å³æ–¹æ‹¬å·(])'        elif 'unexpected eof' in message:            return 'ä»£ç ä¸å®Œæ•´ï¼Œå¯èƒ½ç¼ºå°‘ç»“æŸç¬¦'        elif 'unmatched' in message:            return 'æ‹¬å·æˆ–å¼•å·ä¸åŒ¹é…'                return 'æ£€æŸ¥è¯­æ³•é”™è¯¯'# æµ‹è¯•é”™è¯¯å¤„ç†print(\"é”™è¯¯å¤„ç†æµ‹è¯•:\")error_handler = CompileErrorHandler()# æµ‹è¯•å„ç§é”™è¯¯ä»£ç error_codes = [    (\"x = 1 +\", \"è¯­æ³•é”™è¯¯ï¼šè¡¨è¾¾å¼ä¸å®Œæ•´\"),    (\"if x == 1\\n    print('hello')\", \"ç¼©è¿›é”™è¯¯\"),    (\"def func(\\n    return 42\", \"æ‹¬å·ä¸åŒ¹é…\"),    (\"x = [1, 2, 3\\nprint(x)\", \"æ–¹æ‹¬å·ä¸åŒ¹é…\"),    (\"\\tif True:\\n    print('mixed')\", \"åˆ¶è¡¨ç¬¦å’Œç©ºæ ¼æ··ç”¨\"),    (\"x = 'unclosed string\", \"å­—ç¬¦ä¸²æœªé—­åˆ\")]for i, (code, description) in enumerate(error_codes, 1):    print(f\"\\næµ‹è¯• {i}: {description}\")    print(f\"ä»£ç : {repr(code)}\")        code_obj, errors = error_handler.safe_compile(code)        if code_obj:        print(f\"  âœ“ ç¼–è¯‘æˆåŠŸ\")    else:        for error in errors:            print(f\"  âœ— {error['type']}: {error['message']}\")            if 'line' in error:                print(f\"    ä½ç½®: ç¬¬ {error['line']} è¡Œ\")            print(f\"    å»ºè®®: {error['suggestion']}\")# ç¼–è¯‘æœ€ä½³å®è·µprint(f\"\\nç¼–è¯‘æœ€ä½³å®è·µç¤ºä¾‹:\")class BestPracticeCompiler:    \"\"\"æœ€ä½³å®è·µç¼–è¯‘å™¨\"\"\"        def __init__(self):        self.cache = CodeCache()        self.error_handler = CompileErrorHandler()        def compile_with_validation(self, source: str, filename: str = '&lt;string&gt;',                                mode: str = 'exec') -&gt; tuple[Any, List[str]]:        \"\"\"å¸¦éªŒè¯çš„ç¼–è¯‘\"\"\"        warnings = []                # é¢„å¤„ç†æ£€æŸ¥        warnings.extend(self._check_code_quality(source))                # ç¼–è¯‘ä»£ç         code_obj, errors = self.error_handler.safe_compile(source, filename, mode)                if code_obj:            # åå¤„ç†æ£€æŸ¥            warnings.extend(self._check_compiled_code(code_obj))                return code_obj, errors + warnings        def _check_code_quality(self, source: str) -&gt; List[Dict[str, Any]]:        \"\"\"æ£€æŸ¥ä»£ç è´¨é‡\"\"\"        warnings = []                lines = source.split('\\n')                for i, line in enumerate(lines, 1):            # æ£€æŸ¥è¡Œé•¿åº¦            if len(line) &gt; 100:                warnings.append({                    'type': 'Warning',                    'message': f'ç¬¬ {i} è¡Œè¿‡é•¿ ({len(line)} å­—ç¬¦)',                    'suggestion': 'å»ºè®®å°†é•¿è¡Œæ‹†åˆ†'                })                        # æ£€æŸ¥åˆ¶è¡¨ç¬¦            if '\\t' in line:                warnings.append({                    'type': 'Warning',                    'message': f'ç¬¬ {i} è¡ŒåŒ…å«åˆ¶è¡¨ç¬¦',                    'suggestion': 'å»ºè®®ä½¿ç”¨ç©ºæ ¼ä»£æ›¿åˆ¶è¡¨ç¬¦'                })                        # æ£€æŸ¥å°¾éšç©ºæ ¼            if line.endswith(' '):                warnings.append({                    'type': 'Warning',                    'message': f'ç¬¬ {i} è¡Œæœ‰å°¾éšç©ºæ ¼',                    'suggestion': 'åˆ é™¤å°¾éšç©ºæ ¼'                })                return warnings        def _check_compiled_code(self, code_obj: types.CodeType) -&gt; List[Dict[str, Any]]:        \"\"\"æ£€æŸ¥ç¼–è¯‘åçš„ä»£ç \"\"\"        warnings = []                # æ£€æŸ¥å¤æ‚åº¦        analyzer = BytecodeAnalyzer()        analysis = analyzer.analyze_code(code_obj)                complexity = analysis['complexity']['cyclomatic_complexity']        if complexity &gt; 10:            warnings.append({                'type': 'Warning',                'message': f'ä»£ç å¤æ‚åº¦è¿‡é«˜ ({complexity})',                'suggestion': 'è€ƒè™‘é‡æ„ä»¥é™ä½å¤æ‚åº¦'            })                # æ£€æŸ¥å­—èŠ‚ç å¤§å°        bytecode_size = analysis['bytecode']['bytecode_size']        if bytecode_size &gt; 1000:            warnings.append({                'type': 'Warning',                'message': f'å­—èŠ‚ç è¿‡å¤§ ({bytecode_size} å­—èŠ‚)',                'suggestion': 'è€ƒè™‘æ‹†åˆ†ä»£ç '            })                return warnings# æµ‹è¯•æœ€ä½³å®è·µç¼–è¯‘å™¨print(\"æœ€ä½³å®è·µç¼–è¯‘å™¨æµ‹è¯•:\")best_compiler = BestPracticeCompiler()# æµ‹è¯•ä»£ç ï¼ˆæ•…æ„åŒ…å«ä¸€äº›é—®é¢˜ï¼‰test_code_with_issues = \"\"\"def very_long_function_name_that_exceeds_normal_length_recommendations(param1, param2, param3, param4, param5):    # è¿™è¡Œæœ‰å°¾éšç©ºæ ¼        x = 1    if x == 1:        if x == 1:            if x == 1:                if x == 1:                    if x == 1:                        print('deeply nested')  # é«˜å¤æ‚åº¦    return x\"\"\"code_obj, issues = best_compiler.compile_with_validation(test_code_with_issues)if code_obj:    print(\"  âœ“ ç¼–è¯‘æˆåŠŸï¼Œä½†æœ‰ä»¥ä¸‹é—®é¢˜:\")else:    print(\"  âœ— ç¼–è¯‘å¤±è´¥:\")for issue in issues:    print(f\"    {issue['type']}: {issue['message']}\")    print(f\"    å»ºè®®: {issue['suggestion']}\")ğŸ”— ç›¸å…³å‡½æ•°å’Œæ¨¡å—å†…ç½®å‡½æ•°  eval() - æ‰§è¡Œè¡¨è¾¾å¼  exec() - æ‰§è¡Œè¯­å¥  globals() - è·å–å…¨å±€å‘½åç©ºé—´  locals() - è·å–å±€éƒ¨å‘½åç©ºé—´  vars() - è·å–å¯¹è±¡çš„å±æ€§å­—å…¸æ ‡å‡†åº“æ¨¡å—  ast - æŠ½è±¡è¯­æ³•æ ‘æ“ä½œ  dis - å­—èŠ‚ç åæ±‡ç¼–  code - ä»£ç å¯¹è±¡å·¥å…·  types - åŠ¨æ€ç±»å‹åˆ›å»º  inspect - å¯¹è±¡æ£€æŸ¥  py_compile - Pythonæ–‡ä»¶ç¼–è¯‘  compileall - æ‰¹é‡ç¼–è¯‘ç¬¬ä¸‰æ–¹åº“  astunparse - ASTåè§£æ  astor - ASTæ“ä½œå·¥å…·  black - ä»£ç æ ¼å¼åŒ–  pylint - ä»£ç è´¨é‡æ£€æŸ¥ğŸ“š æ‰©å±•é˜…è¯»  Pythonå­—èŠ‚ç è¯¦è§£  ASTæ¨¡å—æ–‡æ¡£  ä»£ç å¯¹è±¡å±æ€§  Pythonç¼–è¯‘è¿‡ç¨‹ğŸ·ï¸ æ ‡ç­¾ä»£ç ç¼–è¯‘ å­—èŠ‚ç  ä»£ç å¯¹è±¡ åŠ¨æ€ç¼–è¯‘ AST æ€§èƒ½ä¼˜åŒ– ä»£ç åˆ†æ ç¼–è¯‘å™¨",
        "url": "/docs/builtins/compile/",
        "category": "builtins",
        "tags": ["ä»£ç ç¼–è¯‘","å­—èŠ‚ç ","ä»£ç å¯¹è±¡","åŠ¨æ€ç¼–è¯‘"]
      }
      
    
  
    
      ,
      {
        "title": "complex() - å¤æ•°æ„é€ å‡½æ•°",
        "content": "complex() - å¤æ•°æ„é€ å‡½æ•°ğŸ“ æ¦‚è¿°complex() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå¤æ•°å¯¹è±¡æˆ–å°†å…¶ä»–æ•°å€¼ç±»å‹è½¬æ¢ä¸ºå¤æ•°ã€‚å¤æ•°æ˜¯æ•°å­¦ä¸­çš„é‡è¦æ¦‚å¿µï¼Œç”±å®éƒ¨å’Œè™šéƒ¨ç»„æˆï¼Œåœ¨ç§‘å­¦è®¡ç®—ã€ä¿¡å·å¤„ç†ã€å·¥ç¨‹è®¡ç®—ç­‰é¢†åŸŸæœ‰å¹¿æ³›åº”ç”¨ã€‚PythonåŸç”Ÿæ”¯æŒå¤æ•°è¿ç®—ï¼Œä½¿å¾—å¤æ•°è®¡ç®—å˜å¾—ç®€å•ç›´è§‚ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡complex()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œè¯­æ³•  ç†è§£å¤æ•°çš„æ¦‚å¿µå’Œè¡¨ç¤ºæ–¹æ³•  å­¦ä¼šå¤æ•°çš„åŸºæœ¬è¿ç®—å’Œæ“ä½œ  äº†è§£å¤æ•°åœ¨å®é™…ç¼–ç¨‹ä¸­çš„åº”ç”¨åœºæ™¯  æŒæ¡å¤æ•°ä¸å…¶ä»–æ•°å€¼ç±»å‹çš„è½¬æ¢ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  æ•°å€¼ç±»å‹ï¼ˆintã€floatï¼‰çš„åŸºæœ¬æ¦‚å¿µ  æ•°å­¦ä¸­å¤æ•°çš„åŸºæœ¬æ¦‚å¿µ  åŸºæœ¬çš„æ•°å­¦è¿ç®—ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µå¤æ•°æ˜¯ç”±å®éƒ¨ï¼ˆreal partï¼‰å’Œè™šéƒ¨ï¼ˆimaginary partï¼‰ç»„æˆçš„æ•°ï¼Œé€šå¸¸è¡¨ç¤ºä¸º a + bj çš„å½¢å¼ï¼Œå…¶ä¸­ a æ˜¯å®éƒ¨ï¼Œb æ˜¯è™šéƒ¨ï¼Œj æ˜¯è™šæ•°å•ä½ï¼ˆåœ¨æ•°å­¦ä¸­é€šå¸¸ç”¨ i è¡¨ç¤ºï¼‰ã€‚è¯­æ³•æ ¼å¼complex([real[, imag]])å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  real      æ•°å€¼æˆ–å­—ç¬¦ä¸²      å¦      0      å®éƒ¨ï¼Œå¯ä»¥æ˜¯æ•°å€¼æˆ–è¡¨ç¤ºå¤æ•°çš„å­—ç¬¦ä¸²              imag      æ•°å€¼      å¦      0      è™šéƒ¨ï¼Œåªèƒ½æ˜¯æ•°å€¼ç±»å‹      è¿”å›å€¼  ç±»å‹: complexå¯¹è±¡  å†…å®¹: åŒ…å«æŒ‡å®šå®éƒ¨å’Œè™šéƒ¨çš„å¤æ•°ğŸ’¡ ä»£ç ç¤ºä¾‹åŸºæœ¬ç”¨æ³•# åˆ›å»ºå¤æ•°çš„ä¸åŒæ–¹å¼# 1. æ— å‚æ•°åˆ›å»ºï¼ˆé»˜è®¤ä¸º0+0jï¼‰zero_complex = complex()print(zero_complex)  # è¾“å‡º: 0jprint(type(zero_complex))  # è¾“å‡º: &lt;class 'complex'&gt;# 2. åªæŒ‡å®šå®éƒ¨real_only = complex(3)print(real_only)  # è¾“å‡º: (3+0j)# 3. æŒ‡å®šå®éƒ¨å’Œè™šéƒ¨full_complex = complex(3, 4)print(full_complex)  # è¾“å‡º: (3+4j)# 4. ä½¿ç”¨è´Ÿæ•°negative_complex = complex(-2, -5)print(negative_complex)  # è¾“å‡º: (-2-5j)# 5. ä½¿ç”¨æµ®ç‚¹æ•°float_complex = complex(1.5, 2.7)print(float_complex)  # è¾“å‡º: (1.5+2.7j)ä»å­—ç¬¦ä¸²åˆ›å»ºå¤æ•°# ä»å­—ç¬¦ä¸²åˆ›å»ºå¤æ•°# æ ‡å‡†æ ¼å¼complex_from_str1 = complex('3+4j')print(complex_from_str1)  # è¾“å‡º: (3+4j)# ä¸åŒçš„å­—ç¬¦ä¸²æ ¼å¼complex_from_str2 = complex('5-2j')print(complex_from_str2)  # è¾“å‡º: (5-2j)# åªæœ‰è™šéƒ¨complex_from_str3 = complex('3j')print(complex_from_str3)  # è¾“å‡º: 3j# åªæœ‰å®éƒ¨complex_from_str4 = complex('7')print(complex_from_str4)  # è¾“å‡º: (7+0j)# å¸¦ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼ˆä¼šå‡ºé”™ï¼‰try:    complex_with_space = complex('3 + 4j')  # é”™è¯¯ï¼šä¸èƒ½æœ‰ç©ºæ ¼except ValueError as e:    print(f\"é”™è¯¯: {e}\")# æ­£ç¡®çš„æ ¼å¼è¦æ±‚valid_formats = ['1+2j', '1-2j', '1j', '-1j', '1', '1.5+2.7j']for fmt in valid_formats:    print(f\"'{fmt}' -&gt; {complex(fmt)}\")å¤æ•°çš„å±æ€§å’Œæ–¹æ³•# å¤æ•°çš„å±æ€§c = complex(3, 4)# è·å–å®éƒ¨å’Œè™šéƒ¨print(f\"å¤æ•°: {c}\")print(f\"å®éƒ¨: {c.real}\")  # è¾“å‡º: 3.0print(f\"è™šéƒ¨: {c.imag}\")  # è¾“å‡º: 4.0# æ³¨æ„ï¼šå®éƒ¨å’Œè™šéƒ¨æ€»æ˜¯æµ®ç‚¹æ•°ç±»å‹print(f\"å®éƒ¨ç±»å‹: {type(c.real)}\")  # è¾“å‡º: &lt;class 'float'&gt;print(f\"è™šéƒ¨ç±»å‹: {type(c.imag)}\")  # è¾“å‡º: &lt;class 'float'&gt;# å¤æ•°çš„å…±è½­conjugate = c.conjugate()print(f\"å…±è½­å¤æ•°: {conjugate}\")  # è¾“å‡º: (3-4j)# å¤æ•°çš„æ¨¡ï¼ˆç»å¯¹å€¼ï¼‰modulus = abs(c)print(f\"æ¨¡: {modulus}\")  # è¾“å‡º: 5.0# å¤æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºprint(f\"å­—ç¬¦ä¸²è¡¨ç¤º: {str(c)}\")  # è¾“å‡º: (3+4j)print(f\"reprè¡¨ç¤º: {repr(c)}\")  # è¾“å‡º: (3+4j)å¤æ•°è¿ç®—# å¤æ•°çš„åŸºæœ¬è¿ç®—c1 = complex(3, 4)c2 = complex(1, 2)print(f\"c1 = {c1}\")print(f\"c2 = {c2}\")# åŠ æ³•addition = c1 + c2print(f\"åŠ æ³•: {c1} + {c2} = {addition}\")  # è¾“å‡º: (4+6j)# å‡æ³•subtraction = c1 - c2print(f\"å‡æ³•: {c1} - {c2} = {subtraction}\")  # è¾“å‡º: (2+2j)# ä¹˜æ³•multiplication = c1 * c2print(f\"ä¹˜æ³•: {c1} * {c2} = {multiplication}\")  # è¾“å‡º: (-5+10j)# é™¤æ³•division = c1 / c2print(f\"é™¤æ³•: {c1} / {c2} = {division}\")  # è¾“å‡º: (2.2+0.4j)# å¹‚è¿ç®—power = c1 ** 2print(f\"å¹³æ–¹: {c1}^2 = {power}\")  # è¾“å‡º: (-7+24j)# ä¸å®æ•°è¿ç®—real_add = c1 + 5print(f\"ä¸å®æ•°ç›¸åŠ : {c1} + 5 = {real_add}\")  # è¾“å‡º: (8+4j)real_mult = c1 * 2print(f\"ä¸å®æ•°ç›¸ä¹˜: {c1} * 2 = {real_mult}\")  # è¾“å‡º: (6+8j)å¤æ•°æ¯”è¾ƒ# å¤æ•°çš„æ¯”è¾ƒc1 = complex(3, 4)c2 = complex(3, 4)c3 = complex(1, 2)# ç›¸ç­‰æ¯”è¾ƒprint(f\"{c1} == {c2}: {c1 == c2}\")  # è¾“å‡º: Trueprint(f\"{c1} == {c3}: {c1 == c3}\")  # è¾“å‡º: False# ä¸ç­‰æ¯”è¾ƒprint(f\"{c1} != {c3}: {c1 != c3}\")  # è¾“å‡º: True# å¤æ•°ä¸æ”¯æŒå¤§å°æ¯”è¾ƒtry:    result = c1 &gt; c2  # è¿™ä¼šå¼•å‘TypeErrorexcept TypeError as e:    print(f\"å¤æ•°ä¸æ”¯æŒå¤§å°æ¯”è¾ƒ: {e}\")# ä½†å¯ä»¥æ¯”è¾ƒæ¨¡çš„å¤§å°print(f\"æ¨¡çš„æ¯”è¾ƒ: abs({c1}) &gt; abs({c3}) = {abs(c1) &gt; abs(c3)}\")  # è¾“å‡º: TrueğŸš€ é«˜çº§åº”ç”¨æåæ ‡å½¢å¼è½¬æ¢import math# ç›´è§’åæ ‡è½¬æåæ ‡def rect_to_polar(c):    \"\"\"å°†å¤æ•°ä»ç›´è§’åæ ‡è½¬æ¢ä¸ºæåæ ‡å½¢å¼\"\"\"    r = abs(c)  # æ¨¡    theta = math.atan2(c.imag, c.real)  # å¹…è§’ï¼ˆå¼§åº¦ï¼‰    return r, theta# æåæ ‡è½¬ç›´è§’åæ ‡def polar_to_rect(r, theta):    \"\"\"å°†æåæ ‡è½¬æ¢ä¸ºå¤æ•°\"\"\"    real = r * math.cos(theta)    imag = r * math.sin(theta)    return complex(real, imag)# ç¤ºä¾‹c = complex(3, 4)r, theta = rect_to_polar(c)print(f\"å¤æ•° {c}\")print(f\"æåæ ‡å½¢å¼: r={r:.3f}, Î¸={theta:.3f}å¼§åº¦ ({math.degrees(theta):.1f}åº¦)\")# éªŒè¯è½¬æ¢c_back = polar_to_rect(r, theta)print(f\"è½¬æ¢å›æ¥: {c_back}\")print(f\"è¯¯å·®: {abs(c - c_back):.10f}\")# æ¬§æ‹‰å…¬å¼: e^(iÎ¸) = cos(Î¸) + i*sin(Î¸)def euler_formula(theta):    \"\"\"æ¬§æ‹‰å…¬å¼å®ç°\"\"\"    return complex(math.cos(theta), math.sin(theta))theta = math.pi / 4  # 45åº¦euler_result = euler_formula(theta)print(f\"\\næ¬§æ‹‰å…¬å¼ e^(i*Ï€/4) = {euler_result}\")print(f\"éªŒè¯: cos(Ï€/4) + i*sin(Ï€/4) = {math.cos(theta)} + {math.sin(theta)}i\")å¤æ•°åºåˆ—å’Œæ•°ç»„# åˆ›å»ºå¤æ•°åºåˆ—def create_complex_sequence(n):    \"\"\"åˆ›å»ºå¤æ•°åºåˆ—\"\"\"    return [complex(i, i**2) for i in range(n)]# å¤æ•°åˆ—è¡¨complex_list = create_complex_sequence(5)print(\"å¤æ•°åºåˆ—:\")for i, c in enumerate(complex_list):    print(f\"  {i}: {c}\")# å¤æ•°è¿ç®—çš„å‘é‡åŒ–def complex_vector_add(list1, list2):    \"\"\"å¤æ•°åˆ—è¡¨çš„å‘é‡åŠ æ³•\"\"\"    return [c1 + c2 for c1, c2 in zip(list1, list2)]def complex_vector_multiply(complex_list, scalar):    \"\"\"å¤æ•°åˆ—è¡¨çš„æ ‡é‡ä¹˜æ³•\"\"\"    return [c * scalar for c in complex_list]# ç¤ºä¾‹list1 = [complex(1, 2), complex(3, 4), complex(5, 6)]list2 = [complex(2, 1), complex(4, 3), complex(6, 5)]vector_sum = complex_vector_add(list1, list2)print(f\"\\nå‘é‡åŠ æ³•ç»“æœ: {vector_sum}\")scalar_mult = complex_vector_multiply(list1, complex(2, 1))print(f\"æ ‡é‡ä¹˜æ³•ç»“æœ: {scalar_mult}\")å¤æ•°åœ¨ä¿¡å·å¤„ç†ä¸­çš„åº”ç”¨import math# ç”Ÿæˆå¤æ•°ä¿¡å·def generate_complex_signal(frequency, duration, sample_rate):    \"\"\"ç”Ÿæˆå¤æ•°æ­£å¼¦ä¿¡å·\"\"\"    t_values = [i / sample_rate for i in range(int(duration * sample_rate))]    signal = []        for t in t_values:        # å¤æ•°ä¿¡å·: e^(i*2Ï€*f*t) = cos(2Ï€ft) + i*sin(2Ï€ft)        angle = 2 * math.pi * frequency * t        signal.append(complex(math.cos(angle), math.sin(angle)))        return t_values, signal# è®¡ç®—ä¿¡å·çš„åŠŸç‡def signal_power(signal):    \"\"\"è®¡ç®—å¤æ•°ä¿¡å·çš„å¹³å‡åŠŸç‡\"\"\"    power_sum = sum(abs(s)**2 for s in signal)    return power_sum / len(signal)# ç¤ºä¾‹ï¼šç”Ÿæˆ1Hzä¿¡å·ï¼ŒæŒç»­1ç§’ï¼Œé‡‡æ ·ç‡10Hztime, signal = generate_complex_signal(frequency=1, duration=1, sample_rate=10)print(\"å¤æ•°ä¿¡å·ç¤ºä¾‹ï¼ˆå‰5ä¸ªé‡‡æ ·ç‚¹ï¼‰:\")for i in range(5):    print(f\"  t={time[i]:.1f}s: {signal[i]:.3f}\")power = signal_power(signal)print(f\"\\nä¿¡å·å¹³å‡åŠŸç‡: {power:.3f}\")# ä¿¡å·çš„é¢‘è°±åˆ†æï¼ˆç®€åŒ–ç‰ˆDFTï¼‰def simple_dft(signal, k):    \"\"\"ç®€åŒ–çš„ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼ˆå•ä¸ªé¢‘ç‡åˆ†é‡ï¼‰\"\"\"    N = len(signal)    result = complex(0, 0)        for n in range(N):        angle = -2 * math.pi * k * n / N        twiddle = complex(math.cos(angle), math.sin(angle))        result += signal[n] * twiddle        return result / N# è®¡ç®—å‡ ä¸ªé¢‘ç‡åˆ†é‡print(\"\\né¢‘è°±åˆ†æï¼ˆDFTç³»æ•°ï¼‰:\")for k in range(5):    dft_coeff = simple_dft(signal, k)    print(f\"  k={k}: {dft_coeff:.3f} (å¹…åº¦: {abs(dft_coeff):.3f})\")å¤æ•°åœ¨å‡ ä½•å˜æ¢ä¸­çš„åº”ç”¨import math# å¤æ•°è¡¨ç¤ºçš„2Dç‚¹class ComplexPoint:    def __init__(self, x, y):        self.complex_coord = complex(x, y)        @property    def x(self):        return self.complex_coord.real        @property    def y(self):        return self.complex_coord.imag        def rotate(self, angle):        \"\"\"ç»•åŸç‚¹æ—‹è½¬\"\"\"        rotation = complex(math.cos(angle), math.sin(angle))        rotated = self.complex_coord * rotation        return ComplexPoint(rotated.real, rotated.imag)        def scale(self, factor):        \"\"\"ç¼©æ”¾\"\"\"        scaled = self.complex_coord * factor        return ComplexPoint(scaled.real, scaled.imag)        def translate(self, dx, dy):        \"\"\"å¹³ç§»\"\"\"        translated = self.complex_coord + complex(dx, dy)        return ComplexPoint(translated.real, translated.imag)        def __str__(self):        return f\"({self.x:.2f}, {self.y:.2f})\"# å‡ ä½•å˜æ¢ç¤ºä¾‹original_point = ComplexPoint(3, 4)print(f\"åŸå§‹ç‚¹: {original_point}\")# æ—‹è½¬90åº¦rotated_point = original_point.rotate(math.pi / 2)print(f\"æ—‹è½¬90åº¦å: {rotated_point}\")# ç¼©æ”¾2å€scaled_point = original_point.scale(2)print(f\"ç¼©æ”¾2å€å: {scaled_point}\")# å¹³ç§»translated_point = original_point.translate(1, -2)print(f\"å¹³ç§»(1,-2)å: {translated_point}\")# å¤åˆå˜æ¢ï¼šå…ˆæ—‹è½¬45åº¦ï¼Œå†ç¼©æ”¾1.5å€complex_transform = original_point.rotate(math.pi / 4).scale(1.5)print(f\"å¤åˆå˜æ¢å: {complex_transform}\")# å¤šè¾¹å½¢çš„å˜æ¢def transform_polygon(vertices, transformation_func):    \"\"\"å¯¹å¤šè¾¹å½¢çš„æ‰€æœ‰é¡¶ç‚¹åº”ç”¨å˜æ¢\"\"\"    return [transformation_func(vertex) for vertex in vertices]# åˆ›å»ºä¸€ä¸ªæ­£æ–¹å½¢square = [    ComplexPoint(0, 0),    ComplexPoint(1, 0),    ComplexPoint(1, 1),    ComplexPoint(0, 1)]print(\"\\nåŸå§‹æ­£æ–¹å½¢é¡¶ç‚¹:\")for i, vertex in enumerate(square):    print(f\"  é¡¶ç‚¹{i}: {vertex}\")# æ—‹è½¬æ­£æ–¹å½¢45åº¦rotated_square = transform_polygon(square, lambda p: p.rotate(math.pi / 4))print(\"\\næ—‹è½¬45åº¦åçš„æ­£æ–¹å½¢:\")for i, vertex in enumerate(rotated_square):    print(f\"  é¡¶ç‚¹{i}: {vertex}\")âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µå­—ç¬¦ä¸²æ ¼å¼è¦æ±‚# æ­£ç¡®çš„å­—ç¬¦ä¸²æ ¼å¼valid_strings = [    '1+2j',    # æ ‡å‡†æ ¼å¼    '1-2j',    # è´Ÿè™šéƒ¨    '1j',      # åªæœ‰è™šéƒ¨    '-1j',     # è´Ÿè™šéƒ¨    '1',       # åªæœ‰å®éƒ¨    '1.5+2.7j' # æµ®ç‚¹æ•°]for s in valid_strings:    print(f\"'{s}' -&gt; {complex(s)}\")# é”™è¯¯çš„å­—ç¬¦ä¸²æ ¼å¼invalid_strings = [    '1 + 2j',   # ä¸èƒ½æœ‰ç©ºæ ¼    '1+2i',     # å¿…é¡»ç”¨jï¼Œä¸èƒ½ç”¨i    '1+j2',     # jå¿…é¡»åœ¨æ•°å­—åé¢    '(1+2j)',   # ä¸èƒ½æœ‰æ‹¬å·    '1+2*j'     # ä¸èƒ½æœ‰ä¹˜å·]print(\"\\né”™è¯¯æ ¼å¼ç¤ºä¾‹:\")for s in invalid_strings:    try:        result = complex(s)        print(f\"'{s}' -&gt; {result}\")    except ValueError as e:        print(f\"'{s}' -&gt; é”™è¯¯: {e}\")æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜# æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜c1 = complex(0.1, 0.2)c2 = complex(0.3, 0.0)c3 = c1 + c1 + c1print(f\"c1 = {c1}\")print(f\"c2 = {c2}\")print(f\"c3 = c1 + c1 + c1 = {c3}\")print(f\"c3 == c2: {c3 == c2}\")  # å¯èƒ½ä¸ºFalseprint(f\"å·®å€¼: {c3 - c2}\")# è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å®¹å·®æ¯”è¾ƒdef complex_almost_equal(c1, c2, tolerance=1e-9):    \"\"\"å¤æ•°çš„è¿‘ä¼¼ç›¸ç­‰æ¯”è¾ƒ\"\"\"    return abs(c1 - c2) &lt; toleranceprint(f\"è¿‘ä¼¼ç›¸ç­‰: {complex_almost_equal(c3, c2)}\")# ä½¿ç”¨decimalæ¨¡å—æé«˜ç²¾åº¦from decimal import Decimal, getcontext# è®¾ç½®ç²¾åº¦getcontext().prec = 50# ä½¿ç”¨Decimalåˆ›å»ºé«˜ç²¾åº¦å¤æ•°def high_precision_complex(real_str, imag_str):    \"\"\"åˆ›å»ºé«˜ç²¾åº¦å¤æ•°\"\"\"    real = float(Decimal(real_str))    imag = float(Decimal(imag_str))    return complex(real, imag)hp_c1 = high_precision_complex('0.1', '0.2')hp_c2 = high_precision_complex('0.3', '0.0')hp_c3 = hp_c1 + hp_c1 + hp_c1print(f\"\\né«˜ç²¾åº¦è®¡ç®—:\")print(f\"hp_c3 = {hp_c3}\")print(f\"hp_c2 = {hp_c2}\")print(f\"å·®å€¼: {hp_c3 - hp_c2}\")æ€§èƒ½ä¼˜åŒ–import time# æ€§èƒ½æ¯”è¾ƒï¼šä¸åŒåˆ›å»ºæ–¹å¼def performance_comparison():    \"\"\"æ¯”è¾ƒä¸åŒå¤æ•°åˆ›å»ºæ–¹å¼çš„æ€§èƒ½\"\"\"    n = 100000        # æ–¹æ³•1ï¼šä½¿ç”¨complex()å‡½æ•°    start = time.time()    for i in range(n):        c = complex(i, i+1)    method1_time = time.time() - start        # æ–¹æ³•2ï¼šä½¿ç”¨å¤æ•°å­—é¢é‡    start = time.time()    for i in range(n):        c = i + (i+1)*1j    method2_time = time.time() - start        # æ–¹æ³•3ï¼šä»å­—ç¬¦ä¸²åˆ›å»ºï¼ˆæœ€æ…¢ï¼‰    start = time.time()    for i in range(1000):  # å‡å°‘æ¬¡æ•°ï¼Œå› ä¸ºå¾ˆæ…¢        c = complex(f\"{i}+{i+1}j\")    method3_time = (time.time() - start) * (n / 1000)        print(f\"æ€§èƒ½æ¯”è¾ƒï¼ˆ{n}æ¬¡åˆ›å»ºï¼‰:\")    print(f\"  complex()å‡½æ•°: {method1_time:.4f}ç§’\")    print(f\"  å¤æ•°å­—é¢é‡: {method2_time:.4f}ç§’\")    print(f\"  å­—ç¬¦ä¸²è§£æ: {method3_time:.4f}ç§’ï¼ˆä¼°ç®—ï¼‰\")    print(f\"  æœ€å¿«æ–¹æ³•æ¯”æœ€æ…¢æ–¹æ³•å¿«: {method3_time / method2_time:.1f}å€\")performance_comparison()# æ‰¹é‡å¤æ•°è¿ç®—ä¼˜åŒ–def optimized_complex_operations():    \"\"\"ä¼˜åŒ–çš„å¤æ•°æ‰¹é‡è¿ç®—\"\"\"    # åˆ›å»ºå¤§é‡å¤æ•°    n = 10000    complex_list = [complex(i, i*2) for i in range(n)]        # æ–¹æ³•1ï¼šé€ä¸ªè¿ç®—    start = time.time()    result1 = []    for c in complex_list:        result1.append(c * c.conjugate())  # è®¡ç®—æ¨¡çš„å¹³æ–¹    method1_time = time.time() - start        # æ–¹æ³•2ï¼šåˆ—è¡¨æ¨å¯¼å¼    start = time.time()    result2 = [c * c.conjugate() for c in complex_list]    method2_time = time.time() - start        # æ–¹æ³•3ï¼šä½¿ç”¨å†…ç½®å‡½æ•°    start = time.time()    result3 = [abs(c)**2 for c in complex_list]    method3_time = time.time() - start        print(f\"\\næ‰¹é‡è¿ç®—æ€§èƒ½æ¯”è¾ƒï¼ˆ{n}ä¸ªå¤æ•°ï¼‰:\")    print(f\"  é€ä¸ªè¿ç®—: {method1_time:.4f}ç§’\")    print(f\"  åˆ—è¡¨æ¨å¯¼å¼: {method2_time:.4f}ç§’\")    print(f\"  å†…ç½®å‡½æ•°: {method3_time:.4f}ç§’\")    print(f\"  ç»“æœä¸€è‡´æ€§: {result1[:5] == result2[:5] == result3[:5]}\")optimized_complex_operations()ğŸ”§ å®é™…åº”ç”¨åœºæ™¯ç”µè·¯åˆ†æimport math# äº¤æµç”µè·¯åˆ†æclass ACCircuit:    def __init__(self):        self.components = []        def add_resistor(self, resistance):        \"\"\"æ·»åŠ ç”µé˜»ï¼ˆå®æ•°é˜»æŠ—ï¼‰\"\"\"        impedance = complex(resistance, 0)        self.components.append(('R', resistance, impedance))        return impedance        def add_capacitor(self, capacitance, frequency):        \"\"\"æ·»åŠ ç”µå®¹ï¼ˆè´Ÿè™šæ•°é˜»æŠ—ï¼‰\"\"\"        omega = 2 * math.pi * frequency        impedance = complex(0, -1 / (omega * capacitance))        self.components.append(('C', capacitance, impedance))        return impedance        def add_inductor(self, inductance, frequency):        \"\"\"æ·»åŠ ç”µæ„Ÿï¼ˆæ­£è™šæ•°é˜»æŠ—ï¼‰\"\"\"        omega = 2 * math.pi * frequency        impedance = complex(0, omega * inductance)        self.components.append(('L', inductance, impedance))        return impedance        def series_impedance(self):        \"\"\"è®¡ç®—ä¸²è”æ€»é˜»æŠ—\"\"\"        total = complex(0, 0)        for _, _, impedance in self.components:            total += impedance        return total        def parallel_impedance(self):        \"\"\"è®¡ç®—å¹¶è”æ€»é˜»æŠ—\"\"\"        if not self.components:            return complex(0, 0)                reciprocal_sum = complex(0, 0)        for _, _, impedance in self.components:            if impedance != 0:                reciprocal_sum += 1 / impedance                return 1 / reciprocal_sum if reciprocal_sum != 0 else complex(float('inf'), 0)# ç¤ºä¾‹ï¼šRLCä¸²è”ç”µè·¯frequency = 50  # 50Hzcircuit = ACCircuit()# æ·»åŠ ç»„ä»¶R = circuit.add_resistor(100)  # 100Î©ç”µé˜»L = circuit.add_inductor(0.1, frequency)  # 0.1Hç”µæ„ŸC = circuit.add_capacitor(100e-6, frequency)  # 100Î¼Fç”µå®¹print(\"RLCä¸²è”ç”µè·¯åˆ†æ:\")print(f\"ç”µé˜»é˜»æŠ—: {R:.2f}Î©\")print(f\"ç”µæ„Ÿé˜»æŠ—: {L:.2f}Î©\")print(f\"ç”µå®¹é˜»æŠ—: {C:.2f}Î©\")total_impedance = circuit.series_impedance()print(f\"æ€»é˜»æŠ—: {total_impedance:.2f}Î©\")print(f\"é˜»æŠ—æ¨¡: {abs(total_impedance):.2f}Î©\")print(f\"ç›¸ä½è§’: {math.degrees(math.atan2(total_impedance.imag, total_impedance.real)):.1f}åº¦\")# è®¡ç®—ç”µæµå’ŒåŠŸç‡voltage = complex(220, 0)  # 220Väº¤æµç”µå‹current = voltage / total_impedancepower = voltage * current.conjugate()print(f\"\\nç”µå‹: {voltage}V\")print(f\"ç”µæµ: {current:.3f}A\")print(f\"ç”µæµå¹…å€¼: {abs(current):.3f}A\")print(f\"åŠŸç‡: {power:.2f}W\")print(f\"æœ‰åŠŸåŠŸç‡: {power.real:.2f}W\")print(f\"æ— åŠŸåŠŸç‡: {power.imag:.2f}VAR\")é‡å­è®¡ç®—æ¨¡æ‹Ÿimport mathimport random# ç®€å•çš„é‡å­æ¯”ç‰¹æ¨¡æ‹Ÿclass Qubit:    def __init__(self, alpha=1, beta=0):        \"\"\"åˆå§‹åŒ–é‡å­æ¯”ç‰¹çŠ¶æ€ |ÏˆâŸ© = Î±|0âŸ© + Î²|1âŸ©\"\"\"        self.alpha = complex(alpha)  # |0âŸ©æ€çš„æŒ¯å¹…        self.beta = complex(beta)    # |1âŸ©æ€çš„æŒ¯å¹…        self.normalize()        def normalize(self):        \"\"\"å½’ä¸€åŒ–é‡å­æ€\"\"\"        norm = math.sqrt(abs(self.alpha)**2 + abs(self.beta)**2)        if norm &gt; 0:            self.alpha /= norm            self.beta /= norm        def probability_0(self):        \"\"\"æµ‹é‡åˆ°|0âŸ©æ€çš„æ¦‚ç‡\"\"\"        return abs(self.alpha)**2        def probability_1(self):        \"\"\"æµ‹é‡åˆ°|1âŸ©æ€çš„æ¦‚ç‡\"\"\"        return abs(self.beta)**2        def measure(self):        \"\"\"æµ‹é‡é‡å­æ¯”ç‰¹\"\"\"        prob_0 = self.probability_0()        if random.random() &lt; prob_0:            # åç¼©åˆ°|0âŸ©æ€            self.alpha = complex(1, 0)            self.beta = complex(0, 0)            return 0        else:            # åç¼©åˆ°|1âŸ©æ€            self.alpha = complex(0, 0)            self.beta = complex(1, 0)            return 1        def hadamard(self):        \"\"\"Hadamardé—¨æ“ä½œ\"\"\"        new_alpha = (self.alpha + self.beta) / math.sqrt(2)        new_beta = (self.alpha - self.beta) / math.sqrt(2)        self.alpha = new_alpha        self.beta = new_beta        def pauli_x(self):        \"\"\"Pauli-Xé—¨æ“ä½œï¼ˆé‡å­éé—¨ï¼‰\"\"\"        self.alpha, self.beta = self.beta, self.alpha        def pauli_z(self):        \"\"\"Pauli-Zé—¨æ“ä½œ\"\"\"        self.beta = -self.beta        def phase(self, theta):        \"\"\"ç›¸ä½é—¨æ“ä½œ\"\"\"        phase_factor = complex(math.cos(theta), math.sin(theta))        self.beta *= phase_factor        def __str__(self):        return f\"|ÏˆâŸ© = {self.alpha:.3f}|0âŸ© + {self.beta:.3f}|1âŸ©\"# é‡å­è®¡ç®—ç¤ºä¾‹print(\"é‡å­æ¯”ç‰¹æ¨¡æ‹Ÿ:\")# åˆ›å»º|0âŸ©æ€qubit = Qubit(1, 0)print(f\"åˆå§‹æ€: {qubit}\")print(f\"æµ‹é‡åˆ°|0âŸ©çš„æ¦‚ç‡: {qubit.probability_0():.3f}\")print(f\"æµ‹é‡åˆ°|1âŸ©çš„æ¦‚ç‡: {qubit.probability_1():.3f}\")# åº”ç”¨Hadamardé—¨åˆ›å»ºå åŠ æ€qubit.hadamard()print(f\"\\nHadamardé—¨å: {qubit}\")print(f\"æµ‹é‡åˆ°|0âŸ©çš„æ¦‚ç‡: {qubit.probability_0():.3f}\")print(f\"æµ‹é‡åˆ°|1âŸ©çš„æ¦‚ç‡: {qubit.probability_1():.3f}\")# å¤šæ¬¡æµ‹é‡ç»Ÿè®¡measurement_results = []for _ in range(1000):    test_qubit = Qubit(1, 0)    test_qubit.hadamard()    result = test_qubit.measure()    measurement_results.append(result)count_0 = measurement_results.count(0)count_1 = measurement_results.count(1)print(f\"\\n1000æ¬¡æµ‹é‡ç»“æœ:\")print(f\"  |0âŸ©: {count_0}æ¬¡ ({count_0/1000:.3f})\")print(f\"  |1âŸ©: {count_1}æ¬¡ ({count_1/1000:.3f})\")# é‡å­å¹²æ¶‰æ¼”ç¤ºprint(\"\\né‡å­å¹²æ¶‰æ¼”ç¤º:\")qubit = Qubit(1, 0)print(f\"åˆå§‹æ€: {qubit}\")# H-Z-Håºåˆ—qubit.hadamard()print(f\"ç¬¬ä¸€ä¸ªHé—¨å: {qubit}\")qubit.pauli_z()print(f\"Zé—¨å: {qubit}\")qubit.hadamard()print(f\"ç¬¬äºŒä¸ªHé—¨å: {qubit}\")print(f\"æœ€ç»ˆæµ‹é‡åˆ°|1âŸ©çš„æ¦‚ç‡: {qubit.probability_1():.3f}\")ğŸ”— ç›¸å…³å‡½æ•°å†…ç½®å‡½æ•°  int() - æ•´æ•°è½¬æ¢å‡½æ•°  float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•°  abs() - ç»å¯¹å€¼å‡½æ•°ï¼ˆå¤æ•°çš„æ¨¡ï¼‰  round() - å››èˆäº”å…¥å‡½æ•°  pow() - å¹‚è¿ç®—å‡½æ•°  divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—æ ‡å‡†åº“æ¨¡å—  math - æ•°å­¦å‡½æ•°          sqrt() - å¹³æ–¹æ ¹      atan2() - åæ­£åˆ‡å‡½æ•°      cos(), sin() - ä¸‰è§’å‡½æ•°      pi, e - æ•°å­¦å¸¸æ•°        cmath - å¤æ•°æ•°å­¦å‡½æ•°          sqrt() - å¤æ•°å¹³æ–¹æ ¹      exp() - å¤æ•°æŒ‡æ•°å‡½æ•°      log() - å¤æ•°å¯¹æ•°å‡½æ•°      sin(), cos() - å¤æ•°ä¸‰è§’å‡½æ•°      phase() - å¤æ•°ç›¸ä½      polar() - æåæ ‡è½¬æ¢      rect() - ç›´è§’åæ ‡è½¬æ¢        decimal - é«˜ç²¾åº¦åè¿›åˆ¶è¿ç®—  fractions - åˆ†æ•°è¿ç®—ç¬¬ä¸‰æ–¹åº“  numpy - æ•°å€¼è®¡ç®—          np.complex64, np.complex128 - å¤æ•°æ•°ç»„ç±»å‹      np.real(), np.imag() - å®éƒ¨è™šéƒ¨æå–      np.conj() - å…±è½­      np.angle() - ç›¸ä½è§’      np.fft - å¿«é€Ÿå‚…é‡Œå¶å˜æ¢        scipy - ç§‘å­¦è®¡ç®—          scipy.signal - ä¿¡å·å¤„ç†      scipy.fft - å‚…é‡Œå¶å˜æ¢        matplotlib - ç»˜å›¾          å¤æ•°çš„å¯è§†åŒ–      å¤å¹³é¢ç»˜å›¾      ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - complex()  Pythonå®˜æ–¹æ–‡æ¡£ - æ•°å€¼ç±»å‹  Pythonå®˜æ–¹æ–‡æ¡£ - cmathæ¨¡å—  å¤æ•°æ•°å­¦åŸºç¡€  å¤æ•°åœ¨å·¥ç¨‹ä¸­çš„åº”ç”¨ğŸ·ï¸ æ ‡ç­¾å¤æ•° æ•°å­¦ æ•°æ®ç±»å‹ æ„é€ å‡½æ•° ç§‘å­¦è®¡ç®— ä¿¡å·å¤„ç†æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/complex/",
        "category": "builtins",
        "tags": ["å¤æ•°","æ•°å­¦","æ•°æ®ç±»å‹","æ„é€ å‡½æ•°"]
      }
      
    
  
    
      ,
      {
        "title": "æ§åˆ¶æµç¨‹",
        "content": "æ§åˆ¶æµç¨‹ğŸ“ æ¦‚è¿°æ§åˆ¶æµç¨‹æ˜¯ç¼–ç¨‹ä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒå†³å®šäº†ç¨‹åºä»£ç çš„æ‰§è¡Œé¡ºåºã€‚Pythonæä¾›äº†ä¸°å¯Œçš„æ§åˆ¶æµç¨‹è¯­å¥ï¼ŒåŒ…æ‹¬æ¡ä»¶è¯­å¥ï¼ˆifã€elifã€elseï¼‰ã€å¾ªç¯è¯­å¥ï¼ˆforã€whileï¼‰ä»¥åŠæµç¨‹æ§åˆ¶è¯­å¥ï¼ˆbreakã€continueã€passï¼‰ã€‚æŒæ¡è¿™äº›è¯­å¥æ˜¯ç¼–å†™é€»è¾‘æ¸…æ™°ã€åŠŸèƒ½å®Œæ•´ç¨‹åºçš„åŸºç¡€ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡æ¡ä»¶è¯­å¥çš„è¯­æ³•å’Œä½¿ç”¨æ–¹æ³•  å­¦ä¼šä½¿ç”¨forå’Œwhileå¾ªç¯å¤„ç†é‡å¤ä»»åŠ¡  äº†è§£breakã€continueã€passç­‰æµç¨‹æ§åˆ¶è¯­å¥  æŒæ¡æ¡ä»¶è¡¨è¾¾å¼å’Œå¾ªç¯æ¨å¯¼å¼çš„ä½¿ç”¨  èƒ½å¤Ÿç¼–å†™å¤æ‚çš„æ§åˆ¶æµç¨‹é€»è¾‘ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•å’Œç¼©è¿›è§„åˆ™  å˜é‡å’Œæ•°æ®ç±»å‹  è¿ç®—ç¬¦å’Œè¡¨è¾¾å¼  å¸ƒå°”å€¼å’Œé€»è¾‘è¿ç®—ğŸ” è¯¦ç»†å†…å®¹æ¡ä»¶è¯­å¥ifè¯­å¥ifè¯­å¥æ˜¯æœ€åŸºæœ¬çš„æ¡ä»¶æ§åˆ¶è¯­å¥ï¼Œç”¨äºæ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç å—ã€‚# åŸºæœ¬ifè¯­å¥age = 18if age &gt;= 18:    print(\"ä½ å·²ç»æˆå¹´äº†\")# å¸¦elseçš„ifè¯­å¥score = 85if score &gt;= 60:    print(\"è€ƒè¯•é€šè¿‡\")else:    print(\"è€ƒè¯•ä¸åŠæ ¼\")# å¤šæ¡ä»¶åˆ¤æ–­temperature = 25if temperature &gt; 30:    print(\"å¤©æ°”å¾ˆçƒ­\")elif temperature &gt; 20:    print(\"å¤©æ°”æ¸©æš–\")elif temperature &gt; 10:    print(\"å¤©æ°”å‡‰çˆ½\")else:    print(\"å¤©æ°”å¯’å†·\")åµŒå¥—ifè¯­å¥# åµŒå¥—æ¡ä»¶åˆ¤æ–­username = \"admin\"password = \"123456\"is_active = Trueif username == \"admin\":    if password == \"123456\":        if is_active:            print(\"ç™»å½•æˆåŠŸ\")        else:            print(\"è´¦æˆ·å·²è¢«ç¦ç”¨\")    else:        print(\"å¯†ç é”™è¯¯\")else:    print(\"ç”¨æˆ·åé”™è¯¯\")# ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ç®€åŒ–åµŒå¥—if username == \"admin\" and password == \"123456\" and is_active:    print(\"ç™»å½•æˆåŠŸ\")else:    print(\"ç™»å½•å¤±è´¥\")æ¡ä»¶è¡¨è¾¾å¼ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦ï¼‰# æ¡ä»¶è¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•ï¼šå€¼1 if æ¡ä»¶ else å€¼2age = 20status = \"æˆå¹´äºº\" if age &gt;= 18 else \"æœªæˆå¹´äºº\"print(f\"ä½ æ˜¯{status}\")# åœ¨å‡½æ•°è°ƒç”¨ä¸­ä½¿ç”¨def get_grade(score):    return \"åŠæ ¼\" if score &gt;= 60 else \"ä¸åŠæ ¼\"print(get_grade(75))  # è¾“å‡ºï¼šåŠæ ¼print(get_grade(45))  # è¾“å‡ºï¼šä¸åŠæ ¼# åµŒå¥—æ¡ä»¶è¡¨è¾¾å¼score = 85grade = \"ä¼˜ç§€\" if score &gt;= 90 else \"è‰¯å¥½\" if score &gt;= 80 else \"åŠæ ¼\" if score &gt;= 60 else \"ä¸åŠæ ¼\"print(f\"æˆç»©ç­‰çº§ï¼š{grade}\")å¾ªç¯ç»“æ„forå¾ªç¯forå¾ªç¯ç”¨äºéå†åºåˆ—ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ï¼‰æˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡ã€‚# éå†åˆ—è¡¨fruits = [\"è‹¹æœ\", \"é¦™è•‰\", \"æ©™å­\", \"è‘¡è„\"]for fruit in fruits:    print(f\"æˆ‘å–œæ¬¢åƒ{fruit}\")# éå†å­—ç¬¦ä¸²for char in \"Python\":    print(char)# ä½¿ç”¨range()å‡½æ•°print(\"ä½¿ç”¨range(5):\")for i in range(5):    print(f\"ç¬¬{i+1}æ¬¡å¾ªç¯\")print(\"\\nä½¿ç”¨range(1, 6):\")for i in range(1, 6):    print(f\"æ•°å­—ï¼š{i}\")print(\"\\nä½¿ç”¨range(0, 10, 2):\")for i in range(0, 10, 2):    print(f\"å¶æ•°ï¼š{i}\")# éå†å­—å…¸student = {\"å§“å\": \"å¼ ä¸‰\", \"å¹´é¾„\": 20, \"ä¸“ä¸š\": \"è®¡ç®—æœºç§‘å­¦\"}print(\"éå†å­—å…¸çš„é”®ï¼š\")for key in student:    print(key)print(\"\\néå†å­—å…¸çš„å€¼ï¼š\")for value in student.values():    print(value)print(\"\\néå†å­—å…¸çš„é”®å€¼å¯¹ï¼š\")for key, value in student.items():    print(f\"{key}: {value}\")enumerate()å‡½æ•°# è·å–ç´¢å¼•å’Œå€¼colors = [\"çº¢è‰²\", \"ç»¿è‰²\", \"è“è‰²\", \"é»„è‰²\"]for index, color in enumerate(colors):    print(f\"ç´¢å¼•{index}: {color}\")# æŒ‡å®šèµ·å§‹ç´¢å¼•for index, color in enumerate(colors, start=1):    print(f\"ç¬¬{index}ç§é¢œè‰²: {color}\")zip()å‡½æ•°# åŒæ—¶éå†å¤šä¸ªåºåˆ—names = [\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\"]ages = [20, 25, 30]cities = [\"åŒ—äº¬\", \"ä¸Šæµ·\", \"å¹¿å·\"]for name, age, city in zip(names, ages, cities):    print(f\"{name}ï¼Œ{age}å²ï¼Œæ¥è‡ª{city}\")# å¤„ç†é•¿åº¦ä¸åŒçš„åºåˆ—list1 = [1, 2, 3, 4, 5]list2 = ['a', 'b', 'c']for num, letter in zip(list1, list2):    print(f\"{num} - {letter}\")whileå¾ªç¯whileå¾ªç¯åœ¨æ¡ä»¶ä¸ºçœŸæ—¶é‡å¤æ‰§è¡Œä»£ç å—ã€‚# åŸºæœ¬whileå¾ªç¯count = 0while count &lt; 5:    print(f\"è®¡æ•°ï¼š{count}\")    count += 1# ç”¨æˆ·è¾“å…¥éªŒè¯password = \"\"while password != \"123456\":    password = input(\"è¯·è¾“å…¥å¯†ç ï¼š\")    if password != \"123456\":        print(\"å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥\")print(\"å¯†ç æ­£ç¡®ï¼\")# æ— é™å¾ªç¯ï¼ˆéœ€è¦breaké€€å‡ºï¼‰while True:    user_input = input(\"è¾“å…¥'quit'é€€å‡ºï¼š\")    if user_input.lower() == 'quit':        break    print(f\"ä½ è¾“å…¥äº†ï¼š{user_input}\")# è®¡ç®—é˜¶ä¹˜n = 5factorial = 1i = 1while i &lt;= n:    factorial *= i    i += 1print(f\"{n}çš„é˜¶ä¹˜æ˜¯ï¼š{factorial}\")å¾ªç¯æ§åˆ¶è¯­å¥breakè¯­å¥breakç”¨äºç«‹å³é€€å‡ºå¾ªç¯ã€‚# åœ¨forå¾ªç¯ä¸­ä½¿ç”¨breakfor i in range(10):    if i == 5:        print(\"é‡åˆ°5ï¼Œé€€å‡ºå¾ªç¯\")        break    print(i)# åœ¨whileå¾ªç¯ä¸­ä½¿ç”¨breakcount = 0while True:    if count &gt;= 3:        print(\"è¾¾åˆ°é™åˆ¶ï¼Œé€€å‡ºå¾ªç¯\")        break    print(f\"è®¡æ•°ï¼š{count}\")    count += 1# åœ¨åµŒå¥—å¾ªç¯ä¸­ä½¿ç”¨breakfor i in range(3):    print(f\"å¤–å±‚å¾ªç¯ï¼š{i}\")    for j in range(5):        if j == 2:            print(\"  å†…å±‚å¾ªç¯é‡åˆ°2ï¼Œé€€å‡ºå†…å±‚å¾ªç¯\")            break        print(f\"  å†…å±‚å¾ªç¯ï¼š{j}\")continueè¯­å¥continueç”¨äºè·³è¿‡å½“å‰å¾ªç¯çš„å‰©ä½™éƒ¨åˆ†ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚# è·³è¿‡å¶æ•°for i in range(10):    if i % 2 == 0:        continue    print(f\"å¥‡æ•°ï¼š{i}\")# å¤„ç†åˆ—è¡¨ä¸­çš„ç‰¹æ®Šå€¼numbers = [1, 2, -1, 4, -2, 6, 0, 8]for num in numbers:    if num &lt;= 0:        print(f\"è·³è¿‡éæ­£æ•°ï¼š{num}\")        continue    print(f\"å¤„ç†æ­£æ•°ï¼š{num}\")    result = 100 / num    print(f\"100 / {num} = {result}\")passè¯­å¥passæ˜¯ä¸€ä¸ªç©ºæ“ä½œè¯­å¥ï¼Œç”¨ä½œå ä½ç¬¦ã€‚# ä½œä¸ºå ä½ç¬¦def future_function():    pass  # æš‚æ—¶ä¸å®ç°ï¼Œé¿å…è¯­æ³•é”™è¯¯# åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨age = 20if age &lt; 18:    pass  # æš‚æ—¶ä¸å¤„ç†æœªæˆå¹´æƒ…å†µelse:    print(\"å¯ä»¥æŠ•ç¥¨\")# åœ¨å¾ªç¯ä¸­ä½¿ç”¨for i in range(5):    if i == 2:        pass  # ä»€ä¹ˆéƒ½ä¸åšï¼Œç»§ç»­å¾ªç¯    else:        print(i)# åœ¨å¼‚å¸¸å¤„ç†ä¸­ä½¿ç”¨try:    result = 10 / 0except ZeroDivisionError:    pass  # å¿½ç•¥é™¤é›¶é”™è¯¯elseå­å¥Pythonçš„å¾ªç¯è¯­å¥å¯ä»¥æœ‰elseå­å¥ï¼Œå½“å¾ªç¯æ­£å¸¸ç»“æŸæ—¶æ‰§è¡Œã€‚# forå¾ªç¯çš„elseå­å¥for i in range(5):    print(i)else:    print(\"å¾ªç¯æ­£å¸¸ç»“æŸ\")# å¸¦breakçš„forå¾ªç¯for i in range(5):    if i == 3:        print(\"é‡åˆ°3ï¼Œé€€å‡ºå¾ªç¯\")        break    print(i)else:    print(\"è¿™è¡Œä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºå¾ªç¯è¢«breakä¸­æ–­\")# whileå¾ªç¯çš„elseå­å¥count = 0while count &lt; 3:    print(f\"è®¡æ•°ï¼š{count}\")    count += 1else:    print(\"whileå¾ªç¯æ­£å¸¸ç»“æŸ\")# å®é™…åº”ç”¨ï¼šæŸ¥æ‰¾å…ƒç´ numbers = [1, 3, 5, 7, 9]target = 6for num in numbers:    if num == target:        print(f\"æ‰¾åˆ°äº†{target}\")        breakelse:    print(f\"æ²¡æœ‰æ‰¾åˆ°{target}\")ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•def grade_calculator():    \"\"\"æˆç»©è®¡ç®—å™¨\"\"\"    while True:        try:            score = float(input(\"è¯·è¾“å…¥æˆç»©ï¼ˆ0-100ï¼‰ï¼Œè¾“å…¥-1é€€å‡ºï¼š\"))                        if score == -1:                print(\"ç¨‹åºç»“æŸ\")                break                        if score &lt; 0 or score &gt; 100:                print(\"æˆç»©å¿…é¡»åœ¨0-100ä¹‹é—´\")                continue                        # è®¡ç®—ç­‰çº§            if score &gt;= 90:                grade = \"A\"                comment = \"ä¼˜ç§€\"            elif score &gt;= 80:                grade = \"B\"                comment = \"è‰¯å¥½\"            elif score &gt;= 70:                grade = \"C\"                comment = \"ä¸­ç­‰\"            elif score &gt;= 60:                grade = \"D\"                comment = \"åŠæ ¼\"            else:                grade = \"F\"                comment = \"ä¸åŠæ ¼\"                        print(f\"æˆç»©ï¼š{score}ï¼Œç­‰çº§ï¼š{grade}ï¼Œè¯„ä»·ï¼š{comment}\")                    except ValueError:            print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—\")# ä½¿ç”¨ç¤ºä¾‹# grade_calculator()é«˜çº§ç”¨æ³•def number_guessing_game():    \"\"\"æ•°å­—çŒœæµ‹æ¸¸æˆ\"\"\"    import random        print(\"æ¬¢è¿æ¥åˆ°æ•°å­—çŒœæµ‹æ¸¸æˆï¼\")        while True:        # ç”Ÿæˆéšæœºæ•°        secret_number = random.randint(1, 100)        attempts = 0        max_attempts = 7                print(f\"\\næˆ‘æƒ³äº†ä¸€ä¸ª1åˆ°100ä¹‹é—´çš„æ•°å­—ï¼Œä½ æœ‰{max_attempts}æ¬¡æœºä¼šçŒœä¸­å®ƒï¼\")                while attempts &lt; max_attempts:            try:                guess = int(input(f\"ç¬¬{attempts + 1}æ¬¡çŒœæµ‹ï¼Œè¯·è¾“å…¥ä½ çš„çŒœæµ‹ï¼š\"))                attempts += 1                                if guess &lt; 1 or guess &gt; 100:                    print(\"è¯·è¾“å…¥1åˆ°100ä¹‹é—´çš„æ•°å­—\")                    continue                                if guess == secret_number:                    print(f\"ğŸ‰ æ­å–œä½ ï¼çŒœå¯¹äº†ï¼æ•°å­—å°±æ˜¯{secret_number}\")                    print(f\"ä½ ç”¨äº†{attempts}æ¬¡å°±çŒœä¸­äº†ï¼\")                    break                elif guess &lt; secret_number:                    print(\"å¤ªå°äº†ï¼\")                else:                    print(\"å¤ªå¤§äº†ï¼\")                                # ç»™å‡ºæç¤º                remaining = max_attempts - attempts                if remaining &gt; 0:                    print(f\"è¿˜æœ‰{remaining}æ¬¡æœºä¼š\")                            except ValueError:                print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—\")        else:            print(f\"ğŸ˜¢ å¾ˆé—æ†¾ï¼Œä½ æ²¡æœ‰çŒœä¸­ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯{secret_number}\")                # è¯¢é—®æ˜¯å¦ç»§ç»­        while True:            play_again = input(\"\\næ˜¯å¦å†ç©ä¸€æ¬¡ï¼Ÿ(y/n): \").lower()            if play_again in ['y', 'yes', 'æ˜¯']:                break            elif play_again in ['n', 'no', 'å¦']:                print(\"è°¢è°¢æ¸¸æˆï¼å†è§ï¼\")                return            else:                print(\"è¯·è¾“å…¥yæˆ–n\")# ä½¿ç”¨ç¤ºä¾‹# number_guessing_game()å®é™…æ¡ˆä¾‹class TaskManager:    \"\"\"ä»»åŠ¡ç®¡ç†å™¨\"\"\"        def __init__(self):        self.tasks = []        self.completed_tasks = []        def add_task(self, task):        \"\"\"æ·»åŠ ä»»åŠ¡\"\"\"        self.tasks.append({            'id': len(self.tasks) + len(self.completed_tasks) + 1,            'description': task,            'completed': False        })        print(f\"ä»»åŠ¡ '{task}' å·²æ·»åŠ \")        def list_tasks(self):        \"\"\"åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡\"\"\"        if not self.tasks and not self.completed_tasks:            print(\"æ²¡æœ‰ä»»åŠ¡\")            return                print(\"\\n=== å¾…å®Œæˆä»»åŠ¡ ===\")        if self.tasks:            for task in self.tasks:                print(f\"{task['id']}. {task['description']}\")        else:            print(\"æ— å¾…å®Œæˆä»»åŠ¡\")                print(\"\\n=== å·²å®Œæˆä»»åŠ¡ ===\")        if self.completed_tasks:            for task in self.completed_tasks:                print(f\"âœ“ {task['id']}. {task['description']}\")        else:            print(\"æ— å·²å®Œæˆä»»åŠ¡\")        def complete_task(self, task_id):        \"\"\"å®Œæˆä»»åŠ¡\"\"\"        for i, task in enumerate(self.tasks):            if task['id'] == task_id:                completed_task = self.tasks.pop(i)                completed_task['completed'] = True                self.completed_tasks.append(completed_task)                print(f\"ä»»åŠ¡ '{completed_task['description']}' å·²å®Œæˆ\")                return        print(f\"æœªæ‰¾åˆ°IDä¸º{task_id}çš„ä»»åŠ¡\")        def delete_task(self, task_id):        \"\"\"åˆ é™¤ä»»åŠ¡\"\"\"        # åœ¨å¾…å®Œæˆä»»åŠ¡ä¸­æŸ¥æ‰¾        for i, task in enumerate(self.tasks):            if task['id'] == task_id:                deleted_task = self.tasks.pop(i)                print(f\"ä»»åŠ¡ '{deleted_task['description']}' å·²åˆ é™¤\")                return                # åœ¨å·²å®Œæˆä»»åŠ¡ä¸­æŸ¥æ‰¾        for i, task in enumerate(self.completed_tasks):            if task['id'] == task_id:                deleted_task = self.completed_tasks.pop(i)                print(f\"ä»»åŠ¡ '{deleted_task['description']}' å·²åˆ é™¤\")                return                print(f\"æœªæ‰¾åˆ°IDä¸º{task_id}çš„ä»»åŠ¡\")        def run(self):        \"\"\"è¿è¡Œä»»åŠ¡ç®¡ç†å™¨\"\"\"        print(\"æ¬¢è¿ä½¿ç”¨ä»»åŠ¡ç®¡ç†å™¨ï¼\")                while True:            print(\"\\n=== ä»»åŠ¡ç®¡ç†å™¨ ===\")            print(\"1. æ·»åŠ ä»»åŠ¡\")            print(\"2. æŸ¥çœ‹ä»»åŠ¡\")            print(\"3. å®Œæˆä»»åŠ¡\")            print(\"4. åˆ é™¤ä»»åŠ¡\")            print(\"5. é€€å‡º\")                        choice = input(\"è¯·é€‰æ‹©æ“ä½œï¼ˆ1-5ï¼‰ï¼š\")                        if choice == '1':                task = input(\"è¯·è¾“å…¥ä»»åŠ¡æè¿°ï¼š\")                if task.strip():                    self.add_task(task.strip())                else:                    print(\"ä»»åŠ¡æè¿°ä¸èƒ½ä¸ºç©º\")                        elif choice == '2':                self.list_tasks()                        elif choice == '3':                self.list_tasks()                if self.tasks:                    try:                        task_id = int(input(\"è¯·è¾“å…¥è¦å®Œæˆçš„ä»»åŠ¡IDï¼š\"))                        self.complete_task(task_id)                    except ValueError:                        print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„ä»»åŠ¡ID\")                else:                    print(\"æ²¡æœ‰å¾…å®Œæˆçš„ä»»åŠ¡\")                        elif choice == '4':                self.list_tasks()                if self.tasks or self.completed_tasks:                    try:                        task_id = int(input(\"è¯·è¾“å…¥è¦åˆ é™¤çš„ä»»åŠ¡IDï¼š\"))                        self.delete_task(task_id)                    except ValueError:                        print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„ä»»åŠ¡ID\")                else:                    print(\"æ²¡æœ‰ä»»åŠ¡å¯åˆ é™¤\")                        elif choice == '5':                print(\"è°¢è°¢ä½¿ç”¨ï¼å†è§ï¼\")                break                        else:                print(\"æ— æ•ˆé€‰æ‹©ï¼Œè¯·è¾“å…¥1-5\")# ä½¿ç”¨ç¤ºä¾‹# task_manager = TaskManager()# task_manager.run()å¾ªç¯æ¨å¯¼å¼# åˆ—è¡¨æ¨å¯¼å¼numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]# åŸºæœ¬åˆ—è¡¨æ¨å¯¼å¼squares = [x**2 for x in numbers]print(f\"å¹³æ–¹æ•°ï¼š{squares}\")# å¸¦æ¡ä»¶çš„åˆ—è¡¨æ¨å¯¼å¼even_squares = [x**2 for x in numbers if x % 2 == 0]print(f\"å¶æ•°çš„å¹³æ–¹ï¼š{even_squares}\")# å¤æ‚æ¡ä»¶filtered_numbers = [x for x in numbers if x &gt; 3 and x &lt; 8]print(f\"3åˆ°8ä¹‹é—´çš„æ•°ï¼š{filtered_numbers}\")# å­—ç¬¦ä¸²å¤„ç†words = [\"hello\", \"world\", \"python\", \"programming\"]uppercase_words = [word.upper() for word in words if len(word) &gt; 5]print(f\"é•¿åº¦å¤§äº5çš„å¤§å†™å•è¯ï¼š{uppercase_words}\")# åµŒå¥—å¾ªç¯æ¨å¯¼å¼matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]flattened = [num for row in matrix for num in row]print(f\"å±•å¹³çš„çŸ©é˜µï¼š{flattened}\")# å­—å…¸æ¨å¯¼å¼square_dict = {x: x**2 for x in range(1, 6)}print(f\"å¹³æ–¹å­—å…¸ï¼š{square_dict}\")# é›†åˆæ¨å¯¼å¼unique_lengths = {len(word) for word in words}print(f\"å•è¯é•¿åº¦é›†åˆï¼š{unique_lengths}\")# ç”Ÿæˆå™¨è¡¨è¾¾å¼square_generator = (x**2 for x in range(1, 6))print(f\"ç”Ÿæˆå™¨å¯¹è±¡ï¼š{square_generator}\")print(f\"ç”Ÿæˆå™¨å†…å®¹ï¼š{list(square_generator)}\")âš ï¸ æ³¨æ„äº‹é¡¹  ç¼©è¿›: Pythonä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºä»£ç å—ï¼Œç¡®ä¿ç¼©è¿›ä¸€è‡´  æ— é™å¾ªç¯: ä½¿ç”¨while Trueæ—¶è¦ç¡®ä¿æœ‰é€€å‡ºæ¡ä»¶  å¾ªç¯å˜é‡: é¿å…åœ¨å¾ªç¯å†…ä¿®æ”¹å¾ªç¯å˜é‡å¯èƒ½å¯¼è‡´çš„é—®é¢˜  æ€§èƒ½: å¤§é‡æ•°æ®æ—¶è€ƒè™‘ä½¿ç”¨ç”Ÿæˆå™¨è€Œä¸æ˜¯åˆ—è¡¨æ¨å¯¼å¼  å¯è¯»æ€§: å¤æ‚çš„åµŒå¥—æ¡ä»¶å¯ä»¥è€ƒè™‘æ‹†åˆ†ä¸ºå¤šä¸ªå‡½æ•°  å¼‚å¸¸å¤„ç†: åœ¨å¾ªç¯ä¸­å¤„ç†ç”¨æˆ·è¾“å…¥æ—¶è¦è€ƒè™‘å¼‚å¸¸æƒ…å†µğŸ”— ç›¸å…³å†…å®¹  å˜é‡å’Œæ•°æ®ç±»å‹ - äº†è§£åŸºæœ¬æ•°æ®ç±»å‹  è¿ç®—ç¬¦ - æŒæ¡å„ç§è¿ç®—ç¬¦  å‡½æ•° - å­¦ä¹ å‡½æ•°å®šä¹‰å’Œè°ƒç”¨  å¼‚å¸¸å¤„ç† - å¤„ç†ç¨‹åºé”™è¯¯ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - æ§åˆ¶æµç¨‹  PEP 289 - ç”Ÿæˆå™¨è¡¨è¾¾å¼  Pythonç¼–ç¨‹æœ€ä½³å®è·µğŸ·ï¸ æ ‡ç­¾æ§åˆ¶æµç¨‹ æ¡ä»¶è¯­å¥ å¾ªç¯ ifè¯­å¥ forå¾ªç¯ whileå¾ªç¯ break continue passæœ€åæ›´æ–°: 2024-01-01ä½œè€…: Pythonæ–‡æ¡£å›¢é˜Ÿç‰ˆæœ¬: 1.0",
        "url": "/docs/basics/control-flow/",
        "category": "basics",
        "tags": ["æ§åˆ¶æµç¨‹","æ¡ä»¶è¯­å¥","å¾ªç¯","ifè¯­å¥","forå¾ªç¯","whileå¾ªç¯"]
      }
      
    
  
    
      ,
      {
        "title": "copyæ¨¡å—",
        "content": "copyæ¨¡å—ğŸ“ æ¦‚è¿°copy æ¨¡å—æä¾›äº†æµ…æ‹·è´ï¼ˆshallow copyï¼‰å’Œæ·±æ‹·è´ï¼ˆdeep copyï¼‰åŠŸèƒ½ï¼Œç”¨äºå¤åˆ¶Pythonå¯¹è±¡ã€‚æµ…æ‹·è´åˆ›å»ºæ–°å¯¹è±¡ä½†åªå¤åˆ¶å¼•ç”¨ï¼Œè€Œæ·±æ‹·è´é€’å½’å¤åˆ¶æ‰€æœ‰åµŒå¥—å¯¹è±¡ï¼Œç¡®ä¿å®Œå…¨ç‹¬ç«‹çš„å‰¯æœ¬ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  ç†è§£æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«å’Œå·¥ä½œåŸç†  æŒæ¡ copy.copy() å’Œ copy.deepcopy() çš„ä½¿ç”¨æ–¹æ³•  äº†è§£èµ‹å€¼æ“ä½œä¸æ‹·è´æ“ä½œçš„æœ¬è´¨åŒºåˆ«  å­¦ä¼šæ ¹æ®ä¸åŒåœºæ™¯é€‰æ‹©åˆé€‚çš„æ‹·è´æ–¹å¼  æŒæ¡æ‹·è´æ“ä½œçš„æ€§èƒ½è€ƒè™‘å’Œæœ€ä½³å®è·µğŸ“‹ å‰ç½®çŸ¥è¯†  Python åŸºç¡€è¯­æ³•å’Œæ•°æ®ç±»å‹  å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡çš„æ¦‚å¿µ  å¯¹è±¡å¼•ç”¨å’Œå†…å­˜ç®¡ç†çš„åŸºæœ¬ç†è§£  åˆ—è¡¨ã€å­—å…¸ã€å…ƒç»„ç­‰æ•°æ®ç»“æ„çš„ä½¿ç”¨ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µåœ¨Pythonä¸­ï¼Œå¯¹è±¡å¤åˆ¶æœ‰ä¸‰ç§æ–¹å¼ï¼š  èµ‹å€¼æ“ä½œï¼ˆ=ï¼‰ï¼šåˆ›å»ºå¯¹è±¡å¼•ç”¨ï¼Œä¸å¤åˆ¶å¯¹è±¡  æµ…æ‹·è´ï¼ˆshallow copyï¼‰ï¼šå¤åˆ¶å¯¹è±¡æœ¬èº«ï¼Œä½†åµŒå¥—å¯¹è±¡ä»ä¸ºå¼•ç”¨  æ·±æ‹·è´ï¼ˆdeep copyï¼‰ï¼šé€’å½’å¤åˆ¶å¯¹è±¡åŠå…¶æ‰€æœ‰åµŒå¥—å¯¹è±¡è¯­æ³•æ ¼å¼import copy# æµ…æ‹·è´shallow_copy = copy.copy(original_object)# æ·±æ‹·è´deep_copy = copy.deepcopy(original_object)ä¸»è¦å‡½æ•°è¯´æ˜            å‡½æ•°å      å‚æ•°      è¿”å›å€¼      è¯´æ˜                  copy.copy(x)      x: è¦å¤åˆ¶çš„å¯¹è±¡      æµ…æ‹·è´å¯¹è±¡      åˆ›å»ºå¯¹è±¡çš„æµ…æ‹·è´              copy.deepcopy(x[, memo])      x: è¦å¤åˆ¶çš„å¯¹è±¡memo: å¯é€‰çš„å¤‡å¿˜å½•å­—å…¸      æ·±æ‹·è´å¯¹è±¡      åˆ›å»ºå¯¹è±¡çš„æ·±æ‹·è´      ğŸ’¡ å®é™…åº”ç”¨èµ‹å€¼æ“ä½œ vs æ‹·è´æ“ä½œimport copy# åŸå§‹æ•°æ®original = [1, 2, [3, 4]]# èµ‹å€¼æ“ä½œ - åˆ›å»ºå¼•ç”¨assignment = originalassignment[0] = 99print(f\"èµ‹å€¼ååŸå§‹æ•°æ®: {original}\")  # è¾“å‡º: [99, 2, [3, 4]]# é‡ç½®æ•°æ®original = [1, 2, [3, 4]]# æµ…æ‹·è´ - å¤åˆ¶é¡¶å±‚å¯¹è±¡shallow = copy.copy(original)shallow[0] = 99print(f\"æµ…æ‹·è´ååŸå§‹æ•°æ®: {original}\")  # è¾“å‡º: [1, 2, [3, 4]]shallow[2][0] = 88print(f\"ä¿®æ”¹åµŒå¥—å¯¹è±¡å: {original}\")  # è¾“å‡º: [1, 2, [88, 4]]# é‡ç½®æ•°æ®original = [1, 2, [3, 4]]# æ·±æ‹·è´ - å®Œå…¨ç‹¬ç«‹çš„å‰¯æœ¬deep = copy.deepcopy(original)deep[0] = 99deep[2][0] = 88print(f\"æ·±æ‹·è´ååŸå§‹æ•°æ®: {original}\")  # è¾“å‡º: [1, 2, [3, 4]]æµ…æ‹·è´çš„ä½¿ç”¨åœºæ™¯import copy# åœºæ™¯1: ç®€å•æ•°æ®ç»“æ„def shallow_copy_simple():    \"\"\"ç®€å•æ•°æ®ç»“æ„çš„æµ…æ‹·è´\"\"\"    numbers = [1, 2, 3, 4, 5]    numbers_copy = copy.copy(numbers)        numbers_copy[0] = 99    print(f\"åŸå§‹åˆ—è¡¨: {numbers}\")        # [1, 2, 3, 4, 5]    print(f\"æ‹·è´åˆ—è¡¨: {numbers_copy}\")    # [99, 2, 3, 4, 5]# åœºæ™¯2: åµŒå¥—ä¸å¯å˜å¯¹è±¡def shallow_copy_immutable():    \"\"\"åµŒå¥—ä¸å¯å˜å¯¹è±¡çš„æµ…æ‹·è´\"\"\"    data = (1, 2, (3, 4), \"hello\")    data_copy = copy.copy(data)        # ç”±äºå…ƒç»„æ˜¯ä¸å¯å˜çš„ï¼Œæµ…æ‹·è´è¶³å¤Ÿå®‰å…¨    print(f\"åŸå§‹å…ƒç»„: {data}\")    print(f\"æ‹·è´å…ƒç»„: {data_copy}\")    print(f\"æ˜¯å¦ä¸ºåŒä¸€å¯¹è±¡: {data is data_copy}\")  # False# åœºæ™¯3: å­—å…¸çš„æµ…æ‹·è´def shallow_copy_dict():    \"\"\"å­—å…¸çš„æµ…æ‹·è´ç¤ºä¾‹\"\"\"    config = {        'host': 'localhost',        'port': 8080,        'settings': {'debug': True, 'timeout': 30}    }        config_copy = copy.copy(config)    config_copy['host'] = '127.0.0.1'    config_copy['settings']['debug'] = False        print(f\"åŸå§‹é…ç½®: {config}\")    print(f\"æ‹·è´é…ç½®: {config_copy}\")    # æ³¨æ„: settings å­—å…¸è¢«å…±äº«ï¼Œä¿®æ”¹ä¼šå½±å“åŸå§‹å¯¹è±¡shallow_copy_simple()shallow_copy_immutable()shallow_copy_dict()æ·±æ‹·è´çš„ä½¿ç”¨åœºæ™¯import copy# åœºæ™¯1: å¤æ‚åµŒå¥—ç»“æ„def deep_copy_nested():    \"\"\"å¤æ‚åµŒå¥—ç»“æ„çš„æ·±æ‹·è´\"\"\"    company = {        'name': 'TechCorp',        'departments': {            'engineering': {                'employees': ['Alice', 'Bob'],                'projects': ['Project A', 'Project B']            },            'marketing': {                'employees': ['Charlie', 'Diana'],                'campaigns': ['Campaign X', 'Campaign Y']            }        }    }        # æ·±æ‹·è´ç¡®ä¿å®Œå…¨ç‹¬ç«‹    company_copy = copy.deepcopy(company)        # ä¿®æ”¹æ‹·è´ä¸ä¼šå½±å“åŸå§‹æ•°æ®    company_copy['departments']['engineering']['employees'].append('Eve')    company_copy['departments']['marketing']['campaigns'][0] = 'New Campaign'        print(\"åŸå§‹å…¬å¸æ•°æ®:\")    print(company)    print(\"\\næ‹·è´å…¬å¸æ•°æ®:\")    print(company_copy)# åœºæ™¯2: æ ‘å½¢æ•°æ®ç»“æ„class TreeNode:    \"\"\"æ ‘èŠ‚ç‚¹ç±»\"\"\"    def __init__(self, value):        self.value = value        self.children = []        def add_child(self, child):        self.children.append(child)        def __repr__(self):        return f\"TreeNode({self.value})\"def deep_copy_tree():    \"\"\"æ ‘å½¢ç»“æ„çš„æ·±æ‹·è´\"\"\"    # åˆ›å»ºæ ‘ç»“æ„    root = TreeNode('root')    child1 = TreeNode('child1')    child2 = TreeNode('child2')    grandchild = TreeNode('grandchild')        root.add_child(child1)    root.add_child(child2)    child1.add_child(grandchild)        # æ·±æ‹·è´æ ‘ç»“æ„    root_copy = copy.deepcopy(root)        # ä¿®æ”¹æ‹·è´çš„æ ‘    root_copy.value = 'root_copy'    root_copy.children[0].value = 'child1_copy'        print(f\"åŸå§‹æ ¹èŠ‚ç‚¹: {root.value}\")    print(f\"åŸå§‹å­èŠ‚ç‚¹: {root.children[0].value}\")    print(f\"æ‹·è´æ ¹èŠ‚ç‚¹: {root_copy.value}\")    print(f\"æ‹·è´å­èŠ‚ç‚¹: {root_copy.children[0].value}\")# åœºæ™¯3: é¿å…å‰¯ä½œç”¨çš„å‡½æ•°è®¾è®¡def process_data_safe(data):    \"\"\"å®‰å…¨çš„æ•°æ®å¤„ç†å‡½æ•°ï¼Œä¸ä¿®æ”¹åŸå§‹æ•°æ®\"\"\"    # æ·±æ‹·è´ç¡®ä¿ä¸ä¿®æ”¹åŸå§‹æ•°æ®    data_copy = copy.deepcopy(data)        # å¯¹æ‹·è´è¿›è¡Œå¤„ç†    for item in data_copy:        if isinstance(item, list):            item.sort()        elif isinstance(item, dict):            item['processed'] = True        return data_copydef demonstrate_safe_processing():    \"\"\"æ¼”ç¤ºå®‰å…¨çš„æ•°æ®å¤„ç†\"\"\"    original_data = [        [3, 1, 4, 1, 5],        {'name': 'Alice', 'age': 30},        [9, 2, 6, 5, 3]    ]        processed_data = process_data_safe(original_data)        print(\"åŸå§‹æ•°æ®:\")    print(original_data)    print(\"\\nå¤„ç†åæ•°æ®:\")    print(processed_data)deep_copy_nested()deep_copy_tree()demonstrate_safe_processing()æ€§èƒ½æ¯”è¾ƒå’Œé€‰æ‹©æŒ‡å—import copyimport timedef performance_comparison():    \"\"\"æ€§èƒ½æ¯”è¾ƒç¤ºä¾‹\"\"\"    # åˆ›å»ºæµ‹è¯•æ•°æ®    large_data = {        'numbers': list(range(10000)),        'nested': [list(range(100)) for _ in range(100)],        'strings': [f'string_{i}' for i in range(1000)]    }        # æµ‹è¯•èµ‹å€¼æ“ä½œ    start_time = time.time()    assignment = large_data    assignment_time = time.time() - start_time        # æµ‹è¯•æµ…æ‹·è´    start_time = time.time()    shallow = copy.copy(large_data)    shallow_time = time.time() - start_time        # æµ‹è¯•æ·±æ‹·è´    start_time = time.time()    deep = copy.deepcopy(large_data)    deep_time = time.time() - start_time        print(f\"èµ‹å€¼æ“ä½œæ—¶é—´: {assignment_time:.6f} ç§’\")    print(f\"æµ…æ‹·è´æ—¶é—´: {shallow_time:.6f} ç§’\")    print(f\"æ·±æ‹·è´æ—¶é—´: {deep_time:.6f} ç§’\")        return {        'assignment': assignment_time,        'shallow': shallow_time,        'deep': deep_time    }def copy_selection_guide():    \"\"\"æ‹·è´æ–¹å¼é€‰æ‹©æŒ‡å—\"\"\"    scenarios = {        'ç®€å•æ•°æ®ï¼Œæ— åµŒå¥—': 'copy.copy() æˆ–åˆ‡ç‰‡æ“ä½œ',        'åµŒå¥—ä¸å¯å˜å¯¹è±¡': 'copy.copy() è¶³å¤Ÿ',        'åµŒå¥—å¯å˜å¯¹è±¡ï¼Œéœ€è¦ç‹¬ç«‹æ€§': 'copy.deepcopy()',        'å¤§æ•°æ®é‡ï¼Œæ€§èƒ½æ•æ„Ÿ': 'è€ƒè™‘æ˜¯å¦çœŸçš„éœ€è¦æ‹·è´',        'å‡½æ•°å‚æ•°ï¼Œé¿å…å‰¯ä½œç”¨': 'copy.deepcopy()',        'é…ç½®å¯¹è±¡ï¼Œéƒ¨åˆ†ä¿®æ”¹': 'copy.copy() + æ‰‹åŠ¨å¤„ç†åµŒå¥—'    }        print(\"æ‹·è´æ–¹å¼é€‰æ‹©æŒ‡å—:\")    for scenario, recommendation in scenarios.items():        print(f\"- {scenario}: {recommendation}\")performance_comparison()print()copy_selection_guide()è‡ªå®šä¹‰æ‹·è´è¡Œä¸ºimport copyclass CustomCopyClass:    \"\"\"è‡ªå®šä¹‰æ‹·è´è¡Œä¸ºçš„ç±»\"\"\"        def __init__(self, name, data):        self.name = name        self.data = data        self.created_at = time.time()        def __copy__(self):        \"\"\"è‡ªå®šä¹‰æµ…æ‹·è´è¡Œä¸º\"\"\"        print(f\"æ‰§è¡Œ {self.name} çš„æµ…æ‹·è´\")        # åˆ›å»ºæ–°å®ä¾‹ï¼Œä½†å…±äº« data        return CustomCopyClass(f\"{self.name}_copy\", self.data)        def __deepcopy__(self, memo):        \"\"\"è‡ªå®šä¹‰æ·±æ‹·è´è¡Œä¸º\"\"\"        print(f\"æ‰§è¡Œ {self.name} çš„æ·±æ‹·è´\")        # åˆ›å»ºå®Œå…¨ç‹¬ç«‹çš„å‰¯æœ¬        new_data = copy.deepcopy(self.data, memo)        return CustomCopyClass(f\"{self.name}_deepcopy\", new_data)        def __repr__(self):        return f\"CustomCopyClass(name='{self.name}', data={self.data})\"def demonstrate_custom_copy():    \"\"\"æ¼”ç¤ºè‡ªå®šä¹‰æ‹·è´è¡Œä¸º\"\"\"    original = CustomCopyClass(\"original\", [1, 2, [3, 4]])        print(\"åŸå§‹å¯¹è±¡:\", original)        # æµ…æ‹·è´    shallow = copy.copy(original)    print(\"æµ…æ‹·è´:\", shallow)        # æ·±æ‹·è´    deep = copy.deepcopy(original)    print(\"æ·±æ‹·è´:\", deep)        # æµ‹è¯•ç‹¬ç«‹æ€§    original.data[2][0] = 99    print(\"\\nä¿®æ”¹åŸå§‹å¯¹è±¡å:\")    print(\"åŸå§‹å¯¹è±¡:\", original)    print(\"æµ…æ‹·è´:\", shallow)  # å—å½±å“    print(\"æ·±æ‹·è´:\", deep)    # ä¸å—å½±å“demonstrate_custom_copy()âš ï¸ æ³¨æ„äº‹é¡¹å¸¸è§é™·é˜±  æ··æ·†èµ‹å€¼å’Œæ‹·è´    # é”™è¯¯ï¼šä»¥ä¸ºè¿™æ˜¯æ‹·è´list2 = list1  # è¿™åªæ˜¯åˆ›å»ºå¼•ç”¨   # æ­£ç¡®ï¼šçœŸæ­£çš„æ‹·è´list2 = copy.copy(list1)  # æµ…æ‹·è´list2 = copy.deepcopy(list1)  # æ·±æ‹·è´        æµ…æ‹·è´çš„åµŒå¥—å¯¹è±¡é™·é˜±    original = [[1, 2], [3, 4]]shallow = copy.copy(original)shallow[0][0] = 99  # ä¼šå½±å“åŸå§‹å¯¹è±¡ï¼        å¾ªç¯å¼•ç”¨é—®é¢˜    # deepcopy å¯ä»¥å¤„ç†å¾ªç¯å¼•ç”¨a = [1, 2]b = [3, 4]a.append(b)b.append(a)  # å¾ªç¯å¼•ç”¨   # copy.deepcopy() å¯ä»¥æ­£ç¡®å¤„ç†c = copy.deepcopy(a)      æ€§èƒ½è€ƒè™‘  æ·±æ‹·è´æ¯”æµ…æ‹·è´æ…¢å¾—å¤šï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹æˆ–å¤æ‚å¯¹è±¡  å¯¹äºä¸å¯å˜å¯¹è±¡ï¼Œæµ…æ‹·è´é€šå¸¸è¶³å¤Ÿ  è€ƒè™‘ä½¿ç”¨å…¶ä»–æ–¹æ³•ï¼Œå¦‚å·¥å‚å‡½æ•°æˆ–æ„å»ºå™¨æ¨¡å¼å†…å­˜ä½¿ç”¨  æ·±æ‹·è´ä¼šæ˜¾è‘—å¢åŠ å†…å­˜ä½¿ç”¨  å¯¹äºå¤§å‹æ•°æ®ç»“æ„ï¼Œè€ƒè™‘æ˜¯å¦çœŸçš„éœ€è¦å®Œæ•´æ‹·è´  å¯ä»¥è€ƒè™‘å†™æ—¶å¤åˆ¶ï¼ˆcopy-on-writeï¼‰ç­–ç•¥ğŸ”— ç›¸å…³å†…å®¹  Python å¯¹è±¡æ¨¡å‹  å†…å­˜ç®¡ç†  å¯å˜ä¸ä¸å¯å˜å¯¹è±¡ğŸ“š æ‰©å±•é˜…è¯»  Python å®˜æ–¹æ–‡æ¡£ - copy æ¨¡å—  Python æ·±æ‹·è´å’Œæµ…æ‹·è´è¯¦è§£  Python å¯¹è±¡å¤åˆ¶æœ€ä½³å®è·µğŸ·ï¸ æ ‡ç­¾copy æ‹·è´ æ·±æ‹·è´ æµ…æ‹·è´ å¯¹è±¡å¤åˆ¶ å†…å­˜ç®¡ç† å¼•ç”¨ æ ‡å‡†åº“æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å›¢é˜Ÿç‰ˆæœ¬: 1.0",
        "url": "/docs/stdlib/copy/",
        "category": "stdlib",
        "tags": ["copy","æ‹·è´","æ·±æ‹·è´","æµ…æ‹·è´","å¯¹è±¡å¤åˆ¶"]
      }
      
    
  
    
      ,
      {
        "title": "æ•°æ®ç±» (dataclass)",
        "content": "æ•°æ®ç±» (dataclass)å­¦ä¹ ç›®æ ‡é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†æŒæ¡ï¼š  ç†è§£æ•°æ®ç±»çš„æ¦‚å¿µå’Œåº”ç”¨åœºæ™¯  æŒæ¡@dataclassè£…é¥°å™¨çš„ä½¿ç”¨æ–¹æ³•  äº†è§£dataclassä¸ä¼ ç»Ÿç±»å®šä¹‰çš„åŒºåˆ«  å­¦ä¼šä½¿ç”¨field()å‡½æ•°è¿›è¡Œé«˜çº§é…ç½®  æŒæ¡æ•°æ®ç±»çš„æ¯”è¾ƒã€åºåˆ—åŒ–å’Œä¸å¯å˜æ€§  äº†è§£dataclassçš„æœ€ä½³å®è·µå’Œæ›¿ä»£æ–¹æ¡ˆä»€ä¹ˆæ˜¯æ•°æ®ç±»æ•°æ®ç±»æ˜¯Python 3.7å¼•å…¥çš„ä¸€ä¸ªå¼ºå¤§åŠŸèƒ½ï¼Œé€šè¿‡@dataclassè£…é¥°å™¨è‡ªåŠ¨ç”Ÿæˆå¸¸ç”¨çš„é­”æœ¯æ–¹æ³•ï¼ˆå¦‚__init__ã€__repr__ã€__eq__ç­‰ï¼‰ï¼Œä¸“é—¨ç”¨äºå­˜å‚¨æ•°æ®çš„ç®€å•ç±»ã€‚ä¼ ç»Ÿæ–¹å¼ vs æ•°æ®ç±»ä¼ ç»Ÿç±»å®šä¹‰ï¼šclass Player:    def __init__(self, name, number, position, age):        self.name = name        self.number = number        self.position = position        self.age = age        def __repr__(self):        return f'Player(name={self.name!r}, number={self.number!r}, position={self.position!r}, age={self.age!r})'        def __eq__(self, other):        if not isinstance(other, Player):            return NotImplemented        return (self.name, self.number, self.position, self.age) == \\               (other.name, other.number, other.position, other.age)ä½¿ç”¨æ•°æ®ç±»ï¼šfrom dataclasses import dataclass@dataclassclass Player:    name: str    number: int    position: str    age: int = 18  # é»˜è®¤å€¼# è‡ªåŠ¨ç”Ÿæˆ__init__ã€__repr__ã€__eq__ç­‰æ–¹æ³•harden = Player('James Harden', 1, 'PG', 34)print(harden)  # Player(name='James Harden', number=1, position='PG', age=34)@dataclassè£…é¥°å™¨å‚æ•°@dataclass(    init=True,          # ç”Ÿæˆ__init__æ–¹æ³•    repr=True,          # ç”Ÿæˆ__repr__æ–¹æ³•    eq=True,            # ç”Ÿæˆ__eq__æ–¹æ³•    order=False,        # ç”Ÿæˆæ¯”è¾ƒæ–¹æ³•(__lt__, __le__, __gt__, __ge__)    unsafe_hash=False,  # ç”Ÿæˆ__hash__æ–¹æ³•    frozen=False,       # åˆ›å»ºä¸å¯å˜å®ä¾‹    match_args=True,    # ç”Ÿæˆ__match_args__å…ƒç»„    kw_only=False,      # æ‰€æœ‰å­—æ®µä»…é™å…³é”®å­—å‚æ•°    slots=False         # æ·»åŠ __slots__å±æ€§)class MyClass:    passåŸºæœ¬å‚æ•°ç¤ºä¾‹from dataclasses import dataclass# å¯ç”¨æ’åºåŠŸèƒ½@dataclass(order=True)class Student:    name: str    grade: float    age: int = 18# åˆ›å»ºå­¦ç”Ÿå®ä¾‹student1 = Student('Alice', 95.5, 20)student2 = Student('Bob', 87.2, 19)# è‡ªåŠ¨æ”¯æŒæ¯”è¾ƒï¼ˆæŒ‰å­—æ®µé¡ºåºæ¯”è¾ƒï¼‰print(student1 &gt; student2)  # False (å› ä¸º'Alice' &lt; 'Bob')# åˆ›å»ºä¸å¯å˜æ•°æ®ç±»@dataclass(frozen=True)class Point:    x: float    y: floatpoint = Point(1.0, 2.0)# point.x = 3.0  # ä¼šæŠ›å‡ºFrozenInstanceErrorå­—æ®µé…ç½® - field()å‡½æ•°field()å‡½æ•°æä¾›äº†å¯¹æ•°æ®ç±»å­—æ®µçš„ç²¾ç»†æ§åˆ¶ï¼šfrom dataclasses import dataclass, fieldfrom typing import List@dataclassclass Team:    name: str    players: List[str] = field(default_factory=list)  # é¿å…å¯å˜é»˜è®¤å€¼é—®é¢˜    founded_year: int = field(default=2000)        # æ’åºæ—¶å¿½ç•¥æŸäº›å­—æ®µ    wins: int = field(default=0, compare=False)    losses: int = field(default=0, compare=False)        # ä¸åœ¨reprä¸­æ˜¾ç¤ºçš„å­—æ®µ    internal_id: str = field(default=\"\", repr=False)        # è®¡ç®—å­—æ®µï¼ˆä¸å‚ä¸åˆå§‹åŒ–ï¼‰    win_rate: float = field(init=False)        def __post_init__(self):        \"\"\"åˆå§‹åŒ–åå¤„ç†\"\"\"        total_games = self.wins + self.losses        self.win_rate = self.wins / total_games if total_games &gt; 0 else 0.0# ä½¿ç”¨ç¤ºä¾‹team = Team(\"Lakers\", [\"LeBron\", \"Davis\"], 1947, 50, 20)print(team.win_rate)  # 0.714...field()å‚æ•°è¯¦è§£from dataclasses import dataclass, fieldfrom typing import Any@dataclassclass AdvancedExample:    # åŸºæœ¬å­—æ®µ    name: str        # å¸¦é»˜è®¤å€¼    age: int = 25        # ä½¿ç”¨å·¥å‚å‡½æ•°é¿å…å¯å˜é»˜è®¤å€¼    hobbies: list = field(default_factory=list)        # ä¸å‚ä¸æ¯”è¾ƒ    id: str = field(compare=False, default=\"\")        # ä¸åœ¨reprä¸­æ˜¾ç¤º    password: str = field(repr=False, default=\"\")        # ä¸å‚ä¸åˆå§‹åŒ–ï¼ˆè®¡ç®—å­—æ®µï¼‰    display_name: str = field(init=False)        # æ·»åŠ å…ƒæ•°æ®    score: float = field(metadata={\"unit\": \"points\", \"range\": (0, 100)})        def __post_init__(self):        self.display_name = f\"{self.name} ({self.age})\"æ•°æ®ç±»çš„é«˜çº§ç‰¹æ€§ç»§æ‰¿@dataclassclass Person:    name: str    age: int@dataclassclass Employee(Person):    employee_id: str    department: str    salary: float = 50000.0# å­ç±»è‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»å­—æ®µemp = Employee(\"John\", 30, \"E001\", \"IT\", 75000.0)print(emp)  # Employee(name='John', age=30, employee_id='E001', department='IT', salary=75000.0)åµŒå¥—æ•°æ®ç±»@dataclassclass Address:    street: str    city: str    zipcode: str@dataclassclass Person:    name: str    age: int    address: Address# åˆ›å»ºåµŒå¥—å¯¹è±¡address = Address(\"123 Main St\", \"New York\", \"10001\")person = Person(\"Alice\", 25, address)print(person)æ•°æ®è½¬æ¢from dataclasses import dataclass, asdict, astuple@dataclassclass Product:    name: str    price: float    category: strproduct = Product(\"Laptop\", 999.99, \"Electronics\")# è½¬æ¢ä¸ºå­—å…¸product_dict = asdict(product)print(product_dict)  # {'name': 'Laptop', 'price': 999.99, 'category': 'Electronics'}# è½¬æ¢ä¸ºå…ƒç»„product_tuple = astuple(product)print(product_tuple)  # ('Laptop', 999.99, 'Electronics')å®é™…åº”ç”¨æ¡ˆä¾‹æ¡ˆä¾‹1ï¼šé…ç½®ç®¡ç†import jsonfrom dataclasses import dataclass, asdictfrom pathlib import Pathfrom typing import Optional@dataclassclass DatabaseConfig:    host: str = \"localhost\"    port: int = 5432    username: str = \"admin\"    password: str = \"\"    database: str = \"myapp\"        @classmethod    def from_file(cls, file_path: Path) -&gt; 'DatabaseConfig':        \"\"\"ä»JSONæ–‡ä»¶åŠ è½½é…ç½®\"\"\"        if file_path.exists():            with file_path.open() as f:                data = json.load(f)                return cls(**data)        return cls()        def save_to_file(self, file_path: Path) -&gt; None:        \"\"\"ä¿å­˜é…ç½®åˆ°JSONæ–‡ä»¶\"\"\"        with file_path.open('w') as f:            json.dump(asdict(self), f, indent=2)        def get_connection_string(self) -&gt; str:        \"\"\"ç”Ÿæˆæ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²\"\"\"        return f\"postgresql://{self.username}:{self.password}@{self.host}:{self.port}/{self.database}\"# ä½¿ç”¨ç¤ºä¾‹config = DatabaseConfig.from_file(Path(\"db_config.json\"))print(config.get_connection_string())æ¡ˆä¾‹2ï¼šæ•°æ®ä¼ è¾“å¯¹è±¡(DTO)from dataclasses import dataclassfrom datetime import datetimefrom typing import List, Optionalfrom enum import Enumclass OrderStatus(Enum):    PENDING = \"pending\"    CONFIRMED = \"confirmed\"    SHIPPED = \"shipped\"    DELIVERED = \"delivered\"    CANCELLED = \"cancelled\"@dataclass(frozen=True)  # ä¸å¯å˜DTOclass OrderItem:    product_id: str    product_name: str    quantity: int    unit_price: float        @property    def total_price(self) -&gt; float:        return self.quantity * self.unit_price@dataclassclass Order:    order_id: str    customer_id: str    items: List[OrderItem]    status: OrderStatus = OrderStatus.PENDING    created_at: datetime = field(default_factory=datetime.now)    notes: Optional[str] = None        @property    def total_amount(self) -&gt; float:        \"\"\"è®¡ç®—è®¢å•æ€»é‡‘é¢\"\"\"        return sum(item.total_price for item in self.items)        def add_item(self, item: OrderItem) -&gt; None:        \"\"\"æ·»åŠ è®¢å•é¡¹\"\"\"        # ç”±äºitemsæ˜¯å¯å˜çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹å®ƒ        self.items.append(item)        def update_status(self, new_status: OrderStatus) -&gt; None:        \"\"\"æ›´æ–°è®¢å•çŠ¶æ€\"\"\"        self.status = new_status# ä½¿ç”¨ç¤ºä¾‹items = [    OrderItem(\"P001\", \"Laptop\", 1, 999.99),    OrderItem(\"P002\", \"Mouse\", 2, 29.99)]order = Order(\"ORD001\", \"CUST001\", items)print(f\"è®¢å•æ€»é¢: ${order.total_amount:.2f}\")  # è®¢å•æ€»é¢: $1059.97order.update_status(OrderStatus.CONFIRMED)print(f\"è®¢å•çŠ¶æ€: {order.status.value}\")  # è®¢å•çŠ¶æ€: confirmedæ€§èƒ½ä¼˜åŒ–ä½¿ç”¨__slots__@dataclass(slots=True)  # Python 3.10+class OptimizedPoint:    x: float    y: float        def distance_from_origin(self) -&gt; float:        return (self.x ** 2 + self.y ** 2) ** 0.5# å¯¹äºPython 3.9åŠä»¥ä¸‹ç‰ˆæœ¬@dataclassclass ManualSlotsPoint:    __slots__ = ['x', 'y']    x: float    y: floatæœ€ä½³å®è·µ1. ç±»å‹æç¤ºfrom dataclasses import dataclassfrom typing import List, Optional, Unionfrom datetime import datetime@dataclassclass User:    id: int    username: str    email: str    is_active: bool = True    last_login: Optional[datetime] = None    roles: List[str] = field(default_factory=list)    metadata: dict = field(default_factory=dict)2. éªŒè¯å’Œåå¤„ç†@dataclassclass Rectangle:    width: float    height: float        def __post_init__(self):        \"\"\"åˆå§‹åŒ–åéªŒè¯\"\"\"        if self.width &lt;= 0 or self.height &lt;= 0:            raise ValueError(\"å®½åº¦å’Œé«˜åº¦å¿…é¡»ä¸ºæ­£æ•°\")        @property    def area(self) -&gt; float:        return self.width * self.height        @property    def perimeter(self) -&gt; float:        return 2 * (self.width + self.height)3. è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘@dataclass(order=True)class Student:    name: str = field(compare=False)  # å§“åä¸å‚ä¸æ¯”è¾ƒ    grade: float  # ä¸»è¦æ¯”è¾ƒå­—æ®µ    age: int = field(compare=False)  # å¹´é¾„ä¸å‚ä¸æ¯”è¾ƒ        def __post_init__(self):        # ç¡®ä¿æˆç»©åœ¨æœ‰æ•ˆèŒƒå›´å†…        if not 0 &lt;= self.grade &lt;= 100:            raise ValueError(\"æˆç»©å¿…é¡»åœ¨0-100ä¹‹é—´\")# å­¦ç”Ÿå°†æŒ‰æˆç»©æ’åºstudents = [    Student(\"Alice\", 95.5, 20),    Student(\"Bob\", 87.2, 19),    Student(\"Charlie\", 92.1, 21)]sorted_students = sorted(students)print([s.name for s in sorted_students])  # ['Bob', 'Charlie', 'Alice']ä¸å…¶ä»–æ–¹æ¡ˆçš„æ¯”è¾ƒdataclass vs namedtuplefrom collections import namedtuplefrom dataclasses import dataclass# namedtuple - ä¸å¯å˜ï¼Œè½»é‡çº§PointTuple = namedtuple('Point', ['x', 'y'])pt1 = PointTuple(1, 2)# pt1.x = 3  # é”™è¯¯ï¼šä¸å¯å˜# dataclass - å¯å˜ï¼ŒåŠŸèƒ½ä¸°å¯Œ@dataclassclass Point:    x: float    y: float        def distance_to(self, other: 'Point') -&gt; float:        return ((self.x - other.x) ** 2 + (self.y - other.y) ** 2) ** 0.5pt2 = Point(1, 2)pt2.x = 3  # å¯ä»¥ä¿®æ”¹dataclass vs attrs# attrsåº“æä¾›æ›´å¤šåŠŸèƒ½import attr@attr.s(auto_attribs=True)class AttrsPoint:    x: float = attr.ib(validator=attr.validators.instance_of(float))    y: float = attr.ib(validator=attr.validators.instance_of(float))        @x.validator    def _validate_x(self, attribute, value):        if value &lt; 0:            raise ValueError(\"xå¿…é¡»éè´Ÿ\")# dataclassæ›´ç®€å•ï¼Œä½†åŠŸèƒ½ç›¸å¯¹æœ‰é™@dataclassclass DataclassPoint:    x: float    y: float        def __post_init__(self):        if self.x &lt; 0 or self.y &lt; 0:            raise ValueError(\"åæ ‡å¿…é¡»éè´Ÿ\")å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ1. å¯å˜é»˜è®¤å€¼# é”™è¯¯åšæ³•@dataclassclass BadExample:    items: list = []  # å±é™©ï¼æ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€ä¸ªåˆ—è¡¨# æ­£ç¡®åšæ³•@dataclassclass GoodExample:    items: list = field(default_factory=list)  # æ¯ä¸ªå®ä¾‹éƒ½æœ‰ç‹¬ç«‹çš„åˆ—è¡¨2. ç»§æ‰¿ä¸­çš„å­—æ®µé¡ºåº@dataclassclass Base:    name: str    value: int = 0  # æœ‰é»˜è®¤å€¼@dataclassclass Derived(Base):    # å­ç±»çš„æ— é»˜è®¤å€¼å­—æ®µå¿…é¡»åœ¨çˆ¶ç±»æœ‰é»˜è®¤å€¼å­—æ®µä¹‹å‰    category: str  # è¿™ä¼šå¯¼è‡´é”™è¯¯    # è§£å†³æ–¹æ¡ˆï¼šç»™categoryæ·»åŠ é»˜è®¤å€¼æˆ–é‡æ–°è®¾è®¡ç»§æ‰¿ç»“æ„æ€»ç»“æ•°æ®ç±»æ˜¯Pythonä¸­å¤„ç†æ•°æ®ç»“æ„çš„å¼ºå¤§å·¥å…·ï¼Œå®ƒï¼š  ç®€åŒ–ä»£ç ï¼šè‡ªåŠ¨ç”Ÿæˆå¸¸ç”¨æ–¹æ³•ï¼Œå‡å°‘æ ·æ¿ä»£ç   ç±»å‹å®‰å…¨ï¼šæ”¯æŒç±»å‹æç¤ºï¼Œæé«˜ä»£ç å¯è¯»æ€§  åŠŸèƒ½ä¸°å¯Œï¼šæ”¯æŒæ¯”è¾ƒã€åºåˆ—åŒ–ã€ä¸å¯å˜æ€§ç­‰ç‰¹æ€§  æ€§èƒ½ä¼˜åŒ–ï¼šå¯é…åˆ__slots__æé«˜æ€§èƒ½  æ˜“äºç»´æŠ¤ï¼šæ¸…æ™°çš„å­—æ®µå®šä¹‰å’Œè‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•é€‰æ‹©æ•°æ®ç±»çš„æ—¶æœºï¼š  éœ€è¦å­˜å‚¨æ•°æ®çš„ç®€å•ç±»  å¸Œæœ›å‡å°‘æ ·æ¿ä»£ç   éœ€è¦è‡ªåŠ¨ç”Ÿæˆæ¯”è¾ƒå’Œè¡¨ç¤ºæ–¹æ³•  è¦æ±‚ç±»å‹å®‰å…¨å’Œä»£ç å¯è¯»æ€§æ•°æ®ç±»æ˜¯ç°ä»£Pythonå¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ï¼ŒæŒæ¡å®ƒå°†æ˜¾è‘—æé«˜ä½ çš„å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚æ‰©å±•é˜…è¯»  PEP 557 â€“ Data Classes  Pythonå®˜æ–¹æ–‡æ¡£ - dataclasses  attrsåº“æ–‡æ¡£  ç±»å‹æç¤ºæœ€ä½³å®è·µ",
        "url": "/docs/basics/dataclasses/",
        "category": "åŸºç¡€è¯­æ³•",
        "tags": ["ç±»ä¸å¯¹è±¡","è£…é¥°å™¨","æ•°æ®ç»“æ„"]
      }
      
    
  
    
      ,
      {
        "title": "datetimeæ¨¡å—",
        "content": "datetimeæ¨¡å—ğŸ“ æ¦‚è¿°datetimeæ¨¡å—æ˜¯Pythonä¸­å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„æ ¸å¿ƒæ¨¡å—ï¼Œæä¾›äº†æ¯”timeæ¨¡å—æ›´é«˜çº§ã€æ›´é¢å‘å¯¹è±¡çš„æ—¥æœŸæ—¶é—´å¤„ç†åŠŸèƒ½ã€‚å®ƒåŒ…å«äº†dateã€timeã€datetimeã€timedeltaã€timezoneç­‰ç±»ï¼Œæ”¯æŒæ—¥æœŸæ—¶é—´çš„åˆ›å»ºã€æ ¼å¼åŒ–ã€è®¡ç®—å’Œæ—¶åŒºå¤„ç†ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡datetimeæ¨¡å—çš„æ ¸å¿ƒç±»å’Œæ–¹æ³•  å­¦ä¼šæ—¥æœŸæ—¶é—´çš„åˆ›å»ºå’Œæ ¼å¼åŒ–  äº†è§£æ—¶é—´å·®è®¡ç®—å’Œæ—¥æœŸè¿ç®—  æŒæ¡æ—¶åŒºå¤„ç†å’Œè½¬æ¢  å­¦ä¼šæ—¥æœŸæ—¶é—´çš„æ¯”è¾ƒå’Œæ’åºğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•å’Œé¢å‘å¯¹è±¡æ¦‚å¿µ  äº†è§£æ—¶åŒºå’ŒUTCæ¦‚å¿µ  åŸºæœ¬çš„æ—¥æœŸæ—¶é—´æ¦‚å¿µğŸ” è¯¦ç»†å†…å®¹æ ¸å¿ƒç±»æ¦‚è¿°            ç±»å      åŠŸèƒ½      ç¤ºä¾‹                  date      æ—¥æœŸï¼ˆå¹´æœˆæ—¥ï¼‰      2024-01-01              time      æ—¶é—´ï¼ˆæ—¶åˆ†ç§’å¾®ç§’ï¼‰      12:30:45.123456              datetime      æ—¥æœŸæ—¶é—´      2024-01-01 12:30:45              timedelta      æ—¶é—´å·®      7å¤©3å°æ—¶              timezone      æ—¶åŒº      UTC+8      dateç±» - æ—¥æœŸå¤„ç†åˆ›å»ºæ—¥æœŸå¯¹è±¡from datetime import date, datetime# åˆ›å»ºæ—¥æœŸå¯¹è±¡çš„å‡ ç§æ–¹å¼today = date.today()  # ä»Šå¤©çš„æ—¥æœŸprint(f\"ä»Šå¤©: {today}\")# æŒ‡å®šæ—¥æœŸspecific_date = date(2024, 1, 1)print(f\"æŒ‡å®šæ—¥æœŸ: {specific_date}\")# ä»æ—¶é—´æˆ³åˆ›å»ºimport timetimestamp = time.time()date_from_timestamp = date.fromtimestamp(timestamp)print(f\"ä»æ—¶é—´æˆ³åˆ›å»º: {date_from_timestamp}\")# ä»åºæ•°åˆ›å»ºï¼ˆä»å…¬å…ƒ1å¹´1æœˆ1æ—¥å¼€å§‹çš„å¤©æ•°ï¼‰ordinal_date = date.fromordinal(738521)  # 2024å¹´1æœˆ1æ—¥print(f\"ä»åºæ•°åˆ›å»º: {ordinal_date}\")# ä»ISOæ ¼å¼å­—ç¬¦ä¸²åˆ›å»ºiso_date = date.fromisoformat('2024-01-01')print(f\"ä»ISOæ ¼å¼åˆ›å»º: {iso_date}\")æ—¥æœŸå±æ€§å’Œæ–¹æ³•today = date.today()# è·å–æ—¥æœŸç»„ä»¶print(f\"å¹´ä»½: {today.year}\")print(f\"æœˆä»½: {today.month}\")print(f\"æ—¥æœŸ: {today.day}\")# æ˜ŸæœŸç›¸å…³print(f\"æ˜ŸæœŸå‡ : {today.weekday()}\")  # 0=å‘¨ä¸€, 6=å‘¨æ—¥print(f\"ISOæ˜ŸæœŸå‡ : {today.isoweekday()}\")  # 1=å‘¨ä¸€, 7=å‘¨æ—¥# æ ¼å¼åŒ–print(f\"ISOæ ¼å¼: {today.isoformat()}\")print(f\"å­—ç¬¦ä¸²æ ¼å¼: {today.strftime('%Yå¹´%mæœˆ%dæ—¥')}\")# å…¶ä»–æ–¹æ³•print(f\"åºæ•°: {today.toordinal()}\")print(f\"æ—¶é—´å…ƒç»„: {today.timetuple()}\")print(f\"ISOæ—¥å†: {today.isocalendar()}\")  # (å¹´, å‘¨æ•°, æ˜ŸæœŸ)timeç±» - æ—¶é—´å¤„ç†åˆ›å»ºæ—¶é—´å¯¹è±¡from datetime import time# åˆ›å»ºæ—¶é—´å¯¹è±¡simple_time = time(14, 30, 0)  # 14:30:00print(f\"ç®€å•æ—¶é—´: {simple_time}\")# åŒ…å«å¾®ç§’çš„æ—¶é—´detailed_time = time(14, 30, 45, 123456)  # 14:30:45.123456print(f\"è¯¦ç»†æ—¶é—´: {detailed_time}\")# åŒ…å«æ—¶åŒºçš„æ—¶é—´from datetime import timezone, timedeltatz = timezone(timedelta(hours=8))  # UTC+8time_with_tz = time(14, 30, 0, tzinfo=tz)print(f\"å¸¦æ—¶åŒºæ—¶é—´: {time_with_tz}\")# ä»ISOæ ¼å¼åˆ›å»ºiso_time = time.fromisoformat('14:30:45')print(f\"ä»ISOæ ¼å¼åˆ›å»º: {iso_time}\")æ—¶é—´å±æ€§å’Œæ“ä½œt = time(14, 30, 45, 123456)# è·å–æ—¶é—´ç»„ä»¶print(f\"å°æ—¶: {t.hour}\")print(f\"åˆ†é’Ÿ: {t.minute}\")print(f\"ç§’: {t.second}\")print(f\"å¾®ç§’: {t.microsecond}\")print(f\"æ—¶åŒº: {t.tzinfo}\")# æ ¼å¼åŒ–print(f\"ISOæ ¼å¼: {t.isoformat()}\")print(f\"è‡ªå®šä¹‰æ ¼å¼: {t.strftime('%Hæ—¶%Måˆ†%Sç§’')}\")# æ›¿æ¢æ—¶é—´ç»„ä»¶new_time = t.replace(hour=16, minute=0)print(f\"æ›¿æ¢å: {new_time}\")datetimeç±» - æ—¥æœŸæ—¶é—´å¤„ç†åˆ›å»ºdatetimeå¯¹è±¡from datetime import datetime, timezone, timedelta# è·å–å½“å‰æ—¶é—´now = datetime.now()  # æœ¬åœ°æ—¶é—´print(f\"å½“å‰æœ¬åœ°æ—¶é—´: {now}\")utc_now = datetime.utcnow()  # UTCæ—¶é—´ï¼ˆå·²å¼ƒç”¨ï¼Œå»ºè®®ä½¿ç”¨timezone.utcï¼‰print(f\"å½“å‰UTCæ—¶é—´: {utc_now}\")# æ¨èçš„UTCæ—¶é—´è·å–æ–¹å¼utc_now_new = datetime.now(timezone.utc)print(f\"å½“å‰UTCæ—¶é—´(æ–°): {utc_now_new}\")# æŒ‡å®šæ—¥æœŸæ—¶é—´specific_dt = datetime(2024, 1, 1, 12, 30, 45)print(f\"æŒ‡å®šæ—¥æœŸæ—¶é—´: {specific_dt}\")# ä»å­—ç¬¦ä¸²è§£ædt_from_str = datetime.strptime('2024-01-01 12:30:45', '%Y-%m-%d %H:%M:%S')print(f\"ä»å­—ç¬¦ä¸²è§£æ: {dt_from_str}\")# ä»ISOæ ¼å¼åˆ›å»ºiso_dt = datetime.fromisoformat('2024-01-01T12:30:45')print(f\"ä»ISOæ ¼å¼åˆ›å»º: {iso_dt}\")# ä»æ—¶é—´æˆ³åˆ›å»ºtimestamp = 1704110445.0dt_from_timestamp = datetime.fromtimestamp(timestamp)print(f\"ä»æ—¶é—´æˆ³åˆ›å»º: {dt_from_timestamp}\")datetimeå±æ€§å’Œæ–¹æ³•dt = datetime.now()# æ—¥æœŸæ—¶é—´ç»„ä»¶print(f\"å¹´: {dt.year}, æœˆ: {dt.month}, æ—¥: {dt.day}\")print(f\"æ—¶: {dt.hour}, åˆ†: {dt.minute}, ç§’: {dt.second}\")print(f\"å¾®ç§’: {dt.microsecond}\")print(f\"æ—¶åŒº: {dt.tzinfo}\")# è·å–æ—¥æœŸå’Œæ—¶é—´éƒ¨åˆ†print(f\"æ—¥æœŸéƒ¨åˆ†: {dt.date()}\")print(f\"æ—¶é—´éƒ¨åˆ†: {dt.time()}\")# æ˜ŸæœŸç›¸å…³print(f\"æ˜ŸæœŸå‡ : {dt.weekday()}\")print(f\"ISOæ˜ŸæœŸå‡ : {dt.isoweekday()}\")# æ ¼å¼åŒ–print(f\"ISOæ ¼å¼: {dt.isoformat()}\")print(f\"æ—¶é—´æˆ³: {dt.timestamp()}\")print(f\"è‡ªå®šä¹‰æ ¼å¼: {dt.strftime('%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S')}\")# æ›¿æ¢ç»„ä»¶new_dt = dt.replace(year=2025, hour=0, minute=0, second=0, microsecond=0)print(f\"æ›¿æ¢å: {new_dt}\")timedeltaç±» - æ—¶é—´å·®è®¡ç®—åˆ›å»ºæ—¶é—´å·®å¯¹è±¡from datetime import timedelta# åˆ›å»ºæ—¶é—´å·®week = timedelta(weeks=1)day = timedelta(days=1)hour = timedelta(hours=1)minute = timedelta(minutes=30)second = timedelta(seconds=45)microsecond = timedelta(microseconds=123456)# ç»„åˆæ—¶é—´å·®complex_delta = timedelta(days=7, hours=3, minutes=30, seconds=45)print(f\"å¤åˆæ—¶é—´å·®: {complex_delta}\")# ä»æ€»ç§’æ•°åˆ›å»ºtotal_seconds = 3661  # 1å°æ—¶1åˆ†1ç§’delta_from_seconds = timedelta(seconds=total_seconds)print(f\"ä»ç§’æ•°åˆ›å»º: {delta_from_seconds}\")æ—¶é—´å·®è¿ç®—from datetime import datetime, timedeltanow = datetime.now()print(f\"å½“å‰æ—¶é—´: {now}\")# æ—¶é—´åŠ å‡tomorrow = now + timedelta(days=1)yesterday = now - timedelta(days=1)next_week = now + timedelta(weeks=1)next_hour = now + timedelta(hours=1)print(f\"æ˜å¤©: {tomorrow}\")print(f\"æ˜¨å¤©: {yesterday}\")print(f\"ä¸‹å‘¨: {next_week}\")print(f\"ä¸€å°æ—¶å: {next_hour}\")# è®¡ç®—æ—¶é—´å·®start_time = datetime(2024, 1, 1, 9, 0, 0)end_time = datetime(2024, 1, 1, 17, 30, 0)work_duration = end_time - start_timeprint(f\"å·¥ä½œæ—¶é•¿: {work_duration}\")print(f\"å·¥ä½œå°æ—¶æ•°: {work_duration.total_seconds() / 3600}\")# æ—¶é—´å·®å±æ€§delta = timedelta(days=5, hours=3, minutes=30, seconds=45)print(f\"å¤©æ•°: {delta.days}\")print(f\"ç§’æ•°: {delta.seconds}\")print(f\"å¾®ç§’: {delta.microseconds}\")print(f\"æ€»ç§’æ•°: {delta.total_seconds()}\")æ—¶åŒºå¤„ç†timezoneç±»from datetime import datetime, timezone, timedelta# åˆ›å»ºæ—¶åŒºå¯¹è±¡utc = timezone.utcbeijing = timezone(timedelta(hours=8))tokyo = timezone(timedelta(hours=9))newyork = timezone(timedelta(hours=-5))print(f\"UTCæ—¶åŒº: {utc}\")print(f\"åŒ—äº¬æ—¶åŒº: {beijing}\")print(f\"ä¸œäº¬æ—¶åŒº: {tokyo}\")print(f\"çº½çº¦æ—¶åŒº: {newyork}\")# åˆ›å»ºå¸¦æ—¶åŒºçš„datetimeutc_time = datetime.now(utc)beijing_time = datetime.now(beijing)print(f\"UTCæ—¶é—´: {utc_time}\")print(f\"åŒ—äº¬æ—¶é—´: {beijing_time}\")# æ—¶åŒºè½¬æ¢utc_dt = datetime(2024, 1, 1, 12, 0, 0, tzinfo=utc)beijing_dt = utc_dt.astimezone(beijing)tokyo_dt = utc_dt.astimezone(tokyo)print(f\"UTC: {utc_dt}\")print(f\"åŒ—äº¬: {beijing_dt}\")print(f\"ä¸œäº¬: {tokyo_dt}\")æ—¶åŒºè½¬æ¢ç¤ºä¾‹# æœ¬åœ°æ—¶é—´è½¬UTClocal_dt = datetime.now()print(f\"æœ¬åœ°æ—¶é—´: {local_dt}\")# ä¸ºæœ¬åœ°æ—¶é—´æ·»åŠ æ—¶åŒºä¿¡æ¯ï¼ˆå‡è®¾æ˜¯åŒ—äº¬æ—¶é—´ï¼‰local_with_tz = local_dt.replace(tzinfo=beijing)utc_converted = local_with_tz.astimezone(utc)print(f\"è½¬æ¢ä¸ºUTC: {utc_converted}\")# UTCè½¬å…¶ä»–æ—¶åŒºutc_dt = datetime.now(utc)print(f\"UTCæ—¶é—´: {utc_dt}\")timezones = {    'åŒ—äº¬': timezone(timedelta(hours=8)),    'ä¸œäº¬': timezone(timedelta(hours=9)),    'ä¼¦æ•¦': timezone(timedelta(hours=0)),    'çº½çº¦': timezone(timedelta(hours=-5)),    'æ´›æ‰çŸ¶': timezone(timedelta(hours=-8))}print(\"\\nä¸–ç•Œæ—¶é—´:\")for city, tz in timezones.items():    local_time = utc_dt.astimezone(tz)    print(f\"{city}: {local_time.strftime('%Y-%m-%d %H:%M:%S %Z')}\")ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•def format_datetime_examples():    \"\"\"æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–ç¤ºä¾‹\"\"\"    now = datetime.now()        formats = {        'æ ‡å‡†æ ¼å¼': '%Y-%m-%d %H:%M:%S',        'ä¸­æ–‡æ ¼å¼': '%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%Måˆ†%Sç§’',        'ç¾å¼æ ¼å¼': '%m/%d/%Y %I:%M:%S %p',        'æ¬§å¼æ ¼å¼': '%d/%m/%Y %H:%M:%S',        'ç®€çŸ­æ ¼å¼': '%y%m%d_%H%M%S',        'ISOæ ¼å¼': '%Y-%m-%dT%H:%M:%S',        'æ–‡ä»¶åæ ¼å¼': '%Y%m%d_%H%M%S',        'æ—¥å¿—æ ¼å¼': '[%Y-%m-%d %H:%M:%S]'    }        print(\"æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–ç¤ºä¾‹:\")    for name, fmt in formats.items():        formatted = now.strftime(fmt)        print(f\"{name}: {formatted}\")        return formats# ä½¿ç”¨ç¤ºä¾‹format_datetime_examples()é«˜çº§ç”¨æ³•class DateTimeHelper:    \"\"\"æ—¥æœŸæ—¶é—´åŠ©æ‰‹ç±»\"\"\"        @staticmethod    def get_age(birth_date):        \"\"\"è®¡ç®—å¹´é¾„\"\"\"        today = date.today()        age = today.year - birth_date.year                # æ£€æŸ¥æ˜¯å¦è¿˜æ²¡è¿‡ç”Ÿæ—¥        if today.month &lt; birth_date.month or \\           (today.month == birth_date.month and today.day &lt; birth_date.day):            age -= 1                return age        @staticmethod    def get_workdays(start_date, end_date, holidays=None):        \"\"\"è®¡ç®—å·¥ä½œæ—¥æ•°é‡ï¼ˆæ’é™¤å‘¨æœ«å’ŒèŠ‚å‡æ—¥ï¼‰\"\"\"        if holidays is None:            holidays = set()                workdays = 0        current = start_date                while current &lt;= end_date:            # æ£€æŸ¥æ˜¯å¦ä¸ºå·¥ä½œæ—¥ï¼ˆå‘¨ä¸€åˆ°å‘¨äº”ï¼‰            if current.weekday() &lt; 5 and current not in holidays:                workdays += 1            current += timedelta(days=1)                return workdays        @staticmethod    def get_next_weekday(start_date, weekday):        \"\"\"è·å–ä¸‹ä¸€ä¸ªæŒ‡å®šæ˜ŸæœŸå‡ çš„æ—¥æœŸ\"\"\"        days_ahead = weekday - start_date.weekday()        if days_ahead &lt;= 0:  # ç›®æ ‡æ—¥æœŸå·²è¿‡ï¼Œè·å–ä¸‹å‘¨çš„            days_ahead += 7        return start_date + timedelta(days=days_ahead)        @staticmethod    def get_month_range(year, month):        \"\"\"è·å–æŒ‡å®šæœˆä»½çš„æ—¥æœŸèŒƒå›´\"\"\"        first_day = date(year, month, 1)                # è®¡ç®—ä¸‹ä¸ªæœˆçš„ç¬¬ä¸€å¤©ï¼Œç„¶åå‡ä¸€å¤©å¾—åˆ°æœ¬æœˆæœ€åä¸€å¤©        if month == 12:            next_month = date(year + 1, 1, 1)        else:            next_month = date(year, month + 1, 1)                last_day = next_month - timedelta(days=1)                return first_day, last_day        @staticmethod    def format_duration(td):        \"\"\"æ ¼å¼åŒ–æ—¶é—´å·®ä¸ºå¯è¯»å­—ç¬¦ä¸²\"\"\"        total_seconds = int(td.total_seconds())                days = total_seconds // 86400        hours = (total_seconds % 86400) // 3600        minutes = (total_seconds % 3600) // 60        seconds = total_seconds % 60                parts = []        if days:            parts.append(f\"{days}å¤©\")        if hours:            parts.append(f\"{hours}å°æ—¶\")        if minutes:            parts.append(f\"{minutes}åˆ†é’Ÿ\")        if seconds or not parts:            parts.append(f\"{seconds}ç§’\")                return \"\".join(parts)# ä½¿ç”¨ç¤ºä¾‹helper = DateTimeHelper()# è®¡ç®—å¹´é¾„birth_date = date(1990, 5, 15)age = helper.get_age(birth_date)print(f\"å¹´é¾„: {age}å²\")# è®¡ç®—å·¥ä½œæ—¥start = date(2024, 1, 1)end = date(2024, 1, 31)holidays = {date(2024, 1, 1)}  # å…ƒæ—¦workdays = helper.get_workdays(start, end, holidays)print(f\"2024å¹´1æœˆå·¥ä½œæ—¥: {workdays}å¤©\")# è·å–ä¸‹ä¸€ä¸ªå‘¨äº”today = date.today()next_friday = helper.get_next_weekday(today, 4)  # 4è¡¨ç¤ºå‘¨äº”print(f\"ä¸‹ä¸€ä¸ªå‘¨äº”: {next_friday}\")# è·å–æœˆä»½èŒƒå›´first, last = helper.get_month_range(2024, 2)print(f\"2024å¹´2æœˆ: {first} åˆ° {last}\")# æ ¼å¼åŒ–æ—¶é—´å·®duration = timedelta(days=5, hours=3, minutes=30, seconds=45)formatted = helper.format_duration(duration)print(f\"æ—¶é—´å·®: {formatted}\")å®é™…æ¡ˆä¾‹from datetime import datetime, timedelta, timezoneimport jsonclass EventScheduler:    \"\"\"äº‹ä»¶è°ƒåº¦å™¨\"\"\"        def __init__(self):        self.events = []        self.timezone = timezone(timedelta(hours=8))  # é»˜è®¤åŒ—äº¬æ—¶é—´        def add_event(self, title, start_time, duration_minutes, description=\"\"):        \"\"\"æ·»åŠ äº‹ä»¶\"\"\"        if isinstance(start_time, str):            start_time = datetime.fromisoformat(start_time)                # ç¡®ä¿æ—¶é—´æœ‰æ—¶åŒºä¿¡æ¯        if start_time.tzinfo is None:            start_time = start_time.replace(tzinfo=self.timezone)                end_time = start_time + timedelta(minutes=duration_minutes)                event = {            'id': len(self.events) + 1,            'title': title,            'start_time': start_time,            'end_time': end_time,            'duration': timedelta(minutes=duration_minutes),            'description': description,            'created_at': datetime.now(self.timezone)        }                self.events.append(event)        return event['id']        def get_events_by_date(self, target_date):        \"\"\"è·å–æŒ‡å®šæ—¥æœŸçš„äº‹ä»¶\"\"\"        if isinstance(target_date, str):            target_date = datetime.fromisoformat(target_date).date()        elif isinstance(target_date, datetime):            target_date = target_date.date()                day_events = []        for event in self.events:            if event['start_time'].date() == target_date:                day_events.append(event)                # æŒ‰å¼€å§‹æ—¶é—´æ’åº        day_events.sort(key=lambda x: x['start_time'])        return day_events        def check_conflicts(self, start_time, end_time):        \"\"\"æ£€æŸ¥æ—¶é—´å†²çª\"\"\"        conflicts = []                for event in self.events:            # æ£€æŸ¥æ—¶é—´é‡å             if (start_time &lt; event['end_time'] and end_time &gt; event['start_time']):                conflicts.append(event)                return conflicts        def get_free_time(self, date, work_start=9, work_end=18):        \"\"\"è·å–æŒ‡å®šæ—¥æœŸçš„ç©ºé—²æ—¶é—´æ®µ\"\"\"        if isinstance(date, str):            date = datetime.fromisoformat(date).date()                # å·¥ä½œæ—¶é—´èŒƒå›´        work_start_dt = datetime.combine(date, datetime.min.time().replace(hour=work_start))        work_end_dt = datetime.combine(date, datetime.min.time().replace(hour=work_end))                # æ·»åŠ æ—¶åŒºä¿¡æ¯        work_start_dt = work_start_dt.replace(tzinfo=self.timezone)        work_end_dt = work_end_dt.replace(tzinfo=self.timezone)                # è·å–å½“å¤©çš„äº‹ä»¶        day_events = self.get_events_by_date(date)                free_periods = []        current_time = work_start_dt                for event in day_events:            # å¦‚æœäº‹ä»¶å¼€å§‹æ—¶é—´åœ¨å·¥ä½œæ—¶é—´å†…            if event['start_time'] &gt;= work_start_dt and event['start_time'] &lt;= work_end_dt:                if current_time &lt; event['start_time']:                    # æ·»åŠ ç©ºé—²æ—¶é—´æ®µ                    free_periods.append({                        'start': current_time,                        'end': event['start_time'],                        'duration': event['start_time'] - current_time                    })                                # æ›´æ–°å½“å‰æ—¶é—´åˆ°äº‹ä»¶ç»“æŸæ—¶é—´                current_time = max(current_time, event['end_time'])                # æ£€æŸ¥æœ€åä¸€ä¸ªäº‹ä»¶åˆ°å·¥ä½œç»“æŸæ—¶é—´çš„ç©ºé—²æ—¶é—´        if current_time &lt; work_end_dt:            free_periods.append({                'start': current_time,                'end': work_end_dt,                'duration': work_end_dt - current_time            })                return free_periods        def generate_daily_schedule(self, date):        \"\"\"ç”Ÿæˆæ—¥ç¨‹è¡¨\"\"\"        events = self.get_events_by_date(date)        free_times = self.get_free_time(date)                schedule = f\"\\n{date} æ—¥ç¨‹å®‰æ’\\n\"        schedule += \"=\" * 30 + \"\\n\"                if not events:            schedule += \"ä»Šå¤©æ²¡æœ‰å®‰æ’äº‹ä»¶\\n\"        else:            schedule += \"å·²å®‰æ’äº‹ä»¶:\\n\"            for event in events:                start_str = event['start_time'].strftime('%H:%M')                end_str = event['end_time'].strftime('%H:%M')                duration_str = DateTimeHelper.format_duration(event['duration'])                                schedule += f\"  {start_str}-{end_str} {event['title']} ({duration_str})\\n\"                if event['description']:                    schedule += f\"    æè¿°: {event['description']}\\n\"                if free_times:            schedule += \"\\nç©ºé—²æ—¶é—´:\\n\"            for free in free_times:                start_str = free['start'].strftime('%H:%M')                end_str = free['end'].strftime('%H:%M')                duration_str = DateTimeHelper.format_duration(free['duration'])                schedule += f\"  {start_str}-{end_str} (ç©ºé—² {duration_str})\\n\"                return schedule        def export_events(self, filename):        \"\"\"å¯¼å‡ºäº‹ä»¶åˆ°JSONæ–‡ä»¶\"\"\"        export_data = []                for event in self.events:            export_event = {                'id': event['id'],                'title': event['title'],                'start_time': event['start_time'].isoformat(),                'end_time': event['end_time'].isoformat(),                'duration_minutes': int(event['duration'].total_seconds() / 60),                'description': event['description'],                'created_at': event['created_at'].isoformat()            }            export_data.append(export_event)                with open(filename, 'w', encoding='utf-8') as f:            json.dump(export_data, f, ensure_ascii=False, indent=2)                print(f\"äº‹ä»¶å·²å¯¼å‡ºåˆ° {filename}\")# ä½¿ç”¨ç¤ºä¾‹scheduler = EventScheduler()# æ·»åŠ ä¸€äº›äº‹ä»¶scheduler.add_event(\"æ™¨ä¼š\", \"2024-01-15T09:00:00\", 30, \"å›¢é˜Ÿæ—¥å¸¸æ™¨ä¼š\")scheduler.add_event(\"é¡¹ç›®è¯„å®¡\", \"2024-01-15T10:30:00\", 90, \"æ–°é¡¹ç›®æ–¹æ¡ˆè¯„å®¡\")scheduler.add_event(\"åˆé¤\", \"2024-01-15T12:00:00\", 60, \"å›¢é˜Ÿèšé¤\")scheduler.add_event(\"å®¢æˆ·ä¼šè®®\", \"2024-01-15T14:00:00\", 120, \"ä¸å®¢æˆ·è®¨è®ºéœ€æ±‚\")scheduler.add_event(\"ä»£ç å®¡æŸ¥\", \"2024-01-15T16:30:00\", 60, \"ä»£ç è´¨é‡æ£€æŸ¥\")# ç”Ÿæˆæ—¥ç¨‹è¡¨schedule = scheduler.generate_daily_schedule(date(2024, 1, 15))print(schedule)# æ£€æŸ¥å†²çªconflicts = scheduler.check_conflicts(    datetime(2024, 1, 15, 10, 0, tzinfo=scheduler.timezone),    datetime(2024, 1, 15, 11, 0, tzinfo=scheduler.timezone))if conflicts:    print(f\"\\næ—¶é—´å†²çªæ£€æµ‹:\")    for conflict in conflicts:        print(f\"  ä¸ '{conflict['title']}' å†²çª\")else:    print(\"\\næ²¡æœ‰æ—¶é—´å†²çª\")# å¯¼å‡ºäº‹ä»¶scheduler.export_events('events.json')âš ï¸ æ³¨æ„äº‹é¡¹  æ—¶åŒºå¤„ç†: å§‹ç»ˆæ˜ç¡®æŒ‡å®šæ—¶åŒºï¼Œé¿å…æ—¶åŒºæ··ä¹±  å¤ä»¤æ—¶: åœ¨å¤„ç†æ—¶åŒºè½¬æ¢æ—¶è¦è€ƒè™‘å¤ä»¤æ—¶çš„å½±å“  ç²¾åº¦: datetimeçš„ç²¾åº¦ä¸ºå¾®ç§’ï¼Œå¯¹äºæ›´é«˜ç²¾åº¦éœ€æ±‚è€ƒè™‘å…¶ä»–æ–¹æ¡ˆ  æ€§èƒ½: å¤§é‡æ—¥æœŸæ—¶é—´è®¡ç®—æ—¶æ³¨æ„æ€§èƒ½ä¼˜åŒ–  æœ¬åœ°åŒ–: æœˆä»½å’Œæ˜ŸæœŸåç§°çš„æœ¬åœ°åŒ–éœ€è¦é¢å¤–å¤„ç†  é—°ç§’: datetimeä¸å¤„ç†é—°ç§’ï¼Œå¦‚éœ€è¦è€ƒè™‘ä½¿ç”¨ä¸“é—¨çš„åº“ğŸ”— ç›¸å…³å†…å®¹  timeæ¨¡å— - åŸºç¡€æ—¶é—´å¤„ç†åŠŸèƒ½  calendaræ¨¡å— - æ—¥å†ç›¸å…³åŠŸèƒ½  å†…ç½®å‡½æ•° - äº†è§£ç›¸å…³çš„å†…ç½®å‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Python datetimeæ¨¡å—å®˜æ–¹æ–‡æ¡£  ISO 8601æ—¥æœŸæ—¶é—´æ ‡å‡†  æ—¶åŒºæ•°æ®åº“  Pythonæ—¶åŒºå¤„ç†æœ€ä½³å®è·µğŸ·ï¸ æ ‡ç­¾æ—¥æœŸæ—¶é—´ æ—¶åŒº æ ¼å¼åŒ– è®¡ç®— æ—¶é—´å·® æ ‡å‡†åº“æœ€åæ›´æ–°: 2024-01-01ä½œè€…: Pythonæ–‡æ¡£å›¢é˜Ÿç‰ˆæœ¬: 1.0",
        "url": "/docs/stdlib/datetime/",
        "category": "stdlib",
        "tags": ["æ—¥æœŸæ—¶é—´","æ—¶åŒº","æ ¼å¼åŒ–","è®¡ç®—","æ ‡å‡†åº“"]
      }
      
    
  
    
      ,
      {
        "title": "dict() - å­—å…¸æ„é€ å‡½æ•°",
        "content": "dict() - å­—å…¸æ„é€ å‡½æ•°ğŸ“ æ¦‚è¿°dict() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå­—å…¸å¯¹è±¡æˆ–å°†å…¶ä»–æ•°æ®ç»“æ„è½¬æ¢ä¸ºå­—å…¸ã€‚å­—å…¸æ˜¯Pythonä¸­çš„å¯å˜æ˜ å°„ç±»å‹ï¼Œä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼Œå…·æœ‰å¿«é€ŸæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤çš„ç‰¹æ€§ï¼Œæ˜¯æ•°æ®å¤„ç†ä¸­æœ€é‡è¦çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡dict()å‡½æ•°çš„å¤šç§ç”¨æ³•  ç†è§£å­—å…¸çš„ç‰¹æ€§å’Œåº”ç”¨åœºæ™¯  å­¦ä¼šä¸åŒæ•°æ®ç»“æ„åˆ°å­—å…¸çš„è½¬æ¢  äº†è§£å­—å…¸çš„æ€§èƒ½ç‰¹ç‚¹å’Œæœ€ä½³å®è·µğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  å¯è¿­ä»£å¯¹è±¡æ¦‚å¿µ  é”®å€¼å¯¹æ¦‚å¿µ  å“ˆå¸Œè¡¨åŸºç¡€ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µå­—å…¸ï¼ˆdictï¼‰æ˜¯Pythonä¸­çš„å¯å˜æ˜ å°„ç±»å‹ï¼Œä½¿ç”¨é”®å€¼å¯¹å­˜å‚¨æ•°æ®ã€‚dict() å‡½æ•°æä¾›äº†å¤šç§åˆ›å»ºå­—å…¸çš„æ–¹å¼ï¼Œæ”¯æŒä»å„ç§æ•°æ®æºæ„å»ºå­—å…¸ï¼Œæ˜¯æ•°æ®ç»„ç»‡å’Œå¤„ç†çš„æ ¸å¿ƒå·¥å…·ã€‚è¯­æ³•æ ¼å¼# åˆ›å»ºç©ºå­—å…¸dict()# ä»å…³é”®å­—å‚æ•°åˆ›å»ºdict(**kwargs)# ä»å¯è¿­ä»£å¯¹è±¡åˆ›å»ºdict(iterable)# ä»æ˜ å°„å¯¹è±¡åˆ›å»ºdict(mapping)# æ··åˆæ–¹å¼dict(iterable, **kwargs)dict(mapping, **kwargs)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  iterable      iterable      å¦      æ—       åŒ…å«é”®å€¼å¯¹çš„å¯è¿­ä»£å¯¹è±¡              mapping      mapping      å¦      æ—       æ˜ å°„å¯¹è±¡ï¼ˆå¦‚å¦ä¸€ä¸ªå­—å…¸ï¼‰              **kwargs      any      å¦      æ—       å…³é”®å­—å‚æ•°å½¢å¼çš„é”®å€¼å¯¹      è¿”å›å€¼  ç±»å‹: dict  è¯´æ˜: æ–°åˆ›å»ºçš„å­—å…¸å¯¹è±¡ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# åˆ›å»ºç©ºå­—å…¸empty_dict = dict()print(f\"ç©ºå­—å…¸: {empty_dict}\")  # è¾“å‡º: ç©ºå­—å…¸: {}print(f\"ç±»å‹: {type(empty_dict)}\")  # è¾“å‡º: ç±»å‹: &lt;class 'dict'&gt;# ç­‰ä»·çš„åˆ›å»ºæ–¹å¼empty_dict2 = {}print(f\"å­—é¢é‡åˆ›å»º: {empty_dict2}\")  # è¾“å‡º: å­—é¢é‡åˆ›å»º: {}# ä»å…³é”®å­—å‚æ•°åˆ›å»ºkwargs_dict = dict(name='Alice', age=25, city='Beijing')print(f\"å…³é”®å­—å‚æ•°åˆ›å»º: {kwargs_dict}\")  # è¾“å‡º: å…³é”®å­—å‚æ•°åˆ›å»º: {'name': 'Alice', 'age': 25, 'city': 'Beijing'}# ä»å…ƒç»„åˆ—è¡¨åˆ›å»ºtuple_list = [('a', 1), ('b', 2), ('c', 3)]tuple_dict = dict(tuple_list)print(f\"å…ƒç»„åˆ—è¡¨è½¬å­—å…¸: {tuple_dict}\")  # è¾“å‡º: å…ƒç»„åˆ—è¡¨è½¬å­—å…¸: {'a': 1, 'b': 2, 'c': 3}# ä»äºŒç»´åˆ—è¡¨åˆ›å»ºlist_pairs = [['x', 10], ['y', 20], ['z', 30]]list_dict = dict(list_pairs)print(f\"äºŒç»´åˆ—è¡¨è½¬å­—å…¸: {list_dict}\")  # è¾“å‡º: äºŒç»´åˆ—è¡¨è½¬å­—å…¸: {'x': 10, 'y': 20, 'z': 30}# ä»zipå¯¹è±¡åˆ›å»ºkeys = ['red', 'green', 'blue']values = [255, 128, 64]zip_dict = dict(zip(keys, values))print(f\"zipå¯¹è±¡è½¬å­—å…¸: {zip_dict}\")  # è¾“å‡º: zipå¯¹è±¡è½¬å­—å…¸: {'red': 255, 'green': 128, 'blue': 64}# ä»å¦ä¸€ä¸ªå­—å…¸åˆ›å»ºï¼ˆæµ…æ‹·è´ï¼‰original = {'a': 1, 'b': 2, 'c': 3}copied_dict = dict(original)print(f\"å­—å…¸æ‹·è´: {copied_dict}\")  # è¾“å‡º: å­—å…¸æ‹·è´: {'a': 1, 'b': 2, 'c': 3}print(f\"æ˜¯å¦åŒä¸€å¯¹è±¡: {original is copied_dict}\")  # è¾“å‡º: æ˜¯å¦åŒä¸€å¯¹è±¡: False# æ··åˆåˆ›å»ºæ–¹å¼mixed_dict = dict([('a', 1), ('b', 2)], c=3, d=4)print(f\"æ··åˆæ–¹å¼åˆ›å»º: {mixed_dict}\")  # è¾“å‡º: æ··åˆæ–¹å¼åˆ›å»º: {'a': 1, 'b': 2, 'c': 3, 'd': 4}# ä»å­—ç¬¦ä¸²å¯¹åˆ›å»ºstring_pairs = ['ab', 'cd', 'ef']string_dict = dict(string_pairs)print(f\"å­—ç¬¦ä¸²å¯¹è½¬å­—å…¸: {string_dict}\")  # è¾“å‡º: å­—ç¬¦ä¸²å¯¹è½¬å­—å…¸: {'a': 'b', 'c': 'd', 'e': 'f'}é«˜çº§åˆ›å»ºæ–¹å¼# ä½¿ç”¨å­—å…¸æ¨å¯¼å¼square_dict = {x: x**2 for x in range(5)}print(f\"å­—å…¸æ¨å¯¼å¼: {square_dict}\")  # è¾“å‡º: å­—å…¸æ¨å¯¼å¼: {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}# æ¡ä»¶å­—å…¸æ¨å¯¼å¼even_squares = {x: x**2 for x in range(10) if x % 2 == 0}print(f\"æ¡ä»¶å­—å…¸æ¨å¯¼å¼: {even_squares}\")  # è¾“å‡º: æ¡ä»¶å­—å…¸æ¨å¯¼å¼: {0: 0, 2: 4, 4: 16, 6: 36, 8: 64}# ä»å‡½æ•°ç»“æœåˆ›å»ºdef get_word_length(words):    \"\"\"è·å–å•è¯é•¿åº¦å­—å…¸\"\"\"    return dict((word, len(word)) for word in words)words = ['python', 'java', 'javascript', 'go', 'rust']word_lengths = get_word_length(words)print(f\"å•è¯é•¿åº¦å­—å…¸: {word_lengths}\")# åµŒå¥—å­—å…¸åˆ›å»ºstudents_data = [    ('Alice', {'age': 20, 'grade': 'A', 'subjects': ['Math', 'Physics']}),    ('Bob', {'age': 19, 'grade': 'B', 'subjects': ['Chemistry', 'Biology']}),    ('Charlie', {'age': 21, 'grade': 'A', 'subjects': ['Math', 'Chemistry']})]students_dict = dict(students_data)print(f\"å­¦ç”Ÿä¿¡æ¯å­—å…¸:\")for name, info in students_dict.items():    print(f\"  {name}: {info}\")# å¤šå±‚åµŒå¥—å­—å…¸company_structure = dict([    ('engineering', dict([        ('frontend', ['Alice', 'Bob']),        ('backend', ['Charlie', 'Diana']),        ('devops', ['Eve'])    ])),    ('marketing', dict([        ('digital', ['Frank', 'Grace']),        ('content', ['Henry'])    ])),    ('sales', dict([        ('enterprise', ['Ivy', 'Jack']),        ('retail', ['Kate'])    ]))])print(f\"\\nå…¬å¸ç»“æ„:\")for dept, teams in company_structure.items():    print(f\"  {dept}:\")    for team, members in teams.items():        print(f\"    {team}: {members}\")æ•°æ®è½¬æ¢å’Œå¤„ç†# CSVæ•°æ®è½¬å­—å…¸csv_data = \"\"\"name,age,city,salaryAlice,25,Beijing,8000Bob,30,Shanghai,12000Charlie,28,Guangzhou,10000Diana,26,Shenzhen,9500\"\"\"def csv_to_dict_list(csv_string):    \"\"\"å°†CSVå­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—å…¸åˆ—è¡¨\"\"\"    lines = csv_string.strip().split('\\n')    headers = lines[0].split(',')        result = []    for line in lines[1:]:        values = line.split(',')        # å°è¯•è½¬æ¢æ•°å€¼        converted_values = []        for value in values:            try:                # å°è¯•è½¬æ¢ä¸ºæ•´æ•°                converted_values.append(int(value))            except ValueError:                try:                    # å°è¯•è½¬æ¢ä¸ºæµ®ç‚¹æ•°                    converted_values.append(float(value))                except ValueError:                    # ä¿æŒå­—ç¬¦ä¸²                    converted_values.append(value)                row_dict = dict(zip(headers, converted_values))        result.append(row_dict)        return resultemployees = csv_to_dict_list(csv_data)print(\"å‘˜å·¥æ•°æ®:\")for emp in employees:    print(f\"  {emp}\")# æ•°æ®åˆ†ç»„def group_by_key(data_list, key_func):    \"\"\"æŒ‰é”®å‡½æ•°åˆ†ç»„æ•°æ®\"\"\"    groups = {}    for item in data_list:        key = key_func(item)        if key not in groups:            groups[key] = []        groups[key].append(item)    return groups# æŒ‰åŸå¸‚åˆ†ç»„by_city = group_by_key(employees, lambda emp: emp['city'])print(f\"\\næŒ‰åŸå¸‚åˆ†ç»„:\")for city, emp_list in by_city.items():    names = [emp['name'] for emp in emp_list]    print(f\"  {city}: {names}\")# æŒ‰å¹´é¾„æ®µåˆ†ç»„def age_group(age):    if age &lt; 25:        return 'å¹´è½»ç»„'    elif age &lt; 30:        return 'ä¸­å¹´ç»„'    else:        return 'èµ„æ·±ç»„'by_age_group = group_by_key(employees, lambda emp: age_group(emp['age']))print(f\"\\næŒ‰å¹´é¾„æ®µåˆ†ç»„:\")for group, emp_list in by_age_group.items():    names = [emp['name'] for emp in emp_list]    print(f\"  {group}: {names}\")# æ•°æ®èšåˆdef aggregate_data(data_list, group_key, agg_key, agg_func):    \"\"\"æ•°æ®èšåˆ\"\"\"    groups = group_by_key(data_list, group_key)    result = {}    for group, items in groups.items():        values = [item[agg_key] for item in items]        result[group] = agg_func(values)    return result# æŒ‰åŸå¸‚ç»Ÿè®¡å¹³å‡å·¥èµ„avg_salary_by_city = aggregate_data(    employees,     lambda emp: emp['city'],     'salary',     lambda salaries: sum(salaries) / len(salaries))print(f\"\\nå„åŸå¸‚å¹³å‡å·¥èµ„:\")for city, avg_salary in avg_salary_by_city.items():    print(f\"  {city}: Â¥{avg_salary:.2f}\")# ç»Ÿè®¡ä¿¡æ¯å­—å…¸def calculate_statistics(data_list, numeric_fields):    \"\"\"è®¡ç®—ç»Ÿè®¡ä¿¡æ¯\"\"\"    stats = {}    for field in numeric_fields:        values = [item[field] for item in data_list]        stats[field] = {            'count': len(values),            'sum': sum(values),            'avg': sum(values) / len(values),            'min': min(values),            'max': max(values)        }    return statsemployee_stats = calculate_statistics(employees, ['age', 'salary'])print(f\"\\nå‘˜å·¥ç»Ÿè®¡ä¿¡æ¯:\")for field, stats in employee_stats.items():    print(f\"  {field}:\")    for stat_name, value in stats.items():        if stat_name == 'avg':            print(f\"    {stat_name}: {value:.2f}\")        else:            print(f\"    {stat_name}: {value}\")é…ç½®å’Œè®¾ç½®ç®¡ç†# é…ç½®æ–‡ä»¶å¤„ç†default_config = {    'database': {        'host': 'localhost',        'port': 5432,        'name': 'myapp',        'user': 'admin',        'password': 'secret'    },    'server': {        'host': '0.0.0.0',        'port': 8000,        'debug': False,        'workers': 4    },    'logging': {        'level': 'INFO',        'format': '%(asctime)s - %(name)s - %(levelname)s - %(message)s',        'file': 'app.log'    }}def merge_configs(default, user_config):    \"\"\"åˆå¹¶é…ç½®å­—å…¸\"\"\"    result = dict(default)  # åˆ›å»ºé»˜è®¤é…ç½®çš„å‰¯æœ¬        for key, value in user_config.items():        if key in result and isinstance(result[key], dict) and isinstance(value, dict):            # é€’å½’åˆå¹¶åµŒå¥—å­—å…¸            result[key] = merge_configs(result[key], value)        else:            # ç›´æ¥è¦†ç›–            result[key] = value        return result# ç”¨æˆ·è‡ªå®šä¹‰é…ç½®user_config = {    'database': {        'host': 'prod.example.com',        'password': 'prod_secret'    },    'server': {        'debug': True,        'workers': 8    },    'cache': {        'type': 'redis',        'host': 'cache.example.com'    }}# åˆå¹¶é…ç½®final_config = merge_configs(default_config, user_config)print(\"æœ€ç»ˆé…ç½®:\")for section, settings in final_config.items():    print(f\"  {section}:\")    for key, value in settings.items():        print(f\"    {key}: {value}\")# ç¯å¢ƒå˜é‡é…ç½®import osdef load_env_config(prefix='APP_'):    \"\"\"ä»ç¯å¢ƒå˜é‡åŠ è½½é…ç½®\"\"\"    env_config = {}    for key, value in os.environ.items():        if key.startswith(prefix):            # ç§»é™¤å‰ç¼€å¹¶è½¬æ¢ä¸ºå°å†™            config_key = key[len(prefix):].lower()                        # å°è¯•è½¬æ¢æ•°æ®ç±»å‹            if value.lower() in ('true', 'false'):                env_config[config_key] = value.lower() == 'true'            elif value.isdigit():                env_config[config_key] = int(value)            else:                try:                    env_config[config_key] = float(value)                except ValueError:                    env_config[config_key] = value        return env_config# æ¨¡æ‹Ÿç¯å¢ƒå˜é‡os.environ.update({    'APP_DEBUG': 'true',    'APP_PORT': '9000',    'APP_WORKERS': '6',    'APP_LOG_LEVEL': 'DEBUG'})env_config = load_env_config()print(f\"\\nç¯å¢ƒå˜é‡é…ç½®: {env_config}\")# é…ç½®éªŒè¯def validate_config(config, schema):    \"\"\"éªŒè¯é…ç½®\"\"\"    errors = []        def validate_section(section_config, section_schema, path=''):        for key, expected_type in section_schema.items():            current_path = f\"{path}.{key}\" if path else key                        if key not in section_config:                errors.append(f\"ç¼ºå°‘é…ç½®é¡¹: {current_path}\")                continue                        value = section_config[key]            if isinstance(expected_type, dict):                if not isinstance(value, dict):                    errors.append(f\"é…ç½®é¡¹ {current_path} åº”è¯¥æ˜¯å­—å…¸ç±»å‹\")                else:                    validate_section(value, expected_type, current_path)            elif not isinstance(value, expected_type):                errors.append(f\"é…ç½®é¡¹ {current_path} ç±»å‹é”™è¯¯ï¼ŒæœŸæœ› {expected_type.__name__}ï¼Œå®é™… {type(value).__name__}\")        validate_section(config, schema)    return errors# é…ç½®æ¨¡å¼config_schema = {    'database': {        'host': str,        'port': int,        'name': str,        'user': str,        'password': str    },    'server': {        'host': str,        'port': int,        'debug': bool,        'workers': int    }}validation_errors = validate_config(final_config, config_schema)if validation_errors:    print(f\"\\né…ç½®éªŒè¯é”™è¯¯:\")    for error in validation_errors:        print(f\"  - {error}\")else:    print(f\"\\né…ç½®éªŒè¯é€šè¿‡\")ç¼“å­˜å’Œè®°å¿†åŒ–# ç®€å•ç¼“å­˜å®ç°class SimpleCache:    def __init__(self, max_size=100):        self.cache = {}        self.max_size = max_size        self.access_order = []  # è®°å½•è®¿é—®é¡ºåº        def get(self, key):        \"\"\"è·å–ç¼“å­˜å€¼\"\"\"        if key in self.cache:            # æ›´æ–°è®¿é—®é¡ºåº            self.access_order.remove(key)            self.access_order.append(key)            return self.cache[key]        return None        def set(self, key, value):        \"\"\"è®¾ç½®ç¼“å­˜å€¼\"\"\"        if key in self.cache:            # æ›´æ–°ç°æœ‰é”®            self.cache[key] = value            self.access_order.remove(key)            self.access_order.append(key)        else:            # æ·»åŠ æ–°é”®            if len(self.cache) &gt;= self.max_size:                # ç§»é™¤æœ€ä¹…æœªä½¿ç”¨çš„é¡¹                oldest_key = self.access_order.pop(0)                del self.cache[oldest_key]                        self.cache[key] = value            self.access_order.append(key)        def clear(self):        \"\"\"æ¸…ç©ºç¼“å­˜\"\"\"        self.cache.clear()        self.access_order.clear()        def stats(self):        \"\"\"ç¼“å­˜ç»Ÿè®¡\"\"\"        return {            'size': len(self.cache),            'max_size': self.max_size,            'keys': list(self.cache.keys())        }# æµ‹è¯•ç¼“å­˜cache = SimpleCache(max_size=3)# æ·»åŠ æ•°æ®cache.set('user:1', {'name': 'Alice', 'age': 25})cache.set('user:2', {'name': 'Bob', 'age': 30})cache.set('user:3', {'name': 'Charlie', 'age': 28})print(\"ç¼“å­˜çŠ¶æ€:\", cache.stats())# è®¿é—®æ•°æ®user1 = cache.get('user:1')print(f\"è·å–ç”¨æˆ·1: {user1}\")# æ·»åŠ æ–°æ•°æ®ï¼ˆä¼šç§»é™¤æœ€ä¹…æœªä½¿ç”¨çš„ï¼‰cache.set('user:4', {'name': 'Diana', 'age': 26})print(\"æ·»åŠ ç”¨æˆ·4å:\", cache.stats())# å‡½æ•°ç»“æœç¼“å­˜def memoize(func):    \"\"\"è®°å¿†åŒ–è£…é¥°å™¨\"\"\"    cache = {}        def wrapper(*args, **kwargs):        # åˆ›å»ºç¼“å­˜é”®        key = str(args) + str(sorted(kwargs.items()))                if key not in cache:            result = func(*args, **kwargs)            cache[key] = result            print(f\"è®¡ç®—å¹¶ç¼“å­˜: {func.__name__}{args} -&gt; {result}\")        else:            print(f\"ä»ç¼“å­˜è·å–: {func.__name__}{args} -&gt; {cache[key]}\")                return cache[key]        wrapper.cache = cache    return wrapper@memoizedef fibonacci(n):    \"\"\"æ–æ³¢é‚£å¥‘æ•°åˆ—\"\"\"    if n &lt;= 1:        return n    return fibonacci(n-1) + fibonacci(n-2)@memoizedef factorial(n):    \"\"\"é˜¶ä¹˜è®¡ç®—\"\"\"    if n &lt;= 1:        return 1    return n * factorial(n-1)print(\"\\næ–æ³¢é‚£å¥‘æ•°åˆ—æµ‹è¯•:\")for i in range(8):    result = fibonacci(i)    print(f\"fib({i}) = {result}\")print(f\"\\næ–æ³¢é‚£å¥‘ç¼“å­˜å¤§å°: {len(fibonacci.cache)}\")print(\"\\né˜¶ä¹˜æµ‹è¯•:\")for i in range(1, 6):    result = factorial(i)    print(f\"{i}! = {result}\")print(f\"é˜¶ä¹˜ç¼“å­˜å¤§å°: {len(factorial.cache)}\")å®é™…æ¡ˆä¾‹ï¼šæ•°æ®åˆ†æç³»ç»Ÿdef build_analytics_system(raw_data):    \"\"\"æ„å»ºæ•°æ®åˆ†æç³»ç»Ÿ\"\"\"        # æ•°æ®æ¸…æ´—å’Œè½¬æ¢    def clean_data(data):        \"\"\"æ•°æ®æ¸…æ´—\"\"\"        cleaned = []        for record in data:            if all(key in record for key in ['user_id', 'action', 'timestamp', 'value']):                # æ•°æ®ç±»å‹è½¬æ¢                try:                    cleaned_record = dict(                        user_id=str(record['user_id']),                        action=str(record['action']),                        timestamp=int(record['timestamp']),                        value=float(record['value'])                    )                    cleaned.append(cleaned_record)                except (ValueError, TypeError):                    continue  # è·³è¿‡æ— æ•ˆæ•°æ®        return cleaned        # ç”¨æˆ·è¡Œä¸ºåˆ†æ    def analyze_user_behavior(data):        \"\"\"åˆ†æç”¨æˆ·è¡Œä¸º\"\"\"        user_stats = {}                for record in data:            user_id = record['user_id']            if user_id not in user_stats:                user_stats[user_id] = {                    'total_actions': 0,                    'total_value': 0.0,                    'actions': {},                    'first_seen': record['timestamp'],                    'last_seen': record['timestamp']                }                        stats = user_stats[user_id]            stats['total_actions'] += 1            stats['total_value'] += record['value']                        action = record['action']            if action not in stats['actions']:                stats['actions'][action] = {'count': 0, 'total_value': 0.0}            stats['actions'][action]['count'] += 1            stats['actions'][action]['total_value'] += record['value']                        stats['first_seen'] = min(stats['first_seen'], record['timestamp'])            stats['last_seen'] = max(stats['last_seen'], record['timestamp'])                return user_stats        # è¡Œä¸ºæ¨¡å¼åˆ†æ    def analyze_action_patterns(data):        \"\"\"åˆ†æè¡Œä¸ºæ¨¡å¼\"\"\"        action_stats = {}        hourly_stats = {}                for record in data:            action = record['action']            timestamp = record['timestamp']            value = record['value']                        # è¡Œä¸ºç»Ÿè®¡            if action not in action_stats:                action_stats[action] = {                    'count': 0,                    'total_value': 0.0,                    'unique_users': set(),                    'avg_value': 0.0                }                        action_stats[action]['count'] += 1            action_stats[action]['total_value'] += value            action_stats[action]['unique_users'].add(record['user_id'])                        # æŒ‰å°æ—¶ç»Ÿè®¡            hour = timestamp // 3600  # ç®€åŒ–çš„å°æ—¶è®¡ç®—            if hour not in hourly_stats:                hourly_stats[hour] = {'count': 0, 'total_value': 0.0}            hourly_stats[hour]['count'] += 1            hourly_stats[hour]['total_value'] += value                # è®¡ç®—å¹³å‡å€¼        for action, stats in action_stats.items():            stats['avg_value'] = stats['total_value'] / stats['count']            stats['unique_users'] = len(stats['unique_users'])                return action_stats, hourly_stats        # ç”ŸæˆæŠ¥å‘Š    def generate_report(user_stats, action_stats, hourly_stats):        \"\"\"ç”Ÿæˆåˆ†ææŠ¥å‘Š\"\"\"        report = {            'summary': {                'total_users': len(user_stats),                'total_actions': sum(stats['total_actions'] for stats in user_stats.values()),                'total_value': sum(stats['total_value'] for stats in user_stats.values())            },            'top_users': [],            'top_actions': [],            'peak_hours': []        }                # æœ€æ´»è·ƒç”¨æˆ·        top_users = sorted(            user_stats.items(),            key=lambda x: x[1]['total_actions'],            reverse=True        )[:5]                for user_id, stats in top_users:            report['top_users'].append({                'user_id': user_id,                'total_actions': stats['total_actions'],                'total_value': stats['total_value'],                'avg_value': stats['total_value'] / stats['total_actions']            })                # æœ€çƒ­é—¨è¡Œä¸º        top_actions = sorted(            action_stats.items(),            key=lambda x: x[1]['count'],            reverse=True        )                for action, stats in top_actions:            report['top_actions'].append({                'action': action,                'count': stats['count'],                'unique_users': stats['unique_users'],                'avg_value': stats['avg_value']            })                # é«˜å³°æ—¶æ®µ        peak_hours = sorted(            hourly_stats.items(),            key=lambda x: x[1]['count'],            reverse=True        )[:5]                for hour, stats in peak_hours:            report['peak_hours'].append({                'hour': hour,                'count': stats['count'],                'total_value': stats['total_value']            })                return report        # æ‰§è¡Œåˆ†ææµç¨‹    cleaned_data = clean_data(raw_data)    user_stats = analyze_user_behavior(cleaned_data)    action_stats, hourly_stats = analyze_action_patterns(cleaned_data)    report = generate_report(user_stats, action_stats, hourly_stats)        return {        'cleaned_data': cleaned_data,        'user_stats': user_stats,        'action_stats': action_stats,        'hourly_stats': hourly_stats,        'report': report    }# æµ‹è¯•æ•°æ®test_data = [    {'user_id': 'user1', 'action': 'login', 'timestamp': 1640995200, 'value': 1.0},    {'user_id': 'user1', 'action': 'view_page', 'timestamp': 1640995260, 'value': 0.5},    {'user_id': 'user1', 'action': 'purchase', 'timestamp': 1640995320, 'value': 99.99},    {'user_id': 'user2', 'action': 'login', 'timestamp': 1640995400, 'value': 1.0},    {'user_id': 'user2', 'action': 'view_page', 'timestamp': 1640995460, 'value': 0.5},    {'user_id': 'user2', 'action': 'view_page', 'timestamp': 1640995520, 'value': 0.5},    {'user_id': 'user3', 'action': 'login', 'timestamp': 1640995600, 'value': 1.0},    {'user_id': 'user3', 'action': 'purchase', 'timestamp': 1640995660, 'value': 149.99},    {'user_id': 'user1', 'action': 'logout', 'timestamp': 1640995720, 'value': 0.0},]# è¿è¡Œåˆ†æanalysis_result = build_analytics_system(test_data)print(\"æ•°æ®åˆ†æç»“æœ:\")print(f\"\\næ€»ä½“ç»Ÿè®¡:\")summary = analysis_result['report']['summary']print(f\"  æ€»ç”¨æˆ·æ•°: {summary['total_users']}\")print(f\"  æ€»è¡Œä¸ºæ•°: {summary['total_actions']}\")print(f\"  æ€»ä»·å€¼: {summary['total_value']:.2f}\")print(f\"\\næœ€æ´»è·ƒç”¨æˆ·:\")for user in analysis_result['report']['top_users']:    print(f\"  {user['user_id']}: {user['total_actions']}æ¬¡è¡Œä¸º, æ€»ä»·å€¼{user['total_value']:.2f}\")print(f\"\\næœ€çƒ­é—¨è¡Œä¸º:\")for action in analysis_result['report']['top_actions']:    print(f\"  {action['action']}: {action['count']}æ¬¡, {action['unique_users']}ä¸ªç”¨æˆ·\")âš ï¸ æ³¨æ„äº‹é¡¹é”®çš„è¦æ±‚# å­—å…¸é”®å¿…é¡»æ˜¯å¯å“ˆå¸Œçš„print(\"å­—å…¸é”®çš„è¦æ±‚:\")# æœ‰æ•ˆçš„é”®ç±»å‹valid_keys = {    'string': 'å­—ç¬¦ä¸²é”®',    42: 'æ•´æ•°é”®',    3.14: 'æµ®ç‚¹æ•°é”®',    (1, 2): 'å…ƒç»„é”®',    frozenset([1, 2, 3]): 'å†»ç»“é›†åˆé”®',    True: 'å¸ƒå°”é”®'}print(\"æœ‰æ•ˆé”®ç±»å‹:\")for key, description in valid_keys.items():    print(f\"  {key} ({type(key).__name__}): {description}\")# æ— æ•ˆçš„é”®ç±»å‹print(\"\\næ— æ•ˆé”®ç±»å‹ç¤ºä¾‹:\")invalid_keys = [    ([1, 2, 3], \"åˆ—è¡¨\"),    ({1, 2, 3}, \"é›†åˆ\"),    ({'a': 1}, \"å­—å…¸\")]for invalid_key, description in invalid_keys:    try:        test_dict = {invalid_key: \"value\"}    except TypeError as e:        print(f\"  {description}: {e}\")# é”®çš„å“ˆå¸Œä¸€è‡´æ€§print(\"\\né”®çš„å“ˆå¸Œä¸€è‡´æ€§:\")key1 = (1, 2, 3)key2 = (1, 2, 3)print(f\"key1 == key2: {key1 == key2}\")print(f\"hash(key1) == hash(key2): {hash(key1) == hash(key2)}\")# å¯å˜å¯¹è±¡ä½œä¸ºå€¼æ˜¯å¯ä»¥çš„mutable_values_dict = {    'list': [1, 2, 3],    'dict': {'nested': 'value'},    'set': {4, 5, 6}}print(f\"\\nåŒ…å«å¯å˜å€¼çš„å­—å…¸: {mutable_values_dict}\")# ä¿®æ”¹å¯å˜å€¼mutable_values_dict['list'].append(4)print(f\"ä¿®æ”¹å: {mutable_values_dict}\")æ€§èƒ½è€ƒè™‘import timeimport sys# å­—å…¸ vs åˆ—è¡¨æŸ¥æ‰¾æ€§èƒ½n = 100000# åˆ›å»ºæµ‹è¯•æ•°æ®test_list = list(range(n))test_dict = {i: i for i in range(n)}test_keys = [i for i in range(0, n, 1000)]  # æ¯1000ä¸ªå–ä¸€ä¸ªprint(f\"æ€§èƒ½æµ‹è¯•ï¼ˆæ•°æ®é‡: {n}ï¼‰:\")# åˆ—è¡¨æŸ¥æ‰¾start_time = time.time()for key in test_keys:    _ = key in test_listlist_time = time.time() - start_time# å­—å…¸æŸ¥æ‰¾start_time = time.time()for key in test_keys:    _ = key in test_dictdict_time = time.time() - start_timeprint(f\"åˆ—è¡¨æŸ¥æ‰¾æ—¶é—´: {list_time:.6f}ç§’\")print(f\"å­—å…¸æŸ¥æ‰¾æ—¶é—´: {dict_time:.6f}ç§’\")if dict_time &gt; 0:    print(f\"å­—å…¸å¿« {list_time/dict_time:.2f} å€\")# å†…å­˜ä½¿ç”¨æ¯”è¾ƒlist_size = sys.getsizeof(test_list)dict_size = sys.getsizeof(test_dict)print(f\"\\nå†…å­˜ä½¿ç”¨:\")print(f\"åˆ—è¡¨å¤§å°: {list_size:,} å­—èŠ‚\")print(f\"å­—å…¸å¤§å°: {dict_size:,} å­—èŠ‚\")print(f\"å­—å…¸é¢å¤–å¼€é”€: {((dict_size - list_size) / list_size * 100):.1f}%\")# å­—å…¸åˆ›å»ºæ–¹å¼æ€§èƒ½æ¯”è¾ƒtest_data = [(f'key{i}', i) for i in range(10000)]# æ–¹æ³•1: dict()æ„é€ å‡½æ•°start_time = time.time()dict1 = dict(test_data)time1 = time.time() - start_time# æ–¹æ³•2: å­—å…¸æ¨å¯¼å¼start_time = time.time()dict2 = {k: v for k, v in test_data}time2 = time.time() - start_time# æ–¹æ³•3: å¾ªç¯æ„å»ºstart_time = time.time()dict3 = {}for k, v in test_data:    dict3[k] = vtime3 = time.time() - start_timeprint(f\"\\nå­—å…¸åˆ›å»ºæ€§èƒ½æ¯”è¾ƒ:\")print(f\"dict()æ„é€ : {time1:.6f}ç§’\")print(f\"å­—å…¸æ¨å¯¼å¼: {time2:.6f}ç§’\")print(f\"å¾ªç¯æ„å»º: {time3:.6f}ç§’\")å¸¸è§é™·é˜±# é»˜è®¤å€¼é™·é˜±print(\"å­—å…¸é»˜è®¤å€¼é™·é˜±:\")# é”™è¯¯çš„é»˜è®¤å€¼å¤„ç†def wrong_default_dict():    \"\"\"é”™è¯¯çš„é»˜è®¤å€¼å¤„ç†\"\"\"    d = {}    key = 'missing_key'        # è¿™æ ·ä¼šæŠ›å‡ºKeyError    try:        value = d[key]    except KeyError:        print(f\"KeyError: {key}\")        # æ­£ç¡®çš„æ–¹å¼    value = d.get(key, 'default_value')    print(f\"ä½¿ç”¨getæ–¹æ³•: {value}\")        # æˆ–è€…ä½¿ç”¨setdefault    value = d.setdefault(key, 'default_value')    print(f\"ä½¿ç”¨setdefault: {value}\")    print(f\"å­—å…¸ç°åœ¨åŒ…å«: {d}\")wrong_default_dict()# å¯å˜é»˜è®¤å€¼é™·é˜±print(\"\\nå¯å˜é»˜è®¤å€¼é™·é˜±:\")# é”™è¯¯çš„æ–¹å¼def wrong_mutable_default(key, value, d={}):    \"\"\"é”™è¯¯ï¼šä½¿ç”¨å¯å˜é»˜è®¤å‚æ•°\"\"\"    d[key] = value    return dresult1 = wrong_mutable_default('a', 1)result2 = wrong_mutable_default('b', 2)print(f\"ç¬¬ä¸€æ¬¡è°ƒç”¨: {result1}\")print(f\"ç¬¬äºŒæ¬¡è°ƒç”¨: {result2}\")print(f\"ä¸¤æ¬¡ç»“æœç›¸åŒ: {result1 is result2}\")# æ­£ç¡®çš„æ–¹å¼def correct_mutable_default(key, value, d=None):    \"\"\"æ­£ç¡®ï¼šä½¿ç”¨Noneä½œä¸ºé»˜è®¤å€¼\"\"\"    if d is None:        d = {}    d[key] = value    return dresult3 = correct_mutable_default('a', 1)result4 = correct_mutable_default('b', 2)print(f\"\\næ­£ç¡®æ–¹å¼ç¬¬ä¸€æ¬¡: {result3}\")print(f\"æ­£ç¡®æ–¹å¼ç¬¬äºŒæ¬¡: {result4}\")print(f\"ä¸¤æ¬¡ç»“æœç›¸åŒ: {result3 is result4}\")# å­—å…¸ä¿®æ”¹æ—¶çš„è¿­ä»£é™·é˜±print(\"\\nè¿­ä»£æ—¶ä¿®æ”¹å­—å…¸çš„é™·é˜±:\")test_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4}# é”™è¯¯çš„æ–¹å¼ï¼ˆå¯èƒ½å¯¼è‡´RuntimeErrorï¼‰print(\"åŸå§‹å­—å…¸:\", test_dict)try:    for key in test_dict:        if test_dict[key] % 2 == 0:            del test_dict[key]  # åœ¨è¿­ä»£æ—¶ä¿®æ”¹å­—å…¸except RuntimeError as e:    print(f\"è¿­ä»£æ—¶ä¿®æ”¹é”™è¯¯: {e}\")# æ­£ç¡®çš„æ–¹å¼1ï¼šå…ˆæ”¶é›†è¦åˆ é™¤çš„é”®test_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4}keys_to_delete = []for key, value in test_dict.items():    if value % 2 == 0:        keys_to_delete.append(key)for key in keys_to_delete:    del test_dict[key]print(f\"æ­£ç¡®åˆ é™¤å: {test_dict}\")# æ­£ç¡®çš„æ–¹å¼2ï¼šä½¿ç”¨å­—å…¸æ¨å¯¼å¼original_dict = {'a': 1, 'b': 2, 'c': 3, 'd': 4}filtered_dict = {k: v for k, v in original_dict.items() if v % 2 != 0}print(f\"æ¨å¯¼å¼è¿‡æ»¤: {filtered_dict}\")# æµ…æ‹·è´é™·é˜±print(\"\\næµ…æ‹·è´é™·é˜±:\")original = {'a': [1, 2, 3], 'b': [4, 5, 6]}shallow_copy = dict(original)print(f\"åŸå§‹å­—å…¸: {original}\")print(f\"æµ…æ‹·è´: {shallow_copy}\")# ä¿®æ”¹æµ…æ‹·è´ä¸­çš„å¯å˜å¯¹è±¡shallow_copy['a'].append(4)print(f\"ä¿®æ”¹æµ…æ‹·è´å:\")print(f\"åŸå§‹å­—å…¸: {original}\")print(f\"æµ…æ‹·è´: {shallow_copy}\")print(f\"åˆ—è¡¨å¯¹è±¡ç›¸åŒ: {original['a'] is shallow_copy['a']}\")# æ·±æ‹·è´è§£å†³æ–¹æ¡ˆimport copydeep_copy = copy.deepcopy(original)deep_copy['a'].append(5)print(f\"\\næ·±æ‹·è´ä¿®æ”¹å:\")print(f\"åŸå§‹å­—å…¸: {original}\")print(f\"æ·±æ‹·è´: {deep_copy}\")ğŸ”— ç›¸å…³å†…å®¹ç›¸å…³å‡½æ•°  list() - åˆ—è¡¨æ„é€ å‡½æ•° - åˆ›å»ºåˆ—è¡¨  tuple() - å…ƒç»„æ„é€ å‡½æ•° - åˆ›å»ºå…ƒç»„  set() - é›†åˆæ„é€ å‡½æ•° - åˆ›å»ºé›†åˆ  str() - å­—ç¬¦ä¸²æ„é€ å‡½æ•° - åˆ›å»ºå­—ç¬¦ä¸²  len() - é•¿åº¦å‡½æ•° - è·å–é•¿åº¦  zip() - æ‰“åŒ…å‡½æ•° - å¹¶è¡Œè¿­ä»£ç›¸å…³æ¨¡å—  collectionsæ¨¡å— - å®¹å™¨æ•°æ®ç±»å‹  copyæ¨¡å— - æ‹·è´æ“ä½œ  jsonæ¨¡å— - JSONå¤„ç†  pickleæ¨¡å— - å¯¹è±¡åºåˆ—åŒ–ç›¸å…³æ¦‚å¿µ  å­—å…¸æ¨å¯¼å¼ - å­—å…¸ç”Ÿæˆ  æ˜ å°„ç±»å‹ - æ˜ å°„æ“ä½œ  å“ˆå¸Œè¡¨ - åº•å±‚å®ç°  æ•°æ®ç»“æ„ - æ•°æ®ç»„ç»‡ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - dict()  Pythonå®˜æ–¹æ–‡æ¡£ - å­—å…¸ç±»å‹  å­—å…¸æ¨å¯¼å¼  æ˜ å°„ç±»å‹æ“ä½œğŸ·ï¸ æ ‡ç­¾ç±»å‹è½¬æ¢ å®¹å™¨ æ˜ å°„ å¯å˜ç±»å‹ å“ˆå¸Œè¡¨æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/dict/",
        "category": "builtins",
        "tags": ["ç±»å‹è½¬æ¢","å®¹å™¨","æ˜ å°„","å¯å˜"]
      }
      
    
  
    
      ,
      {
        "title": "divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•°",
        "content": "divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•°ğŸ“ æ¦‚è¿°divmod() æ˜¯Pythonä¸­ç”¨äºåŒæ—¶æ‰§è¡Œé™¤æ³•å’Œå–æ¨¡è¿ç®—çš„å†…ç½®å‡½æ•°ã€‚å®ƒæ¥å—ä¸¤ä¸ªæ•°å­—å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å•†å’Œä½™æ•°çš„å…ƒç»„ã€‚è¿™ä¸ªå‡½æ•°åœ¨éœ€è¦åŒæ—¶è·å–é™¤æ³•ç»“æœå’Œä½™æ•°æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”æ•´é™¤è¿ç®—ç¬¦ // å’Œå–æ¨¡è¿ç®—ç¬¦ % åˆ†åˆ«è®¡ç®—æ›´åŠ é«˜æ•ˆã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡divmod()å‡½æ•°çš„åŸºæœ¬è¯­æ³•å’Œç”¨æ³•  ç†è§£é™¤æ³•å’Œå–æ¨¡è¿ç®—çš„æ•°å­¦åŸç†  å­¦ä¼šåœ¨å®é™…ç¼–ç¨‹ä¸­åº”ç”¨divmod()å‡½æ•°  äº†è§£divmod()ä¸//å’Œ%è¿ç®—ç¬¦çš„å…³ç³»å’Œæ€§èƒ½å·®å¼‚  æŒæ¡åœ¨æ—¶é—´è®¡ç®—ã€è¿›åˆ¶è½¬æ¢ç­‰åœºæ™¯ä¸­çš„åº”ç”¨ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ•´æ•°ã€æµ®ç‚¹æ•°ï¼‰  æ•°å­¦åŸºç¡€ï¼ˆé™¤æ³•ã€å–æ¨¡æ¦‚å¿µï¼‰  åŸºæœ¬çš„ç®—æœ¯è¿ç®—ç¬¦  å…ƒç»„çš„åŸºæœ¬ä½¿ç”¨ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µ            divmod() å‡½æ•°å®ç°äº†æ¬§å‡ é‡Œå¾—é™¤æ³•ï¼Œå¯¹äºä¸¤ä¸ªæ•°å­— a å’Œ bï¼Œè¿”å› (q, r)ï¼Œå…¶ä¸­ q æ˜¯å•†ï¼Œr æ˜¯ä½™æ•°ï¼Œæ»¡è¶³ç­‰å¼ï¼ša = b * q + rï¼Œä¸” 0 â‰¤      r      &lt;      b      ã€‚      è¯­æ³•æ ¼å¼divmod(a, b)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      è¯´æ˜                  a      number      æ˜¯      è¢«é™¤æ•°              b      number      æ˜¯      é™¤æ•°ï¼ˆä¸èƒ½ä¸º0ï¼‰      è¿”å›å€¼  è¿”å›ç±»å‹: tuple  è¿”å›å†…å®¹: (å•†, ä½™æ•°) çš„äºŒå…ƒç»„  ç­‰ä»·å…³ç³»: divmod(a, b) ç­‰ä»·äº (a // b, a % b)ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€é™¤æ³•å’Œå–æ¨¡è¿ç®—# åŸºç¡€é™¤æ³•å’Œå–æ¨¡è¿ç®—ç¤ºä¾‹print(\"åŸºç¡€é™¤æ³•å’Œå–æ¨¡è¿ç®—ç¤ºä¾‹:\")# 1. åŸºæœ¬æ•´æ•°è¿ç®—print(\"\\n1. åŸºæœ¬æ•´æ•°è¿ç®—:\")basic_cases = [    (17, 5),    # 17 Ã· 5 = 3 ä½™ 2    (20, 3),    # 20 Ã· 3 = 6 ä½™ 2    (100, 7),   # 100 Ã· 7 = 14 ä½™ 2    (50, 10),   # 50 Ã· 10 = 5 ä½™ 0    (7, 3),     # 7 Ã· 3 = 2 ä½™ 1]for a, b in basic_cases:    quotient, remainder = divmod(a, b)        # éªŒè¯ç»“æœ    verification = b * quotient + remainder        print(f\"divmod({a}, {b}) = ({quotient}, {remainder})\")    print(f\"éªŒè¯: {b} Ã— {quotient} + {remainder} = {verification} {'âœ“' if verification == a else 'âœ—'}\")        # ä¸è¿ç®—ç¬¦æ¯”è¾ƒ    op_quotient = a // b    op_remainder = a % b    print(f\"è¿ç®—ç¬¦: {a} // {b} = {op_quotient}, {a} % {b} = {op_remainder}\")    print(f\"ç»“æœä¸€è‡´: {(quotient, remainder) == (op_quotient, op_remainder)}\")    print()# 2. è´Ÿæ•°è¿ç®—print(\"2. è´Ÿæ•°è¿ç®—:\")negative_cases = [    (-17, 5),   # è´Ÿè¢«é™¤æ•°    (17, -5),   # è´Ÿé™¤æ•°    (-17, -5),  # åŒè´Ÿæ•°    (-20, 3),   # è´Ÿè¢«é™¤æ•°ï¼Œæ­£é™¤æ•°    (20, -3),   # æ­£è¢«é™¤æ•°ï¼Œè´Ÿé™¤æ•°]for a, b in negative_cases:    quotient, remainder = divmod(a, b)    verification = b * quotient + remainder        print(f\"divmod({a}, {b}) = ({quotient}, {remainder})\")    print(f\"éªŒè¯: {b} Ã— {quotient} + {remainder} = {verification} {'âœ“' if verification == a else 'âœ—'}\")        # ä½™æ•°ç¬¦å·è§„åˆ™è¯´æ˜    if remainder != 0:        print(f\"ä½™æ•°ç¬¦å·ä¸é™¤æ•°ä¸€è‡´: {remainder} ä¸ {b} åŒå·\" if (remainder &gt; 0) == (b &gt; 0) else f\"ä½™æ•°ç¬¦å·è§„åˆ™å¼‚å¸¸\")    print()# 3. æµ®ç‚¹æ•°è¿ç®—print(\"3. æµ®ç‚¹æ•°è¿ç®—:\")float_cases = [    (17.5, 3.2),    # æµ®ç‚¹æ•°é™¤æ³•    (10.7, 2.1),    # å°æ•°è¿ç®—    (100.0, 7.0),   # æ•´æ•°å½¢å¼çš„æµ®ç‚¹æ•°    (15.75, 2.5),   # ç²¾ç¡®é™¤æ³•    (22.3, 4.7),    # ä¸ç²¾ç¡®é™¤æ³•]for a, b in float_cases:    quotient, remainder = divmod(a, b)    verification = b * quotient + remainder        print(f\"divmod({a}, {b}) = ({quotient:.6f}, {remainder:.6f})\")    print(f\"éªŒè¯: {b} Ã— {quotient:.6f} + {remainder:.6f} = {verification:.6f}\")    print(f\"è¯¯å·®: {abs(verification - a):.10f}\")    print()# 4. ç‰¹æ®Šå€¼å¤„ç†print(\"4. ç‰¹æ®Šå€¼å¤„ç†:\")special_cases = [    (0, 5),         # é›¶è¢«é™¤æ•°    (10, 1),        # é™¤æ•°ä¸º1    (10, 10),       # ç›¸ç­‰çš„æ•°    (5, 10),        # è¢«é™¤æ•°å°äºé™¤æ•°]for a, b in special_cases:    quotient, remainder = divmod(a, b)    print(f\"divmod({a}, {b}) = ({quotient}, {remainder})\")        if a == 0:        print(\"  é›¶è¢«é™¤æ•°çš„ç»“æœæ€»æ˜¯ (0, 0)\")    elif b == 1:        print(f\"  é™¤æ•°ä¸º1æ—¶ï¼Œå•†ç­‰äºè¢«é™¤æ•°ï¼Œä½™æ•°ä¸º0\")    elif a == b:        print(f\"  ç›¸ç­‰æ•°å­—çš„é™¤æ³•ç»“æœä¸º (1, 0)\")    elif a &lt; b and a &gt;= 0 and b &gt; 0:        print(f\"  è¢«é™¤æ•°å°äºé™¤æ•°æ—¶ï¼Œå•†ä¸º0ï¼Œä½™æ•°ç­‰äºè¢«é™¤æ•°\")    print()# 5. é”™è¯¯å¤„ç†print(\"5. é”™è¯¯å¤„ç†:\")error_cases = [    (10, 0),        # é™¤é›¶é”™è¯¯    (0, 0),         # é›¶é™¤é›¶    (float('inf'), 5),  # æ— ç©·å¤§    (5, float('inf')),  # é™¤ä»¥æ— ç©·å¤§    (float('nan'), 5),  # NaN]for a, b in error_cases:    try:        result = divmod(a, b)        print(f\"divmod({a}, {b}) = {result}\")    except Exception as e:        print(f\"divmod({a}, {b}) é”™è¯¯: {type(e).__name__}: {e}\")æ—¶é—´å’Œæ—¥æœŸè®¡ç®—# æ—¶é—´å’Œæ—¥æœŸè®¡ç®—åº”ç”¨print(\"æ—¶é—´å’Œæ—¥æœŸè®¡ç®—åº”ç”¨:\")# 1. ç§’æ•°è½¬æ¢ä¸ºæ—¶åˆ†ç§’print(\"\\n1. ç§’æ•°è½¬æ¢ä¸ºæ—¶åˆ†ç§’:\")def seconds_to_hms(total_seconds):    \"\"\"å°†æ€»ç§’æ•°è½¬æ¢ä¸ºæ—¶:åˆ†:ç§’æ ¼å¼\"\"\"    hours, remainder = divmod(total_seconds, 3600)  # 1å°æ—¶ = 3600ç§’    minutes, seconds = divmod(remainder, 60)        # 1åˆ†é’Ÿ = 60ç§’    return int(hours), int(minutes), int(seconds)# æµ‹è¯•ä¸åŒçš„ç§’æ•°test_seconds = [3661, 7200, 3725, 86400, 90061, 123456]for total_sec in test_seconds:    h, m, s = seconds_to_hms(total_sec)    print(f\"{total_sec}ç§’ = {h}å°æ—¶ {m}åˆ†é’Ÿ {s}ç§’\")        # éªŒè¯è½¬æ¢    verification = h * 3600 + m * 60 + s    print(f\"éªŒè¯: {h}Ã—3600 + {m}Ã—60 + {s} = {verification} {'âœ“' if verification == total_sec else 'âœ—'}\")    print()# 2. åˆ†é’Ÿè½¬æ¢ä¸ºå°æ—¶å’Œåˆ†é’Ÿprint(\"2. åˆ†é’Ÿè½¬æ¢ä¸ºå°æ—¶å’Œåˆ†é’Ÿ:\")def minutes_to_hm(total_minutes):    \"\"\"å°†æ€»åˆ†é’Ÿæ•°è½¬æ¢ä¸ºå°æ—¶:åˆ†é’Ÿæ ¼å¼\"\"\"    hours, minutes = divmod(total_minutes, 60)    return int(hours), int(minutes)test_minutes = [90, 150, 480, 1440, 2000]for total_min in test_minutes:    h, m = minutes_to_hm(total_min)    print(f\"{total_min}åˆ†é’Ÿ = {h}å°æ—¶ {m}åˆ†é’Ÿ\")# 3. å¤©æ•°è½¬æ¢ä¸ºå¹´æœˆæ—¥ï¼ˆç®€åŒ–ç‰ˆï¼‰print(\"\\n3. å¤©æ•°è½¬æ¢ä¸ºå¹´æœˆæ—¥ï¼ˆç®€åŒ–ç‰ˆï¼‰:\")def days_to_ymd(total_days):    \"\"\"å°†æ€»å¤©æ•°è½¬æ¢ä¸ºå¹´æœˆæ—¥ï¼ˆç®€åŒ–è®¡ç®—ï¼Œä¸è€ƒè™‘é—°å¹´ï¼‰\"\"\"    years, remainder = divmod(total_days, 365)    months, days = divmod(remainder, 30)  # ç®€åŒ–ï¼šæ¯æœˆ30å¤©    return int(years), int(months), int(days)test_days = [400, 1000, 2000, 3650]for total_day in test_days:    y, m, d = days_to_ymd(total_day)    print(f\"{total_day}å¤© â‰ˆ {y}å¹´ {m}æœˆ {d}å¤©ï¼ˆç®€åŒ–è®¡ç®—ï¼‰\")# 4. å·¥ä½œæ—¶é—´è®¡ç®—print(\"\\n4. å·¥ä½œæ—¶é—´è®¡ç®—:\")def work_time_breakdown(total_minutes):    \"\"\"å·¥ä½œæ—¶é—´åˆ†è§£ï¼ˆ8å°æ—¶å·¥ä½œæ—¥ï¼‰\"\"\"    # ä¸€ä¸ªå·¥ä½œæ—¥ = 8å°æ—¶ = 480åˆ†é’Ÿ    work_days, remainder = divmod(total_minutes, 480)    work_hours, work_minutes = divmod(remainder, 60)        return int(work_days), int(work_hours), int(work_minutes)work_scenarios = [    (500, \"åŠ ç­20åˆ†é’Ÿ\"),    (960, \"ä¸¤ä¸ªå·¥ä½œæ—¥\"),    (1200, \"2.5ä¸ªå·¥ä½œæ—¥\"),    (2400, \"ä¸€å‘¨å·¥ä½œæ—¶é—´\"),]for minutes, description in work_scenarios:    days, hours, mins = work_time_breakdown(minutes)    print(f\"{description}: {minutes}åˆ†é’Ÿ = {days}ä¸ªå·¥ä½œæ—¥ {hours}å°æ—¶ {mins}åˆ†é’Ÿ\")# 5. æ—¶åŒºè½¬æ¢è¾…åŠ©print(\"\\n5. æ—¶åŒºè½¬æ¢è¾…åŠ©:\")def timezone_offset_to_hm(offset_minutes):    \"\"\"æ—¶åŒºåç§»åˆ†é’Ÿæ•°è½¬æ¢ä¸ºÂ±å°æ—¶:åˆ†é’Ÿæ ¼å¼\"\"\"    sign = '+' if offset_minutes &gt;= 0 else '-'    abs_offset = abs(offset_minutes)    hours, minutes = divmod(abs_offset, 60)    return f\"{sign}{hours:02d}:{minutes:02d}\"# å¸¸è§æ—¶åŒºåç§»ï¼ˆç›¸å¯¹äºUTCçš„åˆ†é’Ÿæ•°ï¼‰timezone_offsets = [    (480, \"åŒ—äº¬æ—¶é—´ UTC+8\"),    (-300, \"ç¾å›½ä¸œéƒ¨æ—¶é—´ UTC-5\"),    (330, \"å°åº¦æ ‡å‡†æ—¶é—´ UTC+5:30\"),    (-480, \"ç¾å›½å¤ªå¹³æ´‹æ—¶é—´ UTC-8\"),    (0, \"æ ¼æ—å¨æ²»æ—¶é—´ UTC+0\"),    (570, \"æ¾³å¤§åˆ©äºšé˜¿å¾·è±å¾· UTC+9:30\"),]for offset, description in timezone_offsets:    formatted_offset = timezone_offset_to_hm(offset)    print(f\"{description}: {formatted_offset}\")è¿›åˆ¶è½¬æ¢å’Œæ•°å­¦åº”ç”¨# è¿›åˆ¶è½¬æ¢å’Œæ•°å­¦åº”ç”¨print(\"è¿›åˆ¶è½¬æ¢å’Œæ•°å­¦åº”ç”¨:\")# 1. åè¿›åˆ¶è½¬ä»»æ„è¿›åˆ¶print(\"\\n1. åè¿›åˆ¶è½¬ä»»æ„è¿›åˆ¶:\")def decimal_to_base(number, base):    \"\"\"å°†åè¿›åˆ¶æ•°è½¬æ¢ä¸ºæŒ‡å®šè¿›åˆ¶\"\"\"    if number == 0:        return \"0\"        digits = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\"    result = []        while number &gt; 0:        number, remainder = divmod(number, base)        result.append(digits[remainder])        return ''.join(reversed(result))# æµ‹è¯•ä¸åŒè¿›åˆ¶è½¬æ¢test_numbers = [255, 1000, 42, 16, 100]bases = [2, 8, 16, 36]print(\"åè¿›åˆ¶æ•°è½¬æ¢ä¸ºä¸åŒè¿›åˆ¶:\")for num in test_numbers:    print(f\"\\nåè¿›åˆ¶ {num}:\")    for base in bases:        converted = decimal_to_base(num, base)        print(f\"  {base}è¿›åˆ¶: {converted}\")                # éªŒè¯è½¬æ¢ï¼ˆå¯¹äºå¸¸è§è¿›åˆ¶ï¼‰        if base == 2:            verification = bin(num)[2:]  # å»æ‰'0b'å‰ç¼€            print(f\"    éªŒè¯: bin({num}) = {verification} {'âœ“' if converted == verification else 'âœ—'}\")        elif base == 8:            verification = oct(num)[2:]  # å»æ‰'0o'å‰ç¼€            print(f\"    éªŒè¯: oct({num}) = {verification} {'âœ“' if converted == verification else 'âœ—'}\")        elif base == 16:            verification = hex(num)[2:].upper()  # å»æ‰'0x'å‰ç¼€å¹¶è½¬å¤§å†™            print(f\"    éªŒè¯: hex({num}) = {verification} {'âœ“' if converted == verification else 'âœ—'}\")# 2. åˆ†æ•°åŒ–ç®€print(\"\\n2. åˆ†æ•°åŒ–ç®€:\")def gcd(a, b):    \"\"\"è®¡ç®—æœ€å¤§å…¬çº¦æ•°ï¼ˆæ¬§å‡ é‡Œå¾—ç®—æ³•ï¼‰\"\"\"    while b:        a, b = b, a % b    return adef simplify_fraction(numerator, denominator):    \"\"\"åŒ–ç®€åˆ†æ•°\"\"\"    # ä½¿ç”¨æœ€å¤§å…¬çº¦æ•°åŒ–ç®€    common_divisor = gcd(abs(numerator), abs(denominator))    simplified_num = numerator // common_divisor    simplified_den = denominator // common_divisor        # ç¡®ä¿åˆ†æ¯ä¸ºæ­£    if simplified_den &lt; 0:        simplified_num = -simplified_num        simplified_den = -simplified_den        return simplified_num, simplified_den# æµ‹è¯•åˆ†æ•°åŒ–ç®€fractions = [    (12, 18),   # 12/18 = 2/3    (15, 25),   # 15/25 = 3/5    (100, 150), # 100/150 = 2/3    (7, 21),    # 7/21 = 1/3    (24, 36),   # 24/36 = 2/3    (-8, 12),   # -8/12 = -2/3]print(\"åˆ†æ•°åŒ–ç®€:\")for num, den in fractions:    simplified_num, simplified_den = simplify_fraction(num, den)    gcd_value = gcd(abs(num), abs(den))        print(f\"{num}/{den} = {simplified_num}/{simplified_den}\")    print(f\"  æœ€å¤§å…¬çº¦æ•°: {gcd_value}\")    print(f\"  åŒ–ç®€è¿‡ç¨‹: {num}Ã·{gcd_value} = {num//gcd_value}, {den}Ã·{gcd_value} = {den//gcd_value}\")    print()# 3. æ¬§å‡ é‡Œå¾—ç®—æ³•çš„è¯¦ç»†è¿‡ç¨‹print(\"3. æ¬§å‡ é‡Œå¾—ç®—æ³•è¯¦ç»†è¿‡ç¨‹:\")def extended_gcd_steps(a, b):    \"\"\"æ˜¾ç¤ºæ¬§å‡ é‡Œå¾—ç®—æ³•çš„è¯¦ç»†æ­¥éª¤\"\"\"    print(f\"è®¡ç®— gcd({a}, {b}):\")    original_a, original_b = a, b    step = 1        while b != 0:        quotient, remainder = divmod(a, b)        print(f\"  æ­¥éª¤{step}: {a} = {b} Ã— {quotient} + {remainder}\")        a, b = b, remainder        step += 1        print(f\"  ç»“æœ: gcd({original_a}, {original_b}) = {a}\")    return a# æ¼”ç¤ºæ¬§å‡ é‡Œå¾—ç®—æ³•gcd_examples = [(48, 18), (1071, 462), (252, 105)]for a, b in gcd_examples:    result = extended_gcd_steps(a, b)    print()# 4. æ•°å­—åˆ†è§£print(\"4. æ•°å­—åˆ†è§£åº”ç”¨:\")def money_breakdown(amount_cents):    \"\"\"å°†é‡‘é¢ï¼ˆåˆ†ï¼‰åˆ†è§£ä¸ºä¸åŒé¢é¢\"\"\"    # é¢é¢ï¼ˆåˆ†ï¼‰ï¼š100å…ƒã€50å…ƒã€20å…ƒã€10å…ƒã€5å…ƒã€1å…ƒã€5è§’ã€1è§’ã€5åˆ†ã€1åˆ†    denominations = [10000, 5000, 2000, 1000, 500, 100, 50, 10, 5, 1]    denomination_names = ['100å…ƒ', '50å…ƒ', '20å…ƒ', '10å…ƒ', '5å…ƒ', '1å…ƒ', '5è§’', '1è§’', '5åˆ†', '1åˆ†']        breakdown = []    remaining = amount_cents        for i, denom in enumerate(denominations):        count, remaining = divmod(remaining, denom)        if count &gt; 0:            breakdown.append((denomination_names[i], count))        return breakdown# æµ‹è¯•é‡‘é¢åˆ†è§£test_amounts = [12345, 6789, 999, 10050]  # å•ä½ï¼šåˆ†print(\"é‡‘é¢åˆ†è§£:\")for amount in test_amounts:    yuan = amount / 100    breakdown = money_breakdown(amount)        print(f\"\\n{yuan:.2f}å…ƒ ({amount}åˆ†) çš„æœ€ä¼˜åˆ†è§£:\")    for denom_name, count in breakdown:        print(f\"  {denom_name}: {count}å¼ /ä¸ª\")        # éªŒè¯åˆ†è§£ç»“æœ    total_check = 0    denominations = [10000, 5000, 2000, 1000, 500, 100, 50, 10, 5, 1]    for i, (denom_name, count) in enumerate(breakdown):        total_check += denominations[i] * count        print(f\"  éªŒè¯: æ€»è®¡ {total_check}åˆ† {'âœ“' if total_check == amount else 'âœ—'}\")# 5. åæ ‡ç³»è½¬æ¢print(\"\\n5. åæ ‡ç³»åº”ç”¨:\")def linear_index_to_2d(index, width):    \"\"\"å°†ä¸€ç»´ç´¢å¼•è½¬æ¢ä¸ºäºŒç»´åæ ‡\"\"\"    row, col = divmod(index, width)    return row, coldef coord_2d_to_linear(row, col, width):    \"\"\"å°†äºŒç»´åæ ‡è½¬æ¢ä¸ºä¸€ç»´ç´¢å¼•\"\"\"    return row * width + col# æµ‹è¯•åæ ‡è½¬æ¢ï¼ˆä¾‹å¦‚ï¼š8x8æ£‹ç›˜ï¼‰board_width = 8test_indices = [0, 7, 8, 15, 63, 35, 42]print(f\"ä¸€ç»´ç´¢å¼•ä¸äºŒç»´åæ ‡è½¬æ¢ï¼ˆ{board_width}x{board_width}ç½‘æ ¼ï¼‰:\")for index in test_indices:    row, col = linear_index_to_2d(index, board_width)    back_to_index = coord_2d_to_linear(row, col, board_width)        print(f\"ç´¢å¼• {index} â†’ åæ ‡ ({row}, {col}) â†’ ç´¢å¼• {back_to_index} {'âœ“' if back_to_index == index else 'âœ—'}\")# 6. åˆ†é¡µè®¡ç®—print(\"\\n6. åˆ†é¡µè®¡ç®—:\")def calculate_pagination(total_items, items_per_page):    \"\"\"è®¡ç®—åˆ†é¡µä¿¡æ¯\"\"\"    total_pages, remaining_items = divmod(total_items, items_per_page)        # å¦‚æœæœ‰å‰©ä½™é¡¹ç›®ï¼Œéœ€è¦é¢å¤–ä¸€é¡µ    if remaining_items &gt; 0:        total_pages += 1        return total_pages, remaining_itemsdef get_page_items(total_items, items_per_page, page_number):    \"\"\"è·å–æŒ‡å®šé¡µé¢çš„é¡¹ç›®èŒƒå›´\"\"\"    start_index = (page_number - 1) * items_per_page    end_index = min(start_index + items_per_page, total_items)    return start_index, end_index# æµ‹è¯•åˆ†é¡µè®¡ç®—pagination_tests = [    (100, 10),  # 100ä¸ªé¡¹ç›®ï¼Œæ¯é¡µ10ä¸ª    (97, 10),   # 97ä¸ªé¡¹ç›®ï¼Œæ¯é¡µ10ä¸ª    (50, 7),    # 50ä¸ªé¡¹ç›®ï¼Œæ¯é¡µ7ä¸ª    (1000, 25), # 1000ä¸ªé¡¹ç›®ï¼Œæ¯é¡µ25ä¸ª]print(\"åˆ†é¡µè®¡ç®—:\")for total, per_page in pagination_tests:    total_pages, remaining = calculate_pagination(total, per_page)        print(f\"\\næ€»é¡¹ç›®: {total}, æ¯é¡µ: {per_page}\")    print(f\"æ€»é¡µæ•°: {total_pages}\")    print(f\"æœ€åä¸€é¡µé¡¹ç›®æ•°: {remaining if remaining &gt; 0 else per_page}\")        # æ˜¾ç¤ºå‰å‡ é¡µå’Œæœ€åä¸€é¡µçš„é¡¹ç›®èŒƒå›´    pages_to_show = [1, 2, total_pages] if total_pages &gt; 2 else list(range(1, total_pages + 1))    for page in pages_to_show:        start, end = get_page_items(total, per_page, page)        item_count = end - start        print(f\"  ç¬¬{page}é¡µ: é¡¹ç›® {start+1}-{end} (å…±{item_count}ä¸ª)\")ç®—æ³•å’Œæ•°æ®ç»“æ„åº”ç”¨# ç®—æ³•å’Œæ•°æ®ç»“æ„åº”ç”¨print(\"ç®—æ³•å’Œæ•°æ®ç»“æ„åº”ç”¨:\")# 1. å“ˆå¸Œè¡¨å®ç°ä¸­çš„åº”ç”¨print(\"\\n1. å“ˆå¸Œè¡¨ç´¢å¼•è®¡ç®—:\")class SimpleHashTable:    \"\"\"ç®€å•å“ˆå¸Œè¡¨å®ç°\"\"\"        def __init__(self, size=10):        self.size = size        self.table = [[] for _ in range(size)]  # ä½¿ç”¨é“¾è¡¨è§£å†³å†²çª        def _hash(self, key):        \"\"\"ç®€å•å“ˆå¸Œå‡½æ•°\"\"\"        if isinstance(key, str):            hash_value = sum(ord(c) for c in key)        else:            hash_value = hash(key)                # ä½¿ç”¨divmodç¡®ä¿ç´¢å¼•åœ¨æœ‰æ•ˆèŒƒå›´å†…        _, index = divmod(abs(hash_value), self.size)        return index        def put(self, key, value):        \"\"\"æ’å…¥é”®å€¼å¯¹\"\"\"        index = self._hash(key)        bucket = self.table[index]                # æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨è¯¥é”®        for i, (k, v) in enumerate(bucket):            if k == key:                bucket[i] = (key, value)  # æ›´æ–°å€¼                return                # æ·»åŠ æ–°çš„é”®å€¼å¯¹        bucket.append((key, value))        def get(self, key):        \"\"\"è·å–å€¼\"\"\"        index = self._hash(key)        bucket = self.table[index]                for k, v in bucket:            if k == key:                return v                raise KeyError(key)        def display(self):        \"\"\"æ˜¾ç¤ºå“ˆå¸Œè¡¨å†…å®¹\"\"\"        for i, bucket in enumerate(self.table):            if bucket:                print(f\"  ç´¢å¼• {i}: {bucket}\")# æµ‹è¯•å“ˆå¸Œè¡¨ht = SimpleHashTable(7)test_data = [    (\"apple\", 1),    (\"banana\", 2),    (\"cherry\", 3),    (\"date\", 4),    (\"elderberry\", 5),    (123, \"number key\"),    (\"apple\", 10),  # æ›´æ–°å·²å­˜åœ¨çš„é”®]print(\"å“ˆå¸Œè¡¨æ“ä½œ:\")for key, value in test_data:    index = ht._hash(key)    print(f\"æ’å…¥ ({key}, {value}) â†’ å“ˆå¸Œç´¢å¼•: {index}\")    ht.put(key, value)print(\"\\nå“ˆå¸Œè¡¨å†…å®¹:\")ht.display()# 2. å¾ªç¯æ•°ç»„ç´¢å¼•print(\"\\n2. å¾ªç¯æ•°ç»„ç´¢å¼•:\")class CircularArray:    \"\"\"å¾ªç¯æ•°ç»„å®ç°\"\"\"        def __init__(self, size):        self.size = size        self.array = [None] * size        self.start = 0  # èµ·å§‹ä½ç½®        self.count = 0  # å½“å‰å…ƒç´ æ•°é‡        def add(self, item):        \"\"\"æ·»åŠ å…ƒç´ \"\"\"        if self.count &lt; self.size:            # æ•°ç»„æœªæ»¡ï¼Œç›´æ¥æ·»åŠ             index = (self.start + self.count) % self.size            self.array[index] = item            self.count += 1        else:            # æ•°ç»„å·²æ»¡ï¼Œè¦†ç›–æœ€æ—§çš„å…ƒç´             self.array[self.start] = item            self.start = (self.start + 1) % self.size        def get(self, logical_index):        \"\"\"æ ¹æ®é€»è¾‘ç´¢å¼•è·å–å…ƒç´ \"\"\"        if logical_index &gt;= self.count:            raise IndexError(\"Index out of range\")                # ä½¿ç”¨divmodè®¡ç®—å®é™…ç‰©ç†ç´¢å¼•        _, physical_index = divmod(self.start + logical_index, self.size)        return self.array[physical_index]        def display(self):        \"\"\"æ˜¾ç¤ºæ•°ç»„çŠ¶æ€\"\"\"        print(f\"  å¤§å°: {self.size}, å…ƒç´ æ•°: {self.count}, èµ·å§‹ä½ç½®: {self.start}\")        print(f\"  ç‰©ç†æ•°ç»„: {self.array}\")        if self.count &gt; 0:            logical_view = [self.get(i) for i in range(self.count)]            print(f\"  é€»è¾‘è§†å›¾: {logical_view}\")# æµ‹è¯•å¾ªç¯æ•°ç»„circ_array = CircularArray(5)test_items = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H']print(\"å¾ªç¯æ•°ç»„æ“ä½œ:\")for i, item in enumerate(test_items):    print(f\"\\næ·»åŠ å…ƒç´  '{item}':\")    circ_array.add(item)    circ_array.display()# 3. æ—¶é—´è½®ç®—æ³•print(\"\\n3. æ—¶é—´è½®ç®—æ³•æ¨¡æ‹Ÿ:\")class TimeWheel:    \"\"\"ç®€å•æ—¶é—´è½®å®ç°\"\"\"        def __init__(self, slots=60):        self.slots = slots  # æ—¶é—´æ§½æ•°é‡ï¼ˆä¾‹å¦‚60ç§’ï¼‰        self.wheel = [[] for _ in range(slots)]        self.current_time = 0        def add_task(self, delay, task):        \"\"\"æ·»åŠ å»¶æ—¶ä»»åŠ¡\"\"\"        # è®¡ç®—ä»»åŠ¡åº”è¯¥æ”¾åœ¨å“ªä¸ªæ§½ä¸­        target_time = self.current_time + delay        _, slot_index = divmod(target_time, self.slots)                # è®¡ç®—éœ€è¦è½¬å¤šå°‘åœˆ        rounds, _ = divmod(delay, self.slots)                self.wheel[slot_index].append({            'task': task,            'rounds': rounds,            'target_time': target_time        })                print(f\"ä»»åŠ¡ '{task}' å»¶æ—¶ {delay}ç§’ï¼Œæ”¾å…¥æ§½ {slot_index}ï¼Œéœ€ç­‰å¾… {rounds} åœˆ\")        def tick(self):        \"\"\"æ—¶é—´å‰è¿›ä¸€ç§’\"\"\"        current_slot = self.current_time % self.slots        tasks_to_execute = []        remaining_tasks = []                # æ£€æŸ¥å½“å‰æ§½ä¸­çš„ä»»åŠ¡        for task_info in self.wheel[current_slot]:            if task_info['rounds'] == 0:                tasks_to_execute.append(task_info['task'])            else:                task_info['rounds'] -= 1                remaining_tasks.append(task_info)                # æ›´æ–°å½“å‰æ§½        self.wheel[current_slot] = remaining_tasks                # æ‰§è¡Œåˆ°æœŸä»»åŠ¡        if tasks_to_execute:            print(f\"æ—¶é—´ {self.current_time}: æ‰§è¡Œä»»åŠ¡ {tasks_to_execute}\")                self.current_time += 1        return tasks_to_execute# æµ‹è¯•æ—¶é—´è½®time_wheel = TimeWheel(10)  # 10ä¸ªæ—¶é—´æ§½# æ·»åŠ ä¸€äº›ä»»åŠ¡tasks = [    (3, \"ä»»åŠ¡A\"),    (7, \"ä»»åŠ¡B\"),    (15, \"ä»»åŠ¡C\"),  # éœ€è¦è½¬1åœˆå¤š    (25, \"ä»»åŠ¡D\"),  # éœ€è¦è½¬2åœˆå¤š    (5, \"ä»»åŠ¡E\"),]print(\"æ—¶é—´è½®ä»»åŠ¡è°ƒåº¦:\")for delay, task in tasks:    time_wheel.add_task(delay, task)print(\"\\næ—¶é—´è½®è¿è¡Œ:\")# æ¨¡æ‹Ÿ30ç§’çš„è¿è¡Œfor _ in range(30):    executed = time_wheel.tick()    if not executed and time_wheel.current_time % 10 == 0:        print(f\"æ—¶é—´ {time_wheel.current_time}: æ— ä»»åŠ¡æ‰§è¡Œ\")# 4. è´Ÿè½½å‡è¡¡ç®—æ³•print(\"\\n4. è½®è¯¢è´Ÿè½½å‡è¡¡:\")class RoundRobinBalancer:    \"\"\"è½®è¯¢è´Ÿè½½å‡è¡¡å™¨\"\"\"        def __init__(self, servers):        self.servers = servers        self.current_index = 0        self.request_count = 0        def get_server(self):        \"\"\"è·å–ä¸‹ä¸€ä¸ªæœåŠ¡å™¨\"\"\"        # ä½¿ç”¨divmodå®ç°è½®è¯¢        _, server_index = divmod(self.request_count, len(self.servers))        selected_server = self.servers[server_index]                self.request_count += 1        return selected_server, server_index        def get_stats(self):        \"\"\"è·å–ç»Ÿè®¡ä¿¡æ¯\"\"\"        requests_per_server, remainder = divmod(self.request_count, len(self.servers))        return {            'total_requests': self.request_count,            'requests_per_server': requests_per_server,            'extra_requests': remainder,            'servers': self.servers        }# æµ‹è¯•è´Ÿè½½å‡è¡¡servers = ['Server-A', 'Server-B', 'Server-C', 'Server-D']balancer = RoundRobinBalancer(servers)print(\"è½®è¯¢è´Ÿè½½å‡è¡¡æµ‹è¯•:\")print(f\"æœåŠ¡å™¨åˆ—è¡¨: {servers}\")print(\"\\nè¯·æ±‚åˆ†å‘:\")# æ¨¡æ‹Ÿ15ä¸ªè¯·æ±‚for i in range(15):    server, index = balancer.get_server()    print(f\"è¯·æ±‚ {i+1:2d} â†’ {server} (ç´¢å¼• {index})\")# æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯stats = balancer.get_stats()print(f\"\\nç»Ÿè®¡ä¿¡æ¯:\")print(f\"æ€»è¯·æ±‚æ•°: {stats['total_requests']}\")print(f\"æ¯æœåŠ¡å™¨åŸºç¡€è¯·æ±‚æ•°: {stats['requests_per_server']}\")print(f\"é¢å¤–è¯·æ±‚æ•°: {stats['extra_requests']}\")print(f\"å‰{stats['extra_requests']}ä¸ªæœåŠ¡å™¨å„å¤šå¤„ç†1ä¸ªè¯·æ±‚\")âš ï¸ æ³¨æ„äº‹é¡¹å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ# divmod()å‡½æ•°çš„å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µprint(\"divmod()å‡½æ•°å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ:\")# é™·é˜±1: è´Ÿæ•°çš„é™¤æ³•å’Œå–æ¨¡è¡Œä¸ºprint(\"\\né™·é˜±1: è´Ÿæ•°çš„é™¤æ³•å’Œå–æ¨¡è¡Œä¸º\")# Pythonçš„é™¤æ³•å’Œå–æ¨¡éµå¾ªç‰¹å®šè§„åˆ™test_cases = [    (7, 3),     # æ­£æ•°æƒ…å†µ    (-7, 3),    # è´Ÿè¢«é™¤æ•°    (7, -3),    # è´Ÿé™¤æ•°    (-7, -3),   # åŒè´Ÿæ•°]print(\"Pythonçš„é™¤æ³•å’Œå–æ¨¡è§„åˆ™:\")for a, b in test_cases:    q, r = divmod(a, b)    floor_div = a // b    mod_result = a % b        print(f\"\\ndivmod({a}, {b}) = ({q}, {r})\")    print(f\"{a} // {b} = {floor_div}, {a} % {b} = {mod_result}\")    print(f\"éªŒè¯: {b} Ã— {q} + {r} = {b * q + r}\")        # é‡è¦è§„åˆ™è¯´æ˜    if r != 0:        print(f\"ä½™æ•°ç¬¦å·ä¸é™¤æ•°ä¸€è‡´: {r} ä¸ {b} {'åŒå·' if (r &gt; 0) == (b &gt; 0) else 'å¼‚å·'}\")        # ä¸å…¶ä»–è¯­è¨€çš„å·®å¼‚    if a &lt; 0 and b &gt; 0:        print(f\"æ³¨æ„: åœ¨C/Javaä¸­ï¼Œ{a} / {b} çš„å•†å¯èƒ½æ˜¯ {a // b + 1}ï¼Œä½™æ•°æ˜¯ {a % b - b}\")print(\"\\né‡è¦è§„åˆ™:\")print(\"1. Pythonä½¿ç”¨å‘ä¸‹å–æ•´é™¤æ³•ï¼ˆfloor divisionï¼‰\")print(\"2. ä½™æ•°çš„ç¬¦å·æ€»æ˜¯ä¸é™¤æ•°ç›¸åŒ\")print(\"3. æ»¡è¶³ç­‰å¼: a = b * q + rï¼Œä¸” 0 â‰¤ |r| &lt; |b|\")# é™·é˜±2: æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜print(\"\\né™·é˜±2: æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜\")float_cases = [    (10.0, 3.0),    (1.0, 0.1),     # 0.1æ— æ³•ç²¾ç¡®è¡¨ç¤º    (0.3, 0.1),     # ä¸¤ä¸ªæ— æ³•ç²¾ç¡®è¡¨ç¤ºçš„æ•°    (1.0, 0.3),]print(\"æµ®ç‚¹æ•°divmodå¯èƒ½çš„ç²¾åº¦é—®é¢˜:\")for a, b in float_cases:    q, r = divmod(a, b)    verification = b * q + r    error = abs(verification - a)        print(f\"\\ndivmod({a}, {b}) = ({q}, {r})\")    print(f\"éªŒè¯: {b} Ã— {q} + {r} = {verification}\")    print(f\"è¯¯å·®: {error}\")        if error &gt; 1e-15:        print(f\"âš ï¸  å­˜åœ¨ç²¾åº¦è¯¯å·®\")        print(f\"å»ºè®®: å¯¹äºç²¾ç¡®è®¡ç®—ï¼Œè€ƒè™‘ä½¿ç”¨decimalæ¨¡å—\")# ä½¿ç”¨decimalæ¨¡å—çš„ç²¾ç¡®è®¡ç®—print(\"\\nä½¿ç”¨decimalæ¨¡å—è¿›è¡Œç²¾ç¡®è®¡ç®—:\")from decimal import Decimal, getcontextgetcontext().prec = 28  # è®¾ç½®ç²¾åº¦decimal_a = Decimal('1.0')decimal_b = Decimal('0.3')q, r = divmod(decimal_a, decimal_b)print(f\"Decimal divmod({decimal_a}, {decimal_b}) = ({q}, {r})\")print(f\"éªŒè¯: {decimal_b} Ã— {q} + {r} = {decimal_b * q + r}\")# é™·é˜±3: é™¤é›¶é”™è¯¯print(\"\\né™·é˜±3: é™¤é›¶é”™è¯¯å¤„ç†\")def safe_divmod(a, b):    \"\"\"å®‰å…¨çš„divmodå‡½æ•°\"\"\"    try:        return divmod(a, b)    except ZeroDivisionError:        print(f\"é”™è¯¯: ä¸èƒ½é™¤ä»¥é›¶ (divmod({a}, {b}))\")        return None, None    except Exception as e:        print(f\"é”™è¯¯: {type(e).__name__}: {e}\")        return None, None# æµ‹è¯•é”™è¯¯å¤„ç†error_cases = [    (10, 0),    (0, 0),    (float('inf'), 5),    (5, float('inf')),]print(\"é”™è¯¯å¤„ç†æµ‹è¯•:\")for a, b in error_cases:    print(f\"safe_divmod({a}, {b}):\")    result = safe_divmod(a, b)    print(f\"  ç»“æœ: {result}\")# é™·é˜±4: æ€§èƒ½è€ƒè™‘print(\"\\né™·é˜±4: æ€§èƒ½è€ƒè™‘\")import time# æ¯”è¾ƒdivmodä¸åˆ†åˆ«ä½¿ç”¨//å’Œ%çš„æ€§èƒ½test_data = [(i, 7) for i in range(100000)]# æ–¹æ³•1: ä½¿ç”¨divmodstart = time.time()results1 = [divmod(a, b) for a, b in test_data]time1 = time.time() - start# æ–¹æ³•2: åˆ†åˆ«ä½¿ç”¨//å’Œ%start = time.time()results2 = [(a // b, a % b) for a, b in test_data]time2 = time.time() - startprint(f\"æ€§èƒ½æ¯”è¾ƒ (100,000æ¬¡æ“ä½œ):\")print(f\"divmodæ–¹æ³•: {time1:.6f}ç§’\")print(f\"//å’Œ%æ–¹æ³•: {time2:.6f}ç§’\")print(f\"æ€§èƒ½å·®å¼‚: {abs(time1 - time2):.6f}ç§’\")print(f\"ç»“æœä¸€è‡´: {results1 == results2}\")if time1 &lt; time2:    print(\"divmodæ›´å¿«ï¼Œæ¨èåœ¨éœ€è¦åŒæ—¶è·å–å•†å’Œä½™æ•°æ—¶ä½¿ç”¨\")else:    print(\"åˆ†åˆ«è®¡ç®—æ›´å¿«ï¼Œä½†å·®å¼‚é€šå¸¸å¾ˆå°\")# é™·é˜±5: ç±»å‹è½¬æ¢é—®é¢˜print(\"\\né™·é˜±5: ç±»å‹è½¬æ¢é—®é¢˜\")type_cases = [    (10, 3),        # int, int    (10.0, 3),      # float, int    (10, 3.0),      # int, float    (10.0, 3.0),    # float, float    (True, 2),      # bool, int (True = 1)    (10, True),     # int, bool (True = 1)]print(\"ä¸åŒç±»å‹çš„divmodç»“æœ:\")for a, b in type_cases:    q, r = divmod(a, b)    print(f\"divmod({a} ({type(a).__name__}), {b} ({type(b).__name__})) = ({q} ({type(q).__name__}), {r} ({type(r).__name__}))\")print(\"\\nç±»å‹è§„åˆ™:\")print(\"1. å¦‚æœä»»ä¸€æ“ä½œæ•°æ˜¯floatï¼Œç»“æœä¸ºfloat\")print(\"2. å¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯intï¼Œç»“æœä¸ºint\")print(\"3. boolè¢«è§†ä¸ºintï¼ˆTrue=1, False=0ï¼‰\")# æœ€ä½³å®è·µæ€»ç»“print(\"\\næœ€ä½³å®è·µæ€»ç»“:\")print(\"1. ç†è§£Pythonçš„å‘ä¸‹å–æ•´é™¤æ³•è§„åˆ™\")print(\"2. æ³¨æ„è´Ÿæ•°çš„é™¤æ³•å’Œå–æ¨¡è¡Œä¸º\")print(\"3. å¯¹äºç²¾ç¡®è®¡ç®—ï¼Œè€ƒè™‘ä½¿ç”¨decimalæ¨¡å—\")print(\"4. å§‹ç»ˆå¤„ç†é™¤é›¶é”™è¯¯\")print(\"5. åœ¨éœ€è¦åŒæ—¶è·å–å•†å’Œä½™æ•°æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨divmod\")print(\"6. æ³¨æ„ä¸åŒæ•°æ®ç±»å‹çš„ç»“æœç±»å‹\")print(\"7. åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸­ï¼Œæµ‹è¯•divmodä¸åˆ†åˆ«è®¡ç®—çš„æ€§èƒ½\")print(\"8. åœ¨ç®—æ³•å®ç°ä¸­ï¼Œdivmodå¸¸ç”¨äºç´¢å¼•è®¡ç®—å’Œæ•°å€¼åˆ†è§£\")ğŸ”§ æ€§èƒ½ä¼˜åŒ–divmod() æ€§èƒ½ä¼˜åŒ–æŠ€å·§# divmod() æ€§èƒ½ä¼˜åŒ–æŠ€å·§print(\"divmod() æ€§èƒ½ä¼˜åŒ–æŠ€å·§:\")import time# 1. æ‰¹é‡æ“ä½œä¼˜åŒ–print(\"\\n1. æ‰¹é‡æ“ä½œä¼˜åŒ–:\")# ç”Ÿæˆæµ‹è¯•æ•°æ®test_data = [(i, 7) for i in range(100000)]# æ–¹æ³•1: åˆ—è¡¨æ¨å¯¼å¼def batch_divmod_list_comp(data):    return [divmod(a, b) for a, b in data]# æ–¹æ³•2: ç”Ÿæˆå™¨è¡¨è¾¾å¼def batch_divmod_generator(data):    return list(divmod(a, b) for a, b in data)# æ–¹æ³•3: ä¼ ç»Ÿå¾ªç¯def batch_divmod_loop(data):    results = []    for a, b in data:        results.append(divmod(a, b))    return results# æ–¹æ³•4: é¢„åˆ†é…åˆ—è¡¨def batch_divmod_preallocated(data):    results = [None] * len(data)    for i, (a, b) in enumerate(data):        results[i] = divmod(a, b)    return results# æ€§èƒ½æµ‹è¯•methods = [    (\"åˆ—è¡¨æ¨å¯¼å¼\", batch_divmod_list_comp),    (\"ç”Ÿæˆå™¨è¡¨è¾¾å¼\", batch_divmod_generator),    (\"ä¼ ç»Ÿå¾ªç¯\", batch_divmod_loop),    (\"é¢„åˆ†é…åˆ—è¡¨\", batch_divmod_preallocated),]print(f\"æ‰¹é‡æ“ä½œæ€§èƒ½æµ‹è¯• ({len(test_data)}æ¬¡æ“ä½œ):\")results = {}for name, func in methods:    start = time.time()    result = func(test_data[:10000])  # ä½¿ç”¨è¾ƒå°çš„æ•°æ®é›†è¿›è¡Œæµ‹è¯•    elapsed = time.time() - start    results[name] = (elapsed, result)    print(f\"{name}: {elapsed:.6f}ç§’\")# éªŒè¯ç»“æœä¸€è‡´æ€§first_result = list(results.values())[0][1]all_same = all(result == first_result for _, result in results.values())print(f\"æ‰€æœ‰æ–¹æ³•ç»“æœä¸€è‡´: {all_same}\")# 2. ç¼“å­˜ä¼˜åŒ–print(\"\\n2. ç¼“å­˜ä¼˜åŒ–:\")class DivmodCache:    \"\"\"divmodç»“æœç¼“å­˜\"\"\"        def __init__(self, max_size=10000):        self.cache = {}        self.max_size = max_size        self.hits = 0        self.misses = 0        def divmod_cached(self, a, b):        \"\"\"å¸¦ç¼“å­˜çš„divmod\"\"\"        key = (a, b)                if key in self.cache:            self.hits += 1            return self.cache[key]                result = divmod(a, b)        self.misses += 1                # ç®€å•çš„ç¼“å­˜å¤§å°æ§åˆ¶        if len(self.cache) &lt; self.max_size:            self.cache[key] = result                return result        def get_stats(self):        total = self.hits + self.misses        hit_rate = self.hits / total if total &gt; 0 else 0        return {            'hits': self.hits,            'misses': self.misses,            'hit_rate': hit_rate,            'cache_size': len(self.cache)        }# åˆ›å»ºé‡å¤æ•°æ®è¿›è¡Œç¼“å­˜æµ‹è¯•import randomrandom.seed(42)repeated_data = [(random.randint(1, 100), random.randint(1, 20)) for _ in range(1000)]repeated_data = repeated_data * 10  # é‡å¤10æ¬¡å¢åŠ ç¼“å­˜å‘½ä¸­ç‡random.shuffle(repeated_data)cache = DivmodCache()# æ— ç¼“å­˜æµ‹è¯•start = time.time()no_cache_results = [divmod(a, b) for a, b in repeated_data]no_cache_time = time.time() - start# æœ‰ç¼“å­˜æµ‹è¯•start = time.time()cache_results = [cache.divmod_cached(a, b) for a, b in repeated_data]cache_time = time.time() - startstats = cache.get_stats()print(f\"ç¼“å­˜æµ‹è¯•ç»“æœ:\")print(f\"æ•°æ®é‡: {len(repeated_data)}\")print(f\"æ— ç¼“å­˜æ—¶é—´: {no_cache_time:.6f}ç§’\")print(f\"æœ‰ç¼“å­˜æ—¶é—´: {cache_time:.6f}ç§’\")print(f\"æ€§èƒ½æå‡: {no_cache_time/cache_time:.2f}x\")print(f\"ç¼“å­˜å‘½ä¸­ç‡: {stats['hit_rate']:.2%}\")print(f\"ç¼“å­˜å¤§å°: {stats['cache_size']}\")print(f\"ç»“æœä¸€è‡´: {no_cache_results == cache_results}\")# 3. ç‰¹æ®Šæƒ…å†µä¼˜åŒ–print(\"\\n3. ç‰¹æ®Šæƒ…å†µä¼˜åŒ–:\")def optimized_divmod(a, b):    \"\"\"ä¼˜åŒ–çš„divmodå®ç°\"\"\"    # ç‰¹æ®Šæƒ…å†µå¿«é€Ÿå¤„ç†    if b == 1:        return a, 0    elif b == -1:        return -a, 0    elif a == 0:        return 0, 0    elif a == b:        return 1, 0    elif abs(a) &lt; abs(b):        if (a &gt;= 0) == (b &gt;= 0):  # åŒå·            return 0, a        else:  # å¼‚å·            return -1, a + b    else:        return divmod(a, b)# æµ‹è¯•ä¼˜åŒ–ç‰ˆæœ¬optimization_cases = [    (100, 1),    # é™¤æ•°ä¸º1    (100, -1),   # é™¤æ•°ä¸º-1    (0, 5),      # è¢«é™¤æ•°ä¸º0    (7, 7),      # ç›¸ç­‰    (3, 5),      # è¢«é™¤æ•°å°äºé™¤æ•°ï¼ˆæ­£æ•°ï¼‰    (-3, 5),     # è¢«é™¤æ•°å°äºé™¤æ•°ï¼ˆè´Ÿè¢«é™¤æ•°ï¼‰    (3, -5),     # è¢«é™¤æ•°å°äºé™¤æ•°ï¼ˆè´Ÿé™¤æ•°ï¼‰    (123, 7),    # ä¸€èˆ¬æƒ…å†µ]print(\"ä¼˜åŒ–ç‰ˆæœ¬æµ‹è¯•:\")for a, b in optimization_cases:    standard_result = divmod(a, b)    optimized_result = optimized_divmod(a, b)        print(f\"divmod({a}, {b}):\")    print(f\"  æ ‡å‡†ç‰ˆæœ¬: {standard_result}\")    print(f\"  ä¼˜åŒ–ç‰ˆæœ¬: {optimized_result}\")    print(f\"  ç»“æœä¸€è‡´: {standard_result == optimized_result}\")    print()# 4. å‘é‡åŒ–æ“ä½œï¼ˆä½¿ç”¨NumPyï¼‰print(\"4. å‘é‡åŒ–æ“ä½œï¼ˆNumPyï¼‰:\")try:    import numpy as np        # ç”Ÿæˆå¤§é‡æµ‹è¯•æ•°æ®    np.random.seed(42)    a_array = np.random.randint(1, 1000, 100000)    b_array = np.random.randint(1, 100, 100000)        # Pythonæ ‡å‡†æ–¹æ³•    start = time.time()    python_results = [divmod(int(a), int(b)) for a, b in zip(a_array, b_array)]    python_time = time.time() - start        # NumPyå‘é‡åŒ–æ–¹æ³•    start = time.time()    numpy_quotients = a_array // b_array    numpy_remainders = a_array % b_array    numpy_results = list(zip(numpy_quotients, numpy_remainders))    numpy_time = time.time() - start        print(f\"å‘é‡åŒ–æ“ä½œæ€§èƒ½æ¯”è¾ƒ ({len(a_array)}ä¸ªå…ƒç´ ):\")    print(f\"Pythonæ ‡å‡†æ–¹æ³•: {python_time:.6f}ç§’\")    print(f\"NumPyå‘é‡åŒ–: {numpy_time:.6f}ç§’\")    print(f\"æ€§èƒ½æå‡: {python_time/numpy_time:.2f}x\")        # éªŒè¯ç»“æœä¸€è‡´æ€§ï¼ˆæ£€æŸ¥å‰å‡ ä¸ªï¼‰    sample_size = min(100, len(python_results))    results_match = python_results[:sample_size] == numpy_results[:sample_size]    print(f\"ç»“æœä¸€è‡´æ€§ï¼ˆå‰{sample_size}ä¸ªï¼‰: {results_match}\")    except ImportError:    print(\"NumPyæœªå®‰è£…ï¼Œè·³è¿‡å‘é‡åŒ–æµ‹è¯•\")# 5. å†…å­˜ä¼˜åŒ–print(\"\\n5. å†…å­˜ä¼˜åŒ–:\")def memory_efficient_batch_divmod(data, chunk_size=1000):    \"\"\"å†…å­˜é«˜æ•ˆçš„æ‰¹é‡divmodå¤„ç†\"\"\"    for i in range(0, len(data), chunk_size):        chunk = data[i:i+chunk_size]        yield [divmod(a, b) for a, b in chunk]def process_large_dataset(data):    \"\"\"å¤„ç†å¤§æ•°æ®é›†\"\"\"    results = []    for chunk_results in memory_efficient_batch_divmod(data, 1000):        results.extend(chunk_results)    return results# æµ‹è¯•å†…å­˜ä¼˜åŒ–large_data = [(i, 7) for i in range(10000)]# æ ‡å‡†æ–¹æ³•start = time.time()standard_results = [divmod(a, b) for a, b in large_data]standard_time = time.time() - start# å†…å­˜ä¼˜åŒ–æ–¹æ³•start = time.time()optimized_results = process_large_dataset(large_data)optimized_time = time.time() - startprint(f\"å†…å­˜ä¼˜åŒ–æµ‹è¯•:\")print(f\"æ•°æ®é‡: {len(large_data)}\")print(f\"æ ‡å‡†æ–¹æ³•: {standard_time:.6f}ç§’\")print(f\"ä¼˜åŒ–æ–¹æ³•: {optimized_time:.6f}ç§’\")print(f\"ç»“æœä¸€è‡´: {standard_results == optimized_results}\")print(f\"å†…å­˜ä¼˜åŒ–æ–¹æ³•é€‚ç”¨äºè¶…å¤§æ•°æ®é›†ï¼Œå¯ä»¥å‡å°‘å†…å­˜å³°å€¼ä½¿ç”¨\")print(\"\\næ€§èƒ½ä¼˜åŒ–æ€»ç»“:\")print(\"1. å¯¹äºæ‰¹é‡æ“ä½œï¼Œåˆ—è¡¨æ¨å¯¼å¼é€šå¸¸æœ€å¿«\")print(\"2. é‡å¤è®¡ç®—åœºæ™¯ä¸‹ï¼Œç¼“å­˜å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½\")print(\"3. ç‰¹æ®Šæƒ…å†µçš„å¿«é€Ÿè·¯å¾„å¯ä»¥é¿å…ä¸å¿…è¦çš„è®¡ç®—\")print(\"4. NumPyå‘é‡åŒ–æ“ä½œå¯¹å¤§æ•°ç»„æœ‰æ˜¾è‘—æ€§èƒ½ä¼˜åŠ¿\")print(\"5. å¯¹äºè¶…å¤§æ•°æ®é›†ï¼Œè€ƒè™‘åˆ†å—å¤„ç†ä»¥ä¼˜åŒ–å†…å­˜ä½¿ç”¨\")print(\"6. åœ¨æ€§èƒ½å…³é”®çš„ä»£ç ä¸­ï¼Œæµ‹è¯•ä¸åŒæ–¹æ³•çš„å®é™…æ€§èƒ½\")ğŸ“š ç›¸å…³å‡½æ•°å’Œæ¨¡å—ç›¸å…³å†…ç½®å‡½æ•°  abs() - ç»å¯¹å€¼å‡½æ•°  round() - æ•°å­—å››èˆäº”å…¥å‡½æ•°  pow() - å¹‚è¿ç®—å‡½æ•°  int() - æ•´æ•°è½¬æ¢å‡½æ•°  float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•°  min() - æœ€å°å€¼å‡½æ•°  max() - æœ€å¤§å€¼å‡½æ•°ç›¸å…³æ ‡å‡†åº“æ¨¡å—  math - æ•°å­¦å‡½æ•°ï¼ˆåŒ…æ‹¬gcd, lcmç­‰ï¼‰  decimal - åè¿›åˆ¶æµ®ç‚¹è¿ç®—  fractions - åˆ†æ•°è¿ç®—  operator - å‡½æ•°å½¢å¼çš„è¿ç®—ç¬¦  itertools - è¿­ä»£å·¥å…·ç›¸å…³ç¬¬ä¸‰æ–¹åº“  numpy - æ•°å€¼è®¡ç®—ï¼ˆåŒ…æ‹¬å‘é‡åŒ–çš„é™¤æ³•å’Œå–æ¨¡ï¼‰  pandas - æ•°æ®åˆ†æï¼ˆåŒ…æ‹¬æ—¶é—´åºåˆ—çš„é™¤æ³•è¿ç®—ï¼‰  sympy - ç¬¦å·æ•°å­¦è®¡ç®—ğŸ”— æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - divmod()  æ¬§å‡ é‡Œå¾—é™¤æ³•  æ¨¡è¿ç®—  æ¬§å‡ é‡Œå¾—ç®—æ³•  æ—¶é—´å¤æ‚åº¦åˆ†æğŸ·ï¸ æ ‡ç­¾æ•°å­¦è¿ç®— é™¤æ³• å–æ¨¡ å•†å’Œä½™æ•° ç®—æ³• æ€§èƒ½ä¼˜åŒ– æ•°å€¼è®¡ç®—æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ",
        "url": "/docs/builtins/divmod/",
        "category": "builtins",
        "tags": ["æ•°å­¦è¿ç®—","é™¤æ³•","å–æ¨¡","å•†å’Œä½™æ•°"]
      }
      
    
  
    
      ,
      {
        "title": "å°è£…",
        "content": "å°è£…æ¦‚è¿°å°è£…æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå°†æ•°æ®ï¼ˆå±æ€§ï¼‰å’Œè¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰åŒ…è£…åˆ°ç±»å¯¹è±¡ä¸­ï¼Œå¹¶æ§åˆ¶å¯¹è¿™äº›æ•°æ®çš„è®¿é—®ã€‚é€šè¿‡å°è£…ï¼Œæˆ‘ä»¬å¯ä»¥éšè—å¯¹è±¡çš„å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œåªæš´éœ²å¿…è¦çš„æ¥å£ï¼Œä»è€Œæé«˜ä»£ç çš„å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§ã€‚å­¦ä¹ ç›®æ ‡é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†èƒ½å¤Ÿï¼š  ç†è§£å°è£…çš„åŸºæœ¬æ¦‚å¿µå’Œé‡è¦æ€§  æŒæ¡Pythonä¸­çš„è®¿é—®æ§åˆ¶æœºåˆ¶  å­¦ä¼šä½¿ç”¨ç§æœ‰å±æ€§å’Œæ–¹æ³•  ç†Ÿç»ƒä½¿ç”¨propertyè£…é¥°å™¨  äº†è§£getterå’Œsetteræ–¹æ³•çš„è®¾è®¡  èƒ½å¤Ÿè®¾è®¡è‰¯å¥½å°è£…çš„ç±»  ç†è§£å°è£…åœ¨å®é™…å¼€å‘ä¸­çš„åº”ç”¨å‰ç½®çŸ¥è¯†  Pythonç±»çš„å®šä¹‰å’Œå®ä¾‹åŒ–  å®ä¾‹å±æ€§å’Œæ–¹æ³•çš„ä½¿ç”¨  è£…é¥°å™¨çš„åŸºæœ¬æ¦‚å¿µ  é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€è¯¦ç»†å†…å®¹å°è£…çš„åŸºæœ¬æ¦‚å¿µå°è£…çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€éšè—èµ·æ¥ï¼Œåªé€šè¿‡å…¬å…±æ¥å£ä¸å¤–ç•Œäº¤äº’ã€‚è¿™æ ·å¯ä»¥ï¼š  ä¿æŠ¤æ•°æ®å®Œæ•´æ€§ï¼šé˜²æ­¢å¤–éƒ¨ä»£ç ç›´æ¥ä¿®æ”¹å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€  éšè—å®ç°ç»†èŠ‚ï¼šå¤–éƒ¨ä»£ç ä¸éœ€è¦äº†è§£å†…éƒ¨å®ç°  æä¾›ç»Ÿä¸€æ¥å£ï¼šé€šè¿‡æ–¹æ³•æ§åˆ¶å¯¹å±æ€§çš„è®¿é—®  ä¾¿äºç»´æŠ¤å’Œæ‰©å±•ï¼šå†…éƒ¨å®ç°çš„æ”¹å˜ä¸å½±å“å¤–éƒ¨ä»£ç Pythonä¸­çš„è®¿é—®æ§åˆ¶Pythonä½¿ç”¨å‘½åçº¦å®šæ¥å®ç°è®¿é—®æ§åˆ¶ï¼šclass Person:    def __init__(self, name, age):        self.name = name           # å…¬æœ‰å±æ€§        self._age = age           # å—ä¿æŠ¤å±æ€§ï¼ˆçº¦å®šï¼‰        self.__id = 12345         # ç§æœ‰å±æ€§        def get_info(self):           # å…¬æœ‰æ–¹æ³•        return f\"{self.name}, {self._age}å²\"        def _internal_method(self):   # å—ä¿æŠ¤æ–¹æ³•ï¼ˆçº¦å®šï¼‰        return \"å†…éƒ¨æ–¹æ³•\"        def __private_method(self):   # ç§æœ‰æ–¹æ³•        return \"ç§æœ‰æ–¹æ³•\"        def access_private(self):        # ç±»å†…éƒ¨å¯ä»¥è®¿é—®ç§æœ‰æˆå‘˜        return self.__private_method()# ä½¿ç”¨ç¤ºä¾‹person = Person(\"å¼ ä¸‰\", 25)# å…¬æœ‰å±æ€§å’Œæ–¹æ³•å¯ä»¥ç›´æ¥è®¿é—®print(person.name)          # å¼ ä¸‰print(person.get_info())    # å¼ ä¸‰, 25å²# å—ä¿æŠ¤å±æ€§å¯ä»¥è®¿é—®ï¼Œä½†ä¸å»ºè®®print(person._age)          # 25# ç§æœ‰å±æ€§æ— æ³•ç›´æ¥è®¿é—®# print(person.__id)        # AttributeError# ä½†å¯ä»¥é€šè¿‡åç§°ä¿®é¥°è®¿é—®ï¼ˆä¸æ¨èï¼‰print(person._Person__id)   # 12345# é€šè¿‡å…¬æœ‰æ–¹æ³•è®¿é—®ç§æœ‰æ–¹æ³•print(person.access_private())  # ç§æœ‰æ–¹æ³•ä½¿ç”¨propertyå®ç°å±æ€§å°è£…propertyè£…é¥°å™¨æ˜¯Pythonä¸­å®ç°å±æ€§å°è£…çš„ä¸»è¦å·¥å…·ï¼šåŸºæœ¬ç”¨æ³•class Circle:    def __init__(self, radius):        self._radius = radius  # ä½¿ç”¨å—ä¿æŠ¤å±æ€§å­˜å‚¨å®é™…å€¼        @property    def radius(self):        \"\"\"è·å–åŠå¾„\"\"\"        print(\"æ­£åœ¨è·å–åŠå¾„\")        return self._radius        @radius.setter    def radius(self, value):        \"\"\"è®¾ç½®åŠå¾„\"\"\"        if value &lt;= 0:            raise ValueError(\"åŠå¾„å¿…é¡»å¤§äº0\")        print(f\"æ­£åœ¨è®¾ç½®åŠå¾„ä¸º {value}\")        self._radius = value        @radius.deleter    def radius(self):        \"\"\"åˆ é™¤åŠå¾„\"\"\"        print(\"æ­£åœ¨åˆ é™¤åŠå¾„\")        del self._radius        @property    def area(self):        \"\"\"è®¡ç®—é¢ç§¯ï¼ˆåªè¯»å±æ€§ï¼‰\"\"\"        return 3.14159 * self._radius ** 2        @property    def diameter(self):        \"\"\"è®¡ç®—ç›´å¾„ï¼ˆåªè¯»å±æ€§ï¼‰\"\"\"        return 2 * self._radius# ä½¿ç”¨ç¤ºä¾‹circle = Circle(5)# è·å–å±æ€§print(f\"åŠå¾„: {circle.radius}\")     # æ­£åœ¨è·å–åŠå¾„\\nåŠå¾„: 5print(f\"é¢ç§¯: {circle.area:.2f}\")   # é¢ç§¯: 78.54print(f\"ç›´å¾„: {circle.diameter}\")   # ç›´å¾„: 10# è®¾ç½®å±æ€§circle.radius = 3                   # æ­£åœ¨è®¾ç½®åŠå¾„ä¸º 3print(f\"æ–°åŠå¾„: {circle.radius}\")   # æ­£åœ¨è·å–åŠå¾„\\næ–°åŠå¾„: 3# å°è¯•è®¾ç½®æ— æ•ˆå€¼try:    circle.radius = -1              # ValueError: åŠå¾„å¿…é¡»å¤§äº0except ValueError as e:    print(f\"é”™è¯¯: {e}\")# åˆ é™¤å±æ€§del circle.radius                   # æ­£åœ¨åˆ é™¤åŠå¾„ä½¿ç”¨property()å‡½æ•°é™¤äº†è£…é¥°å™¨è¯­æ³•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨property()å‡½æ•°ï¼šclass Temperature:    def __init__(self, celsius=0):        self._celsius = celsius        def get_celsius(self):        \"\"\"è·å–æ‘„æ°æ¸©åº¦\"\"\"        return self._celsius        def set_celsius(self, value):        \"\"\"è®¾ç½®æ‘„æ°æ¸©åº¦\"\"\"        if value &lt; -273.15:            raise ValueError(\"æ¸©åº¦ä¸èƒ½ä½äºç»å¯¹é›¶åº¦\")        self._celsius = value        def del_celsius(self):        \"\"\"åˆ é™¤æ¸©åº¦\"\"\"        del self._celsius        def get_fahrenheit(self):        \"\"\"è·å–åæ°æ¸©åº¦\"\"\"        return self._celsius * 9/5 + 32        def set_fahrenheit(self, value):        \"\"\"è®¾ç½®åæ°æ¸©åº¦\"\"\"        self._celsius = (value - 32) * 5/9        # ä½¿ç”¨property()å‡½æ•°å®šä¹‰å±æ€§    celsius = property(get_celsius, set_celsius, del_celsius, \"æ‘„æ°æ¸©åº¦\")    fahrenheit = property(get_fahrenheit, set_fahrenheit, None, \"åæ°æ¸©åº¦\")# ä½¿ç”¨ç¤ºä¾‹temp = Temperature(25)print(f\"æ‘„æ°æ¸©åº¦: {temp.celsius}Â°C\")      # 25Â°Cprint(f\"åæ°æ¸©åº¦: {temp.fahrenheit}Â°F\")   # 77.0Â°Ftemp.fahrenheit = 100print(f\"æ‘„æ°æ¸©åº¦: {temp.celsius:.1f}Â°C\")   # 37.8Â°Cæ•°æ®éªŒè¯å’Œå¤„ç†å°è£…çš„ä¸€ä¸ªé‡è¦ä½œç”¨æ˜¯åœ¨è®¾ç½®å±æ€§æ—¶è¿›è¡Œæ•°æ®éªŒè¯ï¼šclass BankAccount:    def __init__(self, account_number, initial_balance=0):        self._account_number = account_number        self._balance = 0        self.balance = initial_balance  # ä½¿ç”¨setterè¿›è¡ŒéªŒè¯        self._transaction_history = []        @property    def account_number(self):        \"\"\"è´¦æˆ·å·ç ï¼ˆåªè¯»ï¼‰\"\"\"        return self._account_number        @property    def balance(self):        \"\"\"è´¦æˆ·ä½™é¢\"\"\"        return self._balance        @balance.setter    def balance(self, amount):        \"\"\"è®¾ç½®è´¦æˆ·ä½™é¢\"\"\"        if not isinstance(amount, (int, float)):            raise TypeError(\"ä½™é¢å¿…é¡»æ˜¯æ•°å­—\")        if amount &lt; 0:            raise ValueError(\"ä½™é¢ä¸èƒ½ä¸ºè´Ÿæ•°\")                old_balance = getattr(self, '_balance', 0)        self._balance = amount                # è®°å½•äº¤æ˜“å†å²        if hasattr(self, '_transaction_history'):            change = amount - old_balance            if change != 0:                self._add_transaction(f\"ä½™é¢å˜æ›´: {change:+.2f}\")        @property    def transaction_history(self):        \"\"\"äº¤æ˜“å†å²ï¼ˆåªè¯»ï¼‰\"\"\"        return self._transaction_history.copy()  # è¿”å›å‰¯æœ¬ï¼Œé˜²æ­¢å¤–éƒ¨ä¿®æ”¹        def deposit(self, amount):        \"\"\"å­˜æ¬¾\"\"\"        if amount &lt;= 0:            raise ValueError(\"å­˜æ¬¾é‡‘é¢å¿…é¡»å¤§äº0\")                self._balance += amount        self._add_transaction(f\"å­˜æ¬¾: +{amount:.2f}\")        return self._balance        def withdraw(self, amount):        \"\"\"å–æ¬¾\"\"\"        if amount &lt;= 0:            raise ValueError(\"å–æ¬¾é‡‘é¢å¿…é¡»å¤§äº0\")        if amount &gt; self._balance:            raise ValueError(\"ä½™é¢ä¸è¶³\")                self._balance -= amount        self._add_transaction(f\"å–æ¬¾: -{amount:.2f}\")        return self._balance        def _add_transaction(self, description):        \"\"\"æ·»åŠ äº¤æ˜“è®°å½•ï¼ˆç§æœ‰æ–¹æ³•ï¼‰\"\"\"        from datetime import datetime        timestamp = datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\")        self._transaction_history.append(f\"[{timestamp}] {description}\")        def get_statement(self):        \"\"\"è·å–è´¦æˆ·å¯¹è´¦å•\"\"\"        statement = f\"è´¦æˆ·: {self.account_number}\\n\"        statement += f\"å½“å‰ä½™é¢: Â¥{self.balance:.2f}\\n\"        statement += \"äº¤æ˜“å†å²:\\n\"        for transaction in self.transaction_history:            statement += f\"  {transaction}\\n\"        return statement# ä½¿ç”¨ç¤ºä¾‹account = BankAccount(\"123456789\", 1000)print(f\"è´¦æˆ·å·ç : {account.account_number}\")print(f\"åˆå§‹ä½™é¢: Â¥{account.balance}\")# è¿›è¡Œä¸€äº›æ“ä½œaccount.deposit(500)account.withdraw(200)account.deposit(100)print(f\"\\næœ€ç»ˆä½™é¢: Â¥{account.balance}\")print(\"\\nå¯¹è´¦å•:\")print(account.get_statement())# å°è¯•éæ³•æ“ä½œtry:    account.withdraw(2000)  # ä½™é¢ä¸è¶³except ValueError as e:    print(f\"é”™è¯¯: {e}\")try:    account.balance = -100  # è´Ÿæ•°ä½™é¢except ValueError as e:    print(f\"é”™è¯¯: {e}\")åªè¯»å’Œåªå†™å±æ€§æœ‰æ—¶æˆ‘ä»¬éœ€è¦åˆ›å»ºåªè¯»æˆ–åªå†™çš„å±æ€§ï¼šclass User:    def __init__(self, username, password):        self._username = username        self._password_hash = self._hash_password(password)        self._login_count = 0        self._last_login = None        @property    def username(self):        \"\"\"ç”¨æˆ·åï¼ˆåªè¯»ï¼‰\"\"\"        return self._username        @property    def login_count(self):        \"\"\"ç™»å½•æ¬¡æ•°ï¼ˆåªè¯»ï¼‰\"\"\"        return self._login_count        @property    def last_login(self):        \"\"\"æœ€åç™»å½•æ—¶é—´ï¼ˆåªè¯»ï¼‰\"\"\"        return self._last_login        @property    def password(self):        \"\"\"å¯†ç ï¼ˆåªå†™ï¼Œä¸èƒ½è¯»å–ï¼‰\"\"\"        raise AttributeError(\"å¯†ç ä¸å¯è¯»å–\")        @password.setter    def password(self, new_password):        \"\"\"è®¾ç½®æ–°å¯†ç \"\"\"        if len(new_password) &lt; 6:            raise ValueError(\"å¯†ç é•¿åº¦è‡³å°‘6ä½\")        self._password_hash = self._hash_password(new_password)        def _hash_password(self, password):        \"\"\"å¯†ç å“ˆå¸Œï¼ˆç§æœ‰æ–¹æ³•ï¼‰\"\"\"        # ç®€åŒ–çš„å“ˆå¸Œå®ç°ï¼Œå®é™…åº”ç”¨ä¸­åº”ä½¿ç”¨æ›´å®‰å…¨çš„æ–¹æ³•        return hash(password)        def verify_password(self, password):        \"\"\"éªŒè¯å¯†ç \"\"\"        return self._hash_password(password) == self._password_hash        def login(self, password):        \"\"\"ç”¨æˆ·ç™»å½•\"\"\"        if self.verify_password(password):            self._login_count += 1            from datetime import datetime            self._last_login = datetime.now()            return True        return False# ä½¿ç”¨ç¤ºä¾‹user = User(\"alice\", \"secret123\")print(f\"ç”¨æˆ·å: {user.username}\")        # aliceprint(f\"ç™»å½•æ¬¡æ•°: {user.login_count}\")   # 0# å°è¯•è¯»å–å¯†ç try:    print(user.password)  # AttributeError: å¯†ç ä¸å¯è¯»å–except AttributeError as e:    print(f\"é”™è¯¯: {e}\")# ä¿®æ”¹å¯†ç user.password = \"newpassword123\"print(\"å¯†ç å·²æ›´æ–°\")# ç™»å½•if user.login(\"newpassword123\"):    print(\"ç™»å½•æˆåŠŸ\")    print(f\"ç™»å½•æ¬¡æ•°: {user.login_count}\")    print(f\"æœ€åç™»å½•: {user.last_login}\")è®¡ç®—å±æ€§ä½¿ç”¨propertyå¯ä»¥åˆ›å»ºåŸºäºå…¶ä»–å±æ€§è®¡ç®—çš„åŠ¨æ€å±æ€§ï¼šclass Rectangle:    def __init__(self, width, height):        self._width = width        self._height = height        @property    def width(self):        return self._width        @width.setter    def width(self, value):        if value &lt;= 0:            raise ValueError(\"å®½åº¦å¿…é¡»å¤§äº0\")        self._width = value        @property    def height(self):        return self._height        @height.setter    def height(self, value):        if value &lt;= 0:            raise ValueError(\"é«˜åº¦å¿…é¡»å¤§äº0\")        self._height = value        @property    def area(self):        \"\"\"é¢ç§¯ï¼ˆè®¡ç®—å±æ€§ï¼‰\"\"\"        return self._width * self._height        @property    def perimeter(self):        \"\"\"å‘¨é•¿ï¼ˆè®¡ç®—å±æ€§ï¼‰\"\"\"        return 2 * (self._width + self._height)        @property    def diagonal(self):        \"\"\"å¯¹è§’çº¿é•¿åº¦ï¼ˆè®¡ç®—å±æ€§ï¼‰\"\"\"        return (self._width ** 2 + self._height ** 2) ** 0.5        @property    def is_square(self):        \"\"\"æ˜¯å¦ä¸ºæ­£æ–¹å½¢ï¼ˆè®¡ç®—å±æ€§ï¼‰\"\"\"        return self._width == self._height        def scale(self, factor):        \"\"\"æŒ‰æ¯”ä¾‹ç¼©æ”¾\"\"\"        self._width *= factor        self._height *= factor        def __str__(self):        return f\"Rectangle({self._width}x{self._height})\"# ä½¿ç”¨ç¤ºä¾‹rect = Rectangle(4, 3)print(f\"çŸ©å½¢: {rect}\")print(f\"é¢ç§¯: {rect.area}\")print(f\"å‘¨é•¿: {rect.perimeter}\")print(f\"å¯¹è§’çº¿: {rect.diagonal:.2f}\")print(f\"æ˜¯å¦ä¸ºæ­£æ–¹å½¢: {rect.is_square}\")# ä¿®æ”¹å°ºå¯¸rect.width = 5print(f\"\\nä¿®æ”¹å®½åº¦å:\")print(f\"çŸ©å½¢: {rect}\")print(f\"é¢ç§¯: {rect.area}\")print(f\"æ˜¯å¦ä¸ºæ­£æ–¹å½¢: {rect.is_square}\")# ç¼©æ”¾rect.scale(2)print(f\"\\nç¼©æ”¾2å€å:\")print(f\"çŸ©å½¢: {rect}\")print(f\"é¢ç§¯: {rect.area}\")å®é™…åº”ç”¨æ¡ˆä¾‹æ¡ˆä¾‹1ï¼šé…ç½®ç®¡ç†ç±»import jsonimport osfrom typing import Any, Dictclass ConfigManager:    \"\"\"é…ç½®ç®¡ç†ç±»ï¼Œæ¼”ç¤ºå°è£…çš„å®é™…åº”ç”¨\"\"\"        def __init__(self, config_file: str):        self._config_file = config_file        self._config_data = {}        self._is_modified = False        self._load_config()        @property    def config_file(self) -&gt; str:        \"\"\"é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆåªè¯»ï¼‰\"\"\"        return self._config_file        @property    def is_modified(self) -&gt; bool:        \"\"\"é…ç½®æ˜¯å¦å·²ä¿®æ”¹ï¼ˆåªè¯»ï¼‰\"\"\"        return self._is_modified        @property    def config_data(self) -&gt; Dict[str, Any]:        \"\"\"é…ç½®æ•°æ®ï¼ˆåªè¯»å‰¯æœ¬ï¼‰\"\"\"        return self._config_data.copy()        def get(self, key: str, default: Any = None) -&gt; Any:        \"\"\"è·å–é…ç½®é¡¹\"\"\"        return self._config_data.get(key, default)        def set(self, key: str, value: Any) -&gt; None:        \"\"\"è®¾ç½®é…ç½®é¡¹\"\"\"        if not isinstance(key, str) or not key.strip():            raise ValueError(\"é…ç½®é”®å¿…é¡»æ˜¯éç©ºå­—ç¬¦ä¸²\")                old_value = self._config_data.get(key)        if old_value != value:            self._config_data[key] = value            self._is_modified = True            print(f\"é…ç½®é¡¹ '{key}' å·²æ›´æ–°: {old_value} -&gt; {value}\")        def delete(self, key: str) -&gt; bool:        \"\"\"åˆ é™¤é…ç½®é¡¹\"\"\"        if key in self._config_data:            del self._config_data[key]            self._is_modified = True            print(f\"é…ç½®é¡¹ '{key}' å·²åˆ é™¤\")            return True        return False        def save(self) -&gt; bool:        \"\"\"ä¿å­˜é…ç½®åˆ°æ–‡ä»¶\"\"\"        try:            with open(self._config_file, 'w', encoding='utf-8') as f:                json.dump(self._config_data, f, indent=2, ensure_ascii=False)            self._is_modified = False            print(f\"é…ç½®å·²ä¿å­˜åˆ° {self._config_file}\")            return True        except Exception as e:            print(f\"ä¿å­˜é…ç½®å¤±è´¥: {e}\")            return False        def reload(self) -&gt; bool:        \"\"\"é‡æ–°åŠ è½½é…ç½®\"\"\"        try:            self._load_config()            self._is_modified = False            print(\"é…ç½®å·²é‡æ–°åŠ è½½\")            return True        except Exception as e:            print(f\"é‡æ–°åŠ è½½é…ç½®å¤±è´¥: {e}\")            return False        def _load_config(self) -&gt; None:        \"\"\"åŠ è½½é…ç½®æ–‡ä»¶ï¼ˆç§æœ‰æ–¹æ³•ï¼‰\"\"\"        if os.path.exists(self._config_file):            try:                with open(self._config_file, 'r', encoding='utf-8') as f:                    self._config_data = json.load(f)            except Exception as e:                print(f\"åŠ è½½é…ç½®æ–‡ä»¶å¤±è´¥: {e}\")                self._config_data = {}        else:            self._config_data = {}            print(f\"é…ç½®æ–‡ä»¶ {self._config_file} ä¸å­˜åœ¨ï¼Œä½¿ç”¨é»˜è®¤é…ç½®\")        def __enter__(self):        \"\"\"ä¸Šä¸‹æ–‡ç®¡ç†å™¨å…¥å£\"\"\"        return self        def __exit__(self, exc_type, exc_val, exc_tb):        \"\"\"ä¸Šä¸‹æ–‡ç®¡ç†å™¨å‡ºå£ï¼Œè‡ªåŠ¨ä¿å­˜ä¿®æ”¹\"\"\"        if self._is_modified:            self.save()        def __str__(self):        return f\"ConfigManager({self._config_file}, {len(self._config_data)} items)\"# ä½¿ç”¨ç¤ºä¾‹with ConfigManager(\"app_config.json\") as config:    # è®¾ç½®é…ç½®é¡¹    config.set(\"database_url\", \"sqlite:///app.db\")    config.set(\"debug_mode\", True)    config.set(\"max_connections\", 100)        # è·å–é…ç½®é¡¹    print(f\"æ•°æ®åº“URL: {config.get('database_url')}\")    print(f\"è°ƒè¯•æ¨¡å¼: {config.get('debug_mode')}\")    print(f\"æœ€å¤§è¿æ¥æ•°: {config.get('max_connections')}\")        # æ£€æŸ¥ä¿®æ”¹çŠ¶æ€    print(f\"é…ç½®æ˜¯å¦å·²ä¿®æ”¹: {config.is_modified}\")        # åˆ é™¤é…ç½®é¡¹    config.delete(\"debug_mode\")        print(f\"æœ€ç»ˆé…ç½®: {config.config_data}\")# é€€å‡ºä¸Šä¸‹æ–‡æ—¶è‡ªåŠ¨ä¿å­˜æ¡ˆä¾‹2ï¼šæ•°æ®éªŒè¯ç±»from datetime import datetime, datefrom typing import Union, Optionalimport reclass Person:    \"\"\"äººå‘˜ä¿¡æ¯ç±»ï¼Œæ¼”ç¤ºæ•°æ®éªŒè¯å’Œå°è£…\"\"\"        def __init__(self, name: str, email: str, birth_date: Union[str, date]):        # ä½¿ç”¨setterè¿›è¡Œåˆå§‹åŒ–ï¼Œç¡®ä¿æ•°æ®éªŒè¯        self.name = name        self.email = email        self.birth_date = birth_date        self._phone = None        self._address = None        @property    def name(self) -&gt; str:        \"\"\"å§“å\"\"\"        return self._name        @name.setter    def name(self, value: str) -&gt; None:        \"\"\"è®¾ç½®å§“å\"\"\"        if not isinstance(value, str):            raise TypeError(\"å§“åå¿…é¡»æ˜¯å­—ç¬¦ä¸²\")                value = value.strip()        if not value:            raise ValueError(\"å§“åä¸èƒ½ä¸ºç©º\")                if len(value) &lt; 2 or len(value) &gt; 50:            raise ValueError(\"å§“åé•¿åº¦å¿…é¡»åœ¨2-50ä¸ªå­—ç¬¦ä¹‹é—´\")                # æ£€æŸ¥æ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦        if not re.match(r'^[\\u4e00-\\u9fa5a-zA-Z\\s]+$', value):            raise ValueError(\"å§“ååªèƒ½åŒ…å«ä¸­æ–‡ã€è‹±æ–‡å­—æ¯å’Œç©ºæ ¼\")                self._name = value        @property    def email(self) -&gt; str:        \"\"\"é‚®ç®±åœ°å€\"\"\"        return self._email        @email.setter    def email(self, value: str) -&gt; None:        \"\"\"è®¾ç½®é‚®ç®±åœ°å€\"\"\"        if not isinstance(value, str):            raise TypeError(\"é‚®ç®±åœ°å€å¿…é¡»æ˜¯å­—ç¬¦ä¸²\")                value = value.strip().lower()        if not value:            raise ValueError(\"é‚®ç®±åœ°å€ä¸èƒ½ä¸ºç©º\")                # é‚®ç®±æ ¼å¼éªŒè¯        email_pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$'        if not re.match(email_pattern, value):            raise ValueError(\"é‚®ç®±åœ°å€æ ¼å¼æ— æ•ˆ\")                self._email = value        @property    def birth_date(self) -&gt; date:        \"\"\"å‡ºç”Ÿæ—¥æœŸ\"\"\"        return self._birth_date        @birth_date.setter    def birth_date(self, value: Union[str, date]) -&gt; None:        \"\"\"è®¾ç½®å‡ºç”Ÿæ—¥æœŸ\"\"\"        if isinstance(value, str):            try:                # å°è¯•è§£ææ—¥æœŸå­—ç¬¦ä¸²                value = datetime.strptime(value, '%Y-%m-%d').date()            except ValueError:                raise ValueError(\"æ—¥æœŸæ ¼å¼æ— æ•ˆï¼Œè¯·ä½¿ç”¨ YYYY-MM-DD æ ¼å¼\")                if not isinstance(value, date):            raise TypeError(\"å‡ºç”Ÿæ—¥æœŸå¿…é¡»æ˜¯æ—¥æœŸå¯¹è±¡æˆ–æ—¥æœŸå­—ç¬¦ä¸²\")                # æ£€æŸ¥æ—¥æœŸåˆç†æ€§        today = date.today()        if value &gt; today:            raise ValueError(\"å‡ºç”Ÿæ—¥æœŸä¸èƒ½æ˜¯æœªæ¥æ—¥æœŸ\")                # æ£€æŸ¥å¹´é¾„æ˜¯å¦åˆç†ï¼ˆå‡è®¾æœ€å¤§150å²ï¼‰        age = today.year - value.year        if age &gt; 150:            raise ValueError(\"å¹´é¾„ä¸èƒ½è¶…è¿‡150å²\")                self._birth_date = value        @property    def age(self) -&gt; int:        \"\"\"å¹´é¾„ï¼ˆè®¡ç®—å±æ€§ï¼‰\"\"\"        today = date.today()        age = today.year - self._birth_date.year                # å¦‚æœä»Šå¹´çš„ç”Ÿæ—¥è¿˜æ²¡åˆ°ï¼Œå¹´é¾„å‡1        if today.month &lt; self._birth_date.month or \\           (today.month == self._birth_date.month and today.day &lt; self._birth_date.day):            age -= 1                return age        @property    def phone(self) -&gt; Optional[str]:        \"\"\"ç”µè¯å·ç \"\"\"        return self._phone        @phone.setter    def phone(self, value: Optional[str]) -&gt; None:        \"\"\"è®¾ç½®ç”µè¯å·ç \"\"\"        if value is None:            self._phone = None            return                if not isinstance(value, str):            raise TypeError(\"ç”µè¯å·ç å¿…é¡»æ˜¯å­—ç¬¦ä¸²\")                # æ¸…ç†ç”µè¯å·ç ï¼ˆç§»é™¤ç©ºæ ¼ã€æ¨ªçº¿ç­‰ï¼‰        cleaned = re.sub(r'[\\s-()]', '', value)                # ä¸­å›½æ‰‹æœºå·ç éªŒè¯        if re.match(r'^1[3-9]\\d{9}$', cleaned):            self._phone = cleaned        # ä¸­å›½å›ºå®šç”µè¯éªŒè¯        elif re.match(r'^0\\d{2,3}-?\\d{7,8}$', value):            self._phone = value        else:            raise ValueError(\"ç”µè¯å·ç æ ¼å¼æ— æ•ˆ\")        @property    def address(self) -&gt; Optional[str]:        \"\"\"åœ°å€\"\"\"        return self._address        @address.setter    def address(self, value: Optional[str]) -&gt; None:        \"\"\"è®¾ç½®åœ°å€\"\"\"        if value is None:            self._address = None            return                if not isinstance(value, str):            raise TypeError(\"åœ°å€å¿…é¡»æ˜¯å­—ç¬¦ä¸²\")                value = value.strip()        if len(value) &gt; 200:            raise ValueError(\"åœ°å€é•¿åº¦ä¸èƒ½è¶…è¿‡200ä¸ªå­—ç¬¦\")                self._address = value if value else None        @property    def is_adult(self) -&gt; bool:        \"\"\"æ˜¯å¦æˆå¹´ï¼ˆè®¡ç®—å±æ€§ï¼‰\"\"\"        return self.age &gt;= 18        def get_info(self) -&gt; dict:        \"\"\"è·å–å®Œæ•´ä¿¡æ¯\"\"\"        return {            'name': self.name,            'email': self.email,            'birth_date': self.birth_date.isoformat(),            'age': self.age,            'phone': self.phone,            'address': self.address,            'is_adult': self.is_adult        }        def __str__(self):        return f\"Person(name='{self.name}', age={self.age}, email='{self.email}')\"        def __repr__(self):        return self.__str__()# ä½¿ç”¨ç¤ºä¾‹try:    # åˆ›å»ºäººå‘˜å¯¹è±¡    person = Person(        name=\"å¼ ä¸‰\",        email=\"zhangsan@example.com\",        birth_date=\"1990-05-15\"    )        print(f\"åˆ›å»ºæˆåŠŸ: {person}\")    print(f\"å¹´é¾„: {person.age}\")    print(f\"æ˜¯å¦æˆå¹´: {person.is_adult}\")        # è®¾ç½®å¯é€‰ä¿¡æ¯    person.phone = \"13812345678\"    person.address = \"åŒ—äº¬å¸‚æœé˜³åŒºæŸæŸè¡—é“123å·\"        print(f\"\\nå®Œæ•´ä¿¡æ¯:\")    for key, value in person.get_info().items():        print(f\"  {key}: {value}\")        # æµ‹è¯•æ•°æ®éªŒè¯    print(\"\\næµ‹è¯•æ•°æ®éªŒè¯:\")        # æ— æ•ˆé‚®ç®±    try:        person.email = \"invalid-email\"    except ValueError as e:        print(f\"é‚®ç®±éªŒè¯: {e}\")        # æ— æ•ˆç”µè¯    try:        person.phone = \"123\"    except ValueError as e:        print(f\"ç”µè¯éªŒè¯: {e}\")        # æ— æ•ˆå§“å    try:        person.name = \"A\"    except ValueError as e:        print(f\"å§“åéªŒè¯: {e}\")        # æœªæ¥æ—¥æœŸ    try:        person.birth_date = \"2030-01-01\"    except ValueError as e:        print(f\"æ—¥æœŸéªŒè¯: {e}\")        except Exception as e:    print(f\"åˆ›å»ºå¤±è´¥: {e}\")æ³¨æ„äº‹é¡¹  é€‚åº¦å°è£…ï¼šä¸è¦è¿‡åº¦å°è£…ï¼Œç®€å•çš„å±æ€§ä¸ä¸€å®šéœ€è¦property  æ€§èƒ½è€ƒè™‘ï¼špropertyä¼šå¢åŠ ä¸€å®šçš„æ€§èƒ½å¼€é”€  æ–‡æ¡£è¯´æ˜ï¼šä¸ºpropertyæ·»åŠ é€‚å½“çš„æ–‡æ¡£å­—ç¬¦ä¸²  ä¸€è‡´æ€§ï¼šä¿æŒæ¥å£çš„ä¸€è‡´æ€§ï¼Œé¿å…æ··ç”¨ç›´æ¥å±æ€§å’Œproperty  é”™è¯¯å¤„ç†ï¼šåœ¨setterä¸­è¿›è¡Œé€‚å½“çš„é”™è¯¯å¤„ç†å’ŒéªŒè¯  å‘åå…¼å®¹ï¼šä¿®æ”¹ç°æœ‰å±æ€§ä¸ºpropertyæ—¶è¦è€ƒè™‘å‘åå…¼å®¹æ€§ç›¸å…³å†…å®¹  ç±»çš„å®šä¹‰ - å°è£…çš„åŸºç¡€  ç»§æ‰¿ - å°è£…åœ¨ç»§æ‰¿ä¸­çš„è¡¨ç°  å¤šæ€ - å°è£…ä¸å¤šæ€çš„ç»“åˆ  è£…é¥°å™¨ - propertyè£…é¥°å™¨çš„åŸç†æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ï¼špropertyè£…é¥°å™¨  ã€ŠEffective Pythonã€‹ä¸­å…³äºå°è£…çš„æœ€ä½³å®è·µ  é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ä¸­çš„å°è£…åŸåˆ™  Pythonæè¿°ç¬¦åè®®çš„æ·±å…¥ç†è§£",
        "url": "/docs/basics/encapsulation/",
        "category": "PythonåŸºç¡€",
        "tags": ["é¢å‘å¯¹è±¡","å°è£…","ç§æœ‰å±æ€§","property","è®¿é—®æ§åˆ¶"]
      }
      
    
  
    
      ,
      {
        "title": "enumæ¨¡å—ï¼šæšä¸¾ç±»å‹",
        "content": "enumæ¨¡å—ï¼šæšä¸¾ç±»å‹ğŸ“ æ¦‚è¿°Pythonçš„enumæ¨¡å—æä¾›äº†åˆ›å»ºæšä¸¾ç±»å‹çš„åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ç§å°†ç¬¦å·åç§°ç»‘å®šåˆ°å”¯ä¸€å¸¸é‡å€¼çš„ç±»ã€‚æšä¸¾ç±»å‹å¯ä»¥æ˜¾è‘—æé«˜ä»£ç çš„å¯è¯»æ€§ã€å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œç‰¹åˆ«é€‚ç”¨äºå¤„ç†æœ‰é™çš„ã€é¢„å®šä¹‰çš„é€‰é¡¹é›†ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  ç†è§£æšä¸¾ç±»å‹çš„æ¦‚å¿µå’Œä¼˜åŠ¿  æŒæ¡Enumå’ŒIntEnumçš„ä½¿ç”¨æ–¹æ³•  å­¦ä¼šä½¿ç”¨auto()å‡½æ•°è‡ªåŠ¨èµ‹å€¼  äº†è§£æšä¸¾æˆå‘˜çš„æ¯”è¾ƒå’Œåˆ«åæœºåˆ¶  æŒæ¡@uniqueè£…é¥°å™¨ç¡®ä¿å€¼çš„å”¯ä¸€æ€§ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºç¡€è¯­æ³•  ç±»å’Œå¯¹è±¡çš„æ¦‚å¿µ  è£…é¥°å™¨çš„åŸºæœ¬ä½¿ç”¨ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µæšä¸¾æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå®ƒåŒ…å«ä¸€ç»„å‘½åçš„å¸¸é‡ã€‚ä½¿ç”¨æšä¸¾çš„ä¸»è¦ä¼˜åŠ¿ï¼š  å¯è¯»æ€§ï¼šç”¨æœ‰æ„ä¹‰çš„åç§°ä»£æ›¿æ•°å­—æˆ–å­—ç¬¦ä¸²å¸¸é‡  å®‰å…¨æ€§ï¼šé™åˆ¶å˜é‡åªèƒ½å–æšä¸¾æˆå‘˜çš„å€¼  å¯ç»´æŠ¤æ€§ï¼šé›†ä¸­ç®¡ç†å¸¸é‡å€¼ï¼Œä¾¿äºä¿®æ”¹æ ¸å¿ƒç±»å’Œå‡½æ•°            ç±»/å‡½æ•°      è¯´æ˜                  Enum      åŸºç¡€æšä¸¾ç±»              IntEnum      æ•´æ•°æšä¸¾ç±»ï¼Œæ”¯æŒæ•°å€¼è¿ç®—              auto()      è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€å€¼              @unique      è£…é¥°å™¨ï¼Œç¡®ä¿æšä¸¾å€¼å”¯ä¸€      æšä¸¾æˆå‘˜å±æ€§            å±æ€§      ç±»å‹      è¯´æ˜                  name      str      æšä¸¾æˆå‘˜çš„åç§°              value      Any      æšä¸¾æˆå‘˜çš„å€¼      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•from enum import Enum# åˆ›å»ºåŸºæœ¬æšä¸¾class Color(Enum):    RED = 1    GREEN = 2    BLUE = 3# è®¿é—®æšä¸¾æˆå‘˜print(Color.RED)        # Color.REDprint(Color.RED.name)   # REDprint(Color.RED.value)  # 1# æšä¸¾è¿­ä»£print(\"æ‰€æœ‰é¢œè‰²:\")for color in Color:    print(f\"{color.name}: {color.value}\")å­—ç¬¦ä¸²å€¼æšä¸¾from enum import Enumclass Weekday(Enum):    MONDAY = \"Mon\"    TUESDAY = \"Tue\"    WEDNESDAY = \"Wed\"    THURSDAY = \"Thu\"    FRIDAY = \"Fri\"    SATURDAY = \"Sat\"    SUNDAY = \"Sun\"# ä½¿ç”¨å­—ç¬¦ä¸²å€¼today = Weekday.MONDAYprint(f\"ä»Šå¤©æ˜¯: {today.value}\")  # ä»Šå¤©æ˜¯: MonIntEnumçš„ä½¿ç”¨from enum import IntEnumclass Permission(IntEnum):    READ = 1    WRITE = 2    EXECUTE = 4# IntEnumæ”¯æŒæ•°å€¼è¿ç®—full_permission = Permission.READ | Permission.WRITE | Permission.EXECUTEprint(f\"å®Œæ•´æƒé™å€¼: {full_permission}\")  # å®Œæ•´æƒé™å€¼: 7# å¯ä»¥ä¸æ•´æ•°æ¯”è¾ƒprint(Permission.READ == 1)  # Trueprint(Permission.READ &lt; Permission.WRITE)  # Trueè‡ªåŠ¨èµ‹å€¼from enum import Enum, autoclass Shape(Enum):    CIRCLE = auto()    SQUARE = auto()    TRIANGLE = auto()    RECTANGLE = auto()# auto()è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€å€¼for shape in Shape:    print(f\"{shape.name}: {shape.value}\")# CIRCLE: 1# SQUARE: 2# TRIANGLE: 3# RECTANGLE: 4å”¯ä¸€æ€§æ£€æŸ¥from enum import Enum, unique@uniqueclass ErrorCode(Enum):    SUCCESS = 0    FILE_NOT_FOUND = 1    PERMISSION_DENIED = 2    NETWORK_ERROR = 3# å¦‚æœæœ‰é‡å¤å€¼ï¼Œ@uniqueä¼šæŠ›å‡ºValueErrorprint(\"æ‰€æœ‰é”™è¯¯ç :\")for code in ErrorCode:    print(f\"{code.name}: {code.value}\")æšä¸¾åˆ«åfrom enum import Enumclass State(Enum):    RUNNING = 1    ACTIVE = 1      # ACTIVEæ˜¯RUNNINGçš„åˆ«å    STOPPED = 2    INACTIVE = 2    # INACTIVEæ˜¯STOPPEDçš„åˆ«å# åˆ«åæŒ‡å‘åŒä¸€ä¸ªæšä¸¾æˆå‘˜print(State.RUNNING)    # State.RUNNINGprint(State.ACTIVE)     # State.RUNNINGprint(State.RUNNING is State.ACTIVE)  # True# è¿­ä»£æ—¶åªè¿”å›ä¸»è¦æˆå‘˜print(\"ä¸»è¦çŠ¶æ€:\")for state in State:    print(state.name)# RUNNING# STOPPEDæšä¸¾æ¯”è¾ƒfrom enum import Enumclass Priority(Enum):    LOW = 1    MEDIUM = 2    HIGH = 3# æšä¸¾æˆå‘˜æ¯”è¾ƒprint(Priority.LOW == Priority.LOW)     # Trueprint(Priority.LOW is Priority.LOW)     # Trueprint(Priority.LOW == Priority.HIGH)    # False# ä¸èƒ½ä¸å…¶ä»–ç±»å‹ç›´æ¥æ¯”è¾ƒprint(Priority.LOW == 1)                # False# ä½†IntEnumå¯ä»¥ä¸æ•´æ•°æ¯”è¾ƒfrom enum import IntEnumclass IntPriority(IntEnum):    LOW = 1    MEDIUM = 2    HIGH = 3print(IntPriority.LOW == 1)             # Trueå®é™…æ¡ˆä¾‹ï¼šHTTPçŠ¶æ€ç from enum import IntEnumclass HTTPStatus(IntEnum):    # æˆåŠŸçŠ¶æ€ç     OK = 200    CREATED = 201    ACCEPTED = 202        # é‡å®šå‘çŠ¶æ€ç     MOVED_PERMANENTLY = 301    FOUND = 302        # å®¢æˆ·ç«¯é”™è¯¯    BAD_REQUEST = 400    UNAUTHORIZED = 401    FORBIDDEN = 403    NOT_FOUND = 404        # æœåŠ¡å™¨é”™è¯¯    INTERNAL_SERVER_ERROR = 500    BAD_GATEWAY = 502    SERVICE_UNAVAILABLE = 503def handle_response(status_code):    \"\"\"å¤„ç†HTTPå“åº”çŠ¶æ€ç \"\"\"    if status_code == HTTPStatus.OK:        return \"è¯·æ±‚æˆåŠŸ\"    elif status_code == HTTPStatus.NOT_FOUND:        return \"èµ„æºæœªæ‰¾åˆ°\"    elif status_code &gt;= HTTPStatus.INTERNAL_SERVER_ERROR:        return \"æœåŠ¡å™¨é”™è¯¯\"    elif status_code &gt;= HTTPStatus.BAD_REQUEST:        return \"å®¢æˆ·ç«¯é”™è¯¯\"    else:        return \"å…¶ä»–çŠ¶æ€\"# ä½¿ç”¨ç¤ºä¾‹print(handle_response(HTTPStatus.OK))        # è¯·æ±‚æˆåŠŸprint(handle_response(HTTPStatus.NOT_FOUND)) # èµ„æºæœªæ‰¾åˆ°print(handle_response(500))                  # æœåŠ¡å™¨é”™è¯¯å®é™…æ¡ˆä¾‹ï¼šäº¤é€šç¯æ§åˆ¶ç³»ç»Ÿfrom enum import Enumimport timeclass TrafficLight(Enum):    RED = \"çº¢ç¯\"    YELLOW = \"é»„ç¯\"    GREEN = \"ç»¿ç¯\"        def next_light(self):        \"\"\"è·å–ä¸‹ä¸€ä¸ªç¯çš„çŠ¶æ€\"\"\"        transitions = {            TrafficLight.RED: TrafficLight.GREEN,            TrafficLight.GREEN: TrafficLight.YELLOW,            TrafficLight.YELLOW: TrafficLight.RED        }        return transitions[self]        def duration(self):        \"\"\"è·å–å½“å‰ç¯çš„æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰\"\"\"        durations = {            TrafficLight.RED: 30,            TrafficLight.YELLOW: 5,            TrafficLight.GREEN: 25        }        return durations[self]def simulate_traffic_light():    \"\"\"æ¨¡æ‹Ÿäº¤é€šç¯è¿è¡Œ\"\"\"    current_light = TrafficLight.RED        for cycle in range(3):  # è¿è¡Œ3ä¸ªå‘¨æœŸ        print(f\"\\n=== å‘¨æœŸ {cycle + 1} ===\")        for _ in range(3):  # æ¯ä¸ªå‘¨æœŸ3ä¸ªç¯            print(f\"å½“å‰çŠ¶æ€: {current_light.value}\")            print(f\"æŒç»­æ—¶é—´: {current_light.duration()}ç§’\")                        # æ¨¡æ‹Ÿç­‰å¾…ï¼ˆå®é™…åº”ç”¨ä¸­ä¼šçœŸæ­£ç­‰å¾…ï¼‰            # time.sleep(current_light.duration())                        current_light = current_light.next_light()            print(\"-\" * 20)# è¿è¡Œæ¨¡æ‹Ÿsimulate_traffic_light()é«˜çº§ç”¨æ³•ï¼šåŠŸèƒ½æšä¸¾from enum import Enumclass Planet(Enum):    MERCURY = (3.303e+23, 2.4397e6)    VENUS   = (4.869e+24, 6.0518e6)    EARTH   = (5.976e+24, 6.37814e6)    MARS    = (6.421e+23, 3.3972e6)        def __init__(self, mass, radius):        self.mass = mass       # è´¨é‡ (kg)        self.radius = radius   # åŠå¾„ (m)        @property    def surface_gravity(self):        \"\"\"è®¡ç®—è¡¨é¢é‡åŠ›åŠ é€Ÿåº¦\"\"\"        G = 6.67300E-11  # ä¸‡æœ‰å¼•åŠ›å¸¸æ•°        return G * self.mass / (self.radius * self.radius)# ä½¿ç”¨åŠŸèƒ½æšä¸¾earth = Planet.EARTHprint(f\"åœ°çƒè´¨é‡: {earth.mass:.2e} kg\")print(f\"åœ°çƒåŠå¾„: {earth.radius:.2e} m\")print(f\"åœ°çƒè¡¨é¢é‡åŠ›: {earth.surface_gravity:.2f} m/sÂ²\")# æ¯”è¾ƒæ‰€æœ‰è¡Œæ˜Ÿçš„é‡åŠ›print(\"\\nå„è¡Œæ˜Ÿè¡¨é¢é‡åŠ›:\")for planet in Planet:    print(f\"{planet.name}: {planet.surface_gravity:.2f} m/sÂ²\")âš ï¸ æ³¨æ„äº‹é¡¹  æšä¸¾æˆå‘˜ä¸€æ—¦åˆ›å»ºå°±ä¸å¯ä¿®æ”¹  æ™®é€šEnumä¸èƒ½ä¸å…¶ä»–ç±»å‹è¿›è¡Œæ•°å€¼æ¯”è¾ƒï¼Œä½†IntEnumå¯ä»¥  ä½¿ç”¨@uniqueè£…é¥°å™¨å¯ä»¥é˜²æ­¢æ„å¤–çš„é‡å¤å€¼  æšä¸¾æˆå‘˜çš„å€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œä½†å»ºè®®ä¿æŒä¸€è‡´æ€§  åˆ«åæˆå‘˜åœ¨è¿­ä»£æ—¶ä¸ä¼šå‡ºç°ï¼Œåªæœ‰ä¸»è¦æˆå‘˜ä¼šè¢«è¿­ä»£ğŸ”— ç›¸å…³å†…å®¹  dataclassesæ¨¡å— - æ•°æ®ç±»ä¸æšä¸¾çš„ç»“åˆä½¿ç”¨  typingæ¨¡å— - ç±»å‹æç¤ºä¸æšä¸¾  collectionsæ¨¡å— - å…¶ä»–æ•°æ®ç»“æ„ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - enumæ¨¡å—  PEP 435 - Adding an Enum type to the Python standard library  Real Python - Python Enum GuideğŸ·ï¸ æ ‡ç­¾enum æšä¸¾ å¸¸é‡ ç±»å‹å®‰å…¨ ä»£ç å¯è¯»æ€§æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å›¢é˜Ÿç‰ˆæœ¬: 1.0",
        "url": "/docs/stdlib/enum/",
        "category": "stdlib",
        "tags": ["enum","æšä¸¾","å¸¸é‡","ç±»å‹å®‰å…¨"]
      }
      
    
  
    
      ,
      {
        "title": "enumerate() - æšä¸¾å‡½æ•°",
        "content": "enumerate() - æšä¸¾å‡½æ•°ğŸ“ æ¦‚è¿°enumerate() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºå°†å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºæšä¸¾å¯¹è±¡ã€‚å®ƒè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œäº§ç”ŸåŒ…å«ç´¢å¼•å’Œå€¼çš„å…ƒç»„ã€‚è¿™ä¸ªå‡½æ•°åœ¨éœ€è¦åŒæ—¶è·å–å…ƒç´ ç´¢å¼•å’Œå€¼çš„åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚1ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡enumerate()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£enumerate()çš„å‚æ•°å’Œè¿”å›å€¼  å­¦ä¼šåœ¨ä¸åŒåœºæ™¯ä¸­ä½¿ç”¨enumerate()  äº†è§£enumerate()ä¸å…¶ä»–è¿­ä»£æ–¹æ³•çš„åŒºåˆ«ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  å¯è¿­ä»£å¯¹è±¡çš„æ¦‚å¿µ  forå¾ªç¯å’Œå…ƒç»„è§£åŒ…  è¿­ä»£å™¨çš„åŸºæœ¬ç†è§£ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µenumerate() å‡½æ•°æ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªenumerateå¯¹è±¡ï¼ˆè¿­ä»£å™¨ï¼‰ã€‚æ¯æ¬¡è¿­ä»£æ—¶ï¼Œå®ƒäº§ç”Ÿä¸€ä¸ªåŒ…å«ç´¢å¼•ï¼ˆä»startå¼€å§‹ï¼‰å’Œå¯¹åº”å…ƒç´ å€¼çš„å…ƒç»„ã€‚è¯­æ³•æ ¼å¼enumerate(iterable, start=0)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  iterable      iterable      æ˜¯      æ—       å¯è¿­ä»£å¯¹è±¡ï¼ˆåˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰              start      int      å¦      0      ç´¢å¼•çš„èµ·å§‹å€¼      è¿”å›å€¼            ç±»å‹      è¯´æ˜                  enumerate      æšä¸¾å¯¹è±¡ï¼ˆè¿­ä»£å™¨ï¼‰ï¼Œäº§ç”Ÿ(index, value)å…ƒç»„      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# åŸºæœ¬ä½¿ç”¨fruits = [\"è‹¹æœ\", \"é¦™è•‰\", \"æ©™å­\"]for index, fruit in enumerate(fruits):    print(f\"{index}: {fruit}\")# è¾“å‡º:# 0: è‹¹æœ# 1: é¦™è•‰# 2: æ©™å­# æŒ‡å®šèµ·å§‹ç´¢å¼•for index, fruit in enumerate(fruits, start=1):    print(f\"ç¬¬{index}ä¸ªæ°´æœ: {fruit}\")# è¾“å‡º:# ç¬¬1ä¸ªæ°´æœ: è‹¹æœ# ç¬¬2ä¸ªæ°´æœ: é¦™è•‰# ç¬¬3ä¸ªæ°´æœ: æ©™å­# å¯¹å­—ç¬¦ä¸²ä½¿ç”¨enumeratetext = \"Python\"for i, char in enumerate(text):    print(f\"ä½ç½®{i}: {char}\")# è¾“å‡º: ä½ç½®0: P, ä½ç½®1: y, ä½ç½®2: t, ä½ç½®3: h, ä½ç½®4: o, ä½ç½®5: n# è½¬æ¢ä¸ºåˆ—è¡¨æŸ¥çœ‹ç»“æœprint(list(enumerate(fruits)))  # [(0, 'è‹¹æœ'), (1, 'é¦™è•‰'), (2, 'æ©™å­')]print(list(enumerate(fruits, 10)))  # [(10, 'è‹¹æœ'), (11, 'é¦™è•‰'), (12, 'æ©™å­')]é«˜çº§ç”¨æ³•# ä¸å…¶ä»–å¯è¿­ä»£å¯¹è±¡ä¸€èµ·ä½¿ç”¨data = {\"name\": \"å¼ ä¸‰\", \"age\": 25, \"city\": \"åŒ—äº¬\"}for i, (key, value) in enumerate(data.items()):    print(f\"{i}: {key} = {value}\")# åµŒå¥—åˆ—è¡¨çš„æšä¸¾matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]for row_idx, row in enumerate(matrix):    for col_idx, value in enumerate(row):        print(f\"matrix[{row_idx}][{col_idx}] = {value}\")# æ¡ä»¶ç­›é€‰numbers = [10, 25, 30, 45, 50]for i, num in enumerate(numbers):    if num &gt; 30:        print(f\"ç´¢å¼•{i}çš„å€¼{num}å¤§äº30\")# æŸ¥æ‰¾ç‰¹å®šå…ƒç´ çš„æ‰€æœ‰ä½ç½®def find_all_positions(lst, target):    \"\"\"æŸ¥æ‰¾ç›®æ ‡å…ƒç´ åœ¨åˆ—è¡¨ä¸­çš„æ‰€æœ‰ä½ç½®\"\"\"    positions = []    for i, item in enumerate(lst):        if item == target:            positions.append(i)    return positionsdata = [1, 3, 7, 3, 9, 3, 5]positions = find_all_positions(data, 3)print(f\"å…ƒç´ 3çš„ä½ç½®: {positions}\")  # [1, 3, 5]å®é™…æ¡ˆä¾‹# æ–‡ä»¶è¡Œå·å¤„ç†def process_file_with_line_numbers(filename):    \"\"\"å¤„ç†æ–‡ä»¶å¹¶æ˜¾ç¤ºè¡Œå·\"\"\"    try:        with open(filename, 'r', encoding='utf-8') as file:            for line_num, line in enumerate(file, start=1):                print(f\"{line_num:3d}: {line.rstrip()}\")    except FileNotFoundError:        print(f\"æ–‡ä»¶ {filename} ä¸å­˜åœ¨\")# æ•°æ®éªŒè¯å’Œé”™è¯¯æŠ¥å‘Šdef validate_data(data_list):    \"\"\"éªŒè¯æ•°æ®å¹¶æŠ¥å‘Šé”™è¯¯ä½ç½®\"\"\"    errors = []    for i, item in enumerate(data_list):        if not isinstance(item, (int, float)):            errors.append(f\"ä½ç½®{i}: æœŸæœ›æ•°å­—ï¼Œå®é™…ç±»å‹{type(item).__name__}\")        elif item &lt; 0:            errors.append(f\"ä½ç½®{i}: æ•°å€¼ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œå®é™…å€¼{item}\")        if errors:        print(\"æ•°æ®éªŒè¯å¤±è´¥:\")        for error in errors:            print(f\"  - {error}\")        return False    else:        print(\"æ•°æ®éªŒè¯é€šè¿‡\")        return True# æµ‹è¯•æ•°æ®éªŒè¯test_data = [10, 20, \"abc\", -5, 30.5]validate_data(test_data)# åˆ›å»ºç´¢å¼•æ˜ å°„def create_index_mapping(items):    \"\"\"åˆ›å»ºå€¼åˆ°ç´¢å¼•çš„æ˜ å°„\"\"\"    mapping = {}    for i, item in enumerate(items):        if item in mapping:            mapping[item].append(i)        else:            mapping[item] = [i]    return mappingcolors = [\"çº¢\", \"ç»¿\", \"è“\", \"çº¢\", \"é»„\", \"ç»¿\"]color_mapping = create_index_mapping(colors)print(color_mapping)  # {'çº¢': [0, 3], 'ç»¿': [1, 5], 'è“': [2], 'é»„': [4]}# åˆ†é¡µæ˜¾ç¤ºdef paginate_data(data, page_size=5):    \"\"\"åˆ†é¡µæ˜¾ç¤ºæ•°æ®\"\"\"    for i, item in enumerate(data):        if i % page_size == 0 and i &gt; 0:            input(\"æŒ‰å›è½¦é”®ç»§ç»­...\")            print()        print(f\"{i+1:3d}. {item}\")# ç”Ÿæˆå¸¦ç¼–å·çš„èœå•def create_menu(options):    \"\"\"åˆ›å»ºå¸¦ç¼–å·çš„èœå•\"\"\"    print(\"è¯·é€‰æ‹©:\")    for i, option in enumerate(options, start=1):        print(f\"{i}. {option}\")        while True:        try:            choice = int(input(\"è¯·è¾“å…¥é€‰é¡¹ç¼–å·: \"))            if 1 &lt;= choice &lt;= len(options):                return choice - 1, options[choice - 1]            else:                print(\"æ— æ•ˆé€‰é¡¹ï¼Œè¯·é‡æ–°é€‰æ‹©\")        except ValueError:            print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—\")# ä½¿ç”¨èœå•menu_options = [\"æ–°å»ºæ–‡ä»¶\", \"æ‰“å¼€æ–‡ä»¶\", \"ä¿å­˜æ–‡ä»¶\", \"é€€å‡ºç¨‹åº\"]selected_index, selected_option = create_menu(menu_options)print(f\"æ‚¨é€‰æ‹©äº†: {selected_option}\")âš ï¸ æ³¨æ„äº‹é¡¹  enumerate() è¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œåªèƒ½éå†ä¸€æ¬¡  start å‚æ•°åªå½±å“ç´¢å¼•ï¼Œä¸å½±å“å®é™…çš„è¿­ä»£é¡ºåº  å¯¹äºå¤§å‹æ•°æ®é›†ï¼Œenumerate() æ˜¯å†…å­˜å‹å¥½çš„  ä¸è¦åœ¨éœ€è¦å¤šæ¬¡éå†çš„åœºæ™¯ä¸­ç›´æ¥ä½¿ç”¨enumerateå¯¹è±¡# æ³¨æ„äº‹é¡¹ç¤ºä¾‹data = [\"a\", \"b\", \"c\"]enum_obj = enumerate(data)# ç¬¬ä¸€æ¬¡éå†print(\"ç¬¬ä¸€æ¬¡éå†:\")for i, item in enum_obj:    print(i, item)# ç¬¬äºŒæ¬¡éå†ï¼ˆä¸ä¼šæœ‰è¾“å‡ºï¼Œå› ä¸ºè¿­ä»£å™¨å·²è€—å°½ï¼‰print(\"ç¬¬äºŒæ¬¡éå†:\")for i, item in enum_obj:    print(i, item)  # ä¸ä¼šæ‰§è¡Œ# å¦‚æœéœ€è¦å¤šæ¬¡éå†ï¼Œé‡æ–°åˆ›å»ºenumerateå¯¹è±¡enum_obj = enumerate(data)print(\"é‡æ–°åˆ›å»ºåçš„éå†:\")for i, item in enum_obj:    print(i, item)# æˆ–è€…è½¬æ¢ä¸ºåˆ—è¡¨ï¼ˆé€‚ç”¨äºå°æ•°æ®é›†ï¼‰enum_list = list(enumerate(data))print(\"è½¬æ¢ä¸ºåˆ—è¡¨åå¯å¤šæ¬¡ä½¿ç”¨:\")for i, item in enum_list:    print(i, item)ğŸ”— ç›¸å…³å†…å®¹  range() - èŒƒå›´å‡½æ•°  zip() - æ‰“åŒ…å‡½æ•°  map() - æ˜ å°„å‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - enumerate()  Pythonè¿­ä»£å™¨è¯¦è§£  Pythonå¾ªç¯æŠ€å·§ğŸ·ï¸ æ ‡ç­¾è¿­ä»£ ç´¢å¼• æšä¸¾ å¾ªç¯ å…ƒç»„è§£åŒ…æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/enumerate/",
        "category": "builtins",
        "tags": ["è¿­ä»£","ç´¢å¼•","æšä¸¾"]
      }
      
    
  
    
      ,
      {
        "title": "eval() - è¡¨è¾¾å¼æ±‚å€¼å‡½æ•°",
        "content": "eval() - è¡¨è¾¾å¼æ±‚å€¼å‡½æ•°ğŸ“ æ¦‚è¿°eval() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºæ‰§è¡Œå­—ç¬¦ä¸²å½¢å¼çš„Pythonè¡¨è¾¾å¼å¹¶è¿”å›ç»“æœã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥åŠ¨æ€åœ°æ‰§è¡ŒPythonä»£ç ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†å®‰å…¨é£é™©ã€‚å®ƒä¸»è¦ç”¨äºè®¡ç®—æ•°å­¦è¡¨è¾¾å¼ã€åŠ¨æ€é…ç½®ã€ç®€å•çš„ä»£ç ç”Ÿæˆç­‰åœºæ™¯ã€‚ä½¿ç”¨æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„å®‰å…¨æ€§å’Œæ€§èƒ½é—®é¢˜ã€‚âš ï¸ å®‰å…¨è­¦å‘Ševal()å‡½æ•°å­˜åœ¨ä¸¥é‡çš„å®‰å…¨é£é™©ï¼  æ°¸è¿œä¸è¦å¯¹ä¸å¯ä¿¡çš„è¾“å…¥ä½¿ç”¨eval()  æ¶æ„ä»£ç å¯èƒ½å¯¼è‡´ç³»ç»Ÿè¢«æ”»å‡»  åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ—¶å¿…é¡»è¿›è¡Œä¸¥æ ¼çš„è¾“å…¥éªŒè¯  è€ƒè™‘ä½¿ç”¨æ›´å®‰å…¨çš„æ›¿ä»£æ–¹æ¡ˆğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡eval()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œè¯­æ³•  ç†è§£eval()çš„å·¥ä½œæœºåˆ¶å’Œé™åˆ¶  å­¦ä¼šå®‰å…¨åœ°ä½¿ç”¨eval()å‡½æ•°  äº†è§£eval()çš„å®‰å…¨é£é™©å’Œé˜²æŠ¤æªæ–½  æŒæ¡eval()çš„æ›¿ä»£æ–¹æ¡ˆå’Œæœ€ä½³å®è·µğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  è¡¨è¾¾å¼å’Œè¯­å¥çš„åŒºåˆ«  ä½œç”¨åŸŸå’Œå‘½åç©ºé—´çš„æ¦‚å¿µ  å¼‚å¸¸å¤„ç†çš„åŸºæœ¬çŸ¥è¯†  å®‰å…¨ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µeval() å‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œå°†å…¶ä½œä¸ºPythonè¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œå¹¶è¿”å›è¡¨è¾¾å¼çš„ç»“æœã€‚å®ƒåªèƒ½æ‰§è¡Œè¡¨è¾¾å¼ï¼Œä¸èƒ½æ‰§è¡Œè¯­å¥ï¼ˆå¦‚èµ‹å€¼ã€å¾ªç¯ç­‰ï¼‰ã€‚å¦‚æœéœ€è¦æ‰§è¡Œè¯­å¥ï¼Œåº”è¯¥ä½¿ç”¨ exec() å‡½æ•°ã€‚è¯­æ³•æ ¼å¼eval(expression, globals=None, locals=None)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  expression      å­—ç¬¦ä¸²æˆ–ä»£ç å¯¹è±¡      æ˜¯      æ—       è¦æ‰§è¡Œçš„Pythonè¡¨è¾¾å¼              globals      å­—å…¸      å¦      None      å…¨å±€å‘½åç©ºé—´              locals      å­—å…¸      å¦      None      å±€éƒ¨å‘½åç©ºé—´      è¿”å›å€¼  ç±»å‹: ä»»æ„ç±»å‹  å†…å®¹: è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœğŸ’¡ ä»£ç ç¤ºä¾‹åŸºæœ¬ç”¨æ³•# åŸºæœ¬æ•°å­¦è¡¨è¾¾å¼print(\"åŸºæœ¬æ•°å­¦è¡¨è¾¾å¼:\")result1 = eval(\"2 + 3 * 4\")print(f\"2 + 3 * 4 = {result1}\")  # 14result2 = eval(\"(10 + 5) / 3\")print(f\"(10 + 5) / 3 = {result2}\")  # 5.0result3 = eval(\"2 ** 10\")print(f\"2 ** 10 = {result3}\")  # 1024# å­—ç¬¦ä¸²è¡¨è¾¾å¼print(f\"\\nå­—ç¬¦ä¸²è¡¨è¾¾å¼:\")result4 = eval(\"'Hello' + ' ' + 'World'\")print(f\"å­—ç¬¦ä¸²è¿æ¥: {result4}\")  # Hello Worldresult5 = eval(\"'Python' * 3\")print(f\"å­—ç¬¦ä¸²é‡å¤: {result5}\")  # PythonPythonPython# åˆ—è¡¨å’Œå…ƒç»„è¡¨è¾¾å¼print(f\"\\nåˆ—è¡¨å’Œå…ƒç»„è¡¨è¾¾å¼:\")result6 = eval(\"[1, 2, 3] + [4, 5, 6]\")print(f\"åˆ—è¡¨è¿æ¥: {result6}\")  # [1, 2, 3, 4, 5, 6]result7 = eval(\"(1, 2) + (3, 4)\")print(f\"å…ƒç»„è¿æ¥: {result7}\")  # (1, 2, 3, 4)# å­—å…¸è¡¨è¾¾å¼result8 = eval(\"{'a': 1, 'b': 2}\")print(f\"å­—å…¸åˆ›å»º: {result8}\")  # {'a': 1, 'b': 2}# å¸ƒå°”è¡¨è¾¾å¼print(f\"\\nå¸ƒå°”è¡¨è¾¾å¼:\")result9 = eval(\"True and False\")print(f\"True and False = {result9}\")  # Falseresult10 = eval(\"5 &gt; 3 and 2 &lt; 4\")print(f\"5 &gt; 3 and 2 &lt; 4 = {result10}\")  # True# å‡½æ•°è°ƒç”¨print(f\"\\nå‡½æ•°è°ƒç”¨:\")result11 = eval(\"len('Hello World')\")print(f\"å­—ç¬¦ä¸²é•¿åº¦: {result11}\")  # 11result12 = eval(\"max([1, 5, 3, 9, 2])\")print(f\"æœ€å¤§å€¼: {result12}\")  # 9result13 = eval(\"abs(-42)\")print(f\"ç»å¯¹å€¼: {result13}\")  # 42ä½¿ç”¨è‡ªå®šä¹‰å‘½åç©ºé—´# è‡ªå®šä¹‰å…¨å±€å’Œå±€éƒ¨å‘½åç©ºé—´print(\"\\nè‡ªå®šä¹‰å‘½åç©ºé—´ç¤ºä¾‹:\")# å®šä¹‰è‡ªå®šä¹‰çš„å…¨å±€å‘½åç©ºé—´custom_globals = {    '__builtins__': {},  # é™åˆ¶å†…ç½®å‡½æ•°è®¿é—®    'pi': 3.14159,    'e': 2.71828,    'sqrt': lambda x: x ** 0.5,    'square': lambda x: x * x}# å®šä¹‰è‡ªå®šä¹‰çš„å±€éƒ¨å‘½åç©ºé—´custom_locals = {    'x': 10,    'y': 20,    'name': 'Python'}# ä½¿ç”¨è‡ªå®šä¹‰å‘½åç©ºé—´try:    result1 = eval(\"pi * square(x)\", custom_globals, custom_locals)    print(f\"Ï€ * xÂ² = {result1}\")  # 314.159        result2 = eval(\"sqrt(x * y)\", custom_globals, custom_locals)    print(f\"âˆš(x * y) = {result2}\")  # 14.142135623730951        result3 = eval(\"name + ' is great!'\", custom_globals, custom_locals)    print(f\"å­—ç¬¦ä¸²æ“ä½œ: {result3}\")  # Python is great!    except Exception as e:    print(f\"æ‰§è¡Œå‡ºé”™: {e}\")# å°è¯•è®¿é—®è¢«é™åˆ¶çš„å†…ç½®å‡½æ•°print(f\"\\nå®‰å…¨æ€§æµ‹è¯•:\")try:    # è¿™ä¼šå¤±è´¥ï¼Œå› ä¸ºæˆ‘ä»¬é™åˆ¶äº†__builtins__    result = eval(\"len('test')\", custom_globals, custom_locals)except Exception as e:    print(f\"è®¿é—®å†…ç½®å‡½æ•°å¤±è´¥ï¼ˆé¢„æœŸï¼‰: {e}\")# åŠ¨æ€å˜é‡è®¿é—®print(f\"\\nåŠ¨æ€å˜é‡è®¿é—®:\")variables = {    'a': 100,    'b': 200,    'operation': '+'}# æ ¹æ®å˜é‡åŠ¨æ€æ„å»ºè¡¨è¾¾å¼expression = f\"a {variables['operation']} b\"result = eval(expression, {}, variables)print(f\"åŠ¨æ€è¡¨è¾¾å¼ '{expression}' = {result}\")  # 300# æ›´å¤æ‚çš„åŠ¨æ€è¡¨è¾¾å¼math_operations = {    'add': lambda x, y: x + y,    'multiply': lambda x, y: x * y,    'power': lambda x, y: x ** y}variables.update(math_operations)complex_expr = \"power(add(a, b), 2) - multiply(a, b)\"result = eval(complex_expr, {}, variables)print(f\"å¤æ‚è¡¨è¾¾å¼ '{complex_expr}' = {result}\")  # 70000å®‰å…¨çš„evalä½¿ç”¨import reimport astfrom typing import Any, Dict, List, Union# å®‰å…¨çš„evalåŒ…è£…å™¨class SafeEval:    \"\"\"å®‰å…¨çš„è¡¨è¾¾å¼æ±‚å€¼å™¨\"\"\"        def __init__(self):        # å…è®¸çš„æ“ä½œç¬¦        self.allowed_operators = {            ast.Add, ast.Sub, ast.Mult, ast.Div, ast.Mod, ast.Pow,            ast.LShift, ast.RShift, ast.BitOr, ast.BitXor, ast.BitAnd,            ast.FloorDiv, ast.And, ast.Or, ast.Eq, ast.NotEq,            ast.Lt, ast.LtE, ast.Gt, ast.GtE, ast.Is, ast.IsNot,            ast.In, ast.NotIn, ast.Not, ast.Invert, ast.UAdd, ast.USub        }                # å…è®¸çš„èŠ‚ç‚¹ç±»å‹        self.allowed_nodes = {            ast.Expression, ast.BinOp, ast.UnaryOp, ast.Compare,            ast.BoolOp, ast.Num, ast.Str, ast.List, ast.Tuple,            ast.Dict, ast.Set, ast.Name, ast.Load, ast.Constant        }                # å…è®¸çš„å†…ç½®å‡½æ•°        self.allowed_builtins = {            'abs', 'max', 'min', 'len', 'sum', 'round',            'int', 'float', 'str', 'bool', 'list', 'tuple',            'dict', 'set', 'sorted', 'reversed'        }                # å®‰å…¨çš„å…¨å±€å‘½åç©ºé—´        self.safe_globals = {            '__builtins__': {name: __builtins__[name]                            for name in self.allowed_builtins                            if name in __builtins__}        }        def is_safe_expression(self, expression: str) -&gt; tuple[bool, str]:        \"\"\"æ£€æŸ¥è¡¨è¾¾å¼æ˜¯å¦å®‰å…¨\"\"\"        try:            # è§£æè¡¨è¾¾å¼            tree = ast.parse(expression, mode='eval')                        # æ£€æŸ¥æ‰€æœ‰èŠ‚ç‚¹            for node in ast.walk(tree):                node_type = type(node)                                # æ£€æŸ¥èŠ‚ç‚¹ç±»å‹                if node_type not in self.allowed_nodes:                    return False, f\"ä¸å…è®¸çš„èŠ‚ç‚¹ç±»å‹: {node_type.__name__}\"                                # æ£€æŸ¥æ“ä½œç¬¦                if isinstance(node, (ast.BinOp, ast.UnaryOp, ast.Compare, ast.BoolOp)):                    if hasattr(node, 'op') and type(node.op) not in self.allowed_operators:                        return False, f\"ä¸å…è®¸çš„æ“ä½œç¬¦: {type(node.op).__name__}\"                    if hasattr(node, 'ops'):                        for op in node.ops:                            if type(op) not in self.allowed_operators:                                return False, f\"ä¸å…è®¸çš„æ¯”è¾ƒæ“ä½œç¬¦: {type(op).__name__}\"                                # æ£€æŸ¥å‡½æ•°è°ƒç”¨                if isinstance(node, ast.Call):                    if isinstance(node.func, ast.Name):                        func_name = node.func.id                        if func_name not in self.allowed_builtins:                            return False, f\"ä¸å…è®¸çš„å‡½æ•°è°ƒç”¨: {func_name}\"                    else:                        return False, \"ä¸å…è®¸çš„å¤æ‚å‡½æ•°è°ƒç”¨\"                                # æ£€æŸ¥å±æ€§è®¿é—®                if isinstance(node, ast.Attribute):                    return False, \"ä¸å…è®¸å±æ€§è®¿é—®\"                                # æ£€æŸ¥å¯¼å…¥                if isinstance(node, (ast.Import, ast.ImportFrom)):                    return False, \"ä¸å…è®¸å¯¼å…¥è¯­å¥\"                        return True, \"è¡¨è¾¾å¼å®‰å…¨\"                    except SyntaxError as e:            return False, f\"è¯­æ³•é”™è¯¯: {e}\"        except Exception as e:            return False, f\"è§£æé”™è¯¯: {e}\"        def safe_eval(self, expression: str, variables: Dict[str, Any] = None) -&gt; Any:        \"\"\"å®‰å…¨åœ°æ‰§è¡Œè¡¨è¾¾å¼\"\"\"        # æ£€æŸ¥è¡¨è¾¾å¼å®‰å…¨æ€§        is_safe, message = self.is_safe_expression(expression)        if not is_safe:            raise ValueError(f\"ä¸å®‰å…¨çš„è¡¨è¾¾å¼: {message}\")                # å‡†å¤‡å‘½åç©ºé—´        safe_locals = variables.copy() if variables else {}                # æ‰§è¡Œè¡¨è¾¾å¼        try:            return eval(expression, self.safe_globals, safe_locals)        except Exception as e:            raise RuntimeError(f\"è¡¨è¾¾å¼æ‰§è¡Œå¤±è´¥: {e}\")# æµ‹è¯•å®‰å…¨çš„evalprint(\"\\nå®‰å…¨evalæµ‹è¯•:\")safe_evaluator = SafeEval()# å®‰å…¨çš„è¡¨è¾¾å¼safe_expressions = [    \"2 + 3 * 4\",    \"max([1, 5, 3, 9, 2])\",    \"len('Hello World')\",    \"abs(-42)\",    \"[1, 2, 3] + [4, 5, 6]\",    \"{'a': 1, 'b': 2}\",    \"x * 2 + y\"]variables = {'x': 10, 'y': 5}print(\"å®‰å…¨è¡¨è¾¾å¼æµ‹è¯•:\")for expr in safe_expressions:    try:        result = safe_evaluator.safe_eval(expr, variables)        print(f\"  {expr} = {result}\")    except Exception as e:        print(f\"  {expr} å¤±è´¥: {e}\")# ä¸å®‰å…¨çš„è¡¨è¾¾å¼unsafe_expressions = [    \"__import__('os').system('ls')\",  # å¯¼å…¥å’Œç³»ç»Ÿè°ƒç”¨    \"open('/etc/passwd').read()\",      # æ–‡ä»¶æ“ä½œ    \"exec('print(\\\"hello\\\")')\",        # æ‰§è¡Œä»£ç     \"[].append.__globals__\",           # å±æ€§è®¿é—®    \"eval('2+2')\",                     # åµŒå¥—eval]print(f\"\\nä¸å®‰å…¨è¡¨è¾¾å¼æµ‹è¯•:\")for expr in unsafe_expressions:    try:        result = safe_evaluator.safe_eval(expr)        print(f\"  {expr} = {result} (ä¸åº”è¯¥æˆåŠŸ!)\")    except Exception as e:        print(f\"  {expr} è¢«é˜»æ­¢: {e}\")è®¡ç®—å™¨åº”ç”¨ç¤ºä¾‹import refrom typing import Optional# ç®€å•çš„è®¡ç®—å™¨ç±»class SimpleCalculator:    \"\"\"ç®€å•çš„è¡¨è¾¾å¼è®¡ç®—å™¨\"\"\"        def __init__(self):        # å…è®¸çš„å­—ç¬¦æ¨¡å¼        self.allowed_pattern = re.compile(r'^[0-9+\\-*/().\\s]+$')                # æ•°å­¦å¸¸é‡å’Œå‡½æ•°        self.math_context = {            '__builtins__': {},            'pi': 3.14159265359,            'e': 2.71828182846,            'sqrt': lambda x: x ** 0.5,            'sin': lambda x: __import__('math').sin(x),            'cos': lambda x: __import__('math').cos(x),            'tan': lambda x: __import__('math').tan(x),            'log': lambda x: __import__('math').log(x),            'log10': lambda x: __import__('math').log10(x),            'abs': abs,            'max': max,            'min': min,            'round': round        }        def validate_expression(self, expression: str) -&gt; tuple[bool, str]:        \"\"\"éªŒè¯è¡¨è¾¾å¼\"\"\"        # æ£€æŸ¥å­—ç¬¦        if not self.allowed_pattern.match(expression):            return False, \"è¡¨è¾¾å¼åŒ…å«ä¸å…è®¸çš„å­—ç¬¦\"                # æ£€æŸ¥æ‹¬å·åŒ¹é…        if expression.count('(') != expression.count(')'):            return False, \"æ‹¬å·ä¸åŒ¹é…\"                # æ£€æŸ¥ç©ºè¡¨è¾¾å¼        if not expression.strip():            return False, \"è¡¨è¾¾å¼ä¸ºç©º\"                return True, \"è¡¨è¾¾å¼æœ‰æ•ˆ\"        def calculate(self, expression: str) -&gt; Optional[float]:        \"\"\"è®¡ç®—è¡¨è¾¾å¼\"\"\"        try:            # éªŒè¯è¡¨è¾¾å¼            is_valid, message = self.validate_expression(expression)            if not is_valid:                print(f\"éªŒè¯å¤±è´¥: {message}\")                return None                        # è®¡ç®—ç»“æœ            result = eval(expression, self.math_context, {})                        # æ£€æŸ¥ç»“æœç±»å‹            if isinstance(result, (int, float)):                return float(result)            else:                print(f\"ç»“æœç±»å‹é”™è¯¯: {type(result)}\")                return None                        except ZeroDivisionError:            print(\"é”™è¯¯: é™¤é›¶\")            return None        except OverflowError:            print(\"é”™è¯¯: æ•°å€¼æº¢å‡º\")            return None        except ValueError as e:            print(f\"æ•°å€¼é”™è¯¯: {e}\")            return None        except SyntaxError as e:            print(f\"è¯­æ³•é”™è¯¯: {e}\")            return None        except Exception as e:            print(f\"è®¡ç®—é”™è¯¯: {e}\")            return None        def interactive_mode(self):        \"\"\"äº¤äº’æ¨¡å¼\"\"\"        print(\"ç®€å•è®¡ç®—å™¨ - è¾“å…¥'quit'é€€å‡º\")        print(\"æ”¯æŒçš„æ“ä½œ: +, -, *, /, (), æ•°å­—\")        print(\"æ”¯æŒçš„å‡½æ•°: sqrt, sin, cos, tan, log, log10, abs, max, min, round\")        print(\"æ”¯æŒçš„å¸¸é‡: pi, e\")        print(\"-\" * 50)                while True:            try:                expression = input(\"&gt;&gt;&gt; \").strip()                                if expression.lower() in ['quit', 'exit', 'q']:                    print(\"å†è§!\")                    break                                if not expression:                    continue                                result = self.calculate(expression)                if result is not None:                    print(f\"ç»“æœ: {result}\")                            except KeyboardInterrupt:                print(\"\\nå†è§!\")                break            except EOFError:                print(\"\\nå†è§!\")                break# æµ‹è¯•è®¡ç®—å™¨print(\"\\nè®¡ç®—å™¨æµ‹è¯•:\")calculator = SimpleCalculator()# æµ‹è¯•è¡¨è¾¾å¼test_expressions = [    \"2 + 3 * 4\",    \"(10 + 5) / 3\",    \"2 ** 10\",    \"sqrt(16)\",    \"pi * 2\",    \"sin(pi / 2)\",    \"log(e)\",    \"max(1, 5, 3, 9, 2)\",    \"round(3.14159, 2)\",    \"1 / 0\",  # é™¤é›¶é”™è¯¯    \"2 +\",    # è¯­æ³•é”™è¯¯    \"sqrt(-1)\" # æ•°å­¦é”™è¯¯]for expr in test_expressions:    print(f\"\\nè®¡ç®—: {expr}\")    result = calculator.calculate(expr)    if result is not None:        print(f\"ç»“æœ: {result}\")# å¦‚æœéœ€è¦äº¤äº’æ¨¡å¼ï¼Œå–æ¶ˆä¸‹é¢çš„æ³¨é‡Š# calculator.interactive_mode()ğŸš€ é«˜çº§åº”ç”¨é…ç½®æ–‡ä»¶è§£æimport jsonfrom typing import Any, Dict, List# åŠ¨æ€é…ç½®è§£æå™¨class DynamicConfigParser:    \"\"\"åŠ¨æ€é…ç½®è§£æå™¨\"\"\"        def __init__(self):        # é…ç½®ä¸Šä¸‹æ–‡        self.config_context = {            '__builtins__': {},            # ç¯å¢ƒå˜é‡            'env': self._get_env_vars(),            # ç³»ç»Ÿä¿¡æ¯            'system': self._get_system_info(),            # æ•°å­¦å‡½æ•°            'math': {                'max': max,                'min': min,                'abs': abs,                'round': round            }        }        def _get_env_vars(self) -&gt; Dict[str, str]:        \"\"\"è·å–ç¯å¢ƒå˜é‡ï¼ˆæ¨¡æ‹Ÿï¼‰\"\"\"        return {            'HOME': '/home/user',            'PATH': '/usr/bin:/bin',            'DEBUG': 'true',            'PORT': '8080'        }        def _get_system_info(self) -&gt; Dict[str, Any]:        \"\"\"è·å–ç³»ç»Ÿä¿¡æ¯ï¼ˆæ¨¡æ‹Ÿï¼‰\"\"\"        return {            'cpu_count': 4,            'memory_gb': 8,            'platform': 'linux'        }        def parse_config_value(self, value: str) -&gt; Any:        \"\"\"è§£æé…ç½®å€¼\"\"\"        # å¦‚æœä¸æ˜¯å­—ç¬¦ä¸²ï¼Œç›´æ¥è¿”å›        if not isinstance(value, str):            return value                # å¦‚æœä¸åŒ…å«è¡¨è¾¾å¼æ ‡è®°ï¼Œç›´æ¥è¿”å›        if not (value.startswith('${') and value.endswith('}')):            return value                # æå–è¡¨è¾¾å¼        expression = value[2:-1].strip()                try:            # å®‰å…¨æ£€æŸ¥            if any(dangerous in expression for dangerous in                    ['import', 'exec', 'eval', 'open', '__']):                raise ValueError(f\"ä¸å®‰å…¨çš„è¡¨è¾¾å¼: {expression}\")                        # æ‰§è¡Œè¡¨è¾¾å¼            result = eval(expression, self.config_context, {})            return result                    except Exception as e:            print(f\"è§£æé…ç½®å€¼å¤±è´¥ '{value}': {e}\")            return value  # è¿”å›åŸå§‹å€¼        def parse_config(self, config: Dict[str, Any]) -&gt; Dict[str, Any]:        \"\"\"è§£ææ•´ä¸ªé…ç½®\"\"\"        result = {}                for key, value in config.items():            if isinstance(value, dict):                # é€’å½’å¤„ç†åµŒå¥—å­—å…¸                result[key] = self.parse_config(value)            elif isinstance(value, list):                # å¤„ç†åˆ—è¡¨                result[key] = [self.parse_config_value(item) if isinstance(item, str)                               else item for item in value]            else:                # å¤„ç†å•ä¸ªå€¼                result[key] = self.parse_config_value(value)                return result# æµ‹è¯•åŠ¨æ€é…ç½®è§£æprint(\"\\nåŠ¨æ€é…ç½®è§£æç¤ºä¾‹:\")parser = DynamicConfigParser()# ç¤ºä¾‹é…ç½®sample_config = {    \"app\": {        \"name\": \"MyApp\",        \"debug\": \"${env['DEBUG'] == 'true'}\",        \"port\": \"${int(env['PORT'])}\",        \"workers\": \"${system['cpu_count'] * 2}\",        \"memory_limit\": \"${system['memory_gb'] * 1024}MB\"    },    \"database\": {        \"host\": \"localhost\",        \"port\": 5432,        \"max_connections\": \"${math['max'](10, system['cpu_count'] * 5)}\",        \"timeout\": \"${30 if env['DEBUG'] == 'true' else 10}\"    },    \"cache\": {        \"enabled\": \"${system['memory_gb'] &gt;= 4}\",        \"size\": \"${math['min'](system['memory_gb'] * 128, 1024)}MB\",        \"ttl\": 3600    },    \"features\": [        \"feature1\",        \"${env['DEBUG'] == 'true' and 'debug_feature' or 'prod_feature'}\",        \"feature3\"    ]}print(\"åŸå§‹é…ç½®:\")print(json.dumps(sample_config, indent=2, ensure_ascii=False))# è§£æé…ç½®parsed_config = parser.parse_config(sample_config)print(\"\\nè§£æåçš„é…ç½®:\")print(json.dumps(parsed_config, indent=2, ensure_ascii=False))# æ˜¾ç¤ºè§£æç»“æœprint(\"\\nè§£æç»“æœåˆ†æ:\")print(f\"åº”ç”¨è°ƒè¯•æ¨¡å¼: {parsed_config['app']['debug']}\")print(f\"åº”ç”¨ç«¯å£: {parsed_config['app']['port']}\")print(f\"å·¥ä½œè¿›ç¨‹æ•°: {parsed_config['app']['workers']}\")print(f\"å†…å­˜é™åˆ¶: {parsed_config['app']['memory_limit']}\")print(f\"æ•°æ®åº“æœ€å¤§è¿æ¥æ•°: {parsed_config['database']['max_connections']}\")print(f\"ç¼“å­˜å¯ç”¨: {parsed_config['cache']['enabled']}\")print(f\"ç¼“å­˜å¤§å°: {parsed_config['cache']['size']}\")print(f\"åŠŸèƒ½åˆ—è¡¨: {parsed_config['features']}\")è¡¨è¾¾å¼å¼•æ“import operatorfrom typing import Any, Callable, Dict, List, Union# è¡¨è¾¾å¼å¼•æ“class ExpressionEngine:    \"\"\"è¡¨è¾¾å¼å¼•æ“\"\"\"        def __init__(self):        # æ“ä½œç¬¦æ˜ å°„        self.operators = {            '+': operator.add,            '-': operator.sub,            '*': operator.mul,            '/': operator.truediv,            '//': operator.floordiv,            '%': operator.mod,            '**': operator.pow,            '==': operator.eq,            '!=': operator.ne,            '&lt;': operator.lt,            '&lt;=': operator.le,            '&gt;': operator.gt,            '&gt;=': operator.ge,            'and': operator.and_,            'or': operator.or_,            'not': operator.not_        }                # å†…ç½®å‡½æ•°        self.functions = {            'abs': abs,            'max': max,            'min': min,            'len': len,            'sum': sum,            'round': round,            'int': int,            'float': float,            'str': str,            'bool': bool,            'list': list,            'tuple': tuple,            'dict': dict,            'set': set        }                # å¸¸é‡        self.constants = {            'True': True,            'False': False,            'None': None,            'pi': 3.14159265359,            'e': 2.71828182846        }                # å˜é‡å­˜å‚¨        self.variables = {}        def set_variable(self, name: str, value: Any):        \"\"\"è®¾ç½®å˜é‡\"\"\"        self.variables[name] = value        def get_variable(self, name: str) -&gt; Any:        \"\"\"è·å–å˜é‡\"\"\"        return self.variables.get(name)        def add_function(self, name: str, func: Callable):        \"\"\"æ·»åŠ è‡ªå®šä¹‰å‡½æ•°\"\"\"        self.functions[name] = func        def create_context(self, extra_vars: Dict[str, Any] = None) -&gt; Dict[str, Any]:        \"\"\"åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡\"\"\"        context = {            '__builtins__': self.functions,            **self.constants,            **self.variables        }                if extra_vars:            context.update(extra_vars)                return context        def evaluate(self, expression: str, variables: Dict[str, Any] = None) -&gt; Any:        \"\"\"æ±‚å€¼è¡¨è¾¾å¼\"\"\"        try:            context = self.create_context(variables)            return eval(expression, {'__builtins__': {}}, context)        except Exception as e:            raise RuntimeError(f\"è¡¨è¾¾å¼æ±‚å€¼å¤±è´¥: {e}\")        def evaluate_batch(self, expressions: List[str],                       variables: Dict[str, Any] = None) -&gt; List[Any]:        \"\"\"æ‰¹é‡æ±‚å€¼\"\"\"        results = []        context = self.create_context(variables)                for expr in expressions:            try:                result = eval(expr, {'__builtins__': {}}, context)                results.append(result)            except Exception as e:                results.append(f\"é”™è¯¯: {e}\")                return results        def create_formula(self, name: str, expression: str,                       parameters: List[str]) -&gt; Callable:        \"\"\"åˆ›å»ºå…¬å¼å‡½æ•°\"\"\"        def formula(*args):            if len(args) != len(parameters):                raise ValueError(f\"å‚æ•°æ•°é‡ä¸åŒ¹é…: æœŸæœ›{len(parameters)}, å®é™…{len(args)}\")                        # åˆ›å»ºå‚æ•°æ˜ å°„            param_vars = dict(zip(parameters, args))                        # æ±‚å€¼è¡¨è¾¾å¼            return self.evaluate(expression, param_vars)                # è®¾ç½®å‡½æ•°åå’Œæ–‡æ¡£        formula.__name__ = name        formula.__doc__ = f\"å…¬å¼: {expression}, å‚æ•°: {parameters}\"                # æ·»åŠ åˆ°å‡½æ•°åº“        self.add_function(name, formula)                return formula# æµ‹è¯•è¡¨è¾¾å¼å¼•æ“print(\"\\nè¡¨è¾¾å¼å¼•æ“ç¤ºä¾‹:\")engine = ExpressionEngine()# è®¾ç½®å˜é‡engine.set_variable('x', 10)engine.set_variable('y', 20)engine.set_variable('name', 'Python')engine.set_variable('items', [1, 2, 3, 4, 5])# åŸºæœ¬è¡¨è¾¾å¼æµ‹è¯•basic_expressions = [    \"x + y\",    \"x * y + 100\",    \"max(items)\",    \"sum(items)\",    \"len(name)\",    \"name + ' is great!'\",    \"x &gt; 5 and y &lt; 30\",    \"pi * 2\",    \"round(e, 3)\"]print(\"åŸºæœ¬è¡¨è¾¾å¼æµ‹è¯•:\")for expr in basic_expressions:    try:        result = engine.evaluate(expr)        print(f\"  {expr} = {result}\")    except Exception as e:        print(f\"  {expr} å¤±è´¥: {e}\")# æ‰¹é‡æ±‚å€¼æµ‹è¯•print(f\"\\næ‰¹é‡æ±‚å€¼æµ‹è¯•:\")batch_results = engine.evaluate_batch(basic_expressions)for expr, result in zip(basic_expressions, batch_results):    print(f\"  {expr} = {result}\")# åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°print(f\"\\nè‡ªå®šä¹‰å‡½æ•°æµ‹è¯•:\")# æ·»åŠ è‡ªå®šä¹‰å‡½æ•°def factorial(n):    \"\"\"è®¡ç®—é˜¶ä¹˜\"\"\"    if n &lt;= 1:        return 1    return n * factorial(n - 1)def fibonacci(n):    \"\"\"è®¡ç®—æ–æ³¢é‚£å¥‘æ•°\"\"\"    if n &lt;= 1:        return n    return fibonacci(n - 1) + fibonacci(n - 2)engine.add_function('factorial', factorial)engine.add_function('fibonacci', fibonacci)# æµ‹è¯•è‡ªå®šä¹‰å‡½æ•°custom_expressions = [    \"factorial(5)\",    \"fibonacci(10)\",    \"factorial(x // 2)\",    \"max(factorial(3), fibonacci(5))\"]for expr in custom_expressions:    try:        result = engine.evaluate(expr)        print(f\"  {expr} = {result}\")    except Exception as e:        print(f\"  {expr} å¤±è´¥: {e}\")# åˆ›å»ºå…¬å¼print(f\"\\nå…¬å¼åˆ›å»ºæµ‹è¯•:\")# åˆ›å»ºæ•°å­¦å…¬å¼area_circle = engine.create_formula('area_circle', 'pi * r ** 2', ['r'])area_rectangle = engine.create_formula('area_rectangle', 'width * height', ['width', 'height'])quadratic = engine.create_formula('quadratic', 'a * x ** 2 + b * x + c', ['a', 'b', 'c', 'x'])# æµ‹è¯•å…¬å¼print(f\"åœ†å½¢é¢ç§¯ (r=5): {area_circle(5)}\")print(f\"çŸ©å½¢é¢ç§¯ (3x4): {area_rectangle(3, 4)}\")print(f\"äºŒæ¬¡å‡½æ•° (1, 2, 1, 3): {quadratic(1, 2, 1, 3)}\")# åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨å…¬å¼formula_expressions = [    \"area_circle(10)\",    \"area_rectangle(x, y)\",    \"quadratic(1, -2, 1, 5)\",    \"max(area_circle(3), area_rectangle(2, 4))\"]print(f\"\\nå…¬å¼è¡¨è¾¾å¼æµ‹è¯•:\")for expr in formula_expressions:    try:        result = engine.evaluate(expr)        print(f\"  {expr} = {result}\")    except Exception as e:        print(f\"  {expr} å¤±è´¥: {e}\")âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µå®‰å…¨é£é™©å’Œé˜²æŠ¤# å®‰å…¨é£é™©ç¤ºä¾‹å’Œé˜²æŠ¤æªæ–½print(\"\\nå®‰å…¨é£é™©å’Œé˜²æŠ¤ç¤ºä¾‹:\")# å±é™©ç¤ºä¾‹1ï¼šä»£ç æ³¨å…¥print(\"1. ä»£ç æ³¨å…¥é£é™©:\")# å±é™©çš„ç”¨æ³•ï¼ˆæ°¸è¿œä¸è¦è¿™æ ·åšï¼ï¼‰def dangerous_calculator(expression):    \"\"\"å±é™©çš„è®¡ç®—å™¨ - ä»…ç”¨äºæ¼”ç¤º\"\"\"    try:        return eval(expression)  # æå…¶å±é™©ï¼    except:        return \"é”™è¯¯\"# è¿™äº›è¾“å…¥å¯èƒ½é€ æˆä¸¥é‡å®‰å…¨é—®é¢˜dangerous_inputs = [    \"__import__('os').system('echo å±é™©å‘½ä»¤')\",    \"open('/etc/passwd', 'r').read()\",    \"[].append.__globals__['__builtins__']['exec']('import os; os.system(\\\"ls\\\")')\",    \"().__class__.__bases__[0].__subclasses__()[104].__init__.__globals__['sys'].exit()\"]print(\"å±é™©è¾“å…¥ç¤ºä¾‹ï¼ˆä¸ä¼šå®é™…æ‰§è¡Œï¼‰:\")for dangerous_input in dangerous_inputs:    print(f\"  - {dangerous_input}\")# å®‰å…¨çš„é˜²æŠ¤æªæ–½print(\"\\n2. å®‰å…¨é˜²æŠ¤æªæ–½:\")# æ–¹æ³•1ï¼šé™åˆ¶å…¨å±€å’Œå±€éƒ¨å‘½åç©ºé—´def safe_eval_v1(expression, allowed_names=None):    \"\"\"å®‰å…¨çš„eval - æ–¹æ³•1\"\"\"    if allowed_names is None:        allowed_names = {}        # åˆ›å»ºå®‰å…¨çš„å‘½åç©ºé—´    safe_dict = {        '__builtins__': {            'abs': abs, 'max': max, 'min': min, 'round': round,            'int': int, 'float': float, 'str': str, 'len': len        }    }    safe_dict.update(allowed_names)        try:        return eval(expression, safe_dict, {})    except Exception as e:        raise ValueError(f\"è¡¨è¾¾å¼æ‰§è¡Œå¤±è´¥: {e}\")# æ–¹æ³•2ï¼šä½¿ç”¨ASTè§£ææ£€æŸ¥import astdef safe_eval_v2(expression):    \"\"\"å®‰å…¨çš„eval - æ–¹æ³•2\"\"\"    try:        # è§£æè¡¨è¾¾å¼        tree = ast.parse(expression, mode='eval')                # æ£€æŸ¥èŠ‚ç‚¹ç±»å‹        for node in ast.walk(tree):            if isinstance(node, (ast.Import, ast.ImportFrom, ast.Call)):                if isinstance(node, ast.Call) and isinstance(node.func, ast.Name):                    # åªå…è®¸ç‰¹å®šçš„å‡½æ•°è°ƒç”¨                    allowed_functions = {'abs', 'max', 'min', 'round', 'int', 'float', 'str', 'len'}                    if node.func.id not in allowed_functions:                        raise ValueError(f\"ä¸å…è®¸çš„å‡½æ•°è°ƒç”¨: {node.func.id}\")                elif isinstance(node, (ast.Import, ast.ImportFrom)):                    raise ValueError(\"ä¸å…è®¸å¯¼å…¥è¯­å¥\")                elif isinstance(node, ast.Call):                    raise ValueError(\"ä¸å…è®¸å¤æ‚çš„å‡½æ•°è°ƒç”¨\")                # å®‰å…¨æ‰§è¡Œ        safe_globals = {            '__builtins__': {                'abs': abs, 'max': max, 'min': min, 'round': round,                'int': int, 'float': float, 'str': str, 'len': len            }        }                return eval(compile(tree, '&lt;string&gt;', 'eval'), safe_globals, {})            except SyntaxError as e:        raise ValueError(f\"è¯­æ³•é”™è¯¯: {e}\")    except Exception as e:        raise ValueError(f\"æ‰§è¡Œé”™è¯¯: {e}\")# æ–¹æ³•3ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼é¢„æ£€æŸ¥import redef safe_eval_v3(expression):    \"\"\"å®‰å…¨çš„eval - æ–¹æ³•3\"\"\"    # æ£€æŸ¥å±é™©æ¨¡å¼    dangerous_patterns = [        r'__\\w+__',  # åŒä¸‹åˆ’çº¿å±æ€§        r'import',   # å¯¼å…¥è¯­å¥        r'exec',     # æ‰§è¡Œå‡½æ•°        r'eval',     # åµŒå¥—eval        r'open',     # æ–‡ä»¶æ“ä½œ        r'file',     # æ–‡ä»¶å¯¹è±¡        r'input',    # è¾“å…¥å‡½æ•°        r'raw_input', # Python 2çš„è¾“å…¥        r'compile',  # ç¼–è¯‘å‡½æ•°        r'globals',  # å…¨å±€å˜é‡        r'locals',   # å±€éƒ¨å˜é‡        r'vars',     # å˜é‡å­—å…¸        r'dir',      # ç›®å½•å‡½æ•°        r'hasattr',  # å±æ€§æ£€æŸ¥        r'getattr',  # å±æ€§è·å–        r'setattr',  # å±æ€§è®¾ç½®        r'delattr',  # å±æ€§åˆ é™¤    ]        for pattern in dangerous_patterns:        if re.search(pattern, expression, re.IGNORECASE):            raise ValueError(f\"è¡¨è¾¾å¼åŒ…å«å±é™©æ¨¡å¼: {pattern}\")        # åªå…è®¸å®‰å…¨å­—ç¬¦    safe_pattern = re.compile(r'^[a-zA-Z0-9+\\-*/().\\s,\\[\\]{}:\\'\"_]+$')    if not safe_pattern.match(expression):        raise ValueError(\"è¡¨è¾¾å¼åŒ…å«ä¸å®‰å…¨å­—ç¬¦\")        # å®‰å…¨æ‰§è¡Œ    safe_globals = {        '__builtins__': {            'abs': abs, 'max': max, 'min': min, 'round': round,            'int': int, 'float': float, 'str': str, 'len': len        }    }        try:        return eval(expression, safe_globals, {})    except Exception as e:        raise ValueError(f\"æ‰§è¡Œé”™è¯¯: {e}\")# æµ‹è¯•å®‰å…¨æ–¹æ³•print(\"\\nå®‰å…¨æ–¹æ³•æµ‹è¯•:\")safe_expressions = [    \"2 + 3 * 4\",    \"max(1, 5, 3)\",    \"abs(-42)\",    \"round(3.14159, 2)\",    \"int('123') + float('45.6')\",    \"len('hello world')\"]unsafe_expressions = [    \"__import__('os')\",    \"exec('print(1)')\",    \"open('file.txt')\",    \"globals()\",    \"[].append.__globals__\"]for method_name, method in [('æ–¹æ³•1', safe_eval_v1), ('æ–¹æ³•2', safe_eval_v2), ('æ–¹æ³•3', safe_eval_v3)]:    print(f\"\\n{method_name}æµ‹è¯•:\")        print(\"  å®‰å…¨è¡¨è¾¾å¼:\")    for expr in safe_expressions:        try:            result = method(expr)            print(f\"    {expr} = {result}\")        except Exception as e:            print(f\"    {expr} å¤±è´¥: {e}\")        print(\"  ä¸å®‰å…¨è¡¨è¾¾å¼:\")    for expr in unsafe_expressions:        try:            result = method(expr)            print(f\"    {expr} = {result} (ä¸åº”è¯¥æˆåŠŸ!)\")        except Exception as e:            print(f\"    {expr} è¢«é˜»æ­¢: {e}\")æ€§èƒ½ä¼˜åŒ–import timefrom functools import lru_cache# æ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹print(\"\\næ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹:\")# é—®é¢˜1ï¼šé‡å¤ç¼–è¯‘print(\"1. ç¼–è¯‘ç¼“å­˜ä¼˜åŒ–:\")# ä½æ•ˆçš„æ–¹æ³•def slow_evaluator(expressions, variables):    \"\"\"æ…¢é€Ÿæ±‚å€¼å™¨\"\"\"    results = []    for expr in expressions:        result = eval(expr, {}, variables)        results.append(result)    return results# ä¼˜åŒ–çš„æ–¹æ³•class CachedEvaluator:    \"\"\"ç¼“å­˜æ±‚å€¼å™¨\"\"\"        def __init__(self):        self.compiled_cache = {}        @lru_cache(maxsize=128)    def compile_expression(self, expression):        \"\"\"ç¼–è¯‘å¹¶ç¼“å­˜è¡¨è¾¾å¼\"\"\"        return compile(expression, '&lt;string&gt;', 'eval')        def evaluate(self, expression, variables):        \"\"\"æ±‚å€¼è¡¨è¾¾å¼\"\"\"        compiled_expr = self.compile_expression(expression)        return eval(compiled_expr, {}, variables)        def evaluate_batch(self, expressions, variables):        \"\"\"æ‰¹é‡æ±‚å€¼\"\"\"        return [self.evaluate(expr, variables) for expr in expressions]# æ€§èƒ½æµ‹è¯•test_expressions = [    \"x + y\",    \"x * y + z\",    \"max(x, y, z)\",    \"(x + y) * z / 2\",    \"x ** 2 + y ** 2 + z ** 2\"] * 100  # é‡å¤100æ¬¡test_variables = {'x': 10, 'y': 20, 'z': 30}# æµ‹è¯•æ…¢é€Ÿæ–¹æ³•start_time = time.time()slow_results = slow_evaluator(test_expressions, test_variables)slow_time = time.time() - start_time# æµ‹è¯•å¿«é€Ÿæ–¹æ³•cached_evaluator = CachedEvaluator()start_time = time.time()fast_results = cached_evaluator.evaluate_batch(test_expressions, test_variables)fast_time = time.time() - start_timeprint(f\"æ…¢é€Ÿæ–¹æ³•è€—æ—¶: {slow_time:.4f}ç§’\")print(f\"ç¼“å­˜æ–¹æ³•è€—æ—¶: {fast_time:.4f}ç§’\")print(f\"æ€§èƒ½æå‡: {slow_time/fast_time:.1f}å€\")print(f\"ç»“æœä¸€è‡´: {slow_results == fast_results}\")# é—®é¢˜2ï¼šå¤æ‚è¡¨è¾¾å¼ä¼˜åŒ–print(f\"\\n2. å¤æ‚è¡¨è¾¾å¼ä¼˜åŒ–:\")# ä½¿ç”¨é¢„è®¡ç®—ä¼˜åŒ–å¤æ‚è¡¨è¾¾å¼class OptimizedEvaluator:    \"\"\"ä¼˜åŒ–çš„æ±‚å€¼å™¨\"\"\"        def __init__(self):        self.cache = {}        self.precomputed = {}        def precompute_constants(self, expression, constants):        \"\"\"é¢„è®¡ç®—å¸¸é‡\"\"\"        # ç®€å•çš„å¸¸é‡æ›¿æ¢        optimized_expr = expression        for name, value in constants.items():            optimized_expr = optimized_expr.replace(name, str(value))                self.precomputed[expression] = optimized_expr        return optimized_expr        def evaluate_optimized(self, expression, variables, constants=None):        \"\"\"ä¼˜åŒ–æ±‚å€¼\"\"\"        if constants:            if expression not in self.precomputed:                self.precompute_constants(expression, constants)            expression = self.precomputed[expression]                return eval(expression, {}, variables)# æµ‹è¯•ä¼˜åŒ–optimized_evaluator = OptimizedEvaluator()# åŒ…å«å¸¸é‡çš„å¤æ‚è¡¨è¾¾å¼complex_expr = \"pi * r ** 2 + e * h\"constants = {'pi': 3.14159, 'e': 2.71828}variables = {'r': 5, 'h': 10}# æ™®é€šæ–¹æ³•start_time = time.time()for _ in range(1000):    result1 = eval(complex_expr, {}, {**constants, **variables})normal_time = time.time() - start_time# ä¼˜åŒ–æ–¹æ³•start_time = time.time()for _ in range(1000):    result2 = optimized_evaluator.evaluate_optimized(complex_expr, variables, constants)optimized_time = time.time() - start_timeprint(f\"æ™®é€šæ–¹æ³•è€—æ—¶: {normal_time:.4f}ç§’\")print(f\"ä¼˜åŒ–æ–¹æ³•è€—æ—¶: {optimized_time:.4f}ç§’\")print(f\"æ€§èƒ½æå‡: {normal_time/optimized_time:.1f}å€\")print(f\"ç»“æœä¸€è‡´: {abs(result1 - result2) &lt; 1e-10}\")ğŸ“š ç›¸å…³å‡½æ•°å’Œæ¨¡å—å†…ç½®å‡½æ•°  exec() - æ‰§è¡ŒPythonè¯­å¥  compile() - ç¼–è¯‘Pythonä»£ç   globals() - è·å–å…¨å±€å‘½åç©ºé—´  locals() - è·å–å±€éƒ¨å‘½åç©ºé—´  vars() - è·å–å¯¹è±¡çš„å±æ€§å­—å…¸  dir() - åˆ—å‡ºå¯¹è±¡çš„å±æ€§  hasattr() - æ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨  getattr() - è·å–å±æ€§å€¼  setattr() - è®¾ç½®å±æ€§å€¼æ ‡å‡†åº“æ¨¡å—  ast - æŠ½è±¡è¯­æ³•æ ‘  code - äº¤äº’å¼è§£é‡Šå™¨  codeop - ç¼–è¯‘Pythonä»£ç   dis - å­—èŠ‚ç åæ±‡ç¼–  inspect - å¯¹è±¡æ£€æŸ¥  types - åŠ¨æ€ç±»å‹åˆ›å»º  operator - å‡½æ•°å½¢å¼çš„æ“ä½œç¬¦  math - æ•°å­¦å‡½æ•°  re - æ­£åˆ™è¡¨è¾¾å¼ç¬¬ä¸‰æ–¹åº“  sympy - ç¬¦å·æ•°å­¦  numexpr - å¿«é€Ÿæ•°å€¼è¡¨è¾¾å¼æ±‚å€¼  asteval - å®‰å…¨çš„è¡¨è¾¾å¼æ±‚å€¼  RestrictedPython - å—é™çš„Pythonæ‰§è¡Œ  pyparsing - è§£æåº“ğŸ“– æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£          Built-in Functions - eval()      AST - Abstract Syntax Trees        å®‰å…¨ç›¸å…³          Pythonä»£ç æ³¨å…¥æ”»å‡»      å®‰å…¨ç¼–ç¨‹æœ€ä½³å®è·µ      æ²™ç®±æ‰§è¡Œç¯å¢ƒ        æ€§èƒ½ä¼˜åŒ–          è¡¨è¾¾å¼ç¼–è¯‘å’Œç¼“å­˜      æ•°å€¼è®¡ç®—ä¼˜åŒ–      è§£é‡Šå™¨æ€§èƒ½è°ƒä¼˜      ğŸ·ï¸ æ ‡ç­¾è¡¨è¾¾å¼æ±‚å€¼ åŠ¨æ€æ‰§è¡Œ ä»£ç æ‰§è¡Œ å®‰å…¨é£é™© ASTè§£æ æ€§èƒ½ä¼˜åŒ– é…ç½®è§£æ è®¡ç®—å™¨ å…¬å¼å¼•æ“ æ²™ç®±æ‰§è¡Œ",
        "url": "/docs/builtins/eval/",
        "category": "builtins",
        "tags": ["è¡¨è¾¾å¼æ±‚å€¼","åŠ¨æ€æ‰§è¡Œ","ä»£ç æ‰§è¡Œ","å®‰å…¨é£é™©"]
      }
      
    
  
    
      ,
      {
        "title": "exec() - ä»£ç æ‰§è¡Œå‡½æ•°",
        "content": "exec() - ä»£ç æ‰§è¡Œå‡½æ•°ğŸ“ æ¦‚è¿°exec() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºæ‰§è¡Œå­—ç¬¦ä¸²å½¢å¼çš„Pythonä»£ç ã€‚ä¸ eval() ä¸åŒï¼Œexec() å¯ä»¥æ‰§è¡Œå®Œæ•´çš„Pythonè¯­å¥ï¼ŒåŒ…æ‹¬èµ‹å€¼ã€å¾ªç¯ã€å‡½æ•°å®šä¹‰ã€ç±»å®šä¹‰ç­‰ã€‚è¿™ä¸ªå‡½æ•°æä¾›äº†å¼ºå¤§çš„åŠ¨æ€ä»£ç æ‰§è¡Œèƒ½åŠ›ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸¥é‡çš„å®‰å…¨é£é™©ã€‚âš ï¸ å®‰å…¨è­¦å‘Šexec()å‡½æ•°å­˜åœ¨æé«˜çš„å®‰å…¨é£é™©ï¼  æ°¸è¿œä¸è¦å¯¹ä¸å¯ä¿¡çš„è¾“å…¥ä½¿ç”¨exec()  æ¶æ„ä»£ç å¯èƒ½å®Œå…¨æ§åˆ¶ç³»ç»Ÿ  åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ—¶å¿…é¡»è¿›è¡Œä¸¥æ ¼çš„å®‰å…¨æ§åˆ¶  è€ƒè™‘ä½¿ç”¨æ›´å®‰å…¨çš„æ›¿ä»£æ–¹æ¡ˆğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡exec()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œè¯­æ³•  ç†è§£exec()ä¸eval()çš„åŒºåˆ«  å­¦ä¼šå®‰å…¨åœ°ä½¿ç”¨exec()å‡½æ•°  äº†è§£exec()çš„åº”ç”¨åœºæ™¯å’Œé™åˆ¶  æŒæ¡åŠ¨æ€ä»£ç ç”Ÿæˆå’Œæ‰§è¡ŒæŠ€æœ¯ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  è¡¨è¾¾å¼å’Œè¯­å¥çš„åŒºåˆ«  ä½œç”¨åŸŸå’Œå‘½åç©ºé—´çš„æ¦‚å¿µ  å¼‚å¸¸å¤„ç†çš„åŸºæœ¬çŸ¥è¯†  å®‰å…¨ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µ  é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µexec() å‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œå°†å…¶ä½œä¸ºPythonä»£ç è¿›è¡Œæ‰§è¡Œã€‚å®ƒå¯ä»¥æ‰§è¡Œä»»ä½•æœ‰æ•ˆçš„Pythonè¯­å¥ï¼ŒåŒ…æ‹¬ï¼š  èµ‹å€¼è¯­å¥  æ§åˆ¶æµè¯­å¥ï¼ˆifã€forã€whileç­‰ï¼‰  å‡½æ•°å®šä¹‰  ç±»å®šä¹‰  å¯¼å…¥è¯­å¥  å…¶ä»–å¤æ‚çš„Pythonä»£ç è¯­æ³•æ ¼å¼exec(object, globals=None, locals=None)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  object      å­—ç¬¦ä¸²æˆ–ä»£ç å¯¹è±¡      æ˜¯      æ—       è¦æ‰§è¡Œçš„Pythonä»£ç               globals      å­—å…¸      å¦      None      å…¨å±€å‘½åç©ºé—´              locals      å­—å…¸      å¦      None      å±€éƒ¨å‘½åç©ºé—´      è¿”å›å€¼  ç±»å‹: None  è¯´æ˜: exec()æ€»æ˜¯è¿”å›Noneï¼Œä½†æ‰§è¡Œçš„ä»£ç å¯èƒ½ä¼šä¿®æ”¹å‘½åç©ºé—´ğŸ’¡ ä»£ç ç¤ºä¾‹åŸºæœ¬ç”¨æ³•# åŸºæœ¬è¯­å¥æ‰§è¡Œprint(\"åŸºæœ¬è¯­å¥æ‰§è¡Œ:\")# ç®€å•èµ‹å€¼exec(\"x = 10\")print(f\"x = {x}\")  # 10# å¤šè¡Œä»£ç code = \"\"\"y = 20z = x + yprint(f'x + y = {z}')\"\"\"exec(code)# æ§åˆ¶æµè¯­å¥loop_code = \"\"\"for i in range(3):    print(f'å¾ªç¯ {i}')\"\"\"print(\"\\næ§åˆ¶æµæ‰§è¡Œ:\")exec(loop_code)# æ¡ä»¶è¯­å¥condition_code = \"\"\"if x &gt; 5:    print('x å¤§äº 5')else:    print('x ä¸å¤§äº 5')\"\"\"print(\"\\næ¡ä»¶è¯­å¥æ‰§è¡Œ:\")exec(condition_code)# å‡½æ•°å®šä¹‰å’Œè°ƒç”¨function_code = \"\"\"def greet(name):    return f'Hello, {name}!'message = greet('Python')print(message)\"\"\"print(\"\\nå‡½æ•°å®šä¹‰æ‰§è¡Œ:\")exec(function_code)# ç±»å®šä¹‰class_code = \"\"\"class Person:    def __init__(self, name, age):        self.name = name        self.age = age        def introduce(self):        return f'æˆ‘æ˜¯{self.name}ï¼Œ{self.age}å²'person = Person('å¼ ä¸‰', 25)print(person.introduce())\"\"\"print(\"\\nç±»å®šä¹‰æ‰§è¡Œ:\")exec(class_code)ä½¿ç”¨è‡ªå®šä¹‰å‘½åç©ºé—´# è‡ªå®šä¹‰å‘½åç©ºé—´ç¤ºä¾‹print(\"\\nè‡ªå®šä¹‰å‘½åç©ºé—´ç¤ºä¾‹:\")# åˆ›å»ºéš”ç¦»çš„å…¨å±€å‘½åç©ºé—´custom_globals = {    '__builtins__': {        'print': print,        'len': len,        'range': range,        'str': str,        'int': int,        'float': float    },    'math_pi': 3.14159,    'math_e': 2.71828}# åˆ›å»ºå±€éƒ¨å‘½åç©ºé—´custom_locals = {}# åœ¨è‡ªå®šä¹‰å‘½åç©ºé—´ä¸­æ‰§è¡Œä»£ç code_with_namespace = \"\"\"# å®šä¹‰ä¸€äº›å˜é‡radius = 5area = math_pi * radius ** 2# å®šä¹‰å‡½æ•°def calculate_circle_area(r):    return math_pi * r ** 2def calculate_volume(r, h):    base_area = calculate_circle_area(r)    return base_area * h# è®¡ç®—ç»“æœresults = {    'area': area,    'volume': calculate_volume(3, 10)}print(f'åœ†é¢ç§¯: {area}')print(f'åœ†æŸ±ä½“ç§¯: {results[\"volume\"]}')\"\"\"print(\"åœ¨è‡ªå®šä¹‰å‘½åç©ºé—´ä¸­æ‰§è¡Œ:\")exec(code_with_namespace, custom_globals, custom_locals)# æŸ¥çœ‹æ‰§è¡Œåçš„å±€éƒ¨å˜é‡print(f\"\\næ‰§è¡Œåçš„å±€éƒ¨å˜é‡:\")for key, value in custom_locals.items():    if not key.startswith('__'):        print(f\"  {key}: {value}\")# å°è¯•è®¿é—®è¢«é™åˆ¶çš„åŠŸèƒ½print(f\"\\nå®‰å…¨æ€§æµ‹è¯•:\")try:    restricted_code = \"\"\"import osos.system('echo \"è¿™ä¸åº”è¯¥æ‰§è¡Œ\"')\"\"\"    exec(restricted_code, custom_globals, {})except Exception as e:    print(f\"è®¿é—®å—é™åŠŸèƒ½å¤±è´¥ï¼ˆé¢„æœŸï¼‰: {e}\")# åŠ¨æ€å˜é‡è®¿é—®print(f\"\\nåŠ¨æ€å˜é‡è®¿é—®:\")# ä»å±€éƒ¨å‘½åç©ºé—´è·å–å‡½æ•°if 'calculate_circle_area' in custom_locals:    calc_func = custom_locals['calculate_circle_area']    result = calc_func(7)    print(f\"åŠ¨æ€è°ƒç”¨å‡½æ•°ç»“æœ: {result}\")åŠ¨æ€ä»£ç ç”Ÿæˆ# åŠ¨æ€ä»£ç ç”Ÿæˆç¤ºä¾‹print(\"\\nåŠ¨æ€ä»£ç ç”Ÿæˆç¤ºä¾‹:\")# ä»£ç ç”Ÿæˆå™¨ç±»class CodeGenerator:    \"\"\"åŠ¨æ€ä»£ç ç”Ÿæˆå™¨\"\"\"        def __init__(self):        self.indent_level = 0        self.code_lines = []        def add_line(self, line):        \"\"\"æ·»åŠ ä»£ç è¡Œ\"\"\"        indent = '    ' * self.indent_level        self.code_lines.append(indent + line)        def indent(self):        \"\"\"å¢åŠ ç¼©è¿›\"\"\"        self.indent_level += 1        def dedent(self):        \"\"\"å‡å°‘ç¼©è¿›\"\"\"        if self.indent_level &gt; 0:            self.indent_level -= 1        def get_code(self):        \"\"\"è·å–ç”Ÿæˆçš„ä»£ç \"\"\"        return '\\n'.join(self.code_lines)        def clear(self):        \"\"\"æ¸…ç©ºä»£ç \"\"\"        self.code_lines = []        self.indent_level = 0# ç”Ÿæˆæ•°å­¦å‡½æ•°def generate_math_function(func_name, operations):    \"\"\"ç”Ÿæˆæ•°å­¦å‡½æ•°\"\"\"    generator = CodeGenerator()        # å‡½æ•°å®šä¹‰    generator.add_line(f\"def {func_name}(x):\")    generator.indent()        # æ·»åŠ æ“ä½œ    for i, op in enumerate(operations):        if i == 0:            generator.add_line(f\"result = x {op}\")        else:            generator.add_line(f\"result = result {op}\")        # è¿”å›ç»“æœ    generator.add_line(\"return result\")        return generator.get_code()# ç”Ÿæˆå¹¶æ‰§è¡Œæ•°å­¦å‡½æ•°math_operations = ['+ 10', '* 2', '- 5']math_code = generate_math_function('custom_math', math_operations)print(\"ç”Ÿæˆçš„æ•°å­¦å‡½æ•°ä»£ç :\")print(math_code)print(\"\\næ‰§è¡Œç”Ÿæˆçš„å‡½æ•°:\")exec(math_code)# æµ‹è¯•ç”Ÿæˆçš„å‡½æ•°test_values = [1, 5, 10, 15]for val in test_values:    result = custom_math(val)    print(f\"custom_math({val}) = {result}\")# ç”Ÿæˆç±»å®šä¹‰def generate_data_class(class_name, fields):    \"\"\"ç”Ÿæˆæ•°æ®ç±»\"\"\"    generator = CodeGenerator()        # ç±»å®šä¹‰    generator.add_line(f\"class {class_name}:\")    generator.indent()        # __init__ æ–¹æ³•    params = ', '.join(fields)    generator.add_line(f\"def __init__(self, {params}):\")    generator.indent()        for field in fields:        generator.add_line(f\"self.{field} = {field}\")        generator.dedent()        # __str__ æ–¹æ³•    generator.add_line(\"def __str__(self):\")    generator.indent()        field_strs = [f\"'{field}: }'\".replace('{field}', f'self.{field}') for field in fields]    fields_format = ' + \", \" + '.join(field_strs)    generator.add_line(f\"return f'{class_name}(' + {fields_format} + ')'\")        generator.dedent()        # __repr__ æ–¹æ³•    generator.add_line(\"def __repr__(self):\")    generator.indent()    generator.add_line(\"return self.__str__()\")        return generator.get_code()# ç”Ÿæˆå¹¶æ‰§è¡Œæ•°æ®ç±»data_fields = ['name', 'age', 'city']data_class_code = generate_data_class('Person', data_fields)print(f\"\\nç”Ÿæˆçš„æ•°æ®ç±»ä»£ç :\")print(data_class_code)print(f\"\\næ‰§è¡Œç”Ÿæˆçš„ç±»:\")exec(data_class_code)# æµ‹è¯•ç”Ÿæˆçš„ç±»person1 = Person('Alice', 30, 'Beijing')person2 = Person('Bob', 25, 'Shanghai')print(f\"person1: {person1}\")print(f\"person2: {person2}\")é…ç½®é©±åŠ¨çš„ä»£ç æ‰§è¡Œimport jsonfrom typing import Dict, Any, List# é…ç½®é©±åŠ¨çš„ä»£ç æ‰§è¡Œç³»ç»Ÿclass ConfigDrivenExecutor:    \"\"\"é…ç½®é©±åŠ¨çš„ä»£ç æ‰§è¡Œå™¨\"\"\"        def __init__(self):        self.safe_builtins = {            'print': print,            'len': len,            'range': range,            'enumerate': enumerate,            'zip': zip,            'map': map,            'filter': filter,            'sum': sum,            'max': max,            'min': min,            'abs': abs,            'round': round,            'int': int,            'float': float,            'str': str,            'bool': bool,            'list': list,            'tuple': tuple,            'dict': dict,            'set': set        }                self.execution_context = {            '__builtins__': self.safe_builtins,            'data': {},            'results': {},            'config': {}        }        def load_config(self, config_data: Dict[str, Any]):        \"\"\"åŠ è½½é…ç½®\"\"\"        self.execution_context['config'] = config_data        def set_data(self, data: Dict[str, Any]):        \"\"\"è®¾ç½®æ•°æ®\"\"\"        self.execution_context['data'] = data        def execute_script(self, script: str) -&gt; Dict[str, Any]:        \"\"\"æ‰§è¡Œè„šæœ¬\"\"\"        try:            # åˆ›å»ºç‹¬ç«‹çš„å±€éƒ¨å‘½åç©ºé—´            local_context = {}                        # æ‰§è¡Œè„šæœ¬            exec(script, self.execution_context, local_context)                        # æ›´æ–°ç»“æœ            if 'results' in local_context:                self.execution_context['results'].update(local_context['results'])                        return local_context                    except Exception as e:            raise RuntimeError(f\"è„šæœ¬æ‰§è¡Œå¤±è´¥: {e}\")        def execute_config_scripts(self, config: Dict[str, Any]) -&gt; Dict[str, Any]:        \"\"\"æ‰§è¡Œé…ç½®ä¸­çš„è„šæœ¬\"\"\"        self.load_config(config)        results = {}                # æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬        if 'init_script' in config:            print(\"æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬...\")            init_result = self.execute_script(config['init_script'])            results['init'] = init_result                # æ‰§è¡Œæ•°æ®å¤„ç†è„šæœ¬        if 'data_scripts' in config:            results['data_processing'] = []            for i, script in enumerate(config['data_scripts']):                print(f\"æ‰§è¡Œæ•°æ®å¤„ç†è„šæœ¬ {i+1}...\")                script_result = self.execute_script(script)                results['data_processing'].append(script_result)                # æ‰§è¡Œæ¸…ç†è„šæœ¬        if 'cleanup_script' in config:            print(\"æ‰§è¡Œæ¸…ç†è„šæœ¬...\")            cleanup_result = self.execute_script(config['cleanup_script'])            results['cleanup'] = cleanup_result                return results# æµ‹è¯•é…ç½®é©±åŠ¨æ‰§è¡Œprint(\"\\né…ç½®é©±åŠ¨æ‰§è¡Œç¤ºä¾‹:\")executor = ConfigDrivenExecutor()# è®¾ç½®æµ‹è¯•æ•°æ®test_data = {    'numbers': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],    'names': ['Alice', 'Bob', 'Charlie', 'David'],    'scores': [85, 92, 78, 96]}executor.set_data(test_data)# é…ç½®è„šæœ¬config = {    'init_script': '''# åˆå§‹åŒ–å˜é‡total_count = 0processed_items = []statistics = {}print(\"åˆå§‹åŒ–å®Œæˆ\")''',        'data_scripts': [        '''# å¤„ç†æ•°å­—æ•°æ®numbers = data['numbers']even_numbers = [n for n in numbers if n % 2 == 0]odd_numbers = [n for n in numbers if n % 2 == 1]statistics['even_count'] = len(even_numbers)statistics['odd_count'] = len(odd_numbers)statistics['total_sum'] = sum(numbers)statistics['average'] = sum(numbers) / len(numbers)print(f\"å¤„ç†äº† {len(numbers)} ä¸ªæ•°å­—\")print(f\"å¶æ•°: {even_numbers}\")print(f\"å¥‡æ•°: {odd_numbers}\")''',                '''# å¤„ç†åå­—å’Œåˆ†æ•°æ•°æ®names = data['names']scores = data['scores']# åˆ›å»ºå­¦ç”Ÿè®°å½•students = []for name, score in zip(names, scores):    grade = 'A' if score &gt;= 90 else 'B' if score &gt;= 80 else 'C'    students.append({        'name': name,        'score': score,        'grade': grade    })# ç»Ÿè®¡æˆç»©grade_counts = {'A': 0, 'B': 0, 'C': 0}for student in students:    grade_counts[student['grade']] += 1statistics['students'] = studentsstatistics['grade_distribution'] = grade_countsstatistics['highest_score'] = max(scores)statistics['lowest_score'] = min(scores)print(f\"å¤„ç†äº† {len(students)} ä¸ªå­¦ç”Ÿè®°å½•\")for student in students:    print(f\"  {student['name']}: {student['score']} ({student['grade']})\")'''    ],        'cleanup_script': '''# ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šreport = {    'summary': {        'total_numbers': len(data['numbers']),        'total_students': len(data['names']),        'processing_complete': True    },    'statistics': statistics}results['final_report'] = reportprint(\"\\n=== æœ€ç»ˆæŠ¥å‘Š ===\")print(f\"å¤„ç†æ•°å­—æ€»æ•°: {report['summary']['total_numbers']}\")print(f\"å­¦ç”Ÿæ€»æ•°: {report['summary']['total_students']}\")print(f\"æ•°å­—æ€»å’Œ: {statistics['total_sum']}\")print(f\"å¹³å‡å€¼: {statistics['average']:.2f}\")print(f\"æœ€é«˜åˆ†: {statistics['highest_score']}\")print(f\"æœ€ä½åˆ†: {statistics['lowest_score']}\")print(f\"æˆç»©åˆ†å¸ƒ: {statistics['grade_distribution']}\")print(\"å¤„ç†å®Œæˆ!\")'''}# æ‰§è¡Œé…ç½®è„šæœ¬print(\"å¼€å§‹æ‰§è¡Œé…ç½®è„šæœ¬:\")print(\"=\" * 50)try:    execution_results = executor.execute_config_scripts(config)        print(\"\\n=== æ‰§è¡Œç»“æœ ===\")    if 'final_report' in executor.execution_context['results']:        final_report = executor.execution_context['results']['final_report']        print(\"æœ€ç»ˆæŠ¥å‘Šå·²ç”Ÿæˆ\")        print(f\"ç»Ÿè®¡ä¿¡æ¯: {len(final_report['statistics'])} é¡¹\")    except Exception as e:    print(f\"æ‰§è¡Œå¤±è´¥: {e}\")ğŸš€ é«˜çº§åº”ç”¨æ’ä»¶ç³»ç»Ÿimport osimport importlib.utilfrom typing import Dict, Any, List, Callablefrom abc import ABC, abstractmethod# æ’ä»¶ç³»ç»Ÿå®ç°class Plugin(ABC):    \"\"\"æ’ä»¶åŸºç±»\"\"\"        @abstractmethod    def get_name(self) -&gt; str:        \"\"\"è·å–æ’ä»¶åç§°\"\"\"        pass        @abstractmethod    def get_version(self) -&gt; str:        \"\"\"è·å–æ’ä»¶ç‰ˆæœ¬\"\"\"        pass        @abstractmethod    def execute(self, context: Dict[str, Any]) -&gt; Any:        \"\"\"æ‰§è¡Œæ’ä»¶\"\"\"        passclass PluginManager:    \"\"\"æ’ä»¶ç®¡ç†å™¨\"\"\"        def __init__(self):        self.plugins: Dict[str, Plugin] = {}        self.plugin_code_cache: Dict[str, str] = {}                # å®‰å…¨çš„æ‰§è¡Œç¯å¢ƒ        self.safe_globals = {            '__builtins__': {                'print': print,                'len': len,                'range': range,                'enumerate': enumerate,                'zip': zip,                'sum': sum,                'max': max,                'min': min,                'abs': abs,                'round': round,                'int': int,                'float': float,                'str': str,                'bool': bool,                'list': list,                'tuple': tuple,                'dict': dict,                'set': set            },            'Plugin': Plugin        }        def load_plugin_from_code(self, plugin_name: str, plugin_code: str) -&gt; bool:        \"\"\"ä»ä»£ç åŠ è½½æ’ä»¶\"\"\"        try:            # åˆ›å»ºæ’ä»¶å‘½åç©ºé—´            plugin_namespace = {}                        # æ‰§è¡Œæ’ä»¶ä»£ç             exec(plugin_code, self.safe_globals, plugin_namespace)                        # æŸ¥æ‰¾æ’ä»¶ç±»            plugin_class = None            for name, obj in plugin_namespace.items():                if (isinstance(obj, type) and                     issubclass(obj, Plugin) and                     obj != Plugin):                    plugin_class = obj                    break                        if plugin_class is None:                raise ValueError(\"æœªæ‰¾åˆ°æœ‰æ•ˆçš„æ’ä»¶ç±»\")                        # åˆ›å»ºæ’ä»¶å®ä¾‹            plugin_instance = plugin_class()                        # æ³¨å†Œæ’ä»¶            self.plugins[plugin_name] = plugin_instance            self.plugin_code_cache[plugin_name] = plugin_code                        print(f\"æ’ä»¶ '{plugin_name}' åŠ è½½æˆåŠŸ\")            print(f\"  åç§°: {plugin_instance.get_name()}\")            print(f\"  ç‰ˆæœ¬: {plugin_instance.get_version()}\")                        return True                    except Exception as e:            print(f\"åŠ è½½æ’ä»¶ '{plugin_name}' å¤±è´¥: {e}\")            return False        def execute_plugin(self, plugin_name: str, context: Dict[str, Any] = None) -&gt; Any:        \"\"\"æ‰§è¡Œæ’ä»¶\"\"\"        if plugin_name not in self.plugins:            raise ValueError(f\"æ’ä»¶ '{plugin_name}' æœªæ‰¾åˆ°\")                plugin = self.plugins[plugin_name]        context = context or {}                try:            return plugin.execute(context)        except Exception as e:            raise RuntimeError(f\"æ‰§è¡Œæ’ä»¶ '{plugin_name}' å¤±è´¥: {e}\")        def list_plugins(self) -&gt; List[Dict[str, str]]:        \"\"\"åˆ—å‡ºæ‰€æœ‰æ’ä»¶\"\"\"        plugin_list = []        for name, plugin in self.plugins.items():            plugin_list.append({                'name': name,                'plugin_name': plugin.get_name(),                'version': plugin.get_version()            })        return plugin_list        def unload_plugin(self, plugin_name: str) -&gt; bool:        \"\"\"å¸è½½æ’ä»¶\"\"\"        if plugin_name in self.plugins:            del self.plugins[plugin_name]            if plugin_name in self.plugin_code_cache:                del self.plugin_code_cache[plugin_name]            print(f\"æ’ä»¶ '{plugin_name}' å·²å¸è½½\")            return True        return False# æµ‹è¯•æ’ä»¶ç³»ç»Ÿprint(\"\\næ’ä»¶ç³»ç»Ÿç¤ºä¾‹:\")plugin_manager = PluginManager()# æ•°å­¦è®¡ç®—æ’ä»¶math_plugin_code = '''class MathPlugin(Plugin):    \"\"\"æ•°å­¦è®¡ç®—æ’ä»¶\"\"\"        def get_name(self) -&gt; str:        return \"æ•°å­¦è®¡ç®—å™¨\"        def get_version(self) -&gt; str:        return \"1.0.0\"        def execute(self, context: dict) -&gt; dict:        numbers = context.get('numbers', [])                if not numbers:            return {'error': 'æ²¡æœ‰æä¾›æ•°å­—'}                results = {            'count': len(numbers),            'sum': sum(numbers),            'average': sum(numbers) / len(numbers),            'min': min(numbers),            'max': max(numbers),            'even_count': len([n for n in numbers if n % 2 == 0]),            'odd_count': len([n for n in numbers if n % 2 == 1])        }                return results'''# æ–‡æœ¬å¤„ç†æ’ä»¶text_plugin_code = '''class TextPlugin(Plugin):    \"\"\"æ–‡æœ¬å¤„ç†æ’ä»¶\"\"\"        def get_name(self) -&gt; str:        return \"æ–‡æœ¬å¤„ç†å™¨\"        def get_version(self) -&gt; str:        return \"1.1.0\"        def execute(self, context: dict) -&gt; dict:        text = context.get('text', '')                if not text:            return {'error': 'æ²¡æœ‰æä¾›æ–‡æœ¬'}                words = text.split()                results = {            'original_text': text,            'character_count': len(text),            'word_count': len(words),            'line_count': text.count('\\\\n') + 1,            'uppercase': text.upper(),            'lowercase': text.lower(),            'title_case': text.title(),            'word_frequency': {}        }                # è®¡ç®—è¯é¢‘        for word in words:            clean_word = word.lower().strip('.,!?;:')            if clean_word:                results['word_frequency'][clean_word] = results['word_frequency'].get(clean_word, 0) + 1                return results'''# æ•°æ®åˆ†ææ’ä»¶data_plugin_code = '''class DataAnalysisPlugin(Plugin):    \"\"\"æ•°æ®åˆ†ææ’ä»¶\"\"\"        def get_name(self) -&gt; str:        return \"æ•°æ®åˆ†æå™¨\"        def get_version(self) -&gt; str:        return \"2.0.0\"        def execute(self, context: dict) -&gt; dict:        data = context.get('data', [])                if not data:            return {'error': 'æ²¡æœ‰æä¾›æ•°æ®'}                # åˆ†æä¸åŒç±»å‹çš„æ•°æ®        analysis = {            'total_items': len(data),            'data_types': {},            'numeric_analysis': {},            'string_analysis': {},            'list_analysis': {}        }                # ç»Ÿè®¡æ•°æ®ç±»å‹        for item in data:            item_type = type(item).__name__            analysis['data_types'][item_type] = analysis['data_types'].get(item_type, 0) + 1                # æ•°å€¼åˆ†æ        numeric_data = [item for item in data if isinstance(item, (int, float))]        if numeric_data:            analysis['numeric_analysis'] = {                'count': len(numeric_data),                'sum': sum(numeric_data),                'average': sum(numeric_data) / len(numeric_data),                'min': min(numeric_data),                'max': max(numeric_data)            }                # å­—ç¬¦ä¸²åˆ†æ        string_data = [item for item in data if isinstance(item, str)]        if string_data:            analysis['string_analysis'] = {                'count': len(string_data),                'total_length': sum(len(s) for s in string_data),                'average_length': sum(len(s) for s in string_data) / len(string_data),                'longest': max(string_data, key=len),                'shortest': min(string_data, key=len)            }                # åˆ—è¡¨åˆ†æ        list_data = [item for item in data if isinstance(item, list)]        if list_data:            analysis['list_analysis'] = {                'count': len(list_data),                'total_elements': sum(len(lst) for lst in list_data),                'average_length': sum(len(lst) for lst in list_data) / len(list_data)            }                return analysis'''# åŠ è½½æ’ä»¶print(\"åŠ è½½æ’ä»¶:\")plugin_manager.load_plugin_from_code('math', math_plugin_code)plugin_manager.load_plugin_from_code('text', text_plugin_code)plugin_manager.load_plugin_from_code('data', data_plugin_code)# åˆ—å‡ºæ’ä»¶print(f\"\\nå·²åŠ è½½çš„æ’ä»¶:\")for plugin_info in plugin_manager.list_plugins():    print(f\"  {plugin_info['name']}: {plugin_info['plugin_name']} v{plugin_info['version']}\")# æµ‹è¯•æ•°å­¦æ’ä»¶print(f\"\\næµ‹è¯•æ•°å­¦æ’ä»¶:\")math_context = {'numbers': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}math_result = plugin_manager.execute_plugin('math', math_context)print(f\"æ•°å­¦è®¡ç®—ç»“æœ: {math_result}\")# æµ‹è¯•æ–‡æœ¬æ’ä»¶print(f\"\\næµ‹è¯•æ–‡æœ¬æ’ä»¶:\")text_context = {'text': 'Hello World! This is a test text. Hello again!'}text_result = plugin_manager.execute_plugin('text', text_context)print(f\"æ–‡æœ¬å¤„ç†ç»“æœ:\")for key, value in text_result.items():    if key != 'word_frequency':        print(f\"  {key}: {value}\")print(f\"  è¯é¢‘ç»Ÿè®¡: {text_result['word_frequency']}\")# æµ‹è¯•æ•°æ®åˆ†ææ’ä»¶print(f\"\\næµ‹è¯•æ•°æ®åˆ†ææ’ä»¶:\")data_context = {    'data': [1, 2, 3, 'hello', 'world', [1, 2, 3], [4, 5], 4.5, 'test', [6, 7, 8, 9]]}data_result = plugin_manager.execute_plugin('data', data_context)print(f\"æ•°æ®åˆ†æç»“æœ:\")for key, value in data_result.items():    print(f\"  {key}: {value}\")æ¨¡æ¿å¼•æ“import refrom typing import Dict, Any, List, Optional# ç®€å•çš„æ¨¡æ¿å¼•æ“class TemplateEngine:    \"\"\"ç®€å•çš„æ¨¡æ¿å¼•æ“\"\"\"        def __init__(self):        # æ¨¡æ¿è¯­æ³•æ¨¡å¼                self.variable_pattern = re.compile(r'\\{\\{\\s*([^}]+)\\s*\\}\\}')        self.code_block_pattern = re.compile(r'\\{%\\s*([^%]+)\\s*%\\}', re.DOTALL)        self.comment_pattern = re.compile(r'\\{#\\s*([^#]*)\\s*#\\}')                        # å®‰å…¨çš„æ‰§è¡Œç¯å¢ƒ        self.safe_builtins = {            'len': len,            'range': range,            'enumerate': enumerate,            'zip': zip,            'sum': sum,            'max': max,            'min': min,            'abs': abs,            'round': round,            'int': int,            'float': float,            'str': str,            'bool': bool,            'list': list,            'tuple': tuple,            'dict': dict,            'set': set,            'sorted': sorted,            'reversed': reversed        }        def render_template(self, template: str, context: Dict[str, Any]) -&gt; str:        \"\"\"æ¸²æŸ“æ¨¡æ¿\"\"\"        # ç§»é™¤æ³¨é‡Š        template = self.comment_pattern.sub('', template)                # å¤„ç†ä»£ç å—        template = self._process_code_blocks(template, context)                # å¤„ç†å˜é‡        template = self._process_variables(template, context)                return template        def _process_variables(self, template: str, context: Dict[str, Any]) -&gt; str:        \"\"\"å¤„ç†å˜é‡æ›¿æ¢\"\"\"        def replace_variable(match):            var_expr = match.group(1).strip()            try:                # åˆ›å»ºå®‰å…¨çš„æ‰§è¡Œç¯å¢ƒ                safe_context = {                    '__builtins__': self.safe_builtins,                    **context                }                                # æ±‚å€¼å˜é‡è¡¨è¾¾å¼                result = eval(var_expr, safe_context, {})                return str(result)            except Exception as e:                return f\"{{{{ ERROR: {e} }}}}\"                return self.variable_pattern.sub(replace_variable, template)        def _process_code_blocks(self, template: str, context: Dict[str, Any]) -&gt; str:        \"\"\"å¤„ç†ä»£ç å—\"\"\"        def replace_code_block(match):            code = match.group(1).strip()            try:                # åˆ›å»ºè¾“å‡ºç¼“å†²åŒº                output_buffer = []                                # åˆ›å»ºå®‰å…¨çš„æ‰§è¡Œç¯å¢ƒ                safe_context = {                    '__builtins__': self.safe_builtins,                    'output': output_buffer,                    'print_to_template': lambda *args: output_buffer.append(' '.join(str(arg) for arg in args)),                    **context                }                                # æ‰§è¡Œä»£ç å—                exec(code, safe_context, {})                                # è¿”å›è¾“å‡º                return '\\n'.join(output_buffer)            except Exception as e:                return f\"{% ERROR: {e} %}\"                return self.code_block_pattern.sub(replace_code_block, template)        def render_file_template(self, template_path: str, context: Dict[str, Any]) -&gt; str:        \"\"\"æ¸²æŸ“æ–‡ä»¶æ¨¡æ¿\"\"\"        try:            with open(template_path, 'r', encoding='utf-8') as f:                template = f.read()            return self.render_template(template, context)        except Exception as e:            raise RuntimeError(f\"æ¸²æŸ“æ¨¡æ¿æ–‡ä»¶å¤±è´¥: {e}\")# æµ‹è¯•æ¨¡æ¿å¼•æ“print(\"\\næ¨¡æ¿å¼•æ“ç¤ºä¾‹:\")template_engine = TemplateEngine()# ç®€å•å˜é‡æ¨¡æ¿simple_template = \"\"\"æ¬¢è¿ !æ‚¨çš„å¹´é¾„æ˜¯  å²ã€‚æ‚¨çš„åˆ†æ•°æ˜¯ ï¼Œç­‰çº§æ˜¯ Aã€‚\"\"\"simple_context = {    'name': 'å¼ ä¸‰',    'age': 25,    'score': 95}print(\"ç®€å•å˜é‡æ¨¡æ¿:\")print(template_engine.render_template(simple_template, simple_context))# å¾ªç¯æ¨¡æ¿loop_template = \"\"\"å­¦ç”Ÿåˆ—è¡¨:{% for i, student in enumerate(students):    grade = 'A' if student['score'] &gt;= 90 else 'B' if student['score'] &gt;= 80 else 'C'    print_to_template(f\"{i+1}. {student['name']}: {student['score']} ({grade})\")%}ç»Ÿè®¡ä¿¡æ¯:- æ€»äººæ•°: {{ len(students) }}- å¹³å‡åˆ†: {{ sum(s['score'] for s in students) / len(students) }}- æœ€é«˜åˆ†: {{ max(s['score'] for s in students) }}- æœ€ä½åˆ†: {{ min(s['score'] for s in students) }}\"\"\"loop_context = {    'students': [        {'name': 'Alice', 'score': 95},        {'name': 'Bob', 'score': 87},        {'name': 'Charlie', 'score': 92},        {'name': 'David', 'score': 78}    ]}print(f\"\\nå¾ªç¯æ¨¡æ¿:\")print(template_engine.render_template(loop_template, loop_context))# æ¡ä»¶æ¨¡æ¿conditional_template = \"\"\"{# è¿™æ˜¯æ³¨é‡Šï¼Œä¸ä¼šæ˜¾ç¤º #}ç³»ç»ŸçŠ¶æ€æŠ¥å‘Š=================={% if system_status == 'healthy':    print_to_template(\"âœ… ç³»ç»Ÿè¿è¡Œæ­£å¸¸\")    print_to_template(f\"CPUä½¿ç”¨ç‡: {cpu_usage}%\")    print_to_template(f\"å†…å­˜ä½¿ç”¨ç‡: {memory_usage}%\")else:    print_to_template(\"âŒ ç³»ç»Ÿå¼‚å¸¸\")    print_to_template(f\"é”™è¯¯ä¿¡æ¯: {error_message}\")%}æœåŠ¡çŠ¶æ€:{% for service, status in services.items():    icon = 'ğŸŸ¢' if status == 'running' else 'ğŸ”´'    print_to_template(f\"{icon} {service}: {status}\")%}{% if alerts:    print_to_template(\"\\nâš ï¸ è­¦å‘Šä¿¡æ¯:\")    for alert in alerts:        print_to_template(f\"- {alert}\")else:    print_to_template(\"\\nâœ… æ— è­¦å‘Šä¿¡æ¯\")%}\"\"\"conditional_context = {    'system_status': 'healthy',    'cpu_usage': 45,    'memory_usage': 67,    'services': {        'web_server': 'running',        'database': 'running',        'cache': 'stopped',        'queue': 'running'    },    'alerts': [        'ç¼“å­˜æœåŠ¡å·²åœæ­¢',        'ç£ç›˜ç©ºé—´ä¸è¶³ (85% å·²ä½¿ç”¨)'    ]}print(f\"\\næ¡ä»¶æ¨¡æ¿:\")print(template_engine.render_template(conditional_template, conditional_context))# å¤æ‚æ•°æ®å¤„ç†æ¨¡æ¿complex_template = \"\"\"HTMLæŠ¥å‘Šç”Ÿæˆ============={% # æ•°æ®é¢„å¤„ç†total_sales = sum(item['amount'] for item in sales_data)average_sale = total_sales / len(sales_data) if sales_data else 0top_products = sorted(sales_data, key=lambda x: x['amount'], reverse=True)[:3]# æŒ‰ç±»åˆ«åˆ†ç»„category_sales = {}for item in sales_data:    category = item['category']    if category not in category_sales:        category_sales[category] = []    category_sales[category].append(item)# ç”ŸæˆæŠ¥å‘Šprint_to_template(f\"é”€å”®æ€»é¢: ${total_sales:,.2f}\")print_to_template(f\"å¹³å‡é”€å”®é¢: ${average_sale:,.2f}\")print_to_template(f\"äº¤æ˜“æ•°é‡: {len(sales_data)}\")print_to_template(\"\")print_to_template(\"å‰ä¸‰åäº§å“:\")for i, product in enumerate(top_products, 1):    print_to_template(f\"{i}. {product['name']}: ${product['amount']:,.2f}\")print_to_template(\"\")print_to_template(\"æŒ‰ç±»åˆ«ç»Ÿè®¡:\")for category, items in category_sales.items():    category_total = sum(item['amount'] for item in items)    print_to_template(f\"{category}: ${category_total:,.2f} ({len(items)} é¡¹)\")%}\"\"\"complex_context = {    'sales_data': [        {'name': 'ç¬”è®°æœ¬ç”µè„‘', 'category': 'ç”µå­äº§å“', 'amount': 1299.99},        {'name': 'æ‰‹æœº', 'category': 'ç”µå­äº§å“', 'amount': 899.99},        {'name': 'åŠå…¬æ¤…', 'category': 'å®¶å…·', 'amount': 299.99},        {'name': 'é”®ç›˜', 'category': 'ç”µå­äº§å“', 'amount': 79.99},        {'name': 'ä¹¦æ¡Œ', 'category': 'å®¶å…·', 'amount': 399.99},        {'name': 'æ˜¾ç¤ºå™¨', 'category': 'ç”µå­äº§å“', 'amount': 249.99},        {'name': 'å°ç¯', 'category': 'å®¶å…·', 'amount': 49.99}    ]}print(f\"\\nå¤æ‚æ•°æ®å¤„ç†æ¨¡æ¿:\")print(template_engine.render_template(complex_template, complex_context))âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µå®‰å…¨é£é™©é˜²æŠ¤# å®‰å…¨é£é™©é˜²æŠ¤ç¤ºä¾‹print(\"\\nå®‰å…¨é£é™©é˜²æŠ¤ç¤ºä¾‹:\")# å®‰å…¨çš„execåŒ…è£…å™¨class SecureExecutor:    \"\"\"å®‰å…¨çš„ä»£ç æ‰§è¡Œå™¨\"\"\"        def __init__(self):        # å±é™©å…³é”®è¯        self.dangerous_keywords = {            'import', 'exec', 'eval', 'compile', 'open', 'file',            '__import__', '__builtins__', '__globals__', '__locals__',            'globals', 'locals', 'vars', 'dir', 'hasattr', 'getattr',            'setattr', 'delattr', 'input', 'raw_input', 'reload'        }                # å±é™©æ¨¡å—        self.dangerous_modules = {            'os', 'sys', 'subprocess', 'shutil', 'tempfile',            'pickle', 'marshal', 'shelve', 'dbm', 'sqlite3',            'socket', 'urllib', 'http', 'ftplib', 'smtplib'        }                # å®‰å…¨çš„å†…ç½®å‡½æ•°        self.safe_builtins = {            'abs', 'all', 'any', 'bin', 'bool', 'chr', 'dict',            'enumerate', 'filter', 'float', 'hex', 'int', 'len',            'list', 'map', 'max', 'min', 'oct', 'ord', 'range',            'reversed', 'round', 'set', 'sorted', 'str', 'sum',            'tuple', 'zip'        }        def is_safe_code(self, code: str) -&gt; tuple[bool, str]:        \"\"\"æ£€æŸ¥ä»£ç æ˜¯å¦å®‰å…¨\"\"\"        # æ£€æŸ¥å±é™©å…³é”®è¯        for keyword in self.dangerous_keywords:            if keyword in code:                return False, f\"åŒ…å«å±é™©å…³é”®è¯: {keyword}\"                # æ£€æŸ¥å±é™©æ¨¡å—        for module in self.dangerous_modules:            if module in code:                return False, f\"å°è¯•è®¿é—®å±é™©æ¨¡å—: {module}\"                # æ£€æŸ¥åŒä¸‹åˆ’çº¿å±æ€§        if '__' in code:            return False, \"åŒ…å«åŒä¸‹åˆ’çº¿å±æ€§è®¿é—®\"                # æ£€æŸ¥ç‚¹å·è®¿é—®ï¼ˆå¯èƒ½çš„å±æ€§è®¿é—®ï¼‰        if '.' in code and any(dangerous in code for dangerous in ['class', 'base', 'subclass']):            return False, \"å¯èƒ½çš„å±é™©å±æ€§è®¿é—®\"                return True, \"ä»£ç å®‰å…¨\"        def create_safe_environment(self, allowed_vars: Dict[str, Any] = None) -&gt; Dict[str, Any]:        \"\"\"åˆ›å»ºå®‰å…¨çš„æ‰§è¡Œç¯å¢ƒ\"\"\"        # åˆ›å»ºå—é™çš„å†…ç½®å‡½æ•°å­—å…¸        restricted_builtins = {}        for name in self.safe_builtins:            if hasattr(__builtins__, name):                restricted_builtins[name] = getattr(__builtins__, name)                # åŸºç¡€ç¯å¢ƒ        safe_env = {            '__builtins__': restricted_builtins,            '__name__': '__restricted__',            '__doc__': None        }                # æ·»åŠ å…è®¸çš„å˜é‡        if allowed_vars:            safe_env.update(allowed_vars)                return safe_env        def safe_exec(self, code: str, allowed_vars: Dict[str, Any] = None) -&gt; Dict[str, Any]:        \"\"\"å®‰å…¨åœ°æ‰§è¡Œä»£ç \"\"\"        # æ£€æŸ¥ä»£ç å®‰å…¨æ€§        is_safe, message = self.is_safe_code(code)        if not is_safe:            raise SecurityError(f\"ä¸å®‰å…¨çš„ä»£ç : {message}\")                # åˆ›å»ºå®‰å…¨ç¯å¢ƒ        safe_globals = self.create_safe_environment(allowed_vars)        safe_locals = {}                try:            # æ‰§è¡Œä»£ç             exec(code, safe_globals, safe_locals)            return safe_locals        except Exception as e:            raise RuntimeError(f\"ä»£ç æ‰§è¡Œå¤±è´¥: {e}\")# è‡ªå®šä¹‰å®‰å…¨å¼‚å¸¸class SecurityError(Exception):    \"\"\"å®‰å…¨å¼‚å¸¸\"\"\"    pass# æµ‹è¯•å®‰å…¨æ‰§è¡Œå™¨print(\"å®‰å…¨æ‰§è¡Œå™¨æµ‹è¯•:\")secure_executor = SecureExecutor()# å®‰å…¨ä»£ç æµ‹è¯•safe_codes = [    \"x = 10\\ny = 20\\nresult = x + y\",    \"numbers = [1, 2, 3, 4, 5]\\ntotal = sum(numbers)\",    \"text = 'Hello World'\\nlength = len(text)\",    \"data = [1, 2, 3]\\nfiltered = list(filter(lambda x: x &gt; 1, data))\"]print(\"\\nå®‰å…¨ä»£ç æµ‹è¯•:\")for i, code in enumerate(safe_codes, 1):    try:        result = secure_executor.safe_exec(code)        print(f\"  æµ‹è¯• {i}: æˆåŠŸ\")        print(f\"    å˜é‡: {list(result.keys())}\")    except Exception as e:        print(f\"  æµ‹è¯• {i}: å¤±è´¥ - {e}\")# å±é™©ä»£ç æµ‹è¯•dangerous_codes = [    \"import os\\nos.system('ls')\",    \"exec('print(\\\"hello\\\")')\",    \"open('/etc/passwd').read()\",    \"__import__('subprocess').call(['ls'])\",    \"[].append.__globals__['__builtins__']['eval']('1+1')\",    \"().__class__.__bases__[0].__subclasses__()\"]print(f\"\\nå±é™©ä»£ç æµ‹è¯•:\")for i, code in enumerate(dangerous_codes, 1):    try:        result = secure_executor.safe_exec(code)        print(f\"  æµ‹è¯• {i}: æˆåŠŸï¼ˆä¸åº”è¯¥æˆåŠŸ!ï¼‰\")    except SecurityError as e:        print(f\"  æµ‹è¯• {i}: è¢«å®‰å…¨æœºåˆ¶é˜»æ­¢ - {e}\")    except Exception as e:        print(f\"  æµ‹è¯• {i}: å…¶ä»–é”™è¯¯ - {e}\")# èµ„æºé™åˆ¶print(f\"\\nèµ„æºé™åˆ¶ç¤ºä¾‹:\")import signalimport timeclass ResourceLimitedExecutor(SecureExecutor):    \"\"\"èµ„æºå—é™çš„æ‰§è¡Œå™¨\"\"\"        def __init__(self, timeout: int = 5, max_memory: int = 100*1024*1024):  # 100MB        super().__init__()        self.timeout = timeout        self.max_memory = max_memory        def timeout_handler(self, signum, frame):        \"\"\"è¶…æ—¶å¤„ç†å™¨\"\"\"        raise TimeoutError(f\"ä»£ç æ‰§è¡Œè¶…æ—¶ ({self.timeout}ç§’)\")        def safe_exec_with_limits(self, code: str, allowed_vars: Dict[str, Any] = None) -&gt; Dict[str, Any]:        \"\"\"å¸¦èµ„æºé™åˆ¶çš„å®‰å…¨æ‰§è¡Œ\"\"\"        # è®¾ç½®è¶…æ—¶        old_handler = signal.signal(signal.SIGALRM, self.timeout_handler)        signal.alarm(self.timeout)                try:            # è®°å½•å¼€å§‹æ—¶é—´            start_time = time.time()                        # æ‰§è¡Œä»£ç             result = self.safe_exec(code, allowed_vars)                        # è®°å½•æ‰§è¡Œæ—¶é—´            execution_time = time.time() - start_time            result['__execution_time__'] = execution_time                        return result                    finally:            # æ¢å¤ä¿¡å·å¤„ç†å™¨            signal.alarm(0)            signal.signal(signal.SIGALRM, old_handler)# æµ‹è¯•èµ„æºé™åˆ¶ï¼ˆåœ¨æ”¯æŒä¿¡å·çš„ç³»ç»Ÿä¸Šï¼‰try:    limited_executor = ResourceLimitedExecutor(timeout=2)        # æ­£å¸¸ä»£ç     normal_code = \"\"\"result = 0for i in range(1000):    result += i\"\"\"        print(\"æ­£å¸¸ä»£ç æ‰§è¡Œ:\")    result = limited_executor.safe_exec_with_limits(normal_code)    print(f\"  æ‰§è¡Œæ—¶é—´: {result.get('__execution_time__', 0):.4f}ç§’\")    print(f\"  ç»“æœ: {result.get('result', 'N/A')}\")        # å¯èƒ½è¶…æ—¶çš„ä»£ç ï¼ˆæ³¨é‡Šæ‰ä»¥é¿å…å®é™…è¶…æ—¶ï¼‰    # timeout_code = \"\"\"    # import time    # time.sleep(10)  # è¿™ä¼šè¶…æ—¶    # \"\"\"    #     # print(\"\\nè¶…æ—¶ä»£ç æµ‹è¯•:\")    # try:    #     result = limited_executor.safe_exec_with_limits(timeout_code)    # except TimeoutError as e:    #     print(f\"  è¶…æ—¶è¢«æ•è·: {e}\")    except Exception as e:    print(f\"èµ„æºé™åˆ¶æµ‹è¯•è·³è¿‡ï¼ˆå¯èƒ½ä¸æ”¯æŒä¿¡å·ï¼‰: {e}\")ğŸ“š ç›¸å…³å‡½æ•°å’Œæ¨¡å—å†…ç½®å‡½æ•°  eval() - æ‰§è¡ŒPythonè¡¨è¾¾å¼  compile() - ç¼–è¯‘Pythonä»£ç   globals() - è·å–å…¨å±€å‘½åç©ºé—´  locals() - è·å–å±€éƒ¨å‘½åç©ºé—´  vars() - è·å–å¯¹è±¡çš„å±æ€§å­—å…¸  dir() - åˆ—å‡ºå¯¹è±¡çš„å±æ€§  hasattr() - æ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨  getattr() - è·å–å±æ€§å€¼  setattr() - è®¾ç½®å±æ€§å€¼  delattr() - åˆ é™¤å±æ€§æ ‡å‡†åº“æ¨¡å—  ast - æŠ½è±¡è¯­æ³•æ ‘  code - äº¤äº’å¼è§£é‡Šå™¨  codeop - ç¼–è¯‘Pythonä»£ç   dis - å­—èŠ‚ç åæ±‡ç¼–  inspect - å¯¹è±¡æ£€æŸ¥  types - åŠ¨æ€ç±»å‹åˆ›å»º  importlib - å¯¼å…¥æœºåˆ¶  runpy - è¿è¡ŒPythonæ¨¡å—  traceback - å¼‚å¸¸è·Ÿè¸ªç¬¬ä¸‰æ–¹åº“  RestrictedPython - å—é™çš„Pythonæ‰§è¡Œ  asteval - å®‰å…¨çš„è¡¨è¾¾å¼æ±‚å€¼  PyPy - Pythonè§£é‡Šå™¨  Jinja2 - æ¨¡æ¿å¼•æ“  Mako - æ¨¡æ¿å¼•æ“ğŸ“– æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£          Built-in Functions - exec()      Code Objects        å®‰å…¨ç›¸å…³          Pythonä»£ç æ³¨å…¥æ”»å‡»é˜²æŠ¤      æ²™ç®±æ‰§è¡Œç¯å¢ƒè®¾è®¡      å®‰å…¨ç¼–ç¨‹æœ€ä½³å®è·µ        é«˜çº§åº”ç”¨          åŠ¨æ€ä»£ç ç”ŸæˆæŠ€æœ¯      æ’ä»¶ç³»ç»Ÿè®¾è®¡      æ¨¡æ¿å¼•æ“å®ç°      ğŸ·ï¸ æ ‡ç­¾ä»£ç æ‰§è¡Œ åŠ¨æ€æ‰§è¡Œ è¯­å¥æ‰§è¡Œ å®‰å…¨é£é™© æ’ä»¶ç³»ç»Ÿ æ¨¡æ¿å¼•æ“ ä»£ç ç”Ÿæˆ æ²™ç®±æ‰§è¡Œ èµ„æºé™åˆ¶ å®‰å…¨ç¼–ç¨‹",
        "url": "/docs/builtins/exec/",
        "category": "builtins",
        "tags": ["ä»£ç æ‰§è¡Œ","åŠ¨æ€æ‰§è¡Œ","è¯­å¥æ‰§è¡Œ","å®‰å…¨é£é™©"]
      }
      
    
  
    
      ,
      {
        "title": "filter() - è¿‡æ»¤å‡½æ•°",
        "content": "filter() - è¿‡æ»¤å‡½æ•°ğŸ“ æ¦‚è¿°filter() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºæ ¹æ®æŒ‡å®šçš„æ¡ä»¶å‡½æ•°è¿‡æ»¤å¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ ã€‚å®ƒè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒåªåŒ…å«ä½¿æ¡ä»¶å‡½æ•°è¿”å›Trueçš„å…ƒç´ ã€‚filter()æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„é‡è¦å·¥å…·ï¼Œå¯ä»¥ç®€åŒ–æ•°æ®ç­›é€‰æ“ä½œã€‚1ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡filter()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£filter()ä¸æ¡ä»¶åˆ¤æ–­çš„å…³ç³»  å­¦ä¼šä½¿ç”¨filter()è¿›è¡Œæ•°æ®ç­›é€‰  äº†è§£filter()åœ¨æ•°æ®å¤„ç†ä¸­çš„åº”ç”¨ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨  å¸ƒå°”å€¼å’Œæ¡ä»¶åˆ¤æ–­  lambdaè¡¨è¾¾å¼çš„åŸºæœ¬ä½¿ç”¨ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µfilter() å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚å‡½æ•°åº”è¯¥è¿”å›å¸ƒå°”å€¼ï¼Œfilter()ä¼šä¿ç•™ä½¿å‡½æ•°è¿”å›Trueçš„å…ƒç´ ï¼Œè¿‡æ»¤æ‰è¿”å›Falseçš„å…ƒç´ ã€‚è¯­æ³•æ ¼å¼filter(function, iterable)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  function      callable/None      æ˜¯      æ—       ç”¨äºæµ‹è¯•çš„å‡½æ•°ï¼Œè¿”å›å¸ƒå°”å€¼              iterable      iterable      æ˜¯      æ—       è¦è¿‡æ»¤çš„å¯è¿­ä»£å¯¹è±¡      è¿”å›å€¼            ç±»å‹      è¯´æ˜                  filter      è¿­ä»£å™¨ï¼ŒåŒ…å«é€šè¿‡æµ‹è¯•çš„å…ƒç´       ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# è¿‡æ»¤å¶æ•°numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]even_numbers = filter(lambda x: x % 2 == 0, numbers)print(list(even_numbers))  # [2, 4, 6, 8, 10]# è¿‡æ»¤æ­£æ•°numbers = [-3, -2, -1, 0, 1, 2, 3]positive_numbers = filter(lambda x: x &gt; 0, numbers)print(list(positive_numbers))  # [1, 2, 3]# è¿‡æ»¤éç©ºå­—ç¬¦ä¸²strings = ['hello', '', 'world', ' ', 'python', '']non_empty = filter(lambda s: s.strip(), strings)print(list(non_empty))  # ['hello', 'world', 'python']# ä½¿ç”¨Noneä½œä¸ºå‡½æ•°ï¼ˆè¿‡æ»¤å‡å€¼ï¼‰values = [0, 1, False, True, '', 'hello', [], [1, 2], None]truthy_values = filter(None, values)print(list(truthy_values))  # [1, True, 'hello', [1, 2]]# è‡ªå®šä¹‰è¿‡æ»¤å‡½æ•°def is_long_word(word):    return len(word) &gt; 5words = ['cat', 'elephant', 'dog', 'butterfly', 'ant']long_words = filter(is_long_word, words)print(list(long_words))  # ['elephant', 'butterfly']é«˜çº§ç”¨æ³•# å¤æ‚æ•°æ®ç»“æ„çš„è¿‡æ»¤students = [    {'name': 'å¼ ä¸‰', 'age': 20, 'score': 85},    {'name': 'æå››', 'age': 22, 'score': 92},    {'name': 'ç‹äº”', 'age': 19, 'score': 78},    {'name': 'èµµå…­', 'age': 21, 'score': 95}]# è¿‡æ»¤æˆç»©ä¼˜ç§€çš„å­¦ç”Ÿexcellent_students = filter(lambda s: s['score'] &gt;= 90, students)for student in excellent_students:    print(f\"{student['name']}: {student['score']}åˆ†\")# è¿‡æ»¤æˆå¹´å­¦ç”Ÿadult_students = filter(lambda s: s['age'] &gt;= 20, students)print([s['name'] for s in adult_students])  # ['å¼ ä¸‰', 'æå››', 'èµµå…­']# å¤šæ¡ä»¶è¿‡æ»¤young_excellent = filter(    lambda s: s['age'] &lt; 21 and s['score'] &gt;= 85,     students)print([s['name'] for s in young_excellent])  # ['å¼ ä¸‰']# å­—ç¬¦ä¸²è¿‡æ»¤emails = [    'user@example.com',    'invalid-email',    'test@domain.org',    'another@test.com',    'bad.email']# è¿‡æ»¤æœ‰æ•ˆé‚®ç®±valid_emails = filter(    lambda email: '@' in email and '.' in email.split('@')[1],    emails)print(list(valid_emails))# ['user@example.com', 'test@domain.org', 'another@test.com']# æ•°å­—èŒƒå›´è¿‡æ»¤import randomrandom_numbers = [random.randint(1, 100) for _ in range(20)]# è¿‡æ»¤50-80ä¹‹é—´çš„æ•°å­—filtered_numbers = filter(lambda x: 50 &lt;= x &lt;= 80, random_numbers)print(f\"åŸæ•°æ®: {random_numbers}\")print(f\"è¿‡æ»¤å: {list(filtered_numbers)}\")å®é™…æ¡ˆä¾‹# æ—¥å¿—åˆ†ædef analyze_logs(log_lines):    \"\"\"åˆ†ææ—¥å¿—æ–‡ä»¶\"\"\"    # è¿‡æ»¤é”™è¯¯æ—¥å¿—    error_logs = filter(lambda line: 'ERROR' in line, log_lines)        # è¿‡æ»¤è­¦å‘Šæ—¥å¿—    warning_logs = filter(lambda line: 'WARNING' in line, log_lines)        # è¿‡æ»¤ä»Šå¤©çš„æ—¥å¿—    from datetime import datetime    today = datetime.now().strftime('%Y-%m-%d')    today_logs = filter(lambda line: today in line, log_lines)        return {        'errors': list(error_logs),        'warnings': list(warning_logs),        'today': list(today_logs)    }# ç¤ºä¾‹æ—¥å¿—logs = [    '2024-01-15 10:30:00 INFO ç³»ç»Ÿå¯åŠ¨',    '2024-01-15 10:31:00 ERROR æ•°æ®åº“è¿æ¥å¤±è´¥',    '2024-01-15 10:32:00 WARNING å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜',    '2024-01-14 09:00:00 INFO ç”¨æˆ·ç™»å½•',    '2024-01-15 11:00:00 ERROR æ–‡ä»¶è¯»å–å¤±è´¥']analysis = analyze_logs(logs)print(f\"é”™è¯¯æ—¥å¿—æ•°é‡: {len(analysis['errors'])}\")print(f\"è­¦å‘Šæ—¥å¿—æ•°é‡: {len(analysis['warnings'])}\")# æ–‡ä»¶å¤„ç†def process_files(file_list):    \"\"\"å¤„ç†æ–‡ä»¶åˆ—è¡¨\"\"\"    # è¿‡æ»¤Pythonæ–‡ä»¶    python_files = filter(lambda f: f.endswith('.py'), file_list)        # è¿‡æ»¤å¤§æ–‡ä»¶ï¼ˆå‡è®¾æœ‰sizeå±æ€§ï¼‰    # large_files = filter(lambda f: f.size &gt; 1024*1024, file_list)        # è¿‡æ»¤éšè—æ–‡ä»¶    visible_files = filter(lambda f: not f.startswith('.'), file_list)        return {        'python_files': list(python_files),        'visible_files': list(visible_files)    }files = ['main.py', 'config.json', '.gitignore', 'utils.py', 'README.md']result = process_files(files)print(f\"Pythonæ–‡ä»¶: {result['python_files']}\")print(f\"å¯è§æ–‡ä»¶: {result['visible_files']}\")# æ•°æ®æ¸…æ´—def clean_survey_data(responses):    \"\"\"æ¸…æ´—è°ƒæŸ¥æ•°æ®\"\"\"    # è¿‡æ»¤æœ‰æ•ˆå¹´é¾„    valid_age = filter(lambda r: 0 &lt; r.get('age', 0) &lt; 120, responses)        # è¿‡æ»¤å®Œæ•´å›ç­”    complete_responses = filter(        lambda r: all(key in r for key in ['name', 'age', 'email']),        valid_age    )        # è¿‡æ»¤æœ‰æ•ˆé‚®ç®±    valid_email = filter(        lambda r: '@' in r.get('email', ''),        complete_responses    )        return list(valid_email)# ç¤ºä¾‹è°ƒæŸ¥æ•°æ®survey_data = [    {'name': 'å¼ ä¸‰', 'age': 25, 'email': 'zhang@example.com'},    {'name': 'æå››', 'age': 150, 'email': 'li@example.com'},  # æ— æ•ˆå¹´é¾„    {'name': 'ç‹äº”', 'email': 'wang@example.com'},  # ç¼ºå°‘å¹´é¾„    {'name': 'èµµå…­', 'age': 30, 'email': 'invalid-email'},  # æ— æ•ˆé‚®ç®±    {'name': 'é’±ä¸ƒ', 'age': 28, 'email': 'qian@example.com'}]clean_data = clean_survey_data(survey_data)print(f\"æ¸…æ´—åçš„æ•°æ®: {len(clean_data)} æ¡\")for data in clean_data:    print(f\"  {data['name']}, {data['age']}å², {data['email']}\")# å•†å“ç­›é€‰def filter_products(products, **criteria):    \"\"\"æ ¹æ®æ¡ä»¶ç­›é€‰å•†å“\"\"\"    result = products        # ä»·æ ¼èŒƒå›´ç­›é€‰    if 'min_price' in criteria:        result = filter(lambda p: p['price'] &gt;= criteria['min_price'], result)        if 'max_price' in criteria:        result = filter(lambda p: p['price'] &lt;= criteria['max_price'], result)        # åˆ†ç±»ç­›é€‰    if 'category' in criteria:        result = filter(lambda p: p['category'] == criteria['category'], result)        # è¯„åˆ†ç­›é€‰    if 'min_rating' in criteria:        result = filter(lambda p: p['rating'] &gt;= criteria['min_rating'], result)        # åº“å­˜ç­›é€‰    if 'in_stock' in criteria and criteria['in_stock']:        result = filter(lambda p: p['stock'] &gt; 0, result)        return list(result)# ç¤ºä¾‹å•†å“æ•°æ®products = [    {'name': 'ç¬”è®°æœ¬ç”µè„‘', 'price': 5999, 'category': 'ç”µå­äº§å“', 'rating': 4.5, 'stock': 10},    {'name': 'æ‰‹æœº', 'price': 3999, 'category': 'ç”µå­äº§å“', 'rating': 4.2, 'stock': 0},    {'name': 'ä¹¦ç±', 'price': 29, 'category': 'å›¾ä¹¦', 'rating': 4.8, 'stock': 50},    {'name': 'è€³æœº', 'price': 299, 'category': 'ç”µå­äº§å“', 'rating': 4.0, 'stock': 20}]# ç­›é€‰æ¡ä»¶ï¼šç”µå­äº§å“ï¼Œä»·æ ¼1000-6000ï¼Œè¯„åˆ†4.0ä»¥ä¸Šï¼Œæœ‰åº“å­˜filtered = filter_products(    products,    category='ç”µå­äº§å“',    min_price=1000,    max_price=6000,    min_rating=4.0,    in_stock=True)print(\"ç­›é€‰ç»“æœ:\")for product in filtered:    print(f\"  {product['name']}: Â¥{product['price']}, è¯„åˆ†{product['rating']}\")âš ï¸ æ³¨æ„äº‹é¡¹  filter() è¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œåªèƒ½éå†ä¸€æ¬¡  å½“functionä¸ºNoneæ—¶ï¼Œfilter()ä¼šè¿‡æ»¤æ‰æ‰€æœ‰å‡å€¼  filter()æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œåªåœ¨éœ€è¦æ—¶æ‰è®¡ç®—ç»“æœ  å¯¹äºç®€å•æ¡ä»¶ï¼Œåˆ—è¡¨æ¨å¯¼å¼å¯èƒ½æ›´ç›´è§‚# è¿­ä»£å™¨ç‰¹æ€§numbers = [1, 2, 3, 4, 5, 6]filter_obj = filter(lambda x: x % 2 == 0, numbers)# ç¬¬ä¸€æ¬¡ä½¿ç”¨print(list(filter_obj))  # [2, 4, 6]# ç¬¬äºŒæ¬¡ä½¿ç”¨ï¼ˆç©ºç»“æœï¼‰print(list(filter_obj))  # []# Noneä½œä¸ºå‡½æ•°çš„ç‰¹æ®Šè¡Œä¸ºvalues = [0, 1, 2, '', 'hello', [], [1], None, False, True]filtered = filter(None, values)print(list(filtered))  # [1, 2, 'hello', [1], True]# filter() vs åˆ—è¡¨æ¨å¯¼å¼numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]# ä½¿ç”¨filter()even_filter = filter(lambda x: x % 2 == 0, numbers)print(list(even_filter))# ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ï¼ˆé€šå¸¸æ›´ç›´è§‚ï¼‰even_list = [x for x in numbers if x % 2 == 0]print(even_list)# å¤æ‚æ¡ä»¶æ—¶ï¼Œfilter()å¯èƒ½æ›´æ¸…æ™°def is_prime(n):    \"\"\"åˆ¤æ–­æ˜¯å¦ä¸ºè´¨æ•°\"\"\"    if n &lt; 2:        return False    for i in range(2, int(n**0.5) + 1):        if n % i == 0:            return False    return True# ä½¿ç”¨filter()æ›´æ¸…æ™°primes = filter(is_prime, range(2, 50))print(list(primes))ğŸ”— ç›¸å…³å†…å®¹  map() - æ˜ å°„å‡½æ•°  any() - ä»»æ„å‡½æ•°  all() - å…¨éƒ¨å‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - filter()  Pythonå‡½æ•°å¼ç¼–ç¨‹  åˆ—è¡¨æ¨å¯¼å¼è¯¦è§£ğŸ·ï¸ æ ‡ç­¾è¿‡æ»¤ å‡½æ•°å¼ç¼–ç¨‹ æ¡ä»¶ç­›é€‰ æ•°æ®æ¸…æ´— å¸ƒå°”åˆ¤æ–­æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/filter/",
        "category": "builtins",
        "tags": ["è¿‡æ»¤","å‡½æ•°å¼ç¼–ç¨‹","æ¡ä»¶ç­›é€‰"]
      }
      
    
  
    
      ,
      {
        "title": "float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•°",
        "content": "float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•°ğŸ“ æ¦‚è¿°float() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºå°†æ•°å€¼æˆ–å­—ç¬¦ä¸²è½¬æ¢ä¸ºæµ®ç‚¹æ•°ç±»å‹ã€‚å®ƒæ”¯æŒå¤šç§æ ¼å¼çš„æ•°å€¼è½¬æ¢ï¼ŒåŒ…æ‹¬ç§‘å­¦è®¡æ•°æ³•ã€æ— ç©·å¤§å’Œéæ•°å€¼ç­‰ç‰¹æ®Šå€¼çš„å¤„ç†ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡float()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£ä¸åŒæ•°æ®ç±»å‹åˆ°æµ®ç‚¹æ•°çš„è½¬æ¢è§„åˆ™  å­¦ä¼šå¤„ç†ç‰¹æ®Šæµ®ç‚¹æ•°å€¼ï¼ˆinfã€nanï¼‰  äº†è§£æµ®ç‚¹æ•°ç²¾åº¦å’Œè¡¨ç¤ºèŒƒå›´ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  æ•°å€¼ç³»ç»ŸåŸºç¡€  æµ®ç‚¹æ•°è¡¨ç¤ºåŸç†ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µfloat() å‡½æ•°å°†è¾“å…¥å€¼è½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚Pythonä½¿ç”¨IEEE 754åŒç²¾åº¦æµ®ç‚¹æ•°æ ‡å‡†ï¼Œæä¾›çº¦15-17ä½åè¿›åˆ¶ç²¾åº¦ã€‚è¯­æ³•æ ¼å¼# æ— å‚æ•°è°ƒç”¨ï¼Œè¿”å›0.0float()# è½¬æ¢æ•°å€¼æˆ–å­—ç¬¦ä¸²float(x)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  x      number/string      å¦      æ—       è¦è½¬æ¢çš„æ•°å€¼æˆ–å­—ç¬¦ä¸²      è¿”å›å€¼  ç±»å‹: float  è¯´æ˜: è½¬æ¢åçš„æµ®ç‚¹æ•°å€¼ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# æ— å‚æ•°è°ƒç”¨result = float()  # è¿”å› 0.0print(f\"æ— å‚æ•°è°ƒç”¨: {result}\")  # è¾“å‡º: æ— å‚æ•°è°ƒç”¨: 0.0print(f\"ç±»å‹: {type(result)}\")  # è¾“å‡º: ç±»å‹: &lt;class 'float'&gt;# æ•´æ•°è½¬æ¢int_num = 42float_num = float(int_num)print(f\"æ•´æ•°è½¬æ¢: {float_num}\")  # è¾“å‡º: æ•´æ•°è½¬æ¢: 42.0# å­—ç¬¦ä¸²è½¬æ¢str_num = \"3.14159\"converted = float(str_num)print(f\"å­—ç¬¦ä¸²è½¬æ¢: {converted}\")  # è¾“å‡º: å­—ç¬¦ä¸²è½¬æ¢: 3.14159# å¸ƒå°”å€¼è½¬æ¢print(f\"Trueè½¬æ¢: {float(True)}\")   # è¾“å‡º: Trueè½¬æ¢: 1.0print(f\"Falseè½¬æ¢: {float(False)}\") # è¾“å‡º: Falseè½¬æ¢: 0.0ç§‘å­¦è®¡æ•°æ³•# ç§‘å­¦è®¡æ•°æ³•å­—ç¬¦ä¸²scientific_notation = [    \"1.23e4\",    # 12300.0    \"1.23E4\",    # 12300.0    \"1.23e-4\",   # 0.000123    \"1.23E-4\",   # 0.000123    \"6.022e23\",  # é˜¿ä¼ä¼½å¾·ç½—å¸¸æ•°]for notation in scientific_notation:    result = float(notation)    print(f\"{notation} = {result}\")# è¾“å‡º:# 1.23e4 = 12300.0# 1.23E4 = 12300.0# 1.23e-4 = 0.000123# 1.23E-4 = 0.000123# 6.022e23 = 6.022e+23ç‰¹æ®Šå€¼å¤„ç†# æ— ç©·å¤§positive_inf = float('inf')    # æ­£æ— ç©·negative_inf = float('-inf')   # è´Ÿæ— ç©·positive_inf2 = float('infinity')  # æ­£æ— ç©·çš„å¦ä¸€ç§å†™æ³•print(f\"æ­£æ— ç©·: {positive_inf}\")print(f\"è´Ÿæ— ç©·: {negative_inf}\")print(f\"æ— ç©·å¤§æ£€æŸ¥: {positive_inf == float('inf')}\")# éæ•°å€¼ (Not a Number)nan_value = float('nan')print(f\"NaNå€¼: {nan_value}\")print(f\"NaNæ£€æŸ¥: {nan_value != nan_value}\")  # NaNçš„ç‰¹æ®Šæ€§è´¨# ä½¿ç”¨mathæ¨¡å—æ£€æŸ¥ç‰¹æ®Šå€¼import mathprint(f\"æ˜¯å¦ä¸ºæ— ç©·: {math.isinf(positive_inf)}\")print(f\"æ˜¯å¦ä¸ºNaN: {math.isnan(nan_value)}\")print(f\"æ˜¯å¦ä¸ºæœ‰é™æ•°: {math.isfinite(3.14)}\")é«˜çº§ç”¨æ³•# å¤„ç†ä¸åŒæ ¼å¼çš„æ•°å€¼å­—ç¬¦ä¸²number_strings = [    \"  3.14  \",      # å¸¦ç©ºæ ¼    \"+3.14\",         # å¸¦æ­£å·    \"-3.14\",         # å¸¦è´Ÿå·    \"3.\",            # çœç•¥å°æ•°éƒ¨åˆ†    \".14\",           # çœç•¥æ•´æ•°éƒ¨åˆ†    \"0.0\",           # é›¶å€¼]for num_str in number_strings:    try:        result = float(num_str)        print(f\"'{num_str}' -&gt; {result}\")    except ValueError as e:        print(f\"'{num_str}' -&gt; é”™è¯¯: {e}\")å®é™…æ¡ˆä¾‹ï¼šæ•°æ®æ¸…æ´—def clean_numeric_data(data_list, default_value=0.0):    \"\"\"æ¸…æ´—æ•°å€¼æ•°æ®ï¼Œå¤„ç†å„ç§å¼‚å¸¸æƒ…å†µ\"\"\"    cleaned_data = []    error_log = []        for i, item in enumerate(data_list):        try:            # å¤„ç†Noneå€¼            if item is None:                cleaned_data.append(default_value)                error_log.append(f\"ç´¢å¼• {i}: Noneå€¼å·²æ›¿æ¢ä¸ºé»˜è®¤å€¼\")                continue                        # å¤„ç†å­—ç¬¦ä¸²            if isinstance(item, str):                # å»é™¤ç©ºæ ¼                item = item.strip()                                # å¤„ç†ç©ºå­—ç¬¦ä¸²                if not item:                    cleaned_data.append(default_value)                    error_log.append(f\"ç´¢å¼• {i}: ç©ºå­—ç¬¦ä¸²å·²æ›¿æ¢ä¸ºé»˜è®¤å€¼\")                    continue                                # å¤„ç†ç‰¹æ®Šå­—ç¬¦ä¸²                if item.lower() in ['na', 'n/a', 'null', 'none']:                    cleaned_data.append(default_value)                    error_log.append(f\"ç´¢å¼• {i}: ç¼ºå¤±å€¼æ ‡è®°å·²æ›¿æ¢ä¸ºé»˜è®¤å€¼\")                    continue                        # è½¬æ¢ä¸ºæµ®ç‚¹æ•°            result = float(item)                        # æ£€æŸ¥æ˜¯å¦ä¸ºæœ‰æ•ˆæ•°å€¼            if math.isnan(result):                cleaned_data.append(default_value)                error_log.append(f\"ç´¢å¼• {i}: NaNå€¼å·²æ›¿æ¢ä¸ºé»˜è®¤å€¼\")            elif math.isinf(result):                cleaned_data.append(default_value)                error_log.append(f\"ç´¢å¼• {i}: æ— ç©·å€¼å·²æ›¿æ¢ä¸ºé»˜è®¤å€¼\")            else:                cleaned_data.append(result)                        except (ValueError, TypeError) as e:            cleaned_data.append(default_value)            error_log.append(f\"ç´¢å¼• {i}: è½¬æ¢é”™è¯¯ '{item}' - {str(e)}\")        return cleaned_data, error_log# æµ‹è¯•æ•°æ®test_data = [    \"3.14\", \"2.71\", None, \"\", \"  5.0  \",     \"invalid\", \"inf\", \"nan\", \"N/A\", 42]cleaned, errors = clean_numeric_data(test_data)print(f\"æ¸…æ´—åæ•°æ®: {cleaned}\")print(\"\\né”™è¯¯æ—¥å¿—:\")for error in errors:    print(f\"  {error}\")ç²¾åº¦å’ŒèŒƒå›´import sys# æµ®ç‚¹æ•°ä¿¡æ¯print(f\"æµ®ç‚¹æ•°æœ€å¤§å€¼: {sys.float_info.max}\")print(f\"æµ®ç‚¹æ•°æœ€å°æ­£å€¼: {sys.float_info.min}\")print(f\"æµ®ç‚¹æ•°ç²¾åº¦: {sys.float_info.dig} ä½\")print(f\"æµ®ç‚¹æ•°æœºå™¨ç²¾åº¦: {sys.float_info.epsilon}\")# ç²¾åº¦æ¼”ç¤ºprint(\"\\nç²¾åº¦æ¼”ç¤º:\")print(f\"0.1 + 0.2 = {0.1 + 0.2}\")print(f\"0.1 + 0.2 == 0.3: {0.1 + 0.2 == 0.3}\")# ç²¾åº¦æ¯”è¾ƒçš„æ­£ç¡®æ–¹æ³•def float_equal(a, b, tolerance=1e-9):    \"\"\"æµ®ç‚¹æ•°ç›¸ç­‰æ¯”è¾ƒ\"\"\"    return abs(a - b) &lt; toleranceprint(f\"ä½¿ç”¨å®¹å·®æ¯”è¾ƒ: {float_equal(0.1 + 0.2, 0.3)}\")âš ï¸ æ³¨æ„äº‹é¡¹ç²¾åº¦é—®é¢˜# æµ®ç‚¹æ•°ç²¾åº¦é™åˆ¶print(f\"å¤§æ•°ç²¾åº¦: {float('9' * 20)}\")print(f\"å°æ•°ç²¾åº¦: {float('0.' + '0' * 15 + '1')}\")# é¿å…ç²¾åº¦é—®é¢˜çš„æ–¹æ³•from decimal import Decimal# ä½¿ç”¨Decimalè¿›è¡Œç²¾ç¡®è®¡ç®—decimal_result = Decimal('0.1') + Decimal('0.2')print(f\"Decimalç»“æœ: {decimal_result}\")print(f\"Decimalç­‰äº0.3: {decimal_result == Decimal('0.3')}\")å¼‚å¸¸å¤„ç†# å¸¸è§è½¬æ¢é”™è¯¯invalid_inputs = [    \"abc\",           # æ— æ•ˆå­—ç¬¦ä¸²    \"3.14.15\",       # å¤šä¸ªå°æ•°ç‚¹    \"3 + 4\",         # è¡¨è¾¾å¼    \"\",              # ç©ºå­—ç¬¦ä¸²    \"3.14e\",         # ä¸å®Œæ•´çš„ç§‘å­¦è®¡æ•°æ³•]for invalid_input in invalid_inputs:    try:        result = float(invalid_input)        print(f\"'{invalid_input}' -&gt; {result}\")    except ValueError as e:        print(f\"'{invalid_input}' -&gt; é”™è¯¯: {e}\")æ€§èƒ½è€ƒè™‘import time# å¤§é‡è½¬æ¢çš„æ€§èƒ½æµ‹è¯•data = [str(i + 0.5) for i in range(100000)]# æ–¹æ³•1ï¼šåˆ—è¡¨æ¨å¯¼å¼start_time = time.time()results1 = [float(x) for x in data]time1 = time.time() - start_time# æ–¹æ³•2ï¼šmapå‡½æ•°start_time = time.time()results2 = list(map(float, data))time2 = time.time() - start_timeprint(f\"åˆ—è¡¨æ¨å¯¼å¼è€—æ—¶: {time1:.4f}ç§’\")print(f\"mapå‡½æ•°è€—æ—¶: {time2:.4f}ç§’\")print(f\"æ€§èƒ½æå‡: {(time1/time2-1)*100:.1f}%\")ğŸ”— ç›¸å…³å†…å®¹ç›¸å…³å‡½æ•°  int() - æ•´æ•°è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºæ•´æ•°  str() - å­—ç¬¦ä¸²è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºå­—ç¬¦ä¸²  bool() - å¸ƒå°”è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºå¸ƒå°”å€¼  round() - å››èˆäº”å…¥å‡½æ•° - æµ®ç‚¹æ•°å››èˆäº”å…¥  abs() - ç»å¯¹å€¼å‡½æ•° - è®¡ç®—ç»å¯¹å€¼ç›¸å…³æ¨¡å—  mathæ¨¡å— - æ•°å­¦å‡½æ•°  decimalæ¨¡å— - ç²¾ç¡®å°æ•°è¿ç®—  fractionsæ¨¡å— - åˆ†æ•°è¿ç®—ç›¸å…³æ¦‚å¿µ  Pythonæ•°æ®ç±»å‹ - åŸºæœ¬æ•°æ®ç±»å‹  æ•°å€¼ç²¾åº¦ - æ•°å€¼ç²¾åº¦è¯¦è§£  å¼‚å¸¸å¤„ç† - å¼‚å¸¸å¤„ç†æœºåˆ¶ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - float()  IEEE 754æµ®ç‚¹æ•°æ ‡å‡†  Pythonæ•°å€¼ç±»å‹  æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ğŸ·ï¸ æ ‡ç­¾ç±»å‹è½¬æ¢ æµ®ç‚¹æ•° æ•°å€¼å¤„ç† ç²¾åº¦ ç§‘å­¦è®¡æ•°æ³•æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/float/",
        "category": "builtins",
        "tags": ["ç±»å‹è½¬æ¢","æµ®ç‚¹æ•°","æ•°å€¼"]
      }
      
    
  
    
      ,
      {
        "title": "frozenset() - ä¸å¯å˜é›†åˆæ„é€ å‡½æ•°",
        "content": "frozenset() - ä¸å¯å˜é›†åˆæ„é€ å‡½æ•°ğŸ“ æ¦‚è¿°frozenset() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä¸å¯å˜çš„é›†åˆå¯¹è±¡ã€‚ä¸æ™®é€šçš„setä¸åŒï¼Œfrozensetä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½ä¿®æ”¹ï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥ä½œä¸ºå­—å…¸çš„é”®æˆ–å…¶ä»–é›†åˆçš„å…ƒç´ ä½¿ç”¨ã€‚frozensetä¿æŒäº†é›†åˆçš„æ‰€æœ‰ç‰¹æ€§ï¼šå…ƒç´ å”¯ä¸€ã€æ— åºã€æ”¯æŒé›†åˆè¿ç®—ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡frozenset()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œè¯­æ³•  ç†è§£frozensetä¸setçš„åŒºåˆ«å’Œè”ç³»  å­¦ä¼šåœ¨éœ€è¦ä¸å¯å˜é›†åˆçš„åœºæ™¯ä¸­ä½¿ç”¨frozenset  äº†è§£frozensetçš„å“ˆå¸Œç‰¹æ€§å’Œåº”ç”¨åœºæ™¯  æŒæ¡frozensetçš„é›†åˆè¿ç®—æ“ä½œğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  é›†åˆï¼ˆsetï¼‰çš„åŸºæœ¬æ¦‚å¿µå’Œæ“ä½œ  å¯å˜ä¸ä¸å¯å˜å¯¹è±¡çš„æ¦‚å¿µ  å“ˆå¸Œå’Œå­—å…¸é”®çš„è¦æ±‚  å¯è¿­ä»£å¯¹è±¡çš„æ¦‚å¿µğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µfrozenset() åˆ›å»ºä¸€ä¸ªä¸å¯å˜çš„é›†åˆå¯¹è±¡ã€‚ä¸å¯å˜æ„å‘³ç€ä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹å…¶ä¸­çš„å…ƒç´ ã€‚è¿™ç§ä¸å¯å˜æ€§ä½¿å¾—frozensetå¯¹è±¡æ˜¯å¯å“ˆå¸Œçš„ï¼Œå› æ­¤å¯ä»¥ç”¨ä½œå­—å…¸çš„é”®æˆ–å…¶ä»–é›†åˆçš„å…ƒç´ ã€‚è¯­æ³•æ ¼å¼frozenset([iterable])å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  iterable      å¯è¿­ä»£å¯¹è±¡      å¦      æ—       ç”¨äºåˆå§‹åŒ–frozensetçš„å¯è¿­ä»£å¯¹è±¡      è¿”å›å€¼  ç±»å‹: frozensetå¯¹è±¡  å†…å®¹: åŒ…å«æ¥è‡ªå¯è¿­ä»£å¯¹è±¡çš„å”¯ä¸€å…ƒç´ çš„ä¸å¯å˜é›†åˆğŸ’¡ ä»£ç ç¤ºä¾‹åŸºæœ¬ç”¨æ³•# åˆ›å»ºç©ºçš„frozensetempty_fs = frozenset()print(empty_fs)  # è¾“å‡º: frozenset()print(type(empty_fs))  # è¾“å‡º: &lt;class 'frozenset'&gt;# ä»åˆ—è¡¨åˆ›å»ºfrozensetlist_data = [1, 2, 3, 2, 1]fs_from_list = frozenset(list_data)print(fs_from_list)  # è¾“å‡º: frozenset({1, 2, 3})# ä»å­—ç¬¦ä¸²åˆ›å»ºfrozensetfs_from_string = frozenset(\"hello\")print(fs_from_string)  # è¾“å‡º: frozenset({'h', 'e', 'l', 'o'})# ä»å…ƒç»„åˆ›å»ºfrozensetfs_from_tuple = frozenset((1, 2, 3, 4))print(fs_from_tuple)  # è¾“å‡º: frozenset({1, 2, 3, 4})ä¸setçš„æ¯”è¾ƒ# åˆ›å»ºæ™®é€šé›†åˆå’Œä¸å¯å˜é›†åˆregular_set = {1, 2, 3}frozen_set = frozenset([1, 2, 3])print(f\"æ™®é€šé›†åˆ: {regular_set}\")print(f\"ä¸å¯å˜é›†åˆ: {frozen_set}\")# å°è¯•ä¿®æ”¹æ™®é€šé›†åˆï¼ˆæˆåŠŸï¼‰regular_set.add(4)print(f\"æ·»åŠ å…ƒç´ åçš„æ™®é€šé›†åˆ: {regular_set}\")# å°è¯•ä¿®æ”¹ä¸å¯å˜é›†åˆï¼ˆå¤±è´¥ï¼‰try:    frozen_set.add(4)  # è¿™ä¼šå¼•å‘AttributeErrorexcept AttributeError as e:    print(f\"é”™è¯¯: {e}\")# æ£€æŸ¥å¯å“ˆå¸Œæ€§print(f\"æ™®é€šé›†åˆæ˜¯å¦å¯å“ˆå¸Œ: {hash(regular_set) if hasattr(regular_set, '__hash__') else 'ä¸å¯å“ˆå¸Œ'}\")print(f\"ä¸å¯å˜é›†åˆçš„å“ˆå¸Œå€¼: {hash(frozen_set)}\")ä½œä¸ºå­—å…¸é”®ä½¿ç”¨# frozensetå¯ä»¥ä½œä¸ºå­—å…¸çš„é”®data_dict = {}# ä½¿ç”¨frozensetä½œä¸ºé”®key1 = frozenset([1, 2, 3])key2 = frozenset(['a', 'b', 'c'])key3 = frozenset([1, 2, 3])  # ä¸key1ç›¸åŒdata_dict[key1] = \"æ•°å­—é›†åˆ\"data_dict[key2] = \"å­—æ¯é›†åˆ\"data_dict[key3] = \"å¦ä¸€ä¸ªæ•°å­—é›†åˆ\"  # ä¼šè¦†ç›–key1çš„å€¼print(data_dict)# è¾“å‡º: {frozenset({1, 2, 3}): 'å¦ä¸€ä¸ªæ•°å­—é›†åˆ', frozenset({'a', 'b', 'c'}): 'å­—æ¯é›†åˆ'}# æ™®é€šsetä¸èƒ½ä½œä¸ºå­—å…¸é”®try:    regular_set_key = {1, 2, 3}    data_dict[regular_set_key] = \"è¿™ä¼šå¤±è´¥\"except TypeError as e:    print(f\"ä½¿ç”¨setä½œä¸ºé”®çš„é”™è¯¯: {e}\")é›†åˆè¿ç®—# frozensetæ”¯æŒæ‰€æœ‰é›†åˆè¿ç®—fs1 = frozenset([1, 2, 3, 4])fs2 = frozenset([3, 4, 5, 6])fs3 = frozenset([1, 2])# å¹¶é›†union_result = fs1 | fs2print(f\"å¹¶é›†: {union_result}\")  # è¾“å‡º: frozenset({1, 2, 3, 4, 5, 6})# äº¤é›†intersection_result = fs1 &amp; fs2print(f\"äº¤é›†: {intersection_result}\")  # è¾“å‡º: frozenset({3, 4})# å·®é›†difference_result = fs1 - fs2print(f\"å·®é›†: {difference_result}\")  # è¾“å‡º: frozenset({1, 2})# å¯¹ç§°å·®é›†symmetric_diff = fs1 ^ fs2print(f\"å¯¹ç§°å·®é›†: {symmetric_diff}\")  # è¾“å‡º: frozenset({1, 2, 5, 6})# å­é›†æ£€æŸ¥print(f\"fs3æ˜¯fs1çš„å­é›†: {fs3 &lt;= fs1}\")  # è¾“å‡º: Trueprint(f\"fs1æ˜¯fs2çš„è¶…é›†: {fs1 &gt;= fs2}\")  # è¾“å‡º: Falseé›†åˆæ–¹æ³•fs = frozenset([1, 2, 3, 4, 5])# æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨print(f\"3åœ¨é›†åˆä¸­: {3 in fs}\")  # è¾“å‡º: Trueprint(f\"6åœ¨é›†åˆä¸­: {6 in fs}\")  # è¾“å‡º: False# è·å–é›†åˆé•¿åº¦print(f\"é›†åˆé•¿åº¦: {len(fs)}\")  # è¾“å‡º: 5# éå†é›†åˆprint(\"é›†åˆå…ƒç´ :\")for item in fs:    print(f\"  {item}\")# é›†åˆæ–¹æ³•ï¼ˆè¿”å›æ–°çš„frozensetï¼‰other_fs = frozenset([4, 5, 6, 7])# unionæ–¹æ³•union_fs = fs.union(other_fs)print(f\"unionæ–¹æ³•ç»“æœ: {union_fs}\")# intersectionæ–¹æ³•intersection_fs = fs.intersection(other_fs)print(f\"intersectionæ–¹æ³•ç»“æœ: {intersection_fs}\")# differenceæ–¹æ³•difference_fs = fs.difference(other_fs)print(f\"differenceæ–¹æ³•ç»“æœ: {difference_fs}\")# issubsetå’Œissupersetæ–¹æ³•small_fs = frozenset([1, 2])print(f\"small_fsæ˜¯fsçš„å­é›†: {small_fs.issubset(fs)}\")print(f\"fsæ˜¯small_fsçš„è¶…é›†: {fs.issuperset(small_fs)}\")ğŸš€ é«˜çº§åº”ç”¨åµŒå¥—é›†åˆç»“æ„# åˆ›å»ºåŒ…å«frozensetçš„é›†åˆnested_sets = {    frozenset([1, 2, 3]),    frozenset(['a', 'b', 'c']),    frozenset([1, 2, 3]),  # é‡å¤ï¼Œä¼šè¢«å»é™¤    frozenset(['x', 'y', 'z'])}print(f\"åµŒå¥—é›†åˆ: {nested_sets}\")print(f\"åµŒå¥—é›†åˆé•¿åº¦: {len(nested_sets)}\")# åœ¨åµŒå¥—é›†åˆä¸­æŸ¥æ‰¾target = frozenset([1, 2, 3])print(f\"ç›®æ ‡é›†åˆåœ¨åµŒå¥—é›†åˆä¸­: {target in nested_sets}\")# åˆ›å»ºé›†åˆçš„é›†åˆset_of_sets = set()set_of_sets.add(frozenset([1, 2]))set_of_sets.add(frozenset([3, 4]))set_of_sets.add(frozenset([1, 2]))  # é‡å¤ï¼Œä¸ä¼šæ·»åŠ print(f\"é›†åˆçš„é›†åˆ: {set_of_sets}\")ç¼“å­˜å’Œè®°å¿†åŒ–from functools import lru_cache# ä½¿ç”¨frozensetä½œä¸ºç¼“å­˜é”®@lru_cache(maxsize=128)def calculate_set_properties(elements):    \"\"\"è®¡ç®—é›†åˆçš„å±æ€§ï¼ˆä½¿ç”¨frozensetä½œä¸ºå‚æ•°ï¼‰\"\"\"    if not isinstance(elements, frozenset):        elements = frozenset(elements)        return {        'size': len(elements),        'sum': sum(elements) if all(isinstance(x, (int, float)) for x in elements) else None,        'min': min(elements) if elements else None,        'max': max(elements) if elements else None    }# ä½¿ç”¨ç¤ºä¾‹data1 = frozenset([1, 2, 3, 4, 5])data2 = frozenset([1, 2, 3, 4, 5])  # ç›¸åŒçš„æ•°æ®data3 = frozenset([2, 3, 4, 5, 6])result1 = calculate_set_properties(data1)result2 = calculate_set_properties(data2)  # ä¼šä½¿ç”¨ç¼“å­˜result3 = calculate_set_properties(data3)print(f\"ç»“æœ1: {result1}\")print(f\"ç»“æœ2: {result2}\")print(f\"ç»“æœ3: {result3}\")print(f\"ç¼“å­˜ä¿¡æ¯: {calculate_set_properties.cache_info()}\")å›¾ç®—æ³•ä¸­çš„åº”ç”¨# åœ¨å›¾ç®—æ³•ä¸­ä½¿ç”¨frozensetè¡¨ç¤ºè¾¹class Graph:    def __init__(self):        self.edges = set()  # å­˜å‚¨frozensetè¡¨ç¤ºçš„è¾¹        self.vertices = set()        def add_edge(self, vertex1, vertex2):        \"\"\"æ·»åŠ æ— å‘è¾¹\"\"\"        edge = frozenset([vertex1, vertex2])        self.edges.add(edge)        self.vertices.add(vertex1)        self.vertices.add(vertex2)        def has_edge(self, vertex1, vertex2):        \"\"\"æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¾¹\"\"\"        edge = frozenset([vertex1, vertex2])        return edge in self.edges        def get_neighbors(self, vertex):        \"\"\"è·å–é¡¶ç‚¹çš„é‚»å±…\"\"\"        neighbors = set()        for edge in self.edges:            if vertex in edge:                neighbors.update(edge - {vertex})        return neighbors        def __str__(self):        return f\"Graph(vertices={self.vertices}, edges={self.edges})\"# ä½¿ç”¨ç¤ºä¾‹graph = Graph()graph.add_edge('A', 'B')graph.add_edge('B', 'C')graph.add_edge('C', 'A')graph.add_edge('A', 'B')  # é‡å¤è¾¹ï¼Œä¸ä¼šæ·»åŠ print(graph)print(f\"Aå’ŒBä¹‹é—´æœ‰è¾¹: {graph.has_edge('A', 'B')}\")print(f\"Açš„é‚»å±…: {graph.get_neighbors('A')}\")é…ç½®ç®¡ç†# ä½¿ç”¨frozensetç®¡ç†ä¸å¯å˜é…ç½®class ConfigManager:    def __init__(self):        self.configs = {}  # é…ç½®å -&gt; frozensetçš„æ˜ å°„        def add_config(self, name, settings):        \"\"\"æ·»åŠ é…ç½®\"\"\"        if isinstance(settings, dict):            # å°†å­—å…¸è½¬æ¢ä¸ºfrozenset of tuples            config_items = frozenset(settings.items())        elif hasattr(settings, '__iter__'):            config_items = frozenset(settings)        else:            raise ValueError(\"è®¾ç½®å¿…é¡»æ˜¯å­—å…¸æˆ–å¯è¿­ä»£å¯¹è±¡\")                self.configs[name] = config_items        def get_config(self, name):        \"\"\"è·å–é…ç½®\"\"\"        return self.configs.get(name)        def compare_configs(self, name1, name2):        \"\"\"æ¯”è¾ƒä¸¤ä¸ªé…ç½®\"\"\"        config1 = self.configs.get(name1)        config2 = self.configs.get(name2)                if config1 is None or config2 is None:            return None                return {            'common': config1 &amp; config2,            'only_in_first': config1 - config2,            'only_in_second': config2 - config1        }# ä½¿ç”¨ç¤ºä¾‹config_manager = ConfigManager()# æ·»åŠ é…ç½®config_manager.add_config('dev', {    'debug': True,    'database_url': 'localhost:5432',    'cache_enabled': False})config_manager.add_config('prod', {    'debug': False,    'database_url': 'prod-server:5432',    'cache_enabled': True,    'ssl_enabled': True})# æ¯”è¾ƒé…ç½®comparison = config_manager.compare_configs('dev', 'prod')print(\"é…ç½®æ¯”è¾ƒç»“æœ:\")print(f\"  å…±åŒè®¾ç½®: {comparison['common']}\")print(f\"  ä»…åœ¨devä¸­: {comparison['only_in_first']}\")print(f\"  ä»…åœ¨prodä¸­: {comparison['only_in_second']}\")âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µä¸å¯å˜æ€§ç†è§£# æ­£ç¡®ç†è§£ä¸å¯å˜æ€§fs = frozenset([1, 2, 3])# é”™è¯¯ï¼šå°è¯•ä¿®æ”¹frozensettry:    fs.add(4)  # AttributeErrorexcept AttributeError:    print(\"frozensetä¸æ”¯æŒaddæ–¹æ³•\")try:    fs.remove(1)  # AttributeErrorexcept AttributeError:    print(\"frozensetä¸æ”¯æŒremoveæ–¹æ³•\")# æ­£ç¡®ï¼šåˆ›å»ºæ–°çš„frozensetnew_fs = fs | {4}  # ä½¿ç”¨å¹¶é›†æ“ä½œprint(f\"åŸfrozenset: {fs}\")print(f\"æ–°frozenset: {new_fs}\")# æ­£ç¡®ï¼šä½¿ç”¨æ–¹æ³•åˆ›å»ºæ–°frozensetanother_fs = fs.union([4, 5])print(f\"ä½¿ç”¨unionæ–¹æ³•: {another_fs}\")å“ˆå¸Œå’Œç›¸ç­‰æ€§# frozensetçš„å“ˆå¸Œå’Œç›¸ç­‰æ€§fs1 = frozenset([1, 2, 3])fs2 = frozenset([3, 2, 1])  # é¡ºåºä¸åŒfs3 = frozenset([1, 2, 3, 3])  # æœ‰é‡å¤å…ƒç´ print(f\"fs1 == fs2: {fs1 == fs2}\")  # Trueï¼Œé›†åˆä¸è€ƒè™‘é¡ºåºprint(f\"fs1 == fs3: {fs1 == fs3}\")  # Trueï¼Œé›†åˆè‡ªåŠ¨å»é‡print(f\"hash(fs1) == hash(fs2): {hash(fs1) == hash(fs2)}\")  # True# åœ¨å­—å…¸ä¸­ä½¿ç”¨dict_with_fs_keys = {}dict_with_fs_keys[fs1] = \"ç¬¬ä¸€ä¸ª\"dict_with_fs_keys[fs2] = \"ç¬¬äºŒä¸ª\"  # ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªdict_with_fs_keys[fs3] = \"ç¬¬ä¸‰ä¸ª\"  # ä¼šè¦†ç›–å‰é¢çš„print(f\"å­—å…¸å†…å®¹: {dict_with_fs_keys}\")  # åªæœ‰ä¸€ä¸ªé”®å€¼å¯¹æ€§èƒ½è€ƒè™‘import time# æ€§èƒ½æ¯”è¾ƒï¼šfrozenset vs set vs listdef performance_comparison():    \"\"\"æ¯”è¾ƒä¸åŒæ•°æ®ç»“æ„çš„æ€§èƒ½\"\"\"    data = list(range(10000))        # åˆ›å»ºæ—¶é—´æ¯”è¾ƒ    start = time.time()    regular_set = set(data)    set_time = time.time() - start        start = time.time()    frozen_set = frozenset(data)    frozenset_time = time.time() - start        start = time.time()    list_data = list(data)    list_time = time.time() - start        print(f\"åˆ›å»ºæ—¶é—´æ¯”è¾ƒ:\")    print(f\"  set: {set_time:.6f}ç§’\")    print(f\"  frozenset: {frozenset_time:.6f}ç§’\")    print(f\"  list: {list_time:.6f}ç§’\")        # æŸ¥æ‰¾æ—¶é—´æ¯”è¾ƒ    target = 5000        start = time.time()    for _ in range(1000):        target in regular_set    set_lookup_time = time.time() - start        start = time.time()    for _ in range(1000):        target in frozen_set    frozenset_lookup_time = time.time() - start        start = time.time()    for _ in range(1000):        target in list_data    list_lookup_time = time.time() - start        print(f\"\\næŸ¥æ‰¾æ—¶é—´æ¯”è¾ƒï¼ˆ1000æ¬¡ï¼‰:\")    print(f\"  set: {set_lookup_time:.6f}ç§’\")    print(f\"  frozenset: {frozenset_lookup_time:.6f}ç§’\")    print(f\"  list: {list_lookup_time:.6f}ç§’\")performance_comparison()å†…å­˜ä½¿ç”¨ä¼˜åŒ–import sys# å†…å­˜ä½¿ç”¨æ¯”è¾ƒdef memory_comparison():    \"\"\"æ¯”è¾ƒä¸åŒæ•°æ®ç»“æ„çš„å†…å­˜ä½¿ç”¨\"\"\"    data = list(range(1000))        regular_set = set(data)    frozen_set = frozenset(data)    list_data = list(data)    tuple_data = tuple(data)        print(\"å†…å­˜ä½¿ç”¨æ¯”è¾ƒ:\")    print(f\"  set: {sys.getsizeof(regular_set)} å­—èŠ‚\")    print(f\"  frozenset: {sys.getsizeof(frozen_set)} å­—èŠ‚\")    print(f\"  list: {sys.getsizeof(list_data)} å­—èŠ‚\")    print(f\"  tuple: {sys.getsizeof(tuple_data)} å­—èŠ‚\")        # frozensetçš„å…±äº«ä¼˜åŒ–    fs1 = frozenset([1, 2, 3])    fs2 = frozenset([1, 2, 3])        print(f\"\\nfrozensetå¯¹è±¡å…±äº«:\")    print(f\"  fs1 is fs2: {fs1 is fs2}\")  # å¯èƒ½ä¸ºTrueï¼ˆå®ç°ç›¸å…³ï¼‰    print(f\"  id(fs1): {id(fs1)}\")    print(f\"  id(fs2): {id(fs2)}\")memory_comparison()ğŸ”§ æ€§èƒ½ä¼˜åŒ–æ‰¹é‡æ“ä½œä¼˜åŒ–# æ‰¹é‡æ“ä½œçš„æ€§èƒ½ä¼˜åŒ–def optimize_batch_operations():    \"\"\"ä¼˜åŒ–æ‰¹é‡frozensetæ“ä½œ\"\"\"    # é¿å…é¢‘ç¹åˆ›å»ºå°çš„frozenset    data_sets = []        # ä¸æ¨èï¼šé¢‘ç¹åˆ›å»º    start = time.time()    for i in range(1000):        fs = frozenset([i, i+1, i+2])        data_sets.append(fs)    slow_time = time.time() - start        # æ¨èï¼šæ‰¹é‡åˆ›å»º    data_sets.clear()    start = time.time()    batch_data = [(i, i+1, i+2) for i in range(1000)]    data_sets = [frozenset(item) for item in batch_data]    fast_time = time.time() - start        print(f\"é¢‘ç¹åˆ›å»ºæ—¶é—´: {slow_time:.6f}ç§’\")    print(f\"æ‰¹é‡åˆ›å»ºæ—¶é—´: {fast_time:.6f}ç§’\")    print(f\"æ€§èƒ½æå‡: {slow_time / fast_time:.2f}å€\")optimize_batch_operations()é›†åˆè¿ç®—ä¼˜åŒ–# é›†åˆè¿ç®—çš„æ€§èƒ½ä¼˜åŒ–def optimize_set_operations():    \"\"\"ä¼˜åŒ–é›†åˆè¿ç®—æ€§èƒ½\"\"\"    # åˆ›å»ºæµ‹è¯•æ•°æ®    large_fs1 = frozenset(range(10000))    large_fs2 = frozenset(range(5000, 15000))    small_fs = frozenset(range(100))        # ä¼˜åŒ–1ï¼šä½¿ç”¨åˆé€‚çš„è¿ç®—é¡ºåº    start = time.time()    # ä¸æ¨èï¼šå¤§é›†åˆå…ˆè¿ç®—    result1 = (large_fs1 | large_fs2) &amp; small_fs    slow_time = time.time() - start        start = time.time()    # æ¨èï¼šå°é›†åˆå…ˆè¿ç®—    result2 = small_fs &amp; (large_fs1 | large_fs2)    fast_time = time.time() - start        print(f\"å¤§é›†åˆå…ˆè¿ç®—: {slow_time:.6f}ç§’\")    print(f\"å°é›†åˆå…ˆè¿ç®—: {fast_time:.6f}ç§’\")    print(f\"ç»“æœç›¸åŒ: {result1 == result2}\")        # ä¼˜åŒ–2ï¼šé¿å…ä¸å¿…è¦çš„ä¸­é—´ç»“æœ    start = time.time()    # ä¸æ¨èï¼šåˆ›å»ºä¸­é—´frozenset    temp_fs = frozenset(range(100, 200))    result3 = large_fs1 &amp; temp_fs    slow_time2 = time.time() - start        start = time.time()    # æ¨èï¼šç›´æ¥ä½¿ç”¨å…¶ä»–å¯è¿­ä»£å¯¹è±¡    result4 = large_fs1 &amp; set(range(100, 200))    fast_time2 = time.time() - start        print(f\"\\nåˆ›å»ºä¸­é—´frozenset: {slow_time2:.6f}ç§’\")    print(f\"ç›´æ¥ä½¿ç”¨set: {fast_time2:.6f}ç§’\")    print(f\"ç»“æœç›¸åŒ: {result3 == result4}\")optimize_set_operations()ğŸ”— ç›¸å…³å‡½æ•°å†…ç½®å‡½æ•°  set() - åˆ›å»ºå¯å˜é›†åˆ  list() - åˆ›å»ºåˆ—è¡¨  tuple() - åˆ›å»ºå…ƒç»„  dict() - åˆ›å»ºå­—å…¸  len() - è·å–é›†åˆé•¿åº¦  iter() - åˆ›å»ºè¿­ä»£å™¨  hash() - è®¡ç®—å“ˆå¸Œå€¼  bool() - å¸ƒå°”å€¼è½¬æ¢æ ‡å‡†åº“æ¨¡å—  collections - ç‰¹æ®Šå®¹å™¨æ•°æ®ç±»å‹          Counter - è®¡æ•°å™¨      defaultdict - é»˜è®¤å­—å…¸        itertools - è¿­ä»£å·¥å…·          chain() - è¿æ¥è¿­ä»£å™¨      combinations() - ç»„åˆ      permutations() - æ’åˆ—        operator - å‡½æ•°å¼æ“ä½œç¬¦          or_() - å¹¶é›†æ“ä½œ      and_() - äº¤é›†æ“ä½œ      sub() - å·®é›†æ“ä½œ      xor() - å¯¹ç§°å·®é›†æ“ä½œ      ç¬¬ä¸‰æ–¹åº“  numpy - æ•°å€¼è®¡ç®—          np.unique() - å”¯ä¸€å€¼      np.intersect1d() - ä¸€ç»´äº¤é›†      np.union1d() - ä¸€ç»´å¹¶é›†        pandas - æ•°æ®åˆ†æ          pd.Series.unique() - å”¯ä¸€å€¼      pd.Index - ç´¢å¼•å¯¹è±¡      ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - frozenset()  Pythonå®˜æ–¹æ–‡æ¡£ - é›†åˆç±»å‹  Pythonæ•°æ®ç»“æ„è¯¦è§£  Pythonå“ˆå¸Œå’Œç›¸ç­‰æ€§  é›†åˆè®ºåŸºç¡€ğŸ·ï¸ æ ‡ç­¾é›†åˆ ä¸å¯å˜ æ•°æ®ç»“æ„ å“ˆå¸Œ é›†åˆè¿ç®— å‡½æ•°å¼ç¼–ç¨‹æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/frozenset/",
        "category": "builtins",
        "tags": ["é›†åˆ","ä¸å¯å˜","æ•°æ®ç»“æ„","å“ˆå¸Œ"]
      }
      
    
  
    
      ,
      {
        "title": "å‡½æ•°ä½œç”¨åŸŸä¸é—­åŒ…",
        "content": "å‡½æ•°ä½œç”¨åŸŸä¸é—­åŒ…ğŸ“ æ¦‚è¿°ä½œç”¨åŸŸæ˜¯ç¼–ç¨‹ä¸­çš„é‡è¦æ¦‚å¿µï¼Œå®ƒå†³å®šäº†å˜é‡åœ¨ç¨‹åºä¸­çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸã€‚Pythonçš„ä½œç”¨åŸŸè§„åˆ™éµå¾ªLEGBåŸåˆ™ï¼ˆLocalã€Enclosingã€Globalã€Built-inï¼‰ï¼Œç†è§£ä½œç”¨åŸŸå¯¹äºç¼–å†™æ­£ç¡®ã€é«˜æ•ˆçš„Pythonä»£ç è‡³å…³é‡è¦ã€‚é—­åŒ…æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„é‡è¦ç‰¹æ€§ï¼Œå®ƒå…è®¸å†…å±‚å‡½æ•°è®¿é—®å¤–å±‚å‡½æ•°çš„å˜é‡ï¼Œåˆ›å»ºå¼ºå¤§è€Œçµæ´»çš„ç¼–ç¨‹æ¨¡å¼ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  ç†è§£Pythonçš„ä½œç”¨åŸŸè§„åˆ™å’ŒLEGBåŸåˆ™  æŒæ¡globalå’Œnonlocalå…³é”®å­—çš„ä½¿ç”¨  å­¦ä¼šåˆ›å»ºå’Œä½¿ç”¨é—­åŒ…  äº†è§£å˜é‡çš„ç”Ÿå‘½å‘¨æœŸå’Œé”€æ¯æœºåˆ¶  æŒæ¡é»˜è®¤å‚æ•°çš„ä½œç”¨åŸŸç‰¹æ€§  èƒ½å¤Ÿè§£å†³ä½œç”¨åŸŸç›¸å…³çš„å¸¸è§é—®é¢˜ğŸ“‹ å‰ç½®çŸ¥è¯†  Pythonå‡½æ•°å®šä¹‰å’Œè°ƒç”¨  å˜é‡å’Œæ•°æ®ç±»å‹  å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡çš„æ¦‚å¿µ  åŸºæœ¬çš„é¢å‘å¯¹è±¡æ¦‚å¿µğŸ” è¯¦ç»†å†…å®¹ä½œç”¨åŸŸåŸºç¡€ä½œç”¨åŸŸå®šä¹‰ä½œç”¨åŸŸå†³å®šäº†å˜é‡åœ¨ç¨‹åºä¸­çš„å¯è§èŒƒå›´å’Œè®¿é—®æƒé™ã€‚# å…¨å±€ä½œç”¨åŸŸglobal_var = \"æˆ‘æ˜¯å…¨å±€å˜é‡\"def outer_function():    # å¤–å±‚å‡½æ•°ä½œç”¨åŸŸï¼ˆEnclosing scopeï¼‰    outer_var = \"æˆ‘æ˜¯å¤–å±‚å‡½æ•°å˜é‡\"        def inner_function():        # å±€éƒ¨ä½œç”¨åŸŸï¼ˆLocal scopeï¼‰        local_var = \"æˆ‘æ˜¯å±€éƒ¨å˜é‡\"                # å¯ä»¥è®¿é—®æ‰€æœ‰å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡        print(f\"å±€éƒ¨å˜é‡ï¼š{local_var}\")        print(f\"å¤–å±‚å˜é‡ï¼š{outer_var}\")        print(f\"å…¨å±€å˜é‡ï¼š{global_var}\")        print(f\"å†…ç½®å‡½æ•°ï¼š{len([1, 2, 3])}\")        inner_function()        # æ— æ³•è®¿é—®å†…å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡    # print(local_var)  # è¿™ä¼šå¼•å‘NameErrorouter_function()# æ¼”ç¤ºä½œç”¨åŸŸæŸ¥æ‰¾é¡ºåºdef scope_demo():    \"\"\"æ¼”ç¤ºLEGBä½œç”¨åŸŸæŸ¥æ‰¾é¡ºåº\"\"\"    # Local - å±€éƒ¨ä½œç”¨åŸŸ    name = \"å±€éƒ¨ä½œç”¨åŸŸ\"        def inner():        # å¦‚æœè¿™é‡Œä¸å®šä¹‰nameï¼Œä¼šå‘ä¸ŠæŸ¥æ‰¾        print(f\"å†…å±‚å‡½æ•°è®¿é—®ï¼š{name}\")        inner()    print(f\"å¤–å±‚å‡½æ•°è®¿é—®ï¼š{name}\")scope_demo()å˜é‡æŸ¥æ‰¾è§„åˆ™PythonæŒ‰ç…§LEGBé¡ºåºæŸ¥æ‰¾å˜é‡ï¼š# Built-in scopeï¼ˆå†…ç½®ä½œç”¨åŸŸï¼‰# len, print, strç­‰å†…ç½®å‡½æ•°# Global scopeï¼ˆå…¨å±€ä½œç”¨åŸŸï¼‰len = \"æˆ‘é‡æ–°å®šä¹‰äº†len\"  # ä¸æ¨èè¿™æ ·åšdef demonstrate_legb():    # Enclosing scopeï¼ˆå¤–å±‚ä½œç”¨åŸŸï¼‰    len = \"å¤–å±‚å‡½æ•°çš„len\"        def inner_function():        # Local scopeï¼ˆå±€éƒ¨ä½œç”¨åŸŸï¼‰        len = \"å±€éƒ¨çš„len\"        print(f\"å±€éƒ¨ä½œç”¨åŸŸä¸­çš„lenï¼š{len}\")                # è®¿é—®ä¸åŒä½œç”¨åŸŸçš„å˜é‡        def show_scopes():            print(f\"å½“å‰lenï¼š{len}\")  # å±€éƒ¨çš„len        inner_function()    print(f\"å¤–å±‚ä½œç”¨åŸŸä¸­çš„lenï¼š{len}\")demonstrate_legb()print(f\"å…¨å±€ä½œç”¨åŸŸä¸­çš„lenï¼š{len}\")# æ¢å¤å†…ç½®çš„lenå‡½æ•°del lenprint(f\"å†…ç½®çš„lenå‡½æ•°ï¼š{len([1, 2, 3])}\")  # ç°åœ¨åˆå¯ä»¥æ­£å¸¸ä½¿ç”¨äº†globalå…³é”®å­—åŸºæœ¬ç”¨æ³•globalå…³é”®å­—ç”¨äºåœ¨å‡½æ•°å†…éƒ¨å£°æ˜å…¨å±€å˜é‡ã€‚# å…¨å±€å˜é‡counter = 0user_name = \"æœªè®¾ç½®\"def increment_counter():    \"\"\"å¢åŠ è®¡æ•°å™¨\"\"\"    global counter    counter += 1    print(f\"è®¡æ•°å™¨å€¼ï¼š{counter}\")def set_user_name(name):    \"\"\"è®¾ç½®ç”¨æˆ·å\"\"\"    global user_name    user_name = name    print(f\"ç”¨æˆ·åå·²è®¾ç½®ä¸ºï¼š{user_name}\")def get_user_info():    \"\"\"è·å–ç”¨æˆ·ä¿¡æ¯\"\"\"    # åªè¯»å–å…¨å±€å˜é‡ï¼Œä¸éœ€è¦globalå£°æ˜    print(f\"å½“å‰ç”¨æˆ·ï¼š{user_name}ï¼Œè®¿é—®æ¬¡æ•°ï¼š{counter}\")# ä½¿ç”¨ç¤ºä¾‹print(f\"åˆå§‹è®¡æ•°å™¨ï¼š{counter}\")increment_counter()increment_counter()set_user_name(\"å¼ ä¸‰\")get_user_info()å¤æ‚ç¤ºä¾‹# é…ç½®ç®¡ç†ç¤ºä¾‹config = {    \"debug\": False,    \"max_connections\": 100,    \"timeout\": 30}log_level = \"INFO\"def update_config(key, value):    \"\"\"æ›´æ–°é…ç½®\"\"\"    global config    if key in config:        old_value = config[key]        config[key] = value        print(f\"é…ç½®æ›´æ–°ï¼š{key} ä» {old_value} æ”¹ä¸º {value}\")    else:        print(f\"æœªçŸ¥é…ç½®é¡¹ï¼š{key}\")def set_debug_mode(enabled):    \"\"\"è®¾ç½®è°ƒè¯•æ¨¡å¼\"\"\"    global config, log_level    config[\"debug\"] = enabled    log_level = \"DEBUG\" if enabled else \"INFO\"    print(f\"è°ƒè¯•æ¨¡å¼ï¼š{'å¼€å¯' if enabled else 'å…³é—­'}ï¼Œæ—¥å¿—çº§åˆ«ï¼š{log_level}\")def get_config_summary():    \"\"\"è·å–é…ç½®æ‘˜è¦\"\"\"    print(f\"å½“å‰é…ç½®ï¼š{config}\")    print(f\"æ—¥å¿—çº§åˆ«ï¼š{log_level}\")# ä½¿ç”¨ç¤ºä¾‹get_config_summary()update_config(\"max_connections\", 200)set_debug_mode(True)get_config_summary()æ³¨æ„äº‹é¡¹# å¸¸è§é”™è¯¯ç¤ºä¾‹x = 10def problematic_function():    \"\"\"æ¼”ç¤ºå¸¸è§çš„globalä½¿ç”¨é”™è¯¯\"\"\"    print(x)  # è¿™è¡Œå¯ä»¥æ­£å¸¸æ‰§è¡Œ    # x += 1  # è¿™è¡Œä¼šæŠ¥é”™ï¼šUnboundLocalError    # å› ä¸º+=æ“ä½œæ—¢è¯»å–åˆèµ‹å€¼ï¼ŒPythonè®¤ä¸ºxæ˜¯å±€éƒ¨å˜é‡def correct_function():    \"\"\"æ­£ç¡®çš„åšæ³•\"\"\"    global x    print(x)    x += 1    print(f\"xå¢åŠ åï¼š{x}\")# æ¼”ç¤ºprint(f\"åˆå§‹xï¼š{x}\")problematic_function()  # åªæ‰“å°ï¼Œä¸ä¿®æ”¹correct_function()      # æ­£ç¡®ä¿®æ”¹å…¨å±€å˜é‡print(f\"æœ€ç»ˆxï¼š{x}\")# å¦ä¸€ä¸ªå¸¸è§é”™è¯¯y = [1, 2, 3]def modify_list():    \"\"\"ä¿®æ”¹å¯å˜å¯¹è±¡\"\"\"    # å¯¹äºå¯å˜å¯¹è±¡ï¼Œå¦‚æœåªæ˜¯ä¿®æ”¹å†…å®¹ï¼ˆä¸é‡æ–°èµ‹å€¼ï¼‰ï¼Œä¸éœ€è¦global    y.append(4)    print(f\"ä¿®æ”¹åçš„åˆ—è¡¨ï¼š{y}\")def replace_list():    \"\"\"æ›¿æ¢æ•´ä¸ªåˆ—è¡¨\"\"\"    global y    y = [10, 20, 30]    print(f\"æ›¿æ¢åçš„åˆ—è¡¨ï¼š{y}\")modify_list()   # ä¿®æ”¹å†…å®¹replace_list()  # æ›¿æ¢æ•´ä¸ªå¯¹è±¡nonlocalå…³é”®å­—åŸºæœ¬æ¦‚å¿µnonlocalå…³é”®å­—ç”¨äºåœ¨åµŒå¥—å‡½æ•°ä¸­è®¿é—®å¤–å±‚å‡½æ•°çš„å˜é‡ã€‚def create_counter():    \"\"\"åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨å‡½æ•°\"\"\"    count = 0        def increment():        nonlocal count        count += 1        return count        def decrement():        nonlocal count        count -= 1        return count        def get_count():        # åªè¯»å–ï¼Œä¸éœ€è¦nonlocal        return count        def reset():        nonlocal count        count = 0        return count        # è¿”å›æ“ä½œå‡½æ•°    return {        \"increment\": increment,        \"decrement\": decrement,        \"get_count\": get_count,        \"reset\": reset    }# ä½¿ç”¨ç¤ºä¾‹counter1 = create_counter()print(f\"åˆå§‹è®¡æ•°ï¼š{counter1['get_count']()}\")  # 0print(f\"å¢åŠ åï¼š{counter1['increment']()}\")      # 1print(f\"å†å¢åŠ ï¼š{counter1['increment']()}\")      # 2print(f\"å‡å°‘åï¼š{counter1['decrement']()}\")      # 1print(f\"é‡ç½®åï¼š{counter1['reset']()}\")         # 0# åˆ›å»ºå¦ä¸€ä¸ªç‹¬ç«‹çš„è®¡æ•°å™¨counter2 = create_counter()print(f\"è®¡æ•°å™¨2ï¼š{counter2['increment']()}\")     # 1print(f\"è®¡æ•°å™¨1ï¼š{counter1['get_count']()}\")    # 0ï¼ˆç‹¬ç«‹çš„ï¼‰é«˜çº§åº”ç”¨def create_bank_account(initial_balance=0):    \"\"\"åˆ›å»ºé“¶è¡Œè´¦æˆ·\"\"\"    balance = initial_balance    transaction_history = []        def deposit(amount):        \"\"\"å­˜æ¬¾\"\"\"        nonlocal balance        if amount &gt; 0:            balance += amount            transaction_history.append(f\"å­˜æ¬¾ï¼š+{amount}ï¼Œä½™é¢ï¼š{balance}\")            return True        return False        def withdraw(amount):        \"\"\"å–æ¬¾\"\"\"        nonlocal balance        if 0 &lt; amount &lt;= balance:            balance -= amount            transaction_history.append(f\"å–æ¬¾ï¼š-{amount}ï¼Œä½™é¢ï¼š{balance}\")            return True        return False        def get_balance():        \"\"\"æŸ¥è¯¢ä½™é¢\"\"\"        return balance        def get_history():        \"\"\"æŸ¥è¯¢äº¤æ˜“å†å²\"\"\"        return transaction_history.copy()        def transfer_to(target_account, amount):        \"\"\"è½¬è´¦åˆ°å…¶ä»–è´¦æˆ·\"\"\"        if withdraw(amount):            if target_account['deposit'](amount):                transaction_history.append(f\"è½¬å‡ºï¼š-{amount}ï¼Œä½™é¢ï¼š{balance}\")                return True            else:                # å¦‚æœç›®æ ‡è´¦æˆ·å­˜æ¬¾å¤±è´¥ï¼Œå›æ»š                deposit(amount)                transaction_history.pop()  # ç§»é™¤å–æ¬¾è®°å½•        return False        return {        \"deposit\": deposit,        \"withdraw\": withdraw,        \"get_balance\": get_balance,        \"get_history\": get_history,        \"transfer_to\": transfer_to    }# ä½¿ç”¨ç¤ºä¾‹account1 = create_bank_account(1000)account2 = create_bank_account(500)print(f\"è´¦æˆ·1ä½™é¢ï¼š{account1['get_balance']()}\")print(f\"è´¦æˆ·2ä½™é¢ï¼š{account2['get_balance']()}\")# å­˜å–æ¬¾æ“ä½œaccount1['deposit'](200)account1['withdraw'](150)# è½¬è´¦æ“ä½œif account1['transfer_to'](account2, 300):    print(\"è½¬è´¦æˆåŠŸ\")else:    print(\"è½¬è´¦å¤±è´¥\")print(f\"\\nè´¦æˆ·1ä½™é¢ï¼š{account1['get_balance']()}\")print(f\"è´¦æˆ·2ä½™é¢ï¼š{account2['get_balance']()}\")print(\"\\nè´¦æˆ·1äº¤æ˜“å†å²ï¼š\")for record in account1['get_history']():    print(f\"  {record}\")é—­åŒ…é—­åŒ…çš„æ¦‚å¿µé—­åŒ…æ˜¯æŒ‡å†…å±‚å‡½æ•°å¼•ç”¨äº†å¤–å±‚å‡½æ•°çš„å˜é‡ï¼Œå³ä½¿å¤–å±‚å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œè¿™äº›å˜é‡ä»ç„¶è¢«ä¿æŒã€‚def create_multiplier(factor):    \"\"\"åˆ›å»ºä¹˜æ³•å™¨é—­åŒ…\"\"\"    def multiply(number):        # è¿™é‡Œå¼•ç”¨äº†å¤–å±‚å‡½æ•°çš„factorå˜é‡        return number * factor        return multiply# åˆ›å»ºä¸åŒçš„ä¹˜æ³•å™¨double = create_multiplier(2)triple = create_multiplier(3)tenfold = create_multiplier(10)# ä½¿ç”¨é—­åŒ…print(f\"5çš„ä¸¤å€ï¼š{double(5)}\")      # 10print(f\"5çš„ä¸‰å€ï¼š{triple(5)}\")      # 15print(f\"5çš„åå€ï¼š{tenfold(5)}\")     # 50# æ¯ä¸ªé—­åŒ…éƒ½ä¿æŒç€è‡ªå·±çš„factorå€¼print(f\"doubleçš„factorï¼š{double.__closure__[0].cell_contents}\")print(f\"tripleçš„factorï¼š{triple.__closure__[0].cell_contents}\")é—­åŒ…çš„å®é™…åº”ç”¨def create_validator(validation_rule):    \"\"\"åˆ›å»ºéªŒè¯å™¨é—­åŒ…\"\"\"    def validate(value):        return validation_rule(value)        return validate# åˆ›å»ºä¸åŒçš„éªŒè¯å™¨is_positive = create_validator(lambda x: x &gt; 0)is_even = create_validator(lambda x: x % 2 == 0)is_in_range = create_validator(lambda x: 1 &lt;= x &lt;= 100)# ä½¿ç”¨éªŒè¯å™¨test_values = [-5, 0, 2, 15, 150]for value in test_values:    print(f\"å€¼ {value}:\")    print(f\"  æ˜¯æ­£æ•°ï¼š{is_positive(value)}\")    print(f\"  æ˜¯å¶æ•°ï¼š{is_even(value)}\")    print(f\"  åœ¨èŒƒå›´å†…ï¼š{is_in_range(value)}\")    print()def create_cache():    \"\"\"åˆ›å»ºç¼“å­˜é—­åŒ…\"\"\"    cache = {}        def cached_function(func):        def wrapper(*args, **kwargs):            # åˆ›å»ºç¼“å­˜é”®            key = str(args) + str(sorted(kwargs.items()))                        if key in cache:                print(f\"ç¼“å­˜å‘½ä¸­ï¼š{key}\")                return cache[key]                        # è®¡ç®—ç»“æœå¹¶ç¼“å­˜            result = func(*args, **kwargs)            cache[key] = result            print(f\"ç¼“å­˜å­˜å‚¨ï¼š{key} -&gt; {result}\")            return result                return wrapper        def get_cache_info():        return {            \"size\": len(cache),            \"keys\": list(cache.keys())        }        def clear_cache():        cache.clear()        print(\"ç¼“å­˜å·²æ¸…ç©º\")        return cached_function, get_cache_info, clear_cache# ä½¿ç”¨ç¼“å­˜é—­åŒ…cached_decorator, get_info, clear = create_cache()@cached_decoratordef expensive_calculation(n):    \"\"\"æ¨¡æ‹Ÿè€—æ—¶è®¡ç®—\"\"\"    import time    time.sleep(0.1)  # æ¨¡æ‹Ÿè®¡ç®—æ—¶é—´    return n ** 2# æµ‹è¯•ç¼“å­˜æ•ˆæœprint(\"ç¬¬ä¸€æ¬¡è®¡ç®—ï¼š\")result1 = expensive_calculation(5)print(f\"ç»“æœï¼š{result1}\")print(\"\\nç¬¬äºŒæ¬¡è®¡ç®—ï¼ˆç›¸åŒå‚æ•°ï¼‰ï¼š\")result2 = expensive_calculation(5)print(f\"ç»“æœï¼š{result2}\")print(f\"\\nç¼“å­˜ä¿¡æ¯ï¼š{get_info()}\")é»˜è®¤å‚æ•°çš„ä½œç”¨åŸŸå¯å˜é»˜è®¤å‚æ•°çš„é™·é˜±# é”™è¯¯ç¤ºä¾‹ï¼šå¯å˜é»˜è®¤å‚æ•°def add_item_wrong(item, target_list=[]):    \"\"\"é”™è¯¯çš„é»˜è®¤å‚æ•°ä½¿ç”¨\"\"\"    target_list.append(item)    return target_list# æ¼”ç¤ºé—®é¢˜list1 = add_item_wrong(\"ç¬¬ä¸€ä¸ª\")print(f\"ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼š{list1}\")  # ['ç¬¬ä¸€ä¸ª']list2 = add_item_wrong(\"ç¬¬äºŒä¸ª\")print(f\"ç¬¬äºŒæ¬¡è°ƒç”¨ï¼š{list2}\")  # ['ç¬¬ä¸€ä¸ª', 'ç¬¬äºŒä¸ª'] - æ„å¤–ï¼list3 = add_item_wrong(\"ç¬¬ä¸‰ä¸ª\")print(f\"ç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼š{list3}\")  # ['ç¬¬ä¸€ä¸ª', 'ç¬¬äºŒä¸ª', 'ç¬¬ä¸‰ä¸ª'] - æ›´æ„å¤–ï¼# æŸ¥çœ‹é»˜è®¤å‚æ•°print(f\"å‡½æ•°é»˜è®¤å‚æ•°ï¼š{add_item_wrong.__defaults__}\")# æ­£ç¡®çš„åšæ³•1ï¼šä½¿ç”¨Noneä½œä¸ºé»˜è®¤å€¼def add_item_correct1(item, target_list=None):    \"\"\"æ­£ç¡®çš„é»˜è®¤å‚æ•°ä½¿ç”¨æ–¹æ³•1\"\"\"    if target_list is None:        target_list = []    target_list.append(item)    return target_list# æ­£ç¡®çš„åšæ³•2ï¼šä½¿ç”¨å½±å­æ‹·è´def add_item_correct2(item, target_list=None):    \"\"\"æ­£ç¡®çš„é»˜è®¤å‚æ•°ä½¿ç”¨æ–¹æ³•2\"\"\"    if target_list is None:        target_list = []    else:        target_list = target_list.copy()  # åˆ›å»ºå‰¯æœ¬    target_list.append(item)    return target_list# æµ‹è¯•æ­£ç¡®çš„å®ç°print(\"\\næ­£ç¡®å®ç°çš„æµ‹è¯•ï¼š\")list_a = add_item_correct1(\"A\")list_b = add_item_correct1(\"B\")print(f\"åˆ—è¡¨Aï¼š{list_a}\")  # ['A']print(f\"åˆ—è¡¨Bï¼š{list_b}\")  # ['B']é»˜è®¤å‚æ•°çš„æœ€ä½³å®è·µdef create_user_profile(name, age, hobbies=None, settings=None):    \"\"\"åˆ›å»ºç”¨æˆ·æ¡£æ¡ˆçš„æœ€ä½³å®è·µ\"\"\"    # ä½¿ç”¨Noneä½œä¸ºå¯å˜å¯¹è±¡çš„é»˜è®¤å€¼    if hobbies is None:        hobbies = []    if settings is None:        settings = {\"theme\": \"light\", \"notifications\": True}        profile = {        \"name\": name,        \"age\": age,        \"hobbies\": hobbies.copy(),  # åˆ›å»ºå‰¯æœ¬é¿å…æ„å¤–ä¿®æ”¹        \"settings\": settings.copy()    }        return profiledef log_message(message, timestamp=None, level=\"INFO\"):    \"\"\"æ—¥å¿—è®°å½•å‡½æ•°\"\"\"    if timestamp is None:        import datetime        timestamp = datetime.datetime.now()        log_entry = f\"[{timestamp}] {level}: {message}\"    print(log_entry)    return log_entry# ä½¿ç”¨ç¤ºä¾‹user1 = create_user_profile(\"å¼ ä¸‰\", 25, [\"è¯»ä¹¦\", \"æ¸¸æ³³\"])user2 = create_user_profile(\"æå››\", 30)  # ä½¿ç”¨é»˜è®¤å€¼print(f\"ç”¨æˆ·1ï¼š{user1}\")print(f\"ç”¨æˆ·2ï¼š{user2}\")# ä¿®æ”¹user1çš„çˆ±å¥½ä¸ä¼šå½±å“user2user1[\"hobbies\"].append(\"ç¼–ç¨‹\")print(f\"ä¿®æ”¹åç”¨æˆ·1ï¼š{user1['hobbies']}\")print(f\"ç”¨æˆ·2ä»ç„¶æ˜¯ï¼š{user2['hobbies']}\")# æ—¥å¿—ç¤ºä¾‹log_message(\"ç³»ç»Ÿå¯åŠ¨\")log_message(\"ç”¨æˆ·ç™»å½•\", level=\"DEBUG\")log_message(\"é”™è¯¯å‘ç”Ÿ\", level=\"ERROR\")å‡½æ•°çš„é”€æ¯å’Œç”Ÿå‘½å‘¨æœŸå…¨å±€å‡½æ•°çš„é”€æ¯# æ¼”ç¤ºå‡½æ•°çš„é”€æ¯def original_function():    \"\"\"åŸå§‹å‡½æ•°\"\"\"    return \"æˆ‘æ˜¯åŸå§‹å‡½æ•°\"print(f\"è°ƒç”¨åŸå§‹å‡½æ•°ï¼š{original_function()}\")# æ–¹æ³•1ï¼šé‡æ–°å®šä¹‰åŒåå‡½æ•°def original_function():    \"\"\"é‡æ–°å®šä¹‰çš„å‡½æ•°\"\"\"    return \"æˆ‘æ˜¯æ–°å‡½æ•°\"print(f\"è°ƒç”¨æ–°å‡½æ•°ï¼š{original_function()}\")# æ–¹æ³•2ï¼šä½¿ç”¨delåˆ é™¤å‡½æ•°def temp_function():    return \"ä¸´æ—¶å‡½æ•°\"print(f\"ä¸´æ—¶å‡½æ•°å­˜åœ¨ï¼š{temp_function()}\")del temp_functiontry:    temp_function()except NameError as e:    print(f\"å‡½æ•°å·²åˆ é™¤ï¼š{e}\")# æ–¹æ³•3ï¼šç¨‹åºç»“æŸæ—¶è‡ªåŠ¨é”€æ¯ï¼ˆè¿™é‡Œåªæ˜¯æ¼”ç¤ºæ¦‚å¿µï¼‰print(\"ç¨‹åºç»“æŸæ—¶ï¼Œæ‰€æœ‰å‡½æ•°éƒ½ä¼šè¢«é”€æ¯\")å±€éƒ¨å‡½æ•°å’Œé—­åŒ…çš„ç”Ÿå‘½å‘¨æœŸdef demonstrate_function_lifecycle():    \"\"\"æ¼”ç¤ºå‡½æ•°ç”Ÿå‘½å‘¨æœŸ\"\"\"        def create_closure_with_data():        data = [1, 2, 3, 4, 5]                def inner_function():            return sum(data)                return inner_function        # åˆ›å»ºé—­åŒ…    closure_func = create_closure_with_data()    print(f\"é—­åŒ…ç»“æœï¼š{closure_func()}\")        # å³ä½¿å¤–å±‚å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œé—­åŒ…ä»ç„¶ä¿æŒå¯¹dataçš„å¼•ç”¨    print(f\"é—­åŒ…ä»ç„¶æœ‰æ•ˆï¼š{closure_func()}\")        # åˆ é™¤é—­åŒ…å¼•ç”¨    del closure_func    print(\"é—­åŒ…å¼•ç”¨å·²åˆ é™¤\")        # æ¼”ç¤ºå±€éƒ¨å‡½æ•°çš„é”€æ¯    def outer_with_inner():        def inner():            return \"å†…å±‚å‡½æ•°\"                # åœ¨å¤–å±‚å‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨        result = inner()        return result        result = outer_with_inner()    print(f\"å¤–å±‚å‡½æ•°ç»“æœï¼š{result}\")        # å¤–å±‚å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå†…å±‚å‡½æ•°ä¹Ÿè¢«é”€æ¯    # inner()  # è¿™ä¼šå¼•å‘NameErrordemonstrate_function_lifecycle()ğŸ’¡ å®é™…åº”ç”¨é…ç½®ç®¡ç†å™¨def create_config_manager():    \"\"\"åˆ›å»ºé…ç½®ç®¡ç†å™¨\"\"\"    _config = {}    _defaults = {}    _validators = {}        def set_default(key, value, validator=None):        \"\"\"è®¾ç½®é»˜è®¤å€¼\"\"\"        nonlocal _defaults, _validators        _defaults[key] = value        if validator:            _validators[key] = validator        def set_config(key, value):        \"\"\"è®¾ç½®é…ç½®å€¼\"\"\"        nonlocal _config                # éªŒè¯å€¼        if key in _validators:            if not _validators[key](value):                raise ValueError(f\"é…ç½®å€¼ {key}={value} éªŒè¯å¤±è´¥\")                _config[key] = value        def get_config(key, default=None):        \"\"\"è·å–é…ç½®å€¼\"\"\"        if key in _config:            return _config[key]        elif key in _defaults:            return _defaults[key]        else:            return default        def get_all_config():        \"\"\"è·å–æ‰€æœ‰é…ç½®\"\"\"        result = _defaults.copy()        result.update(_config)        return result        def reset_config(key=None):        \"\"\"é‡ç½®é…ç½®\"\"\"        nonlocal _config        if key:            _config.pop(key, None)        else:            _config.clear()        return {        \"set_default\": set_default,        \"set_config\": set_config,        \"get_config\": get_config,        \"get_all_config\": get_all_config,        \"reset_config\": reset_config    }# ä½¿ç”¨é…ç½®ç®¡ç†å™¨config_mgr = create_config_manager()# è®¾ç½®é»˜è®¤å€¼å’ŒéªŒè¯å™¨config_mgr[\"set_default\"](\"max_connections\", 100, lambda x: isinstance(x, int) and x &gt; 0)config_mgr[\"set_default\"](\"timeout\", 30, lambda x: isinstance(x, (int, float)) and x &gt; 0)config_mgr[\"set_default\"](\"debug\", False, lambda x: isinstance(x, bool))# è®¾ç½®é…ç½®config_mgr[\"set_config\"](\"max_connections\", 200)config_mgr[\"set_config\"](\"debug\", True)print(\"å½“å‰é…ç½®ï¼š\")for key, value in config_mgr[\"get_all_config\"]().items():    print(f\"  {key}: {value}\")# å°è¯•è®¾ç½®æ— æ•ˆå€¼try:    config_mgr[\"set_config\"](\"max_connections\", -1)except ValueError as e:    print(f\"é…ç½®é”™è¯¯ï¼š{e}\")äº‹ä»¶ç³»ç»Ÿdef create_event_system():    \"\"\"åˆ›å»ºäº‹ä»¶ç³»ç»Ÿ\"\"\"    _listeners = {}    _event_history = []        def add_listener(event_type, callback):        \"\"\"æ·»åŠ äº‹ä»¶ç›‘å¬å™¨\"\"\"        nonlocal _listeners        if event_type not in _listeners:            _listeners[event_type] = []        _listeners[event_type].append(callback)        def remove_listener(event_type, callback):        \"\"\"ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\"\"\"        nonlocal _listeners        if event_type in _listeners:            try:                _listeners[event_type].remove(callback)                if not _listeners[event_type]:                    del _listeners[event_type]            except ValueError:                pass        def emit_event(event_type, data=None):        \"\"\"è§¦å‘äº‹ä»¶\"\"\"        nonlocal _event_history                # è®°å½•äº‹ä»¶å†å²        import datetime        event_record = {            \"type\": event_type,            \"data\": data,            \"timestamp\": datetime.datetime.now(),            \"listeners_count\": len(_listeners.get(event_type, []))        }        _event_history.append(event_record)                # è°ƒç”¨æ‰€æœ‰ç›‘å¬å™¨        if event_type in _listeners:            for callback in _listeners[event_type]:                try:                    callback(data)                except Exception as e:                    print(f\"äº‹ä»¶ç›‘å¬å™¨é”™è¯¯ï¼š{e}\")        def get_listeners(event_type=None):        \"\"\"è·å–ç›‘å¬å™¨ä¿¡æ¯\"\"\"        if event_type:            return _listeners.get(event_type, [])        return _listeners.copy()        def get_event_history(limit=None):        \"\"\"è·å–äº‹ä»¶å†å²\"\"\"        if limit:            return _event_history[-limit:]        return _event_history.copy()        def clear_history():        \"\"\"æ¸…ç©ºäº‹ä»¶å†å²\"\"\"        nonlocal _event_history        _event_history.clear()        return {        \"add_listener\": add_listener,        \"remove_listener\": remove_listener,        \"emit_event\": emit_event,        \"get_listeners\": get_listeners,        \"get_event_history\": get_event_history,        \"clear_history\": clear_history    }# ä½¿ç”¨äº‹ä»¶ç³»ç»Ÿevent_system = create_event_system()# å®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°def on_user_login(data):    print(f\"ç”¨æˆ·ç™»å½•ï¼š{data['username']}\")def on_user_logout(data):    print(f\"ç”¨æˆ·ç™»å‡ºï¼š{data['username']}\")def log_all_events(data):    print(f\"äº‹ä»¶æ—¥å¿—ï¼š{data}\")# æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨event_system[\"add_listener\"](\"user_login\", on_user_login)event_system[\"add_listener\"](\"user_logout\", on_user_logout)event_system[\"add_listener\"](\"user_login\", log_all_events)event_system[\"add_listener\"](\"user_logout\", log_all_events)# è§¦å‘äº‹ä»¶event_system[\"emit_event\"](\"user_login\", {\"username\": \"å¼ ä¸‰\", \"ip\": \"192.168.1.100\"})event_system[\"emit_event\"](\"user_logout\", {\"username\": \"å¼ ä¸‰\"})# æŸ¥çœ‹äº‹ä»¶å†å²print(\"\\näº‹ä»¶å†å²ï¼š\")for event in event_system[\"get_event_history\"]():    print(f\"  {event['timestamp']}: {event['type']} (ç›‘å¬å™¨: {event['listeners_count']})\")âš ï¸ æ³¨æ„äº‹é¡¹  é¿å…è¿‡åº¦ä½¿ç”¨global: å…¨å±€å˜é‡ä¼šå¢åŠ ä»£ç çš„å¤æ‚æ€§å’Œè€¦åˆåº¦  è°¨æ…ä½¿ç”¨å¯å˜é»˜è®¤å‚æ•°: ä½¿ç”¨Noneä½œä¸ºé»˜è®¤å€¼ï¼Œåœ¨å‡½æ•°å†…éƒ¨åˆ›å»ºå¯å˜å¯¹è±¡  ç†è§£é—­åŒ…çš„å†…å­˜å½±å“: é—­åŒ…ä¼šä¿æŒå¯¹å¤–å±‚å˜é‡çš„å¼•ç”¨ï¼Œå¯èƒ½å½±å“åƒåœ¾å›æ”¶  nonlocalçš„é™åˆ¶: nonlocalåªèƒ½ç”¨äºåµŒå¥—å‡½æ•°ï¼Œä¸èƒ½ç”¨äºå…¨å±€ä½œç”¨åŸŸ  ä½œç”¨åŸŸæŸ¥æ‰¾æ€§èƒ½: è®¿é—®å±€éƒ¨å˜é‡æ¯”å…¨å±€å˜é‡æ›´å¿«  é¿å…å¾ªç¯å¼•ç”¨: åœ¨é—­åŒ…ä¸­è¦æ³¨æ„é¿å…åˆ›å»ºå¾ªç¯å¼•ç”¨ğŸ”— ç›¸å…³å†…å®¹  å‡½æ•°å®šä¹‰ä¸è°ƒç”¨ - å­¦ä¹ å‡½æ•°çš„åŸºæœ¬æ¦‚å¿µ  é¢å‘å¯¹è±¡ç¼–ç¨‹ - äº†è§£ç±»çš„ä½œç”¨åŸŸè§„åˆ™  è£…é¥°å™¨ - é—­åŒ…çš„é«˜çº§åº”ç”¨  å¼‚å¸¸å¤„ç† - å¼‚å¸¸çš„ä½œç”¨åŸŸç‰¹æ€§ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - ä½œç”¨åŸŸå’Œå‘½åç©ºé—´  PEP 227 - Statically Nested Scopes  Pythoné—­åŒ…è¯¦è§£ğŸ·ï¸ æ ‡ç­¾ä½œç”¨åŸŸ é—­åŒ… global nonlocal å˜é‡ä½œç”¨åŸŸ LEGB å‡½æ•°ç”Ÿå‘½å‘¨æœŸæœ€åæ›´æ–°: 2024-01-01ä½œè€…: Pythonæ–‡æ¡£å›¢é˜Ÿç‰ˆæœ¬: 1.0",
        "url": "/docs/basics/function-scope/",
        "category": "basics",
        "tags": ["ä½œç”¨åŸŸ","é—­åŒ…","global","nonlocal","å˜é‡ä½œç”¨åŸŸ"]
      }
      
    
  
    
      ,
      {
        "title": "å‡½æ•°å®šä¹‰ä¸è°ƒç”¨",
        "content": "å‡½æ•°å®šä¹‰ä¸è°ƒç”¨ğŸ“ æ¦‚è¿°å‡½æ•°æ˜¯Pythonç¼–ç¨‹ä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†ä»£ç ç»„ç»‡æˆå¯é‡ç”¨çš„æ¨¡å—ã€‚å‡½æ•°å¯ä»¥æ¥æ”¶è¾“å…¥å‚æ•°ï¼Œæ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ï¼Œå¹¶è¿”å›ç»“æœã€‚æŒæ¡å‡½æ•°çš„å®šä¹‰ã€è°ƒç”¨å’Œå‚æ•°ä¼ é€’æ˜¯ç¼–å†™é«˜è´¨é‡Pythonä»£ç çš„åŸºç¡€ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡å‡½æ•°çš„å®šä¹‰è¯­æ³•å’ŒåŸºæœ¬ç»“æ„  ç†è§£å‡½æ•°çš„è°ƒç”¨æœºåˆ¶å’Œå‚æ•°ä¼ é€’  å­¦ä¼šä½¿ç”¨ä¸åŒç±»å‹çš„å‚æ•°ï¼ˆä½ç½®å‚æ•°ã€å…³é”®å­—å‚æ•°ã€é»˜è®¤å‚æ•°ï¼‰  æŒæ¡å¯å˜å‚æ•°å’Œå‚æ•°è§£æ„çš„ä½¿ç”¨æ–¹æ³•  äº†è§£å‡½æ•°è¿”å›å€¼çš„å¤„ç†ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•å’Œç¼©è¿›è§„åˆ™  å˜é‡å’Œæ•°æ®ç±»å‹  åŸºæœ¬çš„è¾“å…¥è¾“å‡ºæ“ä½œ  å­—ç¬¦ä¸²æ ¼å¼åŒ–ğŸ” è¯¦ç»†å†…å®¹å‡½æ•°çš„å®šä¹‰åŸºæœ¬è¯­æ³•å‡½æ•°å®šä¹‰ä½¿ç”¨defå…³é”®å­—ï¼Œéµå¾ªä»¥ä¸‹åŸºæœ¬æ ¼å¼ï¼šdef å‡½æ•°å(å‚æ•°åˆ—è¡¨):    \"\"\"å‡½æ•°æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆå¯é€‰ï¼‰\"\"\"    å‡½æ•°ä½“(ä»£ç å—)    return è¿”å›å€¼  # returnå¯ä»¥çœç•¥ï¼Œé»˜è®¤è¿”å›NoneåŸºç¡€ç¤ºä¾‹# ç®€å•çš„å‡½æ•°å®šä¹‰def greet(name):    \"\"\"é—®å€™å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå§“åå‚æ•°\"\"\"    message = f\"ä½ å¥½ï¼Œ{name}ï¼\"    return message# è°ƒç”¨å‡½æ•°result = greet(\"å¼ ä¸‰\")print(result)  # è¾“å‡ºï¼šä½ å¥½ï¼Œå¼ ä¸‰ï¼# æ— å‚æ•°å‡½æ•°def get_current_time():    \"\"\"è·å–å½“å‰æ—¶é—´\"\"\"    import datetime    return datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\")print(get_current_time())  # è¾“å‡ºï¼š2024-01-01 12:00:00# æ— è¿”å›å€¼å‡½æ•°def print_separator():    \"\"\"æ‰“å°åˆ†éš”çº¿\"\"\"    print(\"-\" * 50)print_separator()  # è¾“å‡ºï¼š--------------------------------------------------å‡½æ•°å‘½åè§„èŒƒ# å¥½çš„å‡½æ•°å‘½åç¤ºä¾‹def calculate_area(length, width):    \"\"\"è®¡ç®—çŸ©å½¢é¢ç§¯\"\"\"    return length * widthdef is_even(number):    \"\"\"åˆ¤æ–­æ•°å­—æ˜¯å¦ä¸ºå¶æ•°\"\"\"    return number % 2 == 0def get_user_input():    \"\"\"è·å–ç”¨æˆ·è¾“å…¥\"\"\"    return input(\"è¯·è¾“å…¥å†…å®¹ï¼š\")# ä½¿ç”¨ç¤ºä¾‹area = calculate_area(5, 3)print(f\"é¢ç§¯ï¼š{area}\")  # è¾“å‡ºï¼šé¢ç§¯ï¼š15print(is_even(4))   # è¾“å‡ºï¼šTrueprint(is_even(5))   # è¾“å‡ºï¼šFalseå‡½æ•°çš„è°ƒç”¨åŸºæœ¬è°ƒç”¨æ–¹å¼def add_numbers(a, b):    \"\"\"ä¸¤æ•°ç›¸åŠ \"\"\"    return a + b# ç›´æ¥è°ƒç”¨å¹¶æ‰“å°ç»“æœprint(add_numbers(3, 5))  # è¾“å‡ºï¼š8# å°†ç»“æœèµ‹å€¼ç»™å˜é‡result = add_numbers(10, 20)print(f\"è®¡ç®—ç»“æœï¼š{result}\")  # è¾“å‡ºï¼šè®¡ç®—ç»“æœï¼š30# åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨total = add_numbers(1, 2) + add_numbers(3, 4)print(f\"æ€»å’Œï¼š{total}\")  # è¾“å‡ºï¼šæ€»å’Œï¼š10å‡½æ•°ä½œä¸ºå‚æ•°def apply_operation(x, y, operation):    \"\"\"åº”ç”¨æŒ‡å®šçš„æ“ä½œå‡½æ•°\"\"\"    return operation(x, y)def multiply(a, b):    \"\"\"ä¹˜æ³•è¿ç®—\"\"\"    return a * bdef divide(a, b):    \"\"\"é™¤æ³•è¿ç®—\"\"\"    if b != 0:        return a / b    else:        return \"é™¤æ•°ä¸èƒ½ä¸ºé›¶\"# ä½¿ç”¨ç¤ºä¾‹result1 = apply_operation(6, 3, multiply)print(f\"6 Ã— 3 = {result1}\")  # è¾“å‡ºï¼š6 Ã— 3 = 18result2 = apply_operation(10, 2, divide)print(f\"10 Ã· 2 = {result2}\")  # è¾“å‡ºï¼š10 Ã· 2 = 5.0å‚æ•°ä¼ é€’ä½ç½®å‚æ•°ä½ç½®å‚æ•°æŒ‰ç…§å®šä¹‰çš„é¡ºåºä¼ é€’ï¼Œå‚æ•°çš„ä½ç½®å¾ˆé‡è¦ã€‚def introduce_person(name, age, city):    \"\"\"ä»‹ç»ä¸€ä¸ªäººçš„ä¿¡æ¯\"\"\"    print(f\"æˆ‘å«{name}ï¼Œä»Šå¹´{age}å²ï¼Œæ¥è‡ª{city}\")# æŒ‰ä½ç½®ä¼ é€’å‚æ•°introduce_person(\"æå››\", 25, \"åŒ—äº¬\")# è¾“å‡ºï¼šæˆ‘å«æå››ï¼Œä»Šå¹´25å²ï¼Œæ¥è‡ªåŒ—äº¬# ä½ç½®é”™è¯¯ä¼šå¯¼è‡´é€»è¾‘é”™è¯¯introduce_person(25, \"ç‹äº”\", \"ä¸Šæµ·\")  # å‚æ•°ä½ç½®é”™è¯¯# è¾“å‡ºï¼šæˆ‘å«25ï¼Œä»Šå¹´ç‹äº”å²ï¼Œæ¥è‡ªä¸Šæµ·å…³é”®å­—å‚æ•°å…³é”®å­—å‚æ•°é€šè¿‡å‚æ•°åæŒ‡å®šå€¼ï¼Œä¸ä¾èµ–äºä½ç½®é¡ºåºã€‚def create_user_profile(username, email, age, city):    \"\"\"åˆ›å»ºç”¨æˆ·æ¡£æ¡ˆ\"\"\"    profile = {        \"ç”¨æˆ·å\": username,        \"é‚®ç®±\": email,        \"å¹´é¾„\": age,        \"åŸå¸‚\": city    }    return profile# ä½¿ç”¨å…³é”®å­—å‚æ•°ï¼Œé¡ºåºå¯ä»¥ä»»æ„user1 = create_user_profile(    city=\"æ·±åœ³\",    username=\"å¼ ä¸‰\",    age=28,    email=\"zhangsan@example.com\")print(user1)# è¾“å‡ºï¼š{'ç”¨æˆ·å': 'å¼ ä¸‰', 'é‚®ç®±': 'zhangsan@example.com', 'å¹´é¾„': 28, 'åŸå¸‚': 'æ·±åœ³'}ä½ç½®å‚æ•°å’Œå…³é”®å­—å‚æ•°æ··åˆä½¿ç”¨def book_flight(departure, destination, date, time=\"09:00\", class_type=\"ç»æµèˆ±\"):    \"\"\"é¢„è®¢èˆªç­\"\"\"    booking_info = {        \"å‡ºå‘åœ°\": departure,        \"ç›®çš„åœ°\": destination,        \"æ—¥æœŸ\": date,        \"æ—¶é—´\": time,        \"èˆ±ä½ç±»å‹\": class_type    }    return booking_info# æ··åˆä½¿ç”¨ä½ç½®å‚æ•°å’Œå…³é”®å­—å‚æ•°# æ³¨æ„ï¼šä½ç½®å‚æ•°å¿…é¡»åœ¨å…³é”®å­—å‚æ•°ä¹‹å‰flight1 = book_flight(\"åŒ—äº¬\", \"ä¸Šæµ·\", \"2024-01-15\", class_type=\"å•†åŠ¡èˆ±\")print(flight1)flight2 = book_flight(\"å¹¿å·\", \"æ·±åœ³\", \"2024-01-20\", time=\"14:30\")print(flight2)# é”™è¯¯ç¤ºä¾‹ï¼šå…³é”®å­—å‚æ•°ä¸èƒ½åœ¨ä½ç½®å‚æ•°ä¹‹å‰# flight3 = book_flight(\"åŒ—äº¬\", destination=\"ä¸Šæµ·\", \"2024-01-15\")  # è¯­æ³•é”™è¯¯é»˜è®¤å‚æ•°ï¼ˆç¼ºçœå‚æ•°ï¼‰é»˜è®¤å‚æ•°ä¸ºå‡½æ•°å‚æ•°æä¾›é»˜è®¤å€¼ï¼Œè°ƒç”¨æ—¶å¯ä»¥çœç•¥è¿™äº›å‚æ•°ã€‚def calculate_circle_area(radius, pi=3.14159):    \"\"\"è®¡ç®—åœ†çš„é¢ç§¯\"\"\"    area = pi * radius ** 2    return area# ä½¿ç”¨é»˜è®¤çš„piå€¼area1 = calculate_circle_area(5)print(f\"åŠå¾„ä¸º5çš„åœ†é¢ç§¯ï¼š{area1:.2f}\")  # è¾“å‡ºï¼šåŠå¾„ä¸º5çš„åœ†é¢ç§¯ï¼š78.54# æä¾›è‡ªå®šä¹‰çš„piå€¼import matharea2 = calculate_circle_area(5, math.pi)print(f\"åŠå¾„ä¸º5çš„åœ†é¢ç§¯ï¼ˆç²¾ç¡®ï¼‰ï¼š{area2:.2f}\")  # è¾“å‡ºï¼šåŠå¾„ä¸º5çš„åœ†é¢ç§¯ï¼ˆç²¾ç¡®ï¼‰ï¼š78.54def send_email(to, subject, body, cc=None, bcc=None, priority=\"normal\"):    \"\"\"å‘é€é‚®ä»¶\"\"\"    email_info = {        \"æ”¶ä»¶äºº\": to,        \"ä¸»é¢˜\": subject,        \"æ­£æ–‡\": body,        \"æŠ„é€\": cc,        \"å¯†é€\": bcc,        \"ä¼˜å…ˆçº§\": priority    }    print(f\"é‚®ä»¶å·²å‘é€ï¼š{email_info}\")    return email_info# åªæä¾›å¿…éœ€å‚æ•°send_email(\"user@example.com\", \"ä¼šè®®é€šçŸ¥\", \"æ˜å¤©ä¸Šåˆ10ç‚¹å¼€ä¼š\")# æä¾›éƒ¨åˆ†å¯é€‰å‚æ•°send_email(    \"user@example.com\",     \"ç´§æ€¥é€šçŸ¥\",     \"ç³»ç»Ÿç»´æŠ¤é€šçŸ¥\",     priority=\"high\")å¯å˜å‚æ•°ä½ç½®å¯å˜å‚æ•°ï¼ˆ*argsï¼‰ä½¿ç”¨*argså¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡çš„ä½ç½®å‚æ•°ï¼Œè¿™äº›å‚æ•°ä¼šè¢«æ”¶é›†åˆ°ä¸€ä¸ªå…ƒç»„ä¸­ã€‚def calculate_sum(*numbers):    \"\"\"è®¡ç®—ä»»æ„æ•°é‡æ•°å­—çš„å’Œ\"\"\"    total = 0    for num in numbers:        total += num    return total# ä¼ é€’ä¸åŒæ•°é‡çš„å‚æ•°print(calculate_sum(1, 2, 3))           # è¾“å‡ºï¼š6print(calculate_sum(1, 2, 3, 4, 5))     # è¾“å‡ºï¼š15print(calculate_sum(10))                # è¾“å‡ºï¼š10print(calculate_sum())                  # è¾“å‡ºï¼š0def print_info(name, age, *hobbies):    \"\"\"æ‰“å°ä¸ªäººä¿¡æ¯å’Œçˆ±å¥½\"\"\"    print(f\"å§“åï¼š{name}\")    print(f\"å¹´é¾„ï¼š{age}\")    if hobbies:        print(f\"çˆ±å¥½ï¼š{', '.join(hobbies)}\")    else:        print(\"æš‚æ— çˆ±å¥½ä¿¡æ¯\")# ä½¿ç”¨ç¤ºä¾‹print_info(\"å¼ ä¸‰\", 25, \"è¯»ä¹¦\", \"æ¸¸æ³³\", \"ç¼–ç¨‹\")# è¾“å‡ºï¼š# å§“åï¼šå¼ ä¸‰# å¹´é¾„ï¼š25# çˆ±å¥½ï¼šè¯»ä¹¦, æ¸¸æ³³, ç¼–ç¨‹print_info(\"æå››\", 30)# è¾“å‡ºï¼š# å§“åï¼šæå››# å¹´é¾„ï¼š30# æš‚æ— çˆ±å¥½ä¿¡æ¯å…³é”®å­—å¯å˜å‚æ•°ï¼ˆ**kwargsï¼‰ä½¿ç”¨**kwargså¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡çš„å…³é”®å­—å‚æ•°ï¼Œè¿™äº›å‚æ•°ä¼šè¢«æ”¶é›†åˆ°ä¸€ä¸ªå­—å…¸ä¸­ã€‚def create_student_record(name, student_id, **additional_info):    \"\"\"åˆ›å»ºå­¦ç”Ÿè®°å½•\"\"\"    record = {        \"å§“å\": name,        \"å­¦å·\": student_id    }        # æ·»åŠ é¢å¤–ä¿¡æ¯    record.update(additional_info)        return record# ä½¿ç”¨ç¤ºä¾‹student1 = create_student_record(    \"å¼ ä¸‰\",     \"2024001\",     ä¸“ä¸š=\"è®¡ç®—æœºç§‘å­¦\",     å¹´çº§=\"å¤§äºŒ\",     ç­çº§=\"CS2022-1\",    è”ç³»ç”µè¯=\"13800138000\")print(student1)# è¾“å‡ºï¼š{'å§“å': 'å¼ ä¸‰', 'å­¦å·': '2024001', 'ä¸“ä¸š': 'è®¡ç®—æœºç§‘å­¦', 'å¹´çº§': 'å¤§äºŒ', 'ç­çº§': 'CS2022-1', 'è”ç³»ç”µè¯': '13800138000'}def configure_database(**config):    \"\"\"é…ç½®æ•°æ®åº“è¿æ¥\"\"\"    default_config = {        \"host\": \"localhost\",        \"port\": 3306,        \"charset\": \"utf8\",        \"timeout\": 30    }        # æ›´æ–°é»˜è®¤é…ç½®    default_config.update(config)        print(\"æ•°æ®åº“é…ç½®ï¼š\")    for key, value in default_config.items():        print(f\"  {key}: {value}\")        return default_config# ä½¿ç”¨ç¤ºä¾‹db_config = configure_database(    host=\"192.168.1.100\",    username=\"admin\",    password=\"secret123\",    database=\"myapp\")æ··åˆä½¿ç”¨å¯å˜å‚æ•°def flexible_function(required_arg, default_arg=\"default\", *args, **kwargs):    \"\"\"æ¼”ç¤ºå‚æ•°çš„ç»¼åˆä½¿ç”¨\"\"\"    print(f\"å¿…éœ€å‚æ•°ï¼š{required_arg}\")    print(f\"é»˜è®¤å‚æ•°ï¼š{default_arg}\")        if args:        print(f\"ä½ç½®å¯å˜å‚æ•°ï¼š{args}\")        if kwargs:        print(f\"å…³é”®å­—å¯å˜å‚æ•°ï¼š{kwargs}\")# ä½¿ç”¨ç¤ºä¾‹print(\"ç¤ºä¾‹1ï¼š\")flexible_function(\"å¿…éœ€å€¼\")print(\"\\nç¤ºä¾‹2ï¼š\")flexible_function(\"å¿…éœ€å€¼\", \"è‡ªå®šä¹‰é»˜è®¤å€¼\", \"é¢å¤–1\", \"é¢å¤–2\", key1=\"value1\", key2=\"value2\")# keyword-onlyå‚æ•°def advanced_function(name, age, *, email, phone=None, **other_info):    \"\"\"ä½¿ç”¨keyword-onlyå‚æ•°\"\"\"    info = {        \"å§“å\": name,        \"å¹´é¾„\": age,        \"é‚®ç®±\": email    }        if phone:        info[\"ç”µè¯\"] = phone        info.update(other_info)        return info# ä½¿ç”¨ç¤ºä¾‹user_info = advanced_function(    \"å¼ ä¸‰\",     25,     email=\"zhangsan@example.com\",     phone=\"13800138000\",    address=\"åŒ—äº¬å¸‚æœé˜³åŒº\",    department=\"æŠ€æœ¯éƒ¨\")print(user_info)å‚æ•°è§£æ„å‚æ•°è§£æ„å…è®¸æˆ‘ä»¬å°†é›†åˆï¼ˆåˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ï¼‰çš„å…ƒç´ ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ã€‚è§£æ„åˆ—è¡¨å’Œå…ƒç»„ï¼ˆ*æ“ä½œç¬¦ï¼‰def calculate_rectangle_area(length, width):    \"\"\"è®¡ç®—çŸ©å½¢é¢ç§¯\"\"\"    return length * width# ä½¿ç”¨åˆ—è¡¨è§£æ„dimensions = [5, 3]area = calculate_rectangle_area(*dimensions)print(f\"çŸ©å½¢é¢ç§¯ï¼š{area}\")  # è¾“å‡ºï¼šçŸ©å½¢é¢ç§¯ï¼š15# ä½¿ç”¨å…ƒç»„è§£æ„size = (4, 6)area = calculate_rectangle_area(*size)print(f\"çŸ©å½¢é¢ç§¯ï¼š{area}\")  # è¾“å‡ºï¼šçŸ©å½¢é¢ç§¯ï¼š24def print_student_info(name, age, grade, *subjects):    \"\"\"æ‰“å°å­¦ç”Ÿä¿¡æ¯\"\"\"    print(f\"å­¦ç”Ÿï¼š{name}ï¼Œå¹´é¾„ï¼š{age}ï¼Œå¹´çº§ï¼š{grade}\")    if subjects:        print(f\"é€‰ä¿®è¯¾ç¨‹ï¼š{', '.join(subjects)}\")# è§£æ„åŒ…å«å¤šä¸ªå…ƒç´ çš„åˆ—è¡¨student_data = [\"ææ˜\", 16, \"é«˜ä¸€\", \"æ•°å­¦\", \"ç‰©ç†\", \"åŒ–å­¦\"]print_student_info(*student_data)# è¾“å‡ºï¼š# å­¦ç”Ÿï¼šææ˜ï¼Œå¹´é¾„ï¼š16ï¼Œå¹´çº§ï¼šé«˜ä¸€# é€‰ä¿®è¯¾ç¨‹ï¼šæ•°å­¦, ç‰©ç†, åŒ–å­¦è§£æ„å­—å…¸ï¼ˆ**æ“ä½œç¬¦ï¼‰def create_user_account(username, email, password, **profile):    \"\"\"åˆ›å»ºç”¨æˆ·è´¦æˆ·\"\"\"    account = {        \"ç”¨æˆ·å\": username,        \"é‚®ç®±\": email,        \"å¯†ç \": \"*\" * len(password),  # éšè—å¯†ç         \"æ¡£æ¡ˆ\": profile    }    return account# ä½¿ç”¨å­—å…¸è§£æ„user_data = {    \"username\": \"john_doe\",    \"email\": \"john@example.com\",    \"password\": \"secret123\",    \"first_name\": \"John\",    \"last_name\": \"Doe\",    \"age\": 30,    \"city\": \"New York\"}account = create_user_account(**user_data)print(account)# æ··åˆä½¿ç”¨ä½ç½®å‚æ•°å’Œå­—å…¸è§£æ„login_info = {\"email\": \"jane@example.com\", \"password\": \"mypassword\"}profile_info = {\"first_name\": \"Jane\", \"age\": 28, \"occupation\": \"Engineer\"}account2 = create_user_account(    \"jane_smith\",     **login_info,     **profile_info)print(account2)ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•def temperature_converter():    \"\"\"æ¸©åº¦è½¬æ¢å™¨\"\"\"    def celsius_to_fahrenheit(celsius):        \"\"\"æ‘„æ°åº¦è½¬åæ°åº¦\"\"\"        return (celsius * 9/5) + 32        def fahrenheit_to_celsius(fahrenheit):        \"\"\"åæ°åº¦è½¬æ‘„æ°åº¦\"\"\"        return (fahrenheit - 32) * 5/9        def celsius_to_kelvin(celsius):        \"\"\"æ‘„æ°åº¦è½¬å¼€å°”æ–‡\"\"\"        return celsius + 273.15        while True:        print(\"\\næ¸©åº¦è½¬æ¢å™¨\")        print(\"1. æ‘„æ°åº¦ â†’ åæ°åº¦\")        print(\"2. åæ°åº¦ â†’ æ‘„æ°åº¦\")        print(\"3. æ‘„æ°åº¦ â†’ å¼€å°”æ–‡\")        print(\"4. é€€å‡º\")                choice = input(\"è¯·é€‰æ‹©è½¬æ¢ç±»å‹ï¼ˆ1-4ï¼‰ï¼š\")                if choice == '4':            print(\"è°¢è°¢ä½¿ç”¨ï¼\")            break                try:            if choice == '1':                celsius = float(input(\"è¯·è¾“å…¥æ‘„æ°åº¦ï¼š\"))                fahrenheit = celsius_to_fahrenheit(celsius)                print(f\"{celsius}Â°C = {fahrenheit:.2f}Â°F\")                        elif choice == '2':                fahrenheit = float(input(\"è¯·è¾“å…¥åæ°åº¦ï¼š\"))                celsius = fahrenheit_to_celsius(fahrenheit)                print(f\"{fahrenheit}Â°F = {celsius:.2f}Â°C\")                        elif choice == '3':                celsius = float(input(\"è¯·è¾“å…¥æ‘„æ°åº¦ï¼š\"))                kelvin = celsius_to_kelvin(celsius)                print(f\"{celsius}Â°C = {kelvin:.2f}K\")                        else:                print(\"æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡æ–°è¾“å…¥\")                except ValueError:            print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—\")# ä½¿ç”¨ç¤ºä¾‹# temperature_converter()é«˜çº§ç”¨æ³•class Calculator:    \"\"\"è®¡ç®—å™¨ç±»ï¼Œæ¼”ç¤ºå‡½æ•°çš„é«˜çº§ç”¨æ³•\"\"\"        def __init__(self):        self.history = []        def add_to_history(self, operation, result):        \"\"\"æ·»åŠ è®¡ç®—å†å²\"\"\"        self.history.append({            \"operation\": operation,            \"result\": result,            \"timestamp\": self._get_timestamp()        })        def _get_timestamp(self):        \"\"\"è·å–æ—¶é—´æˆ³ï¼ˆç§æœ‰æ–¹æ³•ï¼‰\"\"\"        import datetime        return datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\")        def calculate(self, operation_func, *args, **kwargs):        \"\"\"é€šç”¨è®¡ç®—æ–¹æ³•\"\"\"        try:            result = operation_func(*args, **kwargs)            operation_name = operation_func.__name__            self.add_to_history(f\"{operation_name}{args}\", result)            return result        except Exception as e:            print(f\"è®¡ç®—é”™è¯¯ï¼š{e}\")            return None        def basic_operations(self, a, b, operation=\"add\"):        \"\"\"åŸºæœ¬è¿ç®—\"\"\"        operations = {            \"add\": lambda x, y: x + y,            \"subtract\": lambda x, y: x - y,            \"multiply\": lambda x, y: x * y,            \"divide\": lambda x, y: x / y if y != 0 else \"é™¤æ•°ä¸èƒ½ä¸ºé›¶\"        }                if operation in operations:            return operations[operation](a, b)        else:            return \"ä¸æ”¯æŒçš„è¿ç®—ç±»å‹\"        def advanced_operations(self, numbers, operation=\"sum\"):        \"\"\"é«˜çº§è¿ç®—\"\"\"        if not numbers:            return 0                if operation == \"sum\":            return sum(numbers)        elif operation == \"average\":            return sum(numbers) / len(numbers)        elif operation == \"max\":            return max(numbers)        elif operation == \"min\":            return min(numbers)        elif operation == \"product\":            result = 1            for num in numbers:                result *= num            return result        else:            return \"ä¸æ”¯æŒçš„è¿ç®—ç±»å‹\"        def get_history(self, limit=None):        \"\"\"è·å–è®¡ç®—å†å²\"\"\"        if limit:            return self.history[-limit:]        return self.history        def clear_history(self):        \"\"\"æ¸…ç©ºå†å²è®°å½•\"\"\"        self.history.clear()        print(\"å†å²è®°å½•å·²æ¸…ç©º\")# ä½¿ç”¨ç¤ºä¾‹calc = Calculator()# åŸºæœ¬è¿ç®—result1 = calc.basic_operations(10, 5, \"add\")print(f\"10 + 5 = {result1}\")result2 = calc.basic_operations(10, 3, \"divide\")print(f\"10 Ã· 3 = {result2:.2f}\")# é«˜çº§è¿ç®—numbers = [1, 2, 3, 4, 5]result3 = calc.advanced_operations(numbers, \"average\")print(f\"å¹³å‡å€¼ï¼š{result3}\")result4 = calc.advanced_operations(numbers, \"product\")print(f\"ä¹˜ç§¯ï¼š{result4}\")# æŸ¥çœ‹å†å²è®°å½•print(\"\\nè®¡ç®—å†å²ï¼š\")for record in calc.get_history():    print(f\"{record['timestamp']}: {record['operation']} = {record['result']}\")å®é™…æ¡ˆä¾‹def data_processor():    \"\"\"æ•°æ®å¤„ç†å™¨ï¼Œæ¼”ç¤ºå‡½æ•°çš„å®é™…åº”ç”¨\"\"\"        def validate_data(data, required_fields=None, data_types=None):        \"\"\"æ•°æ®éªŒè¯\"\"\"        if not isinstance(data, dict):            return False, \"æ•°æ®å¿…é¡»æ˜¯å­—å…¸æ ¼å¼\"                # æ£€æŸ¥å¿…éœ€å­—æ®µ        if required_fields:            missing_fields = [field for field in required_fields if field not in data]            if missing_fields:                return False, f\"ç¼ºå°‘å¿…éœ€å­—æ®µï¼š{missing_fields}\"                # æ£€æŸ¥æ•°æ®ç±»å‹        if data_types:            for field, expected_type in data_types.items():                if field in data and not isinstance(data[field], expected_type):                    return False, f\"å­—æ®µ '{field}' ç±»å‹é”™è¯¯ï¼ŒæœŸæœ› {expected_type.__name__}\"                return True, \"æ•°æ®éªŒè¯é€šè¿‡\"        def clean_data(data, **cleaning_options):        \"\"\"æ•°æ®æ¸…æ´—\"\"\"        cleaned_data = data.copy()                # ç§»é™¤ç©ºå€¼        if cleaning_options.get(\"remove_empty\", False):            cleaned_data = {k: v for k, v in cleaned_data.items()                           if v is not None and v != \"\"}                # è½¬æ¢å­—ç¬¦ä¸²ä¸ºå°å†™        if cleaning_options.get(\"lowercase_strings\", False):            for key, value in cleaned_data.items():                if isinstance(value, str):                    cleaned_data[key] = value.lower()                # ç§»é™¤å‰åç©ºæ ¼        if cleaning_options.get(\"strip_strings\", True):            for key, value in cleaned_data.items():                if isinstance(value, str):                    cleaned_data[key] = value.strip()                return cleaned_data        def transform_data(data, transformations):        \"\"\"æ•°æ®è½¬æ¢\"\"\"        transformed_data = data.copy()                for field, transform_func in transformations.items():            if field in transformed_data:                try:                    transformed_data[field] = transform_func(transformed_data[field])                except Exception as e:                    print(f\"è½¬æ¢å­—æ®µ '{field}' æ—¶å‡ºé”™ï¼š{e}\")                return transformed_data        def process_batch(data_list, *processing_steps, **options):        \"\"\"æ‰¹é‡å¤„ç†æ•°æ®\"\"\"        results = []        errors = []                for i, data in enumerate(data_list):            try:                processed_data = data                                # åº”ç”¨æ‰€æœ‰å¤„ç†æ­¥éª¤                for step_func in processing_steps:                    if callable(step_func):                        processed_data = step_func(processed_data, **options)                                results.append(processed_data)                            except Exception as e:                error_info = {                    \"index\": i,                    \"data\": data,                    \"error\": str(e)                }                errors.append(error_info)                                if not options.get(\"continue_on_error\", True):                    break                return {            \"results\": results,            \"errors\": errors,            \"success_count\": len(results),            \"error_count\": len(errors)        }        # ç¤ºä¾‹æ•°æ®    sample_data = [        {\"name\": \"  å¼ ä¸‰  \", \"age\": \"25\", \"email\": \"ZHANG@EXAMPLE.COM\", \"city\": \"åŒ—äº¬\"},        {\"name\": \"æå››\", \"age\": \"30\", \"email\": \"li@example.com\", \"city\": \"\"},        {\"name\": \"\", \"age\": \"invalid\", \"email\": \"wang@example.com\", \"city\": \"ä¸Šæµ·\"},        {\"name\": \"ç‹äº”\", \"age\": \"28\", \"email\": \"wang@example.com\", \"city\": \"å¹¿å·\"}    ]        # å®šä¹‰è½¬æ¢å‡½æ•°    def age_to_int(age_str):        \"\"\"å°†å¹´é¾„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°\"\"\"        return int(age_str) if age_str.isdigit() else None        # å¤„ç†æ­¥éª¤    def step1_clean(data, **options):        return clean_data(data, strip_strings=True, remove_empty=True)        def step2_transform(data, **options):        transformations = {            \"age\": age_to_int,            \"email\": str.lower        }        return transform_data(data, transformations)        def step3_validate(data, **options):        required_fields = [\"name\", \"age\", \"email\"]        data_types = {\"name\": str, \"age\": int, \"email\": str}                is_valid, message = validate_data(data, required_fields, data_types)        if not is_valid:            raise ValueError(message)                return data        # æ‰¹é‡å¤„ç†    print(\"å¼€å§‹æ‰¹é‡å¤„ç†æ•°æ®...\")    result = process_batch(        sample_data,        step1_clean,        step2_transform,        step3_validate,        continue_on_error=True    )        print(f\"\\nå¤„ç†å®Œæˆï¼š\")    print(f\"æˆåŠŸå¤„ç†ï¼š{result['success_count']} æ¡\")    print(f\"å¤„ç†å¤±è´¥ï¼š{result['error_count']} æ¡\")        print(\"\\næˆåŠŸå¤„ç†çš„æ•°æ®ï¼š\")    for i, data in enumerate(result['results'], 1):        print(f\"{i}. {data}\")        if result['errors']:        print(\"\\nå¤„ç†å¤±è´¥çš„æ•°æ®ï¼š\")        for error in result['errors']:            print(f\"ç´¢å¼• {error['index']}: {error['error']}\")        return result# ä½¿ç”¨ç¤ºä¾‹# data_processor()âš ï¸ æ³¨æ„äº‹é¡¹  å‚æ•°é¡ºåº: æ™®é€šå‚æ•° â†’ é»˜è®¤å‚æ•° â†’ *args â†’ keyword-onlyå‚æ•° â†’ **kwargs  å¯å˜é»˜è®¤å‚æ•°: é¿å…ä½¿ç”¨å¯å˜å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å­—å…¸ï¼‰ä½œä¸ºé»˜è®¤å‚æ•°  å‡½æ•°å‘½å: ä½¿ç”¨æè¿°æ€§çš„å‡½æ•°åï¼Œéµå¾ªPythonå‘½åè§„èŒƒ  æ–‡æ¡£å­—ç¬¦ä¸²: ä¸ºå‡½æ•°æ·»åŠ æ¸…æ™°çš„æ–‡æ¡£è¯´æ˜  å‚æ•°éªŒè¯: åœ¨å‡½æ•°å†…éƒ¨éªŒè¯å‚æ•°çš„æœ‰æ•ˆæ€§  å¼‚å¸¸å¤„ç†: é€‚å½“å¤„ç†å¯èƒ½å‡ºç°çš„å¼‚å¸¸æƒ…å†µğŸ”— ç›¸å…³å†…å®¹  å˜é‡å’Œæ•°æ®ç±»å‹ - äº†è§£å‡½æ•°å‚æ•°çš„æ•°æ®ç±»å‹  æ§åˆ¶æµç¨‹ - å­¦ä¹ å‡½æ•°å†…çš„é€»è¾‘æ§åˆ¶  å‡½æ•°ä½œç”¨åŸŸ - æ·±å…¥ç†è§£å˜é‡ä½œç”¨åŸŸ  é¢å‘å¯¹è±¡ç¼–ç¨‹ - å­¦ä¹ ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - å‡½æ•°å®šä¹‰  PEP 3102 - Keyword-Only Arguments  Pythonå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ğŸ·ï¸ æ ‡ç­¾å‡½æ•° å‡½æ•°å®šä¹‰ å‚æ•° è¿”å›å€¼ å‡½æ•°è°ƒç”¨ å¯å˜å‚æ•° é»˜è®¤å‚æ•° å‚æ•°è§£æ„æœ€åæ›´æ–°: 2024-01-01ä½œè€…: Pythonæ–‡æ¡£å›¢é˜Ÿç‰ˆæœ¬: 1.0",
        "url": "/docs/basics/functions/",
        "category": "basics",
        "tags": ["å‡½æ•°","å‡½æ•°å®šä¹‰","å‚æ•°","è¿”å›å€¼","å‡½æ•°è°ƒç”¨"]
      }
      
    
  
    
      ,
      {
        "title": "globals() - å…¨å±€å‘½åç©ºé—´å‡½æ•°",
        "content": "globals() - å…¨å±€å‘½åç©ºé—´å‡½æ•°ğŸ“ æ¦‚è¿°globals() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºè¿”å›å½“å‰å…¨å±€å‘½åç©ºé—´çš„å­—å…¸ã€‚è¿™ä¸ªå­—å…¸åŒ…å«äº†å½“å‰æ¨¡å—ä¸­æ‰€æœ‰å…¨å±€å˜é‡ã€å‡½æ•°ã€ç±»å’Œå¯¼å…¥çš„æ¨¡å—ã€‚é€šè¿‡ globals() å¯ä»¥åŠ¨æ€è®¿é—®ã€ä¿®æ”¹å’Œç®¡ç†å…¨å±€å˜é‡ï¼Œè¿™åœ¨å…ƒç¼–ç¨‹ã€è°ƒè¯•å’ŒåŠ¨æ€ä»£ç æ‰§è¡Œä¸­éå¸¸æœ‰ç”¨ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡globals()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œç‰¹æ€§  ç†è§£å…¨å±€å‘½åç©ºé—´çš„æ¦‚å¿µå’Œä½œç”¨  å­¦ä¼šåŠ¨æ€è®¿é—®å’Œä¿®æ”¹å…¨å±€å˜é‡  æŒæ¡globals()åœ¨è°ƒè¯•å’Œå…ƒç¼–ç¨‹ä¸­çš„åº”ç”¨  äº†è§£å‘½åç©ºé—´ç®¡ç†çš„æœ€ä½³å®è·µğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  å˜é‡ä½œç”¨åŸŸçš„æ¦‚å¿µ  å­—å…¸æ“ä½œåŸºç¡€  å‡½æ•°å®šä¹‰å’Œè°ƒç”¨  æ¨¡å—å’Œå¯¼å…¥æœºåˆ¶ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µå…¨å±€å‘½åç©ºé—´æ˜¯Pythonä¸­å­˜å‚¨å…¨å±€å˜é‡çš„å­—å…¸ï¼ŒåŒ…æ‹¬ï¼š  æ¨¡å—çº§åˆ«å®šä¹‰çš„å˜é‡  å‡½æ•°å®šä¹‰  ç±»å®šä¹‰  å¯¼å…¥çš„æ¨¡å—å’Œå¯¹è±¡  å†…ç½®å˜é‡ï¼ˆå¦‚ __name__ã€__file__ ç­‰ï¼‰globals() è¿”å›çš„æ˜¯å®é™…çš„å…¨å±€å‘½åç©ºé—´å­—å…¸ï¼Œå¯¹å…¶ä¿®æ”¹ä¼šç›´æ¥å½±å“å…¨å±€å˜é‡ã€‚è¯­æ³•æ ¼å¼globals()å‚æ•°è¯´æ˜globals() å‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°ã€‚è¿”å›å€¼  ç±»å‹: å­—å…¸ï¼ˆdictï¼‰  å†…å®¹: å½“å‰å…¨å±€å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰åç§°å’Œå¯¹åº”çš„å¯¹è±¡ğŸ’¡ ä»£ç ç¤ºä¾‹åŸºæœ¬ç”¨æ³•# åŸºæœ¬ç”¨æ³•ç¤ºä¾‹print(\"globals()åŸºæœ¬ç”¨æ³•:\")# å®šä¹‰ä¸€äº›å…¨å±€å˜é‡global_var1 = \"Hello\"global_var2 = 42global_list = [1, 2, 3]def global_function():    \"\"\"å…¨å±€å‡½æ•°\"\"\"    return \"I'm a global function\"class GlobalClass:    \"\"\"å…¨å±€ç±»\"\"\"    def __init__(self):        self.value = \"I'm a global class\"# è·å–å…¨å±€å‘½åç©ºé—´global_namespace = globals()print(f\"å…¨å±€å‘½åç©ºé—´ç±»å‹: {type(global_namespace)}\")print(f\"å…¨å±€å˜é‡æ•°é‡: {len(global_namespace)}\")# æŸ¥çœ‹ä¸€äº›ç‰¹æ®Šçš„å…¨å±€å˜é‡special_vars = ['__name__', '__file__', '__doc__']print(f\"\\nç‰¹æ®Šå…¨å±€å˜é‡:\")for var in special_vars:    if var in global_namespace:        print(f\"  {var}: {global_namespace[var]}\")# æŸ¥çœ‹æˆ‘ä»¬å®šä¹‰çš„å…¨å±€å˜é‡our_vars = ['global_var1', 'global_var2', 'global_list', 'global_function', 'GlobalClass']print(f\"\\næˆ‘ä»¬å®šä¹‰çš„å…¨å±€å˜é‡:\")for var in our_vars:    if var in global_namespace:        value = global_namespace[var]        print(f\"  {var}: {value} (ç±»å‹: {type(value).__name__})\")# åŠ¨æ€è®¿é—®å…¨å±€å˜é‡print(f\"\\nåŠ¨æ€è®¿é—®å…¨å±€å˜é‡:\")var_name = 'global_var1'if var_name in global_namespace:    print(f\"  {var_name} = {global_namespace[var_name]}\")# æ£€æŸ¥å˜é‡æ˜¯å¦å­˜åœ¨print(f\"\\nå˜é‡å­˜åœ¨æ€§æ£€æŸ¥:\")vars_to_check = ['global_var1', 'nonexistent_var', 'global_function']for var in vars_to_check:    exists = var in global_namespace    print(f\"  {var}: {'å­˜åœ¨' if exists else 'ä¸å­˜åœ¨'}\")# åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡ï¼ˆæ’é™¤å†…ç½®å˜é‡ï¼‰print(f\"\\nç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡:\")user_defined = {k: v for k, v in global_namespace.items()                 if not k.startswith('__') and not k.startswith('_')}for name, value in list(user_defined.items())[:10]:  # åªæ˜¾ç¤ºå‰10ä¸ª    print(f\"  {name}: {type(value).__name__}\")åŠ¨æ€å˜é‡æ“ä½œ# åŠ¨æ€å˜é‡æ“ä½œç¤ºä¾‹print(\"\\nåŠ¨æ€å˜é‡æ“ä½œç¤ºä¾‹:\")# åŠ¨æ€åˆ›å»ºå…¨å±€å˜é‡print(\"1. åŠ¨æ€åˆ›å»ºå…¨å±€å˜é‡:\")variable_names = ['dynamic_var1', 'dynamic_var2', 'dynamic_var3']variable_values = ['Hello World', 123, [1, 2, 3, 4, 5]]for name, value in zip(variable_names, variable_values):    globals()[name] = value    print(f\"  åˆ›å»ºå˜é‡ {name} = {value}\")# éªŒè¯å˜é‡å·²åˆ›å»ºprint(f\"\\néªŒè¯åŠ¨æ€åˆ›å»ºçš„å˜é‡:\")for name in variable_names:    if name in globals():        print(f\"  {name} = {globals()[name]}\")# åŠ¨æ€ä¿®æ”¹å…¨å±€å˜é‡print(f\"\\n2. åŠ¨æ€ä¿®æ”¹å…¨å±€å˜é‡:\")original_value = global_var1globals()['global_var1'] = \"Modified Value\"print(f\"  global_var1: {original_value} -&gt; {global_var1}\")# åŠ¨æ€åˆ é™¤å…¨å±€å˜é‡print(f\"\\n3. åŠ¨æ€åˆ é™¤å…¨å±€å˜é‡:\")if 'dynamic_var1' in globals():    del globals()['dynamic_var1']    print(f\"  å·²åˆ é™¤ dynamic_var1\")    print(f\"  dynamic_var1 å­˜åœ¨: {'dynamic_var1' in globals()}\")# æ‰¹é‡æ“ä½œå…¨å±€å˜é‡print(f\"\\n4. æ‰¹é‡æ“ä½œå…¨å±€å˜é‡:\")# æ‰¹é‡åˆ›å»ºå˜é‡batch_vars = {f'batch_var_{i}': i * 10 for i in range(1, 6)}for name, value in batch_vars.items():    globals()[name] = valueprint(f\"  æ‰¹é‡åˆ›å»ºäº† {len(batch_vars)} ä¸ªå˜é‡\")# æ‰¹é‡æŸ¥è¯¢å˜é‡batch_names = [f'batch_var_{i}' for i in range(1, 6)]batch_values = [globals().get(name, 'Not Found') for name in batch_names]print(f\"  æ‰¹é‡æŸ¥è¯¢ç»“æœ: {dict(zip(batch_names, batch_values))}\")# æ‰¹é‡åˆ é™¤å˜é‡for name in batch_names:    if name in globals():        del globals()[name]print(f\"  å·²æ‰¹é‡åˆ é™¤å˜é‡\")# æ¡ä»¶æ€§å˜é‡æ“ä½œprint(f\"\\n5. æ¡ä»¶æ€§å˜é‡æ“ä½œ:\")def set_global_if_not_exists(name, value):    \"\"\"å¦‚æœå…¨å±€å˜é‡ä¸å­˜åœ¨åˆ™è®¾ç½®\"\"\"    if name not in globals():        globals()[name] = value        return True    return Falsedef update_global_if_exists(name, value):    \"\"\"å¦‚æœå…¨å±€å˜é‡å­˜åœ¨åˆ™æ›´æ–°\"\"\"    if name in globals():        old_value = globals()[name]        globals()[name] = value        return old_value    return None# æµ‹è¯•æ¡ä»¶æ€§æ“ä½œtest_vars = [    ('conditional_var1', 'First Value'),    ('global_var2', 999),  # è¿™ä¸ªå˜é‡å·²å­˜åœ¨    ('conditional_var2', 'Second Value')]for name, value in test_vars:    created = set_global_if_not_exists(name, value)    if created:        print(f\"  åˆ›å»ºæ–°å˜é‡: {name} = {value}\")    else:        old_value = update_global_if_exists(name, value)        print(f\"  æ›´æ–°ç°æœ‰å˜é‡: {name} = {old_value} -&gt; {value}\")å‡½æ•°ä¸­çš„globals()ä½¿ç”¨# å‡½æ•°ä¸­çš„globals()ä½¿ç”¨ç¤ºä¾‹print(\"\\nå‡½æ•°ä¸­çš„globals()ä½¿ç”¨ç¤ºä¾‹:\")# å…¨å±€å˜é‡function_global_var = \"Original Global Value\"counter = 0def demonstrate_globals_in_function():    \"\"\"æ¼”ç¤ºåœ¨å‡½æ•°ä¸­ä½¿ç”¨globals()\"\"\"    print(f\"\\nåœ¨å‡½æ•°ä¸­ä½¿ç”¨globals():\")        # è®¿é—®å…¨å±€å˜é‡    print(f\"  è®¿é—®å…¨å±€å˜é‡: function_global_var = {globals()['function_global_var']}\")        # ä¿®æ”¹å…¨å±€å˜é‡    globals()['function_global_var'] = \"Modified in Function\"    print(f\"  ä¿®æ”¹å: function_global_var = {globals()['function_global_var']}\")        # åˆ›å»ºæ–°çš„å…¨å±€å˜é‡    globals()['new_global_from_function'] = \"Created in Function\"    print(f\"  åˆ›å»ºæ–°å…¨å±€å˜é‡: new_global_from_function\")        # è®¿é—®å’Œä¿®æ”¹è®¡æ•°å™¨    globals()['counter'] += 1    print(f\"  è®¡æ•°å™¨é€’å¢: counter = {globals()['counter']}\")        # æ£€æŸ¥å‡½æ•°æœ¬èº«æ˜¯å¦åœ¨å…¨å±€å‘½åç©ºé—´ä¸­    func_name = 'demonstrate_globals_in_function'    if func_name in globals():        print(f\"  å‡½æ•° {func_name} åœ¨å…¨å±€å‘½åç©ºé—´ä¸­\")def global_variable_manager():    \"\"\"å…¨å±€å˜é‡ç®¡ç†å™¨\"\"\"    print(f\"\\nå…¨å±€å˜é‡ç®¡ç†å™¨:\")        # è·å–æ‰€æœ‰ç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡    user_globals = {k: v for k, v in globals().items()                    if not k.startswith('_') and not callable(v) and k != 'user_globals'}        print(f\"  ç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡ ({len(user_globals)} ä¸ª):\")    for name, value in user_globals.items():        print(f\"    {name}: {value} ({type(value).__name__})\")        return user_globalsdef safe_global_access(var_name, default=None):    \"\"\"å®‰å…¨è®¿é—®å…¨å±€å˜é‡\"\"\"    return globals().get(var_name, default)def safe_global_update(var_name, new_value):    \"\"\"å®‰å…¨æ›´æ–°å…¨å±€å˜é‡\"\"\"    if var_name in globals():        old_value = globals()[var_name]        globals()[var_name] = new_value        return old_value    else:        globals()[var_name] = new_value        return None# æµ‹è¯•å‡½æ•°print(f\"è°ƒç”¨å‰: function_global_var = {function_global_var}\")demonstrate_globals_in_function()print(f\"è°ƒç”¨å: function_global_var = {function_global_var}\")print(f\"æ–°åˆ›å»ºçš„å…¨å±€å˜é‡: new_global_from_function = {globals().get('new_global_from_function', 'Not Found')}\")# æµ‹è¯•å…¨å±€å˜é‡ç®¡ç†å™¨managed_vars = global_variable_manager()# æµ‹è¯•å®‰å…¨è®¿é—®å‡½æ•°print(f\"\\nå®‰å…¨è®¿é—®æµ‹è¯•:\")test_vars = ['counter', 'nonexistent_var', 'function_global_var']for var in test_vars:    value = safe_global_access(var, 'DEFAULT')    print(f\"  {var}: {value}\")# æµ‹è¯•å®‰å…¨æ›´æ–°å‡½æ•°print(f\"\\nå®‰å…¨æ›´æ–°æµ‹è¯•:\")old_value = safe_global_update('counter', 100)print(f\"  counter: {old_value} -&gt; {counter}\")old_value = safe_global_update('new_safe_var', 'Safe Value')print(f\"  new_safe_var: {old_value} -&gt; {globals().get('new_safe_var')}\")å‘½åç©ºé—´æ¯”è¾ƒå’Œåˆ†æimport sysimport typesfrom typing import Dict, Any, List, Tuple# å‘½åç©ºé—´åˆ†æå·¥å…·class NamespaceAnalyzer:    \"\"\"å‘½åç©ºé—´åˆ†æå·¥å…·\"\"\"        def __init__(self):        self.initial_globals = set(globals().keys())        def analyze_globals(self) -&gt; Dict[str, Any]:        \"\"\"åˆ†æå…¨å±€å‘½åç©ºé—´\"\"\"        current_globals = globals()                analysis = {            'total_count': len(current_globals),            'categories': self._categorize_globals(current_globals),            'new_variables': self._find_new_variables(current_globals),            'memory_usage': self._estimate_memory_usage(current_globals),            'type_distribution': self._analyze_types(current_globals)        }                return analysis        def _categorize_globals(self, global_dict: Dict[str, Any]) -&gt; Dict[str, List[str]]:        \"\"\"åˆ†ç±»å…¨å±€å˜é‡\"\"\"        categories = {            'builtin_vars': [],            'modules': [],            'functions': [],            'classes': [],            'variables': [],            'special_vars': []        }                for name, value in global_dict.items():            if name.startswith('__') and name.endswith('__'):                categories['special_vars'].append(name)            elif isinstance(value, types.ModuleType):                categories['modules'].append(name)            elif callable(value) and hasattr(value, '__name__'):                if isinstance(value, type):                    categories['classes'].append(name)                else:                    categories['functions'].append(name)            elif name in dir(__builtins__):                categories['builtin_vars'].append(name)            else:                categories['variables'].append(name)                return categories        def _find_new_variables(self, current_globals: Dict[str, Any]) -&gt; List[str]:        \"\"\"æŸ¥æ‰¾æ–°å¢çš„å˜é‡\"\"\"        current_keys = set(current_globals.keys())        return list(current_keys - self.initial_globals)        def _estimate_memory_usage(self, global_dict: Dict[str, Any]) -&gt; Dict[str, Any]:        \"\"\"ä¼°ç®—å†…å­˜ä½¿ç”¨\"\"\"        total_size = 0        large_objects = []                for name, value in global_dict.items():            try:                size = sys.getsizeof(value)                total_size += size                                if size &gt; 1000:  # å¤§äº1KBçš„å¯¹è±¡                    large_objects.append((name, size))            except (TypeError, AttributeError):                # æŸäº›å¯¹è±¡å¯èƒ½æ— æ³•è·å–å¤§å°                pass                return {            'total_size_bytes': total_size,            'total_size_kb': total_size / 1024,            'large_objects': sorted(large_objects, key=lambda x: x[1], reverse=True)        }        def _analyze_types(self, global_dict: Dict[str, Any]) -&gt; Dict[str, int]:        \"\"\"åˆ†æç±»å‹åˆ†å¸ƒ\"\"\"        type_counts = {}                for value in global_dict.values():            type_name = type(value).__name__            type_counts[type_name] = type_counts.get(type_name, 0) + 1                return dict(sorted(type_counts.items(), key=lambda x: x[1], reverse=True))        def compare_namespaces(self, snapshot1: Dict[str, Any], snapshot2: Dict[str, Any]) -&gt; Dict[str, Any]:        \"\"\"æ¯”è¾ƒä¸¤ä¸ªå‘½åç©ºé—´å¿«ç…§\"\"\"        keys1 = set(snapshot1.keys())        keys2 = set(snapshot2.keys())                return {            'added': list(keys2 - keys1),            'removed': list(keys1 - keys2),            'common': list(keys1 &amp; keys2),            'modified': self._find_modified_variables(snapshot1, snapshot2, keys1 &amp; keys2)        }        def _find_modified_variables(self, snap1: Dict[str, Any], snap2: Dict[str, Any],                                 common_keys: set) -&gt; List[Tuple[str, Any, Any]]:        \"\"\"æŸ¥æ‰¾ä¿®æ”¹çš„å˜é‡\"\"\"        modified = []                for key in common_keys:            try:                if snap1[key] != snap2[key]:                    modified.append((key, snap1[key], snap2[key]))            except (TypeError, ValueError):                # æŸäº›å¯¹è±¡å¯èƒ½æ— æ³•æ¯”è¾ƒ                pass                return modified        def print_analysis(self, analysis: Dict[str, Any]):        \"\"\"æ‰“å°åˆ†æç»“æœ\"\"\"        print(f\"å…¨å±€å‘½åç©ºé—´åˆ†ææŠ¥å‘Š:\")        print(f\"=\" * 50)                print(f\"æ€»å˜é‡æ•°: {analysis['total_count']}\")                # åˆ†ç±»ç»Ÿè®¡        print(f\"\\nå˜é‡åˆ†ç±»:\")        categories = analysis['categories']        for category, items in categories.items():            if items:                print(f\"  {category}: {len(items)} ä¸ª\")                if len(items) &lt;= 5:                    print(f\"    {', '.join(items)}\")                else:                    print(f\"    {', '.join(items[:5])}... (è¿˜æœ‰{len(items)-5}ä¸ª)\")                # æ–°å¢å˜é‡        new_vars = analysis['new_variables']        if new_vars:            print(f\"\\næ–°å¢å˜é‡ ({len(new_vars)} ä¸ª):\")            print(f\"  {', '.join(new_vars)}\")                # å†…å­˜ä½¿ç”¨        memory = analysis['memory_usage']        print(f\"\\nå†…å­˜ä½¿ç”¨:\")        print(f\"  æ€»å¤§å°: {memory['total_size_kb']:.2f} KB\")        if memory['large_objects']:            print(f\"  å¤§å¯¹è±¡ (&gt;1KB):\")            for name, size in memory['large_objects'][:5]:                print(f\"    {name}: {size/1024:.2f} KB\")                # ç±»å‹åˆ†å¸ƒ        types_dist = analysis['type_distribution']        print(f\"\\nç±»å‹åˆ†å¸ƒ (å‰10ä¸ª):\")        for type_name, count in list(types_dist.items())[:10]:            print(f\"  {type_name}: {count}\")# æµ‹è¯•å‘½åç©ºé—´åˆ†æprint(\"\\nå‘½åç©ºé—´åˆ†æç¤ºä¾‹:\")analyzer = NamespaceAnalyzer()# åˆ›å»ºä¸€äº›æµ‹è¯•å˜é‡test_string = \"This is a test string\" * 100  # å¤§å­—ç¬¦ä¸²test_list = list(range(1000))  # å¤§åˆ—è¡¨test_dict = {f'key_{i}': f'value_{i}' for i in range(100)}  # å¤§å­—å…¸def test_function():    \"\"\"æµ‹è¯•å‡½æ•°\"\"\"    passclass TestClass:    \"\"\"æµ‹è¯•ç±»\"\"\"    def __init__(self):        self.data = [1, 2, 3]test_instance = TestClass()# åˆ†æå½“å‰å‘½åç©ºé—´analysis = analyzer.analyze_globals()analyzer.print_analysis(analysis)# åˆ›å»ºå‘½åç©ºé—´å¿«ç…§print(f\"\\nåˆ›å»ºå‘½åç©ºé—´å¿«ç…§...\")snapshot1 = dict(globals())# ä¿®æ”¹ä¸€äº›å˜é‡test_string = \"Modified string\"new_variable = \"This is new\"del test_list  # åˆ é™¤ä¸€ä¸ªå˜é‡# åˆ›å»ºç¬¬äºŒä¸ªå¿«ç…§snapshot2 = dict(globals())# æ¯”è¾ƒå¿«ç…§print(f\"\\næ¯”è¾ƒå‘½åç©ºé—´å˜åŒ–:\")comparison = analyzer.compare_namespaces(snapshot1, snapshot2)print(f\"æ–°å¢å˜é‡: {comparison['added']}\")print(f\"åˆ é™¤å˜é‡: {comparison['removed']}\")print(f\"ä¿®æ”¹å˜é‡:\")for name, old_val, new_val in comparison['modified']:    print(f\"  {name}: {str(old_val)[:50]}... -&gt; {str(new_val)[:50]}...\")ğŸš€ é«˜çº§åº”ç”¨åŠ¨æ€æ¨¡å—åŠ è½½å™¨import importlibimport sysfrom typing import Dict, Any, Optional, List# åŠ¨æ€æ¨¡å—åŠ è½½å™¨class DynamicModuleLoader:    \"\"\"åŠ¨æ€æ¨¡å—åŠ è½½å™¨\"\"\"        def __init__(self):        self.loaded_modules: Dict[str, Any] = {}        self.module_aliases: Dict[str, str] = {}        def load_module(self, module_name: str, alias: Optional[str] = None,                    add_to_globals: bool = True) -&gt; Any:        \"\"\"åŠ¨æ€åŠ è½½æ¨¡å—\"\"\"        try:            # åŠ è½½æ¨¡å—            module = importlib.import_module(module_name)                        # ç¡®å®šæ¨¡å—åœ¨å…¨å±€å‘½åç©ºé—´ä¸­çš„åç§°            global_name = alias or module_name.split('.')[-1]                        # æ·»åŠ åˆ°å…¨å±€å‘½åç©ºé—´            if add_to_globals:                globals()[global_name] = module                print(f\"æ¨¡å— {module_name} å·²åŠ è½½ä¸º {global_name}\")                        # è®°å½•åŠ è½½çš„æ¨¡å—            self.loaded_modules[global_name] = module            if alias:                self.module_aliases[alias] = module_name                        return module                    except ImportError as e:            print(f\"åŠ è½½æ¨¡å— {module_name} å¤±è´¥: {e}\")            return None        def load_from_module(self, module_name: str, items: List[str],                         add_to_globals: bool = True) -&gt; Dict[str, Any]:        \"\"\"ä»æ¨¡å—åŠ è½½ç‰¹å®šé¡¹ç›®\"\"\"        try:            module = importlib.import_module(module_name)            loaded_items = {}                        for item_name in items:                if hasattr(module, item_name):                    item = getattr(module, item_name)                    loaded_items[item_name] = item                                        if add_to_globals:                        globals()[item_name] = item                        print(f\"ä» {module_name} åŠ è½½ {item_name}\")                else:                    print(f\"æ¨¡å— {module_name} ä¸­æ²¡æœ‰ {item_name}\")                        return loaded_items                    except ImportError as e:            print(f\"ä»æ¨¡å— {module_name} åŠ è½½é¡¹ç›®å¤±è´¥: {e}\")            return {}        def unload_module(self, module_name: str) -&gt; bool:        \"\"\"å¸è½½æ¨¡å—\"\"\"        if module_name in globals():            del globals()[module_name]                        if module_name in self.loaded_modules:                del self.loaded_modules[module_name]                        # æ£€æŸ¥æ˜¯å¦æ˜¯åˆ«å            if module_name in self.module_aliases:                del self.module_aliases[module_name]                        print(f\"æ¨¡å— {module_name} å·²å¸è½½\")            return True        else:            print(f\"æ¨¡å— {module_name} æœªåœ¨å…¨å±€å‘½åç©ºé—´ä¸­\")            return False        def list_loaded_modules(self) -&gt; Dict[str, str]:        \"\"\"åˆ—å‡ºå·²åŠ è½½çš„æ¨¡å—\"\"\"        result = {}        for name, module in self.loaded_modules.items():            module_file = getattr(module, '__file__', 'Built-in')            result[name] = module_file        return result        def reload_module(self, module_name: str) -&gt; bool:        \"\"\"é‡æ–°åŠ è½½æ¨¡å—\"\"\"        if module_name in self.loaded_modules:            try:                module = self.loaded_modules[module_name]                reloaded_module = importlib.reload(module)                                # æ›´æ–°å…¨å±€å‘½åç©ºé—´                globals()[module_name] = reloaded_module                self.loaded_modules[module_name] = reloaded_module                                print(f\"æ¨¡å— {module_name} å·²é‡æ–°åŠ è½½\")                return True                            except Exception as e:                print(f\"é‡æ–°åŠ è½½æ¨¡å— {module_name} å¤±è´¥: {e}\")                return False        else:            print(f\"æ¨¡å— {module_name} æœªåŠ è½½\")            return False        def get_module_info(self, module_name: str) -&gt; Dict[str, Any]:        \"\"\"è·å–æ¨¡å—ä¿¡æ¯\"\"\"        if module_name in self.loaded_modules:            module = self.loaded_modules[module_name]                        return {                'name': getattr(module, '__name__', 'Unknown'),                'file': getattr(module, '__file__', 'Built-in'),                'doc': getattr(module, '__doc__', 'No documentation'),                'package': getattr(module, '__package__', None),                'version': getattr(module, '__version__', 'Unknown'),                'attributes': [attr for attr in dir(module) if not attr.startswith('_')]            }        else:            return {'error': f'Module {module_name} not loaded'}# æµ‹è¯•åŠ¨æ€æ¨¡å—åŠ è½½å™¨print(\"\\nåŠ¨æ€æ¨¡å—åŠ è½½å™¨ç¤ºä¾‹:\")loader = DynamicModuleLoader()# åŠ è½½æ ‡å‡†åº“æ¨¡å—print(\"1. åŠ è½½æ ‡å‡†åº“æ¨¡å—:\")loader.load_module('json', 'json_module')loader.load_module('datetime', 'dt')loader.load_module('collections')# ä»æ¨¡å—åŠ è½½ç‰¹å®šé¡¹ç›®print(\"\\n2. ä»æ¨¡å—åŠ è½½ç‰¹å®šé¡¹ç›®:\")math_items = loader.load_from_module('math', ['sqrt', 'pi', 'sin', 'cos'])print(f\"åŠ è½½çš„æ•°å­¦å‡½æ•°: {list(math_items.keys())}\")# æµ‹è¯•åŠ è½½çš„æ¨¡å—print(\"\\n3. æµ‹è¯•åŠ è½½çš„æ¨¡å—:\")if 'json_module' in globals():    test_data = {'name': 'Alice', 'age': 30}    json_str = json_module.dumps(test_data)    print(f\"JSONåºåˆ—åŒ–: {json_str}\")if 'dt' in globals():    now = dt.datetime.now()    print(f\"å½“å‰æ—¶é—´: {now}\")if 'sqrt' in globals():    print(f\"sqrt(16) = {sqrt(16)}\")    print(f\"pi = {pi}\")# åˆ—å‡ºå·²åŠ è½½çš„æ¨¡å—print(\"\\n4. å·²åŠ è½½çš„æ¨¡å—:\")loaded = loader.list_loaded_modules()for name, file_path in loaded.items():    print(f\"  {name}: {file_path}\")# è·å–æ¨¡å—ä¿¡æ¯print(\"\\n5. æ¨¡å—ä¿¡æ¯:\")info = loader.get_module_info('json_module')for key, value in info.items():    if key == 'attributes':        print(f\"  {key}: {len(value)} ä¸ªå±æ€§\")    else:        print(f\"  {key}: {value}\")# å¸è½½æ¨¡å—print(\"\\n6. å¸è½½æ¨¡å—:\")loader.unload_module('collections')print(f\"collections åœ¨å…¨å±€å‘½åç©ºé—´: {'collections' in globals()}\")å…¨å±€é…ç½®ç®¡ç†å™¨import jsonimport osfrom typing import Dict, Any, Optional, Unionfrom pathlib import Path# å…¨å±€é…ç½®ç®¡ç†å™¨class GlobalConfigManager:    \"\"\"å…¨å±€é…ç½®ç®¡ç†å™¨\"\"\"        def __init__(self, config_prefix: str = 'CONFIG_'):        self.config_prefix = config_prefix        self.config_file: Optional[str] = None        self.auto_save = False        self.config_history: List[Dict[str, Any]] = []        def load_config_from_file(self, file_path: str, auto_save: bool = False) -&gt; bool:        \"\"\"ä»æ–‡ä»¶åŠ è½½é…ç½®\"\"\"        try:            with open(file_path, 'r', encoding='utf-8') as f:                config_data = json.load(f)                        # å°†é…ç½®åŠ è½½åˆ°å…¨å±€å‘½åç©ºé—´            for key, value in config_data.items():                global_key = f\"{self.config_prefix}{key.upper()}\"                globals()[global_key] = value                print(f\"åŠ è½½é…ç½®: {global_key} = {value}\")                        self.config_file = file_path            self.auto_save = auto_save                        # ä¿å­˜é…ç½®å†å²            self._save_config_snapshot()                        return True                    except Exception as e:            print(f\"åŠ è½½é…ç½®æ–‡ä»¶å¤±è´¥: {e}\")            return False        def save_config_to_file(self, file_path: Optional[str] = None) -&gt; bool:        \"\"\"ä¿å­˜é…ç½®åˆ°æ–‡ä»¶\"\"\"        target_file = file_path or self.config_file        if not target_file:            print(\"æœªæŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„\")            return False                try:            # æ”¶é›†æ‰€æœ‰é…ç½®å˜é‡            config_data = self.get_all_config()                        # ç¡®ä¿ç›®å½•å­˜åœ¨            Path(target_file).parent.mkdir(parents=True, exist_ok=True)                        # ä¿å­˜åˆ°æ–‡ä»¶            with open(target_file, 'w', encoding='utf-8') as f:                json.dump(config_data, f, indent=2, ensure_ascii=False)                        print(f\"é…ç½®å·²ä¿å­˜åˆ°: {target_file}\")            return True                    except Exception as e:            print(f\"ä¿å­˜é…ç½®æ–‡ä»¶å¤±è´¥: {e}\")            return False        def set_config(self, key: str, value: Any, save_immediately: bool = None) -&gt; None:        \"\"\"è®¾ç½®é…ç½®é¡¹\"\"\"        global_key = f\"{self.config_prefix}{key.upper()}\"        old_value = globals().get(global_key)                globals()[global_key] = value        print(f\"è®¾ç½®é…ç½®: {global_key} = {value}\")                # è®°å½•å˜æ›´        if old_value != value:            self._record_config_change(global_key, old_value, value)                # è‡ªåŠ¨ä¿å­˜        if save_immediately or (save_immediately is None and self.auto_save):            self.save_config_to_file()        def get_config(self, key: str, default: Any = None) -&gt; Any:        \"\"\"è·å–é…ç½®é¡¹\"\"\"        global_key = f\"{self.config_prefix}{key.upper()}\"        return globals().get(global_key, default)        def get_all_config(self) -&gt; Dict[str, Any]:        \"\"\"è·å–æ‰€æœ‰é…ç½®é¡¹\"\"\"        config_data = {}                for key, value in globals().items():            if key.startswith(self.config_prefix):                # ç§»é™¤å‰ç¼€å¹¶è½¬æ¢ä¸ºå°å†™                config_key = key[len(self.config_prefix):].lower()                config_data[config_key] = value                return config_data        def remove_config(self, key: str, save_immediately: bool = None) -&gt; bool:        \"\"\"åˆ é™¤é…ç½®é¡¹\"\"\"        global_key = f\"{self.config_prefix}{key.upper()}\"                if global_key in globals():            old_value = globals()[global_key]            del globals()[global_key]            print(f\"åˆ é™¤é…ç½®: {global_key}\")                        # è®°å½•å˜æ›´            self._record_config_change(global_key, old_value, None)                        # è‡ªåŠ¨ä¿å­˜            if save_immediately or (save_immediately is None and self.auto_save):                self.save_config_to_file()                        return True        else:            print(f\"é…ç½®é¡¹ {global_key} ä¸å­˜åœ¨\")            return False        def list_config(self) -&gt; None:        \"\"\"åˆ—å‡ºæ‰€æœ‰é…ç½®é¡¹\"\"\"        config_data = self.get_all_config()                if config_data:            print(f\"å½“å‰é…ç½®é¡¹ ({len(config_data)} ä¸ª):\")            for key, value in config_data.items():                print(f\"  {key}: {value} ({type(value).__name__})\")        else:            print(\"æ²¡æœ‰é…ç½®é¡¹\")        def reset_config(self) -&gt; None:        \"\"\"é‡ç½®æ‰€æœ‰é…ç½®\"\"\"        config_keys = [key for key in globals().keys() if key.startswith(self.config_prefix)]                for key in config_keys:            del globals()[key]                print(f\"å·²é‡ç½® {len(config_keys)} ä¸ªé…ç½®é¡¹\")                # ä¿å­˜é…ç½®å†å²        self._save_config_snapshot()        def _save_config_snapshot(self) -&gt; None:        \"\"\"ä¿å­˜é…ç½®å¿«ç…§\"\"\"        snapshot = {            'timestamp': __import__('datetime').datetime.now().isoformat(),            'config': self.get_all_config().copy()        }        self.config_history.append(snapshot)                # é™åˆ¶å†å²è®°å½•æ•°é‡        if len(self.config_history) &gt; 10:            self.config_history.pop(0)        def _record_config_change(self, key: str, old_value: Any, new_value: Any) -&gt; None:        \"\"\"è®°å½•é…ç½®å˜æ›´\"\"\"        change_record = {            'timestamp': __import__('datetime').datetime.now().isoformat(),            'key': key,            'old_value': old_value,            'new_value': new_value,            'action': 'delete' if new_value is None else 'update' if old_value is not None else 'create'        }                if not hasattr(self, 'change_log'):            self.change_log = []                self.change_log.append(change_record)                # é™åˆ¶å˜æ›´æ—¥å¿—æ•°é‡        if len(self.change_log) &gt; 50:            self.change_log.pop(0)        def get_config_history(self) -&gt; List[Dict[str, Any]]:        \"\"\"è·å–é…ç½®å†å²\"\"\"        return self.config_history.copy()        def get_change_log(self) -&gt; List[Dict[str, Any]]:        \"\"\"è·å–å˜æ›´æ—¥å¿—\"\"\"        return getattr(self, 'change_log', []).copy()        def create_config_template(self, template_path: str) -&gt; bool:        \"\"\"åˆ›å»ºé…ç½®æ¨¡æ¿æ–‡ä»¶\"\"\"        template_config = {            \"database\": {                \"host\": \"localhost\",                \"port\": 5432,                \"name\": \"myapp\",                \"user\": \"username\",                \"password\": \"password\"            },            \"api\": {                \"base_url\": \"https://api.example.com\",                \"timeout\": 30,                \"retries\": 3            },            \"logging\": {                \"level\": \"INFO\",                \"file\": \"app.log\",                \"max_size\": \"10MB\"            },            \"features\": {                \"debug_mode\": False,                \"cache_enabled\": True,                \"max_connections\": 100            }        }                try:            Path(template_path).parent.mkdir(parents=True, exist_ok=True)                        with open(template_path, 'w', encoding='utf-8') as f:                json.dump(template_config, f, indent=2, ensure_ascii=False)                        print(f\"é…ç½®æ¨¡æ¿å·²åˆ›å»º: {template_path}\")            return True                    except Exception as e:            print(f\"åˆ›å»ºé…ç½®æ¨¡æ¿å¤±è´¥: {e}\")            return False# æµ‹è¯•å…¨å±€é…ç½®ç®¡ç†å™¨print(\"\\nå…¨å±€é…ç½®ç®¡ç†å™¨ç¤ºä¾‹:\")config_manager = GlobalConfigManager()# åˆ›å»ºé…ç½®æ¨¡æ¿print(\"1. åˆ›å»ºé…ç½®æ¨¡æ¿:\")template_file = \"config_template.json\"config_manager.create_config_template(template_file)# æ‰‹åŠ¨è®¾ç½®ä¸€äº›é…ç½®print(\"\\n2. æ‰‹åŠ¨è®¾ç½®é…ç½®:\")config_manager.set_config('app_name', 'MyApplication')config_manager.set_config('version', '1.0.0')config_manager.set_config('debug', True)config_manager.set_config('max_users', 1000)# åˆ—å‡ºå½“å‰é…ç½®print(\"\\n3. å½“å‰é…ç½®:\")config_manager.list_config()# ä¿å­˜é…ç½®åˆ°æ–‡ä»¶print(\"\\n4. ä¿å­˜é…ç½®:\")config_file = \"app_config.json\"config_manager.save_config_to_file(config_file)# ä¿®æ”¹é…ç½®print(\"\\n5. ä¿®æ”¹é…ç½®:\")config_manager.set_config('debug', False)config_manager.set_config('max_users', 2000)config_manager.set_config('new_feature', 'enabled')# è·å–ç‰¹å®šé…ç½®print(\"\\n6. è·å–é…ç½®:\")app_name = config_manager.get_config('app_name')debug_mode = config_manager.get_config('debug')nonexistent = config_manager.get_config('nonexistent', 'default_value')print(f\"åº”ç”¨åç§°: {app_name}\")print(f\"è°ƒè¯•æ¨¡å¼: {debug_mode}\")print(f\"ä¸å­˜åœ¨çš„é…ç½®: {nonexistent}\")# æŸ¥çœ‹å˜æ›´æ—¥å¿—print(\"\\n7. é…ç½®å˜æ›´æ—¥å¿—:\")change_log = config_manager.get_change_log()for change in change_log[-5:]:  # æ˜¾ç¤ºæœ€è¿‘5ä¸ªå˜æ›´    print(f\"  {change['timestamp']}: {change['action']} {change['key']}\")    if change['action'] != 'create':        print(f\"    {change['old_value']} -&gt; {change['new_value']}\")# åˆ é™¤é…ç½®print(\"\\n8. åˆ é™¤é…ç½®:\")config_manager.remove_config('new_feature')# æœ€ç»ˆé…ç½®çŠ¶æ€print(\"\\n9. æœ€ç»ˆé…ç½®çŠ¶æ€:\")config_manager.list_config()# éªŒè¯å…¨å±€å˜é‡print(\"\\n10. éªŒè¯å…¨å±€å˜é‡:\")config_vars = [key for key in globals().keys() if key.startswith('CONFIG_')]print(f\"å…¨å±€é…ç½®å˜é‡: {config_vars}\")# æ¸…ç†æµ‹è¯•æ–‡ä»¶try:    os.remove(template_file)    os.remove(config_file)    print(f\"\\nå·²æ¸…ç†æµ‹è¯•æ–‡ä»¶\")except:    passâš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µå®‰å…¨ä½¿ç”¨globals()# å®‰å…¨ä½¿ç”¨globals()çš„æœ€ä½³å®è·µprint(\"\\nå®‰å…¨ä½¿ç”¨globals()çš„æœ€ä½³å®è·µ:\")# 1. é¿å…æ„å¤–è¦†ç›–é‡è¦å˜é‡print(\"1. é¿å…æ„å¤–è¦†ç›–:\")# å±é™©çš„åšæ³•def dangerous_global_modification():    \"\"\"å±é™©çš„å…¨å±€å˜é‡ä¿®æ”¹\"\"\"    # å¯èƒ½æ„å¤–è¦†ç›–é‡è¦çš„å†…ç½®å‡½æ•°    globals()['len'] = lambda x: 0  # å±é™©ï¼è¦†ç›–äº†å†…ç½®å‡½æ•°    globals()['print'] = lambda *args: None  # å±é™©ï¼è¦†ç›–äº†printå‡½æ•°# å®‰å…¨çš„åšæ³•def safe_global_modification():    \"\"\"å®‰å…¨çš„å…¨å±€å˜é‡ä¿®æ”¹\"\"\"    # æ£€æŸ¥æ˜¯å¦ä¼šè¦†ç›–é‡è¦å˜é‡    important_names = {'len', 'print', 'input', 'open', 'range', 'list', 'dict', 'str', 'int'}        def safe_set_global(name, value):        if name in important_names:            print(f\"è­¦å‘Š: å°è¯•è¦†ç›–é‡è¦å˜é‡ {name}\")            return False                if name in dir(__builtins__):            print(f\"è­¦å‘Š: å°è¯•è¦†ç›–å†…ç½®å˜é‡ {name}\")            return False                globals()[name] = value        return True        # å®‰å…¨è®¾ç½®å˜é‡    safe_set_global('my_custom_var', 'safe value')    safe_set_global('len', 'dangerous value')  # ä¼šè¢«é˜»æ­¢print(\"  æµ‹è¯•å±é™©æ“ä½œï¼ˆå·²æ³¨é‡Šï¼‰:\")# dangerous_global_modification()  # ä¸è¦è¿è¡Œè¿™ä¸ªï¼print(\"  æµ‹è¯•å®‰å…¨æ“ä½œ:\")safe_global_modification()# 2. å‘½åç©ºé—´æ±¡æŸ“é˜²æŠ¤print(\"\\n2. å‘½åç©ºé—´æ±¡æŸ“é˜²æŠ¤:\")class NamespaceProtector:    \"\"\"å‘½åç©ºé—´ä¿æŠ¤å™¨\"\"\"        def __init__(self):        self.protected_names = set(dir(__builtins__))        self.protected_names.update(['globals', 'locals', 'vars', 'dir'])        self.original_globals = set(globals().keys())        def is_safe_name(self, name: str) -&gt; bool:        \"\"\"æ£€æŸ¥åç§°æ˜¯å¦å®‰å…¨\"\"\"        if name in self.protected_names:            return False                if name.startswith('__') and name.endswith('__'):            return False                return True        def safe_set_global(self, name: str, value: Any) -&gt; bool:        \"\"\"å®‰å…¨è®¾ç½®å…¨å±€å˜é‡\"\"\"        if not self.is_safe_name(name):            print(f\"æ‹’ç»è®¾ç½®å—ä¿æŠ¤çš„åç§°: {name}\")            return False                globals()[name] = value        print(f\"å®‰å…¨è®¾ç½®: {name} = {value}\")        return True        def cleanup_namespace(self) -&gt; List[str]:        \"\"\"æ¸…ç†å‘½åç©ºé—´\"\"\"        current_names = set(globals().keys())        added_names = current_names - self.original_globals                cleaned = []        for name in added_names:            if not name.startswith('_') and self.is_safe_name(name):                del globals()[name]                cleaned.append(name)                return cleaned        def get_namespace_report(self) -&gt; Dict[str, Any]:        \"\"\"è·å–å‘½åç©ºé—´æŠ¥å‘Š\"\"\"        current_names = set(globals().keys())        added_names = current_names - self.original_globals                return {            'total_variables': len(current_names),            'original_count': len(self.original_globals),            'added_count': len(added_names),            'added_names': list(added_names),            'protected_count': len(self.protected_names)        }# æµ‹è¯•å‘½åç©ºé—´ä¿æŠ¤å™¨protector = NamespaceProtector()print(\"  æµ‹è¯•å®‰å…¨è®¾ç½®:\")protector.safe_set_global('safe_var1', 'value1')protector.safe_set_global('safe_var2', [1, 2, 3])protector.safe_set_global('len', 'dangerous')  # ä¼šè¢«æ‹’ç»protector.safe_set_global('__special__', 'special')  # ä¼šè¢«æ‹’ç»# è·å–å‘½åç©ºé—´æŠ¥å‘Šreport = protector.get_namespace_report()print(f\"\\n  å‘½åç©ºé—´æŠ¥å‘Š:\")print(f\"    æ€»å˜é‡æ•°: {report['total_variables']}\")print(f\"    æ–°å¢å˜é‡æ•°: {report['added_count']}\")print(f\"    æ–°å¢å˜é‡: {report['added_names'][:5]}...\")  # åªæ˜¾ç¤ºå‰5ä¸ª# æ¸…ç†å‘½åç©ºé—´print(f\"\\n  æ¸…ç†å‘½åç©ºé—´:\")cleaned = protector.cleanup_namespace()print(f\"    å·²æ¸…ç† {len(cleaned)} ä¸ªå˜é‡\")# 3. æ€§èƒ½è€ƒè™‘print(\"\\n3. æ€§èƒ½è€ƒè™‘:\")import timedef performance_comparison():    \"\"\"æ€§èƒ½æ¯”è¾ƒ\"\"\"    # ç›´æ¥è®¿é—® vs globals()è®¿é—®    test_var = \"test_value\"    globals()['test_global'] = \"test_value\"        iterations = 100000        # ç›´æ¥è®¿é—®    start_time = time.time()    for _ in range(iterations):        value = test_var    direct_time = time.time() - start_time        # globals()è®¿é—®    start_time = time.time()    for _ in range(iterations):        value = globals()['test_global']    globals_time = time.time() - start_time        # globals().get()è®¿é—®    start_time = time.time()    for _ in range(iterations):        value = globals().get('test_global')    globals_get_time = time.time() - start_time        print(f\"  æ€§èƒ½æ¯”è¾ƒ ({iterations} æ¬¡è¿­ä»£):\")    print(f\"    ç›´æ¥è®¿é—®: {direct_time:.4f}ç§’\")    print(f\"    globals()è®¿é—®: {globals_time:.4f}ç§’ (æ…¢ {globals_time/direct_time:.1f}å€)\")    print(f\"    globals().get()è®¿é—®: {globals_get_time:.4f}ç§’ (æ…¢ {globals_get_time/direct_time:.1f}å€)\")        # æ¸…ç†    del globals()['test_global']performance_comparison()# 4. è°ƒè¯•å’Œç›‘æ§print(\"\\n4. è°ƒè¯•å’Œç›‘æ§:\")class GlobalsMonitor:    \"\"\"å…¨å±€å˜é‡ç›‘æ§å™¨\"\"\"        def __init__(self):        self.baseline = set(globals().keys())        self.monitoring = False        self.changes = []        def start_monitoring(self):        \"\"\"å¼€å§‹ç›‘æ§\"\"\"        self.monitoring = True        self.baseline = set(globals().keys())        self.changes = []        print(\"å¼€å§‹ç›‘æ§å…¨å±€å˜é‡å˜åŒ–\")        def stop_monitoring(self):        \"\"\"åœæ­¢ç›‘æ§\"\"\"        self.monitoring = False        print(\"åœæ­¢ç›‘æ§å…¨å±€å˜é‡å˜åŒ–\")        def check_changes(self) -&gt; Dict[str, List[str]]:        \"\"\"æ£€æŸ¥å˜åŒ–\"\"\"        if not self.monitoring:            return {'error': 'Not monitoring'}                current = set(globals().keys())        added = current - self.baseline        removed = self.baseline - current                if added or removed:            change_record = {                'timestamp': time.time(),                'added': list(added),                'removed': list(removed)            }            self.changes.append(change_record)                        # æ›´æ–°åŸºçº¿            self.baseline = current                return {            'added': list(added),            'removed': list(removed),            'total_changes': len(self.changes)        }        def get_change_history(self) -&gt; List[Dict[str, Any]]:        \"\"\"è·å–å˜åŒ–å†å²\"\"\"        return self.changes.copy()        def print_summary(self):        \"\"\"æ‰“å°ç›‘æ§æ‘˜è¦\"\"\"        if not self.changes:            print(\"  æ²¡æœ‰æ£€æµ‹åˆ°å˜åŒ–\")            return                total_added = sum(len(change['added']) for change in self.changes)        total_removed = sum(len(change['removed']) for change in self.changes)                print(f\"  ç›‘æ§æ‘˜è¦:\")        print(f\"    å˜åŒ–æ¬¡æ•°: {len(self.changes)}\")        print(f\"    æ€»æ–°å¢: {total_added}\")        print(f\"    æ€»åˆ é™¤: {total_removed}\")                if self.changes:            latest = self.changes[-1]            print(f\"    æœ€è¿‘å˜åŒ–: +{len(latest['added'])} -{len(latest['removed'])}\")# æµ‹è¯•ç›‘æ§å™¨monitor = GlobalsMonitor()monitor.start_monitoring()# è¿›è¡Œä¸€äº›å˜åŒ–test_monitoring_var1 = \"value1\"test_monitoring_var2 = \"value2\"# æ£€æŸ¥å˜åŒ–changes = monitor.check_changes()print(f\"  æ£€æµ‹åˆ°å˜åŒ–: +{len(changes['added'])} -{len(changes['removed'])}\")print(f\"  æ–°å¢å˜é‡: {changes['added']}\")# åˆ é™¤ä¸€ä¸ªå˜é‡del test_monitoring_var1# å†æ¬¡æ£€æŸ¥changes = monitor.check_changes()print(f\"  å†æ¬¡æ£€æµ‹: +{len(changes['added'])} -{len(changes['removed'])}\")print(f\"  åˆ é™¤å˜é‡: {changes['removed']}\")monitor.stop_monitoring()monitor.print_summary()# æ¸…ç†if 'test_monitoring_var2' in globals():    del globals()['test_monitoring_var2']ğŸ”— ç›¸å…³å‡½æ•°å’Œæ¨¡å—å†…ç½®å‡½æ•°  locals() - è¿”å›å±€éƒ¨å‘½åç©ºé—´å­—å…¸  vars() - è¿”å›å¯¹è±¡çš„å±æ€§å­—å…¸  dir() - åˆ—å‡ºå¯¹è±¡çš„å±æ€§å  hasattr() - æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æŒ‡å®šå±æ€§  getattr() - è·å–å¯¹è±¡å±æ€§å€¼  setattr() - è®¾ç½®å¯¹è±¡å±æ€§å€¼  delattr() - åˆ é™¤å¯¹è±¡å±æ€§æ ‡å‡†åº“æ¨¡å—  inspect - å¯¹è±¡æ£€æŸ¥å’Œå†…çœ  types - åŠ¨æ€ç±»å‹åˆ›å»ºå’Œæ£€æŸ¥  sys - ç³»ç»Ÿç›¸å…³å‚æ•°å’Œå‡½æ•°  importlib - åŠ¨æ€å¯¼å…¥å·¥å…·  gc - åƒåœ¾å›æ”¶æ¥å£ç¬¬ä¸‰æ–¹åº“  varname - è·å–å˜é‡å  dill - æ‰©å±•çš„åºåˆ—åŒ–åº“  cloudpickle - äº‘ç«¯åºåˆ—åŒ–ğŸ“š æ‰©å±•é˜…è¯»  Pythonå‘½åç©ºé—´å’Œä½œç”¨åŸŸ  å†…ç½®å‡½æ•°æ–‡æ¡£  Pythonæ•°æ®æ¨¡å‹  åŠ¨æ€å¯¼å…¥æŒ‡å—ğŸ·ï¸ æ ‡ç­¾å‘½åç©ºé—´ å…¨å±€å˜é‡ ä½œç”¨åŸŸ å˜é‡ç®¡ç† åŠ¨æ€è®¿é—® å…ƒç¼–ç¨‹ è°ƒè¯•å·¥å…· é…ç½®ç®¡ç†",
        "url": "/docs/builtins/globals/",
        "category": "builtins",
        "tags": ["å‘½åç©ºé—´","å…¨å±€å˜é‡","ä½œç”¨åŸŸ","å˜é‡ç®¡ç†"]
      }
      
    
  
    
      ,
      {
        "title": "hasattr() - å±æ€§æ£€æŸ¥å‡½æ•°",
        "content": "hasattr() - å±æ€§æ£€æŸ¥å‡½æ•°ğŸ“ æ¦‚è¿°hasattr() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥å¯¹è±¡æ˜¯å¦å…·æœ‰æŒ‡å®šçš„å±æ€§ã€‚è¿™ä¸ªå‡½æ•°åœ¨åŠ¨æ€ç¼–ç¨‹ã€å¯¹è±¡æ£€æŸ¥ã€APIå…¼å®¹æ€§æ£€æŸ¥ç­‰åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…åœ¨è¿è¡Œæ—¶å®‰å…¨åœ°æ£€æŸ¥å¯¹è±¡çš„å±æ€§ï¼Œé¿å…å› è®¿é—®ä¸å­˜åœ¨çš„å±æ€§è€Œå¼•å‘å¼‚å¸¸ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡hasattr()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œè¯­æ³•  ç†è§£å±æ€§æ£€æŸ¥çš„å·¥ä½œæœºåˆ¶  å­¦ä¼šåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨hasattr()è¿›è¡Œå®‰å…¨çš„å±æ€§è®¿é—®  äº†è§£hasattr()ä¸getattr()ã€setattr()çš„é…åˆä½¿ç”¨  æŒæ¡åŠ¨æ€å±æ€§æ£€æŸ¥çš„æœ€ä½³å®è·µğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  å¯¹è±¡å’Œå±æ€§çš„åŸºæœ¬æ¦‚å¿µ  ç±»çš„å®šä¹‰å’Œå®ä¾‹åŒ–  å¼‚å¸¸å¤„ç†çš„åŸºæœ¬çŸ¥è¯†  åŠ¨æ€ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µhasattr() å‡½æ•°ç”¨äºæ£€æŸ¥å¯¹è±¡æ˜¯å¦å…·æœ‰æŒ‡å®šåç§°çš„å±æ€§ã€‚å®ƒä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼šå¦‚æœå¯¹è±¡å…·æœ‰è¯¥å±æ€§åˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚è¿™ä¸ªå‡½æ•°å®é™…ä¸Šæ˜¯é€šè¿‡è°ƒç”¨ getattr() å¹¶æ•è· AttributeError å¼‚å¸¸æ¥å®ç°çš„ã€‚è¯­æ³•æ ¼å¼hasattr(object, name)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  object      ä»»æ„å¯¹è±¡      æ˜¯      æ—       è¦æ£€æŸ¥çš„å¯¹è±¡              name      å­—ç¬¦ä¸²      æ˜¯      æ—       å±æ€§åç§°      è¿”å›å€¼  ç±»å‹: bool  å†…å®¹: å¦‚æœå¯¹è±¡å…·æœ‰æŒ‡å®šå±æ€§åˆ™è¿”å›Trueï¼Œå¦åˆ™è¿”å›FalseğŸ’¡ ä»£ç ç¤ºä¾‹åŸºæœ¬ç”¨æ³•# å®šä¹‰ä¸€ä¸ªç®€å•çš„ç±»class Person:    \"\"\"äººå‘˜ç±»\"\"\"    def __init__(self, name, age):        self.name = name        self.age = age        self._private_id = \"P001\"        def greet(self):        return f\"ä½ å¥½ï¼Œæˆ‘æ˜¯{self.name}\"        def get_info(self):        return f\"{self.name}, {self.age}å²\"        @property    def display_name(self):        return f\"Mr./Ms. {self.name}\"# åˆ›å»ºå®ä¾‹person = Person(\"å¼ ä¸‰\", 30)# åŸºæœ¬å±æ€§æ£€æŸ¥print(\"åŸºæœ¬å±æ€§æ£€æŸ¥:\")print(f\"personæœ‰'name'å±æ€§: {hasattr(person, 'name')}\")  # Trueprint(f\"personæœ‰'age'å±æ€§: {hasattr(person, 'age')}\")  # Trueprint(f\"personæœ‰'height'å±æ€§: {hasattr(person, 'height')}\")  # Falseprint(f\"personæœ‰'_private_id'å±æ€§: {hasattr(person, '_private_id')}\")  # True# æ–¹æ³•æ£€æŸ¥print(f\"\\næ–¹æ³•æ£€æŸ¥:\")print(f\"personæœ‰'greet'æ–¹æ³•: {hasattr(person, 'greet')}\")  # Trueprint(f\"personæœ‰'get_info'æ–¹æ³•: {hasattr(person, 'get_info')}\")  # Trueprint(f\"personæœ‰'fly'æ–¹æ³•: {hasattr(person, 'fly')}\")  # False# å±æ€§è£…é¥°å™¨æ£€æŸ¥print(f\"\\nå±æ€§è£…é¥°å™¨æ£€æŸ¥:\")print(f\"personæœ‰'display_name'å±æ€§: {hasattr(person, 'display_name')}\")  # True# ç±»å±æ€§æ£€æŸ¥print(f\"\\nç±»å±æ€§æ£€æŸ¥:\")print(f\"Personç±»æœ‰'__init__'æ–¹æ³•: {hasattr(Person, '__init__')}\")  # Trueprint(f\"Personç±»æœ‰'greet'æ–¹æ³•: {hasattr(Person, 'greet')}\")  # Trueprint(f\"Personç±»æœ‰'name'å±æ€§: {hasattr(Person, 'name')}\")  # Falseï¼ˆå®ä¾‹å±æ€§ï¼‰# å†…ç½®å¯¹è±¡æ£€æŸ¥print(f\"\\nå†…ç½®å¯¹è±¡æ£€æŸ¥:\")my_list = [1, 2, 3]print(f\"listæœ‰'append'æ–¹æ³•: {hasattr(my_list, 'append')}\")  # Trueprint(f\"listæœ‰'remove'æ–¹æ³•: {hasattr(my_list, 'remove')}\")  # Trueprint(f\"listæœ‰'keys'æ–¹æ³•: {hasattr(my_list, 'keys')}\")  # Falsemy_dict = {'a': 1, 'b': 2}print(f\"dictæœ‰'keys'æ–¹æ³•: {hasattr(my_dict, 'keys')}\")  # Trueprint(f\"dictæœ‰'append'æ–¹æ³•: {hasattr(my_dict, 'append')}\")  # Falseå®‰å…¨çš„å±æ€§è®¿é—®# å®‰å…¨çš„å±æ€§è®¿é—®æ¨¡å¼class SafeAttributeAccess:    \"\"\"å®‰å…¨å±æ€§è®¿é—®ç¤ºä¾‹\"\"\"        @staticmethod    def safe_get_attribute(obj, attr_name, default=None):        \"\"\"å®‰å…¨è·å–å±æ€§å€¼\"\"\"        if hasattr(obj, attr_name):            return getattr(obj, attr_name)        return default        @staticmethod    def safe_call_method(obj, method_name, *args, **kwargs):        \"\"\"å®‰å…¨è°ƒç”¨æ–¹æ³•\"\"\"        if hasattr(obj, method_name):            method = getattr(obj, method_name)            if callable(method):                try:                    return method(*args, **kwargs)                except Exception as e:                    print(f\"è°ƒç”¨æ–¹æ³•{method_name}æ—¶å‡ºé”™: {e}\")                    return None            else:                print(f\"{method_name}ä¸æ˜¯å¯è°ƒç”¨çš„æ–¹æ³•\")                return None        else:            print(f\"å¯¹è±¡æ²¡æœ‰{method_name}æ–¹æ³•\")            return None        @staticmethod    def check_interface(obj, required_methods):        \"\"\"æ£€æŸ¥å¯¹è±¡æ˜¯å¦å®ç°äº†æŒ‡å®šçš„æ¥å£\"\"\"        missing_methods = []        for method_name in required_methods:            if not hasattr(obj, method_name):                missing_methods.append(method_name)            elif not callable(getattr(obj, method_name)):                missing_methods.append(f\"{method_name}(ä¸å¯è°ƒç”¨)\")                return len(missing_methods) == 0, missing_methods# æµ‹è¯•å®‰å…¨å±æ€§è®¿é—®print(\"\\nå®‰å…¨å±æ€§è®¿é—®ç¤ºä¾‹:\")# åˆ›å»ºæµ‹è¯•å¯¹è±¡class TestObject:    def __init__(self):        self.value = 42        self.name = \"æµ‹è¯•å¯¹è±¡\"        def get_value(self):        return self.value        def set_value(self, new_value):        self.value = new_value        return f\"å€¼å·²è®¾ç½®ä¸º{new_value}\"test_obj = TestObject()# å®‰å…¨è·å–å±æ€§print(f\"å®‰å…¨è·å–'value': {SafeAttributeAccess.safe_get_attribute(test_obj, 'value')}\")print(f\"å®‰å…¨è·å–'missing': {SafeAttributeAccess.safe_get_attribute(test_obj, 'missing', 'é»˜è®¤å€¼')}\")# å®‰å…¨è°ƒç”¨æ–¹æ³•print(f\"å®‰å…¨è°ƒç”¨'get_value': {SafeAttributeAccess.safe_call_method(test_obj, 'get_value')}\")print(f\"å®‰å…¨è°ƒç”¨'set_value': {SafeAttributeAccess.safe_call_method(test_obj, 'set_value', 100)}\")print(f\"å®‰å…¨è°ƒç”¨'missing_method': {SafeAttributeAccess.safe_call_method(test_obj, 'missing_method')}\")# æ¥å£æ£€æŸ¥required_interface = ['get_value', 'set_value', 'get_name']is_compatible, missing = SafeAttributeAccess.check_interface(test_obj, required_interface)print(f\"\\næ¥å£å…¼å®¹æ€§æ£€æŸ¥:\")print(f\"  å…¼å®¹: {is_compatible}\")print(f\"  ç¼ºå¤±æ–¹æ³•: {missing}\")# å®Œæ•´æ¥å£æ£€æŸ¥complete_interface = ['get_value', 'set_value']is_compatible, missing = SafeAttributeAccess.check_interface(test_obj, complete_interface)print(f\"\\nå®Œæ•´æ¥å£æ£€æŸ¥:\")print(f\"  å…¼å®¹: {is_compatible}\")print(f\"  ç¼ºå¤±æ–¹æ³•: {missing}\")åŠ¨æ€å±æ€§æ£€æŸ¥# åŠ¨æ€å±æ€§æ£€æŸ¥å’Œå¤„ç†class DynamicAttributeHandler:    \"\"\"åŠ¨æ€å±æ€§å¤„ç†å™¨\"\"\"        def __init__(self):        self._dynamic_attrs = {}        def __getattr__(self, name):        \"\"\"åŠ¨æ€è·å–å±æ€§\"\"\"        if name in self._dynamic_attrs:            return self._dynamic_attrs[name]        raise AttributeError(f\"'{type(self).__name__}'å¯¹è±¡æ²¡æœ‰å±æ€§'{name}'\")        def __setattr__(self, name, value):        \"\"\"åŠ¨æ€è®¾ç½®å±æ€§\"\"\"        if name.startswith('_'):            # ç§æœ‰å±æ€§ç›´æ¥è®¾ç½®            super().__setattr__(name, value)        else:            # å…¬å…±å±æ€§å­˜å‚¨åœ¨åŠ¨æ€å­—å…¸ä¸­            if not hasattr(self, '_dynamic_attrs'):                super().__setattr__('_dynamic_attrs', {})            self._dynamic_attrs[name] = value        def has_dynamic_attr(self, name):        \"\"\"æ£€æŸ¥æ˜¯å¦æœ‰åŠ¨æ€å±æ€§\"\"\"        return name in getattr(self, '_dynamic_attrs', {})        def list_dynamic_attrs(self):        \"\"\"åˆ—å‡ºæ‰€æœ‰åŠ¨æ€å±æ€§\"\"\"        return list(getattr(self, '_dynamic_attrs', {}).keys())        def remove_dynamic_attr(self, name):        \"\"\"åˆ é™¤åŠ¨æ€å±æ€§\"\"\"        if self.has_dynamic_attr(name):            del self._dynamic_attrs[name]            return True        return False# æµ‹è¯•åŠ¨æ€å±æ€§å¤„ç†print(\"\\nåŠ¨æ€å±æ€§å¤„ç†ç¤ºä¾‹:\")dynamic_obj = DynamicAttributeHandler()# æ£€æŸ¥åˆå§‹çŠ¶æ€print(f\"åˆå§‹çŠ¶æ€:\")print(f\"  æœ‰'name'å±æ€§: {hasattr(dynamic_obj, 'name')}\")print(f\"  æœ‰'value'å±æ€§: {hasattr(dynamic_obj, 'value')}\")print(f\"  åŠ¨æ€å±æ€§åˆ—è¡¨: {dynamic_obj.list_dynamic_attrs()}\")# åŠ¨æ€æ·»åŠ å±æ€§dynamic_obj.name = \"åŠ¨æ€å¯¹è±¡\"dynamic_obj.value = 123dynamic_obj.description = \"è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€å±æ€§ç¤ºä¾‹\"print(f\"\\næ·»åŠ å±æ€§å:\")print(f\"  æœ‰'name'å±æ€§: {hasattr(dynamic_obj, 'name')}\")print(f\"  æœ‰'value'å±æ€§: {hasattr(dynamic_obj, 'value')}\")print(f\"  æœ‰'description'å±æ€§: {hasattr(dynamic_obj, 'description')}\")print(f\"  æœ‰'missing'å±æ€§: {hasattr(dynamic_obj, 'missing')}\")print(f\"  åŠ¨æ€å±æ€§åˆ—è¡¨: {dynamic_obj.list_dynamic_attrs()}\")# è®¿é—®å±æ€§print(f\"\\nå±æ€§å€¼:\")print(f\"  name: {dynamic_obj.name}\")print(f\"  value: {dynamic_obj.value}\")print(f\"  description: {dynamic_obj.description}\")# åˆ é™¤å±æ€§removed = dynamic_obj.remove_dynamic_attr('description')print(f\"\\nåˆ é™¤'description'å±æ€§: {removed}\")print(f\"  æœ‰'description'å±æ€§: {hasattr(dynamic_obj, 'description')}\")print(f\"  åŠ¨æ€å±æ€§åˆ—è¡¨: {dynamic_obj.list_dynamic_attrs()}\")# å±æ€§æ£€æŸ¥å‡½æ•°def analyze_object_attributes(obj, show_private=False, show_methods=True):    \"\"\"åˆ†æå¯¹è±¡çš„æ‰€æœ‰å±æ€§\"\"\"    print(f\"\\nå¯¹è±¡ {type(obj).__name__} çš„å±æ€§åˆ†æ:\")        # è·å–æ‰€æœ‰å±æ€§å    all_attrs = dir(obj)        # åˆ†ç±»å±æ€§    public_attrs = []    private_attrs = []    methods = []    properties = []        for attr_name in all_attrs:        # è·³è¿‡ç§æœ‰å±æ€§ï¼ˆå¦‚æœä¸æ˜¾ç¤ºï¼‰        if not show_private and attr_name.startswith('_'):            continue                if hasattr(obj, attr_name):            attr_value = getattr(obj, attr_name)                        if callable(attr_value):                methods.append(attr_name)            elif isinstance(attr_value, property):                properties.append(attr_name)            elif attr_name.startswith('_'):                private_attrs.append(attr_name)            else:                public_attrs.append(attr_name)        # æ˜¾ç¤ºç»“æœ    print(f\"  å…¬å…±å±æ€§ ({len(public_attrs)}): {public_attrs}\")        if show_private:        print(f\"  ç§æœ‰å±æ€§ ({len(private_attrs)}): {private_attrs}\")        if show_methods:        print(f\"  æ–¹æ³• ({len(methods)}): {methods[:10]}{'...' if len(methods) &gt; 10 else ''}\")        if properties:        print(f\"  å±æ€§è£…é¥°å™¨ ({len(properties)}): {properties}\")# åˆ†æä¸åŒç±»å‹çš„å¯¹è±¡test_objects = [    person,    dynamic_obj,    [1, 2, 3],    {'a': 1, 'b': 2},    \"hello world\"]for obj in test_objects:    analyze_object_attributes(obj, show_private=False, show_methods=True)ğŸš€ é«˜çº§åº”ç”¨æ’ä»¶ç³»ç»Ÿä¸­çš„å±æ€§æ£€æŸ¥from abc import ABC, abstractmethodfrom typing import List, Dict, Any# æ’ä»¶æ¥å£å®šä¹‰class PluginInterface(ABC):    \"\"\"æ’ä»¶æ¥å£\"\"\"        @property    @abstractmethod    def name(self) -&gt; str:        \"\"\"æ’ä»¶åç§°\"\"\"        pass        @property    @abstractmethod    def version(self) -&gt; str:        \"\"\"æ’ä»¶ç‰ˆæœ¬\"\"\"        pass        @abstractmethod    def initialize(self) -&gt; bool:        \"\"\"åˆå§‹åŒ–æ’ä»¶\"\"\"        pass        @abstractmethod    def execute(self, *args, **kwargs) -&gt; Any:        \"\"\"æ‰§è¡Œæ’ä»¶åŠŸèƒ½\"\"\"        pass        def cleanup(self):        \"\"\"æ¸…ç†èµ„æºï¼ˆå¯é€‰ï¼‰\"\"\"        pass# æ’ä»¶éªŒè¯å™¨class PluginValidator:    \"\"\"æ’ä»¶éªŒè¯å™¨\"\"\"        # å¿…éœ€çš„å±æ€§å’Œæ–¹æ³•    REQUIRED_ATTRIBUTES = ['name', 'version']    REQUIRED_METHODS = ['initialize', 'execute']    OPTIONAL_METHODS = ['cleanup', 'configure']        @classmethod    def validate_plugin(cls, plugin_obj) -&gt; tuple[bool, List[str]]:        \"\"\"éªŒè¯æ’ä»¶å¯¹è±¡\"\"\"        errors = []                # æ£€æŸ¥å¿…éœ€å±æ€§        for attr in cls.REQUIRED_ATTRIBUTES:            if not hasattr(plugin_obj, attr):                errors.append(f\"ç¼ºå°‘å¿…éœ€å±æ€§: {attr}\")            else:                attr_value = getattr(plugin_obj, attr)                if not isinstance(attr_value, str) or not attr_value.strip():                    errors.append(f\"å±æ€§{attr}å¿…é¡»æ˜¯éç©ºå­—ç¬¦ä¸²\")                # æ£€æŸ¥å¿…éœ€æ–¹æ³•        for method in cls.REQUIRED_METHODS:            if not hasattr(plugin_obj, method):                errors.append(f\"ç¼ºå°‘å¿…éœ€æ–¹æ³•: {method}\")            elif not callable(getattr(plugin_obj, method)):                errors.append(f\"{method}å¿…é¡»æ˜¯å¯è°ƒç”¨çš„æ–¹æ³•\")                # æ£€æŸ¥å¯é€‰æ–¹æ³•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰        for method in cls.OPTIONAL_METHODS:            if hasattr(plugin_obj, method) and not callable(getattr(plugin_obj, method)):                errors.append(f\"{method}å­˜åœ¨ä½†ä¸å¯è°ƒç”¨\")                return len(errors) == 0, errors        @classmethod    def get_plugin_info(cls, plugin_obj) -&gt; Dict[str, Any]:        \"\"\"è·å–æ’ä»¶ä¿¡æ¯\"\"\"        info = {            'type': type(plugin_obj).__name__,            'module': type(plugin_obj).__module__,        }                # åŸºæœ¬å±æ€§        for attr in cls.REQUIRED_ATTRIBUTES:            if hasattr(plugin_obj, attr):                info[attr] = getattr(plugin_obj, attr)                # æ–¹æ³•æ£€æŸ¥        available_methods = []        for method in cls.REQUIRED_METHODS + cls.OPTIONAL_METHODS:            if hasattr(plugin_obj, method) and callable(getattr(plugin_obj, method)):                available_methods.append(method)                info['available_methods'] = available_methods                # é¢å¤–å±æ€§        extra_attrs = []        for attr_name in dir(plugin_obj):            if (not attr_name.startswith('_') and                 attr_name not in cls.REQUIRED_ATTRIBUTES and                 attr_name not in cls.REQUIRED_METHODS + cls.OPTIONAL_METHODS and                hasattr(plugin_obj, attr_name)):                                attr_value = getattr(plugin_obj, attr_name)                if not callable(attr_value):                    extra_attrs.append(attr_name)                info['extra_attributes'] = extra_attrs                return info# å…·ä½“æ’ä»¶å®ç°class TextProcessorPlugin(PluginInterface):    \"\"\"æ–‡æœ¬å¤„ç†æ’ä»¶\"\"\"        def __init__(self):        self._initialized = False        self.config = {}        @property    def name(self) -&gt; str:        return \"Text Processor\"        @property    def version(self) -&gt; str:        return \"1.0.0\"        def initialize(self) -&gt; bool:        \"\"\"åˆå§‹åŒ–æ’ä»¶\"\"\"        self._initialized = True        return True        def execute(self, text: str, operation: str = \"upper\") -&gt; str:        \"\"\"æ‰§è¡Œæ–‡æœ¬å¤„ç†\"\"\"        if not self._initialized:            raise RuntimeError(\"æ’ä»¶æœªåˆå§‹åŒ–\")                if operation == \"upper\":            return text.upper()        elif operation == \"lower\":            return text.lower()        elif operation == \"title\":            return text.title()        else:            return text        def configure(self, **kwargs):        \"\"\"é…ç½®æ’ä»¶\"\"\"        self.config.update(kwargs)        def cleanup(self):        \"\"\"æ¸…ç†èµ„æº\"\"\"        self._initialized = False        self.config.clear()class CalculatorPlugin(PluginInterface):    \"\"\"è®¡ç®—å™¨æ’ä»¶\"\"\"        @property    def name(self) -&gt; str:        return \"Calculator\"        @property    def version(self) -&gt; str:        return \"2.1.0\"        def initialize(self) -&gt; bool:        return True        def execute(self, operation: str, *args) -&gt; float:        \"\"\"æ‰§è¡Œè®¡ç®—\"\"\"        if operation == \"add\":            return sum(args)        elif operation == \"multiply\":            result = 1            for arg in args:                result *= arg            return result        else:            raise ValueError(f\"ä¸æ”¯æŒçš„æ“ä½œ: {operation}\")# ä¸å®Œæ•´çš„æ’ä»¶ï¼ˆç”¨äºæµ‹è¯•ï¼‰class IncompletePlugin:    \"\"\"ä¸å®Œæ•´çš„æ’ä»¶\"\"\"        @property    def name(self) -&gt; str:        return \"Incomplete Plugin\"        # ç¼ºå°‘versionå±æ€§å’Œå¿…éœ€æ–¹æ³•        def some_method(self):        return \"è¿™æ˜¯ä¸€ä¸ªæ–¹æ³•\"# æ’ä»¶ç®¡ç†å™¨class PluginManager:    \"\"\"æ’ä»¶ç®¡ç†å™¨\"\"\"        def __init__(self):        self._plugins: Dict[str, PluginInterface] = {}        def register_plugin(self, plugin_obj) -&gt; bool:        \"\"\"æ³¨å†Œæ’ä»¶\"\"\"        # éªŒè¯æ’ä»¶        is_valid, errors = PluginValidator.validate_plugin(plugin_obj)                if not is_valid:            print(f\"æ’ä»¶éªŒè¯å¤±è´¥:\")            for error in errors:                print(f\"  - {error}\")            return False                # è·å–æ’ä»¶ä¿¡æ¯        plugin_info = PluginValidator.get_plugin_info(plugin_obj)        plugin_name = plugin_info['name']                # æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨        if plugin_name in self._plugins:            print(f\"è­¦å‘Š: æ’ä»¶'{plugin_name}'å·²å­˜åœ¨ï¼Œå°†è¢«æ›¿æ¢\")                # åˆå§‹åŒ–æ’ä»¶        if hasattr(plugin_obj, 'initialize'):            try:                if not plugin_obj.initialize():                    print(f\"æ’ä»¶'{plugin_name}'åˆå§‹åŒ–å¤±è´¥\")                    return False            except Exception as e:                print(f\"æ’ä»¶'{plugin_name}'åˆå§‹åŒ–æ—¶å‡ºé”™: {e}\")                return False                # æ³¨å†Œæ’ä»¶        self._plugins[plugin_name] = plugin_obj        print(f\"æˆåŠŸæ³¨å†Œæ’ä»¶: {plugin_name} v{plugin_info['version']}\")                return True        def list_plugins(self):        \"\"\"åˆ—å‡ºæ‰€æœ‰æ’ä»¶\"\"\"        print(f\"\\nå·²æ³¨å†Œçš„æ’ä»¶ ({len(self._plugins)})ä¸ª:\")        for name, plugin in self._plugins.items():            info = PluginValidator.get_plugin_info(plugin)            print(f\"\\n  {name} v{info['version']}:\")            print(f\"    ç±»å‹: {info['type']}\")            print(f\"    å¯ç”¨æ–¹æ³•: {', '.join(info['available_methods'])}\")            if info['extra_attributes']:                print(f\"    é¢å¤–å±æ€§: {', '.join(info['extra_attributes'])}\")        def execute_plugin(self, plugin_name: str, *args, **kwargs):        \"\"\"æ‰§è¡Œæ’ä»¶\"\"\"        if plugin_name not in self._plugins:            raise KeyError(f\"æœªæ‰¾åˆ°æ’ä»¶: {plugin_name}\")                plugin = self._plugins[plugin_name]        return plugin.execute(*args, **kwargs)# æµ‹è¯•æ’ä»¶ç³»ç»Ÿprint(\"æ’ä»¶ç³»ç»Ÿç¤ºä¾‹:\")# åˆ›å»ºæ’ä»¶ç®¡ç†å™¨manager = PluginManager()# æµ‹è¯•æ’ä»¶test_plugins = [    TextProcessorPlugin(),    CalculatorPlugin(),    IncompletePlugin()  # è¿™ä¸ªä¼šå¤±è´¥]# æ³¨å†Œæ’ä»¶for plugin in test_plugins:    print(f\"\\næ³¨å†Œæ’ä»¶ {type(plugin).__name__}:\")    success = manager.register_plugin(plugin)    print(f\"æ³¨å†Œç»“æœ: {'æˆåŠŸ' if success else 'å¤±è´¥'}\")# åˆ—å‡ºæ’ä»¶manager.list_plugins()# æ‰§è¡Œæ’ä»¶print(f\"\\næ‰§è¡Œæ’ä»¶:\")try:    result1 = manager.execute_plugin(\"Text Processor\", \"hello world\", \"title\")    print(f\"æ–‡æœ¬å¤„ç†ç»“æœ: {result1}\")        result2 = manager.execute_plugin(\"Calculator\", \"add\", 1, 2, 3, 4, 5)    print(f\"è®¡ç®—ç»“æœ: {result2}\")        result3 = manager.execute_plugin(\"Calculator\", \"multiply\", 2, 3, 4)    print(f\"ä¹˜æ³•ç»“æœ: {result3}\")    except Exception as e:    print(f\"æ‰§è¡Œæ’ä»¶æ—¶å‡ºé”™: {e}\")APIå…¼å®¹æ€§æ£€æŸ¥import inspectfrom typing import List, Dict, Callable, Anyfrom functools import wraps# APIå…¼å®¹æ€§æ£€æŸ¥å™¨class APICompatibilityChecker:    \"\"\"APIå…¼å®¹æ€§æ£€æŸ¥å™¨\"\"\"        @staticmethod    def check_method_signature(obj, method_name: str, expected_params: List[str]) -&gt; tuple[bool, str]:        \"\"\"æ£€æŸ¥æ–¹æ³•ç­¾å\"\"\"        if not hasattr(obj, method_name):            return False, f\"ç¼ºå°‘æ–¹æ³•: {method_name}\"                method = getattr(obj, method_name)        if not callable(method):            return False, f\"{method_name}ä¸æ˜¯å¯è°ƒç”¨çš„æ–¹æ³•\"                try:            sig = inspect.signature(method)            actual_params = list(sig.parameters.keys())                        # ç§»é™¤selfå‚æ•°ï¼ˆå¦‚æœå­˜åœ¨ï¼‰            if actual_params and actual_params[0] in ['self', 'cls']:                actual_params = actual_params[1:]                        # æ£€æŸ¥å‚æ•°            missing_params = [p for p in expected_params if p not in actual_params]            if missing_params:                return False, f\"æ–¹æ³•{method_name}ç¼ºå°‘å‚æ•°: {missing_params}\"                        return True, \"ç­¾åå…¼å®¹\"                    except Exception as e:            return False, f\"æ£€æŸ¥æ–¹æ³•{method_name}ç­¾åæ—¶å‡ºé”™: {e}\"        @staticmethod    def check_api_compatibility(obj, api_spec: Dict[str, Any]) -&gt; Dict[str, Any]:        \"\"\"æ£€æŸ¥APIå…¼å®¹æ€§\"\"\"        results = {            'compatible': True,            'errors': [],            'warnings': [],            'details': {}        }                # æ£€æŸ¥å¿…éœ€å±æ€§        required_attrs = api_spec.get('required_attributes', [])        for attr_name in required_attrs:            if hasattr(obj, attr_name):                results['details'][f'attr_{attr_name}'] = 'âœ“ å­˜åœ¨'            else:                results['compatible'] = False                results['errors'].append(f\"ç¼ºå°‘å¿…éœ€å±æ€§: {attr_name}\")                results['details'][f'attr_{attr_name}'] = 'âœ— ç¼ºå¤±'                # æ£€æŸ¥å¿…éœ€æ–¹æ³•        required_methods = api_spec.get('required_methods', {})        for method_name, expected_params in required_methods.items():            is_compatible, message = APICompatibilityChecker.check_method_signature(                obj, method_name, expected_params            )                        if is_compatible:                results['details'][f'method_{method_name}'] = f'âœ“ {message}'            else:                results['compatible'] = False                results['errors'].append(message)                results['details'][f'method_{method_name}'] = f'âœ— {message}'                # æ£€æŸ¥å¯é€‰æ–¹æ³•        optional_methods = api_spec.get('optional_methods', {})        for method_name, expected_params in optional_methods.items():            if hasattr(obj, method_name):                is_compatible, message = APICompatibilityChecker.check_method_signature(                    obj, method_name, expected_params                )                                if is_compatible:                    results['details'][f'optional_{method_name}'] = f'âœ“ {message}'                else:                    results['warnings'].append(f\"å¯é€‰æ–¹æ³•{method_name}ç­¾åä¸å…¼å®¹: {message}\")                    results['details'][f'optional_{method_name}'] = f'âš  {message}'            else:                results['details'][f'optional_{method_name}'] = '- æœªå®ç°'                return results# APIè§„èŒƒå®šä¹‰FILE_PROCESSOR_API = {    'required_attributes': ['name', 'supported_extensions'],    'required_methods': {        'process_file': ['file_path'],        'validate_file': ['file_path'],    },    'optional_methods': {        'get_metadata': ['file_path'],        'configure': ['options'],        'cleanup': [],    }}DATA_VALIDATOR_API = {    'required_attributes': ['validator_name'],    'required_methods': {        'validate': ['data'],        'get_errors': [],    },    'optional_methods': {        'set_rules': ['rules'],        'reset': [],    }}# å®ç°ç¤ºä¾‹class TextFileProcessor:    \"\"\"æ–‡æœ¬æ–‡ä»¶å¤„ç†å™¨ï¼ˆå®Œæ•´å®ç°ï¼‰\"\"\"        def __init__(self):        self.name = \"Text File Processor\"        self.supported_extensions = ['.txt', '.md', '.log']        self._processed_count = 0        def process_file(self, file_path: str) -&gt; str:        \"\"\"å¤„ç†æ–‡ä»¶\"\"\"        self._processed_count += 1        return f\"å·²å¤„ç†æ–‡ä»¶: {file_path}\"        def validate_file(self, file_path: str) -&gt; bool:        \"\"\"éªŒè¯æ–‡ä»¶\"\"\"        return any(file_path.endswith(ext) for ext in self.supported_extensions)        def get_metadata(self, file_path: str) -&gt; Dict[str, Any]:        \"\"\"è·å–æ–‡ä»¶å…ƒæ•°æ®\"\"\"        return {            'processor': self.name,            'file_path': file_path,            'processed_count': self._processed_count        }        def configure(self, options: Dict[str, Any]):        \"\"\"é…ç½®å¤„ç†å™¨\"\"\"        if 'extensions' in options:            self.supported_extensions = options['extensions']class ImageFileProcessor:    \"\"\"å›¾åƒæ–‡ä»¶å¤„ç†å™¨ï¼ˆéƒ¨åˆ†å®ç°ï¼‰\"\"\"        def __init__(self):        self.name = \"Image File Processor\"        self.supported_extensions = ['.jpg', '.png', '.gif']        def process_file(self, file_path: str, quality: int = 80) -&gt; str:        \"\"\"å¤„ç†æ–‡ä»¶ï¼ˆå‚æ•°ä¸åŒ¹é…ï¼‰\"\"\"        return f\"å·²å¤„ç†å›¾åƒ: {file_path}\"        # ç¼ºå°‘validate_fileæ–¹æ³•        def get_metadata(self, file_path: str) -&gt; Dict[str, Any]:        \"\"\"è·å–æ–‡ä»¶å…ƒæ•°æ®\"\"\"        return {            'processor': self.name,            'file_path': file_path,            'type': 'image'        }class EmailValidator:    \"\"\"é‚®ç®±éªŒè¯å™¨ï¼ˆå®Œæ•´å®ç°ï¼‰\"\"\"        def __init__(self):        self.validator_name = \"Email Validator\"        self._errors = []        def validate(self, data: str) -&gt; bool:        \"\"\"éªŒè¯é‚®ç®±\"\"\"        self._errors.clear()                if not isinstance(data, str):            self._errors.append(\"æ•°æ®å¿…é¡»æ˜¯å­—ç¬¦ä¸²\")            return False                if '@' not in data:            self._errors.append(\"ç¼ºå°‘@ç¬¦å·\")            return False                if '.' not in data.split('@')[1]:            self._errors.append(\"åŸŸåæ ¼å¼ä¸æ­£ç¡®\")            return False                return True        def get_errors(self) -&gt; List[str]:        \"\"\"è·å–é”™è¯¯ä¿¡æ¯\"\"\"        return self._errors.copy()        def set_rules(self, rules: Dict[str, Any]):        \"\"\"è®¾ç½®éªŒè¯è§„åˆ™\"\"\"        # å®ç°è§„åˆ™è®¾ç½®é€»è¾‘        pass        def reset(self):        \"\"\"é‡ç½®éªŒè¯å™¨\"\"\"        self._errors.clear()class IncompleteValidator:    \"\"\"ä¸å®Œæ•´çš„éªŒè¯å™¨\"\"\"        def __init__(self):        # ç¼ºå°‘validator_nameå±æ€§        pass        def validate(self, data: str, strict: bool = True) -&gt; bool:        \"\"\"éªŒè¯æ•°æ®ï¼ˆå‚æ•°ä¸åŒ¹é…ï¼‰\"\"\"        return True        # ç¼ºå°‘get_errorsæ–¹æ³•# å…¼å®¹æ€§æ£€æŸ¥è£…é¥°å™¨def require_api_compatibility(api_spec: Dict[str, Any]):    \"\"\"APIå…¼å®¹æ€§æ£€æŸ¥è£…é¥°å™¨\"\"\"    def decorator(func: Callable) -&gt; Callable:        @wraps(func)        def wrapper(obj, *args, **kwargs):            # æ£€æŸ¥APIå…¼å®¹æ€§            results = APICompatibilityChecker.check_api_compatibility(obj, api_spec)                        if not results['compatible']:                error_msg = \"APIå…¼å®¹æ€§æ£€æŸ¥å¤±è´¥:\\n\" + \"\\n\".join(results['errors'])                raise TypeError(error_msg)                        # å¦‚æœæœ‰è­¦å‘Šï¼Œæ‰“å°å‡ºæ¥            if results['warnings']:                print(\"APIå…¼å®¹æ€§è­¦å‘Š:\")                for warning in results['warnings']:                    print(f\"  - {warning}\")                        return func(obj, *args, **kwargs)        return wrapper    return decorator# ä½¿ç”¨è£…é¥°å™¨çš„å‡½æ•°@require_api_compatibility(FILE_PROCESSOR_API)def process_with_file_processor(processor, file_path: str):    \"\"\"ä½¿ç”¨æ–‡ä»¶å¤„ç†å™¨å¤„ç†æ–‡ä»¶\"\"\"    if processor.validate_file(file_path):        result = processor.process_file(file_path)        if hasattr(processor, 'get_metadata'):            metadata = processor.get_metadata(file_path)            return result, metadata        return result, None    else:        raise ValueError(f\"ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹: {file_path}\")@require_api_compatibility(DATA_VALIDATOR_API)def validate_with_validator(validator, data: Any):    \"\"\"ä½¿ç”¨éªŒè¯å™¨éªŒè¯æ•°æ®\"\"\"    is_valid = validator.validate(data)    errors = validator.get_errors()    return is_valid, errors# æµ‹è¯•APIå…¼å®¹æ€§print(\"\\nAPIå…¼å®¹æ€§æ£€æŸ¥ç¤ºä¾‹:\")# æµ‹è¯•å¯¹è±¡test_processors = [    (\"TextFileProcessor\", TextFileProcessor(), FILE_PROCESSOR_API),    (\"ImageFileProcessor\", ImageFileProcessor(), FILE_PROCESSOR_API),]test_validators = [    (\"EmailValidator\", EmailValidator(), DATA_VALIDATOR_API),    (\"IncompleteValidator\", IncompleteValidator(), DATA_VALIDATOR_API),]# æ£€æŸ¥æ–‡ä»¶å¤„ç†å™¨print(\"æ–‡ä»¶å¤„ç†å™¨å…¼å®¹æ€§æ£€æŸ¥:\")for name, processor, api_spec in test_processors:    print(f\"\\n{name}:\")    results = APICompatibilityChecker.check_api_compatibility(processor, api_spec)        print(f\"  å…¼å®¹æ€§: {'âœ“ å…¼å®¹' if results['compatible'] else 'âœ— ä¸å…¼å®¹'}\")        if results['errors']:        print(f\"  é”™è¯¯:\")        for error in results['errors']:            print(f\"    - {error}\")        if results['warnings']:        print(f\"  è­¦å‘Š:\")        for warning in results['warnings']:            print(f\"    - {warning}\")        print(f\"  è¯¦ç»†ä¿¡æ¯:\")    for key, value in results['details'].items():        print(f\"    {key}: {value}\")# æ£€æŸ¥éªŒè¯å™¨print(f\"\\néªŒè¯å™¨å…¼å®¹æ€§æ£€æŸ¥:\")for name, validator, api_spec in test_validators:    print(f\"\\n{name}:\")    results = APICompatibilityChecker.check_api_compatibility(validator, api_spec)        print(f\"  å…¼å®¹æ€§: {'âœ“ å…¼å®¹' if results['compatible'] else 'âœ— ä¸å…¼å®¹'}\")        if results['errors']:        print(f\"  é”™è¯¯:\")        for error in results['errors']:            print(f\"    - {error}\")        print(f\"  è¯¦ç»†ä¿¡æ¯:\")    for key, value in results['details'].items():        print(f\"    {key}: {value}\")# æµ‹è¯•è£…é¥°å™¨print(f\"\\nè£…é¥°å™¨æµ‹è¯•:\")# å…¼å®¹çš„å¤„ç†å™¨try:    text_processor = TextFileProcessor()    result = process_with_file_processor(text_processor, \"test.txt\")    print(f\"æ–‡æœ¬å¤„ç†å™¨æµ‹è¯•æˆåŠŸ: {result[0]}\")except Exception as e:    print(f\"æ–‡æœ¬å¤„ç†å™¨æµ‹è¯•å¤±è´¥: {e}\")# ä¸å…¼å®¹çš„å¤„ç†å™¨try:    image_processor = ImageFileProcessor()    result = process_with_file_processor(image_processor, \"test.jpg\")except Exception as e:    print(f\"å›¾åƒå¤„ç†å™¨æµ‹è¯•å¤±è´¥ï¼ˆé¢„æœŸï¼‰: {e}\")# å…¼å®¹çš„éªŒè¯å™¨try:    email_validator = EmailValidator()    result = validate_with_validator(email_validator, \"test@example.com\")    print(f\"é‚®ç®±éªŒè¯å™¨æµ‹è¯•æˆåŠŸ: æœ‰æ•ˆ={result[0]}, é”™è¯¯={result[1]}\")except Exception as e:    print(f\"é‚®ç®±éªŒè¯å™¨æµ‹è¯•å¤±è´¥: {e}\")# ä¸å…¼å®¹çš„éªŒè¯å™¨try:    incomplete_validator = IncompleteValidator()    result = validate_with_validator(incomplete_validator, \"test data\")except Exception as e:    print(f\"ä¸å®Œæ•´éªŒè¯å™¨æµ‹è¯•å¤±è´¥ï¼ˆé¢„æœŸï¼‰: {e}\")é…ç½®ç³»ç»Ÿä¸­çš„å±æ€§æ£€æŸ¥import jsonimport osfrom typing import Any, Dict, List, Union, Optionalfrom dataclasses import dataclass, fieldfrom pathlib import Path# é…ç½®é¡¹å®šä¹‰@dataclassclass ConfigItem:    \"\"\"é…ç½®é¡¹å®šä¹‰\"\"\"    name: str    required: bool = True    default: Any = None    validator: Optional[callable] = None    description: str = \"\"# é…ç½®éªŒè¯å™¨class ConfigValidator:    \"\"\"é…ç½®éªŒè¯å™¨\"\"\"        @staticmethod    def validate_string(value: Any, min_length: int = 0, max_length: int = None) -&gt; bool:        \"\"\"éªŒè¯å­—ç¬¦ä¸²\"\"\"        if not isinstance(value, str):            return False        if len(value) &lt; min_length:            return False        if max_length is not None and len(value) &gt; max_length:            return False        return True        @staticmethod    def validate_integer(value: Any, min_val: int = None, max_val: int = None) -&gt; bool:        \"\"\"éªŒè¯æ•´æ•°\"\"\"        if not isinstance(value, int):            return False        if min_val is not None and value &lt; min_val:            return False        if max_val is not None and value &gt; max_val:            return False        return True        @staticmethod    def validate_list(value: Any, item_type: type = None, min_items: int = 0) -&gt; bool:        \"\"\"éªŒè¯åˆ—è¡¨\"\"\"        if not isinstance(value, list):            return False        if len(value) &lt; min_items:            return False        if item_type is not None:            return all(isinstance(item, item_type) for item in value)        return True        @staticmethod    def validate_email(value: Any) -&gt; bool:        \"\"\"éªŒè¯é‚®ç®±\"\"\"        if not isinstance(value, str):            return False        return '@' in value and '.' in value.split('@')[1]        @staticmethod    def validate_url(value: Any) -&gt; bool:        \"\"\"éªŒè¯URL\"\"\"        if not isinstance(value, str):            return False        return value.startswith(('http://', 'https://'))# é…ç½®ç®¡ç†å™¨class ConfigManager:    \"\"\"é…ç½®ç®¡ç†å™¨\"\"\"        def __init__(self, config_schema: List[ConfigItem]):        self.schema = {item.name: item for item in config_schema}        self.config_data = {}        self.validation_errors = []        def load_from_dict(self, data: Dict[str, Any]) -&gt; bool:        \"\"\"ä»å­—å…¸åŠ è½½é…ç½®\"\"\"        self.config_data = data.copy()        return self.validate_config()        def load_from_file(self, file_path: Union[str, Path]) -&gt; bool:        \"\"\"ä»æ–‡ä»¶åŠ è½½é…ç½®\"\"\"        try:            with open(file_path, 'r', encoding='utf-8') as f:                data = json.load(f)            return self.load_from_dict(data)        except Exception as e:            self.validation_errors.append(f\"åŠ è½½é…ç½®æ–‡ä»¶å¤±è´¥: {e}\")            return False        def load_from_object(self, obj: Any) -&gt; bool:        \"\"\"ä»å¯¹è±¡åŠ è½½é…ç½®\"\"\"        data = {}                # æå–å¯¹è±¡çš„å±æ€§        for item_name in self.schema.keys():            if hasattr(obj, item_name):                data[item_name] = getattr(obj, item_name)                return self.load_from_dict(data)        def validate_config(self) -&gt; bool:        \"\"\"éªŒè¯é…ç½®\"\"\"        self.validation_errors.clear()                # æ£€æŸ¥å¿…éœ€é¡¹        for item_name, item_def in self.schema.items():            if item_def.required and item_name not in self.config_data:                # æ£€æŸ¥æ˜¯å¦æœ‰é»˜è®¤å€¼                if item_def.default is not None:                    self.config_data[item_name] = item_def.default                else:                    self.validation_errors.append(f\"ç¼ºå°‘å¿…éœ€é…ç½®é¡¹: {item_name}\")                    continue                        # éªŒè¯å€¼            if item_name in self.config_data:                value = self.config_data[item_name]                if item_def.validator and not item_def.validator(value):                    self.validation_errors.append(                        f\"é…ç½®é¡¹{item_name}éªŒè¯å¤±è´¥: {value}\"                    )                return len(self.validation_errors) == 0        def get_config(self, name: str, default: Any = None) -&gt; Any:        \"\"\"è·å–é…ç½®å€¼\"\"\"        return self.config_data.get(name, default)        def set_config(self, name: str, value: Any) -&gt; bool:        \"\"\"è®¾ç½®é…ç½®å€¼\"\"\"        if name not in self.schema:            return False                item_def = self.schema[name]        if item_def.validator and not item_def.validator(value):            return False                self.config_data[name] = value        return True        def get_validation_errors(self) -&gt; List[str]:        \"\"\"è·å–éªŒè¯é”™è¯¯\"\"\"        return self.validation_errors.copy()        def get_config_summary(self) -&gt; Dict[str, Any]:        \"\"\"è·å–é…ç½®æ‘˜è¦\"\"\"        summary = {            'total_items': len(self.schema),            'configured_items': len(self.config_data),            'missing_required': [],            'validation_status': len(self.validation_errors) == 0,            'items': {}        }                for item_name, item_def in self.schema.items():            item_info = {                'required': item_def.required,                'has_value': item_name in self.config_data,                'has_default': item_def.default is not None,                'description': item_def.description            }                        if item_name in self.config_data:                item_info['value'] = self.config_data[item_name]            elif item_def.default is not None:                item_info['default_value'] = item_def.default                        if item_def.required and item_name not in self.config_data and item_def.default is None:                summary['missing_required'].append(item_name)                        summary['items'][item_name] = item_info                return summary# åº”ç”¨é…ç½®ç¤ºä¾‹class ApplicationConfig:    \"\"\"åº”ç”¨é…ç½®ç±»\"\"\"        def __init__(self):        # å®šä¹‰é…ç½®æ¨¡å¼        self.schema = [            ConfigItem(                name=\"app_name\",                required=True,                validator=lambda x: ConfigValidator.validate_string(x, min_length=1),                description=\"åº”ç”¨ç¨‹åºåç§°\"            ),            ConfigItem(                name=\"version\",                required=True,                default=\"1.0.0\",                validator=lambda x: ConfigValidator.validate_string(x, min_length=1),                description=\"åº”ç”¨ç¨‹åºç‰ˆæœ¬\"            ),            ConfigItem(                name=\"debug\",                required=False,                default=False,                validator=lambda x: isinstance(x, bool),                description=\"è°ƒè¯•æ¨¡å¼\"            ),            ConfigItem(                name=\"port\",                required=True,                default=8080,                validator=lambda x: ConfigValidator.validate_integer(x, min_val=1, max_val=65535),                description=\"æœåŠ¡ç«¯å£\"            ),            ConfigItem(                name=\"database_url\",                required=True,                validator=lambda x: ConfigValidator.validate_string(x, min_length=10),                description=\"æ•°æ®åº“è¿æ¥URL\"            ),            ConfigItem(                name=\"admin_email\",                required=True,                validator=ConfigValidator.validate_email,                description=\"ç®¡ç†å‘˜é‚®ç®±\"            ),            ConfigItem(                name=\"allowed_hosts\",                required=False,                default=[\"localhost\", \"127.0.0.1\"],                validator=lambda x: ConfigValidator.validate_list(x, str, min_items=1),                description=\"å…è®¸çš„ä¸»æœºåˆ—è¡¨\"            ),            ConfigItem(                name=\"api_url\",                required=False,                validator=ConfigValidator.validate_url,                description=\"APIæœåŠ¡URL\"            )        ]                self.manager = ConfigManager(self.schema)        def load_config(self, source: Union[str, Dict, Any]) -&gt; bool:        \"\"\"åŠ è½½é…ç½®\"\"\"        if isinstance(source, str):            # ä»æ–‡ä»¶åŠ è½½            return self.manager.load_from_file(source)        elif isinstance(source, dict):            # ä»å­—å…¸åŠ è½½            return self.manager.load_from_dict(source)        else:            # ä»å¯¹è±¡åŠ è½½            return self.manager.load_from_object(source)        def get_config_value(self, name: str, default: Any = None) -&gt; Any:        \"\"\"è·å–é…ç½®å€¼\"\"\"        return self.manager.get_config(name, default)        def print_config_status(self):        \"\"\"æ‰“å°é…ç½®çŠ¶æ€\"\"\"        summary = self.manager.get_config_summary()                print(f\"é…ç½®çŠ¶æ€æ‘˜è¦:\")        print(f\"  æ€»é…ç½®é¡¹: {summary['total_items']}\")        print(f\"  å·²é…ç½®é¡¹: {summary['configured_items']}\")        print(f\"  éªŒè¯çŠ¶æ€: {'âœ“ é€šè¿‡' if summary['validation_status'] else 'âœ— å¤±è´¥'}\")                if summary['missing_required']:            print(f\"  ç¼ºå°‘å¿…éœ€é¡¹: {summary['missing_required']}\")                errors = self.manager.get_validation_errors()        if errors:            print(f\"  éªŒè¯é”™è¯¯:\")            for error in errors:                print(f\"    - {error}\")                print(f\"\\nè¯¦ç»†é…ç½®:\")        for item_name, item_info in summary['items'].items():            status = \"âœ“\" if item_info['has_value'] else (\"D\" if item_info['has_default'] else \"âœ—\")            required_mark = \"*\" if item_info['required'] else \" \"                        print(f\"  {status} {required_mark} {item_name}: \", end=\"\")                        if item_info['has_value']:                print(f\"{item_info['value']}\")            elif item_info['has_default']:                print(f\"(é»˜è®¤: {item_info['default_value']})\")            else:                print(\"æœªè®¾ç½®\")                        if item_info['description']:                print(f\"      {item_info['description']}\")# æµ‹è¯•é…ç½®ç³»ç»Ÿprint(\"\\né…ç½®ç³»ç»Ÿç¤ºä¾‹:\")# åˆ›å»ºåº”ç”¨é…ç½®app_config = ApplicationConfig()# æµ‹è¯•ä¸åŒçš„é…ç½®æºtest_configs = [    {        'name': 'å®Œæ•´é…ç½®',        'data': {            \"app_name\": \"My Application\",            \"version\": \"2.0.0\",            \"debug\": True,            \"port\": 9000,            \"database_url\": \"postgresql://user:pass@localhost/db\",            \"admin_email\": \"admin@example.com\",            \"allowed_hosts\": [\"localhost\", \"example.com\"],            \"api_url\": \"https://api.example.com\"        }    },    {        'name': 'æœ€å°é…ç½®',        'data': {            \"app_name\": \"Minimal App\",            \"database_url\": \"sqlite:///app.db\",            \"admin_email\": \"admin@minimal.com\"        }    },    {        'name': 'æ— æ•ˆé…ç½®',        'data': {            \"app_name\": \"\",  # ç©ºå­—ç¬¦ä¸²ï¼Œæ— æ•ˆ            \"port\": 99999,  # ç«¯å£è¶…å‡ºèŒƒå›´            \"admin_email\": \"invalid-email\",  # æ— æ•ˆé‚®ç®±            \"allowed_hosts\": []  # ç©ºåˆ—è¡¨ï¼Œæ— æ•ˆ        }    }]# æµ‹è¯•é…ç½®å¯¹è±¡class ConfigObject:    \"\"\"é…ç½®å¯¹è±¡ç¤ºä¾‹\"\"\"    def __init__(self):        self.app_name = \"Object Config App\"        self.database_url = \"mysql://user:pass@localhost/db\"        self.admin_email = \"admin@object.com\"        self.debug = True        self.extra_setting = \"è¿™ä¸ªä¸åœ¨schemaä¸­\"  # è¿™ä¸ªä¼šè¢«å¿½ç•¥# æ·»åŠ å¯¹è±¡é…ç½®æµ‹è¯•test_configs.append({    'name': 'å¯¹è±¡é…ç½®',    'data': ConfigObject()})# æµ‹è¯•æ‰€æœ‰é…ç½®for test_config in test_configs:    print(f\"\\n{'='*50}\")    print(f\"æµ‹è¯•: {test_config['name']}\")    print(f\"{'='*50}\")        # åŠ è½½é…ç½®    success = app_config.load_config(test_config['data'])    print(f\"åŠ è½½ç»“æœ: {'æˆåŠŸ' if success else 'å¤±è´¥'}\")        # æ‰“å°é…ç½®çŠ¶æ€    app_config.print_config_status()        # å¦‚æœåŠ è½½æˆåŠŸï¼Œå±•ç¤ºä¸€äº›é…ç½®å€¼çš„ä½¿ç”¨    if success:        print(f\"\\né…ç½®ä½¿ç”¨ç¤ºä¾‹:\")        print(f\"  åº”ç”¨åç§°: {app_config.get_config_value('app_name')}\")        print(f\"  è¿è¡Œç«¯å£: {app_config.get_config_value('port')}\")        print(f\"  è°ƒè¯•æ¨¡å¼: {app_config.get_config_value('debug')}\")        print(f\"  å…è®¸ä¸»æœº: {app_config.get_config_value('allowed_hosts')}\")# åŠ¨æ€é…ç½®æ£€æŸ¥ç¤ºä¾‹print(f\"\\n{'='*50}\")print(f\"åŠ¨æ€é…ç½®æ£€æŸ¥ç¤ºä¾‹\")print(f\"{'='*50}\")# æ£€æŸ¥è¿è¡Œæ—¶å¯¹è±¡æ˜¯å¦å…·æœ‰é…ç½®æ‰€éœ€çš„å±æ€§class RuntimeObject:    \"\"\"è¿è¡Œæ—¶å¯¹è±¡\"\"\"    def __init__(self):        self.name = \"Runtime Object\"        self.settings = {\"key\": \"value\"}        def get_status(self):        return \"running\"runtime_obj = RuntimeObject()# æ£€æŸ¥å¯¹è±¡æ˜¯å¦å…·æœ‰é…ç½®ç›¸å…³çš„å±æ€§config_attributes = ['name', 'settings', 'version', 'config']print(f\"è¿è¡Œæ—¶å¯¹è±¡å±æ€§æ£€æŸ¥:\")for attr in config_attributes:    has_attr = hasattr(runtime_obj, attr)    print(f\"  {attr}: {'âœ“ å­˜åœ¨' if has_attr else 'âœ— ä¸å­˜åœ¨'}\")        if has_attr:        value = getattr(runtime_obj, attr)        print(f\"    å€¼: {value} (ç±»å‹: {type(value).__name__})\")# å®‰å…¨çš„é…ç½®å±æ€§è®¿é—®print(f\"\\nå®‰å…¨çš„é…ç½®å±æ€§è®¿é—®:\")for attr in config_attributes:    value = getattr(runtime_obj, attr, \"æœªè®¾ç½®\")    print(f\"  {attr}: {value}\")âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µé”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ# å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ# é”™è¯¯1ï¼šå±æ€§åæ‹¼å†™é”™è¯¯class SpellingErrorDemo:    def __init__(self):        self.correct_name = \"æ­£ç¡®çš„å±æ€§å\"obj = SpellingErrorDemo()# é”™è¯¯çš„æ£€æŸ¥print(\"æ‹¼å†™é”™è¯¯ç¤ºä¾‹:\")print(f\"æ£€æŸ¥'corect_name': {hasattr(obj, 'corect_name')}\")  # Falseï¼Œæ‹¼å†™é”™è¯¯print(f\"æ£€æŸ¥'correct_name': {hasattr(obj, 'correct_name')}\")  # Trueï¼Œæ­£ç¡®æ‹¼å†™# æœ€ä½³å®è·µï¼šä½¿ç”¨å¸¸é‡å®šä¹‰å±æ€§åclass AttributeNames:    \"\"\"å±æ€§åå¸¸é‡\"\"\"    CORRECT_NAME = 'correct_name'    VALUE = 'value'    STATUS = 'status'print(f\"ä½¿ç”¨å¸¸é‡æ£€æŸ¥: {hasattr(obj, AttributeNames.CORRECT_NAME)}\")# é”™è¯¯2ï¼šå¿½ç•¥å¼‚å¸¸æƒ…å†µclass ProblematicClass:    \"\"\"æœ‰é—®é¢˜çš„ç±»\"\"\"        @property    def problematic_property(self):        \"\"\"ä¼šæŠ›å‡ºå¼‚å¸¸çš„å±æ€§\"\"\"        raise RuntimeError(\"å±æ€§è®¿é—®å¤±è´¥\")        def __getattr__(self, name):        \"\"\"åŠ¨æ€å±æ€§è®¿é—®\"\"\"        if name == 'dynamic_error':            raise ValueError(\"åŠ¨æ€å±æ€§é”™è¯¯\")        raise AttributeError(f\"æ²¡æœ‰å±æ€§ {name}\")problematic_obj = ProblematicClass()print(\"\\nå¼‚å¸¸å¤„ç†ç¤ºä¾‹:\")# hasatträ¼šæ•è·AttributeErrorï¼Œä½†ä¸ä¼šæ•è·å…¶ä»–å¼‚å¸¸try:    result = hasattr(problematic_obj, 'problematic_property')    print(f\"æ£€æŸ¥problematic_property: {result}\")  # å¯èƒ½ä¼šæŠ›å‡ºRuntimeErrorexcept Exception as e:    print(f\"æ£€æŸ¥æ—¶å‡ºé”™: {e}\")# å®‰å…¨çš„å±æ€§æ£€æŸ¥def safe_hasattr(obj, attr_name):    \"\"\"å®‰å…¨çš„å±æ€§æ£€æŸ¥\"\"\"    try:        return hasattr(obj, attr_name)    except Exception as e:        print(f\"æ£€æŸ¥å±æ€§{attr_name}æ—¶å‡ºé”™: {e}\")        return Falseprint(f\"å®‰å…¨æ£€æŸ¥problematic_property: {safe_hasattr(problematic_obj, 'problematic_property')}\")print(f\"å®‰å…¨æ£€æŸ¥dynamic_error: {safe_hasattr(problematic_obj, 'dynamic_error')}\")print(f\"å®‰å…¨æ£€æŸ¥normal_attr: {safe_hasattr(problematic_obj, 'normal_attr')}\")# é”™è¯¯3ï¼šæ€§èƒ½é—®é¢˜import timeclass PerformanceTestClass:    \"\"\"æ€§èƒ½æµ‹è¯•ç±»\"\"\"        def __init__(self):        # åˆ›å»ºå¤§é‡å±æ€§        for i in range(1000):            setattr(self, f'attr_{i}', i)        def __getattr__(self, name):        \"\"\"æ¨¡æ‹Ÿæ…¢é€Ÿå±æ€§è®¿é—®\"\"\"        time.sleep(0.001)  # æ¨¡æ‹Ÿ1mså»¶è¿Ÿ        raise AttributeError(f\"æ²¡æœ‰å±æ€§ {name}\")perf_obj = PerformanceTestClass()# æ€§èƒ½å¯¹æ¯”print(\"\\næ€§èƒ½æµ‹è¯•:\")# æµ‹è¯•å­˜åœ¨çš„å±æ€§start_time = time.time()for i in range(100):    hasattr(perf_obj, 'attr_500')existing_time = time.time() - start_time# æµ‹è¯•ä¸å­˜åœ¨çš„å±æ€§start_time = time.time()for i in range(100):    hasattr(perf_obj, 'nonexistent_attr')nonexistent_time = time.time() - start_timeprint(f\"æ£€æŸ¥å­˜åœ¨å±æ€§100æ¬¡è€—æ—¶: {existing_time:.4f}ç§’\")print(f\"æ£€æŸ¥ä¸å­˜åœ¨å±æ€§100æ¬¡è€—æ—¶: {nonexistent_time:.4f}ç§’\")# æœ€ä½³å®è·µï¼šç¼“å­˜å±æ€§æ£€æŸ¥ç»“æœclass CachedAttributeChecker:    \"\"\"ç¼“å­˜å±æ€§æ£€æŸ¥å™¨\"\"\"        def __init__(self):        self._attr_cache = {}        def cached_hasattr(self, obj, attr_name):        \"\"\"ç¼“å­˜çš„å±æ€§æ£€æŸ¥\"\"\"        obj_id = id(obj)        cache_key = (obj_id, attr_name)                if cache_key not in self._attr_cache:            self._attr_cache[cache_key] = hasattr(obj, attr_name)                return self._attr_cache[cache_key]        def clear_cache(self):        \"\"\"æ¸…é™¤ç¼“å­˜\"\"\"        self._attr_cache.clear()checker = CachedAttributeChecker()# æµ‹è¯•ç¼“å­˜æ€§èƒ½start_time = time.time()for i in range(100):    checker.cached_hasattr(perf_obj, 'nonexistent_attr')cached_time = time.time() - start_timeprint(f\"ç¼“å­˜æ£€æŸ¥ä¸å­˜åœ¨å±æ€§100æ¬¡è€—æ—¶: {cached_time:.4f}ç§’\")print(f\"æ€§èƒ½æå‡: {nonexistent_time/cached_time:.1f}å€\")ç±»å‹å®‰å…¨å’Œæœ€ä½³å®è·µfrom typing import Any, Optional, Type, Union# ç±»å‹å®‰å…¨çš„å±æ€§æ£€æŸ¥class TypeSafeAttributeChecker:    \"\"\"ç±»å‹å®‰å…¨çš„å±æ€§æ£€æŸ¥å™¨\"\"\"        @staticmethod    def has_attribute_of_type(obj: Any, attr_name: str, expected_type: Type) -&gt; bool:        \"\"\"æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æŒ‡å®šç±»å‹çš„å±æ€§\"\"\"        if not hasattr(obj, attr_name):            return False                attr_value = getattr(obj, attr_name)        return isinstance(attr_value, expected_type)        @staticmethod    def has_callable_attribute(obj: Any, attr_name: str) -&gt; bool:        \"\"\"æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰å¯è°ƒç”¨çš„å±æ€§\"\"\"        if not hasattr(obj, attr_name):            return False                attr_value = getattr(obj, attr_name)        return callable(attr_value)        @staticmethod    def get_attribute_type(obj: Any, attr_name: str) -&gt; Optional[Type]:        \"\"\"è·å–å±æ€§çš„ç±»å‹\"\"\"        if not hasattr(obj, attr_name):            return None                attr_value = getattr(obj, attr_name)        return type(attr_value)        @staticmethod    def check_interface_compliance(obj: Any, interface_spec: dict) -&gt; tuple[bool, list]:        \"\"\"æ£€æŸ¥å¯¹è±¡æ˜¯å¦ç¬¦åˆæ¥å£è§„èŒƒ\"\"\"        errors = []                for attr_name, attr_spec in interface_spec.items():            if not hasattr(obj, attr_name):                errors.append(f\"ç¼ºå°‘å±æ€§: {attr_name}\")                continue                        attr_value = getattr(obj, attr_name)                        # æ£€æŸ¥ç±»å‹            if 'type' in attr_spec:                expected_type = attr_spec['type']                if not isinstance(attr_value, expected_type):                    errors.append(                        f\"å±æ€§{attr_name}ç±»å‹é”™è¯¯: æœŸæœ›{expected_type.__name__}, \"                        f\"å®é™…{type(attr_value).__name__}\"                    )                        # æ£€æŸ¥æ˜¯å¦å¯è°ƒç”¨            if attr_spec.get('callable', False):                if not callable(attr_value):                    errors.append(f\"å±æ€§{attr_name}å¿…é¡»æ˜¯å¯è°ƒç”¨çš„\")                return len(errors) == 0, errors# æµ‹è¯•ç±»å‹å®‰å…¨æ£€æŸ¥class TestClass:    \"\"\"æµ‹è¯•ç±»\"\"\"        def __init__(self):        self.name = \"æµ‹è¯•å¯¹è±¡\"        self.value = 42        self.items = [1, 2, 3]        self.config = {\"debug\": True}        def get_info(self):        return f\"{self.name}: {self.value}\"        def process(self, data):        return f\"å¤„ç†æ•°æ®: {data}\"test_obj = TestClass()checker = TypeSafeAttributeChecker()print(\"\\nç±»å‹å®‰å…¨æ£€æŸ¥ç¤ºä¾‹:\")# åŸºæœ¬ç±»å‹æ£€æŸ¥print(f\"nameæ˜¯å­—ç¬¦ä¸²: {checker.has_attribute_of_type(test_obj, 'name', str)}\")print(f\"valueæ˜¯æ•´æ•°: {checker.has_attribute_of_type(test_obj, 'value', int)}\")print(f\"itemsæ˜¯åˆ—è¡¨: {checker.has_attribute_of_type(test_obj, 'items', list)}\")print(f\"configæ˜¯å­—å…¸: {checker.has_attribute_of_type(test_obj, 'config', dict)}\")print(f\"nameæ˜¯æ•´æ•°: {checker.has_attribute_of_type(test_obj, 'name', int)}\")# å¯è°ƒç”¨æ£€æŸ¥print(f\"\\nget_infoæ˜¯å¯è°ƒç”¨çš„: {checker.has_callable_attribute(test_obj, 'get_info')}\")print(f\"processæ˜¯å¯è°ƒç”¨çš„: {checker.has_callable_attribute(test_obj, 'process')}\")print(f\"nameæ˜¯å¯è°ƒç”¨çš„: {checker.has_callable_attribute(test_obj, 'name')}\")# è·å–å±æ€§ç±»å‹print(f\"\\nå±æ€§ç±»å‹:\")for attr in ['name', 'value', 'items', 'config', 'get_info']:    attr_type = checker.get_attribute_type(test_obj, attr)    print(f\"  {attr}: {attr_type.__name__ if attr_type else 'None'}\")# æ¥å£è§„èŒƒæ£€æŸ¥interface_spec = {    'name': {'type': str},    'value': {'type': int},    'items': {'type': list},    'get_info': {'callable': True},    'process': {'callable': True},    'missing_attr': {'type': str},  # è¿™ä¸ªä¸å­˜åœ¨    'config': {'type': str}  # ç±»å‹ä¸åŒ¹é…}is_compliant, errors = checker.check_interface_compliance(test_obj, interface_spec)print(f\"\\næ¥å£è§„èŒƒæ£€æŸ¥:\")print(f\"  ç¬¦åˆè§„èŒƒ: {is_compliant}\")if errors:    print(f\"  é”™è¯¯:\")    for error in errors:        print(f\"    - {error}\")# å±æ€§æ£€æŸ¥è£…é¥°å™¨def require_attributes(*required_attrs):    \"\"\"è¦æ±‚å¯¹è±¡å…·æœ‰æŒ‡å®šå±æ€§çš„è£…é¥°å™¨\"\"\"    def decorator(func):        def wrapper(obj, *args, **kwargs):            missing_attrs = []            for attr in required_attrs:                if not hasattr(obj, attr):                    missing_attrs.append(attr)                        if missing_attrs:                raise AttributeError(                    f\"å¯¹è±¡ç¼ºå°‘å¿…éœ€å±æ€§: {missing_attrs}\"                )                        return func(obj, *args, **kwargs)        return wrapper    return decorator@require_attributes('name', 'value', 'get_info')def process_object(obj):    \"\"\"å¤„ç†å¯¹è±¡\"\"\"    info = obj.get_info()    return f\"å¤„ç†ç»“æœ: {info}, å€¼: {obj.value}\"# æµ‹è¯•è£…é¥°å™¨print(f\"\\nè£…é¥°å™¨æµ‹è¯•:\")try:    result = process_object(test_obj)    print(f\"æˆåŠŸ: {result}\")except AttributeError as e:    print(f\"å¤±è´¥: {e}\")# æµ‹è¯•ç¼ºå°‘å±æ€§çš„å¯¹è±¡class IncompleteObject:    def __init__(self):        self.name = \"ä¸å®Œæ•´å¯¹è±¡\"        # ç¼ºå°‘valueå’Œget_infoincomplete_obj = IncompleteObject()try:    result = process_object(incomplete_obj)except AttributeError as e:    print(f\"é¢„æœŸå¤±è´¥: {e}\")ğŸš€ å®é™…åº”ç”¨åœºæ™¯Webæ¡†æ¶ä¸­çš„ä¸­é—´ä»¶æ£€æŸ¥# Webæ¡†æ¶ä¸­é—´ä»¶ç¤ºä¾‹class MiddlewareManager:    \"\"\"ä¸­é—´ä»¶ç®¡ç†å™¨\"\"\"        def __init__(self):        self.middlewares = []        def add_middleware(self, middleware):        \"\"\"æ·»åŠ ä¸­é—´ä»¶\"\"\"        # æ£€æŸ¥ä¸­é—´ä»¶æ˜¯å¦å®ç°äº†å¿…éœ€çš„æ–¹æ³•        required_methods = ['process_request', 'process_response']        optional_methods = ['process_exception', 'process_view']                missing_methods = []        for method in required_methods:            if not hasattr(middleware, method):                missing_methods.append(method)            elif not callable(getattr(middleware, method)):                missing_methods.append(f\"{method}(ä¸å¯è°ƒç”¨)\")                if missing_methods:            raise ValueError(                f\"ä¸­é—´ä»¶{type(middleware).__name__}ç¼ºå°‘å¿…éœ€æ–¹æ³•: {missing_methods}\"            )                # æ£€æŸ¥å¯é€‰æ–¹æ³•        available_optional = []        for method in optional_methods:            if hasattr(middleware, method) and callable(getattr(middleware, method)):                available_optional.append(method)                self.middlewares.append({            'instance': middleware,            'name': type(middleware).__name__,            'optional_methods': available_optional        })                print(f\"æ·»åŠ ä¸­é—´ä»¶: {type(middleware).__name__}\")        if available_optional:            print(f\"  å¯é€‰æ–¹æ³•: {available_optional}\")        def process_request(self, request):        \"\"\"å¤„ç†è¯·æ±‚\"\"\"        for middleware_info in self.middlewares:            middleware = middleware_info['instance']            response = middleware.process_request(request)            if response is not None:                return response        return None        def process_response(self, request, response):        \"\"\"å¤„ç†å“åº”\"\"\"        for middleware_info in reversed(self.middlewares):            middleware = middleware_info['instance']            response = middleware.process_response(request, response)        return response# ä¸­é—´ä»¶ç¤ºä¾‹class AuthenticationMiddleware:    \"\"\"è®¤è¯ä¸­é—´ä»¶\"\"\"        def process_request(self, request):        \"\"\"å¤„ç†è¯·æ±‚\"\"\"        if not hasattr(request, 'user'):            request.user = None        return None        def process_response(self, request, response):        \"\"\"å¤„ç†å“åº”\"\"\"        return responseclass LoggingMiddleware:    \"\"\"æ—¥å¿—ä¸­é—´ä»¶\"\"\"        def process_request(self, request):        \"\"\"å¤„ç†è¯·æ±‚\"\"\"        print(f\"è¯·æ±‚: {request.path}\")        return None        def process_response(self, request, response):        \"\"\"å¤„ç†å“åº”\"\"\"        print(f\"å“åº”: {response.status_code}\")        return response        def process_exception(self, request, exception):        \"\"\"å¤„ç†å¼‚å¸¸\"\"\"        print(f\"å¼‚å¸¸: {exception}\")        return Noneclass IncompleteMiddleware:    \"\"\"ä¸å®Œæ•´çš„ä¸­é—´ä»¶\"\"\"        def process_request(self, request):        return None        # ç¼ºå°‘process_responseæ–¹æ³•# æµ‹è¯•ä¸­é—´ä»¶ç®¡ç†å™¨print(\"\\nä¸­é—´ä»¶ç®¡ç†å™¨ç¤ºä¾‹:\")manager = MiddlewareManager()# æ·»åŠ æœ‰æ•ˆçš„ä¸­é—´ä»¶try:    manager.add_middleware(AuthenticationMiddleware())    manager.add_middleware(LoggingMiddleware())except ValueError as e:    print(f\"æ·»åŠ ä¸­é—´ä»¶å¤±è´¥: {e}\")# å°è¯•æ·»åŠ æ— æ•ˆçš„ä¸­é—´ä»¶try:    manager.add_middleware(IncompleteMiddleware())except ValueError as e:    print(f\"æ·»åŠ ä¸å®Œæ•´ä¸­é—´ä»¶å¤±è´¥: {e}\")ğŸ“š ç›¸å…³å‡½æ•°å’Œæ¨¡å—å†…ç½®å‡½æ•°  getattr() - è·å–å¯¹è±¡å±æ€§å€¼  setattr() - è®¾ç½®å¯¹è±¡å±æ€§å€¼  delattr() - åˆ é™¤å¯¹è±¡å±æ€§  dir() - åˆ—å‡ºå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•  vars() - è¿”å›å¯¹è±¡çš„__dict__å±æ€§  callable() - æ£€æŸ¥å¯¹è±¡æ˜¯å¦å¯è°ƒç”¨  isinstance() - æ£€æŸ¥å¯¹è±¡ç±»å‹  issubclass() - æ£€æŸ¥ç±»ç»§æ‰¿å…³ç³»æ ‡å‡†åº“æ¨¡å—  inspect - å¯¹è±¡æ£€æŸ¥å’Œåå°„  types - åŠ¨æ€ç±»å‹åˆ›å»ºå’Œåç§°  abc - æŠ½è±¡åŸºç±»  typing - ç±»å‹æç¤ºæ”¯æŒ  dataclasses - æ•°æ®ç±»è£…é¥°å™¨  attrs - ç¬¬ä¸‰æ–¹å±æ€§åº“ç¬¬ä¸‰æ–¹åº“  pydantic - æ•°æ®éªŒè¯å’Œè®¾ç½®ç®¡ç†  marshmallow - å¯¹è±¡åºåˆ—åŒ–/ååºåˆ—åŒ–  cerberus - è½»é‡çº§æ•°æ®éªŒè¯ğŸ“– æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£          Built-in Functions - hasattr()      Data Model - Attribute Access        ç›¸å…³æ¦‚å¿µ          åå°„å’Œå†…çœ      åŠ¨æ€ç¼–ç¨‹      é¸­å­ç±»å‹      å±æ€§æè¿°ç¬¦        è®¾è®¡æ¨¡å¼          é€‚é…å™¨æ¨¡å¼      è£…é¥°å™¨æ¨¡å¼      ç­–ç•¥æ¨¡å¼      æ’ä»¶æ¶æ„      ğŸ·ï¸ æ ‡ç­¾å±æ€§æ£€æŸ¥ åå°„ å¯¹è±¡æ£€æŸ¥ åŠ¨æ€ç¼–ç¨‹ ç±»å‹å®‰å…¨ APIå…¼å®¹æ€§ ä¸­é—´ä»¶ æ’ä»¶ç³»ç»Ÿ é…ç½®ç®¡ç† é”™è¯¯å¤„ç†",
        "url": "/docs/builtins/hasattr/",
        "category": "builtins",
        "tags": ["å±æ€§æ£€æŸ¥","åå°„","å¯¹è±¡æ£€æŸ¥","åŠ¨æ€ç¼–ç¨‹"]
      }
      
    
  
    
      ,
      {
        "title": "help() - å¸®åŠ©ä¿¡æ¯å‡½æ•°",
        "content": "help() - å¸®åŠ©ä¿¡æ¯å‡½æ•°ğŸ“ æ¦‚è¿°help() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºæ˜¾ç¤ºå¯¹è±¡çš„å¸®åŠ©ä¿¡æ¯å’Œæ–‡æ¡£ã€‚å®ƒæ˜¯Pythonäº¤äº’å¼å¸®åŠ©ç³»ç»Ÿçš„å…¥å£ç‚¹ï¼Œå¯ä»¥æ˜¾ç¤ºæ¨¡å—ã€å‡½æ•°ã€ç±»ã€æ–¹æ³•ç­‰çš„æ–‡æ¡£å­—ç¬¦ä¸²å’Œä½¿ç”¨è¯´æ˜ã€‚å½“ä¸å¸¦å‚æ•°è°ƒç”¨æ—¶ï¼Œhelp() ä¼šå¯åŠ¨äº¤äº’å¼å¸®åŠ©ç³»ç»Ÿã€‚è¿™ä¸ªå‡½æ•°å¯¹äºå­¦ä¹ Pythonå’Œæ¢ç´¢æœªçŸ¥çš„æ¨¡å—ã€å‡½æ•°éå¸¸æœ‰ç”¨ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡help()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œç‰¹æ€§  å­¦ä¼šæŸ¥çœ‹ä¸åŒç±»å‹å¯¹è±¡çš„å¸®åŠ©ä¿¡æ¯  ç†è§£Pythonæ–‡æ¡£å­—ç¬¦ä¸²çš„é‡è¦æ€§  æŒæ¡äº¤äº’å¼å¸®åŠ©ç³»ç»Ÿçš„ä½¿ç”¨  å­¦ä¼šç¼–å†™è‰¯å¥½çš„æ–‡æ¡£å­—ç¬¦ä¸²ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  å‡½æ•°å’Œç±»çš„åŸºæœ¬æ¦‚å¿µ  æ¨¡å—å’ŒåŒ…çš„ä½¿ç”¨  æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆdocstringï¼‰çš„æ¦‚å¿µğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µhelp() å‡½æ•°æ˜¯Pythonå†…ç½®çš„å¸®åŠ©ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ï¼š  æ˜¾ç¤ºå¯¹è±¡æ–‡æ¡£: æ˜¾ç¤ºå‡½æ•°ã€ç±»ã€æ¨¡å—çš„æ–‡æ¡£å­—ç¬¦ä¸²  äº¤äº’å¼å¸®åŠ©: å¯åŠ¨äº¤äº’å¼å¸®åŠ©æµè§ˆå™¨  å†…çœåŠŸèƒ½: æä¾›å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯  å­¦ä¹ å·¥å…·: å¸®åŠ©å¼€å‘è€…äº†è§£æœªçŸ¥çš„APIè¯­æ³•æ ¼å¼help([object])å‚æ•°è¯´æ˜  object (å¯é€‰): è¦è·å–å¸®åŠ©ä¿¡æ¯çš„å¯¹è±¡          å¦‚æœæä¾›å¯¹è±¡ï¼Œæ˜¾ç¤ºè¯¥å¯¹è±¡çš„å¸®åŠ©ä¿¡æ¯      å¦‚æœä¸æä¾›å‚æ•°ï¼Œå¯åŠ¨äº¤äº’å¼å¸®åŠ©ç³»ç»Ÿ      è¿”å›å€¼  ç±»å‹: None  å‰¯ä½œç”¨: åœ¨æ ‡å‡†è¾“å‡ºä¸­æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ğŸ’¡ ä»£ç ç¤ºä¾‹åŸºæœ¬ç”¨æ³•# åŸºæœ¬ç”¨æ³•ç¤ºä¾‹print(\"help()å‡½æ•°åŸºæœ¬ç”¨æ³•:\")# 1. æŸ¥çœ‹å†…ç½®å‡½æ•°çš„å¸®åŠ©print(\"\\n1. æŸ¥çœ‹å†…ç½®å‡½æ•°å¸®åŠ©:\")print(\"help(len) çš„è¾“å‡º:\")help(len)print(\"\\n\" + \"=\"*50)print(\"help(print) çš„è¾“å‡º:\")help(print)print(\"\\n\" + \"=\"*50)print(\"help(range) çš„è¾“å‡º:\")help(range)# 2. æŸ¥çœ‹å†…ç½®ç±»å‹çš„å¸®åŠ©print(\"\\n2. æŸ¥çœ‹å†…ç½®ç±»å‹å¸®åŠ©:\")print(\"help(str) çš„è¾“å‡º:\")help(str)print(\"\\n\" + \"=\"*50)print(\"help(list) çš„è¾“å‡º:\")help(list)print(\"\\n\" + \"=\"*50)print(\"help(dict) çš„è¾“å‡º:\")help(dict)# 3. æŸ¥çœ‹æ¨¡å—çš„å¸®åŠ©print(\"\\n3. æŸ¥çœ‹æ¨¡å—å¸®åŠ©:\")import mathprint(\"help(math) çš„è¾“å‡º:\")help(math)print(\"\\n\" + \"=\"*50)import osprint(\"help(os) çš„è¾“å‡º (éƒ¨åˆ†):\")help(os.path)  # æŸ¥çœ‹os.pathå­æ¨¡å—# 4. æŸ¥çœ‹ç‰¹å®šæ–¹æ³•çš„å¸®åŠ©print(\"\\n4. æŸ¥çœ‹ç‰¹å®šæ–¹æ³•å¸®åŠ©:\")print(\"help(str.split) çš„è¾“å‡º:\")help(str.split)print(\"\\n\" + \"=\"*50)print(\"help(list.append) çš„è¾“å‡º:\")help(list.append)print(\"\\n\" + \"=\"*50)print(\"help(dict.get) çš„è¾“å‡º:\")help(dict.get)è‡ªå®šä¹‰å‡½æ•°å’Œç±»çš„å¸®åŠ©# è‡ªå®šä¹‰å‡½æ•°å’Œç±»çš„å¸®åŠ©ç¤ºä¾‹print(\"\\nè‡ªå®šä¹‰å‡½æ•°å’Œç±»çš„å¸®åŠ©ç¤ºä¾‹:\")# 1. å¸¦æ–‡æ¡£å­—ç¬¦ä¸²çš„å‡½æ•°def calculate_area(length, width):    \"\"\"    è®¡ç®—çŸ©å½¢é¢ç§¯çš„å‡½æ•°ã€‚        è¿™ä¸ªå‡½æ•°æ¥å—é•¿åº¦å’Œå®½åº¦ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›çŸ©å½¢çš„é¢ç§¯ã€‚        å‚æ•°:        length (float): çŸ©å½¢çš„é•¿åº¦ï¼Œå¿…é¡»ä¸ºæ­£æ•°        width (float): çŸ©å½¢çš„å®½åº¦ï¼Œå¿…é¡»ä¸ºæ­£æ•°        è¿”å›:        float: çŸ©å½¢çš„é¢ç§¯        å¼‚å¸¸:        ValueError: å½“é•¿åº¦æˆ–å®½åº¦ä¸æ˜¯æ­£æ•°æ—¶æŠ›å‡º        ç¤ºä¾‹:        &gt;&gt;&gt; calculate_area(5, 3)        15.0        &gt;&gt;&gt; calculate_area(2.5, 4.0)        10.0        æ³¨æ„:        æ­¤å‡½æ•°å‡è®¾è¾“å…¥çš„å•ä½æ˜¯ä¸€è‡´çš„ã€‚    \"\"\"    if length &lt;= 0 or width &lt;= 0:        raise ValueError(\"é•¿åº¦å’Œå®½åº¦å¿…é¡»ä¸ºæ­£æ•°\")        return length * widthprint(\"\\n1. å¸¦æ–‡æ¡£å­—ç¬¦ä¸²çš„å‡½æ•°å¸®åŠ©:\")help(calculate_area)# 2. æ²¡æœ‰æ–‡æ¡£å­—ç¬¦ä¸²çš„å‡½æ•°def simple_add(a, b):    return a + bprint(\"\\n\" + \"=\"*50)print(\"2. æ²¡æœ‰æ–‡æ¡£å­—ç¬¦ä¸²çš„å‡½æ•°å¸®åŠ©:\")help(simple_add)# 3. å¸¦æ–‡æ¡£å­—ç¬¦ä¸²çš„ç±»class Calculator:    \"\"\"    ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨ç±»ã€‚        è¿™ä¸ªç±»æä¾›åŸºæœ¬çš„æ•°å­¦è¿ç®—åŠŸèƒ½ï¼ŒåŒ…æ‹¬åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•ã€‚    æ‰€æœ‰çš„è¿ç®—éƒ½ä¼šè®°å½•åœ¨å†å²è®°å½•ä¸­ã€‚        å±æ€§:        history (list): å­˜å‚¨è¿ç®—å†å²çš„åˆ—è¡¨        precision (int): è®¡ç®—ç»“æœçš„ç²¾åº¦ï¼Œé»˜è®¤ä¸º2ä½å°æ•°        ç¤ºä¾‹:        &gt;&gt;&gt; calc = Calculator()        &gt;&gt;&gt; result = calc.add(5, 3)        &gt;&gt;&gt; print(result)        8.0        &gt;&gt;&gt; print(calc.history)        ['5.0 + 3.0 = 8.0']    \"\"\"        def __init__(self, precision=2):        \"\"\"        åˆå§‹åŒ–è®¡ç®—å™¨ã€‚                å‚æ•°:            precision (int): ç»“æœç²¾åº¦ï¼Œé»˜è®¤ä¸º2ä½å°æ•°        \"\"\"        self.history = []        self.precision = precision        def add(self, a, b):        \"\"\"        æ‰§è¡ŒåŠ æ³•è¿ç®—ã€‚                å‚æ•°:            a (float): ç¬¬ä¸€ä¸ªåŠ æ•°            b (float): ç¬¬äºŒä¸ªåŠ æ•°                è¿”å›:            float: åŠ æ³•ç»“æœ        \"\"\"        result = round(float(a) + float(b), self.precision)        self.history.append(f\"{a} + {b} = {result}\")        return result        def subtract(self, a, b):        \"\"\"        æ‰§è¡Œå‡æ³•è¿ç®—ã€‚                å‚æ•°:            a (float): è¢«å‡æ•°            b (float): å‡æ•°                è¿”å›:            float: å‡æ³•ç»“æœ        \"\"\"        result = round(float(a) - float(b), self.precision)        self.history.append(f\"{a} - {b} = {result}\")        return result        def multiply(self, a, b):        \"\"\"        æ‰§è¡Œä¹˜æ³•è¿ç®—ã€‚                å‚æ•°:            a (float): ç¬¬ä¸€ä¸ªä¹˜æ•°            b (float): ç¬¬äºŒä¸ªä¹˜æ•°                è¿”å›:            float: ä¹˜æ³•ç»“æœ        \"\"\"        result = round(float(a) * float(b), self.precision)        self.history.append(f\"{a} * {b} = {result}\")        return result        def divide(self, a, b):        \"\"\"        æ‰§è¡Œé™¤æ³•è¿ç®—ã€‚                å‚æ•°:            a (float): è¢«é™¤æ•°            b (float): é™¤æ•°                è¿”å›:            float: é™¤æ³•ç»“æœ                å¼‚å¸¸:            ZeroDivisionError: å½“é™¤æ•°ä¸º0æ—¶æŠ›å‡º        \"\"\"        if b == 0:            raise ZeroDivisionError(\"é™¤æ•°ä¸èƒ½ä¸ºé›¶\")                result = round(float(a) / float(b), self.precision)        self.history.append(f\"{a} / {b} = {result}\")        return result        def get_history(self):        \"\"\"        è·å–è¿ç®—å†å²è®°å½•ã€‚                è¿”å›:            list: åŒ…å«æ‰€æœ‰è¿ç®—è®°å½•çš„åˆ—è¡¨        \"\"\"        return self.history.copy()        def clear_history(self):        \"\"\"        æ¸…ç©ºè¿ç®—å†å²è®°å½•ã€‚        \"\"\"        self.history.clear()print(\"\\n\" + \"=\"*50)print(\"3. å¸¦æ–‡æ¡£å­—ç¬¦ä¸²çš„ç±»å¸®åŠ©:\")help(Calculator)print(\"\\n\" + \"=\"*50)print(\"4. ç±»æ–¹æ³•çš„å¸®åŠ©:\")help(Calculator.add)print(\"\\n\" + \"=\"*50)print(\"5. å®ä¾‹æ–¹æ³•çš„å¸®åŠ©:\")calc = Calculator()help(calc.multiply)# 4. å¤æ‚ç±»çš„ç¤ºä¾‹class DataProcessor:    \"\"\"    æ•°æ®å¤„ç†å™¨ç±»ã€‚        è¿™ä¸ªç±»æä¾›äº†å¤šç§æ•°æ®å¤„ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•°æ®æ¸…æ´—ã€è½¬æ¢å’Œåˆ†æã€‚    æ”¯æŒå¤šç§æ•°æ®æ ¼å¼ï¼Œå¹¶æä¾›çµæ´»çš„é…ç½®é€‰é¡¹ã€‚        ç±»å±æ€§:        SUPPORTED_FORMATS (list): æ”¯æŒçš„æ•°æ®æ ¼å¼åˆ—è¡¨        DEFAULT_ENCODING (str): é»˜è®¤å­—ç¬¦ç¼–ç         å®ä¾‹å±æ€§:        data (list): å­˜å‚¨çš„æ•°æ®        config (dict): å¤„ç†é…ç½®        processed_count (int): å·²å¤„ç†çš„æ•°æ®é¡¹æ•°é‡    \"\"\"        SUPPORTED_FORMATS = ['csv', 'json', 'xml', 'txt']    DEFAULT_ENCODING = 'utf-8'        def __init__(self, config=None):        \"\"\"        åˆå§‹åŒ–æ•°æ®å¤„ç†å™¨ã€‚                å‚æ•°:            config (dict, optional): é…ç½®å­—å…¸ï¼ŒåŒ…å«å¤„ç†é€‰é¡¹        \"\"\"        self.data = []        self.config = config or {}        self.processed_count = 0        @classmethod    def from_file(cls, filename, file_format='auto'):        \"\"\"        ä»æ–‡ä»¶åˆ›å»ºæ•°æ®å¤„ç†å™¨å®ä¾‹ã€‚                å‚æ•°:            filename (str): æ–‡ä»¶è·¯å¾„            file_format (str): æ–‡ä»¶æ ¼å¼ï¼Œé»˜è®¤ä¸º'auto'è‡ªåŠ¨æ£€æµ‹                è¿”å›:            DataProcessor: æ–°çš„æ•°æ®å¤„ç†å™¨å®ä¾‹                å¼‚å¸¸:            FileNotFoundError: æ–‡ä»¶ä¸å­˜åœ¨æ—¶æŠ›å‡º            ValueError: ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼æ—¶æŠ›å‡º        \"\"\"        # è¿™é‡Œåªæ˜¯ç¤ºä¾‹ï¼Œå®é™…å®ç°ä¼šè¯»å–æ–‡ä»¶        instance = cls()        instance.data = [f\"ä»{filename}åŠ è½½çš„æ•°æ®\"]        return instance        @staticmethod    def validate_format(file_format):        \"\"\"        éªŒè¯æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒã€‚                å‚æ•°:            file_format (str): è¦éªŒè¯çš„æ–‡ä»¶æ ¼å¼                è¿”å›:            bool: å¦‚æœæ ¼å¼æ”¯æŒè¿”å›Trueï¼Œå¦åˆ™è¿”å›False        \"\"\"        return file_format.lower() in DataProcessor.SUPPORTED_FORMATS        @property    def data_count(self):        \"\"\"        è·å–æ•°æ®é¡¹æ•°é‡ã€‚                è¿”å›:            int: æ•°æ®é¡¹çš„æ•°é‡        \"\"\"        return len(self.data)        @data_count.setter    def data_count(self, value):        \"\"\"        è®¾ç½®æ•°æ®é¡¹æ•°é‡ï¼ˆä»…ç”¨äºæ¼”ç¤ºï¼Œå®é™…ä¸­ä¸å»ºè®®è¿™æ ·åšï¼‰ã€‚                å‚æ•°:            value (int): æ–°çš„æ•°æ®é¡¹æ•°é‡        \"\"\"        if value &lt; 0:            raise ValueError(\"æ•°æ®é¡¹æ•°é‡ä¸èƒ½ä¸ºè´Ÿæ•°\")        # è¿™é‡Œåªæ˜¯ç¤ºä¾‹å®ç°        passprint(\"\\n\" + \"=\"*50)print(\"6. å¤æ‚ç±»çš„å¸®åŠ©:\")help(DataProcessor)print(\"\\n\" + \"=\"*50)print(\"7. ç±»æ–¹æ³•çš„å¸®åŠ©:\")help(DataProcessor.from_file)print(\"\\n\" + \"=\"*50)print(\"8. é™æ€æ–¹æ³•çš„å¸®åŠ©:\")help(DataProcessor.validate_format)print(\"\\n\" + \"=\"*50)print(\"9. å±æ€§çš„å¸®åŠ©:\")help(DataProcessor.data_count)æ¨¡å—å’ŒåŒ…çš„å¸®åŠ©# æ¨¡å—å’ŒåŒ…çš„å¸®åŠ©ç¤ºä¾‹print(\"\\næ¨¡å—å’ŒåŒ…çš„å¸®åŠ©ç¤ºä¾‹:\")# 1. æ ‡å‡†åº“æ¨¡å—print(\"1. æ ‡å‡†åº“æ¨¡å—å¸®åŠ©:\")# datetimeæ¨¡å—import datetimeprint(\"datetimeæ¨¡å—å¸®åŠ©:\")help(datetime)print(\"\\n\" + \"=\"*50)# jsonæ¨¡å—import jsonprint(\"jsonæ¨¡å—å¸®åŠ©:\")help(json)print(\"\\n\" + \"=\"*50)# collectionsæ¨¡å—import collectionsprint(\"collectionsæ¨¡å—å¸®åŠ©:\")help(collections)# 2. æ¨¡å—ä¸­çš„ç‰¹å®šç±»å’Œå‡½æ•°print(\"\\n2. æ¨¡å—ä¸­çš„ç‰¹å®šç±»å’Œå‡½æ•°:\")# datetime.datetimeç±»print(\"datetime.datetimeç±»å¸®åŠ©:\")help(datetime.datetime)print(\"\\n\" + \"=\"*50)# json.dumpså‡½æ•°print(\"json.dumpså‡½æ•°å¸®åŠ©:\")help(json.dumps)print(\"\\n\" + \"=\"*50)# collections.Counterç±»print(\"collections.Counterç±»å¸®åŠ©:\")help(collections.Counter)# 3. åˆ›å»ºè‡ªå®šä¹‰æ¨¡å—ç¤ºä¾‹print(\"\\n3. è‡ªå®šä¹‰æ¨¡å—ç¤ºä¾‹:\")# æ¨¡æ‹Ÿä¸€ä¸ªè‡ªå®šä¹‰æ¨¡å—class CustomModule:    \"\"\"    è‡ªå®šä¹‰æ¨¡å—ç¤ºä¾‹ã€‚        è¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€äº›å®ç”¨çš„å·¥å…·å‡½æ•°å’Œç±»ã€‚    ä¸»è¦ç”¨äºæ¼”ç¤ºå¦‚ä½•ç¼–å†™è‰¯å¥½çš„æ–‡æ¡£å­—ç¬¦ä¸²ã€‚        æ¨¡å—åŒ…å«:        - å­—ç¬¦ä¸²å¤„ç†å·¥å…·        - æ•°å­¦è®¡ç®—å·¥å…·        - æ•°æ®éªŒè¯å·¥å…·        ç‰ˆæœ¬: 1.0.0    ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ    \"\"\"        VERSION = \"1.0.0\"    AUTHOR = \"Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ\"        @staticmethod    def reverse_string(text):        \"\"\"        åè½¬å­—ç¬¦ä¸²ã€‚                å‚æ•°:            text (str): è¦åè½¬çš„å­—ç¬¦ä¸²                è¿”å›:            str: åè½¬åçš„å­—ç¬¦ä¸²                ç¤ºä¾‹:            &gt;&gt;&gt; CustomModule.reverse_string(\"hello\")            'olleh'        \"\"\"        return text[::-1]        @staticmethod    def is_palindrome(text):        \"\"\"        æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºå›æ–‡ã€‚                å‚æ•°:            text (str): è¦æ£€æŸ¥çš„å­—ç¬¦ä¸²                è¿”å›:            bool: å¦‚æœæ˜¯å›æ–‡è¿”å›Trueï¼Œå¦åˆ™è¿”å›False                ç¤ºä¾‹:            &gt;&gt;&gt; CustomModule.is_palindrome(\"level\")            True            &gt;&gt;&gt; CustomModule.is_palindrome(\"hello\")            False        \"\"\"        cleaned = text.lower().replace(\" \", \"\")        return cleaned == cleaned[::-1]        @staticmethod    def factorial(n):        \"\"\"        è®¡ç®—é˜¶ä¹˜ã€‚                å‚æ•°:            n (int): è¦è®¡ç®—é˜¶ä¹˜çš„éè´Ÿæ•´æ•°                è¿”å›:            int: nçš„é˜¶ä¹˜                å¼‚å¸¸:            ValueError: å½“nä¸ºè´Ÿæ•°æ—¶æŠ›å‡º            TypeError: å½“nä¸æ˜¯æ•´æ•°æ—¶æŠ›å‡º                ç¤ºä¾‹:            &gt;&gt;&gt; CustomModule.factorial(5)            120            &gt;&gt;&gt; CustomModule.factorial(0)            1        \"\"\"        if not isinstance(n, int):            raise TypeError(\"å‚æ•°å¿…é¡»æ˜¯æ•´æ•°\")        if n &lt; 0:            raise ValueError(\"å‚æ•°å¿…é¡»æ˜¯éè´Ÿæ•´æ•°\")                if n &lt;= 1:            return 1        return n * CustomModule.factorial(n - 1)print(\"è‡ªå®šä¹‰æ¨¡å—å¸®åŠ©:\")help(CustomModule)print(\"\\n\" + \"=\"*50)print(\"è‡ªå®šä¹‰æ¨¡å—æ–¹æ³•å¸®åŠ©:\")help(CustomModule.reverse_string)# 4. åŒ…çš„å¸®åŠ©ï¼ˆæ¨¡æ‹Ÿï¼‰print(\"\\n4. åŒ…çš„å¸®åŠ©ç¤ºä¾‹:\")# æ¨¡æ‹ŸåŒ…ç»“æ„class PackageExample:    \"\"\"    åŒ…ç¤ºä¾‹ã€‚        è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçš„åŒ…ç»“æ„ï¼Œå±•ç¤ºäº†å¦‚ä½•ä¸ºåŒ…ç¼–å†™æ–‡æ¡£ã€‚        å­æ¨¡å—:        - utils: å®ç”¨å·¥å…·æ¨¡å—        - core: æ ¸å¿ƒåŠŸèƒ½æ¨¡å—        - tests: æµ‹è¯•æ¨¡å—        ä½¿ç”¨æ–¹æ³•:        import package_example        from package_example import utils        from package_example.core import MainClass    \"\"\"        class utils:        \"\"\"        å®ç”¨å·¥å…·å­æ¨¡å—ã€‚                æä¾›å„ç§å®ç”¨çš„å·¥å…·å‡½æ•°ã€‚        \"\"\"                @staticmethod        def format_number(num, precision=2):            \"\"\"            æ ¼å¼åŒ–æ•°å­—ã€‚                        å‚æ•°:                num (float): è¦æ ¼å¼åŒ–çš„æ•°å­—                precision (int): ç²¾åº¦ï¼Œé»˜è®¤ä¸º2                        è¿”å›:                str: æ ¼å¼åŒ–åçš„æ•°å­—å­—ç¬¦ä¸²            \"\"\"            return f\"{num:.{precision}f}\"        class core:        \"\"\"        æ ¸å¿ƒåŠŸèƒ½å­æ¨¡å—ã€‚                åŒ…å«ä¸»è¦çš„ä¸šåŠ¡é€»è¾‘ç±»å’Œå‡½æ•°ã€‚        \"\"\"                class MainClass:            \"\"\"            ä¸»è¦ä¸šåŠ¡ç±»ã€‚                        è¿™ä¸ªç±»å®ç°äº†åŒ…çš„æ ¸å¿ƒåŠŸèƒ½ã€‚            \"\"\"                        def __init__(self, name):                \"\"\"                åˆå§‹åŒ–ä¸»ç±»ã€‚                                å‚æ•°:                    name (str): å®ä¾‹åç§°                \"\"\"                self.name = name                        def process(self, data):                \"\"\"                å¤„ç†æ•°æ®ã€‚                                å‚æ•°:                    data: è¦å¤„ç†çš„æ•°æ®                                è¿”å›:                    å¤„ç†åçš„æ•°æ®                \"\"\"                return f\"å¤„ç† {data} ä½¿ç”¨ {self.name}\"print(\"åŒ…ç¤ºä¾‹å¸®åŠ©:\")help(PackageExample)print(\"\\n\" + \"=\"*50)print(\"å­æ¨¡å—å¸®åŠ©:\")help(PackageExample.utils)print(\"\\n\" + \"=\"*50)print(\"æ ¸å¿ƒç±»å¸®åŠ©:\")help(PackageExample.core.MainClass)äº¤äº’å¼å¸®åŠ©ç³»ç»Ÿ# äº¤äº’å¼å¸®åŠ©ç³»ç»Ÿç¤ºä¾‹print(\"\\näº¤äº’å¼å¸®åŠ©ç³»ç»Ÿç¤ºä¾‹:\")# æ³¨æ„ï¼šåœ¨å®é™…çš„äº¤äº’å¼ç¯å¢ƒä¸­ï¼Œhelp()ä¼šå¯åŠ¨äº¤äº’å¼å¸®åŠ©# è¿™é‡Œæˆ‘ä»¬æ¼”ç¤ºå¦‚ä½•æ¨¡æ‹Ÿå’Œç†è§£äº¤äº’å¼å¸®åŠ©çš„æ¦‚å¿µprint(\"1. äº¤äº’å¼å¸®åŠ©ç³»ç»Ÿæ¦‚è¿°:\")print(\"\"\"å½“ä½ åœ¨Pythonäº¤äº’å¼ç¯å¢ƒä¸­è¾“å…¥ help() æ—¶ï¼Œä¼šå¯åŠ¨äº¤äº’å¼å¸®åŠ©ç³»ç»Ÿã€‚äº¤äº’å¼å¸®åŠ©ç³»ç»Ÿçš„ç‰¹ç‚¹ï¼š- æä¾›æœç´¢åŠŸèƒ½- æ”¯æŒä¸»é¢˜æµè§ˆ- å¯ä»¥æŸ¥çœ‹å…³é”®å­—å¸®åŠ©- æä¾›æ¨¡å—åˆ—è¡¨- æ”¯æŒé€€å‡ºå‘½ä»¤å¸¸ç”¨å‘½ä»¤ï¼š- help&gt; modules        # åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¨¡å—- help&gt; keywords       # åˆ—å‡ºPythonå…³é”®å­—- help&gt; symbols        # åˆ—å‡ºç¬¦å·- help&gt; topics         # åˆ—å‡ºå¸®åŠ©ä¸»é¢˜- help&gt; quit           # é€€å‡ºå¸®åŠ©ç³»ç»Ÿ\"\"\")# 2. æ¨¡æ‹Ÿäº¤äº’å¼å¸®åŠ©åŠŸèƒ½class InteractiveHelpSimulator:    \"\"\"    äº¤äº’å¼å¸®åŠ©ç³»ç»Ÿæ¨¡æ‹Ÿå™¨ã€‚        è¿™ä¸ªç±»æ¨¡æ‹Ÿäº†Pythonäº¤äº’å¼å¸®åŠ©ç³»ç»Ÿçš„ä¸€äº›åŠŸèƒ½ã€‚    \"\"\"        def __init__(self):        self.topics = {            'MODULES': 'æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨æ¨¡å—',            'KEYWORDS': 'æ˜¾ç¤ºPythonå…³é”®å­—',            'SYMBOLS': 'æ˜¾ç¤ºç‰¹æ®Šç¬¦å·',            'TOPICS': 'æ˜¾ç¤ºå¸®åŠ©ä¸»é¢˜',            'FUNCTIONS': 'æ˜¾ç¤ºå†…ç½®å‡½æ•°',            'CLASSES': 'æ˜¾ç¤ºå†…ç½®ç±»'        }                self.keywords = [            'and', 'as', 'assert', 'break', 'class', 'continue', 'def',            'del', 'elif', 'else', 'except', 'finally', 'for', 'from',            'global', 'if', 'import', 'in', 'is', 'lambda', 'nonlocal',            'not', 'or', 'pass', 'raise', 'return', 'try', 'while',            'with', 'yield', 'True', 'False', 'None'        ]                self.symbols = {            '+': 'åŠ æ³•è¿ç®—ç¬¦',            '-': 'å‡æ³•è¿ç®—ç¬¦',            '*': 'ä¹˜æ³•è¿ç®—ç¬¦',            '/': 'é™¤æ³•è¿ç®—ç¬¦',            '//': 'æ•´æ•°é™¤æ³•è¿ç®—ç¬¦',            '%': 'å–æ¨¡è¿ç®—ç¬¦',            '**': 'å¹‚è¿ç®—ç¬¦',            '=': 'èµ‹å€¼è¿ç®—ç¬¦',            '==': 'ç­‰äºæ¯”è¾ƒè¿ç®—ç¬¦',            '!=': 'ä¸ç­‰äºæ¯”è¾ƒè¿ç®—ç¬¦',            '&lt;': 'å°äºæ¯”è¾ƒè¿ç®—ç¬¦',            '&gt;': 'å¤§äºæ¯”è¾ƒè¿ç®—ç¬¦',            '&lt;=': 'å°äºç­‰äºæ¯”è¾ƒè¿ç®—ç¬¦',            '&gt;=': 'å¤§äºç­‰äºæ¯”è¾ƒè¿ç®—ç¬¦'        }        def show_topics(self):        \"\"\"        æ˜¾ç¤ºå¯ç”¨çš„å¸®åŠ©ä¸»é¢˜ã€‚        \"\"\"        print(\"\\nå¯ç”¨çš„å¸®åŠ©ä¸»é¢˜:\")        for topic, description in self.topics.items():            print(f\"  {topic:&lt;12} - {description}\")        def show_keywords(self):        \"\"\"        æ˜¾ç¤ºPythonå…³é”®å­—ã€‚        \"\"\"        print(\"\\nPythonå…³é”®å­—:\")        for i, keyword in enumerate(self.keywords):            if i % 6 == 0:                print()            print(f\"{keyword:&lt;12}\", end=\"\")        print()        def show_symbols(self):        \"\"\"        æ˜¾ç¤ºç‰¹æ®Šç¬¦å·ã€‚        \"\"\"        print(\"\\nç‰¹æ®Šç¬¦å·:\")        for symbol, description in self.symbols.items():            print(f\"  {symbol:&lt;4} - {description}\")        def show_modules_info(self):        \"\"\"        æ˜¾ç¤ºæ¨¡å—ä¿¡æ¯ã€‚        \"\"\"        print(\"\\nå¸¸ç”¨æ¨¡å—ä¿¡æ¯:\")        import sys                # æ˜¾ç¤ºä¸€äº›å¸¸ç”¨æ¨¡å—        common_modules = [            'os', 'sys', 'math', 'random', 'datetime', 'json',            'collections', 'itertools', 'functools', 're'        ]                for module_name in common_modules:            try:                module = __import__(module_name)                doc = getattr(module, '__doc__', 'æ— æ–‡æ¡£')                if doc:                    # åªæ˜¾ç¤ºæ–‡æ¡£çš„ç¬¬ä¸€è¡Œ                    first_line = doc.split('\\n')[0].strip()                    print(f\"  {module_name:&lt;12} - {first_line}\")                else:                    print(f\"  {module_name:&lt;12} - æ— æ–‡æ¡£\")            except ImportError:                print(f\"  {module_name:&lt;12} - æ¨¡å—æœªæ‰¾åˆ°\")        def search_help(self, query):        \"\"\"        æœç´¢å¸®åŠ©ä¿¡æ¯ã€‚                å‚æ•°:            query (str): æœç´¢æŸ¥è¯¢        \"\"\"        print(f\"\\næœç´¢ '{query}' çš„å¸®åŠ©ä¿¡æ¯:\")                # åœ¨å…³é”®å­—ä¸­æœç´¢        if query.lower() in [kw.lower() for kw in self.keywords]:            print(f\"  '{query}' æ˜¯Pythonå…³é”®å­—\")                # åœ¨ç¬¦å·ä¸­æœç´¢        if query in self.symbols:            print(f\"  '{query}' - {self.symbols[query]}\")                # å°è¯•è·å–å¯¹è±¡çš„å¸®åŠ©        try:            # è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…ä¸­ä¼šæ›´å¤æ‚            if hasattr(__builtins__, query):                obj = getattr(__builtins__, query)                print(f\"  '{query}' æ˜¯å†…ç½®å¯¹è±¡: {type(obj).__name__}\")                if hasattr(obj, '__doc__') and obj.__doc__:                    doc_lines = obj.__doc__.split('\\n')                    print(f\"  æ–‡æ¡£: {doc_lines[0].strip()}\")        except:            pass                print(f\"  æç¤º: ä½¿ç”¨ help({query}) è·å–è¯¦ç»†ä¿¡æ¯\")# æµ‹è¯•äº¤äº’å¼å¸®åŠ©æ¨¡æ‹Ÿå™¨print(\"\\n2. äº¤äº’å¼å¸®åŠ©æ¨¡æ‹Ÿå™¨æ¼”ç¤º:\")help_sim = InteractiveHelpSimulator()print(\"æ˜¾ç¤ºå¸®åŠ©ä¸»é¢˜:\")help_sim.show_topics()print(\"\\næ˜¾ç¤ºå…³é”®å­—:\")help_sim.show_keywords()print(\"\\næ˜¾ç¤ºç¬¦å·:\")help_sim.show_symbols()print(\"\\næ˜¾ç¤ºæ¨¡å—ä¿¡æ¯:\")help_sim.show_modules_info()print(\"\\næœç´¢å¸®åŠ©:\")help_sim.search_help('print')help_sim.search_help('for')help_sim.search_help('+')# 3. å®é™…çš„help()ä½¿ç”¨æŠ€å·§print(\"\\n3. help()ä½¿ç”¨æŠ€å·§:\")print(\"\"\"help()å‡½æ•°çš„é«˜çº§ä½¿ç”¨æŠ€å·§ï¼š1. æŸ¥çœ‹å¯¹è±¡ç±»å‹ï¼š   help(type(obj))  # æŸ¥çœ‹å¯¹è±¡ç±»å‹çš„å¸®åŠ©2. æŸ¥çœ‹æ¨¡å—çš„ç‰¹å®šéƒ¨åˆ†ï¼š   help(module.function)  # æŸ¥çœ‹æ¨¡å—ä¸­ç‰¹å®šå‡½æ•°çš„å¸®åŠ©3. åœ¨å­—ç¬¦ä¸²ä¸Šä½¿ç”¨ï¼š   help('MODULES')  # åˆ—å‡ºæ‰€æœ‰æ¨¡å—   help('KEYWORDS') # åˆ—å‡ºæ‰€æœ‰å…³é”®å­—4. æŸ¥çœ‹è¿ç®—ç¬¦ï¼š   help('OPERATORS')  # æŸ¥çœ‹è¿ç®—ç¬¦å¸®åŠ©5. æŸ¥çœ‹ç‰¹æ®Šæ–¹æ³•ï¼š   help(obj.__method__)  # æŸ¥çœ‹ç‰¹æ®Šæ–¹æ³•çš„å¸®åŠ©6. ä½¿ç”¨pydocæ¨¡å—ï¼š   import pydoc   pydoc.help(obj)  # ç­‰åŒäºhelp(obj)\"\"\")# æ¼”ç¤ºä¸€äº›æŠ€å·§print(\"\\nå®é™…æ¼”ç¤º:\")# æŸ¥çœ‹å­—ç¬¦ä¸²ç±»å‹çš„å¸®åŠ©ï¼ˆç®€åŒ–è¾“å‡ºï¼‰print(\"\\næŸ¥çœ‹å­—ç¬¦ä¸²ç±»å‹:\")test_string = \"hello\"print(f\"type(test_string): {type(test_string)}\")print(\"help(type(test_string)) ä¼šæ˜¾ç¤ºstrç±»çš„å®Œæ•´å¸®åŠ©\")# æŸ¥çœ‹åˆ—è¡¨çš„ç‰¹å®šæ–¹æ³•print(\"\\næŸ¥çœ‹åˆ—è¡¨çš„appendæ–¹æ³•:\")test_list = []print(\"help(test_list.append) ä¼šæ˜¾ç¤ºappendæ–¹æ³•çš„å¸®åŠ©\")# ä½¿ç”¨å­—ç¬¦ä¸²å‚æ•°print(\"\\nä½¿ç”¨å­—ç¬¦ä¸²å‚æ•°:\")print(\"help('MODULES') ä¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¨¡å—\")print(\"help('KEYWORDS') ä¼šåˆ—å‡ºæ‰€æœ‰Pythonå…³é”®å­—\")é«˜çº§åº”ç”¨ï¼šè‡ªå®šä¹‰å¸®åŠ©ç³»ç»Ÿimport inspectimport textwrapfrom typing import Any, Dict, List, Optional# è‡ªå®šä¹‰å¸®åŠ©ç³»ç»Ÿclass CustomHelpSystem:    \"\"\"    è‡ªå®šä¹‰å¸®åŠ©ç³»ç»Ÿã€‚        è¿™ä¸ªç±»æ‰©å±•äº†Pythonå†…ç½®çš„help()åŠŸèƒ½ï¼Œæä¾›æ›´ä¸°å¯Œçš„å¸®åŠ©ä¿¡æ¯ã€‚    \"\"\"        def __init__(self):        self.help_cache = {}        self.custom_docs = {}        def register_custom_doc(self, obj, custom_doc):        \"\"\"        ä¸ºå¯¹è±¡æ³¨å†Œè‡ªå®šä¹‰æ–‡æ¡£ã€‚                å‚æ•°:            obj: è¦æ³¨å†Œæ–‡æ¡£çš„å¯¹è±¡            custom_doc (str): è‡ªå®šä¹‰æ–‡æ¡£å­—ç¬¦ä¸²        \"\"\"        self.custom_docs[id(obj)] = custom_doc        def enhanced_help(self, obj):        \"\"\"        æä¾›å¢å¼ºçš„å¸®åŠ©ä¿¡æ¯ã€‚                å‚æ•°:            obj: è¦è·å–å¸®åŠ©çš„å¯¹è±¡        \"\"\"        print(f\"\\n{'='*60}\")        print(f\"å¢å¼ºå¸®åŠ©ä¿¡æ¯: {self._get_object_name(obj)}\")        print(f\"{'='*60}\")                # åŸºæœ¬ä¿¡æ¯        self._show_basic_info(obj)                # æ–‡æ¡£å­—ç¬¦ä¸²        self._show_documentation(obj)                # ç­¾åä¿¡æ¯        self._show_signature(obj)                # å±æ€§å’Œæ–¹æ³•        self._show_attributes_and_methods(obj)                # ç»§æ‰¿ä¿¡æ¯        self._show_inheritance_info(obj)                # ä½¿ç”¨ç¤ºä¾‹        self._show_usage_examples(obj)                # ç›¸å…³ä¿¡æ¯        self._show_related_info(obj)        def _get_object_name(self, obj):        \"\"\"        è·å–å¯¹è±¡åç§°ã€‚        \"\"\"        if hasattr(obj, '__name__'):            return obj.__name__        elif hasattr(obj, '__class__'):            return f\"{obj.__class__.__name__} instance\"        else:            return str(type(obj))        def _show_basic_info(self, obj):        \"\"\"        æ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯ã€‚        \"\"\"        print(f\"\\nğŸ“‹ åŸºæœ¬ä¿¡æ¯:\")        print(f\"  ç±»å‹: {type(obj).__name__}\")        print(f\"  æ¨¡å—: {getattr(obj, '__module__', 'unknown')}\")                if hasattr(obj, '__file__'):            print(f\"  æ–‡ä»¶: {obj.__file__}\")                if hasattr(obj, '__version__'):            print(f\"  ç‰ˆæœ¬: {obj.__version__}\")                if hasattr(obj, '__author__'):            print(f\"  ä½œè€…: {obj.__author__}\")        def _show_documentation(self, obj):        \"\"\"        æ˜¾ç¤ºæ–‡æ¡£å­—ç¬¦ä¸²ã€‚        \"\"\"        print(f\"\\nğŸ“– æ–‡æ¡£:\")                # æ£€æŸ¥è‡ªå®šä¹‰æ–‡æ¡£        custom_doc = self.custom_docs.get(id(obj))        if custom_doc:            print(f\"  è‡ªå®šä¹‰æ–‡æ¡£:\")            print(textwrap.indent(custom_doc, \"    \"))                # æ˜¾ç¤ºåŸå§‹æ–‡æ¡£        doc = getattr(obj, '__doc__', None)        if doc:            print(f\"  åŸå§‹æ–‡æ¡£:\")            # æ ¼å¼åŒ–æ–‡æ¡£å­—ç¬¦ä¸²            formatted_doc = textwrap.dedent(doc).strip()            print(textwrap.indent(formatted_doc, \"    \"))        else:            print(\"  æ— æ–‡æ¡£å­—ç¬¦ä¸²\")        def _show_signature(self, obj):        \"\"\"        æ˜¾ç¤ºå‡½æ•°ç­¾åã€‚        \"\"\"        if callable(obj):            print(f\"\\nâœï¸ ç­¾å:\")            try:                sig = inspect.signature(obj)                print(f\"  {self._get_object_name(obj)}{sig}\")                                # æ˜¾ç¤ºå‚æ•°è¯¦æƒ…                if sig.parameters:                    print(f\"\\n  å‚æ•°è¯¦æƒ…:\")                    for name, param in sig.parameters.items():                        param_info = f\"    {name}\"                                                if param.annotation != param.empty:                            param_info += f\": {param.annotation}\"                                                if param.default != param.empty:                            param_info += f\" = {param.default}\"                                                if param.kind == param.VAR_POSITIONAL:                            param_info = f\"    *{name} (å¯å˜ä½ç½®å‚æ•°)\"                        elif param.kind == param.VAR_KEYWORD:                            param_info = f\"    **{name} (å¯å˜å…³é”®å­—å‚æ•°)\"                                                print(param_info)                                # æ˜¾ç¤ºè¿”å›ç±»å‹                if sig.return_annotation != sig.empty:                    print(f\"\\n  è¿”å›ç±»å‹: {sig.return_annotation}\")                                except (ValueError, TypeError):                print(\"  æ— æ³•è·å–ç­¾åä¿¡æ¯\")        def _show_attributes_and_methods(self, obj):        \"\"\"        æ˜¾ç¤ºå±æ€§å’Œæ–¹æ³•ã€‚        \"\"\"        print(f\"\\nğŸ”§ å±æ€§å’Œæ–¹æ³•:\")                # è·å–æ‰€æœ‰å±æ€§        all_attrs = dir(obj)                # åˆ†ç±»å±æ€§        public_attrs = []        private_attrs = []        special_attrs = []        methods = []        properties = []                for attr_name in all_attrs:            try:                attr_value = getattr(obj, attr_name)                                if attr_name.startswith('__') and attr_name.endswith('__'):                    special_attrs.append(attr_name)                elif attr_name.startswith('_'):                    private_attrs.append(attr_name)                elif callable(attr_value):                    methods.append(attr_name)                elif isinstance(inspect.getattr_static(obj, attr_name), property):                    properties.append(attr_name)                else:                    public_attrs.append(attr_name)            except:                continue                # æ˜¾ç¤ºåˆ†ç±»ç»“æœ        if public_attrs:            print(f\"  å…¬å…±å±æ€§ ({len(public_attrs)}): {', '.join(public_attrs[:10])}{'...' if len(public_attrs) &gt; 10 else ''}\")                if methods:            print(f\"  æ–¹æ³• ({len(methods)}): {', '.join(methods[:10])}{'...' if len(methods) &gt; 10 else ''}\")                if properties:            print(f\"  å±æ€§ ({len(properties)}): {', '.join(properties[:10])}{'...' if len(properties) &gt; 10 else ''}\")                if private_attrs:            print(f\"  ç§æœ‰å±æ€§ ({len(private_attrs)}): {', '.join(private_attrs[:5])}{'...' if len(private_attrs) &gt; 5 else ''}\")                if special_attrs:            print(f\"  ç‰¹æ®Šå±æ€§ ({len(special_attrs)}): {', '.join(special_attrs[:5])}{'...' if len(special_attrs) &gt; 5 else ''}\")        def _show_inheritance_info(self, obj):        \"\"\"        æ˜¾ç¤ºç»§æ‰¿ä¿¡æ¯ã€‚        \"\"\"        if inspect.isclass(obj):            print(f\"\\nğŸ—ï¸ ç»§æ‰¿ä¿¡æ¯:\")                        # åŸºç±»            bases = obj.__bases__            if bases:                print(f\"  ç›´æ¥åŸºç±»: {', '.join(base.__name__ for base in bases)}\")                        # MRO            mro = obj.__mro__            if len(mro) &gt; 1:                mro_names = [cls.__name__ for cls in mro]                print(f\"  æ–¹æ³•è§£æé¡ºåº: {' -&gt; '.join(mro_names)}\")                        # å­ç±»ï¼ˆå¦‚æœæ˜¯å†…ç½®ç±»å‹ï¼Œå¯èƒ½æ— æ³•è·å–ï¼‰            try:                subclasses = obj.__subclasses__()                if subclasses:                    subclass_names = [cls.__name__ for cls in subclasses[:5]]                    print(f\"  å·²çŸ¥å­ç±»: {', '.join(subclass_names)}{'...' if len(subclasses) &gt; 5 else ''}\")            except:                pass        def _show_usage_examples(self, obj):        \"\"\"        æ˜¾ç¤ºä½¿ç”¨ç¤ºä¾‹ã€‚        \"\"\"        print(f\"\\nğŸ’¡ ä½¿ç”¨ç¤ºä¾‹:\")                obj_name = self._get_object_name(obj)                if inspect.isfunction(obj):            print(f\"  # å‡½æ•°è°ƒç”¨ç¤ºä¾‹\")            print(f\"  result = {obj_name}(args)\")        elif inspect.isclass(obj):            print(f\"  # ç±»å®ä¾‹åŒ–ç¤ºä¾‹\")            print(f\"  instance = {obj_name}()\")            print(f\"  # æˆ–å¸¦å‚æ•°\")            print(f\"  instance = {obj_name}(param1, param2)\")        elif inspect.ismethod(obj):            print(f\"  # æ–¹æ³•è°ƒç”¨ç¤ºä¾‹\")            print(f\"  result = obj.{obj_name}(args)\")        elif inspect.ismodule(obj):            print(f\"  # æ¨¡å—å¯¼å…¥ç¤ºä¾‹\")            print(f\"  import {obj_name}\")            print(f\"  from {obj_name} import function_name\")        else:            print(f\"  # ä½¿ç”¨ç¤ºä¾‹\")            print(f\"  value = {obj_name}\")        def _show_related_info(self, obj):        \"\"\"        æ˜¾ç¤ºç›¸å…³ä¿¡æ¯ã€‚        \"\"\"        print(f\"\\nğŸ”— ç›¸å…³ä¿¡æ¯:\")                # ç›¸å…³çš„å†…ç½®å‡½æ•°        related_builtins = []        if inspect.isclass(obj):            related_builtins.extend(['isinstance', 'issubclass', 'type'])        if callable(obj):            related_builtins.extend(['callable', 'inspect.signature'])                if related_builtins:            print(f\"  ç›¸å…³å†…ç½®å‡½æ•°: {', '.join(related_builtins)}\")                # ç›¸å…³æ¨¡å—        if hasattr(obj, '__module__') and obj.__module__:            print(f\"  æ‰€å±æ¨¡å—: {obj.__module__}\")                # æ–‡æ¡£é“¾æ¥ï¼ˆç¤ºä¾‹ï¼‰        print(f\"  åœ¨çº¿æ–‡æ¡£: https://docs.python.org/3/library/\")        print(f\"  æ›´å¤šå¸®åŠ©: help({self._get_object_name(obj)})\")        def compare_objects(self, obj1, obj2):        \"\"\"        æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å¸®åŠ©ä¿¡æ¯ã€‚                å‚æ•°:            obj1: ç¬¬ä¸€ä¸ªå¯¹è±¡            obj2: ç¬¬äºŒä¸ªå¯¹è±¡        \"\"\"        print(f\"\\nğŸ” å¯¹è±¡æ¯”è¾ƒ:\")        print(f\"{'='*60}\")                name1 = self._get_object_name(obj1)        name2 = self._get_object_name(obj2)                print(f\"æ¯”è¾ƒ {name1} å’Œ {name2}:\")                # ç±»å‹æ¯”è¾ƒ        type1 = type(obj1)        type2 = type(obj2)        print(f\"\\nç±»å‹: {type1.__name__} vs {type2.__name__}\")                if type1 == type2:            print(\"  âœ… ç±»å‹ç›¸åŒ\")        else:            print(\"  âŒ ç±»å‹ä¸åŒ\")                # å±æ€§æ¯”è¾ƒ        attrs1 = set(dir(obj1))        attrs2 = set(dir(obj2))                common_attrs = attrs1 &amp; attrs2        unique_to_1 = attrs1 - attrs2        unique_to_2 = attrs2 - attrs1                print(f\"\\nå±æ€§æ¯”è¾ƒ:\")        print(f\"  å…±åŒå±æ€§: {len(common_attrs)}\")        print(f\"  {name1}ç‹¬æœ‰: {len(unique_to_1)}\")        print(f\"  {name2}ç‹¬æœ‰: {len(unique_to_2)}\")                if unique_to_1:            print(f\"  {name1}ç‹¬æœ‰å±æ€§: {', '.join(list(unique_to_1)[:5])}{'...' if len(unique_to_1) &gt; 5 else ''}\")                if unique_to_2:            print(f\"  {name2}ç‹¬æœ‰å±æ€§: {', '.join(list(unique_to_2)[:5])}{'...' if len(unique_to_2) &gt; 5 else ''}\")                # ç»§æ‰¿å…³ç³»        if inspect.isclass(obj1) and inspect.isclass(obj2):            print(f\"\\nç»§æ‰¿å…³ç³»:\")            if issubclass(obj1, obj2):                print(f\"  {name1} æ˜¯ {name2} çš„å­ç±»\")            elif issubclass(obj2, obj1):                print(f\"  {name2} æ˜¯ {name1} çš„å­ç±»\")            else:                print(f\"  æ— ç›´æ¥ç»§æ‰¿å…³ç³»\")# æµ‹è¯•è‡ªå®šä¹‰å¸®åŠ©ç³»ç»Ÿprint(\"\\né«˜çº§åº”ç”¨ï¼šè‡ªå®šä¹‰å¸®åŠ©ç³»ç»Ÿ\")custom_help = CustomHelpSystem()# åˆ›å»ºæµ‹è¯•å¯¹è±¡class TestClass:    \"\"\"    æµ‹è¯•ç±»ã€‚        è¿™æ˜¯ä¸€ä¸ªç”¨äºæ¼”ç¤ºè‡ªå®šä¹‰å¸®åŠ©ç³»ç»Ÿçš„æµ‹è¯•ç±»ã€‚    \"\"\"        def __init__(self, name: str):        \"\"\"        åˆå§‹åŒ–æµ‹è¯•ç±»ã€‚                å‚æ•°:            name: å®ä¾‹åç§°        \"\"\"        self.name = name        def test_method(self, value: int = 10) -&gt; str:        \"\"\"        æµ‹è¯•æ–¹æ³•ã€‚                å‚æ•°:            value: æµ‹è¯•å€¼                è¿”å›:            æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²        \"\"\"        return f\"æµ‹è¯• {self.name}: {value}\"        @property    def display_name(self) -&gt; str:        \"\"\"        æ˜¾ç¤ºåç§°å±æ€§ã€‚        \"\"\"        return f\"[{self.name}]\"# æ³¨å†Œè‡ªå®šä¹‰æ–‡æ¡£custom_help.register_custom_doc(    TestClass,    \"è¿™æ˜¯ä¸ºTestClassæ·»åŠ çš„è‡ªå®šä¹‰æ–‡æ¡£ï¼Œæä¾›äº†é¢å¤–çš„ä½¿ç”¨è¯´æ˜å’Œæ³¨æ„äº‹é¡¹ã€‚\")print(\"\\n1. å¢å¼ºå¸®åŠ©ä¿¡æ¯æ¼”ç¤º:\")custom_help.enhanced_help(TestClass)print(\"\\n2. å‡½æ•°å¸®åŠ©ä¿¡æ¯æ¼”ç¤º:\")custom_help.enhanced_help(len)print(\"\\n3. å¯¹è±¡æ¯”è¾ƒæ¼”ç¤º:\")custom_help.compare_objects(list, tuple)print(\"\\n4. å®ä¾‹å¸®åŠ©ä¿¡æ¯æ¼”ç¤º:\")test_instance = TestClass(\"ç¤ºä¾‹\")custom_help.enhanced_help(test_instance)âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µæ–‡æ¡£å­—ç¬¦ä¸²ç¼–å†™æœ€ä½³å®è·µ# æ–‡æ¡£å­—ç¬¦ä¸²ç¼–å†™æœ€ä½³å®è·µprint(\"\\næ–‡æ¡£å­—ç¬¦ä¸²ç¼–å†™æœ€ä½³å®è·µ:\")# 1. è‰¯å¥½çš„æ–‡æ¡£å­—ç¬¦ä¸²ç¤ºä¾‹print(\"1. è‰¯å¥½çš„æ–‡æ¡£å­—ç¬¦ä¸²ç¤ºä¾‹:\")def good_docstring_example(data: list, threshold: float = 0.5,                           normalize: bool = True) -&gt; dict:    \"\"\"    å¤„ç†æ•°æ®å¹¶è¿”å›ç»Ÿè®¡ä¿¡æ¯ã€‚        è¿™ä¸ªå‡½æ•°å¯¹è¾“å…¥çš„æ•°å€¼åˆ—è¡¨è¿›è¡Œå¤„ç†ï¼Œè®¡ç®—å„ç§ç»Ÿè®¡æŒ‡æ ‡ï¼Œ    å¹¶æ ¹æ®é˜ˆå€¼è¿›è¡Œåˆ†ç±»ã€‚æ”¯æŒæ•°æ®æ ‡å‡†åŒ–é€‰é¡¹ã€‚        å‚æ•°:        data (list): åŒ…å«æ•°å€¼çš„åˆ—è¡¨ï¼Œä¸èƒ½ä¸ºç©º        threshold (float, optional): åˆ†ç±»é˜ˆå€¼ï¼Œé»˜è®¤ä¸º0.5            - å¿…é¡»åœ¨0.0åˆ°1.0ä¹‹é—´            - ç”¨äºåŒºåˆ†é«˜å€¼å’Œä½å€¼        normalize (bool, optional): æ˜¯å¦æ ‡å‡†åŒ–æ•°æ®ï¼Œé»˜è®¤ä¸ºTrue            - True: å°†æ•°æ®æ ‡å‡†åŒ–åˆ°[0,1]èŒƒå›´            - False: ä½¿ç”¨åŸå§‹æ•°æ®        è¿”å›:        dict: åŒ…å«ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹é”®:            - 'mean': å¹³å‡å€¼ (float)            - 'median': ä¸­ä½æ•° (float)            - 'std': æ ‡å‡†å·® (float)            - 'high_count': é«˜äºé˜ˆå€¼çš„æ•°é‡ (int)            - 'low_count': ä½äºé˜ˆå€¼çš„æ•°é‡ (int)            - 'normalized': æ˜¯å¦è¿›è¡Œäº†æ ‡å‡†åŒ– (bool)        å¼‚å¸¸:        ValueError: å½“dataä¸ºç©ºæˆ–thresholdä¸åœ¨æœ‰æ•ˆèŒƒå›´æ—¶æŠ›å‡º        TypeError: å½“dataä¸æ˜¯åˆ—è¡¨æˆ–åŒ…å«éæ•°å€¼å…ƒç´ æ—¶æŠ›å‡º        ç¤ºä¾‹:        &gt;&gt;&gt; data = [1, 2, 3, 4, 5]        &gt;&gt;&gt; result = good_docstring_example(data)        &gt;&gt;&gt; print(result['mean'])        3.0                &gt;&gt;&gt; result = good_docstring_example(data, threshold=0.7, normalize=False)        &gt;&gt;&gt; print(result['high_count'])        2        æ³¨æ„:        - è¾“å…¥æ•°æ®ä¼šè¢«å¤åˆ¶ï¼Œä¸ä¼šä¿®æ”¹åŸå§‹åˆ—è¡¨        - æ ‡å‡†åŒ–ä½¿ç”¨min-maxæ–¹æ³•        - ç©ºå€¼ä¼šè¢«è‡ªåŠ¨è¿‡æ»¤        å¦è¯·å‚é˜…:        - numpy.mean(): NumPyçš„å¹³å‡å€¼è®¡ç®—        - statistics.median(): æ ‡å‡†åº“çš„ä¸­ä½æ•°è®¡ç®—        - sklearn.preprocessing.MinMaxScaler: ä¸“ä¸šçš„æ•°æ®æ ‡å‡†åŒ–å·¥å…·        ç‰ˆæœ¬å†å²:        - 1.0: åˆå§‹ç‰ˆæœ¬        - 1.1: æ·»åŠ æ ‡å‡†åŒ–åŠŸèƒ½        - 1.2: æ”¹è¿›é”™è¯¯å¤„ç†    \"\"\"    # å®ç°ä»£ç ï¼ˆç®€åŒ–ï¼‰    if not data:        raise ValueError(\"æ•°æ®åˆ—è¡¨ä¸èƒ½ä¸ºç©º\")        if not (0.0 &lt;= threshold &lt;= 1.0):        raise ValueError(\"é˜ˆå€¼å¿…é¡»åœ¨0.0åˆ°1.0ä¹‹é—´\")        # ç®€åŒ–çš„å®ç°    mean_val = sum(data) / len(data)    sorted_data = sorted(data)    median_val = sorted_data[len(data) // 2]        return {        'mean': mean_val,        'median': median_val,        'std': 0.0,  # ç®€åŒ–        'high_count': sum(1 for x in data if x &gt; threshold * max(data)),        'low_count': sum(1 for x in data if x &lt;= threshold * max(data)),        'normalized': normalize    }print(\"æŸ¥çœ‹è‰¯å¥½æ–‡æ¡£å­—ç¬¦ä¸²çš„å¸®åŠ©:\")help(good_docstring_example)# 2. ä¸è‰¯çš„æ–‡æ¡£å­—ç¬¦ä¸²ç¤ºä¾‹print(\"\\n\" + \"=\"*50)print(\"2. ä¸è‰¯çš„æ–‡æ¡£å­—ç¬¦ä¸²ç¤ºä¾‹:\")def bad_docstring_example(d, t=0.5, n=True):    \"\"\"å¤„ç†æ•°æ®\"\"\"    # æ²¡æœ‰è¯¦ç»†è¯´æ˜å‚æ•°ã€è¿”å›å€¼ã€å¼‚å¸¸ç­‰    return {'result': 'done'}def no_docstring_example(data, threshold, normalize):    # å®Œå…¨æ²¡æœ‰æ–‡æ¡£å­—ç¬¦ä¸²    return {}def confusing_docstring_example(x, y, z):    \"\"\"    è¿™ä¸ªå‡½æ•°åšä¸€äº›äº‹æƒ…    xæ˜¯è¾“å…¥    yä¹Ÿæ˜¯è¾“å…¥    zå¯èƒ½æ˜¯å¯é€‰çš„    è¿”å›ä¸€äº›ä¸œè¥¿    \"\"\"    return x + y + (z or 0)print(\"æŸ¥çœ‹ä¸è‰¯æ–‡æ¡£å­—ç¬¦ä¸²çš„å¸®åŠ©:\")help(bad_docstring_example)print(\"\\næŸ¥çœ‹æ— æ–‡æ¡£å­—ç¬¦ä¸²çš„å¸®åŠ©:\")help(no_docstring_example)print(\"\\næŸ¥çœ‹æ··ä¹±æ–‡æ¡£å­—ç¬¦ä¸²çš„å¸®åŠ©:\")help(confusing_docstring_example)# 3. ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸²æœ€ä½³å®è·µprint(\"\\n\" + \"=\"*50)print(\"3. ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸²æœ€ä½³å®è·µ:\")class WellDocumentedClass:    \"\"\"    ä¸€ä¸ªæ–‡æ¡£å®Œå–„çš„ç¤ºä¾‹ç±»ã€‚        è¿™ä¸ªç±»æ¼”ç¤ºäº†å¦‚ä½•ç¼–å†™é«˜è´¨é‡çš„ç±»æ–‡æ¡£å­—ç¬¦ä¸²ã€‚å®ƒæä¾›äº†    æ•°æ®ç®¡ç†å’Œå¤„ç†åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§æ“ä½œæ¨¡å¼ã€‚        ç±»å±æ€§:        DEFAULT_SIZE (int): é»˜è®¤å¤§å°ï¼Œå€¼ä¸º100        SUPPORTED_TYPES (tuple): æ”¯æŒçš„æ•°æ®ç±»å‹å…ƒç»„        å®ä¾‹å±æ€§:        name (str): å®ä¾‹åç§°        data (list): å­˜å‚¨çš„æ•°æ®åˆ—è¡¨        size (int): å½“å‰å¤§å°        readonly (bool): æ˜¯å¦ä¸ºåªè¯»æ¨¡å¼        ç¤ºä¾‹:        &gt;&gt;&gt; obj = WellDocumentedClass(\"test\")        &gt;&gt;&gt; obj.add_data([1, 2, 3])        &gt;&gt;&gt; print(obj.size)        3                &gt;&gt;&gt; obj = WellDocumentedClass(\"readonly\", readonly=True)        &gt;&gt;&gt; obj.add_data([1, 2, 3])  # ä¼šæŠ›å‡ºå¼‚å¸¸        Traceback (most recent call last):        ...        RuntimeError: åªè¯»æ¨¡å¼ä¸‹ä¸èƒ½æ·»åŠ æ•°æ®        æ³¨æ„:        - åœ¨åªè¯»æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ä¿®æ”¹æ“ä½œéƒ½ä¼šå¤±è´¥        - æ•°æ®ä¼šè‡ªåŠ¨å»é‡        - æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®    \"\"\"        DEFAULT_SIZE = 100    SUPPORTED_TYPES = (int, float, str)        def __init__(self, name: str, readonly: bool = False):        \"\"\"        åˆå§‹åŒ–ç±»å®ä¾‹ã€‚                å‚æ•°:            name (str): å®ä¾‹åç§°ï¼Œä¸èƒ½ä¸ºç©º            readonly (bool, optional): æ˜¯å¦ä¸ºåªè¯»æ¨¡å¼ï¼Œé»˜è®¤False                å¼‚å¸¸:            ValueError: å½“nameä¸ºç©ºå­—ç¬¦ä¸²æ—¶æŠ›å‡º        \"\"\"        if not name:            raise ValueError(\"åç§°ä¸èƒ½ä¸ºç©º\")                self.name = name        self.data = []        self.readonly = readonly        def add_data(self, items: list) -&gt; int:        \"\"\"        æ·»åŠ æ•°æ®åˆ°å®ä¾‹ä¸­ã€‚                å‚æ•°:            items (list): è¦æ·»åŠ çš„æ•°æ®é¡¹åˆ—è¡¨                è¿”å›:            int: æˆåŠŸæ·»åŠ çš„é¡¹ç›®æ•°é‡                å¼‚å¸¸:            RuntimeError: åœ¨åªè¯»æ¨¡å¼ä¸‹è°ƒç”¨æ—¶æŠ›å‡º            TypeError: å½“itemsåŒ…å«ä¸æ”¯æŒçš„ç±»å‹æ—¶æŠ›å‡º                ç¤ºä¾‹:            &gt;&gt;&gt; obj = WellDocumentedClass(\"test\")            &gt;&gt;&gt; count = obj.add_data([1, 2, 3, 2])  # 2ä¼šè¢«å»é‡            &gt;&gt;&gt; print(count)            3        \"\"\"        if self.readonly:            raise RuntimeError(\"åªè¯»æ¨¡å¼ä¸‹ä¸èƒ½æ·»åŠ æ•°æ®\")                added_count = 0        for item in items:            if not isinstance(item, self.SUPPORTED_TYPES):                raise TypeError(f\"ä¸æ”¯æŒçš„æ•°æ®ç±»å‹: {type(item)}\")                        if item not in self.data:                self.data.append(item)                added_count += 1                return added_count        @property    def size(self) -&gt; int:        \"\"\"        è·å–å½“å‰æ•°æ®å¤§å°ã€‚                è¿”å›:            int: æ•°æ®é¡¹çš„æ•°é‡        \"\"\"        return len(self.data)        @classmethod    def from_list(cls, name: str, data_list: list) -&gt; 'WellDocumentedClass':        \"\"\"        ä»åˆ—è¡¨åˆ›å»ºå®ä¾‹ã€‚                å‚æ•°:            name (str): å®ä¾‹åç§°            data_list (list): åˆå§‹æ•°æ®åˆ—è¡¨                è¿”å›:            WellDocumentedClass: æ–°åˆ›å»ºçš„å®ä¾‹                ç¤ºä¾‹:            &gt;&gt;&gt; obj = WellDocumentedClass.from_list(\"test\", [1, 2, 3])            &gt;&gt;&gt; print(obj.size)            3        \"\"\"        instance = cls(name)        instance.add_data(data_list)        return instance        @staticmethod    def validate_data(data: list) -&gt; bool:        \"\"\"        éªŒè¯æ•°æ®æ˜¯å¦æœ‰æ•ˆã€‚                å‚æ•°:            data (list): è¦éªŒè¯çš„æ•°æ®åˆ—è¡¨                è¿”å›:            bool: å¦‚æœæ•°æ®æœ‰æ•ˆè¿”å›Trueï¼Œå¦åˆ™è¿”å›False                ç¤ºä¾‹:            &gt;&gt;&gt; WellDocumentedClass.validate_data([1, 2, 3])            True            &gt;&gt;&gt; WellDocumentedClass.validate_data([1, 2, object()])            False        \"\"\"        return all(isinstance(item, cls.SUPPORTED_TYPES) for item in data)        def __enter__(self):        \"\"\"        è¿›å…¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚                è¿”å›:            WellDocumentedClass: è¿”å›è‡ªèº«å®ä¾‹        \"\"\"        return self        def __exit__(self, exc_type, exc_val, exc_tb):        \"\"\"        é€€å‡ºä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚                å‚æ•°:            exc_type: å¼‚å¸¸ç±»å‹            exc_val: å¼‚å¸¸å€¼            exc_tb: å¼‚å¸¸å›æº¯                è¿”å›:            bool: æ˜¯å¦æŠ‘åˆ¶å¼‚å¸¸ï¼Œè¿™é‡Œè¿”å›False        \"\"\"        # æ¸…ç†èµ„æº        if not self.readonly:            self.data.clear()        return False        def __str__(self) -&gt; str:        \"\"\"        è¿”å›å­—ç¬¦ä¸²è¡¨ç¤ºã€‚                è¿”å›:            str: å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤º        \"\"\"        return f\"WellDocumentedClass(name='{self.name}', size={self.size}, readonly={self.readonly})\"        def __repr__(self) -&gt; str:        \"\"\"        è¿”å›å¼€å‘è€…å‹å¥½çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚                è¿”å›:            str: å¯¹è±¡çš„è¯¦ç»†å­—ç¬¦ä¸²è¡¨ç¤º        \"\"\"        return f\"WellDocumentedClass(name='{self.name}', readonly={self.readonly})\"print(\"æŸ¥çœ‹å®Œå–„ç±»æ–‡æ¡£çš„å¸®åŠ©:\")help(WellDocumentedClass)# 4. æ¨¡å—æ–‡æ¡£å­—ç¬¦ä¸²æœ€ä½³å®è·µprint(\"\\n\" + \"=\"*50)print(\"4. æ¨¡å—æ–‡æ¡£å­—ç¬¦ä¸²æœ€ä½³å®è·µ:\")# æ¨¡æ‹Ÿæ¨¡å—æ–‡æ¡£å­—ç¬¦ä¸²module_docstring_example = \"\"\"æ•°æ®å¤„ç†å·¥å…·æ¨¡å—ã€‚è¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€å¥—å®Œæ•´çš„æ•°æ®å¤„ç†å·¥å…·ï¼ŒåŒ…æ‹¬æ•°æ®æ¸…æ´—ã€è½¬æ¢ã€åˆ†æå’Œå¯è§†åŒ–åŠŸèƒ½ã€‚é€‚ç”¨äºç§‘å­¦è®¡ç®—å’Œæ•°æ®åˆ†æåœºæ™¯ã€‚ä¸»è¦åŠŸèƒ½:    - æ•°æ®å¯¼å…¥å’Œå¯¼å‡º    - æ•°æ®æ¸…æ´—å’Œé¢„å¤„ç†    - ç»Ÿè®¡åˆ†æ    - æ•°æ®å¯è§†åŒ–    - æœºå™¨å­¦ä¹ é¢„å¤„ç†å…¸å‹ç”¨æ³•:    import data_tools        # åŠ è½½æ•°æ®    data = data_tools.load_csv('data.csv')        # æ¸…æ´—æ•°æ®    clean_data = data_tools.clean_data(data)        # åˆ†ææ•°æ®    stats = data_tools.analyze(clean_data)        # å¯è§†åŒ–    data_tools.plot(clean_data)ä¾èµ–:    - numpy &gt;= 1.19.0    - pandas &gt;= 1.2.0    - matplotlib &gt;= 3.3.0    - scikit-learn &gt;= 0.24.0ä½œè€…: æ•°æ®ç§‘å­¦å›¢é˜Ÿç‰ˆæœ¬: 2.1.0è®¸å¯è¯: MITè”ç³»æ–¹å¼: data-team@example.comæ›´æ–°æ—¥å¿—:    2.1.0 (2024-01-15):        - æ·»åŠ æ–°çš„æœºå™¨å­¦ä¹ é¢„å¤„ç†åŠŸèƒ½        - æ”¹è¿›æ•°æ®å¯è§†åŒ–        - ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜        2.0.0 (2023-12-01):        - é‡æ„æ ¸å¿ƒAPI        - æ·»åŠ å¹¶è¡Œå¤„ç†æ”¯æŒ        - æå‡æ€§èƒ½æ³¨æ„äº‹é¡¹:    - å¤§æ•°æ®é›†å¤„ç†å¯èƒ½éœ€è¦å¤§é‡å†…å­˜    - æŸäº›åŠŸèƒ½éœ€è¦GPUæ”¯æŒ    - å»ºè®®åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ä½¿ç”¨\"\"\"print(\"æ¨¡å—æ–‡æ¡£å­—ç¬¦ä¸²ç¤ºä¾‹:\")print(module_docstring_example)# 5. æ–‡æ¡£å­—ç¬¦ä¸²æ ¼å¼è§„èŒƒprint(\"\\n\" + \"=\"*50)print(\"5. æ–‡æ¡£å­—ç¬¦ä¸²æ ¼å¼è§„èŒƒ:\")class DocstringFormats:    \"\"\"    æ–‡æ¡£å­—ç¬¦ä¸²æ ¼å¼è§„èŒƒç¤ºä¾‹ã€‚        è¿™ä¸ªç±»å±•ç¤ºäº†ä¸åŒçš„æ–‡æ¡£å­—ç¬¦ä¸²æ ¼å¼è§„èŒƒã€‚    \"\"\"        def google_style_docstring(self, param1, param2=None):        \"\"\"        Googleé£æ ¼çš„æ–‡æ¡£å­—ç¬¦ä¸²ã€‚                è¿™ä¸ªæ–¹æ³•æ¼”ç¤ºäº†Googleé£æ ¼çš„æ–‡æ¡£å­—ç¬¦ä¸²æ ¼å¼ã€‚                Args:            param1 (str): ç¬¬ä¸€ä¸ªå‚æ•°çš„æè¿°ã€‚            param2 (int, optional): ç¬¬äºŒä¸ªå‚æ•°çš„æè¿°ã€‚é»˜è®¤ä¸ºNoneã€‚                Returns:            bool: è¿”å›å€¼çš„æè¿°ã€‚                Raises:            ValueError: å½“param1ä¸ºç©ºæ—¶æŠ›å‡ºã€‚            TypeError: å½“param2ä¸æ˜¯æ•´æ•°æ—¶æŠ›å‡ºã€‚                Example:            &gt;&gt;&gt; obj = DocstringFormats()            &gt;&gt;&gt; result = obj.google_style_docstring(\"test\", 42)            &gt;&gt;&gt; print(result)            True                Note:            è¿™æ˜¯ä¸€ä¸ªæ³¨æ„äº‹é¡¹ã€‚        \"\"\"        return True        def numpy_style_docstring(self, param1, param2=None):        \"\"\"        NumPyé£æ ¼çš„æ–‡æ¡£å­—ç¬¦ä¸²ã€‚                è¿™ä¸ªæ–¹æ³•æ¼”ç¤ºäº†NumPyé£æ ¼çš„æ–‡æ¡£å­—ç¬¦ä¸²æ ¼å¼ã€‚                Parameters        ----------        param1 : str            ç¬¬ä¸€ä¸ªå‚æ•°çš„æè¿°ã€‚        param2 : int, optional            ç¬¬äºŒä¸ªå‚æ•°çš„æè¿°ï¼Œé»˜è®¤ä¸ºNoneã€‚                Returns        -------        bool            è¿”å›å€¼çš„æè¿°ã€‚                Raises        ------        ValueError            å½“param1ä¸ºç©ºæ—¶æŠ›å‡ºã€‚        TypeError            å½“param2ä¸æ˜¯æ•´æ•°æ—¶æŠ›å‡ºã€‚                Examples        --------        &gt;&gt;&gt; obj = DocstringFormats()        &gt;&gt;&gt; result = obj.numpy_style_docstring(\"test\", 42)        &gt;&gt;&gt; print(result)        True                Notes        -----        è¿™æ˜¯ä¸€ä¸ªæ³¨æ„äº‹é¡¹ã€‚                See Also        --------        google_style_docstring : Googleé£æ ¼çš„æ–‡æ¡£å­—ç¬¦ä¸²        \"\"\"        return True        def sphinx_style_docstring(self, param1, param2=None):        \"\"\"        Sphinxé£æ ¼çš„æ–‡æ¡£å­—ç¬¦ä¸²ã€‚                è¿™ä¸ªæ–¹æ³•æ¼”ç¤ºäº†Sphinxé£æ ¼çš„æ–‡æ¡£å­—ç¬¦ä¸²æ ¼å¼ã€‚                :param param1: ç¬¬ä¸€ä¸ªå‚æ•°çš„æè¿°        :type param1: str        :param param2: ç¬¬äºŒä¸ªå‚æ•°çš„æè¿°        :type param2: int or None        :returns: è¿”å›å€¼çš„æè¿°        :rtype: bool        :raises ValueError: å½“param1ä¸ºç©ºæ—¶æŠ›å‡º        :raises TypeError: å½“param2ä¸æ˜¯æ•´æ•°æ—¶æŠ›å‡º                .. note::           è¿™æ˜¯ä¸€ä¸ªæ³¨æ„äº‹é¡¹ã€‚                .. example::           &gt;&gt;&gt; obj = DocstringFormats()           &gt;&gt;&gt; result = obj.sphinx_style_docstring(\"test\", 42)           &gt;&gt;&gt; print(result)           True        \"\"\"        return Trueprint(\"æŸ¥çœ‹ä¸åŒæ ¼å¼çš„æ–‡æ¡£å­—ç¬¦ä¸²:\")help(DocstringFormats.google_style_docstring)print(\"\\n\" + \"-\"*30)help(DocstringFormats.numpy_style_docstring)print(\"\\n\" + \"-\"*30)help(DocstringFormats.sphinx_style_docstring)# 6. æ–‡æ¡£å­—ç¬¦ä¸²æ£€æŸ¥å·¥å…·print(\"\\n\" + \"=\"*50)print(\"6. æ–‡æ¡£å­—ç¬¦ä¸²æ£€æŸ¥å·¥å…·:\")class DocstringChecker:    \"\"\"    æ–‡æ¡£å­—ç¬¦ä¸²æ£€æŸ¥å·¥å…·ã€‚        è¿™ä¸ªç±»æä¾›äº†æ£€æŸ¥å’Œè¯„ä¼°æ–‡æ¡£å­—ç¬¦ä¸²è´¨é‡çš„æ–¹æ³•ã€‚    \"\"\"        @staticmethod    def check_docstring_quality(obj):        \"\"\"        æ£€æŸ¥å¯¹è±¡çš„æ–‡æ¡£å­—ç¬¦ä¸²è´¨é‡ã€‚                å‚æ•°:            obj: è¦æ£€æŸ¥çš„å¯¹è±¡                è¿”å›:            dict: åŒ…å«æ£€æŸ¥ç»“æœçš„å­—å…¸        \"\"\"        result = {            'has_docstring': False,            'docstring_length': 0,            'has_parameters': False,            'has_returns': False,            'has_examples': False,            'has_raises': False,            'quality_score': 0        }                doc = getattr(obj, '__doc__', None)        if doc:            result['has_docstring'] = True            result['docstring_length'] = len(doc)                        doc_lower = doc.lower()                        # æ£€æŸ¥æ˜¯å¦åŒ…å«å‚æ•°è¯´æ˜            if any(keyword in doc_lower for keyword in ['å‚æ•°', 'parameters', 'args', 'param']):                result['has_parameters'] = True                        # æ£€æŸ¥æ˜¯å¦åŒ…å«è¿”å›å€¼è¯´æ˜            if any(keyword in doc_lower for keyword in ['è¿”å›', 'returns', 'return']):                result['has_returns'] = True                        # æ£€æŸ¥æ˜¯å¦åŒ…å«ç¤ºä¾‹            if any(keyword in doc_lower for keyword in ['ç¤ºä¾‹', 'example', '&gt;&gt;&gt;', 'examples']):                result['has_examples'] = True                        # æ£€æŸ¥æ˜¯å¦åŒ…å«å¼‚å¸¸è¯´æ˜            if any(keyword in doc_lower for keyword in ['å¼‚å¸¸', 'raises', 'raise', 'exception']):                result['has_raises'] = True                        # è®¡ç®—è´¨é‡åˆ†æ•°            score = 0            if result['docstring_length'] &gt; 50:                score += 2            elif result['docstring_length'] &gt; 20:                score += 1                        if result['has_parameters']:                score += 2            if result['has_returns']:                score += 2            if result['has_examples']:                score += 2            if result['has_raises']:                score += 1                        result['quality_score'] = min(score, 10)  # æœ€é«˜10åˆ†                return result        @staticmethod    def suggest_improvements(obj):        \"\"\"        ä¸ºå¯¹è±¡çš„æ–‡æ¡£å­—ç¬¦ä¸²æä¾›æ”¹è¿›å»ºè®®ã€‚                å‚æ•°:            obj: è¦æ£€æŸ¥çš„å¯¹è±¡                è¿”å›:            list: æ”¹è¿›å»ºè®®åˆ—è¡¨        \"\"\"        suggestions = []        quality = DocstringChecker.check_docstring_quality(obj)                if not quality['has_docstring']:            suggestions.append(\"æ·»åŠ æ–‡æ¡£å­—ç¬¦ä¸²\")        else:            if quality['docstring_length'] &lt; 20:                suggestions.append(\"å¢åŠ æ–‡æ¡£å­—ç¬¦ä¸²çš„è¯¦ç»†ç¨‹åº¦\")                        if not quality['has_parameters'] and callable(obj):                try:                    sig = inspect.signature(obj)                    if sig.parameters:                        suggestions.append(\"æ·»åŠ å‚æ•°è¯´æ˜\")                except:                    pass                        if not quality['has_returns'] and callable(obj):                suggestions.append(\"æ·»åŠ è¿”å›å€¼è¯´æ˜\")                        if not quality['has_examples']:                suggestions.append(\"æ·»åŠ ä½¿ç”¨ç¤ºä¾‹\")                        if not quality['has_raises'] and callable(obj):                suggestions.append(\"æ·»åŠ å¼‚å¸¸è¯´æ˜ï¼ˆå¦‚æœé€‚ç”¨ï¼‰\")                return suggestions        @staticmethod    def generate_docstring_template(obj):        \"\"\"        ä¸ºå¯¹è±¡ç”Ÿæˆæ–‡æ¡£å­—ç¬¦ä¸²æ¨¡æ¿ã€‚                å‚æ•°:            obj: è¦ç”Ÿæˆæ¨¡æ¿çš„å¯¹è±¡                è¿”å›:            str: æ–‡æ¡£å­—ç¬¦ä¸²æ¨¡æ¿        \"\"\"        if not callable(obj):            return '\"\"\"\\nå¯¹è±¡æè¿°ã€‚\\n\\nè¯¦ç»†è¯´æ˜ã€‚\\n\"\"\"'                try:            sig = inspect.signature(obj)            obj_name = getattr(obj, '__name__', 'function')                        template = f'\"\"\"\\n{obj_name}çš„ç®€çŸ­æè¿°ã€‚\\n\\nè¯¦ç»†æè¿°{obj_name}çš„åŠŸèƒ½å’Œç”¨é€”ã€‚\\n'                        if sig.parameters:                template += '\\nå‚æ•°:\\n'                for name, param in sig.parameters.items():                    param_type = 'type' if param.annotation == param.empty else str(param.annotation)                    if param.default != param.empty:                        template += f'    {name} ({param_type}, optional): {name}çš„æè¿°ï¼Œé»˜è®¤ä¸º{param.default}\\n'                    else:                        template += f'    {name} ({param_type}): {name}çš„æè¿°\\n'                        if sig.return_annotation != sig.empty:                template += f'\\nè¿”å›:\\n    {sig.return_annotation}: è¿”å›å€¼çš„æè¿°\\n'            else:                template += '\\nè¿”å›:\\n    type: è¿”å›å€¼çš„æè¿°\\n'                        template += '\\nå¼‚å¸¸:\\n    ExceptionType: å¼‚å¸¸æ¡ä»¶çš„æè¿°\\n'            template += '\\nç¤ºä¾‹:\\n    &gt;&gt;&gt; result = {}()\\n    &gt;&gt;&gt; print(result)\\n'.format(obj_name)            template += '\"\"\"'                        return template                    except:            return '\"\"\"\\nå‡½æ•°æè¿°ã€‚\\n\\nè¯¦ç»†è¯´æ˜ã€‚\\n\\nå‚æ•°:\\n    param: å‚æ•°æè¿°\\n\\nè¿”å›:\\n    type: è¿”å›å€¼æè¿°\\n\"\"\"'# æµ‹è¯•æ–‡æ¡£å­—ç¬¦ä¸²æ£€æŸ¥å·¥å…·print(\"æµ‹è¯•æ–‡æ¡£å­—ç¬¦ä¸²æ£€æŸ¥å·¥å…·:\")# æ£€æŸ¥ä¸åŒè´¨é‡çš„æ–‡æ¡£å­—ç¬¦ä¸²test_objects = [    good_docstring_example,    bad_docstring_example,    no_docstring_example,    WellDocumentedClass]for obj in test_objects:    name = getattr(obj, '__name__', str(obj))    quality = DocstringChecker.check_docstring_quality(obj)    suggestions = DocstringChecker.suggest_improvements(obj)        print(f\"\\nå¯¹è±¡: {name}\")    print(f\"  è´¨é‡åˆ†æ•°: {quality['quality_score']}/10\")    print(f\"  æœ‰æ–‡æ¡£å­—ç¬¦ä¸²: {quality['has_docstring']}\")    print(f\"  æ–‡æ¡£é•¿åº¦: {quality['docstring_length']}\")    print(f\"  æœ‰å‚æ•°è¯´æ˜: {quality['has_parameters']}\")    print(f\"  æœ‰è¿”å›å€¼è¯´æ˜: {quality['has_returns']}\")    print(f\"  æœ‰ç¤ºä¾‹: {quality['has_examples']}\")        if suggestions:        print(f\"  æ”¹è¿›å»ºè®®: {', '.join(suggestions)}\")    else:        print(f\"  æ”¹è¿›å»ºè®®: æ–‡æ¡£è´¨é‡è‰¯å¥½\")# ç”Ÿæˆæ¨¡æ¿ç¤ºä¾‹print(\"\\n\" + \"-\"*30)print(\"æ–‡æ¡£å­—ç¬¦ä¸²æ¨¡æ¿ç”Ÿæˆç¤ºä¾‹:\")def template_example_function(name, age=25, active=True):    passtemplate = DocstringChecker.generate_docstring_template(template_example_function)print(f\"\\nä¸º template_example_function ç”Ÿæˆçš„æ¨¡æ¿:\")print(template)âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µhelp()ä½¿ç”¨æ³¨æ„äº‹é¡¹# help()ä½¿ç”¨æ³¨æ„äº‹é¡¹print(\"\\nhelp()ä½¿ç”¨æ³¨æ„äº‹é¡¹:\")# 1. è¾“å‡ºé‡å®šå‘é—®é¢˜print(\"1. è¾“å‡ºé‡å®šå‘é—®é¢˜:\")import ioimport sysfrom contextlib import redirect_stdoutdef capture_help_output(obj):    \"\"\"    æ•è·help()çš„è¾“å‡ºã€‚        å‚æ•°:        obj: è¦è·å–å¸®åŠ©çš„å¯¹è±¡        è¿”å›:        str: help()çš„è¾“å‡ºå†…å®¹    \"\"\"    output = io.StringIO()    with redirect_stdout(output):        help(obj)    return output.getvalue()# æ¼”ç¤ºæ•è·helpè¾“å‡ºprint(\"æ•è·help(len)çš„è¾“å‡º:\")help_output = capture_help_output(len)print(f\"è¾“å‡ºé•¿åº¦: {len(help_output)} å­—ç¬¦\")print(f\"å‰100ä¸ªå­—ç¬¦: {help_output[:100]}...\")# 2. äº¤äº’å¼ç¯å¢ƒvsè„šæœ¬ç¯å¢ƒprint(\"\\n2. äº¤äº’å¼ç¯å¢ƒvsè„šæœ¬ç¯å¢ƒ:\")print(\"\"\"åœ¨ä¸åŒç¯å¢ƒä¸­help()çš„è¡Œä¸ºå·®å¼‚:äº¤äº’å¼ç¯å¢ƒï¼ˆREPLï¼‰:- help()å¯åŠ¨äº¤äº’å¼å¸®åŠ©ç³»ç»Ÿ- è¾“å‡ºä¼šåˆ†é¡µæ˜¾ç¤º- æ”¯æŒæœç´¢å’Œå¯¼èˆªè„šæœ¬ç¯å¢ƒ:- help()ç›´æ¥è¾“å‡ºåˆ°stdout- æ²¡æœ‰åˆ†é¡µåŠŸèƒ½- è¾“å‡ºå¯èƒ½å¾ˆé•¿å»ºè®®:- åœ¨è„šæœ¬ä¸­ä½¿ç”¨help()æ—¶è€ƒè™‘è¾“å‡ºé‡å®šå‘- å¯¹äºé•¿è¾“å‡ºï¼Œè€ƒè™‘ä½¿ç”¨pydocæ¨¡å—- åœ¨è‡ªåŠ¨åŒ–è„šæœ¬ä¸­é¿å…ä½¿ç”¨äº¤äº’å¼help()\"\"\")# 3. æ€§èƒ½è€ƒè™‘print(\"\\n3. æ€§èƒ½è€ƒè™‘:\")import timedef performance_test():    \"\"\"    æµ‹è¯•help()çš„æ€§èƒ½å½±å“ã€‚    \"\"\"    # æµ‹è¯•å¯¹è±¡    test_objects = [len, str, list, dict, int]        print(\"  help()æ€§èƒ½æµ‹è¯•:\")        for obj in test_objects:        start_time = time.time()                # æ•è·è¾“å‡ºä»¥é¿å…æ‰“å°        output = io.StringIO()        with redirect_stdout(output):            help(obj)                end_time = time.time()                obj_name = getattr(obj, '__name__', str(obj))        print(f\"    {obj_name}: {(end_time - start_time)*1000:.2f}ms\")performance_test()# 4. å†…å­˜ä½¿ç”¨print(\"\\n4. å†…å­˜ä½¿ç”¨æ³¨æ„äº‹é¡¹:\")print(\"\"\"help()çš„å†…å­˜ä½¿ç”¨ç‰¹ç‚¹:- help()ä¼šåŠ è½½å¯¹è±¡çš„å®Œæ•´æ–‡æ¡£- å¯¹äºå¤§å‹æ¨¡å—ï¼Œå¯èƒ½æ¶ˆè€—è¾ƒå¤šå†…å­˜- æ–‡æ¡£å­—ç¬¦ä¸²ä¼šè¢«ç¼“å­˜- åœ¨å†…å­˜å—é™ç¯å¢ƒä¸­éœ€è¦æ³¨æ„å»ºè®®:- é¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹è°ƒç”¨help()- å¯¹äºå¤§å‹å¯¹è±¡ï¼Œè€ƒè™‘æŸ¥çœ‹ç‰¹å®šéƒ¨åˆ†- ä½¿ç”¨inspectæ¨¡å—è·å–ç‰¹å®šä¿¡æ¯\"\"\")# 5. æœ€ä½³å®è·µæ€»ç»“print(\"\\n5. help()ä½¿ç”¨æœ€ä½³å®è·µ:\")class HelpBestPractices:    \"\"\"    help()ä½¿ç”¨æœ€ä½³å®è·µç¤ºä¾‹ã€‚    \"\"\"        @staticmethod    def smart_help(obj, capture_output=False, max_lines=50):        \"\"\"        æ™ºèƒ½å¸®åŠ©å‡½æ•°ã€‚                å‚æ•°:            obj: è¦è·å–å¸®åŠ©çš„å¯¹è±¡            capture_output (bool): æ˜¯å¦æ•è·è¾“å‡º            max_lines (int): æœ€å¤§æ˜¾ç¤ºè¡Œæ•°                è¿”å›:            str or None: å¦‚æœcapture_outputä¸ºTrueï¼Œè¿”å›å¸®åŠ©æ–‡æœ¬        \"\"\"        if capture_output:            output = io.StringIO()            with redirect_stdout(output):                help(obj)                        help_text = output.getvalue()                        # é™åˆ¶è¾“å‡ºè¡Œæ•°            if max_lines &gt; 0:                lines = help_text.split('\\n')                if len(lines) &gt; max_lines:                    help_text = '\\n'.join(lines[:max_lines]) + '\\n... (è¾“å‡ºè¢«æˆªæ–­)'                        return help_text        else:            help(obj)        @staticmethod    def quick_info(obj):        \"\"\"        å¿«é€Ÿè·å–å¯¹è±¡ä¿¡æ¯ã€‚                å‚æ•°:            obj: è¦æ£€æŸ¥çš„å¯¹è±¡                è¿”å›:            dict: å¯¹è±¡çš„åŸºæœ¬ä¿¡æ¯        \"\"\"        info = {            'name': getattr(obj, '__name__', 'unknown'),            'type': type(obj).__name__,            'module': getattr(obj, '__module__', 'unknown'),            'doc_available': bool(getattr(obj, '__doc__', None)),            'callable': callable(obj)        }                if info['doc_available']:            doc = obj.__doc__            info['doc_length'] = len(doc)            info['doc_first_line'] = doc.split('\\n')[0].strip() if doc else ''                if callable(obj):            try:                sig = inspect.signature(obj)                info['parameters'] = list(sig.parameters.keys())                info['parameter_count'] = len(sig.parameters)            except:                info['parameters'] = []                info['parameter_count'] = 0                return info        @staticmethod    def help_summary(obj):        \"\"\"        æ˜¾ç¤ºå¯¹è±¡çš„å¸®åŠ©æ‘˜è¦ã€‚                å‚æ•°:            obj: è¦æ˜¾ç¤ºæ‘˜è¦çš„å¯¹è±¡        \"\"\"        info = HelpBestPractices.quick_info(obj)                print(f\"\\nğŸ“‹ {info['name']} æ‘˜è¦:\")        print(f\"  ç±»å‹: {info['type']}\")        print(f\"  æ¨¡å—: {info['module']}\")        print(f\"  å¯è°ƒç”¨: {info['callable']}\")                if info['doc_available']:            print(f\"  æ–‡æ¡£é•¿åº¦: {info['doc_length']} å­—ç¬¦\")            print(f\"  æ–‡æ¡£é¦–è¡Œ: {info['doc_first_line']}\")        else:            print(f\"  æ–‡æ¡£: æ— \")                if info['callable'] and 'parameter_count' in info:            print(f\"  å‚æ•°æ•°é‡: {info['parameter_count']}\")            if info['parameters']:                print(f\"  å‚æ•°åˆ—è¡¨: {', '.join(info['parameters'])}\")                print(f\"\\nğŸ’¡ è·å–å®Œæ•´å¸®åŠ©: help({info['name']})\")        @staticmethod    def compare_help(obj1, obj2):        \"\"\"        æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å¸®åŠ©ä¿¡æ¯ã€‚                å‚æ•°:            obj1: ç¬¬ä¸€ä¸ªå¯¹è±¡            obj2: ç¬¬äºŒä¸ªå¯¹è±¡        \"\"\"        info1 = HelpBestPractices.quick_info(obj1)        info2 = HelpBestPractices.quick_info(obj2)                print(f\"\\nğŸ” å¯¹è±¡æ¯”è¾ƒ:\")        print(f\"  {info1['name']} vs {info2['name']}\")        print(f\"  ç±»å‹: {info1['type']} vs {info2['type']}\")        print(f\"  æ¨¡å—: {info1['module']} vs {info2['module']}\")        print(f\"  å¯è°ƒç”¨: {info1['callable']} vs {info2['callable']}\")        print(f\"  æœ‰æ–‡æ¡£: {info1['doc_available']} vs {info2['doc_available']}\")                if info1['callable'] and info2['callable']:            count1 = info1.get('parameter_count', 0)            count2 = info2.get('parameter_count', 0)            print(f\"  å‚æ•°æ•°é‡: {count1} vs {count2}\")# æµ‹è¯•æœ€ä½³å®è·µprint(\"\\næµ‹è¯•help()æœ€ä½³å®è·µ:\")# æ™ºèƒ½å¸®åŠ©print(\"1. æ™ºèƒ½å¸®åŠ©ç¤ºä¾‹:\")help_text = HelpBestPractices.smart_help(len, capture_output=True, max_lines=10)print(f\"æ•è·çš„å¸®åŠ©æ–‡æœ¬ï¼ˆå‰200å­—ç¬¦ï¼‰: {help_text[:200]}...\")# å¿«é€Ÿä¿¡æ¯print(\"\\n2. å¿«é€Ÿä¿¡æ¯ç¤ºä¾‹:\")HelpBestPractices.help_summary(len)HelpBestPractices.help_summary(WellDocumentedClass)# å¯¹è±¡æ¯”è¾ƒprint(\"\\n3. å¯¹è±¡æ¯”è¾ƒç¤ºä¾‹:\")HelpBestPractices.compare_help(list, tuple)HelpBestPractices.compare_help(len, max)ğŸ”— ç›¸å…³å‡½æ•°å’Œæ¨¡å—å†…ç½®å‡½æ•°  dir() - åˆ—å‡ºå¯¹è±¡çš„å±æ€§  vars() - è¿”å›å¯¹è±¡çš„å±æ€§å­—å…¸  type() - è·å–å¯¹è±¡ç±»å‹  isinstance() - æ£€æŸ¥å¯¹è±¡ç±»å‹  hasattr() - æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æŒ‡å®šå±æ€§  getattr() - è·å–å¯¹è±¡å±æ€§å€¼  callable() - æ£€æŸ¥å¯¹è±¡æ˜¯å¦å¯è°ƒç”¨æ ‡å‡†åº“æ¨¡å—  inspect - å¯¹è±¡æ£€æŸ¥å’Œå†…çœ  pydoc - æ–‡æ¡£ç”Ÿæˆå·¥å…·  doctest - æ–‡æ¡£æµ‹è¯•  ast - æŠ½è±¡è¯­æ³•æ ‘  types - åŠ¨æ€ç±»å‹åˆ›å»ºç¬¬ä¸‰æ–¹åº“  sphinx - æ–‡æ¡£ç”Ÿæˆå·¥å…·  pdoc - è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆ  mkdocs - Markdownæ–‡æ¡£ç”Ÿæˆ  jupyter - äº¤äº’å¼æ–‡æ¡£ç¯å¢ƒğŸ“š æ‰©å±•é˜…è¯»  Pythonæ–‡æ¡£å­—ç¬¦ä¸²çº¦å®š  å†…ç½®å‡½æ•°æ–‡æ¡£  pydocæ¨¡å—æ–‡æ¡£  Sphinxæ–‡æ¡£å·¥å…·ğŸ·ï¸ æ ‡ç­¾å¸®åŠ©ç³»ç»Ÿ æ–‡æ¡£ å†…çœ äº¤äº’å¼å¸®åŠ© æ–‡æ¡£å­—ç¬¦ä¸² APIæ–‡æ¡£ ä»£ç æ–‡æ¡£ å¼€å‘å·¥å…·",
        "url": "/docs/builtins/help/",
        "category": "builtins",
        "tags": ["å¸®åŠ©ç³»ç»Ÿ","æ–‡æ¡£","å†…çœ","äº¤äº’å¼å¸®åŠ©"]
      }
      
    
  
    
      ,
      {
        "title": "PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£",
        "content": "PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£æ¬¢è¿æ¥åˆ°PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£ï¼è¿™é‡ŒåŒ…å«äº†ä»åŸºç¡€è¯­æ³•åˆ°é«˜çº§åº”ç”¨çš„å®Œæ•´Pythonå­¦ä¹ èµ„æºã€‚                                    ğŸ“š                åŸºç¡€è¯­æ³•                        PythonåŸºç¡€è¯­æ³•å’Œæ ¸å¿ƒæ¦‚å¿µ                                å˜é‡ä¸æ•°æ®ç±»å‹                    å˜é‡ä¸æ•°æ®ç±»å‹                    æ§åˆ¶æµç¨‹                    åˆ¤æ–­è¯­å¥ä¸å¾ªç¯è¯­å¥                    match-caseè¯­å¥ - ç»“æ„åŒ–æ¨¡å¼åŒ¹é…                    withè¯­å¥ - ä¸Šä¸‹æ–‡ç®¡ç†å™¨                    raise/assert - å¼‚å¸¸æŠ›å‡ºå’Œæ–­è¨€                    yield - ç”Ÿæˆå™¨å’Œåç¨‹                    å‡½æ•°                    å‡½æ•°å®šä¹‰ä¸è°ƒç”¨                    å‡½æ•°ä½œç”¨åŸŸä¸é—­åŒ…                    æ¨¡å—ä¸åŒ…                    PythonåŒ…å’Œ__init__.pyæ–‡ä»¶                    ç±»ä¸å¯¹è±¡                    ç±»çš„å®šä¹‰ä¸ä½¿ç”¨                    ç±»çš„ç»§æ‰¿                    å¤šæ€æ€§                    å°è£…                    é­”æœ¯æ–¹æ³•                    æŠ½è±¡åŸºç±»                    æ•°æ®ç±» (dataclass)                                                        ğŸ”§                å†…ç½®å‡½æ•°                        Pythonå†…ç½®å‡½æ•°è¯¦è§£                                ğŸ”¤ ç±»å‹è½¬æ¢                    int() - æ•´æ•°è½¬æ¢å‡½æ•°                    float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•°                    str() - å­—ç¬¦ä¸²è½¬æ¢å‡½æ•°                    bool() - å¸ƒå°”å€¼è½¬æ¢å‡½æ•°                    list() - åˆ—è¡¨æ„é€ å‡½æ•°                    tuple() - å…ƒç»„æ„é€ å‡½æ•°                    dict() - å­—å…¸æ„é€ å‡½æ•°                    set() - é›†åˆæ„é€ å‡½æ•°                    frozenset() - ä¸å¯å˜é›†åˆæ„é€ å‡½æ•°                    complex() - å¤æ•°æ„é€ å‡½æ•°                    bytes() - å­—èŠ‚å¯¹è±¡æ„é€ å‡½æ•°                    bytearray() - å¯å˜å­—èŠ‚æ•°ç»„æ„é€ å‡½æ•°                    ğŸ”¢ æ•°å­¦è¿ç®—                    abs() - ç»å¯¹å€¼å‡½æ•°                    round() - æ•°å­—å››èˆäº”å…¥å‡½æ•°                    min() - æœ€å°å€¼å‡½æ•°                    max() - æœ€å¤§å€¼å‡½æ•°                    sum() - æ±‚å’Œå‡½æ•°                    pow() - å¹‚è¿ç®—å‡½æ•°                    divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•°                    round() - æ•°å­—å››èˆäº”å…¥å‡½æ•°                    ğŸ“Š åºåˆ—æ“ä½œ                    len() - é•¿åº¦å‡½æ•°                    sorted() - æ’åºå‡½æ•°                    reversed() - åè½¬å‡½æ•°                    range() - èŒƒå›´å‡½æ•°                    slice() - åˆ‡ç‰‡å¯¹è±¡åˆ›å»ºå‡½æ•°                    ğŸ”„ è¿­ä»£å·¥å…·                    enumerate() - æšä¸¾å‡½æ•°                    zip() - æ‰“åŒ…å‡½æ•°                    map() - æ˜ å°„å‡½æ•°                    filter() - è¿‡æ»¤å‡½æ•°                    iter() - è¿­ä»£å™¨åˆ›å»ºå‡½æ•°                    next() - è¿­ä»£å™¨å…ƒç´ è·å–å‡½æ•°                    ğŸ§  é€»è¾‘åˆ¤æ–­                    any() - é€»è¾‘æˆ–å‡½æ•°                    all() - é€»è¾‘ä¸å‡½æ•°                    ğŸ” å¯¹è±¡æ£€æŸ¥                    type() - ç±»å‹å‡½æ•°                    isinstance() - å®ä¾‹æ£€æŸ¥å‡½æ•°                    issubclass() - å­ç±»æ£€æŸ¥å‡½æ•°                    hasattr() - å±æ€§æ£€æŸ¥å‡½æ•°                    ğŸ“¥ğŸ“¤ è¾“å…¥è¾“å‡º                    print() - è¾“å‡ºå‡½æ•°                    input() - è¾“å…¥å‡½æ•°                    open() - æ–‡ä»¶æ“ä½œå‡½æ•°                    ğŸ”§ é«˜çº§åŠŸèƒ½                    eval() - è¡¨è¾¾å¼æ±‚å€¼å‡½æ•°                    exec() - ä»£ç æ‰§è¡Œå‡½æ•°                    compile() - ä»£ç ç¼–è¯‘å‡½æ•°                    globals() - å…¨å±€å‘½åç©ºé—´å‡½æ•°                    locals() - å±€éƒ¨å‘½åç©ºé—´å‡½æ•°                    vars() - å¯¹è±¡å±æ€§å­—å…¸è·å–å‡½æ•°                    memoryview() - å†…å­˜è§†å›¾å¯¹è±¡æ„é€ å‡½æ•°                    help() - å¸®åŠ©ç³»ç»Ÿå‡½æ•°                    format() - æ ¼å¼åŒ–å‡½æ•°                    f-string - æ ¼å¼åŒ–å­—ç¬¦ä¸²å­—é¢é‡                    repr() - å¯¹è±¡å­—ç¬¦ä¸²è¡¨ç¤ºå‡½æ•°                    ascii() - ASCIIå­—ç¬¦ä¸²è¡¨ç¤ºå‡½æ•°                    ğŸ”¢ è¿›åˆ¶è½¬æ¢                    bin() - äºŒè¿›åˆ¶è½¬æ¢å‡½æ•°                    oct() - å…«è¿›åˆ¶è½¬æ¢å‡½æ•°                    hex() - åå…­è¿›åˆ¶è½¬æ¢å‡½æ•°                    ord() - Unicodeç ç‚¹è·å–å‡½æ•°                    chr() - Unicodeå­—ç¬¦ç”Ÿæˆå‡½æ•°                    æœ€ä½³å®è·µ                    PythonåŸºç¡€è¯­æ³•                    Pythonæ ‡å‡†åº“                    ç¬¬ä¸‰æ–¹åº“                                                        ğŸ“¦                æ ‡å‡†åº“                        Pythonæ ‡å‡†åº“æ¨¡å—                                æ—¥æœŸæ—¶é—´                    timeæ¨¡å—                    calendaræ¨¡å—                    datetimeæ¨¡å—                    å‡½æ•°å¼ç¼–ç¨‹                    operatoræ¨¡å—                    copyæ¨¡å—                    inspectæ¨¡å—                    enumæ¨¡å—                    typingæ¨¡å—                                                        ğŸŒŸ                ç¬¬ä¸‰æ–¹åº“                        å¸¸ç”¨ç¬¬ä¸‰æ–¹åº“å’Œæ¡†æ¶                                Pendulum                    ä½¿ç”¨æŒ‡å—  åŸºç¡€è¯­æ³•: é€‚åˆPythonåˆå­¦è€…ï¼Œæ¶µç›–å˜é‡ã€æ§åˆ¶æµã€å‡½æ•°ç­‰æ ¸å¿ƒæ¦‚å¿µ  å†…ç½®å‡½æ•°: è¯¦ç»†ä»‹ç»Pythonå†…ç½®å‡½æ•°çš„ç”¨æ³•å’Œç¤ºä¾‹  æ ‡å‡†åº“: æ·±å…¥äº†è§£Pythonæ ‡å‡†åº“çš„å„ä¸ªæ¨¡å—  ç¬¬ä¸‰æ–¹åº“: æ¢ç´¢æµè¡Œçš„ç¬¬ä¸‰æ–¹åº“å’Œæ¡†æ¶å­¦ä¹ å»ºè®®  å¾ªåºæ¸è¿›: å»ºè®®æŒ‰ç…§åŸºç¡€è¯­æ³• â†’ å†…ç½®å‡½æ•° â†’ æ ‡å‡†åº“ â†’ ç¬¬ä¸‰æ–¹åº“çš„é¡ºåºå­¦ä¹   å®è·µä¸ºä¸»: æ¯ä¸ªæ¦‚å¿µéƒ½é…æœ‰å®é™…ä»£ç ç¤ºä¾‹ï¼Œå»ºè®®åŠ¨æ‰‹å®è·µ  æŸ¥æ¼è¡¥ç¼º: å¯ä»¥æ ¹æ®éœ€è¦è·³è½¬åˆ°ç‰¹å®šä¸»é¢˜è¿›è¡Œå­¦ä¹ å‚è€ƒèµ„æº  Pythonå®˜æ–¹æ–‡æ¡£  PEP 8 ä»£ç é£æ ¼æŒ‡å—  Pythonå¢å¼ºææ¡ˆ(PEPs)",
        "url": "/docs/",
        "category": "é¡µé¢",
        "tags": []
      }
      
    
  
    
      ,
      {
        "title": "æ ‡å‡†åº“",
        "content": "Pythonæ ‡å‡†åº“Pythonæ ‡å‡†åº“æ˜¯Pythonå®‰è£…åŒ…è‡ªå¸¦çš„æ¨¡å—é›†åˆï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä»æ–‡ä»¶æ“ä½œåˆ°ç½‘ç»œç¼–ç¨‹ï¼Œä»æ•°æ®å¤„ç†åˆ°ç³»ç»Ÿç®¡ç†ã€‚ğŸ“‹ æœ¬æ¨¡å—å†…å®¹[æ–‡ä»¶æ“ä½œ]æ—¥æœŸæ—¶é—´  timeæ¨¡å—ï¼šåŸºç¡€æ—¶é—´å¤„ç†åŠŸèƒ½  calendaræ¨¡å—ï¼šæ—¥å†ç›¸å…³åŠŸèƒ½  datetimeæ¨¡å—ï¼šé«˜çº§æ—¥æœŸæ—¶é—´å¤„ç†å‡½æ•°å¼ç¼–ç¨‹  operatoræ¨¡å—ï¼šè¿ç®—ç¬¦å‡½æ•°æ˜ å°„  copyæ¨¡å—ï¼šå¯¹è±¡æ‹·è´åŠŸèƒ½  inspectæ¨¡å—ï¼šå¯¹è±¡æ£€æŸ¥å’Œåå°„åŠŸèƒ½  enumæ¨¡å—ï¼šæšä¸¾ç±»å‹å’Œå¸¸é‡å®šä¹‰  typingæ¨¡å—ï¼šç±»å‹æç¤ºå’Œé™æ€ç±»å‹æ£€æŸ¥ğŸ¯ å­¦ä¹ ç›®æ ‡å®Œæˆæœ¬æ¨¡å—å­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š  ç†Ÿç»ƒä½¿ç”¨Pythonæ ‡å‡†åº“è¿›è¡Œå¼€å‘  æŒæ¡æ–‡ä»¶å’Œç›®å½•æ“ä½œæŠ€å·§  èƒ½å¤Ÿå¤„ç†æ—¥æœŸæ—¶é—´ç›¸å…³ä»»åŠ¡  ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ–‡æœ¬å¤„ç†  è¿›è¡ŒåŸºæœ¬çš„ç½‘ç»œç¼–ç¨‹  æ“ä½œSQLiteæ•°æ®åº“ğŸ“Š æ ‡å‡†åº“åˆ†ç±»            åˆ†ç±»      ä¸»è¦æ¨¡å—      åŠŸèƒ½æè¿°                  æ–‡ä»¶ç³»ç»Ÿ      os, pathlib, shutil      æ–‡ä»¶å’Œç›®å½•æ“ä½œ              æ•°æ®æ ¼å¼      json, csv, xml      æ•°æ®åºåˆ—åŒ–å’Œè§£æ              ç½‘ç»œé€šä¿¡      urllib, http, socket      ç½‘ç»œç¼–ç¨‹å’Œé€šä¿¡              æ•°æ®åº“      sqlite3, dbm      æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢              æ–‡æœ¬å¤„ç†      re, string, textwrap      æ–‡æœ¬æ“ä½œå’Œæ ¼å¼åŒ–              æ—¶é—´æ—¥æœŸ      datetime, time, calendar      æ—¶é—´å¤„ç†å’Œè®¡ç®—              å‡½æ•°å¼ç¼–ç¨‹      operator, functools, itertools      å‡½æ•°å¼ç¼–ç¨‹å·¥å…·              ç³»ç»ŸæœåŠ¡      sys, os, platform      ç³»ç»Ÿä¿¡æ¯å’ŒæœåŠ¡              å¹¶å‘ç¼–ç¨‹      threading, multiprocessing      å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹      ğŸ’¡ ä½¿ç”¨å»ºè®®  ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ï¼šé¿å…é‡å¤é€ è½®å­  äº†è§£æ¨¡å—ç»“æ„ï¼šç†è§£æ¯ä¸ªæ¨¡å—çš„ä¸»è¦åŠŸèƒ½å’Œç±»  æŸ¥é˜…æ–‡æ¡£ï¼šæ ‡å‡†åº“æ–‡æ¡£è¯¦ç»†ä¸”æƒå¨  æ³¨æ„ç‰ˆæœ¬å·®å¼‚ï¼šä¸åŒPythonç‰ˆæœ¬çš„æ ‡å‡†åº“å¯èƒ½æœ‰å·®å¼‚  æ€§èƒ½è€ƒè™‘ï¼šäº†è§£ä¸åŒæ¨¡å—çš„æ€§èƒ½ç‰¹ç‚¹ğŸ” å¸¸ç”¨æ¨¡å—é€ŸæŸ¥å¿…å¤‡æ¨¡å—  os: æ“ä½œç³»ç»Ÿæ¥å£  sys: ç³»ç»Ÿç‰¹å®šå‚æ•°å’Œå‡½æ•°  datetime: æ—¥æœŸå’Œæ—¶é—´  json: JSONç¼–ç å™¨å’Œè§£ç å™¨  re: æ­£åˆ™è¡¨è¾¾å¼å®ç”¨æ¨¡å—  collections: ä¸“ç”¨å®¹å™¨æ•°æ®ç±»å‹  itertools: åˆ›å»ºè¿­ä»£å™¨çš„å‡½æ•°  functools: é«˜é˜¶å‡½æ•°å’Œå¯è°ƒç”¨å¯¹è±¡æ“ä½œ  operator: è¿ç®—ç¬¦å‡½æ•°å’Œå‡½æ•°å¼ç¼–ç¨‹å·¥å…·  pathlib: é¢å‘å¯¹è±¡çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„  urllib: URLå¤„ç†æ¨¡å—ğŸ”— ç›¸å…³èµ„æº  Pythonæ ‡å‡†åº“å®˜æ–¹æ–‡æ¡£  Pythonæ¨¡å—ç´¢å¼•  Python HOWTOs",
        "url": "/docs/stdlib/",
        "category": "stdlib",
        "tags": []
      }
      
    
  
    
      ,
      {
        "title": "åŸºç¡€è¯­æ³•",
        "content": "PythonåŸºç¡€è¯­æ³•PythonåŸºç¡€è¯­æ³•æ˜¯å­¦ä¹ Pythonç¼–ç¨‹çš„èµ·ç‚¹ï¼Œæœ¬æ¨¡å—æ¶µç›–äº†Pythonè¯­è¨€çš„æ ¸å¿ƒæ¦‚å¿µå’ŒåŸºæœ¬è¯­æ³•ç»“æ„ã€‚ğŸ“‹ æœ¬æ¨¡å—å†…å®¹å˜é‡ä¸æ•°æ®ç±»å‹  å˜é‡ä¸æ•°æ®ç±»å‹æ§åˆ¶æµç¨‹  åˆ¤æ–­è¯­å¥ä¸å¾ªç¯è¯­å¥  match-caseè¯­å¥ - ç»“æ„åŒ–æ¨¡å¼åŒ¹é…  withè¯­å¥ - ä¸Šä¸‹æ–‡ç®¡ç†å™¨  raise/assert - å¼‚å¸¸æŠ›å‡ºå’Œæ–­è¨€  yield - ç”Ÿæˆå™¨å’Œåç¨‹å‡½æ•°  å‡½æ•°å®šä¹‰ä¸è°ƒç”¨  å‡½æ•°ä½œç”¨åŸŸä¸é—­åŒ…æ¨¡å—ä¸åŒ…  PythonåŒ…å’Œ__init__.pyæ–‡ä»¶ç±»ä¸å¯¹è±¡  ç±»çš„å®šä¹‰ä¸ä½¿ç”¨  ç±»çš„ç»§æ‰¿  å¤šæ€æ€§  å°è£…  é­”æœ¯æ–¹æ³•  æŠ½è±¡åŸºç±»  æ•°æ®ç±» (dataclass)ğŸ¯ å­¦ä¹ ç›®æ ‡å®Œæˆæœ¬æ¨¡å—å­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š  ç†Ÿç»ƒä½¿ç”¨PythonåŸºæœ¬è¯­æ³•ç¼–å†™ç¨‹åº  ç†è§£Pythonçš„æ•°æ®ç±»å‹å’Œå˜é‡æœºåˆ¶  æŒæ¡æ§åˆ¶æµç¨‹çš„ä½¿ç”¨æ–¹æ³•  èƒ½å¤Ÿå®šä¹‰å’Œä½¿ç”¨å‡½æ•°  ç†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µ  æ­£ç¡®å¤„ç†ç¨‹åºä¸­çš„å¼‚å¸¸æƒ…å†µğŸ’¡ å­¦ä¹ å»ºè®®  å¾ªåºæ¸è¿›ï¼šæŒ‰ç…§é¡ºåºå­¦ä¹ å„ä¸ªä¸»é¢˜  åŠ¨æ‰‹å®è·µï¼šæ¯ä¸ªæ¦‚å¿µéƒ½è¦é€šè¿‡ä»£ç å®è·µ  å¤šåšç»ƒä¹ ï¼šå®Œæˆæ¯ä¸ªç« èŠ‚çš„ç»ƒä¹ é¢˜  æŸ¥é˜…æ–‡æ¡£ï¼šå…»æˆæŸ¥é˜…å®˜æ–¹æ–‡æ¡£çš„ä¹ æƒ¯ğŸ”— ç›¸å…³èµ„æº  Pythonå®˜æ–¹æ•™ç¨‹  Pythonè¯­è¨€å‚è€ƒ  PEP 8 ä»£ç é£æ ¼æŒ‡å—",
        "url": "/docs/basics/",
        "category": "basics",
        "tags": []
      }
      
    
  
    
      ,
      {
        "title": "PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£",
        "content": "æ¬¢è¿æ¥åˆ°PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£è¿™æ˜¯ä¸€ä¸ªç³»ç»ŸåŒ–æ•´ç†PythonçŸ¥è¯†ä½“ç³»çš„å¼€æºé¡¹ç›®ï¼Œæ¶µç›–åŸºç¡€è¯­æ³•ã€å†…ç½®å‡½æ•°ã€æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“ç­‰å†…å®¹ã€‚ğŸ¯ é¡¹ç›®ç›®æ ‡  æ„å»ºå®Œæ•´çš„PythonçŸ¥è¯†ä½“ç³»  æä¾›æ¸…æ™°çš„æ–‡æ¡£ç»“æ„å’Œä¾¿æ·çš„æœç´¢åŠŸèƒ½  æ”¯æŒå¤šäººåä½œå’Œé•¿æœŸç»´æŠ¤  ä¸ºPythonå­¦ä¹ è€…æä¾›ç³»ç»ŸåŒ–çš„å‚è€ƒèµ„æ–™ğŸ“š æ–‡æ¡£ç›®å½•åŸºç¡€è¯­æ³•  å˜é‡ä¸æ•°æ®ç±»å‹  æ§åˆ¶æµç¨‹  å‡½æ•°å®šä¹‰  ç±»ä¸å¯¹è±¡  å¼‚å¸¸å¤„ç†å†…ç½®å‡½æ•°  å­—ç¬¦ä¸²å‡½æ•°  æ•°å­¦å‡½æ•°  é›†åˆå‡½æ•°  è¾“å…¥è¾“å‡ºå‡½æ•°æ ‡å‡†åº“  æ–‡ä»¶æ“ä½œ  æ—¥æœŸæ—¶é—´  æ­£åˆ™è¡¨è¾¾å¼  ç½‘ç»œç¼–ç¨‹  æ•°æ®åº“æ“ä½œç¬¬ä¸‰æ–¹åº“  æ•°æ®åˆ†æ  Webå¼€å‘  æœºå™¨å­¦ä¹   å›¾åƒå¤„ç†ğŸ” æœç´¢åŠŸèƒ½ä½¿ç”¨é¡µé¢é¡¶éƒ¨çš„æœç´¢æ¡†å¿«é€ŸæŸ¥æ‰¾ç›¸å…³å†…å®¹ã€‚ğŸ¤ è´¡çŒ®æŒ‡å—æ¬¢è¿è´¡çŒ®å†…å®¹ï¼è¯·æŸ¥çœ‹ è´¡çŒ®æŒ‡å— äº†è§£å¦‚ä½•å‚ä¸é¡¹ç›®ã€‚ğŸ“„ è®¸å¯è¯æœ¬é¡¹ç›®é‡‡ç”¨ MIT License å¼€æºåè®®ã€‚",
        "url": "/",
        "category": "é¡µé¢",
        "tags": []
      }
      
    
  
    
      ,
      {
        "title": "å†…ç½®å‡½æ•°",
        "content": "Pythonå†…ç½®å‡½æ•°å®Œæ•´å‚è€ƒğŸ“ æ¦‚è¿°Pythonå†…ç½®å‡½æ•°æ˜¯è§£é‡Šå™¨è‡ªå¸¦çš„å‡½æ•°ï¼Œæ— éœ€å¯¼å…¥ä»»ä½•æ¨¡å—å³å¯ç›´æ¥ä½¿ç”¨ã€‚è¿™äº›å‡½æ•°æ¶µç›–äº†æ•°æ®ç±»å‹è½¬æ¢ã€æ•°å­¦è¿ç®—ã€åºåˆ—æ“ä½œã€è¾“å…¥è¾“å‡ºã€å¯¹è±¡æ£€æŸ¥ç­‰å„ä¸ªæ–¹é¢ï¼Œæ˜¯Pythonç¼–ç¨‹çš„åŸºç¡€å·¥å…·ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡å®Œæˆæœ¬æ¨¡å—å­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š  ç†Ÿç»ƒä½¿ç”¨Pythonæ‰€æœ‰å¸¸ç”¨å†…ç½®å‡½æ•°  ç†è§£ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œæ–¹æ³•  æŒæ¡è¾“å…¥è¾“å‡ºçš„å„ç§æ–¹å¼  èƒ½å¤Ÿè¿›è¡Œé«˜æ•ˆçš„æ•°æ®å¤„ç†å’Œç±»å‹è½¬æ¢  ç¼–å†™æ›´ç®€æ´ä¼˜é›…çš„Pythonä»£ç   ç†è§£å‡½æ•°å¼ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  æ•°æ®ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ç­‰ï¼‰  åŸºæœ¬çš„ç¼–ç¨‹æ¦‚å¿µï¼ˆå˜é‡ã€å‡½æ•°ã€å¾ªç¯ç­‰ï¼‰ğŸ” å†…ç½®å‡½æ•°æˆ–æ–¹æ³•åˆ†ç±»è¯¦è§ˆğŸ”¤ ç±»å‹è½¬æ¢  int() - æ•´æ•°è½¬æ¢å‡½æ•°  float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•°  str() - å­—ç¬¦ä¸²è½¬æ¢å‡½æ•°  bool() - å¸ƒå°”å€¼è½¬æ¢å‡½æ•°  list() - åˆ—è¡¨æ„é€ å‡½æ•°  tuple() - å…ƒç»„æ„é€ å‡½æ•°  dict() - å­—å…¸æ„é€ å‡½æ•°  set() - é›†åˆæ„é€ å‡½æ•°  frozenset() - ä¸å¯å˜é›†åˆæ„é€ å‡½æ•°  complex() - å¤æ•°æ„é€ å‡½æ•°  bytes() - å­—èŠ‚å¯¹è±¡æ„é€ å‡½æ•°  bytearray() - å¯å˜å­—èŠ‚æ•°ç»„æ„é€ å‡½æ•°ğŸ”¢ æ•°å­¦è¿ç®—  abs() - ç»å¯¹å€¼å‡½æ•°  round() - æ•°å­—å››èˆäº”å…¥å‡½æ•°  min() - æœ€å°å€¼å‡½æ•°  max() - æœ€å¤§å€¼å‡½æ•°  sum() - æ±‚å’Œå‡½æ•°  pow() - å¹‚è¿ç®—å‡½æ•°  divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•°  round() - æ•°å­—å››èˆäº”å…¥å‡½æ•°ğŸ“Š åºåˆ—æ“ä½œ  len() - é•¿åº¦å‡½æ•°  sorted() - æ’åºå‡½æ•°  reversed() - åè½¬å‡½æ•°  range() - èŒƒå›´å‡½æ•°  slice() - åˆ‡ç‰‡å¯¹è±¡åˆ›å»ºå‡½æ•°ğŸ”„ è¿­ä»£å·¥å…·  enumerate() - æšä¸¾å‡½æ•°  zip() - æ‰“åŒ…å‡½æ•°  map() - æ˜ å°„å‡½æ•°  filter() - è¿‡æ»¤å‡½æ•°  iter() - è¿­ä»£å™¨åˆ›å»ºå‡½æ•°  next() - è¿­ä»£å™¨å…ƒç´ è·å–å‡½æ•°ğŸ§  é€»è¾‘åˆ¤æ–­  any() - é€»è¾‘æˆ–å‡½æ•°  all() - é€»è¾‘ä¸å‡½æ•°ğŸ” å¯¹è±¡æ£€æŸ¥  type() - ç±»å‹å‡½æ•°  isinstance() - å®ä¾‹æ£€æŸ¥å‡½æ•°  issubclass() - å­ç±»æ£€æŸ¥å‡½æ•°  hasattr() - å±æ€§æ£€æŸ¥å‡½æ•°ğŸ“¥ğŸ“¤ è¾“å…¥è¾“å‡º  print() - è¾“å‡ºå‡½æ•°  input() - è¾“å…¥å‡½æ•°  open() - æ–‡ä»¶æ“ä½œå‡½æ•°ğŸ”§ é«˜çº§åŠŸèƒ½  eval() - è¡¨è¾¾å¼æ±‚å€¼å‡½æ•°  exec() - ä»£ç æ‰§è¡Œå‡½æ•°  compile() - ä»£ç ç¼–è¯‘å‡½æ•°  globals() - å…¨å±€å‘½åç©ºé—´å‡½æ•°  locals() - å±€éƒ¨å‘½åç©ºé—´å‡½æ•°  vars() - å¯¹è±¡å±æ€§å­—å…¸è·å–å‡½æ•°  memoryview() - å†…å­˜è§†å›¾å¯¹è±¡æ„é€ å‡½æ•°  help() - å¸®åŠ©ç³»ç»Ÿå‡½æ•°  format() - æ ¼å¼åŒ–å‡½æ•°  f-string - æ ¼å¼åŒ–å­—ç¬¦ä¸²å­—é¢é‡  repr() - å¯¹è±¡å­—ç¬¦ä¸²è¡¨ç¤ºå‡½æ•°  ascii() - ASCIIå­—ç¬¦ä¸²è¡¨ç¤ºå‡½æ•°ğŸ”¢ è¿›åˆ¶è½¬æ¢  bin() - äºŒè¿›åˆ¶è½¬æ¢å‡½æ•°  oct() - å…«è¿›åˆ¶è½¬æ¢å‡½æ•°  hex() - åå…­è¿›åˆ¶è½¬æ¢å‡½æ•°  ord() - Unicodeç ç‚¹è·å–å‡½æ•°  chr() - Unicodeå­—ç¬¦ç”Ÿæˆå‡½æ•°âš ï¸ æ³¨æ„äº‹é¡¹æ€§èƒ½è€ƒè™‘  å†…ç½®å‡½æ•°ä¼˜å…ˆï¼šå†…ç½®å‡½æ•°é€šå¸¸æ¯”è‡ªå®šä¹‰å‡½æ•°æ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç”¨Cè¯­è¨€å®ç°çš„  é¿å…é‡å¤è½¬æ¢ï¼šä¸è¦åœ¨å¾ªç¯ä¸­é‡å¤è¿›è¡Œç±»å‹è½¬æ¢  åˆç†ä½¿ç”¨ç”Ÿæˆå™¨ï¼šå¯¹äºå¤§æ•°æ®é›†ï¼Œè€ƒè™‘ä½¿ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼è€Œä¸æ˜¯åˆ—è¡¨æ¨å¯¼å¼å¸¸è§é”™è¯¯  ç±»å‹é”™è¯¯ï¼šç¡®ä¿ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ç±»å‹æ­£ç¡®  ç©ºåºåˆ—å¤„ç†ï¼šä½¿ç”¨min()ã€max()ç­‰å‡½æ•°æ—¶è¦æ³¨æ„ç©ºåºåˆ—ä¼šå¼•å‘å¼‚å¸¸  æµ®ç‚¹æ•°ç²¾åº¦ï¼šä½¿ç”¨round()å‡½æ•°æ—¶è¦æ³¨æ„æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜æœ€ä½³å®è·µ  å‡½æ•°ç»„åˆï¼šå­¦ä¼šå°†å¤šä¸ªå†…ç½®å‡½æ•°ç»„åˆä½¿ç”¨ä»¥å®ç°å¤æ‚åŠŸèƒ½  é”™è¯¯å¤„ç†ï¼šåœ¨ä½¿ç”¨å¯èƒ½å¼•å‘å¼‚å¸¸çš„å‡½æ•°æ—¶æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†  ä»£ç å¯è¯»æ€§ï¼šè™½ç„¶å†…ç½®å‡½æ•°å¾ˆå¼ºå¤§ï¼Œä½†è¦ä¿æŒä»£ç çš„å¯è¯»æ€§  æ–‡æ¡£æŸ¥é˜…ï¼šé‡åˆ°é—®é¢˜æ—¶æŸ¥é˜…å®˜æ–¹æ–‡æ¡£è·å–å‡†ç¡®ä¿¡æ¯ğŸ“Š å‡½æ•°ä½¿ç”¨é¢‘ç‡ç»Ÿè®¡            ä½¿ç”¨é¢‘ç‡      å‡½æ•°åˆ—è¡¨      åº”ç”¨åœºæ™¯                  æé«˜é¢‘      print(), len(), type(), str(), int()      æ—¥å¸¸ç¼–ç¨‹å¿…å¤‡              é«˜é¢‘      list(), dict(), range(), enumerate(), zip()      æ•°æ®ç»“æ„æ“ä½œ              ä¸­é¢‘      map(), filter(), sorted(), any(), all()      æ•°æ®å¤„ç†å’ŒéªŒè¯              ä½é¢‘      eval(), exec(), compile(), globals(), locals()      é«˜çº§ç¼–ç¨‹å’Œå…ƒç¼–ç¨‹      ç›¸å…³æ¨¡å—  PythonåŸºç¡€è¯­æ³• - Pythonç¼–ç¨‹åŸºç¡€  Pythonæ ‡å‡†åº“ - æ ‡å‡†åº“å‡½æ•°å’Œæ¨¡å—  ç¬¬ä¸‰æ–¹åº“ - å¸¸ç”¨ç¬¬ä¸‰æ–¹åº“ğŸ“š æ‰©å±•é˜…è¯»  Pythonå†…ç½®å‡½æ•°å®˜æ–¹æ–‡æ¡£  Pythonæ•°æ®æ¨¡å‹å®˜æ–¹æ–‡æ¡£  Pythonæ ‡å‡†åº“æ¦‚è§ˆ  Pythonå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—  Pythonæ€§èƒ½ä¼˜åŒ–æŠ€å·§ğŸ·ï¸ æ ‡ç­¾Python å†…ç½®å‡½æ•° builtins åŸºç¡€ç¼–ç¨‹ æ•°æ®å¤„ç† ç±»å‹è½¬æ¢ å‡½æ•°å¼ç¼–ç¨‹æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ¨¡å‹ä¹¦ç‰ˆæœ¬: 2.0",
        "url": "/docs/builtins/",
        "category": "builtins",
        "tags": ["Python","å†…ç½®å‡½æ•°","builtins","åŸºç¡€"]
      }
      
    
  
    
      ,
      {
        "title": "ç¬¬ä¸‰æ–¹åº“",
        "content": "Pythonç¬¬ä¸‰æ–¹åº“Pythonæ‹¥æœ‰ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åº“ç”Ÿæ€ç³»ç»Ÿï¼Œè¿™äº›åº“æå¤§åœ°æ‰©å±•äº†Pythonçš„åŠŸèƒ½ï¼Œä½¿å…¶åœ¨å„ä¸ªé¢†åŸŸéƒ½æœ‰å‡ºè‰²çš„è¡¨ç°ã€‚ğŸ“‹ æœ¬æ¨¡å—å†…å®¹æ—¥æœŸæ—¶é—´å¤„ç†  Pendulum: æ›´å¥½çš„æ—¥æœŸæ—¶é—´å¤„ç†åº“ğŸ¯ å­¦ä¹ ç›®æ ‡å®Œæˆæœ¬æ¨¡å—å­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š  äº†è§£Pythonç”Ÿæ€ç³»ç»Ÿä¸­çš„é‡è¦ç¬¬ä¸‰æ–¹åº“  æŒæ¡æ•°æ®åˆ†æå’Œå¯è§†åŒ–æŠ€èƒ½  èƒ½å¤Ÿå¼€å‘Webåº”ç”¨å’ŒAPI  ç†è§£æœºå™¨å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µå’Œå®ç°  è¿›è¡Œå›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰ä»»åŠ¡  é€‰æ‹©åˆé€‚çš„åº“æ¥è§£å†³ç‰¹å®šé—®é¢˜ğŸ“Š åº“åˆ†ç±»æ¦‚è§ˆ            é¢†åŸŸ      æ ¸å¿ƒåº“      åº”ç”¨åœºæ™¯                  æ•°æ®ç§‘å­¦      NumPy, Pandas, Matplotlib      æ•°æ®åˆ†æã€å¯è§†åŒ–              Webå¼€å‘      Django, Flask, FastAPI      ç½‘ç«™ã€APIå¼€å‘              æœºå™¨å­¦ä¹       Scikit-learn, TensorFlow      AIæ¨¡å‹å¼€å‘              å›¾åƒå¤„ç†      Pillow, OpenCV      å›¾åƒç¼–è¾‘ã€è®¡ç®—æœºè§†è§‰              ç½‘ç»œçˆ¬è™«      Requests, Scrapy      æ•°æ®é‡‡é›†              æ•°æ®åº“      SQLAlchemy, PyMongo      æ•°æ®å­˜å‚¨              æµ‹è¯•      pytest, unittest      ä»£ç æµ‹è¯•              éƒ¨ç½²      Docker, Kubernetes      åº”ç”¨éƒ¨ç½²      ğŸŒŸ çƒ­é—¨åº“æ’è¡Œä¸‹è½½é‡æœ€é«˜  requests - HTTPåº“  urllib3 - HTTPå®¢æˆ·ç«¯  setuptools - åŒ…æ„å»ºå·¥å…·  certifi - SSLè¯ä¹¦  numpy - æ•°å€¼è®¡ç®—GitHubæ˜Ÿæ•°æœ€å¤š  TensorFlow - æœºå™¨å­¦ä¹   Django - Webæ¡†æ¶  Flask - Webæ¡†æ¶  Scrapy - çˆ¬è™«æ¡†æ¶  Pandas - æ•°æ®åˆ†æğŸ”— ç›¸å…³èµ„æº  PyPI - PythonåŒ…ç´¢å¼•  Awesome Python  Pythonåº“æ’è¡Œæ¦œ  AnacondaåŒ…ä»“åº“âš ï¸ æ³¨æ„äº‹é¡¹  ç‰ˆæœ¬å…¼å®¹æ€§: æ³¨æ„Pythonç‰ˆæœ¬å’Œåº“ç‰ˆæœ¬çš„å…¼å®¹æ€§  ä¾èµ–ç®¡ç†: ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒé¿å…ä¾èµ–å†²çª  å®‰å…¨æ€§: åªä»å¯ä¿¡æºå®‰è£…åŒ…  è®¸å¯è¯: äº†è§£åº“çš„è®¸å¯è¯è¦æ±‚  ç»´æŠ¤çŠ¶æ€: é€‰æ‹©æ´»è·ƒç»´æŠ¤çš„åº“",
        "url": "/docs/thirdparty/",
        "category": "thirdparty",
        "tags": []
      }
      
    
  
    
      ,
      {
        "title": "PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£",
        "content": "# PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£æ¬¢è¿æ¥åˆ°PythonçŸ¥è¯†ä½“ç³»æ–‡æ¡£ï¼è¿™é‡ŒåŒ…å«äº†ä»åŸºç¡€è¯­æ³•åˆ°é«˜çº§åº”ç”¨çš„å®Œæ•´Pythonå­¦ä¹ èµ„æºã€‚                                    ğŸ“š                åŸºç¡€è¯­æ³•                        PythonåŸºç¡€è¯­æ³•å’Œæ ¸å¿ƒæ¦‚å¿µ                                å˜é‡ä¸æ•°æ®ç±»å‹                    åˆ¤æ–­è¯­å¥ä¸å¾ªç¯è¯­å¥                    match-caseè¯­å¥ - ç»“æ„åŒ–æ¨¡å¼åŒ¹é…                    withè¯­å¥ - ä¸Šä¸‹æ–‡ç®¡ç†å™¨                    raise/assert - å¼‚å¸¸æŠ›å‡ºå’Œæ–­è¨€                    yield - ç”Ÿæˆå™¨å’Œåç¨‹                    å‡½æ•°å®šä¹‰ä¸è°ƒç”¨                    å‡½æ•°ä½œç”¨åŸŸä¸é—­åŒ…                    PythonåŒ…å’Œ__init__.pyæ–‡ä»¶                    ç±»çš„å®šä¹‰ä¸ä½¿ç”¨                    ç±»çš„ç»§æ‰¿                    å¤šæ€æ€§                    å°è£…                    é­”æœ¯æ–¹æ³•                    æŠ½è±¡åŸºç±»                    æ•°æ®ç±» (dataclass)                                                        ğŸ”§                å†…ç½®å‡½æ•°                        Pythonå†…ç½®å‡½æ•°è¯¦è§£                                int() - æ•´æ•°è½¬æ¢å‡½æ•°                    float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•°                    str() - å­—ç¬¦ä¸²è½¬æ¢å‡½æ•°                    bool() - å¸ƒå°”å€¼è½¬æ¢å‡½æ•°                    list() - åˆ—è¡¨æ„é€ å‡½æ•°                    tuple() - å…ƒç»„æ„é€ å‡½æ•°                    dict() - å­—å…¸æ„é€ å‡½æ•°                    set() - é›†åˆæ„é€ å‡½æ•°                    frozenset() - ä¸å¯å˜é›†åˆæ„é€ å‡½æ•°                    complex() - å¤æ•°æ„é€ å‡½æ•°                    bytes() - å­—èŠ‚å¯¹è±¡æ„é€ å‡½æ•°                    bytearray() - å¯å˜å­—èŠ‚æ•°ç»„æ„é€ å‡½æ•°                    abs() - ç»å¯¹å€¼å‡½æ•°                    round() - æ•°å­—å››èˆäº”å…¥å‡½æ•°                    min() - æœ€å°å€¼å‡½æ•°                    max() - æœ€å¤§å€¼å‡½æ•°                    sum() - æ±‚å’Œå‡½æ•°                    pow() - å¹‚è¿ç®—å‡½æ•°                    divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—å‡½æ•°                    round() - æ•°å­—å››èˆäº”å…¥å‡½æ•°                    len() - é•¿åº¦å‡½æ•°                    sorted() - æ’åºå‡½æ•°                    reversed() - åè½¬å‡½æ•°                    range() - èŒƒå›´å‡½æ•°                    slice() - åˆ‡ç‰‡å¯¹è±¡åˆ›å»ºå‡½æ•°                    enumerate() - æšä¸¾å‡½æ•°                    zip() - æ‰“åŒ…å‡½æ•°                    map() - æ˜ å°„å‡½æ•°                    filter() - è¿‡æ»¤å‡½æ•°                    iter() - è¿­ä»£å™¨åˆ›å»ºå‡½æ•°                    next() - è¿­ä»£å™¨å…ƒç´ è·å–å‡½æ•°                    any() - é€»è¾‘æˆ–å‡½æ•°                    all() - é€»è¾‘ä¸å‡½æ•°                    type() - ç±»å‹å‡½æ•°                    isinstance() - å®ä¾‹æ£€æŸ¥å‡½æ•°                    issubclass() - å­ç±»æ£€æŸ¥å‡½æ•°                    hasattr() - å±æ€§æ£€æŸ¥å‡½æ•°                    print() - è¾“å‡ºå‡½æ•°                    input() - è¾“å…¥å‡½æ•°                    open() - æ–‡ä»¶æ“ä½œå‡½æ•°                    eval() - è¡¨è¾¾å¼æ±‚å€¼å‡½æ•°                    exec() - ä»£ç æ‰§è¡Œå‡½æ•°                    compile() - ä»£ç ç¼–è¯‘å‡½æ•°                    globals() - å…¨å±€å‘½åç©ºé—´å‡½æ•°                    locals() - å±€éƒ¨å‘½åç©ºé—´å‡½æ•°                    vars() - å¯¹è±¡å±æ€§å­—å…¸è·å–å‡½æ•°                    memoryview() - å†…å­˜è§†å›¾å¯¹è±¡æ„é€ å‡½æ•°                    help() - å¸®åŠ©ç³»ç»Ÿå‡½æ•°                    format() - æ ¼å¼åŒ–å‡½æ•°                    f-string - æ ¼å¼åŒ–å­—ç¬¦ä¸²å­—é¢é‡                    repr() - å¯¹è±¡å­—ç¬¦ä¸²è¡¨ç¤ºå‡½æ•°                    ascii() - ASCIIå­—ç¬¦ä¸²è¡¨ç¤ºå‡½æ•°                    bin() - äºŒè¿›åˆ¶è½¬æ¢å‡½æ•°                    oct() - å…«è¿›åˆ¶è½¬æ¢å‡½æ•°                    hex() - åå…­è¿›åˆ¶è½¬æ¢å‡½æ•°                    ord() - Unicodeç ç‚¹è·å–å‡½æ•°                    chr() - Unicodeå­—ç¬¦ç”Ÿæˆå‡½æ•°                    PythonåŸºç¡€è¯­æ³•                    Pythonæ ‡å‡†åº“                    ç¬¬ä¸‰æ–¹åº“                                                        ğŸ“¦                æ ‡å‡†åº“                        Pythonæ ‡å‡†åº“æ¨¡å—                                timeæ¨¡å—                    calendaræ¨¡å—                    datetimeæ¨¡å—                    operatoræ¨¡å—                    copyæ¨¡å—                    inspectæ¨¡å—                    enumæ¨¡å—                    typingæ¨¡å—                                                        ğŸŒŸ                ç¬¬ä¸‰æ–¹åº“                        å¸¸ç”¨ç¬¬ä¸‰æ–¹åº“å’Œæ¡†æ¶                                Pendulum                    ## ä½¿ç”¨æŒ‡å—- **åŸºç¡€è¯­æ³•**: é€‚åˆPythonåˆå­¦è€…ï¼Œæ¶µç›–å˜é‡ã€æ§åˆ¶æµã€å‡½æ•°ç­‰æ ¸å¿ƒæ¦‚å¿µ- **å†…ç½®å‡½æ•°**: è¯¦ç»†ä»‹ç»Pythonå†…ç½®å‡½æ•°çš„ç”¨æ³•å’Œç¤ºä¾‹- **æ ‡å‡†åº“**: æ·±å…¥äº†è§£Pythonæ ‡å‡†åº“çš„å„ä¸ªæ¨¡å—- **ç¬¬ä¸‰æ–¹åº“**: æ¢ç´¢æµè¡Œçš„ç¬¬ä¸‰æ–¹åº“å’Œæ¡†æ¶## å­¦ä¹ å»ºè®®1. **å¾ªåºæ¸è¿›**: å»ºè®®æŒ‰ç…§åŸºç¡€è¯­æ³• â†’ å†…ç½®å‡½æ•° â†’ æ ‡å‡†åº“ â†’ ç¬¬ä¸‰æ–¹åº“çš„é¡ºåºå­¦ä¹ 2. **å®è·µä¸ºä¸»**: æ¯ä¸ªæ¦‚å¿µéƒ½é…æœ‰å®é™…ä»£ç ç¤ºä¾‹ï¼Œå»ºè®®åŠ¨æ‰‹å®è·µ3. **æŸ¥æ¼è¡¥ç¼º**: å¯ä»¥æ ¹æ®éœ€è¦è·³è½¬åˆ°ç‰¹å®šä¸»é¢˜è¿›è¡Œå­¦ä¹ ## å‚è€ƒèµ„æº- [Pythonå®˜æ–¹æ–‡æ¡£](https://docs.python.org/3/)- [PEP 8 ä»£ç é£æ ¼æŒ‡å—](https://pep8.org/)- [Pythonå¢å¼ºææ¡ˆ(PEPs)](https://www.python.org/dev/peps/)",
        "url": "/docs/",
        "category": "é¡µé¢",
        "tags": []
      }
      
    
  
    
      ,
      {
        "title": "input() - è¾“å…¥å‡½æ•°",
        "content": "input() - è¾“å…¥å‡½æ•°ğŸ“ æ¦‚è¿°input() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºä»æ ‡å‡†è¾“å…¥ï¼ˆé€šå¸¸æ˜¯é”®ç›˜ï¼‰è¯»å–ç”¨æˆ·è¾“å…¥ã€‚å®ƒä¼šæš‚åœç¨‹åºæ‰§è¡Œï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥æ–‡æœ¬å¹¶æŒ‰ä¸‹å›è½¦é”®ï¼Œç„¶åå°†è¾“å…¥çš„å†…å®¹ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ã€‚è¿™æ˜¯Pythonä¸­å®ç°ç”¨æˆ·äº¤äº’çš„æœ€åŸºæœ¬æ–¹å¼ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡input()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œå‚æ•°  ç†è§£input()å‡½æ•°çš„è¿”å›å€¼ç‰¹æ€§  å­¦ä¼šå¤„ç†ç”¨æˆ·è¾“å…¥çš„å„ç§æƒ…å†µ  æŒæ¡è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†æŠ€å·§ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  å­—ç¬¦ä¸²æ“ä½œ  ç±»å‹è½¬æ¢ï¼ˆint(), float()ç­‰ï¼‰  å¼‚å¸¸å¤„ç†åŸºç¡€ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µinput() å‡½æ•°ä»æ ‡å‡†è¾“å…¥è¯»å–ä¸€è¡Œæ–‡æœ¬ï¼Œå»é™¤æœ«å°¾çš„æ¢è¡Œç¬¦ï¼Œå¹¶å°†ç»“æœä½œä¸ºå­—ç¬¦ä¸²è¿”å›ã€‚å¦‚æœæä¾›äº†æç¤ºä¿¡æ¯å‚æ•°ï¼Œä¼šåœ¨ç­‰å¾…è¾“å…¥å‰æ˜¾ç¤ºè¯¥æç¤ºã€‚è¯­æ³•æ ¼å¼input([prompt])å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  prompt      str      å¦      æ—       æ˜¾ç¤ºç»™ç”¨æˆ·çš„æç¤ºä¿¡æ¯      è¿”å›å€¼  ç±»å‹: str  è¯´æ˜: ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²ï¼ˆå»é™¤æœ«å°¾æ¢è¡Œç¬¦ï¼‰  ç‰¹ç‚¹: æ€»æ˜¯è¿”å›å­—ç¬¦ä¸²ç±»å‹ï¼Œå³ä½¿ç”¨æˆ·è¾“å…¥æ•°å­—ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# åŸºæœ¬è¾“å…¥print(\"åŸºæœ¬è¾“å…¥ç¤ºä¾‹:\")name = input(\"è¯·è¾“å…¥æ‚¨çš„å§“å: \")print(f\"æ‚¨å¥½ï¼Œ{name}ï¼\")# æ— æç¤ºè¾“å…¥print(\"\\næ— æç¤ºè¾“å…¥:\")print(\"è¯·è¾“å…¥ä»»æ„å†…å®¹:\")user_input = input()print(f\"æ‚¨è¾“å…¥äº†: {user_input}\")# å¤šè¡Œæç¤ºprint(\"\\nå¤šè¡Œæç¤ºç¤ºä¾‹:\")age = input(\"è¯·è¾“å…¥æ‚¨çš„å¹´é¾„\\n(è¾“å…¥æ•°å­—): \")print(f\"æ‚¨çš„å¹´é¾„æ˜¯: {age}\")# è¾“å…¥ç±»å‹æ¼”ç¤ºprint(\"\\nè¾“å…¥ç±»å‹æ¼”ç¤º:\")test_inputs = [    \"123\",      # æ•°å­—å­—ç¬¦ä¸²    \"3.14\",     # æµ®ç‚¹æ•°å­—ç¬¦ä¸²    \"hello\",    # æ™®é€šå­—ç¬¦ä¸²    \"\",         # ç©ºå­—ç¬¦ä¸²    \"  spaces  \" # åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²]print(\"æ¨¡æ‹Ÿä¸åŒç±»å‹çš„è¾“å…¥:\")for test_input in test_inputs:    print(f\"è¾“å…¥: '{test_input}' -&gt; ç±»å‹: {type(test_input)}, é•¿åº¦: {len(test_input)}\")# å®é™…äº¤äº’ç¤ºä¾‹print(\"\\nå®é™…äº¤äº’ç¤ºä¾‹:\")favorite_color = input(\"æ‚¨æœ€å–œæ¬¢çš„é¢œè‰²æ˜¯ä»€ä¹ˆ? \")favorite_number = input(\"æ‚¨æœ€å–œæ¬¢çš„æ•°å­—æ˜¯ä»€ä¹ˆ? \")print(f\"\\nä¸ªäººä¿¡æ¯æ€»ç»“:\")print(f\"å§“å: {name}\")print(f\"å¹´é¾„: {age}\")print(f\"å–œæ¬¢çš„é¢œè‰²: {favorite_color}\")print(f\"å–œæ¬¢çš„æ•°å­—: {favorite_number}\")# è¾“å…¥éªŒè¯åŸºç¡€print(\"\\nè¾“å…¥éªŒè¯ç¤ºä¾‹:\")while True:    password = input(\"è¯·è®¾ç½®å¯†ç  (è‡³å°‘6ä½): \")    if len(password) &gt;= 6:        print(\"å¯†ç è®¾ç½®æˆåŠŸï¼\")        break    else:        print(\"å¯†ç å¤ªçŸ­ï¼Œè¯·é‡æ–°è¾“å…¥\")# å¤„ç†ç‰¹æ®Šå­—ç¬¦print(\"\\nç‰¹æ®Šå­—ç¬¦å¤„ç†:\")special_input = input(\"è¯·è¾“å…¥åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„æ–‡æœ¬: \")print(f\"åŸå§‹è¾“å…¥: {repr(special_input)}\")print(f\"æ˜¾ç¤ºè¾“å…¥: {special_input}\")print(f\"è¾“å…¥é•¿åº¦: {len(special_input)}\")# å¤§å°å†™å¤„ç†print(\"\\nå¤§å°å†™å¤„ç†:\")response = input(\"æ‚¨åŒæ„æ¡æ¬¾å—? (yes/no): \")response_lower = response.lower().strip()if response_lower in ['yes', 'y', 'æ˜¯', 'åŒæ„']:    print(\"æ„Ÿè°¢æ‚¨çš„åŒæ„ï¼\")elif response_lower in ['no', 'n', 'å¦', 'ä¸åŒæ„']:    print(\"æ‚¨é€‰æ‹©äº†ä¸åŒæ„\")else:    print(f\"æ— æ³•è¯†åˆ«çš„å›ç­”: {response}\")æ•°æ®ç±»å‹è½¬æ¢# æ•°å­—è¾“å…¥å¤„ç†print(\"æ•°å­—è¾“å…¥å¤„ç†:\")# æ•´æ•°è¾“å…¥def get_integer_input(prompt, min_val=None, max_val=None):    \"\"\"è·å–æ•´æ•°è¾“å…¥ï¼Œå¸¦éªŒè¯\"\"\"    while True:        try:            value = int(input(prompt))            if min_val is not None and value &lt; min_val:                print(f\"è¾“å…¥å€¼ä¸èƒ½å°äº {min_val}\")                continue            if max_val is not None and value &gt; max_val:                print(f\"è¾“å…¥å€¼ä¸èƒ½å¤§äº {max_val}\")                continue            return value        except ValueError:            print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„æ•´æ•°\")# æµ®ç‚¹æ•°è¾“å…¥def get_float_input(prompt, min_val=None, max_val=None):    \"\"\"è·å–æµ®ç‚¹æ•°è¾“å…¥ï¼Œå¸¦éªŒè¯\"\"\"    while True:        try:            value = float(input(prompt))            if min_val is not None and value &lt; min_val:                print(f\"è¾“å…¥å€¼ä¸èƒ½å°äº {min_val}\")                continue            if max_val is not None and value &gt; max_val:                print(f\"è¾“å…¥å€¼ä¸èƒ½å¤§äº {max_val}\")                continue            return value        except ValueError:            print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—\")# ä½¿ç”¨ç¤ºä¾‹print(\"\\næ•´æ•°è¾“å…¥ç¤ºä¾‹:\")age = get_integer_input(\"è¯·è¾“å…¥æ‚¨çš„å¹´é¾„ (0-150): \", 0, 150)print(f\"æ‚¨çš„å¹´é¾„æ˜¯: {age}\")print(\"\\næµ®ç‚¹æ•°è¾“å…¥ç¤ºä¾‹:\")height = get_float_input(\"è¯·è¾“å…¥æ‚¨çš„èº«é«˜ (ç±³, 0.5-3.0): \", 0.5, 3.0)print(f\"æ‚¨çš„èº«é«˜æ˜¯: {height:.2f} ç±³\")# å¸ƒå°”å€¼è¾“å…¥def get_boolean_input(prompt):    \"\"\"è·å–å¸ƒå°”å€¼è¾“å…¥\"\"\"    while True:        response = input(prompt).lower().strip()        if response in ['true', 't', 'yes', 'y', '1', 'æ˜¯', 'å¯¹', 'çœŸ']:            return True        elif response in ['false', 'f', 'no', 'n', '0', 'å¦', 'é”™', 'å‡']:            return False        else:            print(\"è¯·è¾“å…¥ yes/no, true/false, æˆ– 1/0\")print(\"\\nå¸ƒå°”å€¼è¾“å…¥ç¤ºä¾‹:\")is_student = get_boolean_input(\"æ‚¨æ˜¯å­¦ç”Ÿå—? (yes/no): \")print(f\"æ˜¯å¦ä¸ºå­¦ç”Ÿ: {is_student}\")# é€‰æ‹©è¾“å…¥def get_choice_input(prompt, choices, case_sensitive=False):    \"\"\"è·å–é€‰æ‹©è¾“å…¥\"\"\"    if not case_sensitive:        choices = [choice.lower() for choice in choices]        while True:        response = input(prompt)        if not case_sensitive:            response = response.lower()                if response in choices:            return response        else:            print(f\"è¯·é€‰æ‹©ä»¥ä¸‹é€‰é¡¹ä¹‹ä¸€: {', '.join(choices)}\")print(\"\\né€‰æ‹©è¾“å…¥ç¤ºä¾‹:\")colors = ['çº¢è‰²', 'ç»¿è‰²', 'è“è‰²', 'é»„è‰²']chosen_color = get_choice_input(    f\"è¯·é€‰æ‹©é¢œè‰² ({'/'.join(colors)}): \",     colors)print(f\"æ‚¨é€‰æ‹©çš„é¢œè‰²æ˜¯: {chosen_color}\")# åˆ—è¡¨è¾“å…¥def get_list_input(prompt, separator=',', item_type=str):    \"\"\"è·å–åˆ—è¡¨è¾“å…¥\"\"\"    while True:        try:            user_input = input(prompt)            if not user_input.strip():                return []                        items = [item.strip() for item in user_input.split(separator)]            if item_type != str:                items = [item_type(item) for item in items]                        return items        except ValueError as e:            print(f\"è¾“å…¥æ ¼å¼é”™è¯¯: {e}\")            print(f\"è¯·è¾“å…¥ç”¨ '{separator}' åˆ†éš”çš„å€¼\")print(\"\\nåˆ—è¡¨è¾“å…¥ç¤ºä¾‹:\")hobbies = get_list_input(\"è¯·è¾“å…¥æ‚¨çš„çˆ±å¥½ (ç”¨é€—å·åˆ†éš”): \")print(f\"æ‚¨çš„çˆ±å¥½: {hobbies}\")scores = get_list_input(\"è¯·è¾“å…¥è€ƒè¯•åˆ†æ•° (ç”¨é€—å·åˆ†éš”): \", item_type=float)if scores:    print(f\"åˆ†æ•°åˆ—è¡¨: {scores}\")    print(f\"å¹³å‡åˆ†: {sum(scores)/len(scores):.2f}\")    print(f\"æœ€é«˜åˆ†: {max(scores)}\")    print(f\"æœ€ä½åˆ†: {min(scores)}\")# å­—å…¸è¾“å…¥def get_dict_input(prompt, pair_separator=',', key_value_separator='='):    \"\"\"è·å–å­—å…¸è¾“å…¥\"\"\"    while True:        try:            user_input = input(prompt)            if not user_input.strip():                return {}                        result = {}            pairs = user_input.split(pair_separator)                        for pair in pairs:                if key_value_separator not in pair:                    raise ValueError(f\"ç¼ºå°‘é”®å€¼åˆ†éš”ç¬¦ '{key_value_separator}'\")                                key, value = pair.split(key_value_separator, 1)                result[key.strip()] = value.strip()                        return result        except ValueError as e:            print(f\"è¾“å…¥æ ¼å¼é”™è¯¯: {e}\")            print(f\"æ ¼å¼: key{key_value_separator}value{pair_separator}key{key_value_separator}value\")print(\"\\nå­—å…¸è¾“å…¥ç¤ºä¾‹:\")user_info = get_dict_input(\"è¯·è¾“å…¥ä¸ªäººä¿¡æ¯ (æ ¼å¼: name=å¼ ä¸‰,age=25,city=åŒ—äº¬): \")print(f\"ä¸ªäººä¿¡æ¯: {user_info}\")for key, value in user_info.items():    print(f\"  {key}: {value}\")é«˜çº§è¾“å…¥å¤„ç†import reimport datetime# æ­£åˆ™è¡¨è¾¾å¼éªŒè¯def get_email_input(prompt):    \"\"\"è·å–é‚®ç®±è¾“å…¥ï¼Œå¸¦æ ¼å¼éªŒè¯\"\"\"    email_pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$'        while True:        email = input(prompt).strip()        if re.match(email_pattern, email):            return email        else:            print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€\")def get_phone_input(prompt):    \"\"\"è·å–ç”µè¯å·ç è¾“å…¥ï¼Œå¸¦æ ¼å¼éªŒè¯\"\"\"    phone_patterns = [        r'^1[3-9]\\d{9}$',  # ä¸­å›½æ‰‹æœºå·        r'^\\d{3}-\\d{4}-\\d{4}$',  # ç¾å›½æ ¼å¼        r'^\\d{11}$'  # 11ä½æ•°å­—    ]        while True:        phone = input(prompt).strip()        if any(re.match(pattern, phone) for pattern in phone_patterns):            return phone        else:            print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µè¯å·ç  (å¦‚: 13812345678 æˆ– 123-4567-8901)\")def get_date_input(prompt, date_format='%Y-%m-%d'):    \"\"\"è·å–æ—¥æœŸè¾“å…¥ï¼Œå¸¦æ ¼å¼éªŒè¯\"\"\"    while True:        try:            date_str = input(prompt).strip()            date_obj = datetime.datetime.strptime(date_str, date_format)            return date_obj.date()        except ValueError:            print(f\"è¯·è¾“å…¥æœ‰æ•ˆçš„æ—¥æœŸæ ¼å¼ (å¦‚: {datetime.date.today().strftime(date_format)})\")print(\"é«˜çº§è¾“å…¥éªŒè¯ç¤ºä¾‹:\")# é‚®ç®±è¾“å…¥email = get_email_input(\"è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€: \")print(f\"é‚®ç®±: {email}\")# ç”µè¯è¾“å…¥phone = get_phone_input(\"è¯·è¾“å…¥æ‚¨çš„ç”µè¯å·ç : \")print(f\"ç”µè¯: {phone}\")# æ—¥æœŸè¾“å…¥birthdate = get_date_input(\"è¯·è¾“å…¥æ‚¨çš„å‡ºç”Ÿæ—¥æœŸ (YYYY-MM-DD): \")print(f\"å‡ºç”Ÿæ—¥æœŸ: {birthdate}\")# è®¡ç®—å¹´é¾„today = datetime.date.today()age = today.year - birthdate.year - ((today.month, today.day) &lt; (birthdate.month, birthdate.day))print(f\"æ‚¨çš„å¹´é¾„: {age} å²\")# å¯†ç å¼ºåº¦éªŒè¯def get_strong_password(prompt):    \"\"\"è·å–å¼ºå¯†ç è¾“å…¥\"\"\"    def check_password_strength(password):        \"\"\"æ£€æŸ¥å¯†ç å¼ºåº¦\"\"\"        issues = []                if len(password) &lt; 8:            issues.append(\"é•¿åº¦è‡³å°‘8ä½\")        if not re.search(r'[a-z]', password):            issues.append(\"åŒ…å«å°å†™å­—æ¯\")        if not re.search(r'[A-Z]', password):            issues.append(\"åŒ…å«å¤§å†™å­—æ¯\")        if not re.search(r'\\d', password):            issues.append(\"åŒ…å«æ•°å­—\")        if not re.search(r'[!@#$%^&amp;*(),.?\":{}|&lt;&gt;]', password):            issues.append(\"åŒ…å«ç‰¹æ®Šå­—ç¬¦\")                return issues        while True:        password = input(prompt)        issues = check_password_strength(password)                if not issues:            return password        else:            print(\"å¯†ç å¼ºåº¦ä¸è¶³ï¼Œéœ€è¦:\")            for issue in issues:                print(f\"  - {issue}\")print(\"\\nå¯†ç å¼ºåº¦éªŒè¯:\")strong_password = get_strong_password(\"è¯·è®¾ç½®å¼ºå¯†ç : \")print(\"å¯†ç è®¾ç½®æˆåŠŸï¼\")# æ–‡ä»¶è·¯å¾„è¾“å…¥import osdef get_file_path_input(prompt, must_exist=True, file_type=None):    \"\"\"è·å–æ–‡ä»¶è·¯å¾„è¾“å…¥\"\"\"    while True:        file_path = input(prompt).strip().strip('\"\\'')                if must_exist and not os.path.exists(file_path):            print(\"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°è¾“å…¥\")            continue                if file_type and not file_path.lower().endswith(file_type.lower()):            print(f\"è¯·è¾“å…¥ {file_type} ç±»å‹çš„æ–‡ä»¶\")            continue                return file_pathprint(\"\\næ–‡ä»¶è·¯å¾„è¾“å…¥ç¤ºä¾‹:\")print(\"(è¿™é‡Œåªæ˜¯æ¼”ç¤ºï¼Œå®é™…è¿è¡Œæ—¶éœ€è¦çœŸå®æ–‡ä»¶)\")# file_path = get_file_path_input(\"è¯·è¾“å…¥æ–‡ä»¶è·¯å¾„: \", must_exist=True, file_type=\".txt\")# print(f\"é€‰æ‹©çš„æ–‡ä»¶: {file_path}\")# å¤šæ­¥éª¤è¾“å…¥å‘å¯¼def user_registration_wizard():    \"\"\"ç”¨æˆ·æ³¨å†Œå‘å¯¼\"\"\"    print(\"\\n=== ç”¨æˆ·æ³¨å†Œå‘å¯¼ ===\")        # æ”¶é›†ç”¨æˆ·ä¿¡æ¯    user_data = {}        print(\"\\nç¬¬1æ­¥: åŸºæœ¬ä¿¡æ¯\")    user_data['username'] = input(\"ç”¨æˆ·å: \")    user_data['email'] = get_email_input(\"é‚®ç®±: \")    user_data['phone'] = get_phone_input(\"ç”µè¯: \")        print(\"\\nç¬¬2æ­¥: ä¸ªäººä¿¡æ¯\")    user_data['full_name'] = input(\"çœŸå®å§“å: \")    user_data['birthdate'] = get_date_input(\"å‡ºç”Ÿæ—¥æœŸ (YYYY-MM-DD): \")    user_data['gender'] = get_choice_input(\"æ€§åˆ« (ç”·/å¥³/å…¶ä»–): \", ['ç”·', 'å¥³', 'å…¶ä»–'])        print(\"\\nç¬¬3æ­¥: åå¥½è®¾ç½®\")    user_data['interests'] = get_list_input(\"å…´è¶£çˆ±å¥½ (ç”¨é€—å·åˆ†éš”): \")    user_data['newsletter'] = get_boolean_input(\"è®¢é˜…æ–°é—»é‚®ä»¶? (yes/no): \")        print(\"\\nç¬¬4æ­¥: å®‰å…¨è®¾ç½®\")    user_data['password'] = get_strong_password(\"è®¾ç½®å¯†ç : \")        # ç¡®è®¤ä¿¡æ¯    print(\"\\n=== æ³¨å†Œä¿¡æ¯ç¡®è®¤ ===\")    for key, value in user_data.items():        if key == 'password':            print(f\"{key}: {'*' * len(value)}\")        else:            print(f\"{key}: {value}\")        confirm = get_boolean_input(\"\\nç¡®è®¤æ³¨å†Œ? (yes/no): \")    if confirm:        print(\"\\næ³¨å†ŒæˆåŠŸï¼æ¬¢è¿åŠ å…¥æˆ‘ä»¬ï¼\")        return user_data    else:        print(\"\\næ³¨å†Œå·²å–æ¶ˆ\")        return None# è¿è¡Œæ³¨å†Œå‘å¯¼print(\"\\nç”¨æˆ·æ³¨å†Œå‘å¯¼æ¼”ç¤º:\")print(\"(è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„äº¤äº’å¼æ³¨å†Œæµç¨‹æ¼”ç¤º)\")# registration_result = user_registration_wizard()é”™è¯¯å¤„ç†å’Œå¼‚å¸¸æƒ…å†µ# å¤„ç†è¾“å…¥ä¸­æ–­def safe_input(prompt, default=None):    \"\"\"å®‰å…¨çš„è¾“å…¥å‡½æ•°ï¼Œå¤„ç†ä¸­æ–­å¼‚å¸¸\"\"\"    try:        return input(prompt)    except KeyboardInterrupt:        print(\"\\nç”¨æˆ·ä¸­æ–­è¾“å…¥\")        if default is not None:            print(f\"ä½¿ç”¨é»˜è®¤å€¼: {default}\")            return default        raise    except EOFError:        print(\"\\nè¾“å…¥æµç»“æŸ\")        if default is not None:            print(f\"ä½¿ç”¨é»˜è®¤å€¼: {default}\")            return default        raise# è¶…æ—¶è¾“å…¥ï¼ˆéœ€è¦é¢å¤–çš„åº“æ”¯æŒï¼‰import signaldef timeout_input(prompt, timeout=30):    \"\"\"å¸¦è¶…æ—¶çš„è¾“å…¥å‡½æ•°\"\"\"    def timeout_handler(signum, frame):        raise TimeoutError(\"è¾“å…¥è¶…æ—¶\")        # è®¾ç½®è¶…æ—¶ä¿¡å·    signal.signal(signal.SIGALRM, timeout_handler)    signal.alarm(timeout)        try:        result = input(prompt)        signal.alarm(0)  # å–æ¶ˆè¶…æ—¶        return result    except TimeoutError:        print(f\"\\nè¾“å…¥è¶…æ—¶ ({timeout}ç§’)\")        return None    finally:        signal.alarm(0)  # ç¡®ä¿å–æ¶ˆè¶…æ—¶print(\"é”™è¯¯å¤„ç†ç¤ºä¾‹:\")# å®‰å…¨è¾“å…¥æ¼”ç¤ºprint(\"\\nå®‰å…¨è¾“å…¥æ¼”ç¤º (æŒ‰ Ctrl+C æµ‹è¯•ä¸­æ–­å¤„ç†):\")try:    safe_result = safe_input(\"è¯·è¾“å…¥å†…å®¹ (å¯æŒ‰Ctrl+Cä¸­æ–­): \", default=\"é»˜è®¤å€¼\")    print(f\"è¾“å…¥ç»“æœ: {safe_result}\")except KeyboardInterrupt:    print(\"ç¨‹åºè¢«ç”¨æˆ·ä¸­æ–­\")# è¾“å…¥é‡è¯•æœºåˆ¶def retry_input(prompt, max_retries=3, validator=None):    \"\"\"å¸¦é‡è¯•æœºåˆ¶çš„è¾“å…¥å‡½æ•°\"\"\"    for attempt in range(max_retries):        try:            result = input(f\"[å°è¯• {attempt + 1}/{max_retries}] {prompt}\")                        if validator:                if validator(result):                    return result                else:                    print(\"è¾“å…¥éªŒè¯å¤±è´¥\")            else:                return result                        except (KeyboardInterrupt, EOFError):            print(f\"\\nè¾“å…¥è¢«ä¸­æ–­ (å‰©ä½™å°è¯•: {max_retries - attempt - 1})\")            if attempt == max_retries - 1:                raise        raise ValueError(f\"è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•° ({max_retries})\")# æ•°å­—éªŒè¯å™¨def is_valid_number(value):    \"\"\"éªŒè¯æ˜¯å¦ä¸ºæœ‰æ•ˆæ•°å­—\"\"\"    try:        float(value)        return True    except ValueError:        return Falseprint(\"\\né‡è¯•è¾“å…¥æ¼”ç¤º:\")try:    number_input = retry_input(        \"è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—: \",         max_retries=3,         validator=is_valid_number    )    print(f\"è¾“å…¥çš„æ•°å­—: {float(number_input)}\")except ValueError as e:    print(f\"è¾“å…¥å¤±è´¥: {e}\")except KeyboardInterrupt:    print(\"ç”¨æˆ·å–æ¶ˆè¾“å…¥\")# è¾“å…¥æ—¥å¿—è®°å½•import datetimedef logged_input(prompt, log_file=None):    \"\"\"è®°å½•è¾“å…¥æ—¥å¿—çš„å‡½æ•°\"\"\"    timestamp = datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\")        try:        result = input(prompt)                # è®°å½•æ—¥å¿—        log_entry = f\"[{timestamp}] INPUT: {prompt.strip()} -&gt; {len(result)} chars\\n\"                if log_file:            with open(log_file, 'a', encoding='utf-8') as f:                f.write(log_entry)        else:            print(f\"LOG: {log_entry.strip()}\")                return result            except Exception as e:        error_log = f\"[{timestamp}] ERROR: {prompt.strip()} -&gt; {str(e)}\\n\"                if log_file:            with open(log_file, 'a', encoding='utf-8') as f:                f.write(error_log)        else:            print(f\"ERROR LOG: {error_log.strip()}\")                raiseprint(\"\\nè¾“å…¥æ—¥å¿—æ¼”ç¤º:\")logged_result = logged_input(\"è¯·è¾“å…¥æµ‹è¯•å†…å®¹: \")print(f\"è¾“å…¥å†…å®¹: {logged_result}\")# è¾“å…¥ç¼“å­˜class InputCache:    \"\"\"è¾“å…¥ç¼“å­˜ç±»\"\"\"        def __init__(self):        self.cache = {}        def cached_input(self, prompt, cache_key=None, use_cache=True):        \"\"\"å¸¦ç¼“å­˜çš„è¾“å…¥å‡½æ•°\"\"\"        if cache_key is None:            cache_key = prompt                # æ£€æŸ¥ç¼“å­˜        if use_cache and cache_key in self.cache:            cached_value = self.cache[cache_key]            use_cached = get_boolean_input(                f\"ä½¿ç”¨ç¼“å­˜å€¼ '{cached_value}'? (yes/no): \"            )            if use_cached:                return cached_value                # è·å–æ–°è¾“å…¥        result = input(prompt)                # ä¿å­˜åˆ°ç¼“å­˜        self.cache[cache_key] = result                return result        def clear_cache(self):        \"\"\"æ¸…ç©ºç¼“å­˜\"\"\"        self.cache.clear()        def show_cache(self):        \"\"\"æ˜¾ç¤ºç¼“å­˜å†…å®¹\"\"\"        if self.cache:            print(\"ç¼“å­˜å†…å®¹:\")            for key, value in self.cache.items():                print(f\"  {key}: {value}\")        else:            print(\"ç¼“å­˜ä¸ºç©º\")print(\"\\nè¾“å…¥ç¼“å­˜æ¼”ç¤º:\")input_cache = InputCache()# ç¬¬ä¸€æ¬¡è¾“å…¥name1 = input_cache.cached_input(\"è¯·è¾“å…¥æ‚¨çš„å§“å: \", \"name\")print(f\"å§“å: {name1}\")# ç¬¬äºŒæ¬¡è¾“å…¥ï¼ˆä¼šæç¤ºä½¿ç”¨ç¼“å­˜ï¼‰name2 = input_cache.cached_input(\"è¯·å†æ¬¡è¾“å…¥æ‚¨çš„å§“å: \", \"name\")print(f\"å§“å: {name2}\")input_cache.show_cache()å®é™…åº”ç”¨åœºæ™¯# å‘½ä»¤è¡Œå·¥å…·ç¤ºä¾‹def calculator_cli():    \"\"\"ç®€å•è®¡ç®—å™¨å‘½ä»¤è¡Œç•Œé¢\"\"\"    print(\"=== ç®€å•è®¡ç®—å™¨ ===\")    print(\"æ”¯æŒçš„æ“ä½œ: +, -, *, /, %, **\")    print(\"è¾“å…¥ 'quit' é€€å‡º\")        while True:        try:            expression = input(\"\\nè¯·è¾“å…¥è®¡ç®—è¡¨è¾¾å¼: \").strip()                        if expression.lower() in ['quit', 'exit', 'q']:                print(\"å†è§ï¼\")                break                        if not expression:                continue                        # å®‰å…¨çš„è¡¨è¾¾å¼æ±‚å€¼            allowed_chars = set('0123456789+-*/.% ()')            if not all(c in allowed_chars for c in expression.replace(' ', '')):                print(\"é”™è¯¯: åŒ…å«ä¸å…è®¸çš„å­—ç¬¦\")                continue                        result = eval(expression)            print(f\"ç»“æœ: {expression} = {result}\")                    except ZeroDivisionError:            print(\"é”™è¯¯: é™¤é›¶é”™è¯¯\")        except SyntaxError:            print(\"é”™è¯¯: è¯­æ³•é”™è¯¯\")        except Exception as e:            print(f\"é”™è¯¯: {e}\")# é…ç½®æ–‡ä»¶ç”Ÿæˆå™¨def config_generator():    \"\"\"é…ç½®æ–‡ä»¶ç”Ÿæˆå™¨\"\"\"    print(\"=== é…ç½®æ–‡ä»¶ç”Ÿæˆå™¨ ===\")        config = {}        # æ•°æ®åº“é…ç½®    print(\"\\næ•°æ®åº“é…ç½®:\")    config['database'] = {        'host': input(\"æ•°æ®åº“ä¸»æœº [localhost]: \") or 'localhost',        'port': int(input(\"æ•°æ®åº“ç«¯å£ [5432]: \") or '5432'),        'name': input(\"æ•°æ®åº“åç§°: \"),        'username': input(\"ç”¨æˆ·å: \"),        'password': input(\"å¯†ç : \")    }        # æœåŠ¡å™¨é…ç½®    print(\"\\næœåŠ¡å™¨é…ç½®:\")    config['server'] = {        'host': input(\"æœåŠ¡å™¨ä¸»æœº [0.0.0.0]: \") or '0.0.0.0',        'port': int(input(\"æœåŠ¡å™¨ç«¯å£ [8000]: \") or '8000'),        'debug': get_boolean_input(\"è°ƒè¯•æ¨¡å¼? (yes/no) [no]: \") or False    }        # æ—¥å¿—é…ç½®    print(\"\\næ—¥å¿—é…ç½®:\")    log_level = get_choice_input(        \"æ—¥å¿—çº§åˆ« (DEBUG/INFO/WARNING/ERROR) [INFO]: \",        ['DEBUG', 'INFO', 'WARNING', 'ERROR']    ) or 'INFO'        config['logging'] = {        'level': log_level,        'file': input(\"æ—¥å¿—æ–‡ä»¶è·¯å¾„ [app.log]: \") or 'app.log',        'max_size': input(\"æœ€å¤§æ–‡ä»¶å¤§å° (MB) [10]: \") or '10'    }        # ç”Ÿæˆé…ç½®æ–‡ä»¶    import json    config_json = json.dumps(config, indent=2, ensure_ascii=False)        print(\"\\nç”Ÿæˆçš„é…ç½®:\")    print(config_json)        save_config = get_boolean_input(\"\\nä¿å­˜é…ç½®åˆ°æ–‡ä»¶? (yes/no): \")    if save_config:        filename = input(\"é…ç½®æ–‡ä»¶å [config.json]: \") or 'config.json'        with open(filename, 'w', encoding='utf-8') as f:            f.write(config_json)        print(f\"é…ç½®å·²ä¿å­˜åˆ° {filename}\")        return config# æ•°æ®æ”¶é›†å·¥å…·def survey_tool():    \"\"\"é—®å·è°ƒæŸ¥å·¥å…·\"\"\"    print(\"=== ç”¨æˆ·æ»¡æ„åº¦è°ƒæŸ¥ ===\")        responses = []        questions = [        {            'id': 'q1',            'text': 'æ‚¨å¯¹æˆ‘ä»¬çš„äº§å“æ»¡æ„å—?',            'type': 'scale',            'scale': (1, 5),            'labels': ['éå¸¸ä¸æ»¡æ„', 'ä¸æ»¡æ„', 'ä¸€èˆ¬', 'æ»¡æ„', 'éå¸¸æ»¡æ„']        },        {            'id': 'q2',            'text': 'æ‚¨ä¼šæ¨èæˆ‘ä»¬çš„äº§å“ç»™æœ‹å‹å—?',            'type': 'boolean'        },        {            'id': 'q3',            'text': 'æ‚¨æœ€å–œæ¬¢æˆ‘ä»¬äº§å“çš„å“ªä¸ªåŠŸèƒ½?',            'type': 'choice',            'choices': ['ç•Œé¢è®¾è®¡', 'åŠŸèƒ½ä¸°å¯Œ', 'æ€§èƒ½ä¼˜ç§€', 'ä»·æ ¼åˆç†', 'å®¢æœæœåŠ¡']        },        {            'id': 'q4',            'text': 'æ‚¨è¿˜æœ‰ä»€ä¹ˆå»ºè®®æˆ–æ„è§?',            'type': 'text',            'optional': True        }    ]        for i, question in enumerate(questions, 1):        print(f\"\\né—®é¢˜ {i}: {question['text']}\")                if question['type'] == 'scale':            min_val, max_val = question['scale']            labels = question['labels']                        print(\"è¯„åˆ†æ ‡å‡†:\")            for j, label in enumerate(labels, min_val):                print(f\"  {j} - {label}\")                        score = get_integer_input(                f\"è¯·è¯„åˆ† ({min_val}-{max_val}): \",                min_val, max_val            )            responses.append({                'question_id': question['id'],                'answer': score,                'label': labels[score - min_val]            })                    elif question['type'] == 'boolean':            answer = get_boolean_input(\"è¯·å›ç­” (yes/no): \")            responses.append({                'question_id': question['id'],                'answer': answer            })                    elif question['type'] == 'choice':            choices = question['choices']            print(\"é€‰é¡¹:\")            for j, choice in enumerate(choices, 1):                print(f\"  {j}. {choice}\")                        choice_num = get_integer_input(                f\"è¯·é€‰æ‹© (1-{len(choices)}): \",                1, len(choices)            )            responses.append({                'question_id': question['id'],                'answer': choices[choice_num - 1]            })                    elif question['type'] == 'text':            if question.get('optional'):                answer = input(\"è¯·è¾“å…¥ (å¯é€‰ï¼Œç›´æ¥å›è½¦è·³è¿‡): \")            else:                answer = input(\"è¯·è¾“å…¥: \")                        if answer or not question.get('optional'):                responses.append({                    'question_id': question['id'],                    'answer': answer                })        # æ˜¾ç¤ºè°ƒæŸ¥ç»“æœ    print(\"\\n=== è°ƒæŸ¥ç»“æœ ===\")    for response in responses:        question = next(q for q in questions if q['id'] == response['question_id'])        print(f\"{question['text']}\")                if 'label' in response:            print(f\"  å›ç­”: {response['answer']} ({response['label']})\")        else:            print(f\"  å›ç­”: {response['answer']}\")        print(\"\\næ„Ÿè°¢æ‚¨å‚ä¸è°ƒæŸ¥ï¼\")    return responses# è¿è¡Œç¤ºä¾‹print(\"å®é™…åº”ç”¨åœºæ™¯æ¼”ç¤º:\")print(\"\\n1. è®¡ç®—å™¨ (è¾“å…¥ 'calc' è¿è¡Œ)\")print(\"2. é…ç½®ç”Ÿæˆå™¨ (è¾“å…¥ 'config' è¿è¡Œ)\")print(\"3. é—®å·è°ƒæŸ¥ (è¾“å…¥ 'survey' è¿è¡Œ)\")choice = input(\"\\nè¯·é€‰æ‹©è¦è¿è¡Œçš„ç¤ºä¾‹ (calc/config/survey): \").lower()if choice == 'calc':    calculator_cli()elif choice == 'config':    config_generator()elif choice == 'survey':    survey_tool()else:    print(\"æ— æ•ˆé€‰æ‹©\")âš ï¸ æ³¨æ„äº‹é¡¹å¸¸è§é™·é˜±# input()è¿”å›å€¼ç±»å‹é™·é˜±print(\"input()è¿”å›å€¼ç±»å‹é™·é˜±:\")# é”™è¯¯ï¼šç›´æ¥å°†input()ç»“æœç”¨äºæ•°å­¦è¿ç®—print(\"é”™è¯¯ç¤ºä¾‹:\")try:    # user_age = input(\"è¯·è¾“å…¥å¹´é¾„: \")  # å‡è®¾ç”¨æˆ·è¾“å…¥ \"25\"    # next_year_age = user_age + 1  # é”™è¯¯ï¼å­—ç¬¦ä¸²ä¸èƒ½ç›´æ¥åŠ æ•°å­—    passexcept TypeError as e:    print(f\"ç±»å‹é”™è¯¯: {e}\")# æ­£ç¡®ï¼šå…ˆè½¬æ¢ç±»å‹print(\"\\næ­£ç¡®ç¤ºä¾‹:\")user_age_str = \"25\"  # æ¨¡æ‹Ÿinput()è¿”å›å€¼user_age = int(user_age_str)  # è½¬æ¢ä¸ºæ•´æ•°next_year_age = user_age + 1print(f\"å½“å‰å¹´é¾„: {user_age}, æ˜å¹´å¹´é¾„: {next_year_age}\")# ç©ºè¾“å…¥å¤„ç†é™·é˜±print(\"\\nç©ºè¾“å…¥å¤„ç†:\")def safe_int_input(prompt, default=0):    \"\"\"å®‰å…¨çš„æ•´æ•°è¾“å…¥\"\"\"    while True:        user_input = input(prompt).strip()                if not user_input:  # ç©ºè¾“å…¥            if default is not None:                return default            else:                print(\"è¾“å…¥ä¸èƒ½ä¸ºç©º\")                continue                try:            return int(user_input)        except ValueError:            print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„æ•´æ•°\")age = safe_int_input(\"è¯·è¾“å…¥å¹´é¾„ (é»˜è®¤0): \", default=0)print(f\"å¹´é¾„: {age}\")# ç‰¹æ®Šå­—ç¬¦å¤„ç†é™·é˜±print(\"\\nç‰¹æ®Šå­—ç¬¦å¤„ç†:\")# ç”¨æˆ·å¯èƒ½è¾“å…¥çš„ç‰¹æ®Šå­—ç¬¦special_cases = [    \"  hello world  \",  # å‰åç©ºæ ¼    \"Hello\\nWorld\",     # æ¢è¡Œç¬¦ï¼ˆä¸å¤ªå¯èƒ½ï¼Œä½†è¦æ³¨æ„ï¼‰    \"Hello\\tWorld\",     # åˆ¶è¡¨ç¬¦    \"Hello\\\\World\",     # åæ–œæ     \"Hello'World\",      # å•å¼•å·    'Hello\"World',      # åŒå¼•å·    \"Hello&amp;World\",      # ç‰¹æ®Šç¬¦å·    \"ä½ å¥½ä¸–ç•Œ\",          # ä¸­æ–‡å­—ç¬¦    \"ğŸ™‚ğŸ˜Š\",            # è¡¨æƒ…ç¬¦å·    \"\",                 # ç©ºå­—ç¬¦ä¸²]print(\"ç‰¹æ®Šå­—ç¬¦å¤„ç†ç¤ºä¾‹:\")for case in special_cases:    print(f\"è¾“å…¥: {repr(case)}\")    print(f\"  å»ç©ºæ ¼: {repr(case.strip())}\")    print(f\"  é•¿åº¦: {len(case)}\")    print(f\"  æ˜¯å¦ä¸ºç©º: {not case.strip()}\")    print()# ç¼–ç é—®é¢˜print(\"ç¼–ç å¤„ç†:\")def safe_input_with_encoding(prompt):    \"\"\"å¤„ç†ç¼–ç é—®é¢˜çš„è¾“å…¥å‡½æ•°\"\"\"    try:        result = input(prompt)        # ç¡®ä¿å­—ç¬¦ä¸²å¯ä»¥æ­£ç¡®ç¼–ç         result.encode('utf-8')        return result    except UnicodeEncodeError as e:        print(f\"ç¼–ç é”™è¯¯: {e}\")        return None    except UnicodeDecodeError as e:        print(f\"è§£ç é”™è¯¯: {e}\")        return None# è¾“å…¥é•¿åº¦é™åˆ¶print(\"\\nè¾“å…¥é•¿åº¦é™åˆ¶:\")def limited_input(prompt, max_length=100):    \"\"\"é™åˆ¶è¾“å…¥é•¿åº¦çš„å‡½æ•°\"\"\"    while True:        user_input = input(prompt)        if len(user_input) &lt;= max_length:            return user_input        else:            print(f\"è¾“å…¥è¿‡é•¿ï¼Œæœ€å¤šå…è®¸ {max_length} ä¸ªå­—ç¬¦\")            print(f\"å½“å‰è¾“å…¥é•¿åº¦: {len(user_input)}\")short_input = limited_input(\"è¯·è¾“å…¥ç®€çŸ­æè¿° (æœ€å¤š20å­—ç¬¦): \", max_length=20)print(f\"è¾“å…¥å†…å®¹: {short_input}\")# è¾“å…¥éªŒè¯å¤±è´¥çš„å¤„ç†print(\"\\nè¾“å…¥éªŒè¯å¤±è´¥å¤„ç†:\")def robust_input_validation():    \"\"\"å¥å£®çš„è¾“å…¥éªŒè¯ç¤ºä¾‹\"\"\"    max_attempts = 3        for attempt in range(max_attempts):        try:            age_str = input(f\"è¯·è¾“å…¥å¹´é¾„ (å°è¯• {attempt + 1}/{max_attempts}): \")                        # å¤šé‡éªŒè¯            if not age_str.strip():                raise ValueError(\"å¹´é¾„ä¸èƒ½ä¸ºç©º\")                        age = int(age_str)                        if age &lt; 0:                raise ValueError(\"å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°\")                        if age &gt; 150:                raise ValueError(\"å¹´é¾„ä¸èƒ½è¶…è¿‡150\")                        return age                    except ValueError as e:            print(f\"è¾“å…¥é”™è¯¯: {e}\")            if attempt == max_attempts - 1:                print(\"è¶…è¿‡æœ€å¤§å°è¯•æ¬¡æ•°ï¼Œä½¿ç”¨é»˜è®¤å€¼\")                return 0        return 0valid_age = robust_input_validation()print(f\"æœ€ç»ˆå¹´é¾„: {valid_age}\")# å¹¶å‘è¾“å…¥é—®é¢˜ï¼ˆå¤šçº¿ç¨‹ç¯å¢ƒï¼‰print(\"\\nå¹¶å‘è¾“å…¥æ³¨æ„äº‹é¡¹:\")print(\"åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œinput()å‡½æ•°ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„\")print(\"å¦‚æœéœ€è¦åœ¨å¤šçº¿ç¨‹ä¸­å¤„ç†è¾“å…¥ï¼Œåº”è¯¥:\")print(\"1. åªåœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨input()\")print(\"2. ä½¿ç”¨é˜Ÿåˆ—åœ¨çº¿ç¨‹é—´ä¼ é€’è¾“å…¥æ•°æ®\")print(\"3. è€ƒè™‘ä½¿ç”¨GUIæ¡†æ¶æ›¿ä»£å‘½ä»¤è¡Œè¾“å…¥\")# æ€§èƒ½è€ƒè™‘print(\"\\næ€§èƒ½è€ƒè™‘:\")print(\"input()å‡½æ•°çš„æ€§èƒ½ç‰¹ç‚¹:\")print(\"1. é˜»å¡å¼æ“ä½œ - ä¼šæš‚åœç¨‹åºæ‰§è¡Œ\")print(\"2. å†…å­˜ä½¿ç”¨ - è¾“å…¥çš„å­—ç¬¦ä¸²ä¼šå ç”¨å†…å­˜\")print(\"3. å¤§é‡è¾“å…¥ - è€ƒè™‘æ‰¹é‡å¤„ç†æˆ–æ–‡ä»¶è¾“å…¥\")# å®‰å…¨è€ƒè™‘print(\"\\nå®‰å…¨è€ƒè™‘:\")print(\"ä½¿ç”¨input()æ—¶çš„å®‰å…¨æ³¨æ„äº‹é¡¹:\")print(\"1. æ°¸è¿œä¸è¦ç›´æ¥eval()ç”¨æˆ·è¾“å…¥\")print(\"2. éªŒè¯å’Œæ¸…ç†æ‰€æœ‰ç”¨æˆ·è¾“å…¥\")print(\"3. é™åˆ¶è¾“å…¥é•¿åº¦é˜²æ­¢å†…å­˜æ”»å‡»\")print(\"4. å¯¹æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰ä½¿ç”¨ç‰¹æ®Šå¤„ç†\")# å¯†ç è¾“å…¥çš„å®‰å…¨å¤„ç†import getpassprint(\"\\nå®‰å…¨å¯†ç è¾“å…¥:\")print(\"å¯¹äºå¯†ç è¾“å…¥ï¼Œåº”è¯¥ä½¿ç”¨ getpass æ¨¡å—:\")def secure_password_input():    \"\"\"å®‰å…¨çš„å¯†ç è¾“å…¥\"\"\"    try:        password = getpass.getpass(\"è¯·è¾“å…¥å¯†ç : \")        return password    except KeyboardInterrupt:        print(\"\\nå¯†ç è¾“å…¥è¢«å–æ¶ˆ\")        return None    except Exception as e:        print(f\"å¯†ç è¾“å…¥é”™è¯¯: {e}\")        return Noneprint(\"ä½¿ç”¨ getpass.getpass() çš„ä¼˜åŠ¿:\")print(\"1. è¾“å…¥æ—¶ä¸æ˜¾ç¤ºå­—ç¬¦\")print(\"2. ä¸ä¼šè¢«ç»ˆç«¯å†å²è®°å½•\")print(\"3. æ›´å®‰å…¨çš„å¯†ç å¤„ç†\")# è·¨å¹³å°å…¼å®¹æ€§print(\"\\nè·¨å¹³å°å…¼å®¹æ€§:\")print(\"input()åœ¨ä¸åŒå¹³å°çš„è¡Œä¸º:\")print(\"1. Windows: æ”¯æŒä¸­æ–‡è¾“å…¥ï¼Œç¼–ç é€šå¸¸æ˜¯GBKæˆ–UTF-8\")print(\"2. Linux/Mac: æ”¯æŒUTF-8ç¼–ç \")print(\"3. ç»ˆç«¯ç¯å¢ƒ: å¯èƒ½å½±å“è¾“å…¥æ˜¾ç¤ºå’Œç¼–ç \")print(\"4. IDEç¯å¢ƒ: é€šå¸¸æœ‰æ›´å¥½çš„è¾“å…¥æ”¯æŒ\")ğŸ”— ç›¸å…³å†…å®¹ç›¸å…³å‡½æ•°  print() - è¾“å‡ºå‡½æ•° - è¾“å‡ºä¿¡æ¯åˆ°æ§åˆ¶å°  str() - å­—ç¬¦ä¸²è½¬æ¢å‡½æ•° - å­—ç¬¦ä¸²ç±»å‹è½¬æ¢  int() - æ•´æ•°è½¬æ¢å‡½æ•° - æ•´æ•°ç±»å‹è½¬æ¢  float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•° - æµ®ç‚¹æ•°ç±»å‹è½¬æ¢  bool() - å¸ƒå°”å€¼è½¬æ¢å‡½æ•° - å¸ƒå°”å€¼ç±»å‹è½¬æ¢  len() - é•¿åº¦å‡½æ•° - è·å–å­—ç¬¦ä¸²é•¿åº¦ç›¸å…³æ¨¡å—  sysæ¨¡å— - ç³»ç»Ÿç›¸å…³åŠŸèƒ½  osæ¨¡å— - æ“ä½œç³»ç»Ÿæ¥å£  reæ¨¡å— - æ­£åˆ™è¡¨è¾¾å¼  getpassæ¨¡å— - å®‰å…¨å¯†ç è¾“å…¥  argparseæ¨¡å— - å‘½ä»¤è¡Œå‚æ•°è§£æç›¸å…³æ¦‚å¿µ  å­—ç¬¦ä¸²å¤„ç† - å­—ç¬¦ä¸²æ“ä½œ  å¼‚å¸¸å¤„ç† - é”™è¯¯å¤„ç†  æ–‡ä»¶æ“ä½œ - æ–‡ä»¶è¾“å…¥è¾“å‡º  æ­£åˆ™è¡¨è¾¾å¼ - æ¨¡å¼åŒ¹é…  ç”¨æˆ·ç•Œé¢è®¾è®¡ - äº¤äº’è®¾è®¡ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - input()  Pythonå®˜æ–¹æ–‡æ¡£ - è¾“å…¥è¾“å‡º  Pythonå®˜æ–¹æ–‡æ¡£ - å­—ç¬¦ä¸²æ–¹æ³•  Pythonå®˜æ–¹æ–‡æ¡£ - å¼‚å¸¸å¤„ç†ğŸ·ï¸ æ ‡ç­¾è¾“å…¥ ç”¨æˆ·äº¤äº’ å­—ç¬¦ä¸² æ§åˆ¶å° éªŒè¯ é”™è¯¯å¤„ç†æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/input/",
        "category": "builtins",
        "tags": ["è¾“å…¥","ç”¨æˆ·äº¤äº’","å­—ç¬¦ä¸²","æ§åˆ¶å°"]
      }
      
    
  
    
      ,
      {
        "title": "inspectæ¨¡å—",
        "content": "inspectæ¨¡å—ğŸ“ æ¦‚è¿°inspectæ¨¡å—ä¹Ÿè¢«ç§°ä¸ºâ€æ£€æŸ¥ç°åœºå¯¹è±¡â€ã€‚è¿™é‡Œçš„é‡ç‚¹åœ¨äºâ€ç°åœºâ€äºŒå­—ï¼Œä¹Ÿå°±æ˜¯å½“å‰è¿è¡Œçš„çŠ¶æ€ã€‚inspectæ¨¡å—æä¾›äº†ä¸€äº›å‡½æ•°æ¥äº†è§£ç°åœºå¯¹è±¡ï¼ŒåŒ…æ‹¬æ¨¡å—ã€ç±»ã€å®ä¾‹ã€å‡½æ•°å’Œæ–¹æ³•ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡inspectæ¨¡å—çš„åŸºæœ¬æ¦‚å¿µå’Œç”¨é€”  å­¦ä¼šä½¿ç”¨inspectè¿›è¡Œå¯¹è±¡ç±»å‹æ£€æŸ¥  æŒæ¡è·å–æºä»£ç å’Œæ–‡æ¡£çš„æ–¹æ³•  ç†è§£å‡½æ•°ç­¾åçš„æ¦‚å¿µå’Œåº”ç”¨  å­¦ä¼šä½¿ç”¨æ ˆå¸§è¿›è¡Œè°ƒè¯•å’Œé”™è¯¯å®šä½ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºç¡€è¯­æ³•  é¢å‘å¯¹è±¡ç¼–ç¨‹æ¦‚å¿µ  å‡½æ•°å’Œæ–¹æ³•çš„åŒºåˆ«  åŸºæœ¬çš„è°ƒè¯•æ¦‚å¿µğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µinspectæ¨¡å—ä¸»è¦ç”¨äºä»¥ä¸‹å››ä¸ªæ–¹é¢ï¼š  å¯¹æ˜¯å¦æ˜¯æ¨¡å—ã€æ¡†æ¶ã€å‡½æ•°è¿›è¡Œç±»å‹æ£€æŸ¥  è·å–æºç   è·å–ç±»æˆ–è€…å‡½æ•°çš„å‚æ•°ä¿¡æ¯  è§£æå †æ ˆä¸»è¦åŠŸèƒ½åˆ†ç±»1. è·å–æˆå‘˜ä¸åˆ¤æ–­            å‡½æ•°å      åŠŸèƒ½æè¿°                  getmembers(object[, predicate])      è¿”å›å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜ï¼Œä»¥(name,value)å¯¹ç»„æˆçš„åˆ—è¡¨              ismodule(object)      æ˜¯å¦ä¸ºæ¨¡å—              isclass(object)      æ˜¯å¦ä¸ºç±»              ismethod(object)      æ˜¯å¦ä¸ºæ–¹æ³•              isfunction(object)      æ˜¯å¦ä¸ºå‡½æ•°              isgeneratorfunction(object)      æ˜¯å¦ä¸ºç”Ÿæˆå™¨å‡½æ•°              isgenerator(object)      æ˜¯å¦ä¸ºç”Ÿæˆå™¨              isbuiltin(object)      æ˜¯å¦ä¸ºå†…ç½®å‡½æ•°æˆ–æ–¹æ³•              isroutine(object)      æ˜¯å¦ä¸ºç”¨æˆ·è‡ªå®šä¹‰æˆ–å†…ç½®å‡½æ•°æˆ–æ–¹æ³•      2. è·å–æºä»£ç             å‡½æ•°å      åŠŸèƒ½æè¿°                  getdoc(object)      è·å–å¯¹è±¡çš„æ–‡æ¡£ä¿¡æ¯              getfile(object)      è¿”å›å¯¹è±¡çš„æ–‡ä»¶å              getmodule(object)      è¿”å›å¯¹è±¡æ‰€å±çš„æ¨¡å—å              getsourcefile(object)      è¿”å›å¯¹è±¡çš„Pythonæºæ–‡ä»¶å              getsourcelines(object)      è¿”å›å¯¹è±¡çš„æºä»£ç å†…å®¹ï¼Œè¡Œå·+ä»£ç è¡Œ              getsource(object)      ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›å¯¹è±¡çš„æºä»£ç       3. å‡½æ•°ç­¾å            å‡½æ•°å      åŠŸèƒ½æè¿°                  signature(callable)      è·å–å¯è°ƒç”¨å¯¹è±¡çš„ç­¾å              Parameter      è¡¨ç¤ºå‡½æ•°å‚æ•°çš„ç±»              Signature      è¡¨ç¤ºå‡½æ•°ç­¾åçš„ç±»      4. è°ƒç”¨æ ˆ            å‡½æ•°å      åŠŸèƒ½æè¿°                  currentframe()      è·å–å½“å‰æ ˆå¸§              stack([context])      è·å–å½“å‰è°ƒç”¨æ ˆ              getmro(cls)      è·å–ç±»çš„æ–¹æ³•è§£æé¡ºåº      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•1. è·å–å¯¹è±¡æˆå‘˜import inspect# å®šä¹‰ç¤ºä¾‹ç±»class ExampleClass:    \"\"\"ç¤ºä¾‹ç±»\"\"\"        def __init__(self, name):        self.name = name        def get_name(self):        \"\"\"è·å–åç§°\"\"\"        return self.name        @classmethod    def class_method(cls):        \"\"\"ç±»æ–¹æ³•\"\"\"        pass        @staticmethod    def static_method():        \"\"\"é™æ€æ–¹æ³•\"\"\"        pass# è·å–ç±»çš„æ‰€æœ‰æˆå‘˜for name, data in inspect.getmembers(ExampleClass):    if not name.startswith('__'):        print(f\"{name} : {data!r}\")# åªè·å–å‡½æ•°æˆå‘˜for name, data in inspect.getmembers(ExampleClass, inspect.isfunction):    print(f\"{name} : {data!r}\")# åªè·å–æ–¹æ³•æˆå‘˜for name, data in inspect.getmembers(ExampleClass, inspect.ismethod):    print(f\"{name} : {data!r}\")2. è·å–æºä»£ç import inspect# è·å–ç±»çš„æºä»£ç print(inspect.getsource(ExampleClass))# è·å–æ–¹æ³•çš„æºä»£ç print(inspect.getsource(ExampleClass.get_name))# è·å–æºä»£ç è¡Œä¿¡æ¯lines, start_line = inspect.getsourcelines(ExampleClass.get_name)print(f\"æºä»£ç è¡Œ: {lines}\")print(f\"èµ·å§‹è¡Œå·: {start_line}\")3. å‡½æ•°ç­¾åæ£€æŸ¥import inspectfrom inspect import Parameter, Signaturedef example_function(a, b, c=10, *args, d=100, **kwargs):    \"\"\"ç¤ºä¾‹å‡½æ•°\"\"\"    return a + b + c# è·å–å‡½æ•°ç­¾åsig = inspect.signature(example_function)print(f\"å‡½æ•°ç­¾å: {sig}\")# åˆ†æå‚æ•°ç±»å‹for name, param in sig.parameters.items():    print(f\"å‚æ•°: {name}, ç±»å‹: {param.kind}, é»˜è®¤å€¼: {param.default}\")# å‚æ•°ç»‘å®šbound = sig.bind(1, 2, 3, 4, 5, d=200, extra=300)print(f\"ç»‘å®šå‚æ•°: {bound.arguments}\")é«˜çº§ç”¨æ³•1. åˆ›å»ºè‡ªå®šä¹‰ç­¾åfrom inspect import Signature, Parameter# åˆ›å»ºå‚æ•°åˆ—è¡¨params = [    Parameter('x', Parameter.POSITIONAL_OR_KEYWORD),    Parameter('y', Parameter.POSITIONAL_OR_KEYWORD, default=9),    Parameter('z', Parameter.VAR_KEYWORD)]# åˆ›å»ºç­¾åsig = Signature(params)print(f\"è‡ªå®šä¹‰ç­¾å: {sig}\")# ç»‘å®šå‚æ•°bound = sig.bind(1, z_extra=100)print(f\"ç»‘å®šç»“æœ: {bound.arguments}\")2. æ ˆå¸§åˆ†æimport inspectimport pprintdef analyze_stack():    \"\"\"åˆ†æå½“å‰è°ƒç”¨æ ˆ\"\"\"    frame = inspect.currentframe()    print(f\"å½“å‰è¡Œå·: {frame.f_lineno}\")    print(f\"å½“å‰æ–‡ä»¶: {frame.f_code.co_filename}\")    print(\"å±€éƒ¨å˜é‡:\")    pprint.pprint(frame.f_locals)def recursive_function(limit):    \"\"\"é€’å½’å‡½æ•°ç¤ºä¾‹\"\"\"    local_var = \".\" * limit        if limit &lt;= 0:        analyze_stack()        return        recursive_function(limit - 1)    return local_var# è°ƒç”¨é€’å½’å‡½æ•°recursive_function(2)3. å®Œæ•´æ ˆä¿¡æ¯import inspectdef show_complete_stack():    \"\"\"æ˜¾ç¤ºå®Œæ•´è°ƒç”¨æ ˆ\"\"\"    for level in inspect.stack():        print(f\"æ–‡ä»¶: {level.filename}\")        print(f\"è¡Œå·: {level.lineno}\")        print(f\"å‡½æ•°: {level.function}\")        print(f\"ä»£ç : {level.code_context[level.index].strip()}\")        print(\"-\" * 50)def function_a():    function_b()def function_b():    function_c()def function_c():    show_complete_stack()# è°ƒç”¨å‡½æ•°é“¾function_a()å®é™…æ¡ˆä¾‹1. åŠ¨æ€APIæ–‡æ¡£ç”Ÿæˆå™¨import inspectdef generate_api_doc(module):    \"\"\"ç”Ÿæˆæ¨¡å—çš„APIæ–‡æ¡£\"\"\"    doc = f\"# {module.__name__} æ¨¡å—æ–‡æ¡£\\n\\n\"        # è·å–æ‰€æœ‰ç±»    classes = inspect.getmembers(module, inspect.isclass)    for name, cls in classes:        if cls.__module__ == module.__name__:  # åªå¤„ç†æœ¬æ¨¡å—çš„ç±»            doc += f\"## {name} ç±»\\n\\n\"            doc += f\"{inspect.getdoc(cls) or 'æ— æ–‡æ¡£'}\\n\\n\"                        # è·å–ç±»çš„æ–¹æ³•            methods = inspect.getmembers(cls, inspect.isfunction)            for method_name, method in methods:                if not method_name.startswith('_'):                    sig = inspect.signature(method)                    doc += f\"### {method_name}{sig}\\n\\n\"                    doc += f\"{inspect.getdoc(method) or 'æ— æ–‡æ¡£'}\\n\\n\"        return doc# ä½¿ç”¨ç¤ºä¾‹# print(generate_api_doc(some_module))2. å‡½æ•°å‚æ•°éªŒè¯è£…é¥°å™¨import inspectfrom functools import wrapsdef validate_types(**type_checks):    \"\"\"ç±»å‹éªŒè¯è£…é¥°å™¨\"\"\"    def decorator(func):        sig = inspect.signature(func)                @wraps(func)        def wrapper(*args, **kwargs):            # ç»‘å®šå‚æ•°            bound = sig.bind(*args, **kwargs)            bound.apply_defaults()                        # éªŒè¯ç±»å‹            for param_name, expected_type in type_checks.items():                if param_name in bound.arguments:                    value = bound.arguments[param_name]                    if not isinstance(value, expected_type):                        raise TypeError(                            f\"å‚æ•° {param_name} æœŸæœ›ç±»å‹ {expected_type.__name__}, \"                            f\"å®é™…ç±»å‹ {type(value).__name__}\"                        )                        return func(*args, **kwargs)        return wrapper    return decorator# ä½¿ç”¨ç¤ºä¾‹@validate_types(name=str, age=int)def create_person(name, age=0):    return f\"å§“å: {name}, å¹´é¾„: {age}\"# æ­£ç¡®è°ƒç”¨print(create_person(\"å¼ ä¸‰\", 25))# é”™è¯¯è°ƒç”¨ï¼ˆä¼šæŠ›å‡ºTypeErrorï¼‰# create_person(\"å¼ ä¸‰\", \"25\")âš ï¸ æ³¨æ„äº‹é¡¹  getsource() å’Œ getsourcelines() åªèƒ½ç”¨äºæœ‰æºæ–‡ä»¶çš„å¯¹è±¡ï¼Œä¸èƒ½ç”¨äºå†…ç½®æ¨¡å—  ä½¿ç”¨ getmembers() æ—¶æ³¨æ„è¿‡æ»¤ç§æœ‰å±æ€§ï¼ˆä»¥__å¼€å¤´çš„å±æ€§ï¼‰  currentframe() è¿”å›çš„frameå¯¹è±¡åœ¨å‡½æ•°è¿”å›åä¼šå¤±æ•ˆ  å‡½æ•°ç­¾åæ£€æŸ¥æ—¶è¦æ³¨æ„å‚æ•°çš„é»˜è®¤å€¼å¤„ç†  æ ˆå¸§åˆ†æä¸»è¦ç”¨äºè°ƒè¯•ï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§ä»£ç ä¸­å¤§é‡ä½¿ç”¨ğŸ”— ç›¸å…³å†…å®¹  typesæ¨¡å— - åŠ¨æ€ç±»å‹åˆ›å»º  sysæ¨¡å— - ç³»ç»Ÿç›¸å…³åŠŸèƒ½  functoolsæ¨¡å— - å‡½æ•°å·¥å…·ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - inspectæ¨¡å—  Pythonåå°„æœºåˆ¶è¯¦è§£  å‡½æ•°ç­¾åå’Œå‚æ•°ç»‘å®šğŸ·ï¸ æ ‡ç­¾inspect åå°„ æºç æ£€æŸ¥ å‡½æ•°ç­¾å æ ˆå¸§ è°ƒè¯• å…ƒç¼–ç¨‹æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å›¢é˜Ÿç‰ˆæœ¬: 1.0",
        "url": "/docs/stdlib/inspect/",
        "category": "stdlib",
        "tags": ["inspect","åå°„","æºç æ£€æŸ¥","å‡½æ•°ç­¾å","æ ˆå¸§"]
      }
      
    
  
    
      ,
      {
        "title": "int() - æ•´æ•°è½¬æ¢å‡½æ•°",
        "content": "int() - æ•´æ•°è½¬æ¢å‡½æ•°ğŸ“ æ¦‚è¿°int() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºå°†æ•°å€¼æˆ–å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ã€‚å®ƒæ˜¯æœ€å¸¸ç”¨çš„ç±»å‹è½¬æ¢å‡½æ•°ä¹‹ä¸€ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹çš„è½¬æ¢ï¼Œå¹¶å¯ä»¥æŒ‡å®šè¿›åˆ¶è¿›è¡Œè½¬æ¢ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡int()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£ä¸åŒæ•°æ®ç±»å‹åˆ°æ•´æ•°çš„è½¬æ¢è§„åˆ™  å­¦ä¼šä½¿ç”¨è¿›åˆ¶å‚æ•°è¿›è¡Œè½¬æ¢  äº†è§£è½¬æ¢è¿‡ç¨‹ä¸­çš„å¼‚å¸¸å¤„ç†ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  æ•°å€¼ç³»ç»Ÿå’Œè¿›åˆ¶æ¦‚å¿µ  å¼‚å¸¸å¤„ç†åŸºç¡€ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µint() å‡½æ•°å¯ä»¥å°†æµ®ç‚¹æ•°ã€å­—ç¬¦ä¸²æˆ–å…¶ä»–æ•°å€¼ç±»å‹è½¬æ¢ä¸ºæ•´æ•°ã€‚å½“è½¬æ¢æµ®ç‚¹æ•°æ—¶ï¼Œä¼šæˆªæ–­å°æ•°éƒ¨åˆ†ï¼ˆå‘é›¶å–æ•´ï¼‰ã€‚è¯­æ³•æ ¼å¼# æ— å‚æ•°è°ƒç”¨ï¼Œè¿”å›0int()# è½¬æ¢æ•°å€¼æˆ–å­—ç¬¦ä¸²int(x)# æŒ‡å®šè¿›åˆ¶è½¬æ¢å­—ç¬¦ä¸²int(x, base)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  x      number/string      å¦      æ—       è¦è½¬æ¢çš„æ•°å€¼æˆ–å­—ç¬¦ä¸²              base      int      å¦      10      è¿›åˆ¶ï¼ŒèŒƒå›´2-36ï¼Œä»…å½“xä¸ºå­—ç¬¦ä¸²æ—¶æœ‰æ•ˆ      è¿”å›å€¼  ç±»å‹: int  è¯´æ˜: è½¬æ¢åçš„æ•´æ•°å€¼ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# æ— å‚æ•°è°ƒç”¨result = int()  # è¿”å› 0print(f\"æ— å‚æ•°è°ƒç”¨: {result}\")  # è¾“å‡º: æ— å‚æ•°è°ƒç”¨: 0# æµ®ç‚¹æ•°è½¬æ¢float_num = 3.14int_num = int(float_num)  # æˆªæ–­å°æ•°éƒ¨åˆ†print(f\"æµ®ç‚¹æ•°è½¬æ¢: {int_num}\")  # è¾“å‡º: æµ®ç‚¹æ•°è½¬æ¢: 3# è´Ÿæ•°è½¬æ¢neg_float = -2.8neg_int = int(neg_float)  # å‘é›¶å–æ•´print(f\"è´Ÿæ•°è½¬æ¢: {neg_int}\")  # è¾“å‡º: è´Ÿæ•°è½¬æ¢: -2# å­—ç¬¦ä¸²è½¬æ¢str_num = \"123\"converted = int(str_num)print(f\"å­—ç¬¦ä¸²è½¬æ¢: {converted}\")  # è¾“å‡º: å­—ç¬¦ä¸²è½¬æ¢: 123è¿›åˆ¶è½¬æ¢# äºŒè¿›åˆ¶è½¬æ¢binary_str = \"1010\"binary_int = int(binary_str, 2)  # äºŒè¿›åˆ¶è½¬åè¿›åˆ¶print(f\"äºŒè¿›åˆ¶ {binary_str} = {binary_int}\")  # è¾“å‡º: äºŒè¿›åˆ¶ 1010 = 10# å…«è¿›åˆ¶è½¬æ¢octal_str = \"755\"octal_int = int(octal_str, 8)  # å…«è¿›åˆ¶è½¬åè¿›åˆ¶print(f\"å…«è¿›åˆ¶ {octal_str} = {octal_int}\")  # è¾“å‡º: å…«è¿›åˆ¶ 755 = 493# åå…­è¿›åˆ¶è½¬æ¢hex_str = \"FF\"hex_int = int(hex_str, 16)  # åå…­è¿›åˆ¶è½¬åè¿›åˆ¶print(f\"åå…­è¿›åˆ¶ {hex_str} = {hex_int}\")  # è¾“å‡º: åå…­è¿›åˆ¶ FF = 255# è‡ªå®šä¹‰è¿›åˆ¶custom_str = \"ZZ\"custom_int = int(custom_str, 36)  # 36è¿›åˆ¶è½¬åè¿›åˆ¶print(f\"36è¿›åˆ¶ {custom_str} = {custom_int}\")  # è¾“å‡º: 36è¿›åˆ¶ ZZ = 1295é«˜çº§ç”¨æ³•# å¤„ç†å¸¦å‰ç¼€çš„å­—ç¬¦ä¸²prefix_binary = \"0b1010\"  # äºŒè¿›åˆ¶å‰ç¼€prefix_octal = \"0o755\"    # å…«è¿›åˆ¶å‰ç¼€prefix_hex = \"0xFF\"      # åå…­è¿›åˆ¶å‰ç¼€# ä½¿ç”¨base=0è‡ªåŠ¨è¯†åˆ«è¿›åˆ¶auto_binary = int(prefix_binary, 0)  # è‡ªåŠ¨è¯†åˆ«ä¸ºäºŒè¿›åˆ¶auto_octal = int(prefix_octal, 0)    # è‡ªåŠ¨è¯†åˆ«ä¸ºå…«è¿›åˆ¶auto_hex = int(prefix_hex, 0)        # è‡ªåŠ¨è¯†åˆ«ä¸ºåå…­è¿›åˆ¶print(f\"è‡ªåŠ¨è¯†åˆ«: {auto_binary}, {auto_octal}, {auto_hex}\")# è¾“å‡º: è‡ªåŠ¨è¯†åˆ«: 10, 493, 255å®é™…æ¡ˆä¾‹ï¼šç”¨æˆ·è¾“å…¥éªŒè¯def get_valid_integer(prompt, min_value=None, max_value=None):    \"\"\"è·å–æœ‰æ•ˆçš„æ•´æ•°è¾“å…¥\"\"\"    while True:        try:            user_input = input(prompt)                        # è½¬æ¢ä¸ºæ•´æ•°            number = int(user_input)                        # èŒƒå›´éªŒè¯            if min_value is not None and number &lt; min_value:                print(f\"æ•°å€¼ä¸èƒ½å°äº {min_value}\")                continue                            if max_value is not None and number &gt; max_value:                print(f\"æ•°å€¼ä¸èƒ½å¤§äº {max_value}\")                continue                            return number                    except ValueError:            print(\"è¯·è¾“å…¥æœ‰æ•ˆçš„æ•´æ•°\")# ä½¿ç”¨ç¤ºä¾‹# age = get_valid_integer(\"è¯·è¾“å…¥å¹´é¾„ (0-150): \", 0, 150)# print(f\"æ‚¨çš„å¹´é¾„æ˜¯: {age}\")æ•°æ®å¤„ç†åº”ç”¨def process_numeric_data(data_list):    \"\"\"å¤„ç†åŒ…å«æ•°å€¼å­—ç¬¦ä¸²çš„æ•°æ®\"\"\"    processed_data = []    errors = []        for i, item in enumerate(data_list):        try:            # å°è¯•è½¬æ¢ä¸ºæ•´æ•°            if isinstance(item, str):                # å¤„ç†å¯èƒ½çš„è¿›åˆ¶å‰ç¼€                if item.startswith('0x'):                    number = int(item, 16)                elif item.startswith('0b'):                    number = int(item, 2)                elif item.startswith('0o'):                    number = int(item, 8)                else:                    number = int(item)            else:                number = int(item)                            processed_data.append(number)                    except (ValueError, TypeError) as e:            errors.append(f\"ç´¢å¼• {i}: {item} - {str(e)}\")            processed_data.append(None)        return processed_data, errors# æµ‹è¯•æ•°æ®test_data = [\"123\", \"0xFF\", \"0b1010\", \"3.14\", \"invalid\", 42]results, errors = process_numeric_data(test_data)print(f\"å¤„ç†ç»“æœ: {results}\")# è¾“å‡º: å¤„ç†ç»“æœ: [123, 255, 10, 3, None, 42]print(f\"é”™è¯¯ä¿¡æ¯: {errors}\")# è¾“å‡º: é”™è¯¯ä¿¡æ¯: ['ç´¢å¼• 4: invalid - invalid literal for int() with base 10: 'invalid'']âš ï¸ æ³¨æ„äº‹é¡¹è½¬æ¢è§„åˆ™# æµ®ç‚¹æ•°è½¬æ¢ï¼šå‘é›¶å–æ•´print(int(3.9))   # è¾“å‡º: 3print(int(-3.9))  # è¾“å‡º: -3# å¸ƒå°”å€¼è½¬æ¢print(int(True))   # è¾“å‡º: 1print(int(False))  # è¾“å‡º: 0# å­—ç¬¦ä¸²å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ•°å­—æ ¼å¼try:    int(\"3.14\")  # é”™è¯¯ï¼šå­—ç¬¦ä¸²åŒ…å«å°æ•°ç‚¹except ValueError as e:    print(f\"è½¬æ¢é”™è¯¯: {e}\")è¿›åˆ¶é™åˆ¶# è¿›åˆ¶èŒƒå›´ï¼š2-36try:    int(\"10\", 1)   # é”™è¯¯ï¼šè¿›åˆ¶å¤ªå°except ValueError as e:    print(f\"è¿›åˆ¶é”™è¯¯: {e}\")try:    int(\"10\", 37)  # é”™è¯¯ï¼šè¿›åˆ¶å¤ªå¤§except ValueError as e:    print(f\"è¿›åˆ¶é”™è¯¯: {e}\")æ€§èƒ½è€ƒè™‘import time# å¤§é‡è½¬æ¢æ—¶çš„æ€§èƒ½æ¯”è¾ƒdata = [str(i) for i in range(100000)]# ä½¿ç”¨int()è½¬æ¢start_time = time.time()results1 = [int(x) for x in data]time1 = time.time() - start_time# ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ä¼˜åŒ–start_time = time.time()results2 = list(map(int, data))time2 = time.time() - start_timeprint(f\"åˆ—è¡¨æ¨å¯¼å¼è€—æ—¶: {time1:.4f}ç§’\")print(f\"mapå‡½æ•°è€—æ—¶: {time2:.4f}ç§’\")ğŸ”— ç›¸å…³å†…å®¹ç›¸å…³å‡½æ•°  float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºæµ®ç‚¹æ•°  str() - å­—ç¬¦ä¸²è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºå­—ç¬¦ä¸²  bool() - å¸ƒå°”è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºå¸ƒå°”å€¼  bin() - äºŒè¿›åˆ¶è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²  hex() - åå…­è¿›åˆ¶è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²  oct() - å…«è¿›åˆ¶è½¬æ¢å‡½æ•° - è½¬æ¢ä¸ºå…«è¿›åˆ¶å­—ç¬¦ä¸²ç›¸å…³æ¦‚å¿µ  Pythonæ•°æ®ç±»å‹ - åŸºæœ¬æ•°æ®ç±»å‹  å¼‚å¸¸å¤„ç† - å¼‚å¸¸å¤„ç†æœºåˆ¶  æ•°å€¼ç³»ç»Ÿ - è¿›åˆ¶è½¬æ¢è¯¦è§£ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - int()  Pythonæ•°å€¼ç±»å‹  è¿›åˆ¶è½¬æ¢è¯¦è§£ğŸ·ï¸ æ ‡ç­¾ç±»å‹è½¬æ¢ æ•´æ•° è¿›åˆ¶è½¬æ¢ æ•°å€¼å¤„ç† è¾“å…¥éªŒè¯æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/int/",
        "category": "builtins",
        "tags": ["ç±»å‹è½¬æ¢","æ•´æ•°","æ•°å€¼"]
      }
      
    
  
    
      ,
      {
        "title": "isinstance() - å®ä¾‹æ£€æŸ¥å‡½æ•°",
        "content": "isinstance() - å®ä¾‹æ£€æŸ¥å‡½æ•°ğŸ“ æ¦‚è¿°isinstance() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ºæŒ‡å®šç±»æˆ–å…¶å­ç±»çš„å®ä¾‹ã€‚ä¸type()å‡½æ•°ä¸åŒï¼Œisinstance()è€ƒè™‘ç»§æ‰¿å…³ç³»ï¼Œæ˜¯è¿›è¡Œç±»å‹æ£€æŸ¥çš„æ¨èæ–¹å¼ã€‚1ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡isinstance()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£isinstance()ä¸type()çš„åŒºåˆ«  å­¦ä¼šä½¿ç”¨isinstance()è¿›è¡Œç±»å‹æ£€æŸ¥  äº†è§£isinstance()åœ¨å¤šæ€ç¼–ç¨‹ä¸­çš„åº”ç”¨ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  ç±»å’Œå¯¹è±¡çš„æ¦‚å¿µ  ç»§æ‰¿çš„åŸºæœ¬ç†è§£  å¤šæ€çš„æ¦‚å¿µğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µisinstance() å‡½æ•°æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ºæŒ‡å®šç±»å‹çš„å®ä¾‹ã€‚å®ƒè¿”å›å¸ƒå°”å€¼ï¼Œå¦‚æœå¯¹è±¡æ˜¯æŒ‡å®šç±»å‹æˆ–å…¶å­ç±»çš„å®ä¾‹ï¼Œåˆ™è¿”å›Trueï¼Œå¦åˆ™è¿”å›Falseã€‚è¯­æ³•æ ¼å¼isinstance(object, classinfo)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  object      any      æ˜¯      æ—       è¦æ£€æŸ¥çš„å¯¹è±¡              classinfo      class/tuple      æ˜¯      æ—       ç±»æˆ–ç±»çš„å…ƒç»„      è¿”å›å€¼            ç±»å‹      è¯´æ˜                  bool      å¦‚æœå¯¹è±¡æ˜¯æŒ‡å®šç±»å‹çš„å®ä¾‹åˆ™è¿”å›True      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# åŸºæœ¬æ•°æ®ç±»å‹æ£€æŸ¥print(isinstance(42, int))          # Trueprint(isinstance(3.14, float))      # Trueprint(isinstance(\"hello\", str))     # Trueprint(isinstance([1, 2, 3], list))  # Trueprint(isinstance({\"a\": 1}, dict))   # True# æ£€æŸ¥å¤šç§ç±»å‹value = 42print(isinstance(value, (int, float)))  # Trueprint(isinstance(value, (str, list)))   # False# ä¸type()çš„å¯¹æ¯”class Animal:    passclass Dog(Animal):    passdog = Dog()# isinstance()è€ƒè™‘ç»§æ‰¿å…³ç³»print(isinstance(dog, Dog))     # Trueprint(isinstance(dog, Animal))  # True# type()ä¸è€ƒè™‘ç»§æ‰¿å…³ç³»print(type(dog) == Dog)     # Trueprint(type(dog) == Animal)  # False# æ£€æŸ¥å†…ç½®ç±»å‹çš„ç»§æ‰¿print(isinstance(True, bool))  # Trueprint(isinstance(True, int))   # True (boolæ˜¯intçš„å­ç±»)print(isinstance(42, bool))    # Falseé«˜çº§ç”¨æ³•# å¤æ‚ç±»å‹æ£€æŸ¥from collections.abc import Iterable, Mappingimport numbers# æ£€æŸ¥æ˜¯å¦å¯è¿­ä»£values = [\"hello\", [1, 2, 3], {\"a\": 1}, 42]for value in values:    if isinstance(value, Iterable):        print(f\"{value} æ˜¯å¯è¿­ä»£çš„\")    else:        print(f\"{value} ä¸å¯è¿­ä»£\")# æ£€æŸ¥æ•°å­—ç±»å‹numbers_list = [42, 3.14, 1+2j, True]for num in numbers_list:    if isinstance(num, numbers.Number):        print(f\"{num} æ˜¯æ•°å­—ç±»å‹\")    if isinstance(num, numbers.Real):        print(f\"{num} æ˜¯å®æ•°\")    if isinstance(num, numbers.Complex):        print(f\"{num} æ˜¯å¤æ•°\")# è‡ªå®šä¹‰ç±»çš„æ£€æŸ¥class Shape:    def area(self):        raise NotImplementedErrorclass Rectangle(Shape):    def __init__(self, width, height):        self.width = width        self.height = height        def area(self):        return self.width * self.heightclass Circle(Shape):    def __init__(self, radius):        self.radius = radius        def area(self):        return 3.14159 * self.radius ** 2shapes = [Rectangle(5, 3), Circle(2), \"not a shape\"]for shape in shapes:    if isinstance(shape, Shape):        print(f\"å½¢çŠ¶é¢ç§¯: {shape.area()}\")    else:        print(f\"{shape} ä¸æ˜¯å½¢çŠ¶å¯¹è±¡\")å®é™…æ¡ˆä¾‹# æ•°æ®éªŒè¯å‡½æ•°def validate_user_data(data):    \"\"\"éªŒè¯ç”¨æˆ·æ•°æ®\"\"\"    errors = []        # æ£€æŸ¥æ•°æ®ç±»å‹    if not isinstance(data, dict):        return [\"æ•°æ®å¿…é¡»æ˜¯å­—å…¸ç±»å‹\"]        # æ£€æŸ¥å¿…éœ€å­—æ®µ    required_fields = {        'name': str,        'age': int,        'email': str,        'active': bool    }        for field, expected_type in required_fields.items():        if field not in data:            errors.append(f\"ç¼ºå°‘å¿…éœ€å­—æ®µ: {field}\")        elif not isinstance(data[field], expected_type):            errors.append(                f\"å­—æ®µ {field} ç±»å‹é”™è¯¯ï¼ŒæœŸæœ› {expected_type.__name__}ï¼Œ\"                f\"å®é™… {type(data[field]).__name__}\"            )        # é¢å¤–éªŒè¯    if 'age' in data and isinstance(data['age'], int):        if not 0 &lt;= data['age'] &lt;= 150:            errors.append(\"å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´\")        if 'email' in data and isinstance(data['email'], str):        if '@' not in data['email']:            errors.append(\"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®\")        return errors# æµ‹è¯•æ•°æ®éªŒè¯test_data = [    {'name': 'å¼ ä¸‰', 'age': 25, 'email': 'zhang@example.com', 'active': True},    {'name': 'æå››', 'age': '30', 'email': 'li@example.com', 'active': True},  # å¹´é¾„ç±»å‹é”™è¯¯    {'name': '', 'age': 200, 'email': 'invalid-email', 'active': 'yes'},  # å¤šä¸ªé”™è¯¯    \"not a dict\"  # ç±»å‹é”™è¯¯]for i, data in enumerate(test_data):    print(f\"\\næµ‹è¯•æ•°æ® {i+1}:\")    errors = validate_user_data(data)    if errors:        print(\"éªŒè¯å¤±è´¥:\")        for error in errors:            print(f\"  - {error}\")    else:        print(\"éªŒè¯é€šè¿‡\")# é€šç”¨å¤„ç†å‡½æ•°def process_data(data):    \"\"\"æ ¹æ®æ•°æ®ç±»å‹è¿›è¡Œä¸åŒå¤„ç†\"\"\"    if isinstance(data, str):        return data.upper()    elif isinstance(data, (int, float)):        return data * 2    elif isinstance(data, list):        return [process_data(item) for item in data]    elif isinstance(data, dict):        return {key: process_data(value) for key, value in data.items()}    else:        return str(data)# æµ‹è¯•é€šç”¨å¤„ç†test_values = [    \"hello\",    42,    3.14,    [1, \"world\", 2.5],    {\"name\": \"python\", \"version\": 3.9},    None]for value in test_values:    result = process_data(value)    print(f\"{value} -&gt; {result}\")# æ–‡ä»¶å¤„ç†å™¨class FileProcessor:    \"\"\"æ–‡ä»¶å¤„ç†å™¨åŸºç±»\"\"\"    def process(self, content):        raise NotImplementedErrorclass TextProcessor(FileProcessor):    \"\"\"æ–‡æœ¬æ–‡ä»¶å¤„ç†å™¨\"\"\"    def process(self, content):        return content.upper()class JSONProcessor(FileProcessor):    \"\"\"JSONæ–‡ä»¶å¤„ç†å™¨\"\"\"    def process(self, content):        import json        try:            return json.loads(content)        except json.JSONDecodeError:            return {\"error\": \"Invalid JSON\"}class CSVProcessor(FileProcessor):    \"\"\"CSVæ–‡ä»¶å¤„ç†å™¨\"\"\"    def process(self, content):        lines = content.strip().split('\\n')        return [line.split(',') for line in lines]def process_file(processor, content):    \"\"\"å¤„ç†æ–‡ä»¶å†…å®¹\"\"\"    if not isinstance(processor, FileProcessor):        raise TypeError(\"å¤„ç†å™¨å¿…é¡»æ˜¯FileProcessorçš„å®ä¾‹\")        return processor.process(content)# ä½¿ç”¨æ–‡ä»¶å¤„ç†å™¨processors = [    TextProcessor(),    JSONProcessor(),    CSVProcessor(),    \"invalid processor\"  # æ— æ•ˆå¤„ç†å™¨]test_content = \"hello,world\\nfoo,bar\"for processor in processors:    try:        if isinstance(processor, FileProcessor):            result = process_file(processor, test_content)            print(f\"{type(processor).__name__}: {result}\")        else:            print(f\"{processor} ä¸æ˜¯æœ‰æ•ˆçš„å¤„ç†å™¨\")    except Exception as e:        print(f\"å¤„ç†å¤±è´¥: {e}\")# APIå“åº”å¤„ç†def handle_api_response(response):    \"\"\"å¤„ç†APIå“åº”\"\"\"    if isinstance(response, dict):        if 'error' in response:            print(f\"APIé”™è¯¯: {response['error']}\")        elif 'data' in response:            if isinstance(response['data'], list):                print(f\"è¿”å›åˆ—è¡¨ï¼ŒåŒ…å« {len(response['data'])} ä¸ªé¡¹ç›®\")            elif isinstance(response['data'], dict):                print(f\"è¿”å›å¯¹è±¡ï¼ŒåŒ…å«å­—æ®µ: {list(response['data'].keys())}\")            else:                print(f\"è¿”å›æ•°æ®: {response['data']}\")    elif isinstance(response, list):        print(f\"ç›´æ¥è¿”å›åˆ—è¡¨ï¼ŒåŒ…å« {len(response)} ä¸ªé¡¹ç›®\")    elif isinstance(response, str):        print(f\"è¿”å›å­—ç¬¦ä¸²: {response}\")    else:        print(f\"æœªçŸ¥å“åº”ç±»å‹: {type(response)}\")# æµ‹è¯•APIå“åº”å¤„ç†api_responses = [    {\"data\": [{\"id\": 1, \"name\": \"ç”¨æˆ·1\"}, {\"id\": 2, \"name\": \"ç”¨æˆ·2\"}]},    {\"data\": {\"id\": 1, \"name\": \"å¼ ä¸‰\", \"email\": \"zhang@example.com\"}},    {\"error\": \"ç”¨æˆ·æœªæ‰¾åˆ°\"},    [\"é¡¹ç›®1\", \"é¡¹ç›®2\", \"é¡¹ç›®3\"],    \"æ“ä½œæˆåŠŸ\",    42]for i, response in enumerate(api_responses):    print(f\"\\nå“åº” {i+1}:\")    handle_api_response(response)âš ï¸ æ³¨æ„äº‹é¡¹  isinstance() æ¯” type() æ›´é€‚åˆç±»å‹æ£€æŸ¥ï¼Œå› ä¸ºå®ƒè€ƒè™‘ç»§æ‰¿å…³ç³»  å¯ä»¥ä¼ å…¥ç±»çš„å…ƒç»„æ¥æ£€æŸ¥å¤šç§ç±»å‹  å¯¹äºæŠ½è±¡åŸºç±»ï¼Œä½¿ç”¨ isinstance() å¯ä»¥æ£€æŸ¥åè®®å…¼å®¹æ€§  é¿å…è¿‡åº¦ä½¿ç”¨ç±»å‹æ£€æŸ¥ï¼ŒPythonæå€¡é¸­å­ç±»å‹# ç»§æ‰¿å…³ç³»ç¤ºä¾‹class A:    passclass B(A):    passclass C(B):    passc = C()# isinstance()è€ƒè™‘æ•´ä¸ªç»§æ‰¿é“¾print(isinstance(c, C))  # Trueprint(isinstance(c, B))  # Trueprint(isinstance(c, A))  # True# type()åªæ£€æŸ¥ç›´æ¥ç±»å‹print(type(c) == C)  # Trueprint(type(c) == B)  # Falseprint(type(c) == A)  # False# å¤šç±»å‹æ£€æŸ¥value = 42print(isinstance(value, (str, int, float)))  # True# é¸­å­ç±»å‹ vs ä¸¥æ ¼ç±»å‹æ£€æŸ¥class Duck:    def quack(self):        return \"Quack!\"class Dog:    def quack(self):        return \"Woof! (pretending to quack)\"def make_it_quack(animal):    # é¸­å­ç±»å‹ï¼šå¦‚æœå®ƒèƒ½å«ï¼Œå°±è®©å®ƒå«    if hasattr(animal, 'quack'):        return animal.quack()    else:        return \"This animal can't quack\"# è€Œä¸æ˜¯ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥# if isinstance(animal, Duck):#     return animal.quack()duck = Duck()dog = Dog()print(make_it_quack(duck))  # Quack!print(make_it_quack(dog))   # Woof! (pretending to quack)ğŸ”— ç›¸å…³å†…å®¹  type() - ç±»å‹å‡½æ•°  issubclass() - å­ç±»æ£€æŸ¥å‡½æ•°  hasattr() - å±æ€§æ£€æŸ¥å‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - isinstance()  Pythonç±»å‹æ£€æŸ¥æœ€ä½³å®è·µ  æŠ½è±¡åŸºç±»è¯¦è§£ğŸ·ï¸ æ ‡ç­¾ç±»å‹æ£€æŸ¥ å®ä¾‹ ç»§æ‰¿ å¤šæ€ é¸­å­ç±»å‹æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/isinstance/",
        "category": "builtins",
        "tags": ["ç±»å‹æ£€æŸ¥","å®ä¾‹","ç»§æ‰¿"]
      }
      
    
  
    
      ,
      {
        "title": "issubclass() - å­ç±»æ£€æŸ¥å‡½æ•°",
        "content": "issubclass() - å­ç±»æ£€æŸ¥å‡½æ•°ğŸ“ æ¦‚è¿°issubclass() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªç±»æ˜¯å¦æ˜¯å¦ä¸€ä¸ªç±»çš„å­ç±»ã€‚è¿™ä¸ªå‡½æ•°åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦è¿›è¡Œç±»å‹æ£€æŸ¥ã€å¤šæ€å¤„ç†ã€æ¡†æ¶è®¾è®¡ç­‰åœºæ™¯ä¸­ã€‚å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…åœ¨è¿è¡Œæ—¶ç¡®å®šç±»ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡issubclass()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œè¯­æ³•  ç†è§£ç±»ç»§æ‰¿å…³ç³»çš„æ£€æŸ¥æœºåˆ¶  å­¦ä¼šåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨issubclass()è¿›è¡Œç±»å‹éªŒè¯  äº†è§£issubclass()ä¸isinstance()çš„åŒºåˆ«å’Œè”ç³»  æŒæ¡å¤šé‡ç»§æ‰¿å’ŒæŠ½è±¡åŸºç±»çš„å­ç±»æ£€æŸ¥ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  é¢å‘å¯¹è±¡ç¼–ç¨‹æ¦‚å¿µ  ç±»çš„å®šä¹‰å’Œç»§æ‰¿  å¤šé‡ç»§æ‰¿çš„åŸºæœ¬æ¦‚å¿µ  æŠ½è±¡åŸºç±»ï¼ˆABCï¼‰çš„åŸºæœ¬äº†è§£ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µissubclass() å‡½æ•°ç”¨äºæ£€æŸ¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆç±»ï¼‰æ˜¯å¦æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼ˆç±»æˆ–ç±»çš„å…ƒç»„ï¼‰çš„å­ç±»ã€‚å¦‚æœæ˜¯å­ç±»å…³ç³»ï¼Œè¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªç±»è¢«è®¤ä¸ºæ˜¯å®ƒè‡ªèº«çš„å­ç±»ã€‚è¯­æ³•æ ¼å¼issubclass(class, classinfo)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  class      ç±»å¯¹è±¡      æ˜¯      æ—       è¦æ£€æŸ¥çš„ç±»              classinfo      ç±»å¯¹è±¡æˆ–ç±»çš„å…ƒç»„      æ˜¯      æ—       åŸºç±»æˆ–åŸºç±»çš„å…ƒç»„      è¿”å›å€¼  ç±»å‹: bool  å†…å®¹: å¦‚æœclassæ˜¯classinfoçš„å­ç±»åˆ™è¿”å›Trueï¼Œå¦åˆ™è¿”å›FalseğŸ’¡ ä»£ç ç¤ºä¾‹åŸºæœ¬ç”¨æ³•# å®šä¹‰åŸºæœ¬çš„ç±»å±‚æ¬¡ç»“æ„class Animal:    \"\"\"åŠ¨ç‰©åŸºç±»\"\"\"    def __init__(self, name):        self.name = name        def speak(self):        passclass Mammal(Animal):    \"\"\"å“ºä¹³åŠ¨ç‰©ç±»\"\"\"    def __init__(self, name, fur_color):        super().__init__(name)        self.fur_color = fur_color        def give_birth(self):        return \"ç”Ÿè‚²å¹¼å´½\"class Dog(Mammal):    \"\"\"ç‹—ç±»\"\"\"    def __init__(self, name, breed, fur_color=\"brown\"):        super().__init__(name, fur_color)        self.breed = breed        def speak(self):        return \"æ±ªæ±ª!\"        def fetch(self):        return \"æ¡çƒ\"class Cat(Mammal):    \"\"\"çŒ«ç±»\"\"\"    def __init__(self, name, fur_color=\"gray\"):        super().__init__(name, fur_color)        def speak(self):        return \"å–µå–µ!\"        def climb(self):        return \"çˆ¬æ ‘\"class Bird(Animal):    \"\"\"é¸Ÿç±»\"\"\"    def __init__(self, name, wing_span):        super().__init__(name)        self.wing_span = wing_span        def speak(self):        return \"å•¾å•¾!\"        def fly(self):        return \"é£ç¿”\"# åŸºæœ¬çš„å­ç±»æ£€æŸ¥print(\"åŸºæœ¬å­ç±»æ£€æŸ¥:\")print(f\"Dogæ˜¯Animalçš„å­ç±»: {issubclass(Dog, Animal)}\")  # Trueprint(f\"Dogæ˜¯Mammalçš„å­ç±»: {issubclass(Dog, Mammal)}\")  # Trueprint(f\"Catæ˜¯Animalçš„å­ç±»: {issubclass(Cat, Animal)}\")  # Trueprint(f\"Birdæ˜¯Mammalçš„å­ç±»: {issubclass(Bird, Mammal)}\")  # Falseprint(f\"Mammalæ˜¯Animalçš„å­ç±»: {issubclass(Mammal, Animal)}\")  # True# è‡ªèº«æ£€æŸ¥ï¼ˆä¸€ä¸ªç±»æ˜¯å®ƒè‡ªèº«çš„å­ç±»ï¼‰print(f\"\\nè‡ªèº«æ£€æŸ¥:\")print(f\"Dogæ˜¯Dogçš„å­ç±»: {issubclass(Dog, Dog)}\")  # Trueprint(f\"Animalæ˜¯Animalçš„å­ç±»: {issubclass(Animal, Animal)}\")  # True# é”™è¯¯çš„æ£€æŸ¥print(f\"\\né”™è¯¯çš„ç»§æ‰¿å…³ç³»:\")print(f\"Animalæ˜¯Dogçš„å­ç±»: {issubclass(Animal, Dog)}\")  # Falseprint(f\"Catæ˜¯Dogçš„å­ç±»: {issubclass(Cat, Dog)}\")  # Falseprint(f\"Dogæ˜¯Birdçš„å­ç±»: {issubclass(Dog, Bird)}\")  # Falseå¤šé‡ç»§æ‰¿æ£€æŸ¥# å¤šé‡ç»§æ‰¿ç¤ºä¾‹class Flyable:    \"\"\"å¯é£è¡Œçš„æ··å…¥ç±»\"\"\"    def fly(self):        return \"åœ¨ç©ºä¸­é£è¡Œ\"class Swimmable:    \"\"\"å¯æ¸¸æ³³çš„æ··å…¥ç±»\"\"\"    def swim(self):        return \"åœ¨æ°´ä¸­æ¸¸æ³³\"class Walkable:    \"\"\"å¯è¡Œèµ°çš„æ··å…¥ç±»\"\"\"    def walk(self):        return \"åœ¨åœ°é¢è¡Œèµ°\"class Duck(Animal, Flyable, Swimmable, Walkable):    \"\"\"é¸­å­ç±» - å¤šé‡ç»§æ‰¿\"\"\"    def __init__(self, name):        super().__init__(name)        def speak(self):        return \"å˜å˜!\"class Penguin(Animal, Swimmable, Walkable):    \"\"\"ä¼é¹…ç±» - ä¸èƒ½é£ä½†èƒ½æ¸¸æ³³å’Œèµ°è·¯\"\"\"    def __init__(self, name):        super().__init__(name)        def speak(self):        return \"å˜å˜å˜!\"class Bat(Mammal, Flyable):    \"\"\"è™è ç±» - å“ºä¹³åŠ¨ç‰©ä½†èƒ½é£\"\"\"    def __init__(self, name):        super().__init__(name, \"black\")        def speak(self):        return \"å±å±!\"# å¤šé‡ç»§æ‰¿çš„å­ç±»æ£€æŸ¥print(\"å¤šé‡ç»§æ‰¿æ£€æŸ¥:\")print(f\"Duckæ˜¯Animalçš„å­ç±»: {issubclass(Duck, Animal)}\")  # Trueprint(f\"Duckæ˜¯Flyableçš„å­ç±»: {issubclass(Duck, Flyable)}\")  # Trueprint(f\"Duckæ˜¯Swimmableçš„å­ç±»: {issubclass(Duck, Swimmable)}\")  # Trueprint(f\"Duckæ˜¯Walkableçš„å­ç±»: {issubclass(Duck, Walkable)}\")  # Trueprint(f\"\\nPenguinæ˜¯Flyableçš„å­ç±»: {issubclass(Penguin, Flyable)}\")  # Falseprint(f\"Penguinæ˜¯Swimmableçš„å­ç±»: {issubclass(Penguin, Swimmable)}\")  # Trueprint(f\"\\nBatæ˜¯Mammalçš„å­ç±»: {issubclass(Bat, Mammal)}\")  # Trueprint(f\"Batæ˜¯Flyableçš„å­ç±»: {issubclass(Bat, Flyable)}\")  # Trueprint(f\"Batæ˜¯Animalçš„å­ç±»: {issubclass(Bat, Animal)}\")  # Trueï¼ˆé€šè¿‡Mammalç»§æ‰¿ï¼‰# æ£€æŸ¥å¤šä¸ªåŸºç±»ï¼ˆä½¿ç”¨å…ƒç»„ï¼‰print(f\"\\nå¤šåŸºç±»æ£€æŸ¥:\")print(f\"Duckæ˜¯(Animal, Flyable)ä¹‹ä¸€çš„å­ç±»: {issubclass(Duck, (Animal, Flyable))}\")  # Trueprint(f\"Penguinæ˜¯(Flyable, Swimmable)ä¹‹ä¸€çš„å­ç±»: {issubclass(Penguin, (Flyable, Swimmable))}\")  # Trueprint(f\"Catæ˜¯(Flyable, Swimmable)ä¹‹ä¸€çš„å­ç±»: {issubclass(Cat, (Flyable, Swimmable))}\")  # FalseæŠ½è±¡åŸºç±»æ£€æŸ¥from abc import ABC, abstractmethodfrom collections.abc import Iterable, Sized, Container# å®šä¹‰æŠ½è±¡åŸºç±»class Shape(ABC):    \"\"\"å½¢çŠ¶æŠ½è±¡åŸºç±»\"\"\"        @abstractmethod    def area(self):        \"\"\"è®¡ç®—é¢ç§¯\"\"\"        pass        @abstractmethod    def perimeter(self):        \"\"\"è®¡ç®—å‘¨é•¿\"\"\"        pass        def describe(self):        \"\"\"æè¿°å½¢çŠ¶\"\"\"        return f\"è¿™æ˜¯ä¸€ä¸ªé¢ç§¯ä¸º{self.area():.2f}ï¼Œå‘¨é•¿ä¸º{self.perimeter():.2f}çš„å½¢çŠ¶\"class Drawable(ABC):    \"\"\"å¯ç»˜åˆ¶æŠ½è±¡åŸºç±»\"\"\"        @abstractmethod    def draw(self):        \"\"\"ç»˜åˆ¶æ–¹æ³•\"\"\"        passclass Rectangle(Shape, Drawable):    \"\"\"çŸ©å½¢ç±»\"\"\"        def __init__(self, width, height):        self.width = width        self.height = height        def area(self):        return self.width * self.height        def perimeter(self):        return 2 * (self.width + self.height)        def draw(self):        return f\"ç»˜åˆ¶ä¸€ä¸ª{self.width}x{self.height}çš„çŸ©å½¢\"class Circle(Shape, Drawable):    \"\"\"åœ†å½¢ç±»\"\"\"        def __init__(self, radius):        self.radius = radius        def area(self):        return 3.14159 * self.radius ** 2        def perimeter(self):        return 2 * 3.14159 * self.radius        def draw(self):        return f\"ç»˜åˆ¶ä¸€ä¸ªåŠå¾„ä¸º{self.radius}çš„åœ†å½¢\"class Point(Drawable):    \"\"\"ç‚¹ç±» - åªå®ç°Drawableï¼Œä¸æ˜¯Shape\"\"\"        def __init__(self, x, y):        self.x = x        self.y = y        def draw(self):        return f\"ç»˜åˆ¶ç‚¹({self.x}, {self.y})\"# æŠ½è±¡åŸºç±»çš„å­ç±»æ£€æŸ¥print(\"æŠ½è±¡åŸºç±»æ£€æŸ¥:\")print(f\"Rectangleæ˜¯Shapeçš„å­ç±»: {issubclass(Rectangle, Shape)}\")  # Trueprint(f\"Rectangleæ˜¯Drawableçš„å­ç±»: {issubclass(Rectangle, Drawable)}\")  # Trueprint(f\"Circleæ˜¯Shapeçš„å­ç±»: {issubclass(Circle, Shape)}\")  # Trueprint(f\"Pointæ˜¯Shapeçš„å­ç±»: {issubclass(Point, Shape)}\")  # Falseprint(f\"Pointæ˜¯Drawableçš„å­ç±»: {issubclass(Point, Drawable)}\")  # True# å†…ç½®æŠ½è±¡åŸºç±»æ£€æŸ¥class MyList:    \"\"\"è‡ªå®šä¹‰åˆ—è¡¨ç±»\"\"\"        def __init__(self):        self._items = []        def __len__(self):        return len(self._items)        def __iter__(self):        return iter(self._items)        def __contains__(self, item):        return item in self._items        def append(self, item):        self._items.append(item)# æ³¨å†Œä¸ºæŠ½è±¡åŸºç±»çš„å­ç±»Iterable.register(MyList)Sized.register(MyList)Container.register(MyList)print(f\"\\nå†…ç½®æŠ½è±¡åŸºç±»æ£€æŸ¥:\")print(f\"MyListæ˜¯Iterableçš„å­ç±»: {issubclass(MyList, Iterable)}\")  # Trueprint(f\"MyListæ˜¯Sizedçš„å­ç±»: {issubclass(MyList, Sized)}\")  # Trueprint(f\"MyListæ˜¯Containerçš„å­ç±»: {issubclass(MyList, Container)}\")  # Trueprint(f\"listæ˜¯Iterableçš„å­ç±»: {issubclass(list, Iterable)}\")  # Trueprint(f\"dictæ˜¯Containerçš„å­ç±»: {issubclass(dict, Container)}\")  # Trueå†…ç½®ç±»å‹æ£€æŸ¥# å†…ç½®ç±»å‹çš„ç»§æ‰¿å…³ç³»æ£€æŸ¥print(\"å†…ç½®ç±»å‹ç»§æ‰¿å…³ç³»:\")# æ•°å€¼ç±»å‹print(f\"intæ˜¯objectçš„å­ç±»: {issubclass(int, object)}\")  # Trueprint(f\"floatæ˜¯objectçš„å­ç±»: {issubclass(float, object)}\")  # Trueprint(f\"boolæ˜¯intçš„å­ç±»: {issubclass(bool, int)}\")  # Trueprint(f\"boolæ˜¯objectçš„å­ç±»: {issubclass(bool, object)}\")  # True# åºåˆ—ç±»å‹print(f\"\\nåºåˆ—ç±»å‹:\")print(f\"listæ˜¯objectçš„å­ç±»: {issubclass(list, object)}\")  # Trueprint(f\"tupleæ˜¯objectçš„å­ç±»: {issubclass(tuple, object)}\")  # Trueprint(f\"stræ˜¯objectçš„å­ç±»: {issubclass(str, object)}\")  # Trueprint(f\"bytesæ˜¯objectçš„å­ç±»: {issubclass(bytes, object)}\")  # True# æ˜ å°„ç±»å‹print(f\"\\næ˜ å°„ç±»å‹:\")print(f\"dictæ˜¯objectçš„å­ç±»: {issubclass(dict, object)}\")  # True# é›†åˆç±»å‹print(f\"\\né›†åˆç±»å‹:\")print(f\"setæ˜¯objectçš„å­ç±»: {issubclass(set, object)}\")  # Trueprint(f\"frozensetæ˜¯objectçš„å­ç±»: {issubclass(frozenset, object)}\")  # True# å¼‚å¸¸ç±»å‹print(f\"\\nå¼‚å¸¸ç±»å‹:\")print(f\"ValueErroræ˜¯Exceptionçš„å­ç±»: {issubclass(ValueError, Exception)}\")  # Trueprint(f\"TypeErroræ˜¯Exceptionçš„å­ç±»: {issubclass(TypeError, Exception)}\")  # Trueprint(f\"Exceptionæ˜¯BaseExceptionçš„å­ç±»: {issubclass(Exception, BaseException)}\")  # Trueprint(f\"KeyboardInterruptæ˜¯BaseExceptionçš„å­ç±»: {issubclass(KeyboardInterrupt, BaseException)}\")  # Trueprint(f\"KeyboardInterruptæ˜¯Exceptionçš„å­ç±»: {issubclass(KeyboardInterrupt, Exception)}\")  # False# å‡½æ•°å’Œç±»å‹print(f\"\\nå‡½æ•°å’Œç±»å‹:\")print(f\"typeæ˜¯objectçš„å­ç±»: {issubclass(type, object)}\")  # Trueprint(f\"functionæ˜¯objectçš„å­ç±»: {issubclass(type(lambda: None), object)}\")  # True# æ£€æŸ¥å¤šä¸ªç±»å‹numeric_types = (int, float, complex)sequence_types = (list, tuple, str, bytes)print(f\"\\nå¤šç±»å‹æ£€æŸ¥:\")print(f\"boolæ˜¯æ•°å€¼ç±»å‹ä¹‹ä¸€: {issubclass(bool, numeric_types)}\")  # Trueprint(f\"bytearrayæ˜¯åºåˆ—ç±»å‹ä¹‹ä¸€: {issubclass(bytearray, sequence_types)}\")  # Falseprint(f\"listæ˜¯åºåˆ—ç±»å‹ä¹‹ä¸€: {issubclass(list, sequence_types)}\")  # TrueğŸš€ é«˜çº§åº”ç”¨ç±»å‹éªŒè¯è£…é¥°å™¨from functools import wrapsfrom typing import Union, Type, Tuple# ç±»å‹éªŒè¯è£…é¥°å™¨def validate_subclass(*expected_classes):    \"\"\"éªŒè¯å‚æ•°æ˜¯å¦ä¸ºæŒ‡å®šç±»çš„å­ç±»çš„è£…é¥°å™¨\"\"\"    def decorator(func):        @wraps(func)        def wrapper(*args, **kwargs):            # æ£€æŸ¥ä½ç½®å‚æ•°            for i, (arg, expected_class) in enumerate(zip(args, expected_classes)):                if isinstance(arg, type):  # å¦‚æœå‚æ•°æ˜¯ç±»                    if not issubclass(arg, expected_class):                        raise TypeError(                            f\"å‚æ•° {i+1} å¿…é¡»æ˜¯ {expected_class.__name__} çš„å­ç±»ï¼Œ\"                            f\"ä½†å¾—åˆ°äº† {arg.__name__}\"                        )                else:  # å¦‚æœå‚æ•°æ˜¯å®ä¾‹                    if not isinstance(arg, expected_class):                        raise TypeError(                            f\"å‚æ•° {i+1} å¿…é¡»æ˜¯ {expected_class.__name__} çš„å®ä¾‹ï¼Œ\"                            f\"ä½†å¾—åˆ°äº† {type(arg).__name__}\"                        )                        return func(*args, **kwargs)        return wrapper    return decorator# ä½¿ç”¨ç±»å‹éªŒè¯è£…é¥°å™¨@validate_subclass(Animal, Mammal)def create_pet_comparison(animal_class, mammal_class):    \"\"\"åˆ›å»ºå® ç‰©æ¯”è¾ƒ\"\"\"    print(f\"æ¯”è¾ƒ {animal_class.__name__} å’Œ {mammal_class.__name__}\")    print(f\"{mammal_class.__name__} æ˜¯ {animal_class.__name__} çš„å­ç±»: {issubclass(mammal_class, animal_class)}\")    return f\"æ¯”è¾ƒå®Œæˆ: {animal_class.__name__} vs {mammal_class.__name__}\"# æµ‹è¯•ç±»å‹éªŒè¯print(\"ç±»å‹éªŒè¯è£…é¥°å™¨æµ‹è¯•:\")try:    result = create_pet_comparison(Animal, Dog)    print(f\"æˆåŠŸ: {result}\")except TypeError as e:    print(f\"é”™è¯¯: {e}\")try:    result = create_pet_comparison(Dog, Animal)  # è¿™ä¼šå¤±è´¥except TypeError as e:    print(f\"é¢„æœŸé”™è¯¯: {e}\")# å·¥å‚æ¨¡å¼ä¸­çš„ç±»å‹æ£€æŸ¥class AnimalFactory:    \"\"\"åŠ¨ç‰©å·¥å‚ç±»\"\"\"        _registered_animals = {}        @classmethod    def register_animal(cls, name: str, animal_class: Type[Animal]):        \"\"\"æ³¨å†ŒåŠ¨ç‰©ç±»\"\"\"        if not issubclass(animal_class, Animal):            raise TypeError(f\"{animal_class.__name__} å¿…é¡»æ˜¯ Animal çš„å­ç±»\")                cls._registered_animals[name.lower()] = animal_class        print(f\"å·²æ³¨å†ŒåŠ¨ç‰©ç±»: {name} -&gt; {animal_class.__name__}\")        @classmethod    def create_animal(cls, animal_type: str, *args, **kwargs):        \"\"\"åˆ›å»ºåŠ¨ç‰©å®ä¾‹\"\"\"        animal_type = animal_type.lower()        if animal_type not in cls._registered_animals:            available = ', '.join(cls._registered_animals.keys())            raise ValueError(f\"æœªçŸ¥çš„åŠ¨ç‰©ç±»å‹: {animal_type}ã€‚å¯ç”¨ç±»å‹: {available}\")                animal_class = cls._registered_animals[animal_type]        return animal_class(*args, **kwargs)        @classmethod    def list_animals(cls):        \"\"\"åˆ—å‡ºæ‰€æœ‰æ³¨å†Œçš„åŠ¨ç‰©ç±»\"\"\"        print(\"å·²æ³¨å†Œçš„åŠ¨ç‰©ç±»:\")        for name, animal_class in cls._registered_animals.items():            print(f\"  {name}: {animal_class.__name__}\")            print(f\"    æ˜¯Animalçš„å­ç±»: {issubclass(animal_class, Animal)}\")            print(f\"    æ˜¯Mammalçš„å­ç±»: {issubclass(animal_class, Mammal)}\")# ä½¿ç”¨å·¥å‚æ¨¡å¼print(\"\\nå·¥å‚æ¨¡å¼ç¤ºä¾‹:\")# æ³¨å†ŒåŠ¨ç‰©ç±»AnimalFactory.register_animal(\"dog\", Dog)AnimalFactory.register_animal(\"cat\", Cat)AnimalFactory.register_animal(\"bird\", Bird)# å°è¯•æ³¨å†ŒéAnimalå­ç±»class Robot:    def __init__(self, name):        self.name = nametry:    AnimalFactory.register_animal(\"robot\", Robot)except TypeError as e:    print(f\"æ³¨å†Œå¤±è´¥: {e}\")# åˆ›å»ºåŠ¨ç‰©å®ä¾‹dog = AnimalFactory.create_animal(\"dog\", \"Buddy\", \"Golden Retriever\")cat = AnimalFactory.create_animal(\"cat\", \"Whiskers\")print(f\"\\nåˆ›å»ºçš„åŠ¨ç‰©:\")print(f\"ç‹—: {dog.name}, å“ç§: {dog.breed}, å«å£°: {dog.speak()}\")print(f\"çŒ«: {cat.name}, å«å£°: {cat.speak()}\")# åˆ—å‡ºæ‰€æœ‰åŠ¨ç‰©AnimalFactory.list_animals()æ’ä»¶ç³»ç»Ÿimport importlibimport inspectfrom typing import Dict, List, Type# æ’ä»¶åŸºç±»class Plugin(ABC):    \"\"\"æ’ä»¶åŸºç±»\"\"\"        @property    @abstractmethod    def name(self) -&gt; str:        \"\"\"æ’ä»¶åç§°\"\"\"        pass        @property    @abstractmethod    def version(self) -&gt; str:        \"\"\"æ’ä»¶ç‰ˆæœ¬\"\"\"        pass        @abstractmethod    def execute(self, *args, **kwargs):        \"\"\"æ‰§è¡Œæ’ä»¶åŠŸèƒ½\"\"\"        pass        def initialize(self):        \"\"\"åˆå§‹åŒ–æ’ä»¶\"\"\"        pass        def cleanup(self):        \"\"\"æ¸…ç†æ’ä»¶èµ„æº\"\"\"        passclass DataProcessor(Plugin):    \"\"\"æ•°æ®å¤„ç†æ’ä»¶åŸºç±»\"\"\"        @abstractmethod    def process_data(self, data):        \"\"\"å¤„ç†æ•°æ®\"\"\"        passclass Validator(Plugin):    \"\"\"éªŒè¯å™¨æ’ä»¶åŸºç±»\"\"\"        @abstractmethod    def validate(self, data) -&gt; bool:        \"\"\"éªŒè¯æ•°æ®\"\"\"        pass# å…·ä½“æ’ä»¶å®ç°class TextProcessor(DataProcessor):    \"\"\"æ–‡æœ¬å¤„ç†æ’ä»¶\"\"\"        @property    def name(self) -&gt; str:        return \"Text Processor\"        @property    def version(self) -&gt; str:        return \"1.0.0\"        def execute(self, text: str) -&gt; str:        return self.process_data(text)        def process_data(self, data: str) -&gt; str:        \"\"\"å¤„ç†æ–‡æœ¬æ•°æ®\"\"\"        return data.strip().upper()class NumberValidator(Validator):    \"\"\"æ•°å­—éªŒè¯æ’ä»¶\"\"\"        @property    def name(self) -&gt; str:        return \"Number Validator\"        @property    def version(self) -&gt; str:        return \"1.0.0\"        def execute(self, value) -&gt; bool:        return self.validate(value)        def validate(self, data) -&gt; bool:        \"\"\"éªŒè¯æ˜¯å¦ä¸ºæ•°å­—\"\"\"        try:            float(data)            return True        except (ValueError, TypeError):            return Falseclass EmailValidator(Validator):    \"\"\"é‚®ç®±éªŒè¯æ’ä»¶\"\"\"        @property    def name(self) -&gt; str:        return \"Email Validator\"        @property    def version(self) -&gt; str:        return \"1.0.0\"        def execute(self, email: str) -&gt; bool:        return self.validate(email)        def validate(self, data: str) -&gt; bool:        \"\"\"ç®€å•çš„é‚®ç®±éªŒè¯\"\"\"        return isinstance(data, str) and '@' in data and '.' in data# æ’ä»¶ç®¡ç†å™¨class PluginManager:    \"\"\"æ’ä»¶ç®¡ç†å™¨\"\"\"        def __init__(self):        self._plugins: Dict[str, Plugin] = {}        self._plugin_types: Dict[Type[Plugin], List[Plugin]] = {}        def register_plugin(self, plugin: Plugin):        \"\"\"æ³¨å†Œæ’ä»¶\"\"\"        if not issubclass(type(plugin), Plugin):            raise TypeError(f\"{type(plugin).__name__} å¿…é¡»æ˜¯ Plugin çš„å­ç±»\")                plugin_name = plugin.name        if plugin_name in self._plugins:            print(f\"è­¦å‘Š: æ’ä»¶ '{plugin_name}' å·²å­˜åœ¨ï¼Œå°†è¢«è¦†ç›–\")                self._plugins[plugin_name] = plugin                # æŒ‰ç±»å‹åˆ†ç»„        plugin_type = type(plugin)        for base_class in inspect.getmro(plugin_type):            if issubclass(base_class, Plugin) and base_class != Plugin:                if base_class not in self._plugin_types:                    self._plugin_types[base_class] = []                if plugin not in self._plugin_types[base_class]:                    self._plugin_types[base_class].append(plugin)                plugin.initialize()        print(f\"å·²æ³¨å†Œæ’ä»¶: {plugin_name} v{plugin.version}\")        def get_plugin(self, name: str) -&gt; Plugin:        \"\"\"è·å–æ’ä»¶\"\"\"        if name not in self._plugins:            raise KeyError(f\"æœªæ‰¾åˆ°æ’ä»¶: {name}\")        return self._plugins[name]        def get_plugins_by_type(self, plugin_type: Type[Plugin]) -&gt; List[Plugin]:        \"\"\"æŒ‰ç±»å‹è·å–æ’ä»¶\"\"\"        result = []        for plugin in self._plugins.values():            if issubclass(type(plugin), plugin_type):                result.append(plugin)        return result        def list_plugins(self):        \"\"\"åˆ—å‡ºæ‰€æœ‰æ’ä»¶\"\"\"        print(\"å·²æ³¨å†Œçš„æ’ä»¶:\")        for name, plugin in self._plugins.items():            plugin_type = type(plugin)            base_classes = [cls.__name__ for cls in inspect.getmro(plugin_type)                           if issubclass(cls, Plugin) and cls != Plugin and cls != plugin_type]            print(f\"  {name} v{plugin.version}\")            print(f\"    ç±»å‹: {plugin_type.__name__}\")            print(f\"    ç»§æ‰¿: {' -&gt; '.join(base_classes)}\")            print(f\"    æ˜¯DataProcessor: {issubclass(plugin_type, DataProcessor)}\")            print(f\"    æ˜¯Validator: {issubclass(plugin_type, Validator)}\")        def execute_plugin(self, name: str, *args, **kwargs):        \"\"\"æ‰§è¡Œæ’ä»¶\"\"\"        plugin = self.get_plugin(name)        return plugin.execute(*args, **kwargs)        def cleanup_all(self):        \"\"\"æ¸…ç†æ‰€æœ‰æ’ä»¶\"\"\"        for plugin in self._plugins.values():            plugin.cleanup()        print(\"å·²æ¸…ç†æ‰€æœ‰æ’ä»¶\")# ä½¿ç”¨æ’ä»¶ç³»ç»Ÿprint(\"\\næ’ä»¶ç³»ç»Ÿç¤ºä¾‹:\")# åˆ›å»ºæ’ä»¶ç®¡ç†å™¨manager = PluginManager()# æ³¨å†Œæ’ä»¶manager.register_plugin(TextProcessor())manager.register_plugin(NumberValidator())manager.register_plugin(EmailValidator())# åˆ—å‡ºæ’ä»¶manager.list_plugins()# æŒ‰ç±»å‹è·å–æ’ä»¶print(\"\\næŒ‰ç±»å‹è·å–æ’ä»¶:\")data_processors = manager.get_plugins_by_type(DataProcessor)validators = manager.get_plugins_by_type(Validator)print(f\"æ•°æ®å¤„ç†å™¨: {[p.name for p in data_processors]}\")print(f\"éªŒè¯å™¨: {[p.name for p in validators]}\")# æ‰§è¡Œæ’ä»¶print(\"\\næ‰§è¡Œæ’ä»¶:\")text_result = manager.execute_plugin(\"Text Processor\", \"  hello world  \")print(f\"æ–‡æœ¬å¤„ç†ç»“æœ: '{text_result}'\")number_valid = manager.execute_plugin(\"Number Validator\", \"123.45\")print(f\"æ•°å­—éªŒè¯ç»“æœ: {number_valid}\")email_valid = manager.execute_plugin(\"Email Validator\", \"user@example.com\")print(f\"é‚®ç®±éªŒè¯ç»“æœ: {email_valid}\")# æ¸…ç†manager.cleanup_all()åŠ¨æ€ç±»å‹æ£€æŸ¥import sysfrom typing import Any, Union, get_origin, get_args# åŠ¨æ€ç±»å‹æ£€æŸ¥å·¥å…·class TypeChecker:    \"\"\"åŠ¨æ€ç±»å‹æ£€æŸ¥å·¥å…·\"\"\"        @staticmethod    def is_subclass_of_any(cls: type, *base_classes) -&gt; bool:        \"\"\"æ£€æŸ¥ç±»æ˜¯å¦æ˜¯ä»»æ„åŸºç±»çš„å­ç±»\"\"\"        return any(issubclass(cls, base) for base in base_classes)        @staticmethod    def get_all_subclasses(cls: type) -&gt; set:        \"\"\"è·å–ç±»çš„æ‰€æœ‰å­ç±»\"\"\"        subclasses = set(cls.__subclasses__())        for subclass in list(subclasses):            subclasses.update(TypeChecker.get_all_subclasses(subclass))        return subclasses        @staticmethod    def find_common_base(cls1: type, cls2: type) -&gt; type:        \"\"\"æ‰¾åˆ°ä¸¤ä¸ªç±»çš„æœ€è¿‘å…¬å…±åŸºç±»\"\"\"        mro1 = cls1.__mro__        mro2 = cls2.__mro__                for base in mro1:            if base in mro2:                return base                return object  # å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›object        @staticmethod    def get_inheritance_depth(cls: type, base: type) -&gt; int:        \"\"\"è·å–ç»§æ‰¿æ·±åº¦\"\"\"        if not issubclass(cls, base):            return -1                depth = 0        for ancestor in cls.__mro__:            if ancestor == base:                return depth            depth += 1                return -1        @staticmethod    def analyze_class_hierarchy(cls: type):        \"\"\"åˆ†æç±»çš„ç»§æ‰¿å±‚æ¬¡\"\"\"        print(f\"\\nç±» {cls.__name__} çš„ç»§æ‰¿åˆ†æ:\")        print(f\"  MRO: {' -&gt; '.join(c.__name__ for c in cls.__mro__)}\")                # ç›´æ¥åŸºç±»        direct_bases = cls.__bases__        print(f\"  ç›´æ¥åŸºç±»: {[c.__name__ for c in direct_bases]}\")                # æ‰€æœ‰å­ç±»        subclasses = TypeChecker.get_all_subclasses(cls)        if subclasses:            print(f\"  æ‰€æœ‰å­ç±»: {[c.__name__ for c in subclasses]}\")        else:            print(f\"  æ— å­ç±»\")                # ä¸å¸¸è§ç±»å‹çš„å…³ç³»        common_types = [object, Exception, BaseException, type]        for common_type in common_types:            if issubclass(cls, common_type):                depth = TypeChecker.get_inheritance_depth(cls, common_type)                print(f\"  æ˜¯{common_type.__name__}çš„å­ç±» (æ·±åº¦: {depth})\")# æµ‹è¯•åŠ¨æ€ç±»å‹æ£€æŸ¥print(\"åŠ¨æ€ç±»å‹æ£€æŸ¥ç¤ºä¾‹:\")# åˆ†æä¸åŒç±»çš„ç»§æ‰¿å±‚æ¬¡classes_to_analyze = [Dog, ValueError, list, type]for cls in classes_to_analyze:    TypeChecker.analyze_class_hierarchy(cls)# æŸ¥æ‰¾å…¬å…±åŸºç±»print(f\"\\nå…¬å…±åŸºç±»åˆ†æ:\")print(f\"Dogå’ŒCatçš„å…¬å…±åŸºç±»: {TypeChecker.find_common_base(Dog, Cat).__name__}\")print(f\"Dogå’ŒBirdçš„å…¬å…±åŸºç±»: {TypeChecker.find_common_base(Dog, Bird).__name__}\")print(f\"listå’Œdictçš„å…¬å…±åŸºç±»: {TypeChecker.find_common_base(list, dict).__name__}\")print(f\"ValueErrorå’ŒTypeErrorçš„å…¬å…±åŸºç±»: {TypeChecker.find_common_base(ValueError, TypeError).__name__}\")# ç»§æ‰¿æ·±åº¦åˆ†æprint(f\"\\nç»§æ‰¿æ·±åº¦åˆ†æ:\")print(f\"Dogåˆ°Animalçš„æ·±åº¦: {TypeChecker.get_inheritance_depth(Dog, Animal)}\")print(f\"Dogåˆ°objectçš„æ·±åº¦: {TypeChecker.get_inheritance_depth(Dog, object)}\")print(f\"boolåˆ°intçš„æ·±åº¦: {TypeChecker.get_inheritance_depth(bool, int)}\")print(f\"boolåˆ°objectçš„æ·±åº¦: {TypeChecker.get_inheritance_depth(bool, object)}\")# æ‰¹é‡ç±»å‹æ£€æŸ¥print(f\"\\næ‰¹é‡ç±»å‹æ£€æŸ¥:\")test_classes = [Dog, Cat, Bird, Duck, Penguin, Bat]base_classes = [Animal, Mammal, Flyable, Swimmable]print(\"ç±»å‹å…¼å®¹æ€§çŸ©é˜µ:\")print(f\"{'ç±»å':&lt;10} {'Animal':&lt;8} {'Mammal':&lt;8} {'Flyable':&lt;9} {'Swimmable':&lt;10}\")print(\"-\" * 50)for test_class in test_classes:    row = f\"{test_class.__name__:&lt;10}\"    for base_class in base_classes:        is_sub = issubclass(test_class, base_class)        row += f\" {'âœ“' if is_sub else 'âœ—':&lt;7}\"    print(row)âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µé”™è¯¯å¤„ç†# å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ# é”™è¯¯1ï¼šä¼ å…¥éç±»å‹å¯¹è±¡print(\"é”™è¯¯å¤„ç†ç¤ºä¾‹:\")try:    # é”™è¯¯ï¼šä¼ å…¥å®ä¾‹è€Œä¸æ˜¯ç±»    dog_instance = Dog(\"Buddy\", \"Golden Retriever\")    result = issubclass(dog_instance, Animal)  # TypeErrorexcept TypeError as e:    print(f\"é”™è¯¯1: {e}\")    print(f\"æ­£ç¡®åšæ³•: issubclass(type(dog_instance), Animal) = {issubclass(type(dog_instance), Animal)}\")# é”™è¯¯2ï¼šä¼ å…¥Noneæˆ–å…¶ä»–éç±»å‹å€¼try:    result = issubclass(None, Animal)  # TypeErrorexcept TypeError as e:    print(f\"é”™è¯¯2: {e}\")# å®‰å…¨çš„å­ç±»æ£€æŸ¥å‡½æ•°def safe_issubclass(obj, classinfo):    \"\"\"å®‰å…¨çš„å­ç±»æ£€æŸ¥\"\"\"    try:        # å¦‚æœobjæ˜¯å®ä¾‹ï¼Œè·å–å…¶ç±»å‹        if not isinstance(obj, type):            if hasattr(obj, '__class__'):                obj = obj.__class__            else:                return False                return issubclass(obj, classinfo)    except TypeError:        return False# æµ‹è¯•å®‰å…¨æ£€æŸ¥print(f\"\\nå®‰å…¨æ£€æŸ¥æµ‹è¯•:\")test_objects = [Dog, Dog(\"Test\", \"Test\"), \"string\", 123, None, [1, 2, 3]]for obj in test_objects:    result = safe_issubclass(obj, Animal)    obj_repr = repr(obj) if not isinstance(obj, type) else obj.__name__    print(f\"safe_issubclass({obj_repr}, Animal) = {result}\")æ€§èƒ½ä¼˜åŒ–import timefrom functools import lru_cache# æ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹class PerformanceTest:    \"\"\"æ€§èƒ½æµ‹è¯•ç±»\"\"\"        @staticmethod    def basic_subclass_check(cls, base, iterations=100000):        \"\"\"åŸºæœ¬å­ç±»æ£€æŸ¥æ€§èƒ½æµ‹è¯•\"\"\"        start_time = time.time()        for _ in range(iterations):            issubclass(cls, base)        end_time = time.time()        return end_time - start_time        @staticmethod    @lru_cache(maxsize=1024)    def cached_subclass_check(cls, base):        \"\"\"ç¼“å­˜çš„å­ç±»æ£€æŸ¥\"\"\"        return issubclass(cls, base)        @staticmethod    def cached_subclass_check_test(cls, base, iterations=100000):        \"\"\"ç¼“å­˜å­ç±»æ£€æŸ¥æ€§èƒ½æµ‹è¯•\"\"\"        start_time = time.time()        for _ in range(iterations):            PerformanceTest.cached_subclass_check(cls, base)        end_time = time.time()        return end_time - start_time        @staticmethod    def mro_based_check(cls, base):        \"\"\"åŸºäºMROçš„æ£€æŸ¥\"\"\"        return base in cls.__mro__        @staticmethod    def mro_check_test(cls, base, iterations=100000):        \"\"\"MROæ£€æŸ¥æ€§èƒ½æµ‹è¯•\"\"\"        start_time = time.time()        for _ in range(iterations):            PerformanceTest.mro_based_check(cls, base)        end_time = time.time()        return end_time - start_time# æ€§èƒ½æ¯”è¾ƒprint(\"\\næ€§èƒ½æ¯”è¾ƒ:\")iterations = 100000# æµ‹è¯•ä¸åŒæ·±åº¦çš„ç»§æ‰¿test_cases = [    (Dog, Animal, \"Dog -&gt; Animal (æ·±åº¦2)\"),    (Dog, object, \"Dog -&gt; object (æ·±åº¦4)\"),    (bool, int, \"bool -&gt; int (æ·±åº¦1)\"),    (bool, object, \"bool -&gt; object (æ·±åº¦3)\")]for cls, base, description in test_cases:    print(f\"\\n{description}:\")        # åŸºæœ¬æ£€æŸ¥    basic_time = PerformanceTest.basic_subclass_check(cls, base, iterations)    print(f\"  åŸºæœ¬issubclass: {basic_time:.4f}ç§’\")        # ç¼“å­˜æ£€æŸ¥    cached_time = PerformanceTest.cached_subclass_check_test(cls, base, iterations)    print(f\"  ç¼“å­˜æ£€æŸ¥: {cached_time:.4f}ç§’\")        # MROæ£€æŸ¥    mro_time = PerformanceTest.mro_check_test(cls, base, iterations)    print(f\"  MROæ£€æŸ¥: {mro_time:.4f}ç§’\")        # éªŒè¯ç»“æœä¸€è‡´æ€§    basic_result = issubclass(cls, base)    cached_result = PerformanceTest.cached_subclass_check(cls, base)    mro_result = PerformanceTest.mro_based_check(cls, base)        print(f\"  ç»“æœä¸€è‡´: {basic_result == cached_result == mro_result}\")        if basic_time &gt; 0:        print(f\"  ç¼“å­˜åŠ é€Ÿ: {basic_time / cached_time:.1f}x\")        print(f\"  MROåŠ é€Ÿ: {basic_time / mro_time:.1f}x\")# æ¸…ç†ç¼“å­˜PerformanceTest.cached_subclass_check.cache_clear()æœ€ä½³å®è·µ# æœ€ä½³å®è·µç¤ºä¾‹# 1. ç±»å‹æ£€æŸ¥çš„æœ€ä½³å®è·µclass BestPractices:    \"\"\"æœ€ä½³å®è·µç¤ºä¾‹\"\"\"        @staticmethod    def validate_plugin_class(plugin_class):        \"\"\"éªŒè¯æ’ä»¶ç±»çš„æœ€ä½³å®è·µ\"\"\"        # æ£€æŸ¥æ˜¯å¦ä¸ºç±»        if not isinstance(plugin_class, type):            raise TypeError(f\"æœŸæœ›ç±»å¯¹è±¡ï¼Œå¾—åˆ° {type(plugin_class).__name__}\")                # æ£€æŸ¥ç»§æ‰¿å…³ç³»        if not issubclass(plugin_class, Plugin):            raise TypeError(f\"{plugin_class.__name__} å¿…é¡»ç»§æ‰¿è‡ª Plugin\")                # æ£€æŸ¥æŠ½è±¡æ–¹æ³•å®ç°        abstract_methods = getattr(plugin_class, '__abstractmethods__', set())        if abstract_methods:            raise TypeError(                f\"{plugin_class.__name__} å¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•: {', '.join(abstract_methods)}\"            )                return True        @staticmethod    def smart_type_check(obj, expected_types):        \"\"\"æ™ºèƒ½ç±»å‹æ£€æŸ¥\"\"\"        # å¦‚æœobjæ˜¯ç±»ï¼Œæ£€æŸ¥å­ç±»å…³ç³»        if isinstance(obj, type):            if isinstance(expected_types, (list, tuple)):                return any(issubclass(obj, t) for t in expected_types)            else:                return issubclass(obj, expected_types)                # å¦‚æœobjæ˜¯å®ä¾‹ï¼Œæ£€æŸ¥å®ä¾‹ç±»å‹        else:            if isinstance(expected_types, (list, tuple)):                return any(isinstance(obj, t) for t in expected_types)            else:                return isinstance(obj, expected_types)        @staticmethod    def get_type_hierarchy_info(cls):        \"\"\"è·å–ç±»å‹å±‚æ¬¡ä¿¡æ¯\"\"\"        if not isinstance(cls, type):            raise TypeError(\"å‚æ•°å¿…é¡»æ˜¯ç±»å¯¹è±¡\")                info = {            'name': cls.__name__,            'module': cls.__module__,            'mro': [c.__name__ for c in cls.__mro__],            'direct_bases': [c.__name__ for c in cls.__bases__],            'subclasses': [c.__name__ for c in cls.__subclasses__()],            'is_abstract': bool(getattr(cls, '__abstractmethods__', None)),            'abstract_methods': list(getattr(cls, '__abstractmethods__', [])),        }                # æ£€æŸ¥ä¸å¸¸è§ç±»å‹çš„å…³ç³»        common_checks = {            'is_exception': issubclass(cls, BaseException),            'is_builtin': cls.__module__ == 'builtins',            'is_callable': issubclass(cls, type) or hasattr(cls, '__call__'),        }        info.update(common_checks)                return info# æµ‹è¯•æœ€ä½³å®è·µprint(\"\\næœ€ä½³å®è·µæµ‹è¯•:\")# æ™ºèƒ½ç±»å‹æ£€æŸ¥test_objects = [Dog, Dog(\"Test\", \"Test\"), \"string\", Animal]expected_types = [Animal, str]print(\"æ™ºèƒ½ç±»å‹æ£€æŸ¥:\")for obj in test_objects:    result = BestPractices.smart_type_check(obj, expected_types)    obj_repr = obj.__name__ if isinstance(obj, type) else f\"{type(obj).__name__}å®ä¾‹\"    print(f\"  {obj_repr} åŒ¹é… {[t.__name__ for t in expected_types]}: {result}\")# ç±»å‹å±‚æ¬¡ä¿¡æ¯print(\"\\nç±»å‹å±‚æ¬¡ä¿¡æ¯:\")for cls in [Dog, ValueError, Plugin]:    info = BestPractices.get_type_hierarchy_info(cls)    print(f\"\\n{cls.__name__}:\")    for key, value in info.items():        print(f\"  {key}: {value}\")# æ’ä»¶éªŒè¯print(\"\\næ’ä»¶éªŒè¯:\")valid_plugins = [TextProcessor, NumberValidator]invalid_plugins = [Dog, str, object]for plugin_cls in valid_plugins + invalid_plugins:    try:        BestPractices.validate_plugin_class(plugin_cls)        print(f\"  {plugin_cls.__name__}: âœ“ æœ‰æ•ˆæ’ä»¶\")    except TypeError as e:        print(f\"  {plugin_cls.__name__}: âœ— {e}\")ğŸ”— ç›¸å…³å‡½æ•°å†…ç½®å‡½æ•°  isinstance() - æ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»çš„å®ä¾‹  type() - è·å–å¯¹è±¡çš„ç±»å‹  hasattr() - æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æŒ‡å®šå±æ€§  getattr() - è·å–å¯¹è±¡çš„å±æ€§å€¼  super() - è®¿é—®çˆ¶ç±»æ–¹æ³•æ ‡å‡†åº“æ¨¡å—  abc - æŠ½è±¡åŸºç±»          ABC - æŠ½è±¡åŸºç±»      abstractmethod - æŠ½è±¡æ–¹æ³•è£…é¥°å™¨        inspect - å¯¹è±¡æ£€æŸ¥          getmro() - è·å–æ–¹æ³•è§£æé¡ºåº      getmembers() - è·å–å¯¹è±¡æˆå‘˜        typing - ç±»å‹æç¤º          Union, Optional - è”åˆç±»å‹      Type - ç±»å‹æ³¨è§£        collections.abc - æŠ½è±¡åŸºç±»é›†åˆ          Iterable, Container, Sized - å¸¸ç”¨æŠ½è±¡åŸºç±»      ç¬¬ä¸‰æ–¹åº“  attrs - ç±»å®šä¹‰ç®€åŒ–  dataclasses - æ•°æ®ç±»  pydantic - æ•°æ®éªŒè¯  mypy - é™æ€ç±»å‹æ£€æŸ¥ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - issubclass()  Pythonå®˜æ–¹æ–‡æ¡£ - ç±»å’Œå®ä¾‹  Pythonå®˜æ–¹æ–‡æ¡£ - æŠ½è±¡åŸºç±»  æ–¹æ³•è§£æé¡ºåº(MRO)è¯¦è§£  Pythonç±»å‹ç³»ç»ŸæŒ‡å—ğŸ·ï¸ æ ‡ç­¾ç±»å‹æ£€æŸ¥ ç»§æ‰¿ é¢å‘å¯¹è±¡ åå°„ å¤šæ€ æŠ½è±¡åŸºç±»æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/issubclass/",
        "category": "builtins",
        "tags": ["ç±»å‹æ£€æŸ¥","ç»§æ‰¿","é¢å‘å¯¹è±¡","åå°„"]
      }
      
    
  
    
      ,
      {
        "title": "iter() - è¿­ä»£å™¨åˆ›å»ºå‡½æ•°",
        "content": "iter() - è¿­ä»£å™¨åˆ›å»ºå‡½æ•°ğŸ“ æ¦‚è¿°iter() æ˜¯Pythonä¸­ç”¨äºåˆ›å»ºè¿­ä»£å™¨å¯¹è±¡çš„å†…ç½®å‡½æ•°ã€‚å®ƒå¯ä»¥å°†å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºè¿­ä»£å™¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨å‡½æ•°å’Œå“¨å…µå€¼åˆ›å»ºè¿­ä»£å™¨ã€‚è¿­ä»£å™¨æ˜¯Pythonä¸­å®ç°æƒ°æ€§æ±‚å€¼å’Œå†…å­˜é«˜æ•ˆæ•°æ®å¤„ç†çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå¹¿æ³›åº”ç”¨äºå¾ªç¯ã€æ•°æ®æµå¤„ç†å’Œå‡½æ•°å¼ç¼–ç¨‹ä¸­ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡iter()å‡½æ•°çš„ä¸¤ç§è°ƒç”¨å½¢å¼å’Œç”¨æ³•  ç†è§£è¿­ä»£å™¨åè®®å’Œè¿­ä»£å™¨çš„å·¥ä½œåŸç†  å­¦ä¼šä½¿ç”¨iter()åˆ›å»ºè‡ªå®šä¹‰è¿­ä»£å™¨  äº†è§£è¿­ä»£å™¨åœ¨å†…å­˜ä¼˜åŒ–å’Œæ•°æ®æµå¤„ç†ä¸­çš„åº”ç”¨  æŒæ¡è¿­ä»£å™¨çš„é«˜çº§ç”¨æ³•å’Œæœ€ä½³å®è·µğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºç¡€è¯­æ³•å’Œæ•°æ®ç±»å‹  å¯è¿­ä»£å¯¹è±¡å’Œè¿­ä»£å™¨çš„æ¦‚å¿µ  ç”Ÿæˆå™¨å’Œyieldå…³é”®å­—  å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€  å¼‚å¸¸å¤„ç†æœºåˆ¶ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µiter() å‡½æ•°æœ‰ä¸¤ç§è°ƒç”¨å½¢å¼ï¼š  iter(iterable) - ä»å¯è¿­ä»£å¯¹è±¡åˆ›å»ºè¿­ä»£å™¨  iter(callable, sentinel) - ä»å¯è°ƒç”¨å¯¹è±¡å’Œå“¨å…µå€¼åˆ›å»ºè¿­ä»£å™¨è¿­ä»£å™¨æ˜¯å®ç°äº†è¿­ä»£å™¨åè®®çš„å¯¹è±¡ï¼Œå¿…é¡»å®ç° __iter__() å’Œ __next__() æ–¹æ³•ã€‚è¯­æ³•æ ¼å¼# å½¢å¼1ï¼šä»å¯è¿­ä»£å¯¹è±¡åˆ›å»ºè¿­ä»£å™¨iter(iterable)# å½¢å¼2ï¼šä»å¯è°ƒç”¨å¯¹è±¡åˆ›å»ºè¿­ä»£å™¨iter(callable, sentinel)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      è¯´æ˜                  iterable      å¯è¿­ä»£å¯¹è±¡      æ˜¯      ä»»ä½•å®ç°äº†__iter__()æˆ–__getitem__()çš„å¯¹è±¡              callable      å¯è°ƒç”¨å¯¹è±¡      æ˜¯      æ— å‚æ•°çš„å‡½æ•°æˆ–æ–¹æ³•              sentinel      ä»»æ„ç±»å‹      æ˜¯      å“¨å…µå€¼ï¼Œå½“callableè¿”å›æ­¤å€¼æ—¶åœæ­¢è¿­ä»£      è¿”å›å€¼  è¿”å›ç±»å‹: iteratorå¯¹è±¡  ç‰¹æ€§: å®ç°äº†è¿­ä»£å™¨åè®®ï¼Œæ”¯æŒnext()å‡½æ•°è°ƒç”¨  çŠ¶æ€: æœ‰çŠ¶æ€çš„ï¼Œè®°ä½å½“å‰è¿­ä»£ä½ç½®ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€è¿­ä»£å™¨æ“ä½œ# åŸºç¡€è¿­ä»£å™¨æ“ä½œç¤ºä¾‹print(\"åŸºç¡€è¿­ä»£å™¨æ“ä½œç¤ºä¾‹:\")# 1. ä»å¯è¿­ä»£å¯¹è±¡åˆ›å»ºè¿­ä»£å™¨print(\"\\n1. ä»å¯è¿­ä»£å¯¹è±¡åˆ›å»ºè¿­ä»£å™¨:\")# åˆ—è¡¨è¿­ä»£å™¨test_list = [1, 2, 3, 4, 5]list_iter = iter(test_list)print(f\"åŸå§‹åˆ—è¡¨: {test_list}\")print(f\"è¿­ä»£å™¨ç±»å‹: {type(list_iter)}\")print(f\"è¿­ä»£å™¨å¯¹è±¡: {list_iter}\")# æ‰‹åŠ¨è¿­ä»£print(\"\\næ‰‹åŠ¨è¿­ä»£:\")try:    while True:        value = next(list_iter)        print(f\"  ä¸‹ä¸€ä¸ªå€¼: {value}\")except StopIteration:    print(\"  è¿­ä»£ç»“æŸ\")# å­—ç¬¦ä¸²è¿­ä»£å™¨test_string = \"Hello\"string_iter = iter(test_string)print(f\"\\nå­—ç¬¦ä¸²: '{test_string}'\")print(f\"å­—ç¬¦è¿­ä»£: {list(string_iter)}\")# å­—å…¸è¿­ä»£å™¨test_dict = {'a': 1, 'b': 2, 'c': 3}dict_iter = iter(test_dict)  # é»˜è®¤è¿­ä»£é”®print(f\"\\nå­—å…¸: {test_dict}\")print(f\"é”®è¿­ä»£: {list(dict_iter)}\")# å­—å…¸å€¼å’Œé¡¹çš„è¿­ä»£å™¨values_iter = iter(test_dict.values())items_iter = iter(test_dict.items())print(f\"å€¼è¿­ä»£: {list(values_iter)}\")print(f\"é¡¹è¿­ä»£: {list(items_iter)}\")# èŒƒå›´è¿­ä»£å™¨range_iter = iter(range(3, 8))print(f\"\\nèŒƒå›´è¿­ä»£: {list(range_iter)}\")# é›†åˆè¿­ä»£å™¨test_set = {10, 20, 30, 40}set_iter = iter(test_set)print(f\"é›†åˆ: {test_set}\")print(f\"é›†åˆè¿­ä»£: {list(set_iter)}\")# 2. è¿­ä»£å™¨çš„ç‰¹æ€§print(\"\\n2. è¿­ä»£å™¨çš„ç‰¹æ€§:\")# è¿­ä»£å™¨æ˜¯ä¸€æ¬¡æ€§çš„test_data = [1, 2, 3]iterator = iter(test_data)print(f\"åŸå§‹æ•°æ®: {test_data}\")print(f\"ç¬¬ä¸€æ¬¡è¿­ä»£: {list(iterator)}\")print(f\"ç¬¬äºŒæ¬¡è¿­ä»£: {list(iterator)}\")print(\"æ³¨æ„: è¿­ä»£å™¨æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œç¬¬äºŒæ¬¡è¿­ä»£ä¸ºç©º\")# è¿­ä»£å™¨è‡ªèº«ä¹Ÿæ˜¯å¯è¿­ä»£çš„iterator2 = iter(test_data)iterator3 = iter(iterator2)  # è¿­ä»£å™¨çš„è¿­ä»£å™¨å°±æ˜¯è‡ªèº«print(f\"\\niterator2 is iterator3: {iterator2 is iterator3}\")# è¿­ä»£å™¨çŠ¶æ€iterator4 = iter([10, 20, 30, 40, 50])print(f\"\\nè¿­ä»£å™¨çŠ¶æ€æ¼”ç¤º:\")print(f\"ç¬¬1ä¸ªå…ƒç´ : {next(iterator4)}\")print(f\"ç¬¬2ä¸ªå…ƒç´ : {next(iterator4)}\")print(f\"å‰©ä½™å…ƒç´ : {list(iterator4)}\")# 3. ä½¿ç”¨iter()çš„ä¸åŒæ–¹å¼print(\"\\n3. ä½¿ç”¨iter()çš„ä¸åŒæ–¹å¼:\")# ä»ç”Ÿæˆå™¨è¡¨è¾¾å¼åˆ›å»ºè¿­ä»£å™¨gen_expr = (x**2 for x in range(5))gen_iter = iter(gen_expr)print(f\"ç”Ÿæˆå™¨è¡¨è¾¾å¼è¿­ä»£: {list(gen_iter)}\")# ä»æ–‡ä»¶å¯¹è±¡åˆ›å»ºè¿­ä»£å™¨ï¼ˆæ¨¡æ‹Ÿï¼‰class MockFile:    def __init__(self, lines):        self.lines = lines        self.index = 0        def __iter__(self):        return self        def __next__(self):        if self.index &gt;= len(self.lines):            raise StopIteration        line = self.lines[self.index]        self.index += 1        return linemock_file = MockFile([\"line 1\\n\", \"line 2\\n\", \"line 3\\n\"])file_iter = iter(mock_file)print(f\"\\næ–‡ä»¶è¡Œè¿­ä»£:\")for line in file_iter:    print(f\"  {line.strip()}\")# ä»è‡ªå®šä¹‰å¯è¿­ä»£å¯¹è±¡åˆ›å»ºè¿­ä»£å™¨class CountDown:    def __init__(self, start):        self.start = start        def __iter__(self):        return CountDownIterator(self.start)class CountDownIterator:    def __init__(self, start):        self.current = start        def __iter__(self):        return self        def __next__(self):        if self.current &lt;= 0:            raise StopIteration        self.current -= 1        return self.current + 1countdown = CountDown(5)countdown_iter = iter(countdown)print(f\"\\nå€’è®¡æ—¶è¿­ä»£: {list(countdown_iter)}\")# 4. è¿­ä»£å™¨åè®®éªŒè¯print(\"\\n4. è¿­ä»£å™¨åè®®éªŒè¯:\")def check_iterator_protocol(obj):    \"\"\"æ£€æŸ¥å¯¹è±¡æ˜¯å¦å®ç°äº†è¿­ä»£å™¨åè®®\"\"\"    has_iter = hasattr(obj, '__iter__')    has_next = hasattr(obj, '__next__')        print(f\"å¯¹è±¡: {obj}\")    print(f\"ç±»å‹: {type(obj).__name__}\")    print(f\"æœ‰__iter__æ–¹æ³•: {has_iter}\")    print(f\"æœ‰__next__æ–¹æ³•: {has_next}\")    print(f\"æ˜¯è¿­ä»£å™¨: {has_iter and has_next}\")    print(f\"æ˜¯å¯è¿­ä»£å¯¹è±¡: {has_iter}\")    print()# æµ‹è¯•ä¸åŒå¯¹è±¡test_objects = [    [1, 2, 3],           # åˆ—è¡¨ï¼ˆå¯è¿­ä»£ï¼Œéè¿­ä»£å™¨ï¼‰    iter([1, 2, 3]),     # åˆ—è¡¨è¿­ä»£å™¨    \"hello\",             # å­—ç¬¦ä¸²ï¼ˆå¯è¿­ä»£ï¼Œéè¿­ä»£å™¨ï¼‰    iter(\"hello\"),       # å­—ç¬¦ä¸²è¿­ä»£å™¨    range(3),            # èŒƒå›´å¯¹è±¡ï¼ˆå¯è¿­ä»£ï¼Œéè¿­ä»£å™¨ï¼‰    iter(range(3)),      # èŒƒå›´è¿­ä»£å™¨]for obj in test_objects:    check_iterator_protocol(obj)å¯è°ƒç”¨å¯¹è±¡è¿­ä»£å™¨# å¯è°ƒç”¨å¯¹è±¡è¿­ä»£å™¨åº”ç”¨print(\"å¯è°ƒç”¨å¯¹è±¡è¿­ä»£å™¨åº”ç”¨:\")# 1. åŸºç¡€å¯è°ƒç”¨å¯¹è±¡è¿­ä»£å™¨print(\"\\n1. åŸºç¡€å¯è°ƒç”¨å¯¹è±¡è¿­ä»£å™¨:\")import randomimport time# éšæœºæ•°ç”Ÿæˆå™¨def random_number():    \"\"\"ç”Ÿæˆ1-10çš„éšæœºæ•°\"\"\"    return random.randint(1, 10)# åˆ›å»ºè¿­ä»£å™¨ï¼Œå½“ç”Ÿæˆ5æ—¶åœæ­¢random_iter = iter(random_number, 5)print(\"ç”Ÿæˆéšæœºæ•°ç›´åˆ°é‡åˆ°5:\")# è®¾ç½®éšæœºç§å­ä»¥ä¾¿å¤ç°random.seed(42)results = []for i, num in enumerate(random_iter):    results.append(num)    print(f\"  ç¬¬{i+1}æ¬¡: {num}\")    if i &gt;= 10:  # é˜²æ­¢æ— é™å¾ªç¯        print(\"  (ä¸ºæ¼”ç¤ºç›®çš„ï¼Œé™åˆ¶æœ€å¤š11æ¬¡)\")        breakprint(f\"ç”Ÿæˆçš„æ•°å­—: {results}\")# 2. æ–‡ä»¶è¯»å–è¿­ä»£å™¨print(\"\\n2. æ–‡ä»¶è¯»å–è¿­ä»£å™¨æ¨¡æ‹Ÿ:\")class MockFileReader:    \"\"\"æ¨¡æ‹Ÿæ–‡ä»¶è¯»å–å™¨\"\"\"    def __init__(self, content):        self.lines = content.split('\\n')        self.index = 0        def read_line(self):        \"\"\"è¯»å–ä¸€è¡Œï¼Œå¦‚æœåˆ°è¾¾æ–‡ä»¶æœ«å°¾è¿”å›ç©ºå­—ç¬¦ä¸²\"\"\"        if self.index &gt;= len(self.lines):            return ''        line = self.lines[self.index]        self.index += 1        return line# åˆ›å»ºæ¨¡æ‹Ÿæ–‡ä»¶file_content = \"\"\"ç¬¬ä¸€è¡Œå†…å®¹ç¬¬äºŒè¡Œå†…å®¹ç¬¬ä¸‰è¡Œå†…å®¹æœ€åä¸€è¡Œ\"\"\"file_reader = MockFileReader(file_content)# ä½¿ç”¨iter()è¯»å–æ–‡ä»¶ç›´åˆ°é‡åˆ°ç©ºå­—ç¬¦ä¸²file_iter = iter(file_reader.read_line, '')print(\"é€è¡Œè¯»å–æ–‡ä»¶:\")for line_num, line in enumerate(file_iter, 1):    print(f\"  è¡Œ{line_num}: {line}\")# 3. ä¼ æ„Ÿå™¨æ•°æ®è¯»å–print(\"\\n3. ä¼ æ„Ÿå™¨æ•°æ®è¯»å–æ¨¡æ‹Ÿ:\")class TemperatureSensor:    \"\"\"æ¨¡æ‹Ÿæ¸©åº¦ä¼ æ„Ÿå™¨\"\"\"    def __init__(self):        self.base_temp = 20.0        self.readings = 0        def read_temperature(self):        \"\"\"è¯»å–æ¸©åº¦ï¼Œæ¨¡æ‹Ÿä¼ æ„Ÿå™¨æ•…éšœè¿”å›-999\"\"\"        self.readings += 1                # æ¨¡æ‹Ÿä¼ æ„Ÿå™¨åœ¨ç¬¬8æ¬¡è¯»å–æ—¶æ•…éšœ        if self.readings == 8:            return -999  # é”™è¯¯ä»£ç                 # æ¨¡æ‹Ÿæ¸©åº¦æ³¢åŠ¨        variation = random.uniform(-2, 2)        return round(self.base_temp + variation, 1)sensor = TemperatureSensor()random.seed(123)  # è®¾ç½®ç§å­ä»¥ä¾¿å¤ç°# è¯»å–æ¸©åº¦ç›´åˆ°é‡åˆ°é”™è¯¯ä»£ç temp_iter = iter(sensor.read_temperature, -999)print(\"è¯»å–æ¸©åº¦æ•°æ®ç›´åˆ°ä¼ æ„Ÿå™¨æ•…éšœ:\")temperatures = []for reading_num, temp in enumerate(temp_iter, 1):    temperatures.append(temp)    print(f\"  è¯»å–{reading_num}: {temp}Â°C\")print(f\"æœ‰æ•ˆæ¸©åº¦è¯»æ•°: {temperatures}\")print(f\"å¹³å‡æ¸©åº¦: {sum(temperatures)/len(temperatures):.1f}Â°C\")# 4. ç”¨æˆ·è¾“å…¥è¿­ä»£å™¨print(\"\\n4. ç”¨æˆ·è¾“å…¥è¿­ä»£å™¨æ¨¡æ‹Ÿ:\")class MockInput:    \"\"\"æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥\"\"\"    def __init__(self, inputs):        self.inputs = inputs        self.index = 0        def get_input(self):        \"\"\"æ¨¡æ‹Ÿè·å–ç”¨æˆ·è¾“å…¥\"\"\"        if self.index &gt;= len(self.inputs):            return 'quit'                value = self.inputs[self.index]        self.index += 1        print(f\"  ç”¨æˆ·è¾“å…¥: {value}\")        return value# æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥åºåˆ—user_inputs = ['hello', 'world', 'python', 'programming', 'quit']mock_input = MockInput(user_inputs)# åˆ›å»ºè¿­ä»£å™¨ï¼Œç›´åˆ°ç”¨æˆ·è¾“å…¥'quit'input_iter = iter(mock_input.get_input, 'quit')print(\"æ”¶é›†ç”¨æˆ·è¾“å…¥ç›´åˆ°è¾“å…¥'quit':\")collected_inputs = list(input_iter)print(f\"æ”¶é›†åˆ°çš„è¾“å…¥: {collected_inputs}\")# 5. ç½‘ç»œæ•°æ®æ¥æ”¶æ¨¡æ‹Ÿprint(\"\\n5. ç½‘ç»œæ•°æ®æ¥æ”¶æ¨¡æ‹Ÿ:\")class NetworkReceiver:    \"\"\"æ¨¡æ‹Ÿç½‘ç»œæ•°æ®æ¥æ”¶å™¨\"\"\"    def __init__(self, data_packets):        self.packets = data_packets        self.index = 0        def receive_packet(self):        \"\"\"æ¥æ”¶æ•°æ®åŒ…ï¼Œè¿”å›Noneè¡¨ç¤ºè¿æ¥æ–­å¼€\"\"\"        if self.index &gt;= len(self.packets):            return None                packet = self.packets[self.index]        self.index += 1                # æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ        time.sleep(0.01)                return packet# æ¨¡æ‹Ÿç½‘ç»œæ•°æ®åŒ…data_packets = [    {'type': 'data', 'payload': 'packet1'},    {'type': 'data', 'payload': 'packet2'},    {'type': 'heartbeat', 'payload': 'ping'},    {'type': 'data', 'payload': 'packet3'},    {'type': 'data', 'payload': 'packet4'},]receiver = NetworkReceiver(data_packets)# æ¥æ”¶æ•°æ®ç›´åˆ°è¿æ¥æ–­å¼€ï¼ˆè¿”å›Noneï¼‰network_iter = iter(receiver.receive_packet, None)print(\"æ¥æ”¶ç½‘ç»œæ•°æ®åŒ…ç›´åˆ°è¿æ¥æ–­å¼€:\")received_packets = []for packet_num, packet in enumerate(network_iter, 1):    received_packets.append(packet)    print(f\"  åŒ…{packet_num}: {packet}\")print(f\"æ€»å…±æ¥æ”¶: {len(received_packets)}ä¸ªæ•°æ®åŒ…\")# 6. é«˜çº§å¯è°ƒç”¨è¿­ä»£å™¨æ¨¡å¼print(\"\\n6. é«˜çº§å¯è°ƒç”¨è¿­ä»£å™¨æ¨¡å¼:\")class StatefulGenerator:    \"\"\"æœ‰çŠ¶æ€çš„ç”Ÿæˆå™¨\"\"\"    def __init__(self, initial_value, increment):        self.value = initial_value        self.increment = increment        self.calls = 0        def next_value(self):        \"\"\"ç”Ÿæˆä¸‹ä¸€ä¸ªå€¼\"\"\"        self.calls += 1        current = self.value        self.value += self.increment                # åœ¨ç¬¬6æ¬¡è°ƒç”¨æ—¶è¿”å›ç‰¹æ®Šå€¼        if self.calls == 6:            return 'STOP'                return current        def get_stats(self):        \"\"\"è·å–ç»Ÿè®¡ä¿¡æ¯\"\"\"        return {            'calls': self.calls,            'current_value': self.value,            'increment': self.increment        }# åˆ›å»ºçŠ¶æ€ç”Ÿæˆå™¨generator = StatefulGenerator(10, 3)# ç”Ÿæˆå€¼ç›´åˆ°é‡åˆ°'STOP'stateful_iter = iter(generator.next_value, 'STOP')print(\"æœ‰çŠ¶æ€ç”Ÿæˆå™¨:\")generated_values = []for value in stateful_iter:    generated_values.append(value)    print(f\"  ç”Ÿæˆå€¼: {value}\")stats = generator.get_stats()print(f\"ç”Ÿæˆçš„å€¼: {generated_values}\")print(f\"ç”Ÿæˆå™¨ç»Ÿè®¡: {stats}\")# 7. æ¡ä»¶è¿­ä»£å™¨print(\"\\n7. æ¡ä»¶è¿­ä»£å™¨:\")class ConditionalIterator:    \"\"\"æ¡ä»¶è¿­ä»£å™¨\"\"\"    def __init__(self, data, condition_func):        self.data = data        self.condition = condition_func        self.index = 0        def next_matching(self):        \"\"\"è¿”å›ä¸‹ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ \"\"\"        while self.index &lt; len(self.data):            item = self.data[self.index]            self.index += 1                        if self.condition(item):                return item                return 'END'  # æ²¡æœ‰æ›´å¤šåŒ¹é…çš„å…ƒç´ # æµ‹è¯•æ•°æ®test_numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 15, 18, 20]# åˆ›å»ºæ¡ä»¶è¿­ä»£å™¨ï¼šåªè¿”å›å¶æ•°even_iterator = ConditionalIterator(test_numbers, lambda x: x % 2 == 0)even_iter = iter(even_iterator.next_matching, 'END')print(f\"åŸå§‹æ•°æ®: {test_numbers}\")print(\"å¶æ•°è¿­ä»£:\")even_numbers = list(even_iter)print(f\"  å¶æ•°: {even_numbers}\")# åˆ›å»ºæ¡ä»¶è¿­ä»£å™¨ï¼šåªè¿”å›å¤§äº10çš„æ•°large_iterator = ConditionalIterator(test_numbers, lambda x: x &gt; 10)large_iter = iter(large_iterator.next_matching, 'END')print(\"å¤§äº10çš„æ•°è¿­ä»£:\")large_numbers = list(large_iter)print(f\"  å¤§äº10: {large_numbers}\")é«˜çº§è¿­ä»£å™¨åº”ç”¨# é«˜çº§è¿­ä»£å™¨åº”ç”¨print(\"é«˜çº§è¿­ä»£å™¨åº”ç”¨:\")# 1. è¿­ä»£å™¨é“¾å’Œç»„åˆprint(\"\\n1. è¿­ä»£å™¨é“¾å’Œç»„åˆ:\")class IteratorChain:    \"\"\"è¿­ä»£å™¨é“¾\"\"\"    def __init__(self, *iterables):        self.iterables = iterables        self.current_iter = None        self.iter_index = 0        def __iter__(self):        return self        def __next__(self):        while self.iter_index &lt; len(self.iterables):            if self.current_iter is None:                self.current_iter = iter(self.iterables[self.iter_index])                        try:                return next(self.current_iter)            except StopIteration:                self.current_iter = None                self.iter_index += 1                raise StopIteration# æµ‹è¯•è¿­ä»£å™¨é“¾chain = IteratorChain([1, 2, 3], \"abc\", range(5, 8))chain_iter = iter(chain)print(f\"è¿­ä»£å™¨é“¾ç»“æœ: {list(chain_iter)}\")# ä½¿ç”¨å†…ç½®çš„itertools.chainè¿›è¡Œæ¯”è¾ƒimport itertoolsbuiltin_chain = itertools.chain([1, 2, 3], \"abc\", range(5, 8))print(f\"å†…ç½®chainç»“æœ: {list(builtin_chain)}\")# 2. ç¼“å­˜è¿­ä»£å™¨print(\"\\n2. ç¼“å­˜è¿­ä»£å™¨:\")class CachedIterator:    \"\"\"ç¼“å­˜è¿­ä»£å™¨\"\"\"    def __init__(self, iterable, cache_size=10):        self.iterator = iter(iterable)        self.cache = []        self.cache_size = cache_size        self.position = 0        def __iter__(self):        return self        def __next__(self):        # å¦‚æœä½ç½®åœ¨ç¼“å­˜èŒƒå›´å†…ï¼Œç›´æ¥è¿”å›ç¼“å­˜çš„å€¼        if self.position &lt; len(self.cache):            value = self.cache[self.position]            self.position += 1            return value                # å¦åˆ™ä»åŸå§‹è¿­ä»£å™¨è·å–æ–°å€¼        try:            value = next(self.iterator)                        # å¦‚æœç¼“å­˜æœªæ»¡ï¼Œæ·»åŠ åˆ°ç¼“å­˜            if len(self.cache) &lt; self.cache_size:                self.cache.append(value)                        self.position += 1            return value        except StopIteration:            raise StopIteration        def reset(self):        \"\"\"é‡ç½®åˆ°ç¼“å­˜å¼€å§‹\"\"\"        self.position = 0        def get_cache_info(self):        \"\"\"è·å–ç¼“å­˜ä¿¡æ¯\"\"\"        return {            'cache_size': len(self.cache),            'max_cache_size': self.cache_size,            'current_position': self.position,            'cached_values': self.cache.copy()        }# æµ‹è¯•ç¼“å­˜è¿­ä»£å™¨def expensive_generator():    \"\"\"æ¨¡æ‹Ÿæ˜‚è´µçš„è®¡ç®—\"\"\"    for i in range(15):        print(f\"    è®¡ç®—ç¬¬{i+1}ä¸ªå€¼...\")        time.sleep(0.01)  # æ¨¡æ‹Ÿè®¡ç®—æ—¶é—´        yield i ** 2print(\"åˆ›å»ºç¼“å­˜è¿­ä»£å™¨ï¼ˆç¼“å­˜å¤§å°=5ï¼‰:\")cached_iter = CachedIterator(expensive_generator(), cache_size=5)# ç¬¬ä¸€æ¬¡è¿­ä»£å‰5ä¸ªå…ƒç´ print(\"\\nç¬¬ä¸€æ¬¡è¿­ä»£å‰5ä¸ªå…ƒç´ :\")first_batch = []for i in range(5):    value = next(cached_iter)    first_batch.append(value)    print(f\"  å€¼{i+1}: {value}\")print(f\"ç¼“å­˜ä¿¡æ¯: {cached_iter.get_cache_info()}\")# é‡ç½®å¹¶å†æ¬¡è¿­ä»£å‰3ä¸ªå…ƒç´ ï¼ˆåº”è¯¥ä»ç¼“å­˜è·å–ï¼‰print(\"\\né‡ç½®å¹¶è¿­ä»£å‰3ä¸ªå…ƒç´ ï¼ˆä»ç¼“å­˜ï¼‰:\")cached_iter.reset()second_batch = []for i in range(3):    value = next(cached_iter)    second_batch.append(value)    print(f\"  ç¼“å­˜å€¼{i+1}: {value}\")print(f\"ç¬¬ä¸€æ‰¹: {first_batch}\")print(f\"ç¬¬äºŒæ‰¹: {second_batch}\")print(f\"ç¼“å­˜å‘½ä¸­: {first_batch[:3] == second_batch}\")# 3. åˆ†é¡µè¿­ä»£å™¨print(\"\\n3. åˆ†é¡µè¿­ä»£å™¨:\")class PagedIterator:    \"\"\"åˆ†é¡µè¿­ä»£å™¨\"\"\"    def __init__(self, data, page_size):        self.data = data        self.page_size = page_size        self.current_page = 0        def __iter__(self):        return self        def __next__(self):        start_index = self.current_page * self.page_size        end_index = start_index + self.page_size                if start_index &gt;= len(self.data):            raise StopIteration                page = self.data[start_index:end_index]        self.current_page += 1                return {            'page_number': self.current_page,            'data': page,            'size': len(page),            'is_last': end_index &gt;= len(self.data)        }        def get_page_info(self):        \"\"\"è·å–åˆ†é¡µä¿¡æ¯\"\"\"        total_pages = (len(self.data) + self.page_size - 1) // self.page_size        return {            'total_items': len(self.data),            'page_size': self.page_size,            'total_pages': total_pages,            'current_page': self.current_page        }# æµ‹è¯•åˆ†é¡µè¿­ä»£å™¨large_dataset = list(range(1, 24))  # 23ä¸ªå…ƒç´ page_size = 5print(f\"æ•°æ®é›†: {large_dataset}\")print(f\"é¡µé¢å¤§å°: {page_size}\")paged_iter = PagedIterator(large_dataset, page_size)print(f\"åˆ†é¡µä¿¡æ¯: {paged_iter.get_page_info()}\")print(\"\\nåˆ†é¡µè¿­ä»£:\")for page in paged_iter:    print(f\"  é¡µé¢{page['page_number']}: {page['data']} (å¤§å°: {page['size']}, æœ€åé¡µ: {page['is_last']})\")# 4. æ¡ä»¶è¿‡æ»¤è¿­ä»£å™¨print(\"\\n4. æ¡ä»¶è¿‡æ»¤è¿­ä»£å™¨:\")class FilterIterator:    \"\"\"æ¡ä»¶è¿‡æ»¤è¿­ä»£å™¨\"\"\"    def __init__(self, iterable, *conditions):        self.iterator = iter(iterable)        self.conditions = conditions        def __iter__(self):        return self        def __next__(self):        while True:            try:                value = next(self.iterator)                                # æ£€æŸ¥æ‰€æœ‰æ¡ä»¶                if all(condition(value) for condition in self.conditions):                    return value                            except StopIteration:                raise StopIteration# å®šä¹‰è¿‡æ»¤æ¡ä»¶def is_even(x):    return x % 2 == 0def is_positive(x):    return x &gt; 0def is_less_than_20(x):    return x &lt; 20# æµ‹è¯•æ•°æ®test_data = [-5, -2, 0, 1, 2, 3, 4, 5, 6, 8, 10, 12, 15, 18, 20, 22, 25]print(f\"æµ‹è¯•æ•°æ®: {test_data}\")# å•æ¡ä»¶è¿‡æ»¤even_filter = FilterIterator(test_data, is_even)print(f\"å¶æ•°è¿‡æ»¤: {list(even_filter)}\")# å¤šæ¡ä»¶è¿‡æ»¤multi_filter = FilterIterator(test_data, is_even, is_positive, is_less_than_20)print(f\"å¶æ•°ä¸”æ­£æ•°ä¸”å°äº20: {list(multi_filter)}\")# ä½¿ç”¨lambdaè¡¨è¾¾å¼lambda_filter = FilterIterator(test_data, lambda x: x % 3 == 0, lambda x: x &gt; 0)print(f\"èƒ½è¢«3æ•´é™¤ä¸”ä¸ºæ­£æ•°: {list(lambda_filter)}\")# 5. çª—å£è¿­ä»£å™¨print(\"\\n5. çª—å£è¿­ä»£å™¨:\")class WindowIterator:    \"\"\"æ»‘åŠ¨çª—å£è¿­ä»£å™¨\"\"\"    def __init__(self, iterable, window_size, step=1):        self.data = list(iterable)  # è½¬æ¢ä¸ºåˆ—è¡¨ä»¥æ”¯æŒç´¢å¼•        self.window_size = window_size        self.step = step        self.position = 0        def __iter__(self):        return self        def __next__(self):        if self.position + self.window_size &gt; len(self.data):            raise StopIteration                window = self.data[self.position:self.position + self.window_size]        self.position += self.step                return window# æµ‹è¯•çª—å£è¿­ä»£å™¨sequence = list(range(1, 11))  # [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]print(f\"åºåˆ—: {sequence}\")# ä¸åŒçª—å£é…ç½®window_configs = [    (3, 1, \"çª—å£å¤§å°3ï¼Œæ­¥é•¿1\"),    (4, 2, \"çª—å£å¤§å°4ï¼Œæ­¥é•¿2\"),    (2, 1, \"çª—å£å¤§å°2ï¼Œæ­¥é•¿1\"),]for window_size, step, description in window_configs:    window_iter = WindowIterator(sequence, window_size, step)    windows = list(window_iter)        print(f\"\\n{description}:\")    for i, window in enumerate(windows):        print(f\"  çª—å£{i+1}: {window}\")# 6. ç»Ÿè®¡è¿­ä»£å™¨print(\"\\n6. ç»Ÿè®¡è¿­ä»£å™¨:\")class StatsIterator:    \"\"\"ç»Ÿè®¡è¿­ä»£å™¨\"\"\"    def __init__(self, iterable):        self.iterator = iter(iterable)        self.count = 0        self.sum = 0        self.min_val = None        self.max_val = None        self.values = []        def __iter__(self):        return self        def __next__(self):        try:            value = next(self.iterator)                        # æ›´æ–°ç»Ÿè®¡ä¿¡æ¯            self.count += 1            self.sum += value            self.values.append(value)                        if self.min_val is None or value &lt; self.min_val:                self.min_val = value                        if self.max_val is None or value &gt; self.max_val:                self.max_val = value                        return value                    except StopIteration:            raise StopIteration        def get_stats(self):        \"\"\"è·å–ç»Ÿè®¡ä¿¡æ¯\"\"\"        if self.count == 0:            return {'count': 0}                return {            'count': self.count,            'sum': self.sum,            'average': self.sum / self.count,            'min': self.min_val,            'max': self.max_val,            'range': self.max_val - self.min_val if self.min_val is not None else 0,            'values': self.values.copy()        }# æµ‹è¯•ç»Ÿè®¡è¿­ä»£å™¨test_values = [3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5]print(f\"æµ‹è¯•å€¼: {test_values}\")stats_iter = StatsIterator(test_values)print(\"\\nè¿­ä»£è¿‡ç¨‹ä¸­çš„ç»Ÿè®¡:\")processed_values = []for i, value in enumerate(stats_iter):    processed_values.append(value)    if i % 3 == 2:  # æ¯3ä¸ªå€¼æ˜¾ç¤ºä¸€æ¬¡ç»Ÿè®¡        current_stats = stats_iter.get_stats()        print(f\"  å¤„ç†{i+1}ä¸ªå€¼å: å¹³å‡={current_stats['average']:.2f}, æœ€å°={current_stats['min']}, æœ€å¤§={current_stats['max']}\")final_stats = stats_iter.get_stats()print(f\"\\næœ€ç»ˆç»Ÿè®¡: {final_stats}\")print(f\"å¤„ç†çš„å€¼: {processed_values}\")print(f\"åŸå§‹å€¼ä¸€è‡´: {test_values == processed_values}\")âš ï¸ æ³¨æ„äº‹é¡¹å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ# iter()å‡½æ•°çš„å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µprint(\"iter()å‡½æ•°å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ:\")# é™·é˜±1: è¿­ä»£å™¨çš„ä¸€æ¬¡æ€§ç‰¹æ€§print(\"\\né™·é˜±1: è¿­ä»£å™¨çš„ä¸€æ¬¡æ€§ç‰¹æ€§\")data = [1, 2, 3, 4, 5]iterator = iter(data)print(f\"åŸå§‹æ•°æ®: {data}\")print(f\"ç¬¬ä¸€æ¬¡å®Œæ•´è¿­ä»£: {list(iterator)}\")print(f\"ç¬¬äºŒæ¬¡è¿­ä»£ï¼ˆå·²è€—å°½ï¼‰: {list(iterator)}\")print(f\"å†æ¬¡å°è¯•next(): \", end=\"\")try:    next(iterator)except StopIteration:    print(\"StopIterationå¼‚å¸¸\")print(\"\\nè§£å†³æ–¹æ¡ˆ:\")print(\"1. é‡æ–°åˆ›å»ºè¿­ä»£å™¨\")iterator2 = iter(data)print(f\"   æ–°è¿­ä»£å™¨: {list(iterator2)}\")print(\"2. ä½¿ç”¨itertools.tee()åˆ›å»ºå¤šä¸ªç‹¬ç«‹è¿­ä»£å™¨\")import itertoolsiter1, iter2 = itertools.tee(iter(data), 2)print(f\"   è¿­ä»£å™¨1: {list(iter1)}\")print(f\"   è¿­ä»£å™¨2: {list(iter2)}\")# é™·é˜±2: å¯è°ƒç”¨å¯¹è±¡è¿­ä»£å™¨çš„æ— é™å¾ªç¯é£é™©print(\"\\né™·é˜±2: å¯è°ƒç”¨å¯¹è±¡è¿­ä»£å™¨çš„æ— é™å¾ªç¯é£é™©\")import randomdef random_choice():    \"\"\"éšæœºè¿”å›1æˆ–2\"\"\"    return random.choice([1, 2])# å±é™©ï¼šå¦‚æœå“¨å…µå€¼å¾ˆéš¾å‡ºç°ï¼Œå¯èƒ½å¯¼è‡´æ— é™å¾ªç¯random.seed(42)print(\"å°è¯•ç”Ÿæˆéšæœºæ•°ç›´åˆ°é‡åˆ°3ï¼ˆå¯èƒ½å¾ˆä¹…ï¼‰:\")# å®‰å…¨çš„åšæ³•ï¼šæ·»åŠ è®¡æ•°å™¨é™åˆ¶class SafeCallableIterator:    def __init__(self, callable_func, sentinel, max_iterations=100):        self.callable_func = callable_func        self.sentinel = sentinel        self.max_iterations = max_iterations        self.iterations = 0        def __iter__(self):        return self        def __next__(self):        if self.iterations &gt;= self.max_iterations:            raise StopIteration(f\"è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•° {self.max_iterations}\")                value = self.callable_func()        self.iterations += 1                if value == self.sentinel:            raise StopIteration                return valuesafe_iter = SafeCallableIterator(random_choice, 3, max_iterations=20)results = list(safe_iter)print(f\"å®‰å…¨è¿­ä»£ç»“æœ: {results}\")print(f\"è¿­ä»£æ¬¡æ•°: {safe_iter.iterations}\")# é™·é˜±3: ä¿®æ”¹æ­£åœ¨è¿­ä»£çš„å®¹å™¨print(\"\\né™·é˜±3: ä¿®æ”¹æ­£åœ¨è¿­ä»£çš„å®¹å™¨\")original_list = [1, 2, 3, 4, 5]print(f\"åŸå§‹åˆ—è¡¨: {original_list}\")print(\"\\nå±é™©æ“ä½œï¼šè¿­ä»£æ—¶ä¿®æ”¹åˆ—è¡¨\")test_list = original_list.copy()iterator = iter(test_list)try:    for value in iterator:        print(f\"  å½“å‰å€¼: {value}\")        if value == 3:            test_list.append(6)  # ä¿®æ”¹åˆ—è¡¨            print(f\"    æ·»åŠ å…ƒç´ ååˆ—è¡¨: {test_list}\")except Exception as e:    print(f\"  é”™è¯¯: {e}\")print(\"\\nå®‰å…¨åšæ³•1ï¼šè¿­ä»£å‰¯æœ¬\")test_list = original_list.copy()for value in test_list.copy():  # è¿­ä»£å‰¯æœ¬    print(f\"  å½“å‰å€¼: {value}\")    if value == 3:        test_list.append(6)        print(f\"    ä¿®æ”¹åŸåˆ—è¡¨: {test_list}\")print(\"\\nå®‰å…¨åšæ³•2ï¼šæ”¶é›†ä¿®æ”¹æ“ä½œï¼Œè¿­ä»£åæ‰§è¡Œ\")test_list = original_list.copy()modifications = []for value in test_list:    print(f\"  å½“å‰å€¼: {value}\")    if value == 3:        modifications.append(('append', 6))# æ‰§è¡Œä¿®æ”¹for operation, arg in modifications:    if operation == 'append':        test_list.append(arg)        print(f\"    æ‰§è¡Œä¿®æ”¹å: {test_list}\")# é™·é˜±4: è¿­ä»£å™¨çŠ¶æ€çš„æ„å¤–å…±äº«print(\"\\né™·é˜±4: è¿­ä»£å™¨çŠ¶æ€çš„æ„å¤–å…±äº«\")class SharedStateIterator:    \"\"\"æœ‰å…±äº«çŠ¶æ€é—®é¢˜çš„è¿­ä»£å™¨\"\"\"    def __init__(self, data):        self.data = data        self.index = 0  # å…±äº«çŠ¶æ€        def __iter__(self):        return self  # è¿”å›è‡ªèº«ï¼ŒçŠ¶æ€å…±äº«        def __next__(self):        if self.index &gt;= len(self.data):            raise StopIteration        value = self.data[self.index]        self.index += 1        return valueshared_iter = SharedStateIterator([1, 2, 3, 4, 5])print(\"é—®é¢˜ï¼šå¤šä¸ªè¿­ä»£å™¨å…±äº«çŠ¶æ€\")iter1 = iter(shared_iter)iter2 = iter(shared_iter)print(f\"iter1 is iter2: {iter1 is iter2}\")print(f\"ä»iter1è·å–: {next(iter1)}\")print(f\"ä»iter2è·å–: {next(iter2)}\")print(\"æ³¨æ„ï¼šiter2ç»§ç»­äº†iter1çš„ä½ç½®\")print(\"\\nè§£å†³æ–¹æ¡ˆï¼šæ¯æ¬¡åˆ›å»ºæ–°çš„è¿­ä»£å™¨å®ä¾‹\")class ProperIterator:    \"\"\"æ­£ç¡®çš„è¿­ä»£å™¨å®ç°\"\"\"    def __init__(self, data):        self.data = data        def __iter__(self):        return ProperIteratorInstance(self.data)class ProperIteratorInstance:    def __init__(self, data):        self.data = data        self.index = 0        def __iter__(self):        return self        def __next__(self):        if self.index &gt;= len(self.data):            raise StopIteration        value = self.data[self.index]        self.index += 1        return valueproper_iter = ProperIterator([1, 2, 3, 4, 5])iter3 = iter(proper_iter)iter4 = iter(proper_iter)print(f\"iter3 is iter4: {iter3 is iter4}\")print(f\"ä»iter3è·å–: {next(iter3)}\")print(f\"ä»iter4è·å–: {next(iter4)}\")print(\"æ­£ç¡®ï¼šæ¯ä¸ªè¿­ä»£å™¨æœ‰ç‹¬ç«‹çŠ¶æ€\")# é™·é˜±5: æ€§èƒ½è€ƒè™‘print(\"\\né™·é˜±5: æ€§èƒ½è€ƒè™‘\")import time# æ¯”è¾ƒä¸åŒè¿­ä»£æ–¹å¼çš„æ€§èƒ½large_data = list(range(100000))iterations = 1000print(f\"æ€§èƒ½æµ‹è¯•ï¼ˆæ•°æ®å¤§å°: {len(large_data)}, è¿­ä»£æ¬¡æ•°: {iterations}ï¼‰:\")# æ–¹æ³•1: ç›´æ¥forå¾ªç¯start_time = time.time()for _ in range(iterations):    for item in large_data:        passdirect_time = time.time() - start_time# æ–¹æ³•2: æ˜¾å¼åˆ›å»ºè¿­ä»£å™¨start_time = time.time()for _ in range(iterations):    iterator = iter(large_data)    for item in iterator:        passexplicit_time = time.time() - start_time# æ–¹æ³•3: é‡å¤ä½¿ç”¨è¿­ä»£å™¨ï¼ˆé”™è¯¯åšæ³•ï¼‰iterator = iter(large_data)start_time = time.time()for _ in range(iterations):    try:        for item in iterator:            pass    except StopIteration:        iterator = iter(large_data)  # é‡æ–°åˆ›å»ºreuse_time = time.time() - start_timeprint(f\"ç›´æ¥forå¾ªç¯: {direct_time:.6f}ç§’\")print(f\"æ˜¾å¼åˆ›å»ºè¿­ä»£å™¨: {explicit_time:.6f}ç§’\")print(f\"é‡å¤ä½¿ç”¨è¿­ä»£å™¨: {reuse_time:.6f}ç§’\")print(\"\\næ€§èƒ½å»ºè®®:\")print(\"1. å¯¹äºç®€å•è¿­ä»£ï¼Œç›´æ¥ä½¿ç”¨forå¾ªç¯\")print(\"2. é¿å…ä¸å¿…è¦çš„æ˜¾å¼è¿­ä»£å™¨åˆ›å»º\")print(\"3. æ³¨æ„è¿­ä»£å™¨çš„ä¸€æ¬¡æ€§ç‰¹æ€§å¯¹æ€§èƒ½çš„å½±å“\")# é™·é˜±6: å†…å­˜æ³„æ¼é£é™©print(\"\\né™·é˜±6: å†…å­˜æ³„æ¼é£é™©\")class LeakyIterator:    \"\"\"å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼çš„è¿­ä»£å™¨\"\"\"    def __init__(self, data):        self.data = data        self.processed = []  # ä¿å­˜æ‰€æœ‰å¤„ç†è¿‡çš„æ•°æ®        self.index = 0        def __iter__(self):        return self        def __next__(self):        if self.index &gt;= len(self.data):            raise StopIteration                value = self.data[self.index]        self.processed.append(value)  # ç´¯ç§¯æ•°æ®ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼        self.index += 1        return value        def get_memory_usage(self):        return len(self.processed)class MemoryEfficientIterator:    \"\"\"å†…å­˜é«˜æ•ˆçš„è¿­ä»£å™¨\"\"\"    def __init__(self, data):        self.data = data        self.index = 0        self.count = 0  # åªä¿å­˜è®¡æ•°ï¼Œä¸ä¿å­˜æ•°æ®        def __iter__(self):        return self        def __next__(self):        if self.index &gt;= len(self.data):            raise StopIteration                value = self.data[self.index]        self.count += 1        self.index += 1        return value        def get_memory_usage(self):        return 1  # åªä¿å­˜è®¡æ•°å™¨# æ¯”è¾ƒå†…å­˜ä½¿ç”¨test_data = list(range(1000))leaky_iter = LeakyIterator(test_data)efficient_iter = MemoryEfficientIterator(test_data)# å¤„ç†ä¸€åŠæ•°æ®for i, (val1, val2) in enumerate(zip(leaky_iter, efficient_iter)):    if i &gt;= 500:        breakprint(f\"å¤„ç†500ä¸ªå…ƒç´ å:\")print(f\"æ³„æ¼è¿­ä»£å™¨å†…å­˜ä½¿ç”¨: {leaky_iter.get_memory_usage()}ä¸ªå…ƒç´ \")print(f\"é«˜æ•ˆè¿­ä»£å™¨å†…å­˜ä½¿ç”¨: {efficient_iter.get_memory_usage()}ä¸ªè®¡æ•°å™¨\")print(\"\\nå†…å­˜ç®¡ç†å»ºè®®:\")print(\"1. é¿å…åœ¨è¿­ä»£å™¨ä¸­ç´¯ç§¯å¤§é‡æ•°æ®\")print(\"2. åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å¼•ç”¨\")print(\"3. è€ƒè™‘ä½¿ç”¨ç”Ÿæˆå™¨è€Œä¸æ˜¯è¿­ä»£å™¨ç±»\")print(\"4. å¯¹äºå¤§æ•°æ®é›†ï¼Œä½¿ç”¨æƒ°æ€§æ±‚å€¼\")# æœ€ä½³å®è·µæ€»ç»“print(\"\\næœ€ä½³å®è·µæ€»ç»“:\")print(\"1. ç†è§£è¿­ä»£å™¨çš„ä¸€æ¬¡æ€§ç‰¹æ€§\")print(\"2. ä¸ºå¯è°ƒç”¨å¯¹è±¡è¿­ä»£å™¨è®¾ç½®å®‰å…¨é™åˆ¶\")print(\"3. é¿å…åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¿®æ”¹å®¹å™¨\")print(\"4. ç¡®ä¿è¿­ä»£å™¨å®ä¾‹çš„ç‹¬ç«‹æ€§\")print(\"5. æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„è¿­ä»£æ–¹å¼\")print(\"6. æ³¨æ„å†…å­˜ä½¿ç”¨ï¼Œé¿å…ä¸å¿…è¦çš„æ•°æ®ç´¯ç§¯\")print(\"7. ä½¿ç”¨å¼‚å¸¸å¤„ç†æ¥ä¼˜é›…åœ°å¤„ç†StopIteration\")print(\"8. è€ƒè™‘ä½¿ç”¨itertoolsæ¨¡å—çš„é«˜çº§è¿­ä»£å·¥å…·\")ğŸ”§ æ€§èƒ½ä¼˜åŒ–iter() æ€§èƒ½ä¼˜åŒ–æŠ€å·§# iter() æ€§èƒ½ä¼˜åŒ–æŠ€å·§print(\"iter() æ€§èƒ½ä¼˜åŒ–æŠ€å·§:\")import timeimport sys# 1. è¿­ä»£å™¨vsåˆ—è¡¨æ¨å¯¼å¼æ€§èƒ½æ¯”è¾ƒprint(\"\\n1. è¿­ä»£å™¨vsåˆ—è¡¨æ¨å¯¼å¼æ€§èƒ½æ¯”è¾ƒ:\")def performance_test(data_size, iterations):    \"\"\"æ€§èƒ½æµ‹è¯•å‡½æ•°\"\"\"    data = range(data_size)        # æ–¹æ³•1: åˆ—è¡¨æ¨å¯¼å¼ï¼ˆä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰å…ƒç´ ï¼‰    start_time = time.time()    for _ in range(iterations):        result = [x * 2 for x in data]        # æ¨¡æ‹Ÿä½¿ç”¨å‰å‡ ä¸ªå…ƒç´         for i, val in enumerate(result):            if i &gt;= 10:                break    list_comp_time = time.time() - start_time        # æ–¹æ³•2: ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆæƒ°æ€§æ±‚å€¼ï¼‰    start_time = time.time()    for _ in range(iterations):        result_gen = (x * 2 for x in data)        result_iter = iter(result_gen)        # åªè·å–å‰å‡ ä¸ªå…ƒç´         for i in range(10):            next(result_iter)    generator_time = time.time() - start_time        # æ–¹æ³•3: ç›´æ¥è¿­ä»£å™¨    start_time = time.time()    for _ in range(iterations):        data_iter = iter(data)        # åªå¤„ç†å‰å‡ ä¸ªå…ƒç´         for i in range(10):            val = next(data_iter) * 2    direct_iter_time = time.time() - start_time        return list_comp_time, generator_time, direct_iter_time# æµ‹è¯•ä¸åŒæ•°æ®å¤§å°test_configs = [    (1000, 1000, \"å°æ•°æ®é›†\"),    (10000, 100, \"ä¸­æ•°æ®é›†\"),    (100000, 10, \"å¤§æ•°æ®é›†\"),]for data_size, iterations, description in test_configs:    list_time, gen_time, iter_time = performance_test(data_size, iterations)        print(f\"\\n{description} (å¤§å°: {data_size}, è¿­ä»£: {iterations}æ¬¡):\")    print(f\"  åˆ—è¡¨æ¨å¯¼å¼: {list_time:.6f}ç§’\")    print(f\"  ç”Ÿæˆå™¨è¡¨è¾¾å¼: {gen_time:.6f}ç§’\")    print(f\"  ç›´æ¥è¿­ä»£å™¨: {iter_time:.6f}ç§’\")        fastest = min(list_time, gen_time, iter_time)    if fastest == gen_time:        print(f\"  æœ€å¿«: ç”Ÿæˆå™¨è¡¨è¾¾å¼ (æ¯”åˆ—è¡¨æ¨å¯¼å¼å¿« {list_time/gen_time:.1f}x)\")    elif fastest == iter_time:        print(f\"  æœ€å¿«: ç›´æ¥è¿­ä»£å™¨ (æ¯”åˆ—è¡¨æ¨å¯¼å¼å¿« {list_time/iter_time:.1f}x)\")    else:        print(f\"  æœ€å¿«: åˆ—è¡¨æ¨å¯¼å¼\")# 2. å†…å­˜ä½¿ç”¨ä¼˜åŒ–print(\"\\n2. å†…å­˜ä½¿ç”¨ä¼˜åŒ–:\")def get_memory_usage():    \"\"\"è·å–å½“å‰å†…å­˜ä½¿ç”¨ï¼ˆç®€åŒ–ç‰ˆï¼‰\"\"\"    return sys.getsizeof([])class MemoryOptimizedIterator:    \"\"\"å†…å­˜ä¼˜åŒ–çš„è¿­ä»£å™¨\"\"\"    def __init__(self, data_func, size):        self.data_func = data_func  # æ•°æ®ç”Ÿæˆå‡½æ•°        self.size = size        self.index = 0        def __iter__(self):        return self        def __next__(self):        if self.index &gt;= self.size:            raise StopIteration                # åŠ¨æ€ç”Ÿæˆæ•°æ®ï¼Œä¸å­˜å‚¨        value = self.data_func(self.index)        self.index += 1        return value# æ¯”è¾ƒå†…å­˜ä½¿ç”¨data_size = 100000# æ–¹æ³•1: é¢„å…ˆç”Ÿæˆæ‰€æœ‰æ•°æ®print(f\"\\nå†…å­˜ä½¿ç”¨æ¯”è¾ƒ (æ•°æ®å¤§å°: {data_size}):\")all_data = [i ** 2 for i in range(data_size)]all_data_memory = sys.getsizeof(all_data)print(f\"é¢„ç”Ÿæˆåˆ—è¡¨å†…å­˜: {all_data_memory / 1024:.2f} KB\")# æ–¹æ³•2: ä½¿ç”¨å†…å­˜ä¼˜åŒ–è¿­ä»£å™¨optimized_iter = MemoryOptimizedIterator(lambda x: x ** 2, data_size)iter_memory = sys.getsizeof(optimized_iter)print(f\"ä¼˜åŒ–è¿­ä»£å™¨å†…å­˜: {iter_memory} bytes\")print(f\"å†…å­˜èŠ‚çœ: {(all_data_memory - iter_memory) / 1024:.2f} KB\")# éªŒè¯åŠŸèƒ½ä¸€è‡´æ€§iter_result = []for i, value in enumerate(optimized_iter):    iter_result.append(value)    if i &gt;= 9:  # åªå–å‰10ä¸ªéªŒè¯        breaklist_result = all_data[:10]print(f\"åŠŸèƒ½éªŒè¯ - å‰10ä¸ªå…ƒç´ ä¸€è‡´: {iter_result == list_result}\")# 3. æ‰¹é‡å¤„ç†ä¼˜åŒ–print(\"\\n3. æ‰¹é‡å¤„ç†ä¼˜åŒ–:\")class BatchIterator:    \"\"\"æ‰¹é‡å¤„ç†è¿­ä»£å™¨\"\"\"    def __init__(self, iterable, batch_size):        self.iterator = iter(iterable)        self.batch_size = batch_size        def __iter__(self):        return self        def __next__(self):        batch = []        try:            for _ in range(self.batch_size):                batch.append(next(self.iterator))        except StopIteration:            if batch:                return batch            raise StopIteration        return batchdef process_individually(data):    \"\"\"é€ä¸ªå¤„ç†æ•°æ®\"\"\"    results = []    for item in data:        # æ¨¡æ‹Ÿå¤„ç†æ—¶é—´        result = item ** 2 + item        results.append(result)    return resultsdef process_in_batches(data, batch_size):    \"\"\"æ‰¹é‡å¤„ç†æ•°æ®\"\"\"    batch_iter = BatchIterator(data, batch_size)    results = []        for batch in batch_iter:        # æ‰¹é‡å¤„ç†ï¼ˆæ¨¡æ‹Ÿå‘é‡åŒ–æ“ä½œï¼‰        batch_results = [item ** 2 + item for item in batch]        results.extend(batch_results)        return results# æ€§èƒ½æµ‹è¯•test_data = list(range(10000))batch_sizes = [1, 10, 100, 1000]print(f\"æ‰¹é‡å¤„ç†æ€§èƒ½æµ‹è¯• (æ•°æ®å¤§å°: {len(test_data)}):\")# åŸºå‡†ï¼šé€ä¸ªå¤„ç†start_time = time.time()individual_result = process_individually(test_data)individual_time = time.time() - start_timeprint(f\"é€ä¸ªå¤„ç†: {individual_time:.6f}ç§’\")# æ‰¹é‡å¤„ç†æµ‹è¯•for batch_size in batch_sizes:    start_time = time.time()    batch_result = process_in_batches(test_data, batch_size)    batch_time = time.time() - start_time        speedup = individual_time / batch_time if batch_time &gt; 0 else float('inf')    print(f\"æ‰¹é‡å¤§å°{batch_size:4d}: {batch_time:.6f}ç§’ (åŠ é€Ÿ: {speedup:.2f}x)\")        # éªŒè¯ç»“æœä¸€è‡´æ€§    if individual_result == batch_result:        print(f\"              ç»“æœä¸€è‡´ âœ“\")    else:        print(f\"              ç»“æœä¸ä¸€è‡´ âœ—\")# 4. ç¼“å­˜å’Œé¢„å–ä¼˜åŒ–print(\"\\n4. ç¼“å­˜å’Œé¢„å–ä¼˜åŒ–:\")class PrefetchIterator:    \"\"\"é¢„å–è¿­ä»£å™¨\"\"\"    def __init__(self, iterable, prefetch_size=10):        self.iterator = iter(iterable)        self.prefetch_size = prefetch_size        self.buffer = []        self.exhausted = False        self._prefetch()        def _prefetch(self):        \"\"\"é¢„å–æ•°æ®åˆ°ç¼“å†²åŒº\"\"\"        while len(self.buffer) &lt; self.prefetch_size and not self.exhausted:            try:                self.buffer.append(next(self.iterator))            except StopIteration:                self.exhausted = True                break        def __iter__(self):        return self        def __next__(self):        if not self.buffer and self.exhausted:            raise StopIteration                if not self.buffer:            self._prefetch()                if self.buffer:            value = self.buffer.pop(0)            self._prefetch()  # ä¿æŒç¼“å†²åŒºæ»¡            return value        else:            raise StopIterationdef slow_data_generator(size):    \"\"\"æ¨¡æ‹Ÿæ…¢é€Ÿæ•°æ®ç”Ÿæˆ\"\"\"    for i in range(size):        time.sleep(0.001)  # æ¨¡æ‹ŸI/Oå»¶è¿Ÿ        yield i ** 2# æ¯”è¾ƒé¢„å–æ•ˆæœdata_size = 100print(f\"é¢„å–ä¼˜åŒ–æµ‹è¯• (æ•°æ®å¤§å°: {data_size}):\")# æ™®é€šè¿­ä»£å™¨start_time = time.time()normal_iter = slow_data_generator(data_size)normal_results = list(normal_iter)normal_time = time.time() - start_time# é¢„å–è¿­ä»£å™¨start_time = time.time()prefetch_iter = PrefetchIterator(slow_data_generator(data_size), prefetch_size=5)prefetch_results = list(prefetch_iter)prefetch_time = time.time() - start_timeprint(f\"æ™®é€šè¿­ä»£å™¨: {normal_time:.6f}ç§’\")print(f\"é¢„å–è¿­ä»£å™¨: {prefetch_time:.6f}ç§’\")print(f\"æ€§èƒ½æå‡: {normal_time/prefetch_time:.2f}x\")print(f\"ç»“æœä¸€è‡´: {normal_results == prefetch_results}\")print(\"\\næ€§èƒ½ä¼˜åŒ–æ€»ç»“:\")print(\"1. å¯¹äºå¤§æ•°æ®é›†çš„éƒ¨åˆ†å¤„ç†ï¼Œä½¿ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼\")print(\"2. ä½¿ç”¨å†…å­˜ä¼˜åŒ–è¿­ä»£å™¨é¿å…é¢„å…ˆåŠ è½½æ‰€æœ‰æ•°æ®\")print(\"3. æ‰¹é‡å¤„ç†å¯ä»¥æé«˜æŸäº›æ“ä½œçš„æ•ˆç‡\")print(\"4. é¢„å–æœºåˆ¶å¯ä»¥éšè—I/Oå»¶è¿Ÿ\")print(\"5. æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç­–ç•¥\")print(\"6. å¹³è¡¡å†…å­˜ä½¿ç”¨å’Œè®¡ç®—æ€§èƒ½\")ğŸ“š ç›¸å…³å‡½æ•°å’Œæ¨¡å—ç›¸å…³å†…ç½®å‡½æ•°  next() - è·å–è¿­ä»£å™¨ä¸‹ä¸€ä¸ªå…ƒç´   enumerate() - æšä¸¾è¿­ä»£å™¨  zip() - å¹¶è¡Œè¿­ä»£å¤šä¸ªåºåˆ—  map() - æ˜ å°„å‡½æ•°åˆ°è¿­ä»£å™¨  filter() - è¿‡æ»¤è¿­ä»£å™¨å…ƒç´   reversed() - åå‘è¿­ä»£å™¨  range() - èŒƒå›´è¿­ä»£å™¨  list() - åˆ—è¡¨æ„é€ å‡½æ•°  tuple() - å…ƒç»„æ„é€ å‡½æ•°ç›¸å…³æ ‡å‡†åº“æ¨¡å—  itertools - è¿­ä»£å·¥å…·ï¼ˆchain, cycle, repeat, isliceç­‰ï¼‰  functools - å‡½æ•°å·¥å…·ï¼ˆreduceç­‰ï¼‰  operator - è¿ç®—ç¬¦å‡½æ•°  collections - é›†åˆç±»å‹ï¼ˆdequeç­‰ï¼‰  typing - ç±»å‹æç¤ºï¼ˆIterator, Iterableç­‰ï¼‰ç›¸å…³ç¬¬ä¸‰æ–¹åº“  more-itertools - æ‰©å±•çš„è¿­ä»£å·¥å…·  numpy - æ•°å€¼è®¡ç®—ï¼ˆnditerç­‰ï¼‰  pandas - æ•°æ®åˆ†æï¼ˆiterrows, itertuplesç­‰ï¼‰  asyncio - å¼‚æ­¥è¿­ä»£å™¨ğŸ”— æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - iter()  Pythonå®˜æ–¹æ–‡æ¡£ - è¿­ä»£å™¨åè®®  PEP 234 - è¿­ä»£å™¨  itertoolsæ¨¡å—æ–‡æ¡£  ç”Ÿæˆå™¨å’Œè¿­ä»£å™¨è¯¦è§£ğŸ·ï¸ æ ‡ç­¾è¿­ä»£å™¨ ç”Ÿæˆå™¨ å¾ªç¯ æ•°æ®æµ æƒ°æ€§æ±‚å€¼ å†…å­˜ä¼˜åŒ– å‡½æ•°å¼ç¼–ç¨‹æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/iter/",
        "category": "builtins",
        "tags": ["è¿­ä»£å™¨","ç”Ÿæˆå™¨","å¾ªç¯","æ•°æ®æµ"]
      }
      
    
  
    
      ,
      {
        "title": "len() - é•¿åº¦å‡½æ•°",
        "content": "len() - é•¿åº¦å‡½æ•°ğŸ“ æ¦‚è¿°len() æ˜¯Pythonä¸­æœ€åŸºç¡€çš„å†…ç½®å‡½æ•°ä¹‹ä¸€ï¼Œç”¨äºè¿”å›å¯¹è±¡çš„é•¿åº¦ï¼ˆå…ƒç´ ä¸ªæ•°ï¼‰ã€‚å®ƒå¯ä»¥åº”ç”¨äºåºåˆ—ç±»å‹ï¼ˆå¦‚å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ï¼‰å’Œå®¹å™¨ç±»å‹ï¼ˆå¦‚å­—å…¸ã€é›†åˆï¼‰ã€‚1ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡len()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£len()å‡½æ•°é€‚ç”¨çš„æ•°æ®ç±»å‹  å­¦ä¼šåœ¨ä¸åŒåœºæ™¯ä¸­ä½¿ç”¨len()å‡½æ•°  äº†è§£len()å‡½æ•°çš„å®ç°åŸç†ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  åºåˆ—å’Œå®¹å™¨çš„æ¦‚å¿µ  å¯¹è±¡å’Œæ–¹æ³•çš„åŸºæœ¬ç†è§£ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µlen() å‡½æ•°è¿”å›å¯¹è±¡çš„é•¿åº¦ï¼ˆå…ƒç´ ä¸ªæ•°ï¼‰ã€‚å¯¹äºåºåˆ—ç±»å‹ï¼Œè¿”å›åºåˆ—ä¸­å…ƒç´ çš„æ•°é‡ï¼›å¯¹äºå®¹å™¨ç±»å‹ï¼Œè¿”å›å®¹å™¨ä¸­é”®å€¼å¯¹æˆ–å…ƒç´ çš„æ•°é‡ã€‚è¯­æ³•æ ¼å¼len(s)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  s      sequence/collection      æ˜¯      æ—       åºåˆ—æˆ–å®¹å™¨å¯¹è±¡      è¿”å›å€¼            ç±»å‹      è¯´æ˜                  int      å¯¹è±¡çš„é•¿åº¦ï¼ˆéè´Ÿæ•´æ•°ï¼‰      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# å­—ç¬¦ä¸²é•¿åº¦text = \"Hello, Python!\"print(len(text))  # è¾“å‡º: 14# åˆ—è¡¨é•¿åº¦numbers = [1, 2, 3, 4, 5]print(len(numbers))  # è¾“å‡º: 5# å…ƒç»„é•¿åº¦coordinates = (10, 20, 30)print(len(coordinates))  # è¾“å‡º: 3# å­—å…¸é•¿åº¦ï¼ˆé”®å€¼å¯¹æ•°é‡ï¼‰student = {\"name\": \"å¼ ä¸‰\", \"age\": 20, \"grade\": \"A\"}print(len(student))  # è¾“å‡º: 3# é›†åˆé•¿åº¦unique_numbers = {1, 2, 3, 4, 5, 5, 5}print(len(unique_numbers))  # è¾“å‡º: 5ï¼ˆé‡å¤å…ƒç´ è¢«å»é™¤ï¼‰é«˜çº§ç”¨æ³•# åµŒå¥—ç»“æ„çš„é•¿åº¦matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]print(len(matrix))  # è¾“å‡º: 3ï¼ˆå¤–å±‚åˆ—è¡¨çš„é•¿åº¦ï¼‰print(len(matrix[0]))  # è¾“å‡º: 3ï¼ˆå†…å±‚åˆ—è¡¨çš„é•¿åº¦ï¼‰# ç©ºå®¹å™¨çš„é•¿åº¦empty_list = []empty_dict = {}empty_string = \"\"print(len(empty_list))   # è¾“å‡º: 0print(len(empty_dict))   # è¾“å‡º: 0print(len(empty_string)) # è¾“å‡º: 0# rangeå¯¹è±¡çš„é•¿åº¦range_obj = range(10, 20)print(len(range_obj))  # è¾“å‡º: 10# å­—èŠ‚ä¸²çš„é•¿åº¦byte_data = b\"Hello\"print(len(byte_data))  # è¾“å‡º: 5å®é™…æ¡ˆä¾‹# æ•°æ®éªŒè¯å‡½æ•°def validate_password(password):    \"\"\"éªŒè¯å¯†ç å¼ºåº¦\"\"\"    if len(password) &lt; 8:        return False, \"å¯†ç é•¿åº¦è‡³å°‘8ä½\"    elif len(password) &gt; 20:        return False, \"å¯†ç é•¿åº¦ä¸èƒ½è¶…è¿‡20ä½\"    else:        return True, \"å¯†ç é•¿åº¦ç¬¦åˆè¦æ±‚\"# ç»Ÿè®¡æ–‡æœ¬ä¿¡æ¯def analyze_text(text):    \"\"\"åˆ†ææ–‡æœ¬åŸºæœ¬ä¿¡æ¯\"\"\"    words = text.split()    sentences = text.split('ã€‚')        print(f\"æ–‡æœ¬æ€»é•¿åº¦: {len(text)} ä¸ªå­—ç¬¦\")    print(f\"å•è¯æ•°é‡: {len(words)} ä¸ª\")    print(f\"å¥å­æ•°é‡: {len(sentences)} ä¸ª\")        return {        \"char_count\": len(text),        \"word_count\": len(words),        \"sentence_count\": len(sentences)    }# åˆ—è¡¨æ“ä½œä¸­çš„åº”ç”¨def safe_get_item(lst, index):    \"\"\"å®‰å…¨è·å–åˆ—è¡¨å…ƒç´ \"\"\"    if 0 &lt;= index &lt; len(lst):        return lst[index]    else:        return None# ä½¿ç”¨ç¤ºä¾‹data = [10, 20, 30, 40, 50]print(safe_get_item(data, 2))   # è¾“å‡º: 30print(safe_get_item(data, 10))  # è¾“å‡º: Noneâš ï¸ æ³¨æ„äº‹é¡¹  len() å‡½æ•°åªèƒ½ç”¨äºæ”¯æŒ __len__() æ–¹æ³•çš„å¯¹è±¡  å¯¹äºç”Ÿæˆå™¨å¯¹è±¡ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ len()ï¼Œå› ä¸ºç”Ÿæˆå™¨æ˜¯æƒ°æ€§æ±‚å€¼çš„  len() å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦é€šå¸¸æ˜¯ O(1)ï¼Œå› ä¸ºå¤§å¤šæ•°å®¹å™¨éƒ½ä¼šç»´æŠ¤é•¿åº¦ä¿¡æ¯  ç©ºå®¹å™¨çš„é•¿åº¦ä¸º0ï¼Œè¿™åœ¨æ¡ä»¶åˆ¤æ–­ä¸­å¾ˆæœ‰ç”¨# é”™è¯¯ç¤ºä¾‹ï¼šç”Ÿæˆå™¨ä¸æ”¯æŒlen()def number_generator():    for i in range(5):        yield igen = number_generator()# print(len(gen))  # è¿™ä¼šå¼•å‘TypeError# æ­£ç¡®åšæ³•ï¼šè½¬æ¢ä¸ºåˆ—è¡¨print(len(list(gen)))  # è¾“å‡º: 5ğŸ”— ç›¸å…³å†…å®¹  range() - èŒƒå›´å‡½æ•°  list() - åˆ—è¡¨æ„é€ å‡½æ•°  dict() - å­—å…¸æ„é€ å‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - len()  [Pythonæ•°æ®æ¨¡å‹ - len__æ–¹æ³•](https://docs.python.org/3/reference/datamodel.html#object.__len)ğŸ·ï¸ æ ‡ç­¾é•¿åº¦ åºåˆ— å®¹å™¨ è®¡æ•° éªŒè¯æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/len/",
        "category": "builtins",
        "tags": ["é•¿åº¦","åºåˆ—","å®¹å™¨"]
      }
      
    
  
    
      ,
      {
        "title": "list() - åˆ—è¡¨æ„é€ å‡½æ•°",
        "content": "list() - åˆ—è¡¨æ„é€ å‡½æ•°ğŸ“ æ¦‚è¿°list() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºåˆ›å»ºåˆ—è¡¨å¯¹è±¡æˆ–å°†å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºåˆ—è¡¨ã€‚åˆ—è¡¨æ˜¯Pythonä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œå…·æœ‰æœ‰åºã€å¯å˜ã€å…è®¸é‡å¤å…ƒç´ çš„ç‰¹æ€§ï¼Œå¹¿æ³›åº”ç”¨äºæ•°æ®å­˜å‚¨å’Œå¤„ç†ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡list()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£åˆ—è¡¨çš„ç‰¹æ€§å’Œåº”ç”¨åœºæ™¯  å­¦ä¼šä¸åŒç±»å‹åˆ°åˆ—è¡¨çš„è½¬æ¢  äº†è§£åˆ—è¡¨çš„æ€§èƒ½ç‰¹ç‚¹ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  å¯è¿­ä»£å¯¹è±¡æ¦‚å¿µ  åºåˆ—ç±»å‹åŸºç¡€  ç´¢å¼•å’Œåˆ‡ç‰‡æ“ä½œğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µåˆ—è¡¨ï¼ˆlistï¼‰æ˜¯Pythonä¸­çš„å¯å˜åºåˆ—ç±»å‹ï¼Œå¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„å¯¹è±¡ã€‚list() å‡½æ•°å¯ä»¥åˆ›å»ºç©ºåˆ—è¡¨æˆ–å°†å…¶ä»–å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºåˆ—è¡¨ï¼Œæ˜¯æ•°æ®å¤„ç†ä¸­çš„åŸºç¡€å·¥å…·ã€‚è¯­æ³•æ ¼å¼# åˆ›å»ºç©ºåˆ—è¡¨list()# ä»å¯è¿­ä»£å¯¹è±¡åˆ›å»ºåˆ—è¡¨list(iterable)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  iterable      iterable      å¦      æ—       å¯è¿­ä»£å¯¹è±¡ï¼ˆå­—ç¬¦ä¸²ã€å…ƒç»„ã€é›†åˆç­‰ï¼‰      è¿”å›å€¼  ç±»å‹: list  è¯´æ˜: æ–°åˆ›å»ºçš„åˆ—è¡¨å¯¹è±¡ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# åˆ›å»ºç©ºåˆ—è¡¨empty_list = list()print(f\"ç©ºåˆ—è¡¨: {empty_list}\")  # è¾“å‡º: ç©ºåˆ—è¡¨: []print(f\"ç±»å‹: {type(empty_list)}\")  # è¾“å‡º: ç±»å‹: &lt;class 'list'&gt;# ç­‰ä»·çš„åˆ›å»ºæ–¹å¼empty_list2 = []print(f\"å­—é¢é‡åˆ›å»º: {empty_list2}\")  # è¾“å‡º: å­—é¢é‡åˆ›å»º: []# ä»å­—ç¬¦ä¸²åˆ›å»ºåˆ—è¡¨string_to_list = list(\"hello\")print(f\"å­—ç¬¦ä¸²è½¬åˆ—è¡¨: {string_to_list}\")  # è¾“å‡º: å­—ç¬¦ä¸²è½¬åˆ—è¡¨: ['h', 'e', 'l', 'l', 'o']# ä»å…ƒç»„åˆ›å»ºåˆ—è¡¨tuple_data = (1, 2, 3, 4, 5)tuple_to_list = list(tuple_data)print(f\"å…ƒç»„è½¬åˆ—è¡¨: {tuple_to_list}\")  # è¾“å‡º: å…ƒç»„è½¬åˆ—è¡¨: [1, 2, 3, 4, 5]# ä»é›†åˆåˆ›å»ºåˆ—è¡¨set_data = {3, 1, 4, 1, 5, 9, 2, 6}set_to_list = list(set_data)print(f\"é›†åˆè½¬åˆ—è¡¨: {set_to_list}\")  # è¾“å‡º: é›†åˆè½¬åˆ—è¡¨: [1, 2, 3, 4, 5, 6, 9] (é¡ºåºå¯èƒ½ä¸åŒ)# ä»rangeå¯¹è±¡åˆ›å»ºåˆ—è¡¨range_to_list = list(range(5))print(f\"rangeè½¬åˆ—è¡¨: {range_to_list}\")  # è¾“å‡º: rangeè½¬åˆ—è¡¨: [0, 1, 2, 3, 4]# ä»å­—å…¸åˆ›å»ºåˆ—è¡¨ï¼ˆé»˜è®¤æ˜¯é”®ï¼‰dict_data = {'a': 1, 'b': 2, 'c': 3}dict_keys_to_list = list(dict_data)print(f\"å­—å…¸é”®è½¬åˆ—è¡¨: {dict_keys_to_list}\")  # è¾“å‡º: å­—å…¸é”®è½¬åˆ—è¡¨: ['a', 'b', 'c']# å­—å…¸å€¼è½¬åˆ—è¡¨dict_values_to_list = list(dict_data.values())print(f\"å­—å…¸å€¼è½¬åˆ—è¡¨: {dict_values_to_list}\")  # è¾“å‡º: å­—å…¸å€¼è½¬åˆ—è¡¨: [1, 2, 3]# å­—å…¸é¡¹è½¬åˆ—è¡¨dict_items_to_list = list(dict_data.items())print(f\"å­—å…¸é¡¹è½¬åˆ—è¡¨: {dict_items_to_list}\")  # è¾“å‡º: å­—å…¸é¡¹è½¬åˆ—è¡¨: [('a', 1), ('b', 2), ('c', 3)]ç”Ÿæˆå™¨å’Œè¿­ä»£å™¨è½¬æ¢# ç”Ÿæˆå™¨è¡¨è¾¾å¼è½¬åˆ—è¡¨squares_gen = (x**2 for x in range(5))squares_list = list(squares_gen)print(f\"å¹³æ–¹æ•°åˆ—è¡¨: {squares_list}\")  # è¾“å‡º: å¹³æ–¹æ•°åˆ—è¡¨: [0, 1, 4, 9, 16]# è¿‡æ»¤å™¨è½¬åˆ—è¡¨numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]even_filter = filter(lambda x: x % 2 == 0, numbers)even_list = list(even_filter)print(f\"å¶æ•°åˆ—è¡¨: {even_list}\")  # è¾“å‡º: å¶æ•°åˆ—è¡¨: [2, 4, 6, 8, 10]# æ˜ å°„å™¨è½¬åˆ—è¡¨map_result = map(lambda x: x * 2, range(5))map_list = list(map_result)print(f\"æ˜ å°„ç»“æœ: {map_list}\")  # è¾“å‡º: æ˜ å°„ç»“æœ: [0, 2, 4, 6, 8]# æšä¸¾å™¨è½¬åˆ—è¡¨words = ['apple', 'banana', 'cherry']enum_result = enumerate(words)enum_list = list(enum_result)print(f\"æšä¸¾ç»“æœ: {enum_list}\")  # è¾“å‡º: æšä¸¾ç»“æœ: [(0, 'apple'), (1, 'banana'), (2, 'cherry')]# zipå¯¹è±¡è½¬åˆ—è¡¨names = ['Alice', 'Bob', 'Charlie']ages = [25, 30, 35]zip_result = zip(names, ages)zip_list = list(zip_result)print(f\"zipç»“æœ: {zip_list}\")  # è¾“å‡º: zipç»“æœ: [('Alice', 25), ('Bob', 30), ('Charlie', 35)]# è‡ªå®šä¹‰è¿­ä»£å™¨è½¬åˆ—è¡¨class CountDown:    def __init__(self, start):        self.start = start        def __iter__(self):        return self        def __next__(self):        if self.start &lt;= 0:            raise StopIteration        self.start -= 1        return self.start + 1countdown = CountDown(5)countdown_list = list(countdown)print(f\"å€’è®¡æ—¶åˆ—è¡¨: {countdown_list}\")  # è¾“å‡º: å€’è®¡æ—¶åˆ—è¡¨: [5, 4, 3, 2, 1]æ–‡ä»¶å’Œæ•°æ®å¤„ç†# è¯»å–æ–‡ä»¶è¡Œåˆ°åˆ—è¡¨def read_file_to_list(filename):    \"\"\"è¯»å–æ–‡ä»¶å†…å®¹åˆ°åˆ—è¡¨\"\"\"    try:        with open(filename, 'r', encoding='utf-8') as file:            lines = list(file)  # æ¯è¡Œä½œä¸ºä¸€ä¸ªå…ƒç´             # å»é™¤æ¢è¡Œç¬¦            clean_lines = [line.strip() for line in lines]            return clean_lines    except FileNotFoundError:        print(f\"æ–‡ä»¶ {filename} ä¸å­˜åœ¨\")        return []# æ¨¡æ‹Ÿæ–‡ä»¶å†…å®¹sample_content = \"\"\"ç¬¬ä¸€è¡Œå†…å®¹ç¬¬äºŒè¡Œå†…å®¹ç¬¬ä¸‰è¡Œå†…å®¹ç¬¬å››è¡Œå†…å®¹\"\"\"# åˆ›å»ºä¸´æ—¶æ–‡ä»¶è¿›è¡Œæµ‹è¯•import tempfileimport oswith tempfile.NamedTemporaryFile(mode='w', delete=False, encoding='utf-8') as temp_file:    temp_file.write(sample_content)    temp_filename = temp_file.name# è¯»å–æ–‡ä»¶åˆ°åˆ—è¡¨file_lines = read_file_to_list(temp_filename)print(f\"æ–‡ä»¶è¡Œåˆ—è¡¨: {file_lines}\")# æ¸…ç†ä¸´æ—¶æ–‡ä»¶os.unlink(temp_filename)# CSVæ•°æ®å¤„ç†csv_data = \"name,age,city\\nAlice,25,New York\\nBob,30,London\\nCharlie,35,Tokyo\"csv_lines = csv_data.split('\\n')csv_list = list(csv_lines)print(f\"CSVè¡Œåˆ—è¡¨: {csv_list}\")# è§£æCSVæ•°æ®header = csv_list[0].split(',')data_rows = [row.split(',') for row in csv_list[1:]]print(f\"CSVå¤´éƒ¨: {header}\")print(f\"CSVæ•°æ®: {data_rows}\")# è½¬æ¢ä¸ºå­—å…¸åˆ—è¡¨csv_dicts = []for row in data_rows:    row_dict = dict(zip(header, row))    csv_dicts.append(row_dict)print(f\"CSVå­—å…¸åˆ—è¡¨: {csv_dicts}\")æ•°æ®ç»“æ„è½¬æ¢å’Œæ“ä½œ# åµŒå¥—ç»“æ„å±•å¹³def flatten_list(nested_list):    \"\"\"å±•å¹³åµŒå¥—åˆ—è¡¨\"\"\"    result = []    for item in nested_list:        if isinstance(item, list):            result.extend(flatten_list(item))  # é€’å½’å¤„ç†        else:            result.append(item)    return result# æµ‹è¯•åµŒå¥—åˆ—è¡¨nested = [1, [2, 3], [4, [5, 6]], 7, [8, [9, [10]]]]flattened = flatten_list(nested)print(f\"åŸå§‹åµŒå¥—: {nested}\")print(f\"å±•å¹³ç»“æœ: {flattened}\")# ä½¿ç”¨itertools.chainå±•å¹³ï¼ˆæ›´é«˜æ•ˆï¼‰from itertools import chainsimple_nested = [[1, 2], [3, 4], [5, 6]]chain_flattened = list(chain.from_iterable(simple_nested))print(f\"chainå±•å¹³: {chain_flattened}\")# çŸ©é˜µè½¬ç½®def transpose_matrix(matrix):    \"\"\"çŸ©é˜µè½¬ç½®\"\"\"    if not matrix or not matrix[0]:        return []    return list(zip(*matrix))matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]transposed = transpose_matrix(matrix)print(f\"åŸçŸ©é˜µ: {matrix}\")print(f\"è½¬ç½®çŸ©é˜µ: {list(map(list, transposed))}\")# åˆ—è¡¨å»é‡ï¼ˆä¿æŒé¡ºåºï¼‰def remove_duplicates_ordered(lst):    \"\"\"å»é‡å¹¶ä¿æŒé¡ºåº\"\"\"    seen = set()    result = []    for item in lst:        if item not in seen:            seen.add(item)            result.append(item)    return resultwith_duplicates = [1, 2, 3, 2, 4, 1, 5, 3, 6]unique_ordered = remove_duplicates_ordered(with_duplicates)print(f\"åŸåˆ—è¡¨: {with_duplicates}\")print(f\"å»é‡å: {unique_ordered}\")# ä½¿ç”¨dict.fromkeyså»é‡ï¼ˆPython 3.7+ä¿æŒé¡ºåºï¼‰unique_dict_method = list(dict.fromkeys(with_duplicates))print(f\"dictæ–¹æ³•å»é‡: {unique_dict_method}\")# åˆ—è¡¨åˆ†ç»„def group_by_key(lst, key_func):    \"\"\"æŒ‰é”®å‡½æ•°åˆ†ç»„\"\"\"    groups = {}    for item in lst:        key = key_func(item)        if key not in groups:            groups[key] = []        groups[key].append(item)    return groupsstudents = [    {'name': 'Alice', 'grade': 'A', 'age': 20},    {'name': 'Bob', 'grade': 'B', 'age': 19},    {'name': 'Charlie', 'grade': 'A', 'age': 21},    {'name': 'Diana', 'grade': 'B', 'age': 20}]# æŒ‰æˆç»©åˆ†ç»„by_grade = group_by_key(students, lambda s: s['grade'])print(\"æŒ‰æˆç»©åˆ†ç»„:\")for grade, student_list in by_grade.items():    names = [s['name'] for s in student_list]    print(f\"  {grade}çº§: {names}\")# æŒ‰å¹´é¾„åˆ†ç»„by_age = group_by_key(students, lambda s: s['age'])print(\"\\næŒ‰å¹´é¾„åˆ†ç»„:\")for age, student_list in by_age.items():    names = [s['name'] for s in student_list]    print(f\"  {age}å²: {names}\")å®é™…æ¡ˆä¾‹ï¼šæ•°æ®åˆ†ædef analyze_sales_data(sales_records):    \"\"\"åˆ†æé”€å”®æ•°æ®\"\"\"    if not sales_records:        return {}        # æå–å„ç§æ•°æ®åˆ—è¡¨    products = list(set(record['product'] for record in sales_records))    sales_amounts = [record['amount'] for record in sales_records]    sales_dates = [record['date'] for record in sales_records]        # æŒ‰äº§å“åˆ†ç»„    product_sales = {}    for record in sales_records:        product = record['product']        if product not in product_sales:            product_sales[product] = []        product_sales[product].append(record['amount'])        # è®¡ç®—ç»Ÿè®¡ä¿¡æ¯    product_stats = {}    for product, amounts in product_sales.items():        product_stats[product] = {            'total': sum(amounts),            'average': sum(amounts) / len(amounts),            'count': len(amounts),            'max': max(amounts),            'min': min(amounts)        }        # æŒ‰æœˆä»½ç»Ÿè®¡    monthly_sales = {}    for record in sales_records:        month = record['date'][:7]  # YYYY-MMæ ¼å¼        if month not in monthly_sales:            monthly_sales[month] = 0        monthly_sales[month] += record['amount']        # æ’åºç»“æœ    top_products = sorted(product_stats.items(),                          key=lambda x: x[1]['total'],                          reverse=True)        return {        'products': products,        'total_sales': sum(sales_amounts),        'total_transactions': len(sales_records),        'average_transaction': sum(sales_amounts) / len(sales_records),        'product_stats': product_stats,        'monthly_sales': monthly_sales,        'top_products': top_products    }# æµ‹è¯•é”€å”®æ•°æ®sales_data = [    {'date': '2024-01-15', 'product': 'iPhone', 'amount': 999, 'customer': 'Alice'},    {'date': '2024-01-16', 'product': 'MacBook', 'amount': 1999, 'customer': 'Bob'},    {'date': '2024-01-17', 'product': 'iPhone', 'amount': 999, 'customer': 'Charlie'},    {'date': '2024-01-18', 'product': 'iPad', 'amount': 599, 'customer': 'Diana'},    {'date': '2024-02-01', 'product': 'MacBook', 'amount': 1999, 'customer': 'Eve'},    {'date': '2024-02-02', 'product': 'iPhone', 'amount': 999, 'customer': 'Frank'},    {'date': '2024-02-03', 'product': 'iPad', 'amount': 599, 'customer': 'Grace'}]analysis = analyze_sales_data(sales_data)print(\"é”€å”®æ•°æ®åˆ†æ:\")print(f\"äº§å“åˆ—è¡¨: {analysis['products']}\")print(f\"æ€»é”€å”®é¢: ${analysis['total_sales']:,}\")print(f\"æ€»äº¤æ˜“æ•°: {analysis['total_transactions']}\")print(f\"å¹³å‡äº¤æ˜“é¢: ${analysis['average_transaction']:.2f}\")print(\"\\näº§å“ç»Ÿè®¡:\")for product, stats in analysis['product_stats'].items():    print(f\"  {product}:\")    print(f\"    æ€»é”€å”®: ${stats['total']:,}\")    print(f\"    å¹³å‡ä»·æ ¼: ${stats['average']:.2f}\")    print(f\"    é”€å”®æ¬¡æ•°: {stats['count']}\")print(\"\\næœˆåº¦é”€å”®:\")for month, amount in analysis['monthly_sales'].items():    print(f\"  {month}: ${amount:,}\")print(\"\\né”€å”®æ’è¡Œ:\")for i, (product, stats) in enumerate(analysis['top_products'], 1):    print(f\"  {i}. {product}: ${stats['total']:,}\")é«˜çº§åˆ—è¡¨æ“ä½œ# åˆ—è¡¨æ¨å¯¼å¼ä¸list()ç»“åˆnumbers = range(10)# æ¡ä»¶è¿‡æ»¤even_squares = list(x**2 for x in numbers if x % 2 == 0)print(f\"å¶æ•°å¹³æ–¹: {even_squares}\")# åµŒå¥—æ¨å¯¼matrix = [[i*j for j in range(1, 4)] for i in range(1, 4)]print(f\"ä¹˜æ³•è¡¨çŸ©é˜µ: {matrix}\")# å±•å¹³åµŒå¥—æ¨å¯¼flattened_matrix = list(item for row in matrix for item in row)print(f\"å±•å¹³çŸ©é˜µ: {flattened_matrix}\")# æ¡ä»¶è¡¨è¾¾å¼processed = list('positive' if x &gt; 0 else 'negative' if x &lt; 0 else 'zero'                 for x in [-2, -1, 0, 1, 2])print(f\"æ•°å€¼åˆ†ç±»: {processed}\")# å¤šé‡è¿­ä»£combinations = list((x, y) for x in [1, 2, 3] for y in ['a', 'b'] if x &gt; 1)print(f\"æ¡ä»¶ç»„åˆ: {combinations}\")# å‡½æ•°å¼ç¼–ç¨‹ç»“åˆfrom functools import reducefrom operator import add# ç´¯ç§¯æ“ä½œnumbers = [1, 2, 3, 4, 5]cumulative = []for i in range(1, len(numbers) + 1):    cumulative.append(reduce(add, numbers[:i]))print(f\"ç´¯ç§¯å’Œ: {cumulative}\")# æ›´ç®€æ´çš„ç´¯ç§¯å’Œimport itertoolscumsum = list(itertools.accumulate(numbers))print(f\"itertoolsç´¯ç§¯å’Œ: {cumsum}\")# æ»‘åŠ¨çª—å£def sliding_window(lst, window_size):    \"\"\"æ»‘åŠ¨çª—å£\"\"\"    return [lst[i:i+window_size] for i in range(len(lst)-window_size+1)]data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]windows = sliding_window(data, 3)print(f\"æ»‘åŠ¨çª—å£(å¤§å°3): {windows}\")# åˆ†å—å¤„ç†def chunk_list(lst, chunk_size):    \"\"\"å°†åˆ—è¡¨åˆ†å—\"\"\"    return [lst[i:i+chunk_size] for i in range(0, len(lst), chunk_size)]chunks = chunk_list(data, 3)print(f\"åˆ†å—å¤„ç†(å¤§å°3): {chunks}\")âš ï¸ æ³¨æ„äº‹é¡¹æ€§èƒ½è€ƒè™‘import timeimport sys# åˆ›å»ºæ–¹å¼æ€§èƒ½æ¯”è¾ƒn = 100000# æ–¹æ³•1: list()æ„é€ start_time = time.time()list1 = list(range(n))time1 = time.time() - start_time# æ–¹æ³•2: åˆ—è¡¨æ¨å¯¼å¼start_time = time.time()list2 = [i for i in range(n)]time2 = time.time() - start_time# æ–¹æ³•3: é¢„åˆ†é…+å¾ªç¯start_time = time.time()list3 = [None] * nfor i in range(n):    list3[i] = itime3 = time.time() - start_timeprint(f\"æ€§èƒ½æ¯”è¾ƒï¼ˆ{n}ä¸ªå…ƒç´ ï¼‰:\")print(f\"list(range()): {time1:.6f}ç§’\")print(f\"åˆ—è¡¨æ¨å¯¼å¼: {time2:.6f}ç§’\")print(f\"é¢„åˆ†é…+å¾ªç¯: {time3:.6f}ç§’\")# å†…å­˜ä½¿ç”¨æ¯”è¾ƒprint(f\"\\nå†…å­˜ä½¿ç”¨:\")print(f\"listå¯¹è±¡å¤§å°: {sys.getsizeof(list1)} å­—èŠ‚\")print(f\"rangeå¯¹è±¡å¤§å°: {sys.getsizeof(range(n))} å­—èŠ‚\")print(f\"ç”Ÿæˆå™¨å¤§å°: {sys.getsizeof(x for x in range(n))} å­—èŠ‚\")æµ…æ‹·è´ä¸æ·±æ‹·è´import copy# åŸå§‹æ•°æ®original = [[1, 2], [3, 4], [5, 6]]# ç›´æ¥èµ‹å€¼ï¼ˆå¼•ç”¨ï¼‰reference = originalprint(f\"åŸå§‹æ•°æ®: {original}\")print(f\"å¼•ç”¨: {reference}\")print(f\"æ˜¯å¦åŒä¸€å¯¹è±¡: {original is reference}\")# list()åˆ›å»ºæµ…æ‹·è´shallow_copy = list(original)print(f\"æµ…æ‹·è´: {shallow_copy}\")print(f\"æ˜¯å¦åŒä¸€å¯¹è±¡: {original is shallow_copy}\")print(f\"å†…éƒ¨åˆ—è¡¨æ˜¯å¦åŒä¸€å¯¹è±¡: {original[0] is shallow_copy[0]}\")# ä¿®æ”¹æµ‹è¯•original[0][0] = 999print(f\"\\nä¿®æ”¹åŸå§‹æ•°æ®å:\")print(f\"åŸå§‹æ•°æ®: {original}\")print(f\"å¼•ç”¨: {reference}\")print(f\"æµ…æ‹·è´: {shallow_copy}\")# æ·±æ‹·è´original2 = [[1, 2], [3, 4], [5, 6]]deep_copy = copy.deepcopy(original2)original2[0][0] = 888print(f\"\\næ·±æ‹·è´æµ‹è¯•:\")print(f\"åŸå§‹æ•°æ®: {original2}\")print(f\"æ·±æ‹·è´: {deep_copy}\")# ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼åˆ›å»ºæ·±æ‹·è´original3 = [[1, 2], [3, 4], [5, 6]]deep_copy_manual = [row[:] for row in original3]  # å¯¹äºäºŒç»´åˆ—è¡¨original3[0][0] = 777print(f\"\\næ‰‹åŠ¨æ·±æ‹·è´:\")print(f\"åŸå§‹æ•°æ®: {original3}\")print(f\"æ‰‹åŠ¨æ·±æ‹·è´: {deep_copy_manual}\")ç±»å‹è½¬æ¢æ³¨æ„äº‹é¡¹# å­—ç¬¦ä¸²è½¬æ¢string_data = \"hello\"char_list = list(string_data)print(f\"å­—ç¬¦ä¸²è½¬åˆ—è¡¨: {char_list}\")# æ•°å­—å­—ç¬¦ä¸²number_string = \"12345\"digit_list = list(number_string)print(f\"æ•°å­—å­—ç¬¦ä¸²è½¬åˆ—è¡¨: {digit_list}\")# å¦‚æœæƒ³è¦æ•°å­—åˆ—è¡¨number_list = [int(digit) for digit in number_string]print(f\"æ•°å­—åˆ—è¡¨: {number_list}\")# å­—èŠ‚ä¸²è½¬æ¢byte_data = b\"hello\"byte_list = list(byte_data)print(f\"å­—èŠ‚ä¸²è½¬åˆ—è¡¨: {byte_list}\")  # è¾“å‡ºASCIIç å€¼# å­—èŠ‚ä¸²è½¬å­—ç¬¦åˆ—è¡¨char_from_bytes = list(byte_data.decode('utf-8'))print(f\"å­—èŠ‚ä¸²è½¬å­—ç¬¦åˆ—è¡¨: {char_from_bytes}\")# Noneå€¼å¤„ç†try:    none_list = list(None)except TypeError as e:    print(f\"Noneè½¬æ¢é”™è¯¯: {e}\")# å¤„ç†å¯èƒ½ä¸ºNoneçš„æƒ…å†µdef safe_list_conversion(obj):    \"\"\"å®‰å…¨çš„åˆ—è¡¨è½¬æ¢\"\"\"    if obj is None:        return []    try:        return list(obj)    except TypeError:        return [obj]  # å¦‚æœä¸å¯è¿­ä»£ï¼ŒåŒ…è£…æˆå•å…ƒç´ åˆ—è¡¨test_values = [None, \"hello\", [1, 2, 3], 42, (4, 5, 6)]for value in test_values:    result = safe_list_conversion(value)    print(f\"{value} -&gt; {result}\")å¤§æ•°æ®å¤„ç†# å¤„ç†å¤§å‹æ•°æ®é›†æ—¶çš„å†…å­˜ä¼˜åŒ–def process_large_dataset(data_source, batch_size=1000):    \"\"\"æ‰¹é‡å¤„ç†å¤§å‹æ•°æ®é›†\"\"\"    batch = []    results = []        for item in data_source:        batch.append(item)                if len(batch) &gt;= batch_size:            # å¤„ç†æ‰¹æ¬¡            processed_batch = [item * 2 for item in batch]  # ç¤ºä¾‹å¤„ç†            results.extend(processed_batch)            batch = []  # æ¸…ç©ºæ‰¹æ¬¡        # å¤„ç†å‰©ä½™æ•°æ®    if batch:        processed_batch = [item * 2 for item in batch]        results.extend(processed_batch)        return results# æ¨¡æ‹Ÿå¤§å‹æ•°æ®æºdef large_data_generator(size):    \"\"\"ç”Ÿæˆå¤§å‹æ•°æ®çš„ç”Ÿæˆå™¨\"\"\"    for i in range(size):        yield i# æµ‹è¯•æ‰¹é‡å¤„ç†large_data = large_data_generator(10000)processed_results = process_large_dataset(large_data, batch_size=500)print(f\"å¤„ç†äº† {len(processed_results)} ä¸ªæ•°æ®é¡¹\")print(f\"å‰10ä¸ªç»“æœ: {processed_results[:10]}\")print(f\"å10ä¸ªç»“æœ: {processed_results[-10:]}\")# å†…å­˜å‹å¥½çš„æ•°æ®è½¬æ¢def memory_efficient_conversion(iterable, chunk_size=1000):    \"\"\"å†…å­˜å‹å¥½çš„å¤§å‹å¯è¿­ä»£å¯¹è±¡è½¬æ¢\"\"\"    result = []    chunk = []        for item in iterable:        chunk.append(item)        if len(chunk) &gt;= chunk_size:            result.extend(chunk)            chunk = []  # é‡Šæ”¾å†…å­˜        if chunk:        result.extend(chunk)        return result# æ¯”è¾ƒå†…å­˜ä½¿ç”¨import tracemalloc# å¼€å§‹å†…å­˜è·Ÿè¸ªtracemalloc.start()# ç›´æ¥è½¬æ¢å¤§å‹rangelarge_range = range(100000)direct_list = list(large_range)current, peak = tracemalloc.get_traced_memory()print(f\"ç›´æ¥è½¬æ¢å†…å­˜ä½¿ç”¨: å½“å‰ {current / 1024 / 1024:.2f} MB, å³°å€¼ {peak / 1024 / 1024:.2f} MB\")tracemalloc.stop()ğŸ”— ç›¸å…³å†…å®¹ç›¸å…³å‡½æ•°  tuple() - å…ƒç»„æ„é€ å‡½æ•° - åˆ›å»ºå…ƒç»„  set() - é›†åˆæ„é€ å‡½æ•° - åˆ›å»ºé›†åˆ  dict() - å­—å…¸æ„é€ å‡½æ•° - åˆ›å»ºå­—å…¸  str() - å­—ç¬¦ä¸²æ„é€ å‡½æ•° - åˆ›å»ºå­—ç¬¦ä¸²  range() - èŒƒå›´å‡½æ•° - ç”Ÿæˆæ•°å­—åºåˆ—  enumerate() - æšä¸¾å‡½æ•° - æšä¸¾ç´¢å¼•ç›¸å…³æ¨¡å—  copyæ¨¡å— - æ‹·è´æ“ä½œ  itertoolsæ¨¡å— - è¿­ä»£å·¥å…·  collectionsæ¨¡å— - å®¹å™¨æ•°æ®ç±»å‹  arrayæ¨¡å— - æ•°ç»„ç±»å‹ç›¸å…³æ¦‚å¿µ  åˆ—è¡¨æ¨å¯¼å¼ - åˆ—è¡¨ç”Ÿæˆ  åºåˆ—ç±»å‹ - åºåˆ—æ“ä½œ  è¿­ä»£å™¨å’Œç”Ÿæˆå™¨ - è¿­ä»£åè®®  å†…å­˜ç®¡ç† - å†…å­˜ä¼˜åŒ–ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - list()  Pythonå®˜æ–¹æ–‡æ¡£ - åˆ—è¡¨ç±»å‹  åˆ—è¡¨æ¨å¯¼å¼  åºåˆ—ç±»å‹æ“ä½œğŸ·ï¸ æ ‡ç­¾ç±»å‹è½¬æ¢ å®¹å™¨ åºåˆ— æ•°æ®ç»“æ„ å¯å˜ç±»å‹æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/list/",
        "category": "builtins",
        "tags": ["ç±»å‹è½¬æ¢","å®¹å™¨","åºåˆ—"]
      }
      
    
  
    
      ,
      {
        "title": "locals() - å±€éƒ¨å‘½åç©ºé—´å‡½æ•°",
        "content": "locals() - å±€éƒ¨å‘½åç©ºé—´å‡½æ•°ğŸ“ æ¦‚è¿°locals() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºè¿”å›å½“å‰å±€éƒ¨å‘½åç©ºé—´çš„å­—å…¸ã€‚è¿™ä¸ªå­—å…¸åŒ…å«äº†å½“å‰ä½œç”¨åŸŸä¸­çš„æ‰€æœ‰å±€éƒ¨å˜é‡ã€‚åœ¨æ¨¡å—çº§åˆ«è°ƒç”¨æ—¶ï¼Œlocals() çš„è¡Œä¸ºä¸ globals() ç›¸åŒã€‚åœ¨å‡½æ•°å†…éƒ¨è°ƒç”¨æ—¶ï¼Œå®ƒè¿”å›å‡½æ•°çš„å±€éƒ¨å˜é‡å­—å…¸ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹ locals() è¿”å›å­—å…¸çš„ä¿®æ”¹å¯èƒ½ä¸ä¼šå½±å“å®é™…çš„å±€éƒ¨å˜é‡ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡locals()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œç‰¹æ€§  ç†è§£å±€éƒ¨å‘½åç©ºé—´çš„æ¦‚å¿µå’Œä½œç”¨åŸŸ  å­¦ä¼šåœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨locals()  æŒæ¡locals()åœ¨è°ƒè¯•å’Œå†…çœä¸­çš„åº”ç”¨  äº†è§£locals()ä¸globals()çš„åŒºåˆ«å’Œè”ç³»ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  å˜é‡ä½œç”¨åŸŸçš„æ¦‚å¿µ  å‡½æ•°å®šä¹‰å’Œè°ƒç”¨  å­—å…¸æ“ä½œåŸºç¡€  ç†è§£å…¨å±€å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µå±€éƒ¨å‘½åç©ºé—´æ˜¯Pythonä¸­å­˜å‚¨å±€éƒ¨å˜é‡çš„å­—å…¸ï¼Œå…¶å†…å®¹å–å†³äºè°ƒç”¨ locals() çš„ä¸Šä¸‹æ–‡ï¼š  æ¨¡å—çº§åˆ«: è¿”å›å…¨å±€å‘½åç©ºé—´ï¼ˆç­‰åŒäº globals()ï¼‰  å‡½æ•°å†…éƒ¨: è¿”å›å‡½æ•°çš„å±€éƒ¨å˜é‡  ç±»å®šä¹‰å†…éƒ¨: è¿”å›ç±»çš„å±€éƒ¨å‘½åç©ºé—´  æ–¹æ³•å†…éƒ¨: è¿”å›æ–¹æ³•çš„å±€éƒ¨å˜é‡è¯­æ³•æ ¼å¼locals()å‚æ•°è¯´æ˜locals() å‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°ã€‚è¿”å›å€¼  ç±»å‹: å­—å…¸ï¼ˆdictï¼‰  å†…å®¹: å½“å‰å±€éƒ¨å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰åç§°å’Œå¯¹åº”çš„å¯¹è±¡é‡è¦ç‰¹æ€§  åªè¯»æ€§: å¯¹è¿”å›å­—å…¸çš„ä¿®æ”¹é€šå¸¸ä¸ä¼šå½±å“å®é™…çš„å±€éƒ¨å˜é‡  ä¸Šä¸‹æ–‡ç›¸å…³: è¿”å›å†…å®¹å–å†³äºè°ƒç”¨ä½ç½®  åŠ¨æ€æ€§: æ¯æ¬¡è°ƒç”¨éƒ½è¿”å›å½“å‰çŠ¶æ€çš„å¿«ç…§ğŸ’¡ ä»£ç ç¤ºä¾‹åŸºæœ¬ç”¨æ³•# åŸºæœ¬ç”¨æ³•ç¤ºä¾‹print(\"locals()åŸºæœ¬ç”¨æ³•:\")# æ¨¡å—çº§åˆ«çš„locals()module_var1 = \"æ¨¡å—å˜é‡1\"module_var2 = 42print(f\"\\n1. æ¨¡å—çº§åˆ«çš„locals():\")module_locals = locals()print(f\"locals()ç±»å‹: {type(module_locals)}\")print(f\"å˜é‡æ•°é‡: {len(module_locals)}\")# æ£€æŸ¥æ¨¡å—çº§åˆ«locals()æ˜¯å¦ç­‰åŒäºglobals()print(f\"locals() is globals(): {locals() is globals()}\")print(f\"æ¨¡å—å˜é‡åœ¨locals()ä¸­: {'module_var1' in module_locals}\")# å‡½æ•°ä¸­çš„locals()def demonstrate_function_locals():    \"\"\"æ¼”ç¤ºå‡½æ•°ä¸­çš„locals()\"\"\"    func_var1 = \"å‡½æ•°å˜é‡1\"    func_var2 = [1, 2, 3]    func_var3 = {'key': 'value'}        print(f\"\\n2. å‡½æ•°ä¸­çš„locals():\")    func_locals = locals()    print(f\"å‡½æ•°å±€éƒ¨å˜é‡æ•°é‡: {len(func_locals)}\")    print(f\"å±€éƒ¨å˜é‡åˆ—è¡¨:\")        for name, value in func_locals.items():        print(f\"  {name}: {value} ({type(value).__name__})\")        return func_locals# è°ƒç”¨å‡½æ•°function_locals_result = demonstrate_function_locals()# å¸¦å‚æ•°çš„å‡½æ•°def function_with_parameters(param1, param2, *args, **kwargs):    \"\"\"å¸¦å‚æ•°çš„å‡½æ•°\"\"\"    local_var = \"å±€éƒ¨å˜é‡\"        print(f\"\\n3. å¸¦å‚æ•°å‡½æ•°çš„locals():\")    func_locals = locals()        print(f\"å‚æ•°å’Œå±€éƒ¨å˜é‡:\")    for name, value in func_locals.items():        print(f\"  {name}: {value}\")        return func_locals# æµ‹è¯•å¸¦å‚æ•°çš„å‡½æ•°params_result = function_with_parameters(\"arg1\", \"arg2\", \"extra1\", \"extra2\", key1=\"value1\", key2=\"value2\")# åµŒå¥—å‡½æ•°ä¸­çš„locals()def outer_function(outer_param):    \"\"\"å¤–å±‚å‡½æ•°\"\"\"    outer_var = \"å¤–å±‚å˜é‡\"        def inner_function(inner_param):        \"\"\"å†…å±‚å‡½æ•°\"\"\"        inner_var = \"å†…å±‚å˜é‡\"                print(f\"\\n4. åµŒå¥—å‡½æ•°çš„locals():\")        print(f\"å†…å±‚å‡½æ•°locals():\")        inner_locals = locals()        for name, value in inner_locals.items():            print(f\"  {name}: {value}\")                return inner_locals        print(f\"å¤–å±‚å‡½æ•°locals():\")    outer_locals = locals()    for name, value in outer_locals.items():        if not callable(value):  # ä¸æ˜¾ç¤ºå‡½æ•°å¯¹è±¡            print(f\"  {name}: {value}\")        return inner_function(\"å†…å±‚å‚æ•°\")# æµ‹è¯•åµŒå¥—å‡½æ•°nested_result = outer_function(\"å¤–å±‚å‚æ•°\")locals()çš„ä¿®æ”¹è¡Œä¸º# locals()ä¿®æ”¹è¡Œä¸ºç¤ºä¾‹print(\"\\nlocals()ä¿®æ”¹è¡Œä¸ºç¤ºä¾‹:\")# æ¨¡å—çº§åˆ«çš„ä¿®æ”¹print(\"1. æ¨¡å—çº§åˆ«ä¿®æ”¹:\")original_value = \"åŸå§‹å€¼\"print(f\"ä¿®æ”¹å‰: original_value = {original_value}\")# åœ¨æ¨¡å—çº§åˆ«ï¼Œlocals()ç­‰åŒäºglobals()ï¼Œä¿®æ”¹ä¼šç”Ÿæ•ˆlocals()['original_value'] = \"ä¿®æ”¹åçš„å€¼\"print(f\"ä¿®æ”¹å: original_value = {original_value}\")# å‡½æ•°çº§åˆ«çš„ä¿®æ”¹ï¼ˆé€šå¸¸ä¸ä¼šç”Ÿæ•ˆï¼‰def test_local_modification():    \"\"\"æµ‹è¯•å±€éƒ¨å˜é‡ä¿®æ”¹\"\"\"    print(f\"\\n2. å‡½æ•°çº§åˆ«ä¿®æ”¹:\")        local_var = \"åŸå§‹å±€éƒ¨å€¼\"    print(f\"ä¿®æ”¹å‰: local_var = {local_var}\")        # å°è¯•é€šè¿‡locals()ä¿®æ”¹å±€éƒ¨å˜é‡    local_dict = locals()    local_dict['local_var'] = \"å°è¯•ä¿®æ”¹çš„å€¼\"        print(f\"ä¿®æ”¹locals()å: local_var = {local_var}\")    print(f\"locals()å­—å…¸ä¸­çš„å€¼: {locals()['local_var']}\")        # ç›´æ¥ä¿®æ”¹å˜é‡    local_var = \"ç›´æ¥ä¿®æ”¹çš„å€¼\"    print(f\"ç›´æ¥ä¿®æ”¹å: local_var = {local_var}\")        return locals()test_result = test_local_modification()# æ¼”ç¤ºä¸ºä»€ä¹ˆå‡½æ•°ä¸­çš„locals()ä¿®æ”¹ä¸ç”Ÿæ•ˆdef explain_locals_behavior():    \"\"\"è§£é‡Šlocals()è¡Œä¸º\"\"\"    print(f\"\\n3. locals()è¡Œä¸ºè§£é‡Š:\")        var1 = \"å˜é‡1\"    var2 = \"å˜é‡2\"        # è·å–locals()çš„å¼•ç”¨    local_dict = locals()    print(f\"è·å–locals()å¼•ç”¨\")        # ä¿®æ”¹å­—å…¸    local_dict['var1'] = \"ä¿®æ”¹çš„å˜é‡1\"    local_dict['new_var'] = \"æ–°å˜é‡\"        print(f\"ä¿®æ”¹å­—å…¸å:\")    print(f\"  var1 = {var1}\")    print(f\"  var2 = {var2}\")    print(f\"  'new_var' in locals(): {'new_var' in locals()}\")        # å†æ¬¡è°ƒç”¨locals()æŸ¥çœ‹    current_locals = locals()    print(f\"\\nå†æ¬¡è°ƒç”¨locals():\")    for name, value in current_locals.items():        print(f\"  {name}: {value}\")explain_locals_behavior()# å®‰å…¨çš„å±€éƒ¨å˜é‡æ£€æŸ¥def safe_locals_inspection():    \"\"\"å®‰å…¨çš„å±€éƒ¨å˜é‡æ£€æŸ¥\"\"\"    print(f\"\\n4. å®‰å…¨çš„å±€éƒ¨å˜é‡æ£€æŸ¥:\")        inspection_var1 = \"æ£€æŸ¥å˜é‡1\"    inspection_var2 = [1, 2, 3, 4, 5]    inspection_var3 = {'a': 1, 'b': 2}        # åˆ›å»ºlocals()çš„å‰¯æœ¬è¿›è¡Œå®‰å…¨æ“ä½œ    locals_copy = locals().copy()        print(f\"å±€éƒ¨å˜é‡å¿«ç…§:\")    for name, value in locals_copy.items():        if not name.startswith('locals_copy'):            print(f\"  {name}: {value} ({type(value).__name__})\")        # åˆ†æå˜é‡ç±»å‹    type_counts = {}    for value in locals_copy.values():        type_name = type(value).__name__        type_counts[type_name] = type_counts.get(type_name, 0) + 1        print(f\"\\nå˜é‡ç±»å‹ç»Ÿè®¡:\")    for type_name, count in type_counts.items():        print(f\"  {type_name}: {count}\")        return locals_copysafe_inspection_result = safe_locals_inspection()ç±»ä¸­çš„locals()ä½¿ç”¨# ç±»ä¸­çš„locals()ä½¿ç”¨ç¤ºä¾‹print(\"\\nç±»ä¸­çš„locals()ä½¿ç”¨ç¤ºä¾‹:\")# ç±»å®šä¹‰ä¸­çš„locals()print(\"1. ç±»å®šä¹‰ä¸­çš„locals():\")class DemoClass:    \"\"\"æ¼”ç¤ºç±»\"\"\"    class_var1 = \"ç±»å˜é‡1\"    class_var2 = 42        # åœ¨ç±»å®šä¹‰ä¸­ä½¿ç”¨locals()    print(f\"ç±»å®šä¹‰ä¸­çš„locals():\")    class_locals = locals()    print(f\"  ç±»å±€éƒ¨å˜é‡æ•°é‡: {len(class_locals)}\")    for name, value in class_locals.items():        if not name.startswith('__'):            print(f\"    {name}: {value}\")        def __init__(self, instance_param):        \"\"\"åˆå§‹åŒ–æ–¹æ³•\"\"\"        self.instance_var = instance_param                print(f\"\\n2. __init__æ–¹æ³•ä¸­çš„locals():\")        init_locals = locals()        for name, value in init_locals.items():            print(f\"  {name}: {value}\")        def instance_method(self, method_param):        \"\"\"å®ä¾‹æ–¹æ³•\"\"\"        method_var = \"æ–¹æ³•å˜é‡\"                print(f\"\\n3. å®ä¾‹æ–¹æ³•ä¸­çš„locals():\")        method_locals = locals()        for name, value in method_locals.items():            print(f\"  {name}: {value}\")                return method_locals        @classmethod    def class_method(cls, class_param):        \"\"\"ç±»æ–¹æ³•\"\"\"        class_method_var = \"ç±»æ–¹æ³•å˜é‡\"                print(f\"\\n4. ç±»æ–¹æ³•ä¸­çš„locals():\")        class_method_locals = locals()        for name, value in class_method_locals.items():            print(f\"  {name}: {value}\")                return class_method_locals        @staticmethod    def static_method(static_param):        \"\"\"é™æ€æ–¹æ³•\"\"\"        static_var = \"é™æ€æ–¹æ³•å˜é‡\"                print(f\"\\n5. é™æ€æ–¹æ³•ä¸­çš„locals():\")        static_locals = locals()        for name, value in static_locals.items():            print(f\"  {name}: {value}\")                return static_locals# æµ‹è¯•ç±»ä¸­çš„locals()demo_instance = DemoClass(\"å®ä¾‹å‚æ•°\")instance_result = demo_instance.instance_method(\"æ–¹æ³•å‚æ•°\")class_result = DemoClass.class_method(\"ç±»å‚æ•°\")static_result = DemoClass.static_method(\"é™æ€å‚æ•°\")# å±æ€§è®¿é—®ä¸­çš„locals()class PropertyDemo:    \"\"\"å±æ€§æ¼”ç¤ºç±»\"\"\"        def __init__(self):        self._value = 0        @property    def value(self):        \"\"\"å±æ€§getter\"\"\"        getter_var = \"getterå˜é‡\"                print(f\"\\n6. å±æ€§getterä¸­çš„locals():\")        getter_locals = locals()        for name, value in getter_locals.items():            print(f\"  {name}: {value}\")                return self._value        @value.setter    def value(self, new_value):        \"\"\"å±æ€§setter\"\"\"        setter_var = \"setterå˜é‡\"        old_value = self._value                print(f\"\\n7. å±æ€§setterä¸­çš„locals():\")        setter_locals = locals()        for name, value in setter_locals.items():            print(f\"  {name}: {value}\")                self._value = new_value# æµ‹è¯•å±æ€§ä¸­çš„locals()prop_demo = PropertyDemo()value = prop_demo.value  # è§¦å‘getterprop_demo.value = 42     # è§¦å‘setterè°ƒè¯•å’Œå†…çœåº”ç”¨import inspectimport tracebackfrom typing import Dict, Any, List, Optional# è°ƒè¯•å’Œå†…çœå·¥å…·class LocalsInspector:    \"\"\"å±€éƒ¨å˜é‡æ£€æŸ¥å™¨\"\"\"        def __init__(self):        self.inspection_history = []        def inspect_current_locals(self, frame_offset: int = 1) -&gt; Dict[str, Any]:        \"\"\"æ£€æŸ¥å½“å‰å±€éƒ¨å˜é‡\"\"\"        # è·å–è°ƒç”¨è€…çš„å¸§        frame = inspect.currentframe()        try:            # å‘ä¸ŠæŸ¥æ‰¾æŒ‡å®šå±‚æ•°çš„å¸§            for _ in range(frame_offset):                frame = frame.f_back                if frame is None:                    return {'error': 'Frame not found'}                        # è·å–å±€éƒ¨å˜é‡            frame_locals = frame.f_locals.copy()                        # è·å–å¸§ä¿¡æ¯            frame_info = {                'filename': frame.f_code.co_filename,                'function': frame.f_code.co_name,                'line_number': frame.f_lineno,                'locals_count': len(frame_locals)            }                        inspection_result = {                'frame_info': frame_info,                'locals': frame_locals,                'timestamp': __import__('time').time()            }                        self.inspection_history.append(inspection_result)            return inspection_result                    finally:            del frame  # é¿å…å¾ªç¯å¼•ç”¨        def debug_function_call(self, func, *args, **kwargs):        \"\"\"è°ƒè¯•å‡½æ•°è°ƒç”¨\"\"\"        print(f\"\\nè°ƒè¯•å‡½æ•°è°ƒç”¨: {func.__name__}\")                # è°ƒç”¨å‰æ£€æŸ¥        print(f\"è°ƒç”¨å‰çš„å±€éƒ¨å˜é‡:\")        pre_locals = self.inspect_current_locals()        for name, value in pre_locals['locals'].items():            if not name.startswith('_'):                print(f\"  {name}: {value}\")                try:            # æ‰§è¡Œå‡½æ•°            result = func(*args, **kwargs)                        # è°ƒç”¨åæ£€æŸ¥            print(f\"\\nè°ƒç”¨åçš„å±€éƒ¨å˜é‡:\")            post_locals = self.inspect_current_locals()            for name, value in post_locals['locals'].items():                if not name.startswith('_'):                    print(f\"  {name}: {value}\")                        return result                    except Exception as e:            print(f\"\\nå‡½æ•°æ‰§è¡Œå‡ºé”™: {e}\")            print(f\"é”™è¯¯æ—¶çš„å±€éƒ¨å˜é‡:\")            error_locals = self.inspect_current_locals()            for name, value in error_locals['locals'].items():                if not name.startswith('_'):                    print(f\"  {name}: {value}\")            raise        def analyze_variable_changes(self, var_name: str) -&gt; List[Dict[str, Any]]:        \"\"\"åˆ†æå˜é‡å˜åŒ–\"\"\"        changes = []                for i, inspection in enumerate(self.inspection_history):            if var_name in inspection['locals']:                change_info = {                    'inspection_index': i,                    'timestamp': inspection['timestamp'],                    'function': inspection['frame_info']['function'],                    'line': inspection['frame_info']['line_number'],                    'value': inspection['locals'][var_name],                    'type': type(inspection['locals'][var_name]).__name__                }                changes.append(change_info)                return changes        def get_inspection_summary(self) -&gt; Dict[str, Any]:        \"\"\"è·å–æ£€æŸ¥æ‘˜è¦\"\"\"        if not self.inspection_history:            return {'message': 'No inspections performed'}                # ç»Ÿè®¡ä¿¡æ¯        total_inspections = len(self.inspection_history)        functions_inspected = set()        all_variables = set()                for inspection in self.inspection_history:            functions_inspected.add(inspection['frame_info']['function'])            all_variables.update(inspection['locals'].keys())                return {            'total_inspections': total_inspections,            'functions_inspected': len(functions_inspected),            'unique_variables': len(all_variables),            'function_list': list(functions_inspected),            'common_variables': self._find_common_variables()        }        def _find_common_variables(self) -&gt; List[str]:        \"\"\"æŸ¥æ‰¾å¸¸è§å˜é‡\"\"\"        if not self.inspection_history:            return []                # ç»Ÿè®¡å˜é‡å‡ºç°æ¬¡æ•°        var_counts = {}        for inspection in self.inspection_history:            for var_name in inspection['locals'].keys():                var_counts[var_name] = var_counts.get(var_name, 0) + 1                # è¿”å›å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„å˜é‡        threshold = len(self.inspection_history) // 2        return [var for var, count in var_counts.items() if count &gt; threshold]# æµ‹è¯•è°ƒè¯•å·¥å…·print(\"\\nè°ƒè¯•å’Œå†…çœåº”ç”¨ç¤ºä¾‹:\")inspector = LocalsInspector()# æµ‹è¯•å‡½æ•°1def test_function1(param1, param2):    \"\"\"æµ‹è¯•å‡½æ•°1\"\"\"    local_var1 = param1 * 2    local_var2 = param2.upper() if isinstance(param2, str) else str(param2)        # åœ¨å‡½æ•°ä¸­æ£€æŸ¥å±€éƒ¨å˜é‡    inspection = inspector.inspect_current_locals(0)  # æ£€æŸ¥å½“å‰å¸§    print(f\"\\nå‡½æ•°1ä¸­çš„å±€éƒ¨å˜é‡æ£€æŸ¥:\")    print(f\"  å‡½æ•°: {inspection['frame_info']['function']}\")    print(f\"  è¡Œå·: {inspection['frame_info']['line_number']}\")    print(f\"  å±€éƒ¨å˜é‡:\")    for name, value in inspection['locals'].items():        if not name.startswith('_'):            print(f\"    {name}: {value}\")        return local_var1, local_var2# æµ‹è¯•å‡½æ•°2def test_function2(data_list):    \"\"\"æµ‹è¯•å‡½æ•°2\"\"\"    processed_data = []    total = 0        for i, item in enumerate(data_list):        processed_item = item ** 2        processed_data.append(processed_item)        total += processed_item                # åœ¨å¾ªç¯ä¸­æ£€æŸ¥å±€éƒ¨å˜é‡        if i == 2:  # åªåœ¨ç¬¬3æ¬¡è¿­ä»£æ—¶æ£€æŸ¥            inspection = inspector.inspect_current_locals(0)            print(f\"\\nå‡½æ•°2å¾ªç¯ä¸­çš„å±€éƒ¨å˜é‡æ£€æŸ¥ (i={i}):\")            for name, value in inspection['locals'].items():                if not name.startswith('_'):                    print(f\"    {name}: {value}\")        average = total / len(data_list) if data_list else 0    return processed_data, total, average# ä½¿ç”¨è°ƒè¯•å™¨æµ‹è¯•å‡½æ•°print(\"1. ä½¿ç”¨è°ƒè¯•å™¨æµ‹è¯•å‡½æ•°:\")result1 = inspector.debug_function_call(test_function1, 5, \"hello\")print(f\"å‡½æ•°1ç»“æœ: {result1}\")result2 = inspector.debug_function_call(test_function2, [1, 2, 3, 4, 5])print(f\"å‡½æ•°2ç»“æœ: {result2}\")# åˆ†æå˜é‡å˜åŒ–print(f\"\\n2. å˜é‡å˜åŒ–åˆ†æ:\")changes = inspector.analyze_variable_changes('local_var1')if changes:    print(f\"å˜é‡ 'local_var1' çš„å˜åŒ–:\")    for change in changes:        print(f\"  å‡½æ•° {change['function']}, è¡Œ {change['line']}: {change['value']} ({change['type']})\")else:    print(f\"å˜é‡ 'local_var1' æœªæ‰¾åˆ°å˜åŒ–è®°å½•\")# è·å–æ£€æŸ¥æ‘˜è¦print(f\"\\n3. æ£€æŸ¥æ‘˜è¦:\")summary = inspector.get_inspection_summary()for key, value in summary.items():    print(f\"  {key}: {value}\")é«˜çº§åº”ç”¨ï¼šåŠ¨æ€å˜é‡è·Ÿè¸ªimport functoolsimport timefrom typing import Callable, Any, Dict, List# åŠ¨æ€å˜é‡è·Ÿè¸ªå™¨class VariableTracker:    \"\"\"å˜é‡è·Ÿè¸ªå™¨\"\"\"        def __init__(self):        self.tracking_data = {}        self.active_tracking = set()        def track_function(self, track_vars: List[str] = None):        \"\"\"å‡½æ•°è£…é¥°å™¨ï¼šè·Ÿè¸ªå‡½æ•°ä¸­çš„å˜é‡\"\"\"        def decorator(func: Callable) -&gt; Callable:            @functools.wraps(func)            def wrapper(*args, **kwargs):                func_name = func.__name__                                # åˆå§‹åŒ–è·Ÿè¸ªæ•°æ®                if func_name not in self.tracking_data:                    self.tracking_data[func_name] = {                        'calls': [],                        'variable_history': {}                    }                                call_start_time = time.time()                call_id = len(self.tracking_data[func_name]['calls'])                                # æ‰§è¡Œå‡½æ•°å¹¶è·Ÿè¸ªå˜é‡                try:                    # åˆ›å»ºåŒ…è£…çš„locals()å‡½æ•°                    original_locals = locals                                        def tracking_locals():                        current_locals = original_locals()                                                # è®°å½•æŒ‡å®šå˜é‡çš„å˜åŒ–                        if track_vars:                            for var_name in track_vars:                                if var_name in current_locals:                                    self._record_variable_change(                                        func_name, call_id, var_name,                                         current_locals[var_name]                                    )                                                return current_locals                                        # ä¸´æ—¶æ›¿æ¢locals()ï¼ˆä»…åœ¨æ­¤å‡½æ•°ä½œç”¨åŸŸå†…ï¼‰                    # æ³¨æ„ï¼šè¿™åªæ˜¯æ¼”ç¤ºï¼Œå®é™…ä¸­ä¸å»ºè®®æ›¿æ¢å†…ç½®å‡½æ•°                                        result = func(*args, **kwargs)                                        # è®°å½•è°ƒç”¨ä¿¡æ¯                    call_info = {                        'call_id': call_id,                        'start_time': call_start_time,                        'end_time': time.time(),                        'args': args,                        'kwargs': kwargs,                        'result': result,                        'success': True                    }                                        self.tracking_data[func_name]['calls'].append(call_info)                    return result                                    except Exception as e:                    # è®°å½•å¼‚å¸¸è°ƒç”¨                    call_info = {                        'call_id': call_id,                        'start_time': call_start_time,                        'end_time': time.time(),                        'args': args,                        'kwargs': kwargs,                        'error': str(e),                        'success': False                    }                                        self.tracking_data[func_name]['calls'].append(call_info)                    raise                        return wrapper        return decorator        def _record_variable_change(self, func_name: str, call_id: int,                                var_name: str, value: Any):        \"\"\"è®°å½•å˜é‡å˜åŒ–\"\"\"        if var_name not in self.tracking_data[func_name]['variable_history']:            self.tracking_data[func_name]['variable_history'][var_name] = []                change_record = {            'call_id': call_id,            'timestamp': time.time(),            'value': value,            'type': type(value).__name__        }                self.tracking_data[func_name]['variable_history'][var_name].append(change_record)        def get_function_stats(self, func_name: str) -&gt; Dict[str, Any]:        \"\"\"è·å–å‡½æ•°ç»Ÿè®¡ä¿¡æ¯\"\"\"        if func_name not in self.tracking_data:            return {'error': f'Function {func_name} not tracked'}                data = self.tracking_data[func_name]        calls = data['calls']                if not calls:            return {'message': 'No calls recorded'}                # è®¡ç®—ç»Ÿè®¡ä¿¡æ¯        successful_calls = [call for call in calls if call['success']]        failed_calls = [call for call in calls if not call['success']]                if successful_calls:            execution_times = [call['end_time'] - call['start_time'] for call in successful_calls]            avg_execution_time = sum(execution_times) / len(execution_times)            min_execution_time = min(execution_times)            max_execution_time = max(execution_times)        else:            avg_execution_time = min_execution_time = max_execution_time = 0                return {            'total_calls': len(calls),            'successful_calls': len(successful_calls),            'failed_calls': len(failed_calls),            'avg_execution_time': avg_execution_time,            'min_execution_time': min_execution_time,            'max_execution_time': max_execution_time,            'tracked_variables': list(data['variable_history'].keys())        }        def get_variable_timeline(self, func_name: str, var_name: str) -&gt; List[Dict[str, Any]]:        \"\"\"è·å–å˜é‡æ—¶é—´çº¿\"\"\"        if (func_name not in self.tracking_data or             var_name not in self.tracking_data[func_name]['variable_history']):            return []                return self.tracking_data[func_name]['variable_history'][var_name].copy()        def print_tracking_report(self, func_name: str = None):        \"\"\"æ‰“å°è·Ÿè¸ªæŠ¥å‘Š\"\"\"        if func_name:            functions_to_report = [func_name] if func_name in self.tracking_data else []        else:            functions_to_report = list(self.tracking_data.keys())                if not functions_to_report:            print(\"æ²¡æœ‰è·Ÿè¸ªæ•°æ®\")            return                print(f\"\\nå˜é‡è·Ÿè¸ªæŠ¥å‘Š:\")        print(f\"=\" * 50)                for func in functions_to_report:            stats = self.get_function_stats(func)                        print(f\"\\nå‡½æ•°: {func}\")            print(f\"  æ€»è°ƒç”¨æ¬¡æ•°: {stats['total_calls']}\")            print(f\"  æˆåŠŸè°ƒç”¨: {stats['successful_calls']}\")            print(f\"  å¤±è´¥è°ƒç”¨: {stats['failed_calls']}\")            print(f\"  å¹³å‡æ‰§è¡Œæ—¶é—´: {stats['avg_execution_time']:.4f}ç§’\")            print(f\"  è·Ÿè¸ªçš„å˜é‡: {stats['tracked_variables']}\")                        # æ˜¾ç¤ºå˜é‡å˜åŒ–            for var_name in stats['tracked_variables']:                timeline = self.get_variable_timeline(func, var_name)                print(f\"\\n  å˜é‡ '{var_name}' çš„å˜åŒ–:\")                for i, change in enumerate(timeline[-5:]):  # åªæ˜¾ç¤ºæœ€è¿‘5æ¬¡å˜åŒ–                    print(f\"    {i+1}. è°ƒç”¨{change['call_id']}: {change['value']} ({change['type']})\")# æµ‹è¯•å˜é‡è·Ÿè¸ªå™¨print(\"\\nåŠ¨æ€å˜é‡è·Ÿè¸ªç¤ºä¾‹:\")tracker = VariableTracker()# ä½¿ç”¨è·Ÿè¸ªè£…é¥°å™¨@tracker.track_function(['counter', 'result', 'temp'])def tracked_calculation(n):    \"\"\"è¢«è·Ÿè¸ªçš„è®¡ç®—å‡½æ•°\"\"\"    counter = 0    result = 0        for i in range(n):        counter += 1        temp = i ** 2        result += temp                # æ¨¡æ‹Ÿä¸€äº›å±€éƒ¨å˜é‡æ“ä½œ        if i % 2 == 0:            temp *= 2        return result@tracker.track_function(['data', 'processed'])def tracked_processing(input_data):    \"\"\"è¢«è·Ÿè¸ªçš„å¤„ç†å‡½æ•°\"\"\"    data = input_data.copy() if hasattr(input_data, 'copy') else list(input_data)    processed = []        for item in data:        if isinstance(item, (int, float)):            processed_item = item * 2 + 1            processed.append(processed_item)        return processed# æµ‹è¯•è·Ÿè¸ªåŠŸèƒ½print(\"1. æ‰§è¡Œè¢«è·Ÿè¸ªçš„å‡½æ•°:\")# å¤šæ¬¡è°ƒç”¨å‡½æ•°for i in range(3):    result1 = tracked_calculation(5)    print(f\"  è®¡ç®—ç»“æœ {i+1}: {result1}\")for i in range(2):    result2 = tracked_processing([1, 2, 3, 4])    print(f\"  å¤„ç†ç»“æœ {i+1}: {result2}\")# æ‰“å°è·Ÿè¸ªæŠ¥å‘Šprint(\"\\n2. è·Ÿè¸ªæŠ¥å‘Š:\")tracker.print_tracking_report()# è·å–ç‰¹å®šå‡½æ•°çš„è¯¦ç»†ç»Ÿè®¡print(\"\\n3. è¯¦ç»†ç»Ÿè®¡:\")stats = tracker.get_function_stats('tracked_calculation')print(f\"tracked_calculation ç»Ÿè®¡:\")for key, value in stats.items():    print(f\"  {key}: {value}\")# è·å–å˜é‡æ—¶é—´çº¿print(\"\\n4. å˜é‡æ—¶é—´çº¿:\")timeline = tracker.get_variable_timeline('tracked_calculation', 'result')print(f\"å˜é‡ 'result' çš„å®Œæ•´æ—¶é—´çº¿:\")for change in timeline:    print(f\"  è°ƒç”¨{change['call_id']}: {change['value']} (æ—¶é—´: {change['timestamp']:.2f})\")âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µlocals()çš„é™åˆ¶å’Œæ³¨æ„äº‹é¡¹# locals()é™åˆ¶å’Œæ³¨æ„äº‹é¡¹print(\"\\nlocals()é™åˆ¶å’Œæ³¨æ„äº‹é¡¹:\")# 1. ä¿®æ”¹é™åˆ¶print(\"1. ä¿®æ”¹é™åˆ¶:\")def modification_limitation_demo():    \"\"\"æ¼”ç¤ºä¿®æ”¹é™åˆ¶\"\"\"    local_var = \"åŸå§‹å€¼\"        print(f\"  ä¿®æ”¹å‰: local_var = {local_var}\")        # å°è¯•ä¿®æ”¹locals()å­—å…¸    locals()['local_var'] = \"ä¿®æ”¹çš„å€¼\"    print(f\"  å°è¯•ä¿®æ”¹å: local_var = {local_var}\")  # é€šå¸¸ä¸ä¼šæ”¹å˜        # æ·»åŠ æ–°å˜é‡åˆ°locals()    locals()['new_local'] = \"æ–°å˜é‡\"    print(f\"  æ·»åŠ æ–°å˜é‡å: 'new_local' in locals() = {'new_local' in locals()}\")        # ä½†æ˜¯æ–°å˜é‡é€šå¸¸æ— æ³•ç›´æ¥è®¿é—®    try:        print(f\"  ç›´æ¥è®¿é—®new_local: {new_local}\")    except NameError:        print(f\"  æ— æ³•ç›´æ¥è®¿é—®new_localå˜é‡\")        return locals()modification_result = modification_limitation_demo()# 2. æ€§èƒ½è€ƒè™‘print(\"\\n2. æ€§èƒ½è€ƒè™‘:\")import timedef performance_comparison():    \"\"\"æ€§èƒ½æ¯”è¾ƒ\"\"\"    test_var1 = \"æµ‹è¯•å˜é‡1\"    test_var2 = \"æµ‹è¯•å˜é‡2\"    test_var3 = \"æµ‹è¯•å˜é‡3\"        iterations = 100000        # ç›´æ¥è®¿é—®å˜é‡    start_time = time.time()    for _ in range(iterations):        value = test_var1    direct_time = time.time() - start_time        # é€šè¿‡locals()è®¿é—®    start_time = time.time()    for _ in range(iterations):        local_dict = locals()        value = local_dict['test_var1']    locals_time = time.time() - start_time        # ç¼“å­˜locals()åè®¿é—®    local_dict = locals()    start_time = time.time()    for _ in range(iterations):        value = local_dict['test_var1']    cached_locals_time = time.time() - start_time        print(f\"  æ€§èƒ½æ¯”è¾ƒ ({iterations} æ¬¡è¿­ä»£):\")    print(f\"    ç›´æ¥è®¿é—®: {direct_time:.4f}ç§’\")    print(f\"    locals()è®¿é—®: {locals_time:.4f}ç§’ (æ…¢ {locals_time/direct_time:.1f}å€)\")    print(f\"    ç¼“å­˜locals()è®¿é—®: {cached_locals_time:.4f}ç§’ (æ…¢ {cached_locals_time/direct_time:.1f}å€)\")performance_comparison()# 3. ä½œç”¨åŸŸé™·é˜±print(\"\\n3. ä½œç”¨åŸŸé™·é˜±:\")def scope_trap_demo():    \"\"\"ä½œç”¨åŸŸé™·é˜±æ¼”ç¤º\"\"\"        def outer_function():        outer_var = \"å¤–å±‚å˜é‡\"                def inner_function():            inner_var = \"å†…å±‚å˜é‡\"                        print(f\"  å†…å±‚å‡½æ•°çš„locals():\")            inner_locals = locals()            for name, value in inner_locals.items():                print(f\"    {name}: {value}\")                        # å°è¯•è®¿é—®å¤–å±‚å˜é‡            print(f\"  å¤–å±‚å˜é‡åœ¨å†…å±‚locals()ä¸­: {'outer_var' in inner_locals}\")                        # ä½†å¯ä»¥ç›´æ¥è®¿é—®ï¼ˆé—­åŒ…ï¼‰            print(f\"  ç›´æ¥è®¿é—®å¤–å±‚å˜é‡: {outer_var}\")                        return inner_locals                print(f\"  å¤–å±‚å‡½æ•°çš„locals():\")        outer_locals = locals()        for name, value in outer_locals.items():            if not callable(value):                print(f\"    {name}: {value}\")                return inner_function()        return outer_function()scope_result = scope_trap_demo()# 4. æœ€ä½³å®è·µprint(\"\\n4. æœ€ä½³å®è·µ:\")class LocalsBestPractices:    \"\"\"locals()æœ€ä½³å®è·µ\"\"\"        @staticmethod    def safe_locals_access(var_name: str, default=None):        \"\"\"å®‰å…¨çš„locals()è®¿é—®\"\"\"        frame = inspect.currentframe().f_back        try:            return frame.f_locals.get(var_name, default)        finally:            del frame        @staticmethod    def locals_snapshot():        \"\"\"åˆ›å»ºlocals()å¿«ç…§\"\"\"        frame = inspect.currentframe().f_back        try:            return frame.f_locals.copy()        finally:            del frame        @staticmethod    def filter_locals(exclude_private=True, exclude_functions=True):        \"\"\"è¿‡æ»¤locals()å†…å®¹\"\"\"        frame = inspect.currentframe().f_back        try:            local_vars = frame.f_locals.copy()                        filtered = {}            for name, value in local_vars.items():                # æ’é™¤ç§æœ‰å˜é‡                if exclude_private and name.startswith('_'):                    continue                                # æ’é™¤å‡½æ•°                if exclude_functions and callable(value):                    continue                                filtered[name] = value                        return filtered        finally:            del frame        @staticmethod    def debug_locals_info():        \"\"\"è°ƒè¯•locals()ä¿¡æ¯\"\"\"        frame = inspect.currentframe().f_back        try:            local_vars = frame.f_locals                        info = {                'function_name': frame.f_code.co_name,                'filename': frame.f_code.co_filename,                'line_number': frame.f_lineno,                'variable_count': len(local_vars),                'variable_types': {}            }                        # ç»Ÿè®¡å˜é‡ç±»å‹            for value in local_vars.values():                type_name = type(value).__name__                info['variable_types'][type_name] = info['variable_types'].get(type_name, 0) + 1                        return info        finally:            del frame# æµ‹è¯•æœ€ä½³å®è·µdef test_best_practices():    \"\"\"æµ‹è¯•æœ€ä½³å®è·µ\"\"\"    test_var1 = \"æµ‹è¯•å€¼1\"    test_var2 = [1, 2, 3]    _private_var = \"ç§æœ‰å˜é‡\"        def local_function():        return \"å±€éƒ¨å‡½æ•°\"        print(f\"  å®‰å…¨è®¿é—®æµ‹è¯•:\")    value = LocalsBestPractices.safe_locals_access('test_var1', 'default')    print(f\"    test_var1: {value}\")        value = LocalsBestPractices.safe_locals_access('nonexistent', 'default')    print(f\"    nonexistent: {value}\")        print(f\"\\n  å¿«ç…§æµ‹è¯•:\")    snapshot = LocalsBestPractices.locals_snapshot()    print(f\"    å¿«ç…§å˜é‡æ•°é‡: {len(snapshot)}\")        print(f\"\\n  è¿‡æ»¤æµ‹è¯•:\")    filtered = LocalsBestPractices.filter_locals()    print(f\"    è¿‡æ»¤åå˜é‡: {list(filtered.keys())}\")        print(f\"\\n  è°ƒè¯•ä¿¡æ¯:\")    debug_info = LocalsBestPractices.debug_locals_info()    for key, value in debug_info.items():        print(f\"    {key}: {value}\")test_best_practices()# 5. ä¸globals()çš„æ¯”è¾ƒprint(\"\\n5. ä¸globals()çš„æ¯”è¾ƒ:\")global_comparison_var = \"å…¨å±€æ¯”è¾ƒå˜é‡\"def compare_globals_locals():    \"\"\"æ¯”è¾ƒglobals()å’Œlocals()\"\"\"    local_comparison_var = \"å±€éƒ¨æ¯”è¾ƒå˜é‡\"        print(f\"  å‡½æ•°ä¸­çš„æ¯”è¾ƒ:\")    print(f\"    locals() == globals(): {locals() == globals()}\")    print(f\"    len(locals()): {len(locals())}\")    print(f\"    len(globals()): {len(globals())}\")        print(f\"\\n  å˜é‡ä½ç½®:\")    print(f\"    'local_comparison_var' in locals(): {'local_comparison_var' in locals()}\")    print(f\"    'local_comparison_var' in globals(): {'local_comparison_var' in globals()}\")    print(f\"    'global_comparison_var' in locals(): {'global_comparison_var' in locals()}\")    print(f\"    'global_comparison_var' in globals(): {'global_comparison_var' in globals()}\")        # åœ¨æ¨¡å—çº§åˆ«çš„æ¯”è¾ƒ    return locals(), globals()func_locals, func_globals = compare_globals_locals()print(f\"\\n  æ¨¡å—çº§åˆ«çš„æ¯”è¾ƒ:\")print(f\"    locals() is globals(): {locals() is globals()}\")print(f\"    id(locals()): {id(locals())}\")print(f\"    id(globals()): {id(globals())}\")ğŸ”— ç›¸å…³å‡½æ•°å’Œæ¨¡å—å†…ç½®å‡½æ•°  globals() - è¿”å›å…¨å±€å‘½åç©ºé—´å­—å…¸  vars() - è¿”å›å¯¹è±¡çš„å±æ€§å­—å…¸  dir() - åˆ—å‡ºå¯¹è±¡çš„å±æ€§å  hasattr() - æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æŒ‡å®šå±æ€§  getattr() - è·å–å¯¹è±¡å±æ€§å€¼  setattr() - è®¾ç½®å¯¹è±¡å±æ€§å€¼  delattr() - åˆ é™¤å¯¹è±¡å±æ€§æ ‡å‡†åº“æ¨¡å—  inspect - å¯¹è±¡æ£€æŸ¥å’Œå†…çœ  types - åŠ¨æ€ç±»å‹åˆ›å»ºå’Œæ£€æŸ¥  sys - ç³»ç»Ÿç›¸å…³å‚æ•°å’Œå‡½æ•°  traceback - å¼‚å¸¸è·Ÿè¸ª  frame - å¸§å¯¹è±¡æ“ä½œç¬¬ä¸‰æ–¹åº“  varname - è·å–å˜é‡å  executing - è·å–æ‰§è¡Œä¸Šä¸‹æ–‡  stack_data - æ ˆæ•°æ®åˆ†æğŸ“š æ‰©å±•é˜…è¯»  Pythonå‘½åç©ºé—´å’Œä½œç”¨åŸŸ  å†…ç½®å‡½æ•°æ–‡æ¡£  Pythonæ‰§è¡Œæ¨¡å‹  inspectæ¨¡å—è¯¦è§£ğŸ·ï¸ æ ‡ç­¾å‘½åç©ºé—´ å±€éƒ¨å˜é‡ ä½œç”¨åŸŸ å˜é‡ç®¡ç† è°ƒè¯•å·¥å…· å†…çœ å‡½æ•°æ£€æŸ¥ åŠ¨æ€è®¿é—®",
        "url": "/docs/builtins/locals/",
        "category": "builtins",
        "tags": ["å‘½åç©ºé—´","å±€éƒ¨å˜é‡","ä½œç”¨åŸŸ","å˜é‡ç®¡ç†"]
      }
      
    
  
    
      ,
      {
        "title": "é­”æœ¯æ–¹æ³•",
        "content": "Pythoné­”æœ¯æ–¹æ³•è¯¦è§£é­”æœ¯æ–¹æ³•ï¼ˆMagic Methodsï¼‰ï¼Œä¹Ÿç§°ä¸ºç‰¹æ®Šæ–¹æ³•ï¼ˆSpecial Methodsï¼‰æˆ–åŒä¸‹åˆ’çº¿æ–¹æ³•ï¼ˆDunder Methodsï¼‰ï¼Œæ˜¯Pythonä¸­ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´å’Œç»“å°¾çš„ç‰¹æ®Šæ–¹æ³•ã€‚è¿™äº›æ–¹æ³•å®šä¹‰äº†å¯¹è±¡åœ¨ç‰¹å®šæ“ä½œä¸‹çš„è¡Œä¸ºï¼Œæ˜¯Pythoné¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæœºåˆ¶ä¹‹ä¸€ã€‚ğŸ“š å­¦ä¹ ç›®æ ‡é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†èƒ½å¤Ÿï¼š  ç†è§£é­”æœ¯æ–¹æ³•çš„æ¦‚å¿µå’Œä½œç”¨æœºåˆ¶  æŒæ¡å¸¸ç”¨é­”æœ¯æ–¹æ³•çš„ä½¿ç”¨æ–¹æ³•  å­¦ä¼šè‡ªå®šä¹‰å¯¹è±¡çš„ç‰¹æ®Šè¡Œä¸º  å®ç°å¯¹è±¡çš„è¿ç®—ç¬¦é‡è½½  æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œè¡¨ç¤ºå½¢å¼ğŸ” é­”æœ¯æ–¹æ³•æ¦‚è¿°ä»€ä¹ˆæ˜¯é­”æœ¯æ–¹æ³•é­”æœ¯æ–¹æ³•æ˜¯Pythonä¸­ä»¥åŒä¸‹åˆ’çº¿__åŒ…è£¹çš„ç‰¹æ®Šæ–¹æ³•ï¼Œå®ƒä»¬å®šä¹‰äº†å¯¹è±¡åœ¨ç‰¹å®šæ“ä½œä¸‹çš„è¡Œä¸ºã€‚å½“æˆ‘ä»¬å¯¹å¯¹è±¡æ‰§è¡ŒæŸäº›æ“ä½œæ—¶ï¼ŒPythonä¼šè‡ªåŠ¨è°ƒç”¨ç›¸åº”çš„é­”æœ¯æ–¹æ³•ã€‚class Point:    def __init__(self, x, y):        self.x = x        self.y = y        def __str__(self):        return f\"Point({self.x}, {self.y})\"        def __add__(self, other):        return Point(self.x + other.x, self.y + other.y)# åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨ __init__p1 = Point(1, 2)# æ‰“å°å¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨ __str__print(p1)  # è¾“å‡º: Point(1, 2)# å¯¹è±¡ç›¸åŠ æ—¶è‡ªåŠ¨è°ƒç”¨ __add__p2 = Point(3, 4)p3 = p1 + p2  # è‡ªåŠ¨è°ƒç”¨ p1.__add__(p2)print(p3)  # è¾“å‡º: Point(4, 6)ğŸ—ï¸ å¯¹è±¡åˆ›å»ºå’Œé”€æ¯__new__ - å¯¹è±¡æ„é€ __new__æ–¹æ³•è´Ÿè´£åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œåœ¨__init__ä¹‹å‰è°ƒç”¨ã€‚class Person:    def __new__(cls, name):        print(f\"åˆ›å»º {name} çš„å®ä¾‹\")        # å¿…é¡»è¿”å›å®ä¾‹å¯¹è±¡        return super().__new__(cls)        def __init__(self, name):        print(f\"åˆå§‹åŒ– {name}\")        self.name = name# åˆ›å»ºå¯¹è±¡p = Person(\"å¼ ä¸‰\")# è¾“å‡º:# åˆ›å»º å¼ ä¸‰ çš„å®ä¾‹# åˆå§‹åŒ– å¼ ä¸‰__init__ - å¯¹è±¡åˆå§‹åŒ–__init__æ–¹æ³•åœ¨å¯¹è±¡åˆ›å»ºåç«‹å³è°ƒç”¨ï¼Œç”¨äºåˆå§‹åŒ–å¯¹è±¡å±æ€§ã€‚class Student:    def __init__(self, name, age, grade):        \"\"\"åˆå§‹åŒ–å­¦ç”Ÿå¯¹è±¡\"\"\"        self.name = name        self.age = age        self.grade = grade        print(f\"å­¦ç”Ÿ {name} åˆå§‹åŒ–å®Œæˆ\")# åˆ›å»ºå­¦ç”Ÿå¯¹è±¡student = Student(\"æå››\", 18, \"é«˜ä¸‰\")__del__ - å¯¹è±¡é”€æ¯__del__æ–¹æ³•åœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶è°ƒç”¨ï¼Œç”¨äºæ¸…ç†èµ„æºã€‚class FileManager:    def __init__(self, filename):        self.filename = filename        self.file = open(filename, 'w')        print(f\"æ‰“å¼€æ–‡ä»¶: {filename}\")        def __del__(self):        if hasattr(self, 'file') and not self.file.closed:            self.file.close()            print(f\"å…³é—­æ–‡ä»¶: {self.filename}\")# ä½¿ç”¨ç¤ºä¾‹fm = FileManager(\"test.txt\")del fm  # æ‰‹åŠ¨åˆ é™¤ï¼Œè§¦å‘ __del__ğŸ­ å¯¹è±¡è¡¨ç¤º__str__ - ç”¨æˆ·å‹å¥½çš„å­—ç¬¦ä¸²è¡¨ç¤º__str__æ–¹æ³•å®šä¹‰å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œä¸»è¦é¢å‘æœ€ç»ˆç”¨æˆ·ã€‚class Book:    def __init__(self, title, author, price):        self.title = title        self.author = author        self.price = price        def __str__(self):        return f\"ã€Š{self.title}ã€‹ - {self.author} (Â¥{self.price})\"book = Book(\"Pythonç¼–ç¨‹\", \"å¼ ä¸‰\", 89.9)print(book)  # è¾“å‡º: ã€ŠPythonç¼–ç¨‹ã€‹ - å¼ ä¸‰ (Â¥89.9)__repr__ - å¼€å‘è€…å‹å¥½çš„å­—ç¬¦ä¸²è¡¨ç¤º__repr__æ–¹æ³•å®šä¹‰å¯¹è±¡çš„â€å®˜æ–¹â€å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œä¸»è¦é¢å‘å¼€å‘è€…ã€‚class Person:    def __init__(self, name, age):        self.name = name        self.age = age        def __str__(self):        return f\"{self.name} is {self.age} years old\"        def __repr__(self):        return f\"Person('{self.name}', {self.age})\"p = Person(\"Alice\", 25)print(str(p))   # è¾“å‡º: Alice is 25 years oldprint(repr(p))  # è¾“å‡º: Person('Alice', 25)ğŸ”¢ æ•°å€¼è¿ç®—ç®—æœ¯è¿ç®—ç¬¦é‡è½½class Vector:    def __init__(self, x, y):        self.x = x        self.y = y        def __str__(self):        return f\"Vector({self.x}, {self.y})\"        def __add__(self, other):        \"\"\"åŠ æ³•è¿ç®—\"\"\"        return Vector(self.x + other.x, self.y + other.y)        def __sub__(self, other):        \"\"\"å‡æ³•è¿ç®—\"\"\"        return Vector(self.x - other.x, self.y - other.y)        def __mul__(self, scalar):        \"\"\"æ ‡é‡ä¹˜æ³•\"\"\"        return Vector(self.x * scalar, self.y * scalar)        def __truediv__(self, scalar):        \"\"\"æ ‡é‡é™¤æ³•\"\"\"        return Vector(self.x / scalar, self.y / scalar)# ä½¿ç”¨ç¤ºä¾‹v1 = Vector(3, 4)v2 = Vector(1, 2)print(v1 + v2)  # è¾“å‡º: Vector(4, 6)print(v1 - v2)  # è¾“å‡º: Vector(2, 2)print(v1 * 2)   # è¾“å‡º: Vector(6, 8)print(v1 / 2)   # è¾“å‡º: Vector(1.5, 2.0)ğŸ” æ¯”è¾ƒè¿ç®—æ¯”è¾ƒè¿ç®—ç¬¦é‡è½½class Student:    def __init__(self, name, score):        self.name = name        self.score = score        def __str__(self):        return f\"{self.name}({self.score}åˆ†)\"        def __eq__(self, other):        \"\"\"ç­‰äºæ¯”è¾ƒ\"\"\"        return self.score == other.score        def __lt__(self, other):        \"\"\"å°äºæ¯”è¾ƒ\"\"\"        return self.score &lt; other.score        def __le__(self, other):        \"\"\"å°äºç­‰äºæ¯”è¾ƒ\"\"\"        return self.score &lt;= other.score        def __gt__(self, other):        \"\"\"å¤§äºæ¯”è¾ƒ\"\"\"        return self.score &gt; other.score        def __ge__(self, other):        \"\"\"å¤§äºç­‰äºæ¯”è¾ƒ\"\"\"        return self.score &gt;= other.score# ä½¿ç”¨ç¤ºä¾‹s1 = Student(\"å¼ ä¸‰\", 85)s2 = Student(\"æå››\", 92)print(s1 &lt; s2)   # Trueprint(s1 == s2)  # Falseprint(s2 &gt; s1)   # True# å¯ä»¥ç›´æ¥æ’åºstudents = [s1, s2, Student(\"ç‹äº”\", 78)]students.sort()for student in students:    print(student)ğŸ“¦ å®¹å™¨è¡Œä¸º__len__ - é•¿åº¦è·å–class Playlist:    def __init__(self):        self.songs = []        def add_song(self, song):        self.songs.append(song)        def __len__(self):        return len(self.songs)        def __str__(self):        return f\"æ’­æ”¾åˆ—è¡¨({len(self)}é¦–æ­Œæ›²)\"playlist = Playlist()playlist.add_song(\"æ­Œæ›²1\")playlist.add_song(\"æ­Œæ›²2\")print(len(playlist))  # è¾“å‡º: 2print(playlist)       # è¾“å‡º: æ’­æ”¾åˆ—è¡¨(2é¦–æ­Œæ›²)__getitem__ å’Œ __setitem__ - ç´¢å¼•è®¿é—®class Matrix:    def __init__(self, rows, cols):        self.rows = rows        self.cols = cols        self.data = [[0] * cols for _ in range(rows)]        def __getitem__(self, key):        \"\"\"è·å–å…ƒç´ \"\"\"        row, col = key        return self.data[row][col]        def __setitem__(self, key, value):        \"\"\"è®¾ç½®å…ƒç´ \"\"\"        row, col = key        self.data[row][col] = value        def __str__(self):        return '\\n'.join([' '.join(map(str, row)) for row in self.data])# ä½¿ç”¨ç¤ºä¾‹matrix = Matrix(3, 3)matrix[0, 0] = 1matrix[1, 1] = 2matrix[2, 2] = 3print(matrix[0, 0])  # è¾“å‡º: 1print(matrix)# è¾“å‡º:# 1 0 0# 0 2 0# 0 0 3ğŸ¯ å…¶ä»–é‡è¦é­”æœ¯æ–¹æ³•__call__ - å¯è°ƒç”¨å¯¹è±¡class Multiplier:    def __init__(self, factor):        self.factor = factor        def __call__(self, value):        return value * self.factor# åˆ›å»ºä¹˜æ³•å™¨double = Multiplier(2)triple = Multiplier(3)# åƒå‡½æ•°ä¸€æ ·è°ƒç”¨å¯¹è±¡print(double(5))  # è¾“å‡º: 10print(triple(4))  # è¾“å‡º: 12__bool__ - å¸ƒå°”å€¼è½¬æ¢class BankAccount:    def __init__(self, balance=0):        self.balance = balance        def __bool__(self):        \"\"\"è´¦æˆ·æœ‰ä½™é¢æ—¶è¿”å›True\"\"\"        return self.balance &gt; 0        def __str__(self):        return f\"è´¦æˆ·ä½™é¢: Â¥{self.balance}\"# ä½¿ç”¨ç¤ºä¾‹account1 = BankAccount(100)account2 = BankAccount(0)if account1:    print(\"è´¦æˆ·1æœ‰ä½™é¢\")if not account2:    print(\"è´¦æˆ·2æ²¡æœ‰ä½™é¢\")__hash__ - å“ˆå¸Œå€¼è®¡ç®—class Person:    def __init__(self, name, age):        self.name = name        self.age = age        def __hash__(self):        return hash((self.name, self.age))        def __eq__(self, other):        if isinstance(other, Person):            return self.name == other.name and self.age == other.age        return False        def __str__(self):        return f\"{self.name}({self.age}å²)\"# ä½¿ç”¨ç¤ºä¾‹p1 = Person(\"å¼ ä¸‰\", 25)p2 = Person(\"å¼ ä¸‰\", 25)p3 = Person(\"æå››\", 30)# å¯ä»¥ä½œä¸ºå­—å…¸é”®æˆ–é›†åˆå…ƒç´ people_set = {p1, p2, p3}  # p1å’Œp2è¢«è®¤ä¸ºæ˜¯åŒä¸€ä¸ªäººprint(f\"é›†åˆä¸­æœ‰ {len(people_set)} ä¸ªä¸åŒçš„äºº\")  # è¾“å‡º: 2ğŸ¨ å®é™…åº”ç”¨æ¡ˆä¾‹æ¡ˆä¾‹1ï¼šè‡ªå®šä¹‰æ•°å­—ç±»class Money:    \"\"\"è´§å¸ç±»ï¼Œæ”¯æŒå„ç§è¿ç®—\"\"\"        def __init__(self, amount, currency=\"CNY\"):        self.amount = amount        self.currency = currency        def __str__(self):        symbols = {\"CNY\": \"Â¥\", \"USD\": \"$\", \"EUR\": \"â‚¬\"}        symbol = symbols.get(self.currency, self.currency)        return f\"{symbol}{self.amount:.2f}\"        def __repr__(self):        return f\"Money({self.amount}, '{self.currency}')\"        def __add__(self, other):        if isinstance(other, Money):            if self.currency != other.currency:                raise ValueError(\"ä¸èƒ½ç›´æ¥ç›¸åŠ ä¸åŒè´§å¸\")            return Money(self.amount + other.amount, self.currency)        return Money(self.amount + other, self.currency)        def __sub__(self, other):        if isinstance(other, Money):            if self.currency != other.currency:                raise ValueError(\"ä¸èƒ½ç›´æ¥ç›¸å‡ä¸åŒè´§å¸\")            return Money(self.amount - other.amount, self.currency)        return Money(self.amount - other, self.currency)        def __mul__(self, factor):        return Money(self.amount * factor, self.currency)        def __truediv__(self, divisor):        return Money(self.amount / divisor, self.currency)        def __eq__(self, other):        return (isinstance(other, Money) and                 self.amount == other.amount and                 self.currency == other.currency)        def __lt__(self, other):        if isinstance(other, Money) and self.currency == other.currency:            return self.amount &lt; other.amount        raise ValueError(\"æ— æ³•æ¯”è¾ƒä¸åŒè´§å¸\")        def __bool__(self):        return self.amount &gt; 0# ä½¿ç”¨ç¤ºä¾‹price1 = Money(99.99)price2 = Money(50.00)print(f\"å•†å“1: {price1}\")  # è¾“å‡º: å•†å“1: Â¥99.99print(f\"å•†å“2: {price2}\")  # è¾“å‡º: å•†å“2: Â¥50.00print(f\"æ€»ä»·: {price1 + price2}\")  # è¾“å‡º: æ€»ä»·: Â¥149.99print(f\"å·®ä»·: {price1 - price2}\")  # è¾“å‡º: å·®ä»·: Â¥49.99print(f\"æ‰“8æŠ˜: {price1 * 0.8}\")  # è¾“å‡º: æ‰“8æŠ˜: Â¥79.99æ¡ˆä¾‹2ï¼šæ™ºèƒ½åˆ—è¡¨ç±»class SmartList:    \"\"\"æ™ºèƒ½åˆ—è¡¨ï¼Œæä¾›é¢å¤–åŠŸèƒ½\"\"\"        def __init__(self, items=None):        self.items = list(items) if items else []        def __str__(self):        return f\"SmartList({self.items})\"        def __len__(self):        return len(self.items)        def __getitem__(self, index):        return self.items[index]        def __setitem__(self, index, value):        self.items[index] = value        def __contains__(self, item):        return item in self.items        def __iter__(self):        return iter(self.items)        def __add__(self, other):        if isinstance(other, SmartList):            return SmartList(self.items + other.items)        elif isinstance(other, list):            return SmartList(self.items + other)        else:            return SmartList(self.items + [other])        def __bool__(self):        return len(self.items) &gt; 0        def append(self, item):        self.items.append(item)        def remove(self, item):        self.items.remove(item)        @property    def unique(self):        \"\"\"è·å–å»é‡åçš„åˆ—è¡¨\"\"\"        return SmartList(list(set(self.items)))        @property    def reversed(self):        \"\"\"è·å–åè½¬åçš„åˆ—è¡¨\"\"\"        return SmartList(self.items[::-1])# ä½¿ç”¨ç¤ºä¾‹smart_list = SmartList([1, 2, 3, 2, 4, 3])print(f\"åŸåˆ—è¡¨: {smart_list}\")print(f\"é•¿åº¦: {len(smart_list)}\")print(f\"åŒ…å«2: {2 in smart_list}\")print(f\"å»é‡: {smart_list.unique}\")print(f\"åè½¬: {smart_list.reversed}\")# åˆ—è¡¨æ“ä½œsmart_list += [5, 6]print(f\"æ·»åŠ å: {smart_list}\")ğŸ“ æœ€ä½³å®è·µ1. é­”æœ¯æ–¹æ³•çš„ä¸€è‡´æ€§class Point:    def __init__(self, x, y):        self.x = x        self.y = y        def __eq__(self, other):        if isinstance(other, Point):            return self.x == other.x and self.y == other.y        return False        def __hash__(self):        # å¦‚æœå®ç°äº†__eq__ï¼Œé€šå¸¸ä¹Ÿè¦å®ç°__hash__        return hash((self.x, self.y))        def __str__(self):        return f\"Point({self.x}, {self.y})\"        def __repr__(self):        # __repr__åº”è¯¥è¿”å›å¯ä»¥é‡æ–°åˆ›å»ºå¯¹è±¡çš„å­—ç¬¦ä¸²        return f\"Point({self.x}, {self.y})\"2. é”™è¯¯å¤„ç†class SafeList:    def __init__(self, items=None):        self.items = list(items) if items else []        def __getitem__(self, index):        try:            return self.items[index]        except IndexError:            return None  # è¿”å›Noneè€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸        def __setitem__(self, index, value):        # è‡ªåŠ¨æ‰©å±•åˆ—è¡¨        while len(self.items) &lt;= index:            self.items.append(None)        self.items[index] = value3. æ€§èƒ½è€ƒè™‘class EfficientContainer:    def __init__(self):        self._items = []        self._length = 0  # ç¼“å­˜é•¿åº¦        def __len__(self):        return self._length  # ç›´æ¥è¿”å›ç¼“å­˜çš„é•¿åº¦        def append(self, item):        self._items.append(item)        self._length += 1  # æ›´æ–°ç¼“å­˜        def remove(self, item):        self._items.remove(item)        self._length -= 1  # æ›´æ–°ç¼“å­˜ğŸ”— æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - ç‰¹æ®Šæ–¹æ³•  Pythoné­”æœ¯æ–¹æ³•å®Œæ•´åˆ—è¡¨  è¿ç®—ç¬¦é‡è½½æœ€ä½³å®è·µ  å®¹å™¨ç±»å‹çš„å®ç°é­”æœ¯æ–¹æ³•æ˜¯Pythoné¢å‘å¯¹è±¡ç¼–ç¨‹çš„å¼ºå¤§å·¥å…·ï¼Œé€šè¿‡åˆç†ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œå¯ä»¥è®©è‡ªå®šä¹‰ç±»çš„è¡Œä¸ºæ›´åŠ è‡ªç„¶å’Œç›´è§‚ã€‚è®°ä½è¦ä¿æŒæ–¹æ³•ä¹‹é—´çš„ä¸€è‡´æ€§ï¼Œå¹¶è€ƒè™‘æ€§èƒ½å’Œé”™è¯¯å¤„ç†ã€‚",
        "url": "/docs/basics/magic-methods/",
        "category": "basics",
        "tags": ["Python","é¢å‘å¯¹è±¡","é­”æœ¯æ–¹æ³•","ç‰¹æ®Šæ–¹æ³•"]
      }
      
    
  
    
      ,
      {
        "title": "map() - æ˜ å°„å‡½æ•°",
        "content": "map() - æ˜ å°„å‡½æ•°ğŸ“ æ¦‚è¿°map() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºå°†æŒ‡å®šå‡½æ•°åº”ç”¨åˆ°å¯è¿­ä»£å¯¹è±¡çš„æ¯ä¸ªå…ƒç´ ä¸Šã€‚å®ƒè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œäº§ç”Ÿå‡½æ•°è°ƒç”¨çš„ç»“æœã€‚map()æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„é‡è¦å·¥å…·ï¼Œå¯ä»¥ç®€åŒ–å¯¹åºåˆ—çš„æ‰¹é‡å¤„ç†æ“ä½œã€‚1ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡map()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£map()ä¸å¾ªç¯çš„åŒºåˆ«å’Œä¼˜åŠ¿  å­¦ä¼šä½¿ç”¨map()è¿›è¡Œæ•°æ®è½¬æ¢  äº†è§£map()åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„åº”ç”¨ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨  å¯è¿­ä»£å¯¹è±¡çš„æ¦‚å¿µ  lambdaè¡¨è¾¾å¼çš„åŸºæœ¬ä½¿ç”¨ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µmap() å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªæˆ–å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå°†å‡½æ•°åº”ç”¨åˆ°æ¯ä¸ªå¯è¿­ä»£å¯¹è±¡çš„å¯¹åº”å…ƒç´ ä¸Šï¼Œè¿”å›ä¸€ä¸ªmapå¯¹è±¡ï¼ˆè¿­ä»£å™¨ï¼‰ã€‚è¯­æ³•æ ¼å¼map(function, iterable, ...)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  function      callable      æ˜¯      æ—       è¦åº”ç”¨çš„å‡½æ•°              iterable      iterable      æ˜¯      æ—       ä¸€ä¸ªæˆ–å¤šä¸ªå¯è¿­ä»£å¯¹è±¡      è¿”å›å€¼            ç±»å‹      è¯´æ˜                  map      è¿­ä»£å™¨ï¼Œäº§ç”Ÿå‡½æ•°åº”ç”¨ç»“æœ      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# åŸºæœ¬æ˜ å°„æ“ä½œnumbers = [1, 2, 3, 4, 5]squared = map(lambda x: x**2, numbers)print(list(squared))  # [1, 4, 9, 16, 25]# ä½¿ç”¨å†…ç½®å‡½æ•°strings = ['1', '2', '3', '4', '5']integers = map(int, strings)print(list(integers))  # [1, 2, 3, 4, 5]# å­—ç¬¦ä¸²æ“ä½œwords = ['hello', 'world', 'python']uppercase = map(str.upper, words)print(list(uppercase))  # ['HELLO', 'WORLD', 'PYTHON']# è‡ªå®šä¹‰å‡½æ•°def double(x):    return x * 2numbers = [1, 2, 3, 4]doubled = map(double, numbers)print(list(doubled))  # [2, 4, 6, 8]# å¤šä¸ªå¯è¿­ä»£å¯¹è±¡numbers1 = [1, 2, 3, 4]numbers2 = [10, 20, 30, 40]sums = map(lambda x, y: x + y, numbers1, numbers2)print(list(sums))  # [11, 22, 33, 44]é«˜çº§ç”¨æ³•# å¤æ‚æ•°æ®ç»“æ„çš„å¤„ç†students = [    {'name': 'å¼ ä¸‰', 'score': 85},    {'name': 'æå››', 'score': 92},    {'name': 'ç‹äº”', 'score': 78}]# æå–å§“ånames = map(lambda student: student['name'], students)print(list(names))  # ['å¼ ä¸‰', 'æå››', 'ç‹äº”']# è®¡ç®—ç­‰çº§def get_grade(score):    if score &gt;= 90:        return 'A'    elif score &gt;= 80:        return 'B'    elif score &gt;= 70:        return 'C'    else:        return 'D'scores = [85, 92, 78, 95, 67]grades = map(get_grade, scores)print(list(grades))  # ['B', 'A', 'C', 'A', 'D']# åµŒå¥—åˆ—è¡¨å¤„ç†matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]# è®¡ç®—æ¯è¡Œçš„å’Œrow_sums = map(sum, matrix)print(list(row_sums))  # [6, 15, 24]# å­—ç¬¦ä¸²æ ¼å¼åŒ–data = [('å¼ ä¸‰', 25), ('æå››', 30), ('ç‹äº”', 35)]formatted = map(lambda item: f\"{item[0]}ä»Šå¹´{item[1]}å²\", data)print(list(formatted))# ['å¼ ä¸‰ä»Šå¹´25å²', 'æå››ä»Šå¹´30å²', 'ç‹äº”ä»Šå¹´35å²']# æ¡ä»¶æ˜ å°„numbers = [1, 2, 3, 4, 5, 6]# å¶æ•°ä¹˜ä»¥2ï¼Œå¥‡æ•°ä¹˜ä»¥3result = map(lambda x: x * 2 if x % 2 == 0 else x * 3, numbers)print(list(result))  # [3, 4, 9, 8, 15, 12]å®é™…æ¡ˆä¾‹# æ•°æ®æ¸…æ´—å’Œè½¬æ¢def clean_phone_number(phone):    \"\"\"æ¸…ç†ç”µè¯å·ç æ ¼å¼\"\"\"    # ç§»é™¤æ‰€æœ‰éæ•°å­—å­—ç¬¦    cleaned = ''.join(filter(str.isdigit, phone))    # æ ¼å¼åŒ–ä¸ºæ ‡å‡†æ ¼å¼    if len(cleaned) == 11:        return f\"{cleaned[:3]}-{cleaned[3:7]}-{cleaned[7:]}\"    return cleanedraw_phones = ['138-1234-5678', '(139)2345-6789', '150 3456 7890']cleaned_phones = map(clean_phone_number, raw_phones)print(list(cleaned_phones))# ['138-1234-5678', '139-2345-6789', '150-3456-7890']# æ–‡ä»¶å¤„ç†def process_log_line(line):    \"\"\"å¤„ç†æ—¥å¿—è¡Œ\"\"\"    parts = line.strip().split(' ')    if len(parts) &gt;= 3:        timestamp = parts[0]        level = parts[1]        message = ' '.join(parts[2:])        return {            'timestamp': timestamp,            'level': level,            'message': message        }    return Nonelog_lines = [    '2024-01-15 INFO ç³»ç»Ÿå¯åŠ¨æˆåŠŸ',    '2024-01-15 ERROR æ•°æ®åº“è¿æ¥å¤±è´¥',    '2024-01-15 DEBUG å¤„ç†ç”¨æˆ·è¯·æ±‚']processed_logs = map(process_log_line, log_lines)for log in processed_logs:    if log:        print(f\"[{log['level']}] {log['message']}\")# æ•°å­¦è®¡ç®—import math# è®¡ç®—åœ†çš„é¢ç§¯radii = [1, 2, 3, 4, 5]areas = map(lambda r: math.pi * r**2, radii)print([f\"{area:.2f}\" for area in areas])# ['3.14', '12.57', '28.27', '50.27', '78.54']# æ¸©åº¦è½¬æ¢def celsius_to_fahrenheit(celsius):    \"\"\"æ‘„æ°åº¦è½¬åæ°åº¦\"\"\"    return celsius * 9/5 + 32celsius_temps = [0, 10, 20, 30, 40]fahrenheit_temps = map(celsius_to_fahrenheit, celsius_temps)print(list(fahrenheit_temps))  # [32.0, 50.0, 68.0, 86.0, 104.0]# æ•°æ®éªŒè¯def validate_email(email):    \"\"\"ç®€å•çš„é‚®ç®±éªŒè¯\"\"\"    return '@' in email and '.' in email.split('@')[1]emails = ['user@example.com', 'invalid-email', 'test@domain.org']valid_flags = map(validate_email, emails)for email, is_valid in zip(emails, valid_flags):    status = \"æœ‰æ•ˆ\" if is_valid else \"æ— æ•ˆ\"    print(f\"{email}: {status}\")# æ‰¹é‡APIè°ƒç”¨æ¨¡æ‹Ÿdef get_user_info(user_id):    \"\"\"æ¨¡æ‹Ÿè·å–ç”¨æˆ·ä¿¡æ¯\"\"\"    # è¿™é‡Œæ¨¡æ‹ŸAPIè°ƒç”¨    return {        'id': user_id,        'name': f'ç”¨æˆ·{user_id}',        'status': 'active' if user_id % 2 == 0 else 'inactive'    }user_ids = [1, 2, 3, 4, 5]user_infos = map(get_user_info, user_ids)for info in user_infos:    print(f\"ç”¨æˆ·{info['id']}: {info['name']} ({info['status']})\")âš ï¸ æ³¨æ„äº‹é¡¹  map() è¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œåªèƒ½éå†ä¸€æ¬¡  å½“æœ‰å¤šä¸ªå¯è¿­ä»£å¯¹è±¡æ—¶ï¼Œä»¥æœ€çŸ­çš„ä¸ºå‡†  map() æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œåªåœ¨éœ€è¦æ—¶æ‰è®¡ç®—ç»“æœ  å¯¹äºç®€å•æ“ä½œï¼Œåˆ—è¡¨æ¨å¯¼å¼å¯èƒ½æ›´ç›´è§‚# è¿­ä»£å™¨ç‰¹æ€§numbers = [1, 2, 3, 4]map_obj = map(lambda x: x**2, numbers)# ç¬¬ä¸€æ¬¡ä½¿ç”¨print(list(map_obj))  # [1, 4, 9, 16]# ç¬¬äºŒæ¬¡ä½¿ç”¨ï¼ˆç©ºç»“æœï¼‰print(list(map_obj))  # []# é•¿åº¦ä¸åŒçš„å¯è¿­ä»£å¯¹è±¡list1 = [1, 2, 3, 4, 5]list2 = [10, 20, 30]result = map(lambda x, y: x + y, list1, list2)print(list(result))  # [11, 22, 33] (åªå¤„ç†3ä¸ªå…ƒç´ )# map() vs åˆ—è¡¨æ¨å¯¼å¼numbers = [1, 2, 3, 4, 5]# ä½¿ç”¨map()squared_map = map(lambda x: x**2, numbers)print(list(squared_map))# ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ï¼ˆé€šå¸¸æ›´ç›´è§‚ï¼‰squared_list = [x**2 for x in numbers]print(squared_list)# å¯¹äºå¤æ‚æ“ä½œï¼Œmap()å¯èƒ½æ›´æ¸…æ™°def complex_transform(x):    # å¤æ‚çš„è½¬æ¢é€»è¾‘    result = x**2 + 2*x + 1    return result if result &gt; 10 else 0# ä½¿ç”¨map()æ›´æ¸…æ™°transformed = map(complex_transform, numbers)print(list(transformed))ğŸ”— ç›¸å…³å†…å®¹  filter() - è¿‡æ»¤å‡½æ•°  reduce() - å½’çº¦å‡½æ•°  zip() - æ‰“åŒ…å‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - map()  Pythonå‡½æ•°å¼ç¼–ç¨‹  åˆ—è¡¨æ¨å¯¼å¼ vs map()ğŸ·ï¸ æ ‡ç­¾æ˜ å°„ å‡½æ•°å¼ç¼–ç¨‹ è¿­ä»£ æ•°æ®è½¬æ¢ æ‰¹é‡å¤„ç†æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/map/",
        "category": "builtins",
        "tags": ["æ˜ å°„","å‡½æ•°å¼ç¼–ç¨‹","è¿­ä»£"]
      }
      
    
  
    
      ,
      {
        "title": "match-caseè¯­å¥",
        "content": "match-caseè¯­å¥æ¦‚è¿°Python 3.10 å¼•å…¥äº† match-case è¯­å¥ï¼Œè¿™æ˜¯ä¸€ç§å¼ºå¤§çš„ç»“æ„åŒ¹é…æ¨¡å¼ï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ switch-case è¯­å¥ï¼Œä½†åŠŸèƒ½æ›´åŠ å¼ºå¤§å’Œçµæ´»ã€‚match-case ä¸ä»…å¯ä»¥è¿›è¡Œç®€å•çš„å€¼åŒ¹é…ï¼Œè¿˜æ”¯æŒå¤æ‚çš„æ¨¡å¼åŒ¹é…ï¼ŒåŒ…æ‹¬åºåˆ—åŒ¹é…ã€å­—å…¸åŒ¹é…ã€ç±»å‹åŒ¹é…ç­‰ã€‚å­¦ä¹ ç›®æ ‡é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†æŒæ¡ï¼š  match-case è¯­å¥çš„åŸºæœ¬è¯­æ³•  æ ‡é‡åŒ¹é…å’Œå¤šå€¼åŒ¹é…  åºåˆ—å’Œå­—å…¸çš„æ¨¡å¼åŒ¹é…  ç±»å‹åŒ¹é…å’Œè‡ªå®šä¹‰ç±»åŒ¹é…  é€šé…ç¬¦å’Œå˜é‡ç»‘å®šçš„ä½¿ç”¨  match-case çš„é«˜çº§ç‰¹æ€§å‰ç½®çŸ¥è¯†  Python åŸºç¡€è¯­æ³•  æ•°æ®ç±»å‹ï¼ˆåˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ç­‰ï¼‰  ç±»å’Œå¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µè¯¦ç»†å†…å®¹åŸºæœ¬è¯­æ³•match subject:    case &lt;pattern_1&gt;:        &lt;action_1&gt;    case &lt;pattern_2&gt;:        &lt;action_2&gt;    case &lt;pattern_3&gt;:        &lt;action_3&gt;    case _:        &lt;action_wildcard&gt;case _: ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ default:ï¼Œå½“å…¶ä»– case éƒ½æ— æ³•åŒ¹é…æ—¶æ‰§è¡Œã€‚æ ‡é‡åŒ¹é…æ ‡é‡åŒ¹é…æ˜¯æœ€åŸºæœ¬çš„åŒ¹é…æ–¹å¼ï¼Œåªèƒ½ä½¿ç”¨å¸¸é‡ï¼Œä¸èƒ½ä½¿ç”¨å˜é‡ï¼šdef http_error(status):    match status:        case 400:            return \"Bad request\"        case 404:            return \"Not found\"        case 418:            return \"I'm a teapot\"        case _:            return \"Something's wrong with the internet\"print(http_error(404))  # è¾“å‡º: Not foundå¤šå€¼åŒ¹é…ä¸€ä¸ª case å¯ä»¥åŒ¹é…å¤šä¸ªå€¼ï¼Œä½¿ç”¨ | åˆ†éš”ï¼šdef check_status(status):    match status:        case 401 | 403 | 404:            return \"Not allowed\"        case 500 | 502 | 503:            return \"Server error\"        case _:            return \"Unknown status\"print(check_status(403))  # è¾“å‡º: Not allowedåºåˆ—åŒ¹é…å…ƒç»„å’Œåˆ—è¡¨åŒ¹é…def analyze_point(point):    match point:        case (0, 0):            print(\"åæ ‡åŸç‚¹\")        case (0, y):            print(f\"Yè½´ä¸Šçš„ç‚¹ï¼ŒY={y}\")        case (x, 0):            print(f\"Xè½´ä¸Šçš„ç‚¹ï¼ŒX={x}\")        case (x, y) if x &gt; 0 and y &gt; 0:            print(f\"ç¬¬ä¸€è±¡é™çš„ç‚¹ï¼š({x}, {y})\")        case (x, y):            print(f\"å…¶ä»–è±¡é™çš„ç‚¹ï¼š({x}, {y})\")        case _:            print(\"ä¸æ˜¯äºŒç»´åæ ‡ç‚¹\")analyze_point((0, 0))    # åæ ‡åŸç‚¹analyze_point((3, 4))    # ç¬¬ä¸€è±¡é™çš„ç‚¹ï¼š(3, 4)analyze_point([0, 5])    # Yè½´ä¸Šçš„ç‚¹ï¼ŒY=5é€šé…ç¬¦ä½¿ç”¨def process_sequence(data):    match data:        case [x, *rest]:  # åŒ¹é…è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ çš„åˆ—è¡¨            print(f\"ç¬¬ä¸€ä¸ªå…ƒç´ : {x}, å…¶ä½™å…ƒç´ : {rest}\")        case [x, y, *_]:  # åŒ¹é…è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´ çš„åˆ—è¡¨            print(f\"å‰ä¸¤ä¸ªå…ƒç´ : {x}, {y}\")        case []:            print(\"ç©ºåˆ—è¡¨\")        case _:            print(\"å…¶ä»–ç±»å‹\")process_sequence([1, 2, 3, 4])  # ç¬¬ä¸€ä¸ªå…ƒç´ : 1, å…¶ä½™å…ƒç´ : [2, 3, 4]process_sequence([])            # ç©ºåˆ—è¡¨å­—å…¸åŒ¹é…å­—å…¸åŒ¹é…åªéœ€è¦åŒ…å«æŒ‡å®šçš„é”®å€¼å¯¹å³å¯ï¼Œå¯ä»¥æœ‰é¢å¤–çš„é”®ï¼šdef process_user(user_data):    match user_data:        case {'name': name, 'age': age} if age &gt;= 18:            print(f\"æˆå¹´ç”¨æˆ·: {name}, å¹´é¾„: {age}\")        case {'name': name, 'age': age}:            print(f\"æœªæˆå¹´ç”¨æˆ·: {name}, å¹´é¾„: {age}\")        case {'name': name, **rest}:            print(f\"ç”¨æˆ·: {name}, å…¶ä»–ä¿¡æ¯: {rest}\")        case _:            print(\"æ— æ•ˆçš„ç”¨æˆ·æ•°æ®\")process_user({'name': 'Alice', 'age': 25, 'city': 'Beijing'})# è¾“å‡º: æˆå¹´ç”¨æˆ·: Alice, å¹´é¾„: 25ç±»å‹åŒ¹é…def process_data(data):    match data:        case int() if data &gt; 0:            print(f\"æ­£æ•´æ•°: {data}\")        case int():            print(f\"éæ­£æ•´æ•°: {data}\")        case str() if len(data) &gt; 0:            print(f\"éç©ºå­—ç¬¦ä¸²: {data}\")        case list() as items:            print(f\"åˆ—è¡¨ï¼ŒåŒ…å« {len(items)} ä¸ªå…ƒç´ \")        case dict() as mapping:            print(f\"å­—å…¸ï¼ŒåŒ…å« {len(mapping)} ä¸ªé”®\")        case _:            print(f\"å…¶ä»–ç±»å‹: {type(data)}\")process_data(42)        # æ­£æ•´æ•°: 42process_data(\"hello\")   # éç©ºå­—ç¬¦ä¸²: helloprocess_data([1, 2, 3]) # åˆ—è¡¨ï¼ŒåŒ…å« 3 ä¸ªå…ƒç´ è‡ªå®šä¹‰ç±»åŒ¹é…class Point:    def __init__(self, x, y):        self.x = x        self.y = yclass Circle:    def __init__(self, center, radius):        self.center = center        self.radius = radiusdef analyze_shape(shape):    match shape:        case Point(x=0, y=0):            print(\"åŸç‚¹\")        case Point(x=x, y=y):            print(f\"ç‚¹åæ ‡: ({x}, {y})\")        case Circle(center=Point(x=0, y=0), radius=r):            print(f\"ä»¥åŸç‚¹ä¸ºåœ†å¿ƒï¼ŒåŠå¾„ä¸º {r} çš„åœ†\")        case Circle(center=center, radius=r):            print(f\"åœ†å¿ƒåœ¨ ({center.x}, {center.y})ï¼ŒåŠå¾„ä¸º {r} çš„åœ†\")        case _:            print(\"æœªçŸ¥å½¢çŠ¶\")analyze_shape(Point(3, 4))  # ç‚¹åæ ‡: (3, 4)analyze_shape(Circle(Point(0, 0), 5))  # ä»¥åŸç‚¹ä¸ºåœ†å¿ƒï¼ŒåŠå¾„ä¸º 5 çš„åœ†AS æ¨¡å¼AS æ¨¡å¼ç”¨äºåœ¨åŒ¹é…çš„åŒæ—¶è¿›è¡Œå˜é‡ç»‘å®šï¼šdef process_nested_data(data):    match data:        case {'user': {'name': str() as name, 'age': int() as age}}:            print(f\"ç”¨æˆ·ä¿¡æ¯ - å§“å: {name}, å¹´é¾„: {age}\")        case [int() as first, *rest] if len(rest) &gt; 0:            print(f\"æ•°å­—åˆ—è¡¨ - ç¬¬ä¸€ä¸ª: {first}, å…¶ä½™: {rest}\")        case str() as text if len(text) &gt; 10:            print(f\"é•¿å­—ç¬¦ä¸²: {text[:10]}...\")        case _:            print(\"å…¶ä»–æ•°æ®\")process_nested_data({'user': {'name': 'Bob', 'age': 30}})# è¾“å‡º: ç”¨æˆ·ä¿¡æ¯ - å§“å: Bob, å¹´é¾„: 30æ¡ä»¶åŒ¹é…å¯ä»¥åœ¨ case åæ·»åŠ  if æ¡ä»¶ï¼šdef grade_score(score):    match score:        case x if x &gt;= 90:            return \"ä¼˜ç§€\"        case x if x &gt;= 80:            return \"è‰¯å¥½\"        case x if x &gt;= 70:            return \"ä¸­ç­‰\"        case x if x &gt;= 60:            return \"åŠæ ¼\"        case _:            return \"ä¸åŠæ ¼\"print(grade_score(85))  # è¾“å‡º: è‰¯å¥½å®é™…åº”ç”¨åœºæ™¯1. å‘½ä»¤è¡Œå‚æ•°å¤„ç†def handle_command(command):    match command:        case ['help']:            print(\"æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯\")        case ['list', '--all']:            print(\"åˆ—å‡ºæ‰€æœ‰é¡¹ç›®\")        case ['list', category]:            print(f\"åˆ—å‡º {category} ç±»åˆ«çš„é¡¹ç›®\")        case ['create', name, '--type', type_name]:            print(f\"åˆ›å»ºç±»å‹ä¸º {type_name} çš„ {name}\")        case ['delete', name] if name != 'important':            print(f\"åˆ é™¤ {name}\")        case _:            print(\"æœªçŸ¥å‘½ä»¤\")handle_command(['create', 'myproject', '--type', 'web'])# è¾“å‡º: åˆ›å»ºç±»å‹ä¸º web çš„ myproject2. JSON æ•°æ®å¤„ç†def process_api_response(response):    match response:        case {'status': 'success', 'data': data}:            return f\"æˆåŠŸè·å–æ•°æ®: {len(data)} æ¡è®°å½•\"        case {'status': 'error', 'message': msg, 'code': code}:            return f\"é”™è¯¯ {code}: {msg}\"        case {'status': 'pending', 'progress': progress}:            return f\"å¤„ç†ä¸­... {progress}%\"        case _:            return \"æœªçŸ¥å“åº”æ ¼å¼\"response1 = {'status': 'success', 'data': [1, 2, 3]}print(process_api_response(response1))  # æˆåŠŸè·å–æ•°æ®: 3 æ¡è®°å½•3. çŠ¶æ€æœºå®ç°class StateMachine:    def __init__(self):        self.state = 'idle'        self.data = None        def process_event(self, event):        match (self.state, event):            case ('idle', 'start'):                self.state = 'running'                print(\"çŠ¶æ€æœºå¯åŠ¨\")            case ('running', 'pause'):                self.state = 'paused'                print(\"çŠ¶æ€æœºæš‚åœ\")            case ('paused', 'resume'):                self.state = 'running'                print(\"çŠ¶æ€æœºæ¢å¤\")            case ('running' | 'paused', 'stop'):                self.state = 'idle'                print(\"çŠ¶æ€æœºåœæ­¢\")            case _:                print(f\"æ— æ•ˆçš„çŠ¶æ€è½¬æ¢: {self.state} -&gt; {event}\")sm = StateMachine()sm.process_event('start')   # çŠ¶æ€æœºå¯åŠ¨sm.process_event('pause')   # çŠ¶æ€æœºæš‚åœsm.process_event('resume')  # çŠ¶æ€æœºæ¢å¤å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ1. å˜é‡ç»‘å®šæ³¨æ„äº‹é¡¹# é”™è¯¯ï¼šå˜é‡ä¸èƒ½ä½œä¸ºåŒ¹é…æ¨¡å¼# error_code = 500# match status:#     case error_code:  # è¿™ä¼šæŠ¥é”™#         return \"Server Error\"# æ­£ç¡®ï¼šä½¿ç”¨å¸¸é‡æˆ–æ¡ä»¶match status:    case x if x == 500:        return \"Server Error\"2. åŒ¹é…é¡ºåºå¾ˆé‡è¦def check_number(x):    match x:        case n if n &gt; 0:            return \"æ­£æ•°\"        case 0:            return \"é›¶\"  # è¿™ä¸ªæ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œåˆ°        case n if n &lt; 0:            return \"è´Ÿæ•°\"# æ­£ç¡®çš„é¡ºåºdef check_number_correct(x):    match x:        case 0:            return \"é›¶\"        case n if n &gt; 0:            return \"æ­£æ•°\"        case n if n &lt; 0:            return \"è´Ÿæ•°\"3. æ€§èƒ½è€ƒè™‘# å¯¹äºç®€å•çš„å€¼åŒ¹é…ï¼Œmatch-case æ¯” if-elif æ›´é«˜æ•ˆdef handle_status_match(status):    match status:        case 200: return \"OK\"        case 404: return \"Not Found\"        case 500: return \"Server Error\"        case _: return \"Unknown\"# ä½†å¯¹äºå¤æ‚æ¡ä»¶ï¼Œif-elif å¯èƒ½æ›´æ¸…æ™°def handle_complex_condition(data):    if isinstance(data, dict) and 'user' in data and data['user'].get('active'):        return \"Active user\"    elif isinstance(data, list) and len(data) &gt; 10:        return \"Large list\"    else:        return \"Other\"ç›¸å…³å‡½æ•°ä¸æ¨¡å—å†…ç½®å‡½æ•°  isinstance() - ç±»å‹æ£€æŸ¥  hasattr() - å±æ€§æ£€æŸ¥  callable() - å¯è°ƒç”¨å¯¹è±¡æ£€æŸ¥æ ‡å‡†åº“æ¨¡å—  enum - æšä¸¾ç±»å‹ï¼Œå¸¸ä¸ match-case é…åˆä½¿ç”¨  dataclasses - æ•°æ®ç±»ï¼Œä¾¿äºæ¨¡å¼åŒ¹é…  typing - ç±»å‹æç¤ºï¼Œå¢å¼ºåŒ¹é…çš„å¯è¯»æ€§ç¬¬ä¸‰æ–¹åº“  pydantic - æ•°æ®éªŒè¯åº“ï¼Œæ”¯æŒå¤æ‚çš„æ•°æ®åŒ¹é…  attrs - ç±»å®šä¹‰åº“ï¼Œç®€åŒ–è‡ªå®šä¹‰ç±»çš„åŒ¹é…æ‰©å±•é˜…è¯»  PEP 634 - Structural Pattern Matching  PEP 635 - Structural Pattern Matching: Motivation and Rationale  PEP 636 - Structural Pattern Matching: Tutorial  Python å®˜æ–¹æ–‡æ¡£ - match è¯­å¥ç›¸å…³æ ‡ç­¾Python æ§åˆ¶æµ æ¨¡å¼åŒ¹é… æ¡ä»¶è¯­å¥ ç»“æ„åŒ–åŒ¹é… Python3.10 è¯­æ³•ç³–",
        "url": "/docs/basics/match-case/",
        "category": "é¡µé¢",
        "tags": []
      }
      
    
  
    
      ,
      {
        "title": "max() - æœ€å¤§å€¼å‡½æ•°",
        "content": "max() - æœ€å¤§å€¼å‡½æ•°ğŸ“ æ¦‚è¿°max() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºè¿”å›å¯è¿­ä»£å¯¹è±¡ä¸­çš„æœ€å¤§å€¼ï¼Œæˆ–è€…å¤šä¸ªå‚æ•°ä¸­çš„æœ€å¤§å€¼ã€‚å®ƒæ˜¯ min() å‡½æ•°çš„å¯¹åº”å‡½æ•°ï¼ŒåŒæ ·æ”¯æŒè‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°å’Œé»˜è®¤å€¼è®¾ç½®ï¼Œå¹¿æ³›åº”ç”¨äºæ•°æ®åˆ†æå’Œå¤„ç†ä¸­ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡max()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£ä¸åŒæ•°æ®ç±»å‹çš„æ¯”è¾ƒè§„åˆ™  å­¦ä¼šä½¿ç”¨keyå‚æ•°è¿›è¡Œè‡ªå®šä¹‰æ¯”è¾ƒ  äº†è§£defaultå‚æ•°çš„ä½¿ç”¨åœºæ™¯ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  å¯è¿­ä»£å¯¹è±¡æ¦‚å¿µ  æ¯”è¾ƒè¿ç®—ç¬¦åŸºç¡€  lambdaå‡½æ•°åŸºç¡€ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µmax() å‡½æ•°é€šè¿‡æ¯”è¾ƒæ“ä½œæ‰¾åˆ°æœ€å¤§å€¼ã€‚æ¯”è¾ƒè§„åˆ™ä¸ min() å‡½æ•°ç›¸åŒï¼šæ•°å€¼ç±»å‹æ¯”è¾ƒå¤§å°ï¼Œå­—ç¬¦ä¸²æŒ‰å­—å…¸åºæ¯”è¾ƒï¼Œè‡ªå®šä¹‰å¯¹è±¡å¯é€šè¿‡keyå‚æ•°æŒ‡å®šæ¯”è¾ƒæ–¹å¼ã€‚è¯­æ³•æ ¼å¼# å¤šä¸ªå‚æ•°çš„æœ€å¤§å€¼max(arg1, arg2, *args, key=None)# å¯è¿­ä»£å¯¹è±¡çš„æœ€å¤§å€¼max(iterable, *, default=object(), key=None)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  iterable      iterable      æ˜¯*      æ—       å¯è¿­ä»£å¯¹è±¡              arg1, arg2, â€¦      any      æ˜¯*      æ—       è¦æ¯”è¾ƒçš„å¤šä¸ªå‚æ•°              key      function      å¦      None      ç”¨äºæ¯”è¾ƒçš„å‡½æ•°              default      any      å¦      æ—       ç©ºè¿­ä»£å™¨æ—¶çš„é»˜è®¤è¿”å›å€¼      *æ³¨ï¼šiterableå’Œå¤šä¸ªå‚æ•°äºŒé€‰ä¸€è¿”å›å€¼  ç±»å‹: ä¸è¾“å…¥å…ƒç´ ç±»å‹ç›¸åŒ  è¯´æ˜: æœ€å¤§çš„å…ƒç´ å€¼ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# å¤šä¸ªå‚æ•°çš„æœ€å¤§å€¼print(f\"max(5, 2, 8, 1): {max(5, 2, 8, 1)}\")  # è¾“å‡º: max(5, 2, 8, 1): 8print(f\"max(3.14, 2.71, 1.41): {max(3.14, 2.71, 1.41)}\")  # è¾“å‡º: max(3.14, 2.71, 1.41): 3.14# åˆ—è¡¨çš„æœ€å¤§å€¼numbers = [10, 5, 8, 3, 15, 2]print(f\"max({numbers}): {max(numbers)}\")  # è¾“å‡º: max([10, 5, 8, 3, 15, 2]): 15# å­—ç¬¦ä¸²çš„æœ€å¤§å€¼ï¼ˆæŒ‰å­—å…¸åºï¼‰words = ['apple', 'banana', 'cherry', 'date']print(f\"max({words}): {max(words)}\")  # è¾“å‡º: max(['apple', 'banana', 'cherry', 'date']): date# å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æœ€å¤§å€¼text = \"hello\"print(f\"max('{text}'): {max(text)}\")  # è¾“å‡º: max('hello'): o# å…ƒç»„çš„æœ€å¤§å€¼tuples = [(1, 2), (3, 1), (2, 3)]print(f\"max({tuples}): {max(tuples)}\")  # è¾“å‡º: max([(1, 2), (3, 1), (2, 3)]): (3, 1)ä½¿ç”¨keyå‚æ•°# æŒ‰ç»å¯¹å€¼æ‰¾æœ€å¤§å€¼numbers = [-10, 5, -3, 8, -1]max_abs = max(numbers, key=abs)print(f\"æŒ‰ç»å¯¹å€¼æœ€å¤§: {max_abs}\")  # è¾“å‡º: æŒ‰ç»å¯¹å€¼æœ€å¤§: -10# æŒ‰å­—ç¬¦ä¸²é•¿åº¦æ‰¾æœ€é•¿å­—ç¬¦ä¸²words = ['python', 'java', 'c', 'javascript', 'go']longest = max(words, key=len)print(f\"æœ€é•¿å•è¯: {longest}\")  # è¾“å‡º: æœ€é•¿å•è¯: javascript# æŒ‰å­—ç¬¦ä¸²é•¿åº¦ï¼Œç„¶åæŒ‰å­—å…¸åºï¼ˆé™åºï¼‰words_with_same_length = ['cat', 'dog', 'bat', 'rat']# å…ˆæŒ‰é•¿åº¦ï¼Œå†æŒ‰å­—å…¸åºï¼ˆé™åºï¼‰max_word = max(words_with_same_length, key=lambda x: (len(x), x))print(f\"æŒ‰é•¿åº¦å’Œå­—å…¸åºæœ€å¤§: {max_word}\")  # è¾“å‡º: æŒ‰é•¿åº¦å’Œå­—å…¸åºæœ€å¤§: rat# å¤æ‚å¯¹è±¡çš„æ¯”è¾ƒstudents = [    {'name': 'å¼ ä¸‰', 'age': 20, 'score': 85},    {'name': 'æå››', 'age': 19, 'score': 92},    {'name': 'ç‹äº”', 'age': 21, 'score': 78},    {'name': 'èµµå…­', 'age': 18, 'score': 88}]# æŒ‰å¹´é¾„æ‰¾æœ€å¤§oldest = max(students, key=lambda s: s['age'])print(f\"æœ€å¹´é•¿çš„å­¦ç”Ÿ: {oldest['name']}, å¹´é¾„: {oldest['age']}\")# æŒ‰æˆç»©æ‰¾æœ€å¤§highest_score = max(students, key=lambda s: s['score'])print(f\"æˆç»©æœ€é«˜çš„å­¦ç”Ÿ: {highest_score['name']}, æˆç»©: {highest_score['score']}\")# å¤šæ¡ä»¶æ’åºï¼šå…ˆæŒ‰æˆç»©ï¼Œå†æŒ‰å¹´é¾„best_student = max(students, key=lambda s: (s['score'], s['age']))print(f\"ç»¼åˆæœ€ä¼˜å­¦ç”Ÿ: {best_student['name']}, æˆç»©: {best_student['score']}, å¹´é¾„: {best_student['age']}\")ä½¿ç”¨defaultå‚æ•°# ç©ºåˆ—è¡¨çš„å¤„ç†empty_list = []# ä¸ä½¿ç”¨defaultä¼šæŠ›å‡ºå¼‚å¸¸try:    result = max(empty_list)except ValueError as e:    print(f\"ç©ºåˆ—è¡¨é”™è¯¯: {e}\")# ä½¿ç”¨defaultå‚æ•°result_with_default = max(empty_list, default=0)print(f\"ç©ºåˆ—è¡¨ä½¿ç”¨é»˜è®¤å€¼: {result_with_default}\")  # è¾“å‡º: ç©ºåˆ—è¡¨ä½¿ç”¨é»˜è®¤å€¼: 0# æ¡ä»¶è¿‡æ»¤åå¯èƒ½ä¸ºç©ºçš„æƒ…å†µnumbers = [1, 3, 5, 7, 9]even_numbers = [x for x in numbers if x % 2 == 0]max_even = max(even_numbers, default=\"æ— å¶æ•°\")print(f\"æœ€å¤§å¶æ•°: {max_even}\")  # è¾“å‡º: æœ€å¤§å¶æ•°: æ— å¶æ•°# å®é™…åº”ç”¨ï¼šå®‰å…¨çš„æœ€å¤§å€¼æŸ¥æ‰¾def safe_max(data, condition=None, default=None):    \"\"\"å®‰å…¨çš„æœ€å¤§å€¼æŸ¥æ‰¾\"\"\"    if condition:        filtered_data = [x for x in data if condition(x)]    else:        filtered_data = data        return max(filtered_data, default=default)# æµ‹è¯•test_data = [10, -5, 3, -8, 15, -2]print(f\"æ‰€æœ‰æ•°æ®æœ€å¤§å€¼: {safe_max(test_data)}\")print(f\"è´Ÿæ•°æœ€å¤§å€¼: {safe_max(test_data, lambda x: x &lt; 0, 'æ— è´Ÿæ•°')}\")print(f\"å¤§äº20çš„æœ€å¤§å€¼: {safe_max(test_data, lambda x: x &gt; 20, 'æ— ç¬¦åˆæ¡ä»¶çš„æ•°')}\")å®é™…æ¡ˆä¾‹ï¼šæ€§èƒ½ç›‘æ§def analyze_performance_metrics(metrics_data):    \"\"\"åˆ†ææ€§èƒ½æŒ‡æ ‡æ•°æ®\"\"\"    if not metrics_data:        return \"æ— æ€§èƒ½æ•°æ®\"        analysis = {}        # æœ€é«˜CPUä½¿ç”¨ç‡    max_cpu = max(metrics_data, key=lambda x: x['cpu_usage'])    analysis['peak_cpu'] = {        'usage': max_cpu['cpu_usage'],        'timestamp': max_cpu['timestamp'],        'process': max_cpu.get('process', 'unknown')    }        # æœ€é«˜å†…å­˜ä½¿ç”¨    max_memory = max(metrics_data, key=lambda x: x['memory_usage'])    analysis['peak_memory'] = {        'usage': max_memory['memory_usage'],        'timestamp': max_memory['timestamp']    }        # æœ€é•¿å“åº”æ—¶é—´    max_response = max(metrics_data, key=lambda x: x.get('response_time', 0))    analysis['slowest_response'] = {        'time': max_response.get('response_time', 0),        'timestamp': max_response['timestamp'],        'endpoint': max_response.get('endpoint', 'unknown')    }        # æŒ‰å°æ—¶ç»Ÿè®¡æœ€å¤§å€¼    hourly_max = {}    for record in metrics_data:        hour = record['timestamp'][:13]  # å‡è®¾æ—¶é—´æˆ³æ ¼å¼ä¸º YYYY-MM-DD HH:MM:SS        if hour not in hourly_max:            hourly_max[hour] = []        hourly_max[hour].append(record)        analysis['hourly_peaks'] = {}    for hour, records in hourly_max.items():        max_cpu_hour = max(records, key=lambda x: x['cpu_usage'])        analysis['hourly_peaks'][hour] = max_cpu_hour['cpu_usage']        return analysis# æµ‹è¯•æ€§èƒ½æ•°æ®performance_data = [    {'timestamp': '2024-01-15 10:00:00', 'cpu_usage': 45.2, 'memory_usage': 2048, 'response_time': 120, 'process': 'web_server'},    {'timestamp': '2024-01-15 10:15:00', 'cpu_usage': 78.5, 'memory_usage': 2560, 'response_time': 250, 'process': 'database'},    {'timestamp': '2024-01-15 10:30:00', 'cpu_usage': 92.1, 'memory_usage': 3072, 'response_time': 180, 'process': 'web_server'},    {'timestamp': '2024-01-15 11:00:00', 'cpu_usage': 65.3, 'memory_usage': 2304, 'response_time': 95, 'process': 'cache'},    {'timestamp': '2024-01-15 11:15:00', 'cpu_usage': 88.7, 'memory_usage': 2816, 'response_time': 310, 'process': 'analytics'}]perf_analysis = analyze_performance_metrics(performance_data)print(\"æ€§èƒ½åˆ†æç»“æœ:\")print(f\"  CPUå³°å€¼: {perf_analysis['peak_cpu']['usage']}%\")print(f\"  æ—¶é—´: {perf_analysis['peak_cpu']['timestamp']}\")print(f\"  è¿›ç¨‹: {perf_analysis['peak_cpu']['process']}\")print(f\"  å†…å­˜å³°å€¼: {perf_analysis['peak_memory']['usage']}MB\")print(f\"  æœ€æ…¢å“åº”: {perf_analysis['slowest_response']['time']}ms\")print(\"  æ¯å°æ—¶CPUå³°å€¼:\")for hour, cpu in perf_analysis['hourly_peaks'].items():    print(f\"    {hour}: {cpu}%\")å¤šç»´æ•°æ®å¤„ç†def find_max_in_matrix(matrix):    \"\"\"åœ¨äºŒç»´çŸ©é˜µä¸­æ‰¾æœ€å¤§å€¼åŠå…¶ä½ç½®\"\"\"    if not matrix or not matrix[0]:        return None, None        max_value = float('-inf')    max_position = None        for i, row in enumerate(matrix):        for j, value in enumerate(row):            if value &gt; max_value:                max_value = value                max_position = (i, j)        return max_value, max_positiondef find_max_by_dimension(matrix, dimension=0):    \"\"\"æŒ‰ç»´åº¦æ‰¾æœ€å¤§å€¼\"\"\"    if dimension == 0:  # æŒ‰è¡Œæ‰¾æœ€å¤§å€¼        return [max(row) for row in matrix]    elif dimension == 1:  # æŒ‰åˆ—æ‰¾æœ€å¤§å€¼        return [max(matrix[i][j] for i in range(len(matrix)))                 for j in range(len(matrix[0]))]    else:        raise ValueError(\"ç»´åº¦åªèƒ½æ˜¯0ï¼ˆè¡Œï¼‰æˆ–1ï¼ˆåˆ—ï¼‰\")def find_top_k_in_matrix(matrix, k=3):    \"\"\"æ‰¾çŸ©é˜µä¸­æœ€å¤§çš„kä¸ªå€¼\"\"\"    all_values = []    for i, row in enumerate(matrix):        for j, value in enumerate(row):            all_values.append((value, i, j))        # æŒ‰å€¼æ’åºï¼Œå–æœ€å¤§çš„kä¸ª    top_k = sorted(all_values, key=lambda x: x[0], reverse=True)[:k]    return top_k# æµ‹è¯•çŸ©é˜µtest_matrix = [    [5, 2, 8, 1],    [3, 9, 4, 6],    [7, 1, 5, 2]]print(f\"çŸ©é˜µ: {test_matrix}\")# å…¨å±€æœ€å¤§å€¼max_val, max_pos = find_max_in_matrix(test_matrix)print(f\"å…¨å±€æœ€å¤§å€¼: {max_val}, ä½ç½®: {max_pos}\")# æŒ‰è¡Œæœ€å¤§å€¼row_maxs = find_max_by_dimension(test_matrix, 0)print(f\"å„è¡Œæœ€å¤§å€¼: {row_maxs}\")# æŒ‰åˆ—æœ€å¤§å€¼col_maxs = find_max_by_dimension(test_matrix, 1)print(f\"å„åˆ—æœ€å¤§å€¼: {col_maxs}\")# æœ€å¤§çš„3ä¸ªå€¼top_3 = find_top_k_in_matrix(test_matrix, 3)print(f\"æœ€å¤§çš„3ä¸ªå€¼:\")for value, row, col in top_3:    print(f\"  å€¼: {value}, ä½ç½®: ({row}, {col})\")# ä½¿ç”¨å†…ç½®å‡½æ•°çš„ç®€æ´å†™æ³•print(f\"\\nä½¿ç”¨å†…ç½®å‡½æ•°:\")print(f\"å…¨å±€æœ€å¤§å€¼: {max(max(row) for row in test_matrix)}\")print(f\"å„è¡Œæœ€å¤§å€¼: {[max(row) for row in test_matrix]}\")print(f\"å„åˆ—æœ€å¤§å€¼: {[max(col) for col in zip(*test_matrix)]}\")æ—¶é—´åºåˆ—æ•°æ®åˆ†æfrom datetime import datetime, timedeltadef analyze_time_series_peaks(time_series_data):    \"\"\"åˆ†ææ—¶é—´åºåˆ—æ•°æ®çš„å³°å€¼\"\"\"    if not time_series_data:        return {}        # å…¨å±€å³°å€¼    global_peak = max(time_series_data, key=lambda x: x['value'])        # æŒ‰æ—¥æœŸåˆ†ç»„    daily_data = {}    for record in time_series_data:        date = record['timestamp'].date()        if date not in daily_data:            daily_data[date] = []        daily_data[date].append(record)        # æ¯æ—¥å³°å€¼    daily_peaks = {}    for date, records in daily_data.items():        daily_peak = max(records, key=lambda x: x['value'])        daily_peaks[date] = daily_peak        # å³°å€¼æ—¥æœŸ    peak_date = max(daily_peaks.keys(), key=lambda d: daily_peaks[d]['value'])        # è¿ç»­å¢é•¿çš„æœ€é•¿æ—¶é—´    max_growth_period = 0    current_growth = 0        sorted_data = sorted(time_series_data, key=lambda x: x['timestamp'])    for i in range(1, len(sorted_data)):        if sorted_data[i]['value'] &gt; sorted_data[i-1]['value']:            current_growth += 1            max_growth_period = max(max_growth_period, current_growth)        else:            current_growth = 0        return {        'global_peak': global_peak,        'daily_peaks': daily_peaks,        'peak_date': peak_date,        'max_growth_period': max_growth_period    }# ç”Ÿæˆæµ‹è¯•æ—¶é—´åºåˆ—æ•°æ®base_time = datetime(2024, 1, 15, 9, 0, 0)time_series = []for i in range(48):  # 48å°æ—¶çš„æ•°æ®    timestamp = base_time + timedelta(hours=i)    # æ¨¡æ‹Ÿæ³¢åŠ¨çš„æ•°å€¼    value = 50 + 30 * (i % 12) / 12 + (i % 3) * 5    time_series.append({        'timestamp': timestamp,        'value': value,        'metric': 'cpu_usage'    })# åˆ†ææ—¶é—´åºåˆ—ts_analysis = analyze_time_series_peaks(time_series)print(\"æ—¶é—´åºåˆ—åˆ†æ:\")print(f\"å…¨å±€å³°å€¼: {ts_analysis['global_peak']['value']:.2f}\")print(f\"å³°å€¼æ—¶é—´: {ts_analysis['global_peak']['timestamp']}\")print(f\"å³°å€¼æ—¥æœŸ: {ts_analysis['peak_date']}\")print(f\"æœ€é•¿è¿ç»­å¢é•¿æœŸ: {ts_analysis['max_growth_period']}å°æ—¶\")print(\"\\næ¯æ—¥å³°å€¼:\")for date, peak in list(ts_analysis['daily_peaks'].items())[:3]:  # æ˜¾ç¤ºå‰3å¤©    print(f\"  {date}: {peak['value']:.2f} (æ—¶é—´: {peak['timestamp'].strftime('%H:%M')})\")âš ï¸ æ³¨æ„äº‹é¡¹æ¯”è¾ƒè§„åˆ™# ä¸åŒç±»å‹çš„æ¯”è¾ƒå¯èƒ½å‡ºé”™try:    result = max([1, '2', 3.0])  # æ··åˆç±»å‹except TypeError as e:    print(f\"ç±»å‹é”™è¯¯: {e}\")# å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯æŒ‰å­—å…¸åºstrings = ['10', '2', '30']print(f\"å­—ç¬¦ä¸²æ¯”è¾ƒ: {max(strings)}\")  # è¾“å‡º: '30' (å­—å…¸åº)# æ•°å€¼å­—ç¬¦ä¸²éœ€è¦è½¬æ¢numeric_strings = ['10', '2', '30']max_numeric = max(numeric_strings, key=int)print(f\"æŒ‰æ•°å€¼æ¯”è¾ƒ: {max_numeric}\")  # è¾“å‡º: '30'# å…ƒç»„æ¯”è¾ƒæ˜¯é€å…ƒç´ æ¯”è¾ƒtuples = [(1, 3), (1, 2), (2, 1)]print(f\"å…ƒç»„æ¯”è¾ƒ: {max(tuples)}\")  # è¾“å‡º: (2, 1)# å¤æ‚çš„å…ƒç»„æ¯”è¾ƒcomplex_tuples = [(1, 3, 2), (1, 3, 1), (1, 2, 5)]print(f\"å¤æ‚å…ƒç»„æ¯”è¾ƒ: {max(complex_tuples)}\")  # è¾“å‡º: (1, 3, 2)æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜# æµ®ç‚¹æ•°æ¯”è¾ƒçš„ç²¾åº¦é—®é¢˜float_numbers = [0.1 + 0.2, 0.3, 0.30000000000000004]print(f\"æµ®ç‚¹æ•°åˆ—è¡¨: {float_numbers}\")print(f\"æœ€å¤§å€¼: {max(float_numbers)}\")print(f\"æœ€å¤§å€¼ç´¢å¼•: {float_numbers.index(max(float_numbers))}\")# ä½¿ç”¨å®¹å·®æ¯”è¾ƒdef float_max_with_tolerance(numbers, tolerance=1e-10):    \"\"\"è€ƒè™‘å®¹å·®çš„æµ®ç‚¹æ•°æœ€å¤§å€¼\"\"\"    if not numbers:        return None        max_val = numbers[0]    for num in numbers[1:]:        if num - max_val &gt; tolerance:            max_val = num    return max_valresult = float_max_with_tolerance(float_numbers)print(f\"è€ƒè™‘å®¹å·®çš„æœ€å¤§å€¼: {result}\")æ€§èƒ½è€ƒè™‘import timeimport random# ç”Ÿæˆæµ‹è¯•æ•°æ®large_data = [random.randint(1, 1000000) for _ in range(100000)]# æ–¹æ³•1ï¼šç›´æ¥ä½¿ç”¨max()start_time = time.time()result1 = max(large_data)time1 = time.time() - start_time# æ–¹æ³•2ï¼šæ‰‹åŠ¨å¾ªç¯æŸ¥æ‰¾start_time = time.time()max_val = large_data[0]for val in large_data[1:]:    if val &gt; max_val:        max_val = valresult2 = max_valtime2 = time.time() - start_time# æ–¹æ³•3ï¼šä½¿ç”¨heapqï¼ˆå¯¹äºéƒ¨åˆ†æœ€å¤§å€¼ï¼‰import heapqstart_time = time.time()result3 = heapq.nlargest(1, large_data)[0]time3 = time.time() - start_timeprint(f\"æ€§èƒ½æ¯”è¾ƒï¼ˆæ•°æ®é‡: {len(large_data)}ï¼‰:\")print(f\"max()å‡½æ•°: {time1:.6f}ç§’, ç»“æœ: {result1}\")print(f\"æ‰‹åŠ¨å¾ªç¯: {time2:.6f}ç§’, ç»“æœ: {result2}\")print(f\"heapqæ–¹æ³•: {time3:.6f}ç§’, ç»“æœ: {result3}\")# å¯¹äºéœ€è¦å¤šä¸ªæœ€å¤§å€¼çš„æƒ…å†µprint(f\"\\nè·å–æœ€å¤§çš„5ä¸ªå€¼:\")start_time = time.time()sorted_method = sorted(large_data, reverse=True)[:5]time_sorted = time.time() - start_timestart_time = time.time()heap_method = heapq.nlargest(5, large_data)time_heap = time.time() - start_timeprint(f\"æ’åºæ–¹æ³•: {time_sorted:.6f}ç§’\")print(f\"å †æ–¹æ³•: {time_heap:.6f}ç§’\")print(f\"å †æ–¹æ³•å¿« {time_sorted/time_heap:.2f} å€\")å†…å­˜ä½¿ç”¨ä¼˜åŒ–# å¯¹äºå¤§å‹æ•°æ®é›†ï¼Œé¿å…åˆ›å»ºä¸­é—´åˆ—è¡¨def max_with_condition_generator(data, condition):    \"\"\"ä½¿ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼é¿å…åˆ›å»ºä¸­é—´åˆ—è¡¨\"\"\"    return max((x for x in data if condition(x)), default=None)def max_with_condition_list(data, condition):    \"\"\"ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ï¼ˆå ç”¨æ›´å¤šå†…å­˜ï¼‰\"\"\"    filtered = [x for x in data if condition(x)]    return max(filtered) if filtered else None# æµ‹è¯•å†…å­˜ä½¿ç”¨large_dataset = range(1000000)condition = lambda x: x % 1000 == 0# ç”Ÿæˆå™¨æ–¹å¼ï¼ˆå†…å­˜å‹å¥½ï¼‰result1 = max_with_condition_generator(large_dataset, condition)print(f\"ç”Ÿæˆå™¨æ–¹å¼ç»“æœ: {result1}\")# åˆ—è¡¨æ–¹å¼ï¼ˆå ç”¨æ›´å¤šå†…å­˜ï¼‰result2 = max_with_condition_list(large_dataset, condition)print(f\"åˆ—è¡¨æ–¹å¼ç»“æœ: {result2}\")# ç›´æ¥ä½¿ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆæ¨èï¼‰result3 = max((x for x in large_dataset if x % 1000 == 0), default=None)print(f\"ç›´æ¥ç”Ÿæˆå™¨ç»“æœ: {result3}\")ğŸ”— ç›¸å…³å†…å®¹ç›¸å…³å‡½æ•°  min() - æœ€å°å€¼å‡½æ•° - æ‰¾æœ€å°å€¼  sorted() - æ’åºå‡½æ•° - æ’åºæ“ä½œ  sum() - æ±‚å’Œå‡½æ•° - æ•°å€¼æ±‚å’Œ  len() - é•¿åº¦å‡½æ•° - è·å–é•¿åº¦  any() - é€»è¾‘æˆ–å‡½æ•° - ä»»ä¸€ä¸ºçœŸ  all() - é€»è¾‘ä¸å‡½æ•° - å…¨éƒ¨ä¸ºçœŸç›¸å…³æ¨¡å—  heapqæ¨¡å— - å †é˜Ÿåˆ—ç®—æ³•  operatoræ¨¡å— - æ“ä½œç¬¦å‡½æ•°  functoolsæ¨¡å— - å‡½æ•°å·¥å…·  statisticsæ¨¡å— - ç»Ÿè®¡å‡½æ•°ç›¸å…³æ¦‚å¿µ  æ¯”è¾ƒè¿ç®— - æ¯”è¾ƒè¿ç®—ç¬¦  æ’åºç®—æ³• - æ’åºç®—æ³•è¯¦è§£  lambdaå‡½æ•° - åŒ¿åå‡½æ•°  ç”Ÿæˆå™¨è¡¨è¾¾å¼ - å†…å­˜ä¼˜åŒ–ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - max()  Pythonæ’åºæŒ‡å—  æ¯”è¾ƒè¿ç®—  æ•°æ®æ¨¡å‹ - æ¯”è¾ƒæ–¹æ³•ğŸ·ï¸ æ ‡ç­¾åºåˆ—æ“ä½œ æ¯”è¾ƒ æœ€å€¼ æ•°æ®åˆ†æ æ€§èƒ½ç›‘æ§æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/max/",
        "category": "builtins",
        "tags": ["åºåˆ—æ“ä½œ","æ¯”è¾ƒ","æœ€å€¼"]
      }
      
    
  
    
      ,
      {
        "title": "min() - æœ€å°å€¼å‡½æ•°",
        "content": "min() - æœ€å°å€¼å‡½æ•°ğŸ“ æ¦‚è¿°min() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºè¿”å›å¯è¿­ä»£å¯¹è±¡ä¸­çš„æœ€å°å€¼ï¼Œæˆ–è€…å¤šä¸ªå‚æ•°ä¸­çš„æœ€å°å€¼ã€‚å®ƒæ”¯æŒè‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°å’Œé»˜è®¤å€¼è®¾ç½®ï¼Œæ˜¯æ•°æ®åˆ†æå’Œå¤„ç†ä¸­çš„é‡è¦å·¥å…·ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡min()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£ä¸åŒæ•°æ®ç±»å‹çš„æ¯”è¾ƒè§„åˆ™  å­¦ä¼šä½¿ç”¨keyå‚æ•°è¿›è¡Œè‡ªå®šä¹‰æ¯”è¾ƒ  äº†è§£defaultå‚æ•°çš„ä½¿ç”¨åœºæ™¯ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  å¯è¿­ä»£å¯¹è±¡æ¦‚å¿µ  æ¯”è¾ƒè¿ç®—ç¬¦åŸºç¡€  lambdaå‡½æ•°åŸºç¡€ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µmin() å‡½æ•°é€šè¿‡æ¯”è¾ƒæ“ä½œæ‰¾åˆ°æœ€å°å€¼ã€‚å¯¹äºæ•°å€¼ç±»å‹ï¼Œæ¯”è¾ƒå¤§å°ï¼›å¯¹äºå­—ç¬¦ä¸²ï¼ŒæŒ‰å­—å…¸åºæ¯”è¾ƒï¼›å¯¹äºè‡ªå®šä¹‰å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡keyå‚æ•°æŒ‡å®šæ¯”è¾ƒæ–¹å¼ã€‚è¯­æ³•æ ¼å¼# å¤šä¸ªå‚æ•°çš„æœ€å°å€¼min(arg1, arg2, *args, key=None)# å¯è¿­ä»£å¯¹è±¡çš„æœ€å°å€¼min(iterable, *, default=object(), key=None)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  iterable      iterable      æ˜¯*      æ—       å¯è¿­ä»£å¯¹è±¡              arg1, arg2, â€¦      any      æ˜¯*      æ—       è¦æ¯”è¾ƒçš„å¤šä¸ªå‚æ•°              key      function      å¦      None      ç”¨äºæ¯”è¾ƒçš„å‡½æ•°              default      any      å¦      æ—       ç©ºè¿­ä»£å™¨æ—¶çš„é»˜è®¤è¿”å›å€¼      *æ³¨ï¼šiterableå’Œå¤šä¸ªå‚æ•°äºŒé€‰ä¸€è¿”å›å€¼  ç±»å‹: ä¸è¾“å…¥å…ƒç´ ç±»å‹ç›¸åŒ  è¯´æ˜: æœ€å°çš„å…ƒç´ å€¼ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# å¤šä¸ªå‚æ•°çš„æœ€å°å€¼print(f\"min(5, 2, 8, 1): {min(5, 2, 8, 1)}\")  # è¾“å‡º: min(5, 2, 8, 1): 1print(f\"min(3.14, 2.71, 1.41): {min(3.14, 2.71, 1.41)}\")  # è¾“å‡º: min(3.14, 2.71, 1.41): 1.41# åˆ—è¡¨çš„æœ€å°å€¼numbers = [10, 5, 8, 3, 15, 2]print(f\"min({numbers}): {min(numbers)}\")  # è¾“å‡º: min([10, 5, 8, 3, 15, 2]): 2# å­—ç¬¦ä¸²çš„æœ€å°å€¼ï¼ˆæŒ‰å­—å…¸åºï¼‰words = ['apple', 'banana', 'cherry', 'date']print(f\"min({words}): {min(words)}\")  # è¾“å‡º: min(['apple', 'banana', 'cherry', 'date']): apple# å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æœ€å°å€¼text = \"hello\"print(f\"min('{text}'): {min(text)}\")  # è¾“å‡º: min('hello'): e# å…ƒç»„çš„æœ€å°å€¼tuples = [(1, 2), (3, 1), (2, 3)]print(f\"min({tuples}): {min(tuples)}\")  # è¾“å‡º: min([(1, 2), (3, 1), (2, 3)]): (1, 2)ä½¿ç”¨keyå‚æ•°# æŒ‰ç»å¯¹å€¼æ‰¾æœ€å°å€¼numbers = [-10, 5, -3, 8, -1]min_abs = min(numbers, key=abs)print(f\"æŒ‰ç»å¯¹å€¼æœ€å°: {min_abs}\")  # è¾“å‡º: æŒ‰ç»å¯¹å€¼æœ€å°: -1# æŒ‰å­—ç¬¦ä¸²é•¿åº¦æ‰¾æœ€çŸ­å­—ç¬¦ä¸²words = ['python', 'java', 'c', 'javascript', 'go']shortest = min(words, key=len)print(f\"æœ€çŸ­å•è¯: {shortest}\")  # è¾“å‡º: æœ€çŸ­å•è¯: c# æŒ‰å­—ç¬¦ä¸²é•¿åº¦ï¼Œç„¶åæŒ‰å­—å…¸åºwords_with_same_length = ['cat', 'dog', 'bat', 'rat']# å…ˆæŒ‰é•¿åº¦ï¼Œå†æŒ‰å­—å…¸åºmin_word = min(words_with_same_length, key=lambda x: (len(x), x))print(f\"æŒ‰é•¿åº¦å’Œå­—å…¸åºæœ€å°: {min_word}\")  # è¾“å‡º: æŒ‰é•¿åº¦å’Œå­—å…¸åºæœ€å°: bat# å¤æ‚å¯¹è±¡çš„æ¯”è¾ƒstudents = [    {'name': 'å¼ ä¸‰', 'age': 20, 'score': 85},    {'name': 'æå››', 'age': 19, 'score': 92},    {'name': 'ç‹äº”', 'age': 21, 'score': 78},    {'name': 'èµµå…­', 'age': 18, 'score': 88}]# æŒ‰å¹´é¾„æ‰¾æœ€å°youngest = min(students, key=lambda s: s['age'])print(f\"æœ€å¹´è½»çš„å­¦ç”Ÿ: {youngest['name']}, å¹´é¾„: {youngest['age']}\")# æŒ‰æˆç»©æ‰¾æœ€å°lowest_score = min(students, key=lambda s: s['score'])print(f\"æˆç»©æœ€ä½çš„å­¦ç”Ÿ: {lowest_score['name']}, æˆç»©: {lowest_score['score']}\")ä½¿ç”¨defaultå‚æ•°# ç©ºåˆ—è¡¨çš„å¤„ç†empty_list = []# ä¸ä½¿ç”¨defaultä¼šæŠ›å‡ºå¼‚å¸¸try:    result = min(empty_list)except ValueError as e:    print(f\"ç©ºåˆ—è¡¨é”™è¯¯: {e}\")# ä½¿ç”¨defaultå‚æ•°result_with_default = min(empty_list, default=0)print(f\"ç©ºåˆ—è¡¨ä½¿ç”¨é»˜è®¤å€¼: {result_with_default}\")  # è¾“å‡º: ç©ºåˆ—è¡¨ä½¿ç”¨é»˜è®¤å€¼: 0# æ¡ä»¶è¿‡æ»¤åå¯èƒ½ä¸ºç©ºçš„æƒ…å†µnumbers = [1, 3, 5, 7, 9]even_numbers = [x for x in numbers if x % 2 == 0]min_even = min(even_numbers, default=\"æ— å¶æ•°\")print(f\"æœ€å°å¶æ•°: {min_even}\")  # è¾“å‡º: æœ€å°å¶æ•°: æ— å¶æ•°# å®é™…åº”ç”¨ï¼šå®‰å…¨çš„æœ€å°å€¼æŸ¥æ‰¾def safe_min(data, condition=None, default=None):    \"\"\"å®‰å…¨çš„æœ€å°å€¼æŸ¥æ‰¾\"\"\"    if condition:        filtered_data = [x for x in data if condition(x)]    else:        filtered_data = data        return min(filtered_data, default=default)# æµ‹è¯•test_data = [10, -5, 3, -8, 15, -2]print(f\"æ‰€æœ‰æ•°æ®æœ€å°å€¼: {safe_min(test_data)}\")print(f\"æ­£æ•°æœ€å°å€¼: {safe_min(test_data, lambda x: x &gt; 0, 'æ— æ­£æ•°')}\")print(f\"å¤§äº20çš„æœ€å°å€¼: {safe_min(test_data, lambda x: x &gt; 20, 'æ— ç¬¦åˆæ¡ä»¶çš„æ•°')}\")å®é™…æ¡ˆä¾‹ï¼šæ•°æ®åˆ†ædef analyze_sales_data(sales_records):    \"\"\"åˆ†æé”€å”®æ•°æ®\"\"\"    if not sales_records:        return \"æ— é”€å”®æ•°æ®\"        analysis = {}        # æœ€ä½é”€å”®é¢    min_amount = min(sales_records, key=lambda x: x['amount'])    analysis['lowest_sale'] = {        'amount': min_amount['amount'],        'date': min_amount['date'],        'product': min_amount['product']    }        # æœ€æ—©é”€å”®æ—¥æœŸ    earliest_sale = min(sales_records, key=lambda x: x['date'])    analysis['earliest_date'] = earliest_sale['date']        # æŒ‰äº§å“åˆ†ç»„æ‰¾æœ€ä½ä»·æ ¼    products = {}    for record in sales_records:        product = record['product']        if product not in products:            products[product] = []        products[product].append(record)        analysis['min_price_by_product'] = {}    for product, records in products.items():        min_record = min(records, key=lambda x: x['amount'])        analysis['min_price_by_product'][product] = min_record['amount']        return analysis# æµ‹è¯•é”€å”®æ•°æ®sales_data = [    {'date': '2024-01-15', 'product': 'iPhone', 'amount': 999},    {'date': '2024-01-16', 'product': 'iPad', 'amount': 599},    {'date': '2024-01-14', 'product': 'iPhone', 'amount': 899},    {'date': '2024-01-17', 'product': 'MacBook', 'amount': 1299},    {'date': '2024-01-15', 'product': 'iPad', 'amount': 549},    {'date': '2024-01-18', 'product': 'iPhone', 'amount': 799}]analysis_result = analyze_sales_data(sales_data)print(\"é”€å”®æ•°æ®åˆ†æ:\")print(f\"  æœ€ä½é”€å”®é¢: {analysis_result['lowest_sale']['amount']}å…ƒ\")print(f\"  äº§å“: {analysis_result['lowest_sale']['product']}\")print(f\"  æ—¥æœŸ: {analysis_result['lowest_sale']['date']}\")print(f\"  æœ€æ—©é”€å”®æ—¥æœŸ: {analysis_result['earliest_date']}\")print(\"  å„äº§å“æœ€ä½ä»·æ ¼:\")for product, price in analysis_result['min_price_by_product'].items():    print(f\"    {product}: {price}å…ƒ\")å¤šç»´æ•°æ®å¤„ç†def find_min_in_matrix(matrix):    \"\"\"åœ¨äºŒç»´çŸ©é˜µä¸­æ‰¾æœ€å°å€¼åŠå…¶ä½ç½®\"\"\"    if not matrix or not matrix[0]:        return None, None        min_value = float('inf')    min_position = None        for i, row in enumerate(matrix):        for j, value in enumerate(row):            if value &lt; min_value:                min_value = value                min_position = (i, j)        return min_value, min_positiondef find_min_by_dimension(matrix, dimension=0):    \"\"\"æŒ‰ç»´åº¦æ‰¾æœ€å°å€¼\"\"\"    if dimension == 0:  # æŒ‰è¡Œæ‰¾æœ€å°å€¼        return [min(row) for row in matrix]    elif dimension == 1:  # æŒ‰åˆ—æ‰¾æœ€å°å€¼        return [min(matrix[i][j] for i in range(len(matrix)))                 for j in range(len(matrix[0]))]    else:        raise ValueError(\"ç»´åº¦åªèƒ½æ˜¯0ï¼ˆè¡Œï¼‰æˆ–1ï¼ˆåˆ—ï¼‰\")# æµ‹è¯•çŸ©é˜µtest_matrix = [    [5, 2, 8, 1],    [3, 9, 4, 6],    [7, 1, 5, 2]]print(f\"çŸ©é˜µ: {test_matrix}\")# å…¨å±€æœ€å°å€¼min_val, min_pos = find_min_in_matrix(test_matrix)print(f\"å…¨å±€æœ€å°å€¼: {min_val}, ä½ç½®: {min_pos}\")# æŒ‰è¡Œæœ€å°å€¼row_mins = find_min_by_dimension(test_matrix, 0)print(f\"å„è¡Œæœ€å°å€¼: {row_mins}\")# æŒ‰åˆ—æœ€å°å€¼col_mins = find_min_by_dimension(test_matrix, 1)print(f\"å„åˆ—æœ€å°å€¼: {col_mins}\")# ä½¿ç”¨å†…ç½®å‡½æ•°çš„ç®€æ´å†™æ³•print(f\"\\nä½¿ç”¨å†…ç½®å‡½æ•°:\")print(f\"å…¨å±€æœ€å°å€¼: {min(min(row) for row in test_matrix)}\")print(f\"å„è¡Œæœ€å°å€¼: {[min(row) for row in test_matrix]}\")print(f\"å„åˆ—æœ€å°å€¼: {[min(col) for col in zip(*test_matrix)]}\")æ€§èƒ½ä¼˜åŒ–æŠ€å·§import timeimport random# ç”Ÿæˆæµ‹è¯•æ•°æ®large_data = [random.randint(1, 1000000) for _ in range(100000)]# æ–¹æ³•1ï¼šç›´æ¥ä½¿ç”¨min()start_time = time.time()result1 = min(large_data)time1 = time.time() - start_time# æ–¹æ³•2ï¼šæ‰‹åŠ¨å¾ªç¯æŸ¥æ‰¾start_time = time.time()min_val = large_data[0]for val in large_data[1:]:    if val &lt; min_val:        min_val = valresult2 = min_valtime2 = time.time() - start_time# æ–¹æ³•3ï¼šä½¿ç”¨heapqï¼ˆå¯¹äºéƒ¨åˆ†æœ€å°å€¼ï¼‰import heapqstart_time = time.time()result3 = heapq.nsmallest(1, large_data)[0]time3 = time.time() - start_timeprint(f\"æ€§èƒ½æ¯”è¾ƒï¼ˆæ•°æ®é‡: {len(large_data)}ï¼‰:\")print(f\"min()å‡½æ•°: {time1:.6f}ç§’, ç»“æœ: {result1}\")print(f\"æ‰‹åŠ¨å¾ªç¯: {time2:.6f}ç§’, ç»“æœ: {result2}\")print(f\"heapqæ–¹æ³•: {time3:.6f}ç§’, ç»“æœ: {result3}\")# å¯¹äºéœ€è¦å¤šä¸ªæœ€å°å€¼çš„æƒ…å†µprint(f\"\\nè·å–æœ€å°çš„5ä¸ªå€¼:\")start_time = time.time()sorted_method = sorted(large_data)[:5]time_sorted = time.time() - start_timestart_time = time.time()heap_method = heapq.nsmallest(5, large_data)time_heap = time.time() - start_timeprint(f\"æ’åºæ–¹æ³•: {time_sorted:.6f}ç§’\")print(f\"å †æ–¹æ³•: {time_heap:.6f}ç§’\")print(f\"å †æ–¹æ³•å¿« {time_sorted/time_heap:.2f} å€\")âš ï¸ æ³¨æ„äº‹é¡¹æ¯”è¾ƒè§„åˆ™# ä¸åŒç±»å‹çš„æ¯”è¾ƒå¯èƒ½å‡ºé”™try:    result = min([1, '2', 3.0])  # æ··åˆç±»å‹except TypeError as e:    print(f\"ç±»å‹é”™è¯¯: {e}\")# å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯æŒ‰å­—å…¸åºstrings = ['10', '2', '30']print(f\"å­—ç¬¦ä¸²æ¯”è¾ƒ: {min(strings)}\")  # è¾“å‡º: '10' (å­—å…¸åº)# æ•°å€¼å­—ç¬¦ä¸²éœ€è¦è½¬æ¢numeric_strings = ['10', '2', '30']min_numeric = min(numeric_strings, key=int)print(f\"æŒ‰æ•°å€¼æ¯”è¾ƒ: {min_numeric}\")  # è¾“å‡º: '2'# å…ƒç»„æ¯”è¾ƒæ˜¯é€å…ƒç´ æ¯”è¾ƒtuples = [(1, 3), (1, 2), (2, 1)]print(f\"å…ƒç»„æ¯”è¾ƒ: {min(tuples)}\")  # è¾“å‡º: (1, 2)ç©ºåºåˆ—å¤„ç†# ç©ºåºåˆ—çš„ä¸åŒå¤„ç†æ–¹å¼empty_cases = [    [],    (),    set(),    '',    range(0)]for empty in empty_cases:    try:        result = min(empty)        print(f\"{type(empty).__name__}: {result}\")    except ValueError:        print(f\"{type(empty).__name__}: ç©ºåºåˆ—ï¼Œæ— æ³•è®¡ç®—æœ€å°å€¼\")        # ä½¿ç”¨defaultå‚æ•°        result = min(empty, default=\"ç©º\")        print(f\"  ä½¿ç”¨é»˜è®¤å€¼: {result}\")è‡ªå®šä¹‰å¯¹è±¡æ¯”è¾ƒclass Person:    def __init__(self, name, age):        self.name = name        self.age = age        def __lt__(self, other):        \"\"\"å®šä¹‰å°äºæ¯”è¾ƒ\"\"\"        return self.age &lt; other.age        def __str__(self):        return f\"{self.name}({self.age}å²)\"class Product:    def __init__(self, name, price):        self.name = name        self.price = price        # æ²¡æœ‰å®šä¹‰æ¯”è¾ƒæ–¹æ³•    def __str__(self):        return f\"{self.name}: {self.price}å…ƒ\"# æœ‰æ¯”è¾ƒæ–¹æ³•çš„å¯¹è±¡people = [    Person(\"å¼ ä¸‰\", 25),    Person(\"æå››\", 20),    Person(\"ç‹äº”\", 30)]youngest = min(people)print(f\"æœ€å¹´è½»çš„äºº: {youngest}\")# æ²¡æœ‰æ¯”è¾ƒæ–¹æ³•çš„å¯¹è±¡éœ€è¦ä½¿ç”¨keyproducts = [    Product(\"è‹¹æœ\", 5.0),    Product(\"é¦™è•‰\", 3.0),    Product(\"æ©™å­\", 4.0)]cheapest = min(products, key=lambda p: p.price)print(f\"æœ€ä¾¿å®œçš„äº§å“: {cheapest}\")ğŸ”— ç›¸å…³å†…å®¹ç›¸å…³å‡½æ•°  max() - æœ€å¤§å€¼å‡½æ•° - æ‰¾æœ€å¤§å€¼  sorted() - æ’åºå‡½æ•° - æ’åºæ“ä½œ  sum() - æ±‚å’Œå‡½æ•° - æ•°å€¼æ±‚å’Œ  len() - é•¿åº¦å‡½æ•° - è·å–é•¿åº¦  any() - é€»è¾‘æˆ–å‡½æ•° - ä»»ä¸€ä¸ºçœŸ  all() - é€»è¾‘ä¸å‡½æ•° - å…¨éƒ¨ä¸ºçœŸç›¸å…³æ¨¡å—  heapqæ¨¡å— - å †é˜Ÿåˆ—ç®—æ³•  operatoræ¨¡å— - æ“ä½œç¬¦å‡½æ•°  functoolsæ¨¡å— - å‡½æ•°å·¥å…·ç›¸å…³æ¦‚å¿µ  æ¯”è¾ƒè¿ç®— - æ¯”è¾ƒè¿ç®—ç¬¦  æ’åºç®—æ³• - æ’åºç®—æ³•è¯¦è§£  lambdaå‡½æ•° - åŒ¿åå‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - min()  Pythonæ’åºæŒ‡å—  æ¯”è¾ƒè¿ç®—  æ•°æ®æ¨¡å‹ - æ¯”è¾ƒæ–¹æ³•ğŸ·ï¸ æ ‡ç­¾åºåˆ—æ“ä½œ æ¯”è¾ƒ æœ€å€¼ æ•°æ®åˆ†æ æ’åºæœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/min/",
        "category": "builtins",
        "tags": ["åºåˆ—æ“ä½œ","æ¯”è¾ƒ","æœ€å€¼"]
      }
      
    
  
    
      ,
      {
        "title": "next() - è¿­ä»£å™¨å…ƒç´ è·å–å‡½æ•°",
        "content": "next() - è¿­ä»£å™¨å…ƒç´ è·å–å‡½æ•°ğŸ“ æ¦‚è¿°next() æ˜¯Pythonä¸­ç”¨äºä»è¿­ä»£å™¨è·å–ä¸‹ä¸€ä¸ªå…ƒç´ çš„å†…ç½®å‡½æ•°ã€‚å®ƒæ˜¯è¿­ä»£å™¨åè®®çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œé€šè¿‡è°ƒç”¨è¿­ä»£å™¨çš„ __next__() æ–¹æ³•æ¥è·å–åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå€¼ã€‚å½“è¿­ä»£å™¨è€—å°½æ—¶ï¼Œnext() ä¼šæŠ›å‡º StopIteration å¼‚å¸¸ï¼Œæˆ–è€…è¿”å›æŒ‡å®šçš„é»˜è®¤å€¼ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡next()å‡½æ•°çš„åŸºæœ¬è¯­æ³•å’Œç”¨æ³•  ç†è§£next()ä¸è¿­ä»£å™¨åè®®çš„å…³ç³»  å­¦ä¼šä½¿ç”¨é»˜è®¤å€¼å¤„ç†è¿­ä»£å™¨è€—å°½çš„æƒ…å†µ  äº†è§£next()åœ¨ä¸åŒåœºæ™¯ä¸‹çš„åº”ç”¨  æŒæ¡next()çš„é”™è¯¯å¤„ç†å’Œæœ€ä½³å®è·µğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºç¡€è¯­æ³•å’Œæ•°æ®ç±»å‹  è¿­ä»£å™¨å’Œå¯è¿­ä»£å¯¹è±¡çš„æ¦‚å¿µ  iter()å‡½æ•°çš„ä½¿ç”¨  å¼‚å¸¸å¤„ç†æœºåˆ¶  ç”Ÿæˆå™¨åŸºç¡€çŸ¥è¯†ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µnext() å‡½æ•°é€šè¿‡è°ƒç”¨è¿­ä»£å™¨å¯¹è±¡çš„ __next__() æ–¹æ³•æ¥è·å–ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å½“æ²¡æœ‰æ›´å¤šå…ƒç´ æ—¶ï¼Œä¼šæŠ›å‡º StopIteration å¼‚å¸¸ã€‚å¦‚æœæä¾›äº†é»˜è®¤å€¼ï¼Œåˆ™åœ¨è¿­ä»£å™¨è€—å°½æ—¶è¿”å›è¯¥é»˜è®¤å€¼è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚è¯­æ³•æ ¼å¼# åŸºæœ¬å½¢å¼next(iterator)# å¸¦é»˜è®¤å€¼å½¢å¼next(iterator, default)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      è¯´æ˜                  iterator      è¿­ä»£å™¨å¯¹è±¡      æ˜¯      å®ç°äº†__next__()æ–¹æ³•çš„å¯¹è±¡              default      ä»»æ„ç±»å‹      å¦      å½“è¿­ä»£å™¨è€—å°½æ—¶è¿”å›çš„é»˜è®¤å€¼      è¿”å›å€¼  è¿”å›ç±»å‹: è¿­ä»£å™¨ä¸­ä¸‹ä¸€ä¸ªå…ƒç´ çš„ç±»å‹  å¼‚å¸¸: å½“è¿­ä»£å™¨è€—å°½ä¸”æœªæä¾›é»˜è®¤å€¼æ—¶æŠ›å‡ºStopIteration  é»˜è®¤å€¼: å½“è¿­ä»£å™¨è€—å°½ä¸”æä¾›äº†é»˜è®¤å€¼æ—¶è¿”å›è¯¥é»˜è®¤å€¼ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€next()æ“ä½œ# åŸºç¡€next()æ“ä½œç¤ºä¾‹print(\"åŸºç¡€next()æ“ä½œç¤ºä¾‹:\")# 1. åŸºæœ¬çš„next()ä½¿ç”¨print(\"\\n1. åŸºæœ¬çš„next()ä½¿ç”¨:\")# ä»åˆ—è¡¨åˆ›å»ºè¿­ä»£å™¨test_list = [1, 2, 3, 4, 5]list_iter = iter(test_list)print(f\"åŸå§‹åˆ—è¡¨: {test_list}\")print(f\"è¿­ä»£å™¨ç±»å‹: {type(list_iter)}\")# é€ä¸ªè·å–å…ƒç´ print(\"\\né€ä¸ªè·å–å…ƒç´ :\")for i in range(len(test_list)):    value = next(list_iter)    print(f\"  ç¬¬{i+1}ä¸ªå…ƒç´ : {value}\")# å°è¯•è·å–æ›´å¤šå…ƒç´ ï¼ˆä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰print(\"\\nå°è¯•è·å–ç¬¬6ä¸ªå…ƒç´ :\")try:    value = next(list_iter)    print(f\"  ç¬¬6ä¸ªå…ƒç´ : {value}\")except StopIteration:    print(\"  StopIteration: è¿­ä»£å™¨å·²è€—å°½\")# 2. ä½¿ç”¨é»˜è®¤å€¼print(\"\\n2. ä½¿ç”¨é»˜è®¤å€¼:\")# é‡æ–°åˆ›å»ºè¿­ä»£å™¨list_iter2 = iter([10, 20, 30])print(\"è·å–å…ƒç´ ï¼ˆå¸¦é»˜è®¤å€¼ï¼‰:\")for i in range(5):  # å°è¯•è·å–5ä¸ªå…ƒç´ ï¼Œä½†åªæœ‰3ä¸ª    value = next(list_iter2, \"æ²¡æœ‰æ›´å¤šå…ƒç´ \")    print(f\"  ç¬¬{i+1}æ¬¡è°ƒç”¨: {value}\")# 3. ä¸åŒæ•°æ®ç±»å‹çš„è¿­ä»£å™¨print(\"\\n3. ä¸åŒæ•°æ®ç±»å‹çš„è¿­ä»£å™¨:\")# å­—ç¬¦ä¸²è¿­ä»£å™¨string_iter = iter(\"Hello\")print(f\"å­—ç¬¦ä¸²è¿­ä»£:\")while True:    char = next(string_iter, None)    if char is None:        break    print(f\"  å­—ç¬¦: '{char}'\")# å­—å…¸è¿­ä»£å™¨dict_data = {'a': 1, 'b': 2, 'c': 3}dict_iter = iter(dict_data)print(f\"\\nå­—å…¸é”®è¿­ä»£:\")while True:    key = next(dict_iter, None)    if key is None:        break    print(f\"  é”®: '{key}', å€¼: {dict_data[key]}\")# èŒƒå›´è¿­ä»£å™¨range_iter = iter(range(3, 7))print(f\"\\nèŒƒå›´è¿­ä»£:\")while True:    num = next(range_iter, \"ç»“æŸ\")    if num == \"ç»“æŸ\":        break    print(f\"  æ•°å­—: {num}\")# 4. ç”Ÿæˆå™¨ä¸next()print(\"\\n4. ç”Ÿæˆå™¨ä¸next():\")def simple_generator():    \"\"\"ç®€å•çš„ç”Ÿæˆå™¨å‡½æ•°\"\"\"    yield \"ç¬¬ä¸€ä¸ªå€¼\"    yield \"ç¬¬äºŒä¸ªå€¼\"    yield \"ç¬¬ä¸‰ä¸ªå€¼\"gen = simple_generator()print(\"ç”Ÿæˆå™¨è¿­ä»£:\")for i in range(4):  # å°è¯•è·å–4ä¸ªå€¼    value = next(gen, \"ç”Ÿæˆå™¨ç»“æŸ\")    print(f\"  ç¬¬{i+1}æ¬¡: {value}\")# 5. æ— é™ç”Ÿæˆå™¨ä¸next()print(\"\\n5. æ— é™ç”Ÿæˆå™¨ä¸next():\")def infinite_counter(start=0):    \"\"\"æ— é™è®¡æ•°å™¨ç”Ÿæˆå™¨\"\"\"    count = start    while True:        yield count        count += 1counter = infinite_counter(10)print(\"æ— é™è®¡æ•°å™¨ï¼ˆè·å–å‰5ä¸ªå€¼ï¼‰:\")for i in range(5):    value = next(counter)    print(f\"  è®¡æ•°: {value}\")# 6. æ–‡ä»¶è¿­ä»£å™¨æ¨¡æ‹Ÿprint(\"\\n6. æ–‡ä»¶è¿­ä»£å™¨æ¨¡æ‹Ÿ:\")class MockFileIterator:    \"\"\"æ¨¡æ‹Ÿæ–‡ä»¶è¿­ä»£å™¨\"\"\"    def __init__(self, lines):        self.lines = lines        self.index = 0        def __iter__(self):        return self        def __next__(self):        if self.index &gt;= len(self.lines):            raise StopIteration        line = self.lines[self.index]        self.index += 1        return line# æ¨¡æ‹Ÿæ–‡ä»¶å†…å®¹file_lines = [    \"ç¬¬ä¸€è¡Œå†…å®¹\\n\",    \"ç¬¬äºŒè¡Œå†…å®¹\\n\",    \"ç¬¬ä¸‰è¡Œå†…å®¹\\n\",    \"æœ€åä¸€è¡Œ\\n\"]file_iter = MockFileIterator(file_lines)print(\"æ–‡ä»¶è¡Œè¿­ä»£:\")line_num = 1while True:    line = next(file_iter, None)    if line is None:        print(\"  æ–‡ä»¶è¯»å–å®Œæ¯•\")        break    print(f\"  è¡Œ{line_num}: {line.strip()}\")    line_num += 1# 7. next()ä¸å†…ç½®å‡½æ•°ç»“åˆprint(\"\\n7. next()ä¸å†…ç½®å‡½æ•°ç»“åˆ:\")# ä¸filter()ç»“åˆnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]even_iter = filter(lambda x: x % 2 == 0, numbers)print(f\"åŸå§‹æ•°å­—: {numbers}\")print(\"è·å–å‰3ä¸ªå¶æ•°:\")for i in range(3):    even = next(even_iter, \"æ²¡æœ‰æ›´å¤šå¶æ•°\")    print(f\"  å¶æ•°{i+1}: {even}\")# ä¸map()ç»“åˆsquare_iter = map(lambda x: x**2, [1, 2, 3, 4])print(\"\\nå¹³æ–¹æ•°è¿­ä»£:\")while True:    square = next(square_iter, None)    if square is None:        break    print(f\"  å¹³æ–¹æ•°: {square}\")# ä¸enumerate()ç»“åˆdata = ['a', 'b', 'c']enum_iter = enumerate(data, start=1)print(f\"\\næšä¸¾è¿­ä»£ (æ•°æ®: {data}):\")while True:    item = next(enum_iter, None)    if item is None:        break    index, value = item    print(f\"  ç´¢å¼•{index}: {value}\")é«˜çº§next()åº”ç”¨# é«˜çº§next()åº”ç”¨print(\"é«˜çº§next()åº”ç”¨:\")# 1. æ¡ä»¶è·å–å’Œæ—©æœŸç»ˆæ­¢print(\"\\n1. æ¡ä»¶è·å–å’Œæ—©æœŸç»ˆæ­¢:\")def conditional_next(iterator, condition_func, max_attempts=10):    \"\"\"æ¡ä»¶è·å–ï¼šè·å–æ»¡è¶³æ¡ä»¶çš„ä¸‹ä¸€ä¸ªå…ƒç´ \"\"\"    attempts = 0    while attempts &lt; max_attempts:        try:            value = next(iterator)            if condition_func(value):                return value            attempts += 1        except StopIteration:            return None    return None# æµ‹è¯•æ¡ä»¶è·å–test_data = [1, 3, 5, 2, 7, 9, 4, 11, 6, 8]data_iter = iter(test_data)print(f\"æµ‹è¯•æ•°æ®: {test_data}\")print(\"æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¶æ•°:\")first_even = conditional_next(data_iter, lambda x: x % 2 == 0)print(f\"  ç¬¬ä¸€ä¸ªå¶æ•°: {first_even}\")print(\"æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå¤§äº5çš„æ•°:\")next_large = conditional_next(data_iter, lambda x: x &gt; 5)print(f\"  ä¸‹ä¸€ä¸ªå¤§äº5çš„æ•°: {next_large}\")# 2. æ‰¹é‡è·å–print(\"\\n2. æ‰¹é‡è·å–:\")def get_batch(iterator, batch_size, default=None):    \"\"\"æ‰¹é‡è·å–å…ƒç´ \"\"\"    batch = []    for _ in range(batch_size):        item = next(iterator, default)        if item == default:            break        batch.append(item)    return batch# æµ‹è¯•æ‰¹é‡è·å–large_data = list(range(1, 16))  # 1åˆ°15large_iter = iter(large_data)print(f\"å¤§æ•°æ®é›†: {large_data}\")print(\"æ‰¹é‡è·å–ï¼ˆæ¯æ‰¹3ä¸ªï¼‰:\")batch_num = 1while True:    batch = get_batch(large_iter, 3, \"END\")    if not batch:        print(\"  æ‰€æœ‰æ•°æ®è·å–å®Œæ¯•\")        break    print(f\"  æ‰¹æ¬¡{batch_num}: {batch}\")    batch_num += 1# 3. äº¤æ›¿è·å–print(\"\\n3. äº¤æ›¿è·å–:\")def alternating_next(*iterators):    \"\"\"ä»å¤šä¸ªè¿­ä»£å™¨äº¤æ›¿è·å–å…ƒç´ \"\"\"    results = []    active_iterators = list(iterators)        while active_iterators:        for i, iterator in enumerate(active_iterators[:]):            try:                value = next(iterator)                results.append(value)            except StopIteration:                active_iterators.remove(iterator)        return results# æµ‹è¯•äº¤æ›¿è·å–iter1 = iter([1, 2, 3, 4])iter2 = iter(['a', 'b', 'c'])iter3 = iter([10, 20])print(\"ä¸‰ä¸ªè¿­ä»£å™¨:\")print(f\"  è¿­ä»£å™¨1: [1, 2, 3, 4]\")print(f\"  è¿­ä»£å™¨2: ['a', 'b', 'c']\")print(f\"  è¿­ä»£å™¨3: [10, 20]\")alternating_result = alternating_next(iter1, iter2, iter3)print(f\"äº¤æ›¿è·å–ç»“æœ: {alternating_result}\")# 4. çª¥è§†ä¸‹ä¸€ä¸ªå…ƒç´ ï¼ˆä¸æ¶ˆè´¹ï¼‰print(\"\\n4. çª¥è§†ä¸‹ä¸€ä¸ªå…ƒç´ :\")class PeekableIterator:    \"\"\"å¯çª¥è§†çš„è¿­ä»£å™¨\"\"\"    def __init__(self, iterable):        self.iterator = iter(iterable)        self.peeked_value = None        self.has_peeked = False        def __iter__(self):        return self        def __next__(self):        if self.has_peeked:            value = self.peeked_value            self.has_peeked = False            self.peeked_value = None            return value        else:            return next(self.iterator)        def peek(self, default=None):        \"\"\"çª¥è§†ä¸‹ä¸€ä¸ªå…ƒç´ è€Œä¸æ¶ˆè´¹å®ƒ\"\"\"        if not self.has_peeked:            try:                self.peeked_value = next(self.iterator)                self.has_peeked = True            except StopIteration:                return default        return self.peeked_value# æµ‹è¯•çª¥è§†è¿­ä»£å™¨peekable = PeekableIterator([1, 2, 3, 4, 5])print(\"çª¥è§†è¿­ä»£å™¨æ¼”ç¤º:\")print(f\"çª¥è§†ç¬¬ä¸€ä¸ªå…ƒç´ : {peekable.peek()}\")print(f\"å†æ¬¡çª¥è§†: {peekable.peek()}\")print(f\"å®é™…è·å–: {next(peekable)}\")print(f\"çª¥è§†ä¸‹ä¸€ä¸ª: {peekable.peek()}\")print(f\"è·å–å‰©ä½™å…ƒç´ : {list(peekable)}\")# 5. å¸¦è®¡æ•°çš„next()print(\"\\n5. å¸¦è®¡æ•°çš„next():\")class CountingIterator:    \"\"\"å¸¦è®¡æ•°åŠŸèƒ½çš„è¿­ä»£å™¨åŒ…è£…å™¨\"\"\"    def __init__(self, iterable):        self.iterator = iter(iterable)        self.count = 0        self.total_accessed = 0        def __iter__(self):        return self        def __next__(self):        try:            value = next(self.iterator)            self.count += 1            self.total_accessed += 1            return value        except StopIteration:            raise StopIteration        def next_with_info(self, default=None):        \"\"\"è·å–ä¸‹ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›ç»Ÿè®¡ä¿¡æ¯\"\"\"        try:            value = next(self)            return {                'value': value,                'position': self.count,                'total_accessed': self.total_accessed,                'has_more': True            }        except StopIteration:            return {                'value': default,                'position': self.count,                'total_accessed': self.total_accessed,                'has_more': False            }        def get_stats(self):        \"\"\"è·å–ç»Ÿè®¡ä¿¡æ¯\"\"\"        return {            'current_position': self.count,            'total_accessed': self.total_accessed        }# æµ‹è¯•è®¡æ•°è¿­ä»£å™¨counting_iter = CountingIterator(['apple', 'banana', 'cherry', 'date'])print(\"è®¡æ•°è¿­ä»£å™¨æ¼”ç¤º:\")for i in range(6):  # å°è¯•è·å–6ä¸ªå…ƒç´     info = counting_iter.next_with_info(\"æ— æ›´å¤šå…ƒç´ \")    print(f\"  ç¬¬{i+1}æ¬¡: å€¼='{info['value']}', ä½ç½®={info['position']}, è¿˜æœ‰æ›´å¤š={info['has_more']}\")stats = counting_iter.get_stats()print(f\"æœ€ç»ˆç»Ÿè®¡: {stats}\")# 6. æ¡ä»¶åœæ­¢çš„è¿­ä»£print(\"\\n6. æ¡ä»¶åœæ­¢çš„è¿­ä»£:\")def next_until(iterator, stop_condition, default=None):    \"\"\"è·å–å…ƒç´ ç›´åˆ°æ»¡è¶³åœæ­¢æ¡ä»¶\"\"\"    results = []    while True:        try:            value = next(iterator)            if stop_condition(value):                # æ‰¾åˆ°åœæ­¢æ¡ä»¶ï¼Œå°†è¯¥å…ƒç´ æ”¾å›ï¼ˆé€šè¿‡é‡æ–°åˆ›å»ºè¿­ä»£å™¨æ¨¡æ‹Ÿï¼‰                break            results.append(value)        except StopIteration:            break    return results# æµ‹è¯•æ¡ä»¶åœæ­¢test_numbers = [1, 3, 5, 7, 8, 9, 11, 13, 14, 15]number_iter = iter(test_numbers)print(f\"æµ‹è¯•æ•°å­—: {test_numbers}\")print(\"è·å–å…ƒç´ ç›´åˆ°é‡åˆ°å¶æ•°:\")before_even = next_until(number_iter, lambda x: x % 2 == 0)print(f\"  å¶æ•°å‰çš„å…ƒç´ : {before_even}\")# è·å–é‚£ä¸ªå¶æ•°first_even = next(number_iter, None)print(f\"  ç¬¬ä¸€ä¸ªå¶æ•°: {first_even}\")# è·å–å‰©ä½™å…ƒç´ remaining = list(number_iter)print(f\"  å‰©ä½™å…ƒç´ : {remaining}\")# 7. å¤šçº§è¿­ä»£å™¨print(\"\\n7. å¤šçº§è¿­ä»£å™¨:\")class NestedIterator:    \"\"\"åµŒå¥—è¿­ä»£å™¨\"\"\"    def __init__(self, nested_iterable):        self.main_iter = iter(nested_iterable)        self.current_iter = None        def __iter__(self):        return self        def __next__(self):        while True:            if self.current_iter is None:                try:                    next_iterable = next(self.main_iter)                    self.current_iter = iter(next_iterable)                except StopIteration:                    raise StopIteration                        try:                return next(self.current_iter)            except StopIteration:                self.current_iter = None                # ç»§ç»­å¤–å±‚å¾ªç¯å°è¯•ä¸‹ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡# æµ‹è¯•åµŒå¥—è¿­ä»£å™¨nested_data = [    [1, 2, 3],    \"abc\",    range(10, 13),    [20, 21]]nested_iter = NestedIterator(nested_data)print(f\"åµŒå¥—æ•°æ®: {nested_data}\")print(\"æ‰å¹³åŒ–è¿­ä»£:\")flattened = []while True:    try:        value = next(nested_iter)        flattened.append(value)    except StopIteration:        breakprint(f\"  æ‰å¹³åŒ–ç»“æœ: {flattened}\")# ä½¿ç”¨next()é€ä¸ªè·å–nested_iter2 = NestedIterator(nested_data)print(\"\\né€ä¸ªè·å–å‰8ä¸ªå…ƒç´ :\")for i in range(8):    value = next(nested_iter2, \"ç»“æŸ\")    print(f\"  å…ƒç´ {i+1}: {value}\")é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ# next()å‡½æ•°çš„é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µprint(\"next()å‡½æ•°çš„é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ:\")# 1. StopIterationå¼‚å¸¸å¤„ç†print(\"\\n1. StopIterationå¼‚å¸¸å¤„ç†:\")def safe_next_demo():    \"\"\"å®‰å…¨çš„next()ä½¿ç”¨æ¼”ç¤º\"\"\"    data = [1, 2, 3]    iterator = iter(data)        print(f\"æ•°æ®: {data}\")    print(\"å®‰å…¨è·å–å…ƒç´ :\")        # æ–¹æ³•1: ä½¿ç”¨try-except    print(\"\\næ–¹æ³•1: try-exceptå¤„ç†\")    count = 0    while True:        try:            value = next(iterator)            count += 1            print(f\"  å…ƒç´ {count}: {value}\")        except StopIteration:            print(f\"  è¿­ä»£ç»“æŸï¼Œå…±è·å–{count}ä¸ªå…ƒç´ \")            break        # æ–¹æ³•2: ä½¿ç”¨é»˜è®¤å€¼    print(\"\\næ–¹æ³•2: ä½¿ç”¨é»˜è®¤å€¼\")    iterator2 = iter(data)    sentinel = object()  # ä½¿ç”¨å”¯ä¸€å¯¹è±¡ä½œä¸ºå“¨å…µ    count = 0        while True:        value = next(iterator2, sentinel)        if value is sentinel:            print(f\"  è¿­ä»£ç»“æŸï¼Œå…±è·å–{count}ä¸ªå…ƒç´ \")            break        count += 1        print(f\"  å…ƒç´ {count}: {value}\")        # æ–¹æ³•3: ä½¿ç”¨Noneä½œä¸ºé»˜è®¤å€¼ï¼ˆéœ€è¦æ³¨æ„æ•°æ®ä¸­ä¸åŒ…å«Noneï¼‰    print(\"\\næ–¹æ³•3: ä½¿ç”¨Noneä½œä¸ºé»˜è®¤å€¼\")    iterator3 = iter(data)    count = 0        while True:        value = next(iterator3, None)        if value is None:            print(f\"  è¿­ä»£ç»“æŸï¼Œå…±è·å–{count}ä¸ªå…ƒç´ \")            break        count += 1        print(f\"  å…ƒç´ {count}: {value}\")safe_next_demo()# 2. ç©ºè¿­ä»£å™¨å¤„ç†print(\"\\n2. ç©ºè¿­ä»£å™¨å¤„ç†:\")def handle_empty_iterator():    \"\"\"å¤„ç†ç©ºè¿­ä»£å™¨\"\"\"    empty_list = []    empty_iter = iter(empty_list)        print(f\"ç©ºåˆ—è¡¨: {empty_list}\")        # ç›´æ¥è°ƒç”¨next()ä¼šæŠ›å‡ºå¼‚å¸¸    print(\"\\nç›´æ¥è°ƒç”¨next():\")    try:        value = next(empty_iter)        print(f\"  è·å–åˆ°å€¼: {value}\")    except StopIteration:        print(\"  StopIteration: ç©ºè¿­ä»£å™¨\")        # ä½¿ç”¨é»˜è®¤å€¼    empty_iter2 = iter(empty_list)    default_value = \"ç©ºè¿­ä»£å™¨\"    value = next(empty_iter2, default_value)    print(f\"\\nä½¿ç”¨é»˜è®¤å€¼: {value}\")        # æ£€æŸ¥è¿­ä»£å™¨æ˜¯å¦ä¸ºç©ºçš„æ–¹æ³•    def is_iterator_empty(iterator, restore=True):        \"\"\"æ£€æŸ¥è¿­ä»£å™¨æ˜¯å¦ä¸ºç©º\"\"\"        try:            first_value = next(iterator)            if restore:                # æ³¨æ„ï¼šè¿™é‡Œæ— æ³•çœŸæ­£\"æ¢å¤\"è¿­ä»£å™¨çŠ¶æ€                # å®é™…åº”ç”¨ä¸­éœ€è¦å…¶ä»–ç­–ç•¥                pass            return False, first_value        except StopIteration:            return True, None        empty_iter3 = iter(empty_list)    is_empty, first_val = is_iterator_empty(empty_iter3, restore=False)    print(f\"\\nè¿­ä»£å™¨æ˜¯å¦ä¸ºç©º: {is_empty}\")        # éç©ºè¿­ä»£å™¨æµ‹è¯•    non_empty_iter = iter([1, 2, 3])    is_empty, first_val = is_iterator_empty(non_empty_iter, restore=False)    print(f\"éç©ºè¿­ä»£å™¨æ˜¯å¦ä¸ºç©º: {is_empty}, ç¬¬ä¸€ä¸ªå€¼: {first_val}\")handle_empty_iterator()# 3. åŒ…å«Noneå€¼çš„è¿­ä»£å™¨print(\"\\n3. åŒ…å«Noneå€¼çš„è¿­ä»£å™¨:\")def handle_none_values():    \"\"\"å¤„ç†åŒ…å«Noneå€¼çš„è¿­ä»£å™¨\"\"\"    data_with_none = [1, None, 3, None, 5]    iter_with_none = iter(data_with_none)        print(f\"åŒ…å«Noneçš„æ•°æ®: {data_with_none}\")        # é—®é¢˜ï¼šä½¿ç”¨Noneä½œä¸ºé»˜è®¤å€¼ä¼šæ··æ·†    print(\"\\nä½¿ç”¨Noneä½œä¸ºé»˜è®¤å€¼çš„é—®é¢˜:\")    count = 0    while True:        value = next(iter_with_none, None)        if value is None:            # æ— æ³•åŒºåˆ†æ˜¯æ•°æ®ä¸­çš„Noneè¿˜æ˜¯è¿­ä»£ç»“æŸ            print(f\"  é‡åˆ°Noneï¼Œä½†ä¸ç¡®å®šæ˜¯æ•°æ®è¿˜æ˜¯ç»“æŸæ ‡å¿—\")            break        count += 1        print(f\"  å…ƒç´ {count}: {value}\")        # è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å”¯ä¸€å¯¹è±¡ä½œä¸ºå“¨å…µ    print(\"\\nè§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å”¯ä¸€å“¨å…µå¯¹è±¡\")    iter_with_none2 = iter(data_with_none)    sentinel = object()  # å”¯ä¸€å¯¹è±¡    count = 0        while True:        value = next(iter_with_none2, sentinel)        if value is sentinel:            print(f\"  è¿­ä»£ç»“æŸï¼Œå…±å¤„ç†{count}ä¸ªå…ƒç´ \")            break        count += 1        print(f\"  å…ƒç´ {count}: {value} (ç±»å‹: {type(value).__name__})\")handle_none_values()# 4. å¼‚å¸¸ä¼ æ’­print(\"\\n4. å¼‚å¸¸ä¼ æ’­:\")def exception_propagation():    \"\"\"å¼‚å¸¸ä¼ æ’­æ¼”ç¤º\"\"\"        class ProblematicIterator:        \"\"\"æœ‰é—®é¢˜çš„è¿­ä»£å™¨ï¼Œä¼šæŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸\"\"\"        def __init__(self, data):            self.data = data            self.index = 0                def __iter__(self):            return self                def __next__(self):            if self.index &gt;= len(self.data):                raise StopIteration                        value = self.data[self.index]            self.index += 1                        # æ¨¡æ‹Ÿåœ¨ç‰¹å®šå€¼æ—¶æŠ›å‡ºå¼‚å¸¸            if value == \"error\":                raise ValueError(f\"å¤„ç†å€¼ '{value}' æ—¶å‘ç”Ÿé”™è¯¯\")                        return value        problematic_data = [\"a\", \"b\", \"error\", \"c\", \"d\"]    problematic_iter = ProblematicIterator(problematic_data)        print(f\"é—®é¢˜æ•°æ®: {problematic_data}\")    print(\"å¤„ç†è¿‡ç¨‹:\")        count = 0    while True:        try:            value = next(problematic_iter)            count += 1            print(f\"  æˆåŠŸè·å–å…ƒç´ {count}: {value}\")        except StopIteration:            print(f\"  è¿­ä»£æ­£å¸¸ç»“æŸï¼Œå…±å¤„ç†{count}ä¸ªå…ƒç´ \")            break        except ValueError as e:            print(f\"  æ•è·åˆ°ValueError: {e}\")            print(f\"  ç»§ç»­å¤„ç†å‰©ä½™å…ƒç´ ...\")            # ç»§ç»­è¿­ä»£        except Exception as e:            print(f\"  æ•è·åˆ°å…¶ä»–å¼‚å¸¸: {type(e).__name__}: {e}\")            breakexception_propagation()# 5. æ€§èƒ½è€ƒè™‘print(\"\\n5. æ€§èƒ½è€ƒè™‘:\")import timedef performance_comparison():    \"\"\"æ€§èƒ½æ¯”è¾ƒ\"\"\"    large_data = list(range(100000))    iterations = 1000        print(f\"æ€§èƒ½æµ‹è¯• (æ•°æ®å¤§å°: {len(large_data)}, è¿­ä»£æ¬¡æ•°: {iterations}):\")        # æ–¹æ³•1: ä½¿ç”¨forå¾ªç¯    start_time = time.time()    for _ in range(iterations):        count = 0        for item in large_data:            count += 1            if count &gt;= 10:  # åªå¤„ç†å‰10ä¸ª                break    for_loop_time = time.time() - start_time        # æ–¹æ³•2: ä½¿ç”¨next()å’Œtry-except    start_time = time.time()    for _ in range(iterations):        iterator = iter(large_data)        count = 0        try:            while count &lt; 10:                value = next(iterator)                count += 1        except StopIteration:            pass    next_try_time = time.time() - start_time        # æ–¹æ³•3: ä½¿ç”¨next()å’Œé»˜è®¤å€¼    start_time = time.time()    for _ in range(iterations):        iterator = iter(large_data)        count = 0        while count &lt; 10:            value = next(iterator, None)            if value is None:                break            count += 1    next_default_time = time.time() - start_time        print(f\"  forå¾ªç¯: {for_loop_time:.6f}ç§’\")    print(f\"  next() + try-except: {next_try_time:.6f}ç§’\")    print(f\"  next() + é»˜è®¤å€¼: {next_default_time:.6f}ç§’\")        fastest = min(for_loop_time, next_try_time, next_default_time)    if fastest == for_loop_time:        print(f\"  æœ€å¿«: forå¾ªç¯\")    elif fastest == next_try_time:        print(f\"  æœ€å¿«: next() + try-except\")    else:        print(f\"  æœ€å¿«: next() + é»˜è®¤å€¼\")performance_comparison()# 6. å†…å­˜ä½¿ç”¨æ³¨æ„äº‹é¡¹print(\"\\n6. å†…å­˜ä½¿ç”¨æ³¨æ„äº‹é¡¹:\")def memory_considerations():    \"\"\"å†…å­˜ä½¿ç”¨è€ƒè™‘\"\"\"        # é—®é¢˜ï¼šä¿å­˜æ‰€æœ‰è·å–çš„å€¼    def memory_inefficient_approach(iterator):        \"\"\"å†…å­˜ä½æ•ˆçš„æ–¹æ³•\"\"\"        all_values = []        while True:            try:                value = next(iterator)                all_values.append(value)  # ä¿å­˜æ‰€æœ‰å€¼            except StopIteration:                break        return all_values        # è§£å†³æ–¹æ¡ˆï¼šåªä¿å­˜å¿…è¦çš„ä¿¡æ¯    def memory_efficient_approach(iterator, process_func):        \"\"\"å†…å­˜é«˜æ•ˆçš„æ–¹æ³•\"\"\"        count = 0        total = 0        while True:            try:                value = next(iterator)                result = process_func(value)                count += 1                total += result                # ä¸ä¿å­˜åŸå§‹å€¼ï¼Œåªä¿å­˜å¤„ç†ç»“æœçš„ç»Ÿè®¡            except StopIteration:                break        return {'count': count, 'total': total, 'average': total / count if count &gt; 0 else 0}        # æµ‹è¯•æ•°æ®    test_data = list(range(1000))        print(\"å†…å­˜ä½¿ç”¨æ¯”è¾ƒ:\")        # ä½æ•ˆæ–¹æ³•    iter1 = iter(test_data)    result1 = memory_inefficient_approach(iter1)    print(f\"  ä½æ•ˆæ–¹æ³•: ä¿å­˜äº†{len(result1)}ä¸ªå€¼\")        # é«˜æ•ˆæ–¹æ³•    iter2 = iter(test_data)    result2 = memory_efficient_approach(iter2, lambda x: x ** 2)    print(f\"  é«˜æ•ˆæ–¹æ³•: åªä¿å­˜ç»Ÿè®¡ä¿¡æ¯ {result2}\")        print(\"\\nå»ºè®®:\")    print(\"  1. é¿å…ä¸å¿…è¦åœ°ä¿å­˜æ‰€æœ‰è¿­ä»£å€¼\")    print(\"  2. åŠæ—¶å¤„ç†å’Œé‡Šæ”¾ä¸éœ€è¦çš„æ•°æ®\")    print(\"  3. ä½¿ç”¨ç”Ÿæˆå™¨è€Œä¸æ˜¯åˆ—è¡¨æ¥å¤„ç†å¤§æ•°æ®é›†\")    print(\"  4. è€ƒè™‘ä½¿ç”¨itertoolsæ¨¡å—çš„é«˜æ•ˆå·¥å…·\")memory_considerations()print(\"\\né”™è¯¯å¤„ç†æœ€ä½³å®è·µ:\")print(\"1. ä¼˜å…ˆä½¿ç”¨é»˜è®¤å€¼è€Œä¸æ˜¯try-exceptï¼ˆå¦‚æœåˆé€‚ï¼‰\")print(\"2. ä½¿ç”¨å”¯ä¸€å¯¹è±¡ä½œä¸ºå“¨å…µå€¼é¿å…ä¸æ•°æ®æ··æ·†\")print(\"3. æ­£ç¡®å¤„ç†è¿­ä»£å™¨ä¸­å¯èƒ½æŠ›å‡ºçš„å…¶ä»–å¼‚å¸¸\")print(\"4. æ³¨æ„ç©ºè¿­ä»£å™¨çš„ç‰¹æ®Šæƒ…å†µ\")print(\"5. è€ƒè™‘æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨çš„å¹³è¡¡\")print(\"6. åœ¨å¾ªç¯ä¸­ä½¿ç”¨next()æ—¶è¦æœ‰æ˜ç¡®çš„ç»ˆæ­¢æ¡ä»¶\")âš ï¸ æ³¨æ„äº‹é¡¹å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ# next()å‡½æ•°çš„å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µprint(\"next()å‡½æ•°å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ:\")# é™·é˜±1: è¿­ä»£å™¨çŠ¶æ€çš„è¯¯è§£print(\"\\né™·é˜±1: è¿­ä»£å™¨çŠ¶æ€çš„è¯¯è§£\")data = [1, 2, 3, 4, 5]iterator = iter(data)print(f\"åŸå§‹æ•°æ®: {data}\")print(\"è·å–å‰ä¸¤ä¸ªå…ƒç´ :\")first = next(iterator)second = next(iterator)print(f\"  ç¬¬ä¸€ä¸ª: {first}\")print(f\"  ç¬¬äºŒä¸ª: {second}\")print(\"\\né”™è¯¯ç†è§£ï¼šè®¤ä¸ºè¿­ä»£å™¨ä¼šé‡ç½®\")print(\"å®é™…æƒ…å†µï¼šè¿­ä»£å™¨è®°ä½å½“å‰ä½ç½®\")third = next(iterator)print(f\"  ç¬¬ä¸‰ä¸ª: {third}\")print(\"\\nå¦‚æœéœ€è¦é‡æ–°å¼€å§‹ï¼Œå¿…é¡»åˆ›å»ºæ–°çš„è¿­ä»£å™¨:\")new_iterator = iter(data)first_again = next(new_iterator)print(f\"  æ–°è¿­ä»£å™¨çš„ç¬¬ä¸€ä¸ª: {first_again}\")# é™·é˜±2: é»˜è®¤å€¼çš„ç±»å‹é™·é˜±print(\"\\né™·é˜±2: é»˜è®¤å€¼çš„ç±»å‹é™·é˜±\")number_data = [1, 2, 3]number_iter = iter(number_data)print(f\"æ•°å­—æ•°æ®: {number_data}\")print(\"è·å–å…ƒç´ ï¼ˆä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºé»˜è®¤å€¼ï¼‰:\")for i in range(5):    value = next(number_iter, \"ç»“æŸ\")    print(f\"  ç¬¬{i+1}æ¬¡: {value} (ç±»å‹: {type(value).__name__})\")        # é—®é¢˜ï¼šç±»å‹ä¸ä¸€è‡´å¯èƒ½å¯¼è‡´åç»­å¤„ç†é”™è¯¯    if isinstance(value, int):        print(f\"    æ•°å­—å¤„ç†: {value * 2}\")    else:        print(f\"    éæ•°å­—å¤„ç†: {value}\")print(\"\\nå»ºè®®ï¼šä½¿ç”¨ç±»å‹ä¸€è‡´çš„é»˜è®¤å€¼æˆ–ç‰¹æ®Šæ ‡è®°\")number_iter2 = iter(number_data)SENTINEL = object()  # ç‰¹æ®Šæ ‡è®°å¯¹è±¡for i in range(5):    value = next(number_iter2, SENTINEL)    if value is SENTINEL:        print(f\"  ç¬¬{i+1}æ¬¡: è¿­ä»£ç»“æŸ\")        break    else:        print(f\"  ç¬¬{i+1}æ¬¡: {value} (æ•°å­—å¤„ç†: {value * 2})\")# é™·é˜±3: åœ¨å¾ªç¯ä¸­ä¿®æ”¹è¿­ä»£å™¨æºprint(\"\\né™·é˜±3: åœ¨å¾ªç¯ä¸­ä¿®æ”¹è¿­ä»£å™¨æº\")mutable_list = [1, 2, 3, 4, 5]list_iter = iter(mutable_list)print(f\"åŸå§‹åˆ—è¡¨: {mutable_list}\")print(\"å±é™©æ“ä½œï¼šè¿­ä»£æ—¶ä¿®æ”¹æºåˆ—è¡¨\")count = 0try:    while count &lt; 3:        value = next(list_iter)        print(f\"  è·å–: {value}\")                if value == 2:            mutable_list.append(6)  # ä¿®æ”¹æºåˆ—è¡¨            print(f\"    ä¿®æ”¹ååˆ—è¡¨: {mutable_list}\")                count += 1except StopIteration:    print(\"  è¿­ä»£æ„å¤–ç»“æŸ\")print(\"\\nå®‰å…¨åšæ³•ï¼šè¿­ä»£å‰¯æœ¬æˆ–ä½¿ç”¨ä¸å¯å˜æ•°æ®\")original_list = [1, 2, 3, 4, 5]safe_iter = iter(original_list.copy())  # è¿­ä»£å‰¯æœ¬count = 0while count &lt; 3:    value = next(safe_iter, None)    if value is None:        break    print(f\"  å®‰å…¨è·å–: {value}\")        if value == 2:        original_list.append(6)  # ä¿®æ”¹åŸåˆ—è¡¨ä¸å½±å“è¿­ä»£        print(f\"    åŸåˆ—è¡¨å˜ä¸º: {original_list}\")        count += 1# é™·é˜±4: æ— é™è¿­ä»£å™¨çš„å¤„ç†print(\"\\né™·é˜±4: æ— é™è¿­ä»£å™¨çš„å¤„ç†\")def infinite_sequence():    \"\"\"æ— é™åºåˆ—ç”Ÿæˆå™¨\"\"\"    n = 0    while True:        yield n        n += 1infinite_iter = infinite_sequence()print(\"å±é™©ï¼šæ²¡æœ‰ç»ˆæ­¢æ¡ä»¶çš„æ— é™è¿­ä»£\")print(\"å®‰å…¨åšæ³•ï¼šè®¾ç½®æ˜ç¡®çš„ç»ˆæ­¢æ¡ä»¶\")# æ–¹æ³•1: è®¡æ•°é™åˆ¶print(\"\\næ–¹æ³•1: è®¡æ•°é™åˆ¶\")count = 0max_count = 5while count &lt; max_count:    value = next(infinite_iter)    print(f\"  ç¬¬{count+1}ä¸ª: {value}\")    count += 1# æ–¹æ³•2: å€¼æ¡ä»¶é™åˆ¶print(\"\\næ–¹æ³•2: å€¼æ¡ä»¶é™åˆ¶\")while True:    value = next(infinite_iter)    print(f\"  å€¼: {value}\")    if value &gt;= 10:  # æ¡ä»¶ç»ˆæ­¢        print(\"  è¾¾åˆ°ç»ˆæ­¢æ¡ä»¶\")        break# æ–¹æ³•3: ä½¿ç”¨itertools.isliceimport itertoolsprint(\"\\næ–¹æ³•3: ä½¿ç”¨itertools.islice\")infinite_iter2 = infinite_sequence()limited_iter = itertools.islice(infinite_iter2, 5)  # é™åˆ¶ä¸º5ä¸ªå…ƒç´ for value in limited_iter:    print(f\"  isliceå€¼: {value}\")# é™·é˜±5: å¼‚å¸¸å¤„ç†çš„è¿‡åº¦ä½¿ç”¨print(\"\\né™·é˜±5: å¼‚å¸¸å¤„ç†çš„è¿‡åº¦ä½¿ç”¨\")test_data = [1, 2, 3]test_iter = iter(test_data)print(\"ä½æ•ˆï¼šè¿‡åº¦ä½¿ç”¨try-except\")start_time = time.time()for _ in range(10000):    test_iter_copy = iter(test_data)    while True:        try:            value = next(test_iter_copy)        except StopIteration:            breakexcept_time = time.time() - start_timeprint(\"é«˜æ•ˆï¼šä½¿ç”¨é»˜è®¤å€¼\")start_time = time.time()for _ in range(10000):    test_iter_copy = iter(test_data)    sentinel = object()    while True:        value = next(test_iter_copy, sentinel)        if value is sentinel:            breakdefault_time = time.time() - start_timeprint(f\"  try-exceptæ–¹æ³•: {except_time:.6f}ç§’\")print(f\"  é»˜è®¤å€¼æ–¹æ³•: {default_time:.6f}ç§’\")print(f\"  æ€§èƒ½æå‡: {except_time/default_time:.2f}x\")# é™·é˜±6: è¿­ä»£å™¨è€—å°½åçš„é‡å¤ä½¿ç”¨print(\"\\né™·é˜±6: è¿­ä»£å™¨è€—å°½åçš„é‡å¤ä½¿ç”¨\")data = [1, 2, 3]iterator = iter(data)print(f\"æ•°æ®: {data}\")print(\"ç¬¬ä¸€æ¬¡å®Œå…¨è¿­ä»£:\")first_iteration = list(iterator)print(f\"  ç»“æœ: {first_iteration}\")print(\"\\nç¬¬äºŒæ¬¡å°è¯•è¿­ä»£ï¼ˆé”™è¯¯ï¼‰:\")second_iteration = list(iterator)print(f\"  ç»“æœ: {second_iteration}\")print(\"  æ³¨æ„ï¼šè¿­ä»£å™¨å·²è€—å°½ï¼Œè¿”å›ç©ºåˆ—è¡¨\")print(\"\\næ­£ç¡®åšæ³•ï¼šæ£€æŸ¥æˆ–é‡æ–°åˆ›å»ºè¿­ä»£å™¨\")class ReusableIteratorWrapper:    \"\"\"å¯é‡ç”¨çš„è¿­ä»£å™¨åŒ…è£…å™¨\"\"\"    def __init__(self, iterable):        self.iterable = iterable        self.current_iter = None        def __iter__(self):        self.current_iter = iter(self.iterable)        return self.current_iter        def next_or_restart(self, default=None):        \"\"\"è·å–ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœè€—å°½åˆ™é‡æ–°å¼€å§‹\"\"\"        if self.current_iter is None:            self.current_iter = iter(self.iterable)                try:            return next(self.current_iter)        except StopIteration:            if default is not None:                return default            # é‡æ–°å¼€å§‹            self.current_iter = iter(self.iterable)            try:                return next(self.current_iter)            except StopIteration:                return defaultreusable = ReusableIteratorWrapper([1, 2, 3])print(\"å¯é‡ç”¨è¿­ä»£å™¨æ¼”ç¤º:\")for i in range(8):  # è¶…è¿‡åŸå§‹æ•°æ®é•¿åº¦    value = reusable.next_or_restart(\"é‡æ–°å¼€å§‹\")    print(f\"  ç¬¬{i+1}æ¬¡: {value}\")print(\"\\næœ€ä½³å®è·µæ€»ç»“:\")print(\"1. ç†è§£è¿­ä»£å™¨çš„çŠ¶æ€æ€§å’Œä¸€æ¬¡æ€§ç‰¹æ€§\")print(\"2. é€‰æ‹©åˆé€‚ç±»å‹çš„é»˜è®¤å€¼æˆ–ä½¿ç”¨å“¨å…µå¯¹è±¡\")print(\"3. é¿å…åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¿®æ”¹æ•°æ®æº\")print(\"4. ä¸ºæ— é™è¿­ä»£å™¨è®¾ç½®æ˜ç¡®çš„ç»ˆæ­¢æ¡ä»¶\")print(\"5. åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸­ä¼˜å…ˆä½¿ç”¨é»˜è®¤å€¼è€Œéå¼‚å¸¸\")print(\"6. æ­£ç¡®å¤„ç†è¿­ä»£å™¨è€—å°½çš„æƒ…å†µ\")print(\"7. è€ƒè™‘ä½¿ç”¨itertoolsæ¨¡å—çš„ä¸“ç”¨å·¥å…·\")print(\"8. åœ¨å¤æ‚åœºæ™¯ä¸­å°è£…è¿­ä»£é€»è¾‘ä»¥æé«˜å¯è¯»æ€§\")ğŸ”§ æ€§èƒ½ä¼˜åŒ–next() æ€§èƒ½ä¼˜åŒ–æŠ€å·§# next() æ€§èƒ½ä¼˜åŒ–æŠ€å·§print(\"next() æ€§èƒ½ä¼˜åŒ–æŠ€å·§:\")import timeimport itertools# 1. é»˜è®¤å€¼ vs å¼‚å¸¸å¤„ç†æ€§èƒ½æ¯”è¾ƒprint(\"\\n1. é»˜è®¤å€¼ vs å¼‚å¸¸å¤„ç†æ€§èƒ½æ¯”è¾ƒ:\")def benchmark_next_methods(data_size, iterations):    \"\"\"åŸºå‡†æµ‹è¯•ä¸åŒçš„next()ä½¿ç”¨æ–¹æ³•\"\"\"    data = list(range(data_size))        # æ–¹æ³•1: ä½¿ç”¨try-except    start_time = time.time()    for _ in range(iterations):        iterator = iter(data)        count = 0        try:            while True:                value = next(iterator)                count += 1                if count &gt;= data_size // 2:  # åªå¤„ç†ä¸€åŠ                    break        except StopIteration:            pass    except_time = time.time() - start_time        # æ–¹æ³•2: ä½¿ç”¨é»˜è®¤å€¼    start_time = time.time()    for _ in range(iterations):        iterator = iter(data)        sentinel = object()        count = 0        while count &lt; data_size // 2:            value = next(iterator, sentinel)            if value is sentinel:                break            count += 1    default_time = time.time() - start_time        # æ–¹æ³•3: ä½¿ç”¨forå¾ªç¯ï¼ˆåŸºå‡†ï¼‰    start_time = time.time()    for _ in range(iterations):        count = 0        for value in data:            count += 1            if count &gt;= data_size // 2:                break    for_time = time.time() - start_time        return except_time, default_time, for_time# æµ‹è¯•ä¸åŒæ•°æ®å¤§å°test_configs = [    (100, 10000, \"å°æ•°æ®é›†\"),    (1000, 1000, \"ä¸­æ•°æ®é›†\"),    (10000, 100, \"å¤§æ•°æ®é›†\"),]for data_size, iterations, description in test_configs:    except_time, default_time, for_time = benchmark_next_methods(data_size, iterations)        print(f\"\\n{description} (å¤§å°: {data_size}, è¿­ä»£: {iterations}æ¬¡):\")    print(f\"  try-except: {except_time:.6f}ç§’\")    print(f\"  é»˜è®¤å€¼: {default_time:.6f}ç§’\")    print(f\"  forå¾ªç¯: {for_time:.6f}ç§’\")        fastest = min(except_time, default_time, for_time)    if fastest == default_time:        print(f\"  æœ€å¿«: é»˜è®¤å€¼æ–¹æ³• (æ¯”try-exceptå¿« {except_time/default_time:.2f}x)\")    elif fastest == for_time:        print(f\"  æœ€å¿«: forå¾ªç¯ (æ¯”next()å¿« {min(except_time, default_time)/for_time:.2f}x)\")    else:        print(f\"  æœ€å¿«: try-exceptæ–¹æ³•\")# 2. æ‰¹é‡å¤„ç†ä¼˜åŒ–print(\"\\n2. æ‰¹é‡å¤„ç†ä¼˜åŒ–:\")class BatchNextProcessor:    \"\"\"æ‰¹é‡next()å¤„ç†å™¨\"\"\"        @staticmethod    def process_one_by_one(iterator, processor_func, max_items=None):        \"\"\"é€ä¸ªå¤„ç†\"\"\"        results = []        count = 0        sentinel = object()                while max_items is None or count &lt; max_items:            value = next(iterator, sentinel)            if value is sentinel:                break                        result = processor_func(value)            results.append(result)            count += 1                return results        @staticmethod    def process_in_batches(iterator, processor_func, batch_size=100, max_items=None):        \"\"\"æ‰¹é‡å¤„ç†\"\"\"        results = []        total_count = 0        sentinel = object()                while max_items is None or total_count &lt; max_items:            # æ”¶é›†ä¸€æ‰¹æ•°æ®            batch = []            for _ in range(batch_size):                if max_items is not None and total_count &gt;= max_items:                    break                                value = next(iterator, sentinel)                if value is sentinel:                    break                                batch.append(value)                total_count += 1                        if not batch:                break                        # æ‰¹é‡å¤„ç†            batch_results = [processor_func(item) for item in batch]            results.extend(batch_results)                return results# æ€§èƒ½æµ‹è¯•def expensive_processor(x):    \"\"\"æ¨¡æ‹Ÿæ˜‚è´µçš„å¤„ç†å‡½æ•°\"\"\"    # æ¨¡æ‹Ÿä¸€äº›è®¡ç®—    result = 0    for i in range(10):        result += x * i    return resultlarge_data = range(10000)max_process = 5000print(f\"æ‰¹é‡å¤„ç†æµ‹è¯• (å¤„ç†{max_process}ä¸ªå…ƒç´ ):\")# é€ä¸ªå¤„ç†start_time = time.time()iter1 = iter(large_data)results1 = BatchNextProcessor.process_one_by_one(iter1, expensive_processor, max_process)one_by_one_time = time.time() - start_time# æ‰¹é‡å¤„ç†start_time = time.time()iter2 = iter(large_data)results2 = BatchNextProcessor.process_in_batches(iter2, expensive_processor, batch_size=500, max_items=max_process)batch_time = time.time() - start_timeprint(f\"  é€ä¸ªå¤„ç†: {one_by_one_time:.6f}ç§’\")print(f\"  æ‰¹é‡å¤„ç†: {batch_time:.6f}ç§’\")print(f\"  æ€§èƒ½æå‡: {one_by_one_time/batch_time:.2f}x\")print(f\"  ç»“æœä¸€è‡´: {results1 == results2}\")# 3. é¢„å–å’Œç¼“å­˜ä¼˜åŒ–print(\"\\n3. é¢„å–å’Œç¼“å­˜ä¼˜åŒ–:\")class OptimizedIterator:    \"\"\"ä¼˜åŒ–çš„è¿­ä»£å™¨åŒ…è£…å™¨\"\"\"        def __init__(self, iterable, prefetch_size=10):        self.iterator = iter(iterable)        self.buffer = []        self.prefetch_size = prefetch_size        self.exhausted = False        self._prefetch()        def _prefetch(self):        \"\"\"é¢„å–æ•°æ®\"\"\"        while len(self.buffer) &lt; self.prefetch_size and not self.exhausted:            try:                value = next(self.iterator)                self.buffer.append(value)            except StopIteration:                self.exhausted = True                break        def optimized_next(self, default=None):        \"\"\"ä¼˜åŒ–çš„next()å®ç°\"\"\"        if not self.buffer and self.exhausted:            return default                if self.buffer:            value = self.buffer.pop(0)            self._prefetch()  # ä¿æŒç¼“å†²åŒº            return value                return default        def get_buffer_info(self):        \"\"\"è·å–ç¼“å†²åŒºä¿¡æ¯\"\"\"        return {            'buffer_size': len(self.buffer),            'exhausted': self.exhausted,            'prefetch_size': self.prefetch_size        }# æ¨¡æ‹Ÿæ…¢é€Ÿæ•°æ®æºdef slow_data_source(size):    \"\"\"æ¨¡æ‹Ÿæ…¢é€Ÿæ•°æ®æº\"\"\"    for i in range(size):        time.sleep(0.001)  # æ¨¡æ‹ŸI/Oå»¶è¿Ÿ        yield i ** 2# æ€§èƒ½æ¯”è¾ƒdata_size = 100print(f\"é¢„å–ä¼˜åŒ–æµ‹è¯• (æ•°æ®å¤§å°: {data_size}):\")# æ™®é€šè¿­ä»£å™¨start_time = time.time()normal_iter = slow_data_source(data_size)normal_results = []for i in range(50):  # åªè·å–å‰50ä¸ª    try:        value = next(normal_iter)        normal_results.append(value)    except StopIteration:        breaknormal_time = time.time() - start_time# ä¼˜åŒ–è¿­ä»£å™¨start_time = time.time()optimized_iter = OptimizedIterator(slow_data_source(data_size), prefetch_size=20)optimized_results = []for i in range(50):    value = optimized_iter.optimized_next()    if value is None:        break    optimized_results.append(value)optimized_time = time.time() - start_timeprint(f\"  æ™®é€šè¿­ä»£å™¨: {normal_time:.6f}ç§’\")print(f\"  é¢„å–è¿­ä»£å™¨: {optimized_time:.6f}ç§’\")print(f\"  æ€§èƒ½æå‡: {normal_time/optimized_time:.2f}x\")print(f\"  ç»“æœä¸€è‡´: {normal_results == optimized_results}\")# 4. å†…å­˜ä¼˜åŒ–çš„next()ä½¿ç”¨print(\"\\n4. å†…å­˜ä¼˜åŒ–çš„next()ä½¿ç”¨:\")class MemoryEfficientProcessor:    \"\"\"å†…å­˜é«˜æ•ˆçš„å¤„ç†å™¨\"\"\"        @staticmethod    def streaming_process(iterator, processor_func, output_func):        \"\"\"æµå¼å¤„ç†ï¼Œä¸ä¿å­˜ä¸­é—´ç»“æœ\"\"\"        count = 0        sentinel = object()                while True:            value = next(iterator, sentinel)            if value is sentinel:                break                        result = processor_func(value)            output_func(result)  # ç«‹å³è¾“å‡ºï¼Œä¸ä¿å­˜            count += 1                return count        @staticmethod    def batch_streaming_process(iterator, processor_func, output_func, batch_size=1000):        \"\"\"æ‰¹é‡æµå¼å¤„ç†\"\"\"        total_count = 0        sentinel = object()                while True:            batch = []                        # æ”¶é›†ä¸€æ‰¹            for _ in range(batch_size):                value = next(iterator, sentinel)                if value is sentinel:                    break                batch.append(value)                        if not batch:                break                        # æ‰¹é‡å¤„ç†            batch_results = [processor_func(item) for item in batch]                        # æ‰¹é‡è¾“å‡º            for result in batch_results:                output_func(result)                        total_count += len(batch)                return total_count# æµ‹è¯•å†…å­˜æ•ˆç‡class ResultCollector:    \"\"\"ç»“æœæ”¶é›†å™¨\"\"\"    def __init__(self):        self.count = 0        self.sum = 0        def collect(self, value):        self.count += 1        self.sum += value        def get_stats(self):        return {            'count': self.count,            'sum': self.sum,            'average': self.sum / self.count if self.count &gt; 0 else 0        }large_dataset = range(100000)print(f\"å†…å­˜æ•ˆç‡æµ‹è¯• (æ•°æ®å¤§å°: {len(list(large_dataset))}):\")# æµå¼å¤„ç†collector1 = ResultCollector()start_time = time.time()processed_count1 = MemoryEfficientProcessor.streaming_process(    iter(large_dataset),    lambda x: x ** 2,    collector1.collect)streaming_time = time.time() - start_time# æ‰¹é‡æµå¼å¤„ç†collector2 = ResultCollector()start_time = time.time()processed_count2 = MemoryEfficientProcessor.batch_streaming_process(    iter(large_dataset),    lambda x: x ** 2,    collector2.collect,    batch_size=5000)batch_streaming_time = time.time() - start_timeprint(f\"  æµå¼å¤„ç†: {streaming_time:.6f}ç§’, å¤„ç†{processed_count1}ä¸ªå…ƒç´ \")print(f\"  æ‰¹é‡æµå¼å¤„ç†: {batch_streaming_time:.6f}ç§’, å¤„ç†{processed_count2}ä¸ªå…ƒç´ \")print(f\"  æ€§èƒ½æå‡: {streaming_time/batch_streaming_time:.2f}x\")print(f\"  ç»“æœä¸€è‡´: {collector1.get_stats() == collector2.get_stats()}\")# 5. ä½¿ç”¨itertoolsä¼˜åŒ–print(\"\\n5. ä½¿ç”¨itertoolsä¼˜åŒ–:\")# ä½¿ç”¨itertools.isliceä»£æ›¿æ‰‹åŠ¨next()è°ƒç”¨def manual_next_approach(iterator, count):    \"\"\"æ‰‹åŠ¨next()æ–¹æ³•\"\"\"    results = []    sentinel = object()    for _ in range(count):        value = next(iterator, sentinel)        if value is sentinel:            break        results.append(value)    return resultsdef itertools_approach(iterator, count):    \"\"\"ä½¿ç”¨itertools.islice\"\"\"    return list(itertools.islice(iterator, count))# æ€§èƒ½æ¯”è¾ƒtest_data = range(10000)test_count = 5000iterations = 1000print(f\"itertoolsä¼˜åŒ–æµ‹è¯• (è·å–{test_count}ä¸ªå…ƒç´ , {iterations}æ¬¡è¿­ä»£):\")# æ‰‹åŠ¨next()æ–¹æ³•start_time = time.time()for _ in range(iterations):    iter_copy = iter(test_data)    result1 = manual_next_approach(iter_copy, test_count)manual_time = time.time() - start_time# itertoolsæ–¹æ³•start_time = time.time()for _ in range(iterations):    iter_copy = iter(test_data)    result2 = itertools_approach(iter_copy, test_count)itertools_time = time.time() - start_timeprint(f\"  æ‰‹åŠ¨next(): {manual_time:.6f}ç§’\")print(f\"  itertools.islice: {itertools_time:.6f}ç§’\")print(f\"  æ€§èƒ½æå‡: {manual_time/itertools_time:.2f}x\")print(f\"  ç»“æœä¸€è‡´: {result1 == result2}\")print(\"\\næ€§èƒ½ä¼˜åŒ–æ€»ç»“:\")print(\"1. ä¼˜å…ˆä½¿ç”¨é»˜è®¤å€¼è€Œä¸æ˜¯try-exceptå¤„ç†\")print(\"2. è€ƒè™‘æ‰¹é‡å¤„ç†ä»¥å‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€\")print(\"3. ä½¿ç”¨é¢„å–å’Œç¼“å­˜æ¥ä¼˜åŒ–I/Oå¯†é›†å‹æ“ä½œ\")print(\"4. é‡‡ç”¨æµå¼å¤„ç†æ¥ä¼˜åŒ–å†…å­˜ä½¿ç”¨\")print(\"5. åˆ©ç”¨itertoolsæ¨¡å—çš„ä¼˜åŒ–å®ç°\")print(\"6. æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©æœ€é€‚åˆçš„æ–¹æ³•\")ğŸ”— ç›¸å…³å‡½æ•°å†…ç½®å‡½æ•°  iter() - åˆ›å»ºè¿­ä»£å™¨å¯¹è±¡  enumerate() - åˆ›å»ºæšä¸¾è¿­ä»£å™¨  zip() - åˆ›å»ºå¹¶è¡Œè¿­ä»£å™¨  map() - åˆ›å»ºæ˜ å°„è¿­ä»£å™¨  filter() - åˆ›å»ºè¿‡æ»¤è¿­ä»£å™¨  reversed() - åˆ›å»ºåå‘è¿­ä»£å™¨  range() - åˆ›å»ºèŒƒå›´è¿­ä»£å™¨  list() - å°†è¿­ä»£å™¨è½¬æ¢ä¸ºåˆ—è¡¨  tuple() - å°†è¿­ä»£å™¨è½¬æ¢ä¸ºå…ƒç»„æ ‡å‡†åº“æ¨¡å—  itertools - é«˜æ•ˆçš„è¿­ä»£å·¥å…·          itertools.islice() - åˆ‡ç‰‡è¿­ä»£å™¨      itertools.takewhile() - æ¡ä»¶è·å–      itertools.dropwhile() - æ¡ä»¶è·³è¿‡      itertools.chain() - é“¾æ¥è¿­ä»£å™¨      itertools.cycle() - å¾ªç¯è¿­ä»£å™¨      itertools.count() - è®¡æ•°è¿­ä»£å™¨        collections - ç‰¹æ®Šå®¹å™¨ç±»å‹          collections.deque - åŒç«¯é˜Ÿåˆ—        operator - å‡½æ•°å¼æ“ä½œç¬¦          operator.methodcaller() - æ–¹æ³•è°ƒç”¨å™¨      ç¬¬ä¸‰æ–¹åº“  more-itertools - æ‰©å±•è¿­ä»£å·¥å…·  numpy - æ•°å€¼è®¡ç®—ï¼ˆæ•°ç»„è¿­ä»£ï¼‰  pandas - æ•°æ®åˆ†æï¼ˆDataFrameè¿­ä»£ï¼‰ğŸ“š æ‰©å±•é˜…è¯»å®˜æ–¹æ–‡æ¡£  Pythonå†…ç½®å‡½æ•° - next()  è¿­ä»£å™¨åè®®  itertoolsæ¨¡å—æ·±å…¥å­¦ä¹   Pythonè¿­ä»£å™¨å’Œç”Ÿæˆå™¨è¯¦è§£  é«˜æ•ˆPythonç¼–ç¨‹ - è¿­ä»£å™¨ç¯‡  Pythonæ€§èƒ½ä¼˜åŒ–æŒ‡å—ğŸ·ï¸ æ ‡ç­¾è¿­ä»£å™¨ ç”Ÿæˆå™¨ å¾ªç¯ æ•°æ®æµ æ€§èƒ½ä¼˜åŒ– å†…å­˜ç®¡ç† å¼‚å¸¸å¤„ç† å‡½æ•°å¼ç¼–ç¨‹",
        "url": "/docs/builtins/next/",
        "category": "builtins",
        "tags": ["è¿­ä»£å™¨","ç”Ÿæˆå™¨","å¾ªç¯","æ•°æ®æµ"]
      }
      
    
  
    
      ,
      {
        "title": "open() - æ–‡ä»¶æ‰“å¼€å‡½æ•°",
        "content": "open() - æ–‡ä»¶æ‰“å¼€å‡½æ•°ğŸ“ æ¦‚è¿°open() æ˜¯Pythonä¸­ç”¨äºæ–‡ä»¶æ“ä½œçš„æ ¸å¿ƒå†…ç½®å‡½æ•°ï¼Œå®ƒæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¹¶è¿”å›å¯¹åº”çš„æ–‡ä»¶å¯¹è±¡ã€‚é€šè¿‡è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å–ã€å†™å…¥ã€ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œæ”¯æŒæ–‡æœ¬å’ŒäºŒè¿›åˆ¶ä¸¤ç§æ¨¡å¼ï¼Œæ˜¯Pythonæ–‡ä»¶I/Oæ“ä½œçš„åŸºç¡€ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡open()å‡½æ•°çš„å®Œæ•´è¯­æ³•å’Œæ‰€æœ‰å‚æ•°  ç†è§£ä¸åŒæ–‡ä»¶æ¨¡å¼çš„ç”¨é€”å’ŒåŒºåˆ«  å­¦ä¼šå¤„ç†æ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ–‡ä»¶  æŒæ¡æ–‡ä»¶ç¼–ç å’Œé”™è¯¯å¤„ç†  å­¦ä¼šä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å®‰å…¨æ“ä½œæ–‡ä»¶ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  å­—ç¬¦ä¸²æ“ä½œ  å¼‚å¸¸å¤„ç†åŸºç¡€  ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆwithè¯­å¥ï¼‰  ç¼–ç æ¦‚å¿µï¼ˆUTF-8ã€ASCIIç­‰ï¼‰ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µopen() å‡½æ•°æ‰“å¼€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ï¼Œè¿”å›ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æä¾›äº†è¯»å–ã€å†™å…¥æ–‡ä»¶å†…å®¹çš„æ–¹æ³•ã€‚æ–‡ä»¶å¯¹è±¡æ”¯æŒè¿­ä»£å™¨åè®®ï¼Œå¯ä»¥é€è¡Œè¯»å–æ–‡ä»¶å†…å®¹ã€‚è¯­æ³•æ ¼å¼open(file, mode='r', buffering=-1, encoding=None, errors=None,      newline=None, closefd=True, opener=None)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  file      str/PathLike      æ˜¯      æ—       æ–‡ä»¶è·¯å¾„æˆ–æ–‡ä»¶æè¿°ç¬¦              mode      str      å¦      â€˜râ€™      æ–‡ä»¶æ‰“å¼€æ¨¡å¼              buffering      int      å¦      -1      ç¼“å†²ç­–ç•¥              encoding      str      å¦      None      æ–‡æœ¬ç¼–ç æ–¹å¼              errors      str      å¦      None      ç¼–ç é”™è¯¯å¤„ç†æ–¹å¼              newline      str      å¦      None      æ¢è¡Œç¬¦å¤„ç†æ–¹å¼              closefd      bool      å¦      True      æ˜¯å¦å…³é—­æ–‡ä»¶æè¿°ç¬¦              opener      callable      å¦      None      è‡ªå®šä¹‰æ–‡ä»¶æ‰“å¼€å™¨      æ–‡ä»¶æ¨¡å¼è¯¦è§£            æ¨¡å¼      è¯´æ˜      æ–‡ä»¶å­˜åœ¨      æ–‡ä»¶ä¸å­˜åœ¨      è¯»å–      å†™å…¥      æŒ‡é’ˆä½ç½®                  â€˜râ€™      åªè¯»ï¼ˆé»˜è®¤ï¼‰      æ‰“å¼€      æŠ¥é”™      âœ“      âœ—      å¼€å¤´              â€˜wâ€™      åªå†™      æ¸…ç©ºåæ‰“å¼€      åˆ›å»º      âœ—      âœ“      å¼€å¤´              â€˜aâ€™      è¿½åŠ å†™å…¥      æ‰“å¼€      åˆ›å»º      âœ—      âœ“      æœ«å°¾              â€˜xâ€™      ç‹¬å åˆ›å»º      æŠ¥é”™      åˆ›å»º      âœ—      âœ“      å¼€å¤´              â€˜r+â€™      è¯»å†™      æ‰“å¼€      æŠ¥é”™      âœ“      âœ“      å¼€å¤´              â€˜w+â€™      è¯»å†™      æ¸…ç©ºåæ‰“å¼€      åˆ›å»º      âœ“      âœ“      å¼€å¤´              â€˜a+â€™      è¯»å†™è¿½åŠ       æ‰“å¼€      åˆ›å»º      âœ“      âœ“      æœ«å°¾      æ¨¡å¼ä¿®é¥°ç¬¦            ä¿®é¥°ç¬¦      è¯´æ˜                  â€˜bâ€™      äºŒè¿›åˆ¶æ¨¡å¼ï¼ˆå¦‚ â€˜rbâ€™, â€˜wbâ€™ï¼‰              â€˜tâ€™      æ–‡æœ¬æ¨¡å¼ï¼ˆé»˜è®¤ï¼Œå¦‚ â€˜rtâ€™, â€˜wtâ€™ï¼‰      è¿”å›å€¼  ç±»å‹: TextIOWrapperï¼ˆæ–‡æœ¬æ¨¡å¼ï¼‰æˆ– BufferedReader/BufferedWriterï¼ˆäºŒè¿›åˆ¶æ¨¡å¼ï¼‰  è¯´æ˜: æ–‡ä»¶å¯¹è±¡ï¼Œæ”¯æŒè¯»å†™æ“ä½œå’Œä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€æ–‡ä»¶æ“ä½œ# åŸºç¡€æ–‡ä»¶è¯»å–print(\"åŸºç¡€æ–‡ä»¶æ“ä½œç¤ºä¾‹:\")# åˆ›å»ºç¤ºä¾‹æ–‡ä»¶sample_content = \"\"\"ç¬¬ä¸€è¡Œå†…å®¹ç¬¬äºŒè¡Œå†…å®¹ç¬¬ä¸‰è¡Œå†…å®¹åŒ…å«ä¸­æ–‡çš„è¡Œæ•°å­—è¡Œ: 123456ç‰¹æ®Šå­—ç¬¦: !@#$%^&amp;*()ç©ºè¡Œåœ¨ä¸‹é¢:æœ€åä¸€è¡Œ\"\"\"# å†™å…¥ç¤ºä¾‹æ–‡ä»¶with open(\"sample.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(sample_content)print(\"å·²åˆ›å»ºç¤ºä¾‹æ–‡ä»¶ sample.txt\")# 1. è¯»å–æ•´ä¸ªæ–‡ä»¶print(\"\\n1. è¯»å–æ•´ä¸ªæ–‡ä»¶:\")with open(\"sample.txt\", \"r\", encoding=\"utf-8\") as f:    content = f.read()    print(f\"æ–‡ä»¶å†…å®¹:\\n{content}\")    print(f\"æ–‡ä»¶å¤§å°: {len(content)} å­—ç¬¦\")# 2. é€è¡Œè¯»å–print(\"\\n2. é€è¡Œè¯»å–:\")with open(\"sample.txt\", \"r\", encoding=\"utf-8\") as f:    line_number = 1    for line in f:        print(f\"ç¬¬{line_number}è¡Œ: {line.rstrip()}\")        line_number += 1# 3. è¯»å–æ‰€æœ‰è¡Œåˆ°åˆ—è¡¨print(\"\\n3. è¯»å–æ‰€æœ‰è¡Œåˆ°åˆ—è¡¨:\")with open(\"sample.txt\", \"r\", encoding=\"utf-8\") as f:    lines = f.readlines()    print(f\"æ€»å…± {len(lines)} è¡Œ\")    for i, line in enumerate(lines, 1):        print(f\"è¡Œ{i}: {repr(line)}\")# 4. è¯»å–æŒ‡å®šå­—ç¬¦æ•°print(\"\\n4. è¯»å–æŒ‡å®šå­—ç¬¦æ•°:\")with open(\"sample.txt\", \"r\", encoding=\"utf-8\") as f:    first_20_chars = f.read(20)    print(f\"å‰20ä¸ªå­—ç¬¦: {repr(first_20_chars)}\")        next_10_chars = f.read(10)    print(f\"æ¥ä¸‹æ¥10ä¸ªå­—ç¬¦: {repr(next_10_chars)}\")# 5. è¯»å–ä¸€è¡Œprint(\"\\n5. è¯»å–ä¸€è¡Œ:\")with open(\"sample.txt\", \"r\", encoding=\"utf-8\") as f:    first_line = f.readline()    second_line = f.readline()    print(f\"ç¬¬ä¸€è¡Œ: {repr(first_line)}\")    print(f\"ç¬¬äºŒè¡Œ: {repr(second_line)}\")# 6. æ–‡ä»¶æŒ‡é’ˆæ“ä½œprint(\"\\n6. æ–‡ä»¶æŒ‡é’ˆæ“ä½œ:\")with open(\"sample.txt\", \"r\", encoding=\"utf-8\") as f:    print(f\"åˆå§‹ä½ç½®: {f.tell()}\")        data = f.read(10)    print(f\"è¯»å–10å­—ç¬¦åä½ç½®: {f.tell()}\")    print(f\"è¯»å–çš„å†…å®¹: {repr(data)}\")        f.seek(0)  # å›åˆ°æ–‡ä»¶å¼€å¤´    print(f\"seek(0)åä½ç½®: {f.tell()}\")        f.seek(5)  # ç§»åŠ¨åˆ°ç¬¬5ä¸ªå­—ç¬¦    print(f\"seek(5)åä½ç½®: {f.tell()}\")    data = f.read(5)    print(f\"ä»ä½ç½®5è¯»å–5å­—ç¬¦: {repr(data)}\")# 7. æ£€æŸ¥æ–‡ä»¶çŠ¶æ€print(\"\\n7. æ–‡ä»¶å¯¹è±¡å±æ€§:\")with open(\"sample.txt\", \"r\", encoding=\"utf-8\") as f:    print(f\"æ–‡ä»¶å: {f.name}\")    print(f\"æ–‡ä»¶æ¨¡å¼: {f.mode}\")    print(f\"ç¼–ç : {f.encoding}\")    print(f\"æ˜¯å¦å…³é—­: {f.closed}\")    print(f\"æ˜¯å¦å¯è¯»: {f.readable()}\")    print(f\"æ˜¯å¦å¯å†™: {f.writable()}\")    print(f\"æ˜¯å¦å¯å®šä½: {f.seekable()}\")print(f\"æ–‡ä»¶å…³é—­åæ˜¯å¦å…³é—­: {f.closed}\")# 8. ä¸åŒè¯»å–æ–¹å¼çš„æ€§èƒ½å¯¹æ¯”print(\"\\n8. è¯»å–æ–¹å¼æ€§èƒ½å¯¹æ¯”:\")import time# åˆ›å»ºè¾ƒå¤§çš„æµ‹è¯•æ–‡ä»¶large_content = \"\\n\".join([f\"è¿™æ˜¯ç¬¬{i}è¡Œå†…å®¹\" for i in range(1000)])with open(\"large_sample.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(large_content)# æ–¹æ³•1: read()å…¨éƒ¨è¯»å–start_time = time.time()with open(\"large_sample.txt\", \"r\", encoding=\"utf-8\") as f:    content = f.read()time_read_all = time.time() - start_time# æ–¹æ³•2: readlines()è¯»å–æ‰€æœ‰è¡Œstart_time = time.time()with open(\"large_sample.txt\", \"r\", encoding=\"utf-8\") as f:    lines = f.readlines()time_readlines = time.time() - start_time# æ–¹æ³•3: é€è¡Œè¿­ä»£start_time = time.time()with open(\"large_sample.txt\", \"r\", encoding=\"utf-8\") as f:    for line in f:        pass  # åªæ˜¯è¿­ä»£ï¼Œä¸åšå¤„ç†time_iterate = time.time() - start_timeprint(f\"read()å…¨éƒ¨è¯»å–: {time_read_all:.6f}ç§’\")print(f\"readlines()è¯»å–: {time_readlines:.6f}ç§’\")print(f\"é€è¡Œè¿­ä»£: {time_iterate:.6f}ç§’\")# æ¸…ç†æµ‹è¯•æ–‡ä»¶import osos.remove(\"large_sample.txt\")æ–‡ä»¶å†™å…¥æ“ä½œ# æ–‡ä»¶å†™å…¥æ“ä½œprint(\"æ–‡ä»¶å†™å…¥æ“ä½œç¤ºä¾‹:\")# 1. åŸºæœ¬å†™å…¥ï¼ˆè¦†ç›–æ¨¡å¼ï¼‰print(\"\\n1. åŸºæœ¬å†™å…¥ï¼ˆè¦†ç›–æ¨¡å¼ï¼‰:\")with open(\"write_test.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(\"è¿™æ˜¯ç¬¬ä¸€è¡Œ\\n\")    f.write(\"è¿™æ˜¯ç¬¬äºŒè¡Œ\\n\")    f.write(\"è¿™æ˜¯ç¬¬ä¸‰è¡Œ\")with open(\"write_test.txt\", \"r\", encoding=\"utf-8\") as f:    print(f\"å†™å…¥ç»“æœ:\\n{f.read()}\")# 2. è¿½åŠ å†™å…¥print(\"\\n2. è¿½åŠ å†™å…¥:\")with open(\"write_test.txt\", \"a\", encoding=\"utf-8\") as f:    f.write(\"\\nè¿™æ˜¯è¿½åŠ çš„ç¬¬å››è¡Œ\\n\")    f.write(\"è¿™æ˜¯è¿½åŠ çš„ç¬¬äº”è¡Œ\")with open(\"write_test.txt\", \"r\", encoding=\"utf-8\") as f:    print(f\"è¿½åŠ åç»“æœ:\\n{f.read()}\")# 3. å†™å…¥å¤šè¡Œprint(\"\\n3. å†™å…¥å¤šè¡Œ:\")lines_to_write = [    \"å¤šè¡Œå†™å…¥ç¤ºä¾‹\\n\",    \"ç¬¬äºŒè¡Œå†…å®¹\\n\",    \"ç¬¬ä¸‰è¡Œå†…å®¹\\n\",    \"æœ€åä¸€è¡Œ\"]with open(\"multiline_test.txt\", \"w\", encoding=\"utf-8\") as f:    f.writelines(lines_to_write)with open(\"multiline_test.txt\", \"r\", encoding=\"utf-8\") as f:    print(f\"å¤šè¡Œå†™å…¥ç»“æœ:\\n{f.read()}\")# 4. æ ¼å¼åŒ–å†™å…¥print(\"\\n4. æ ¼å¼åŒ–å†™å…¥:\")data = [    {\"name\": \"å¼ ä¸‰\", \"age\": 25, \"score\": 95.5},    {\"name\": \"æå››\", \"age\": 30, \"score\": 87.2},    {\"name\": \"ç‹äº”\", \"age\": 28, \"score\": 92.8}]with open(\"formatted_data.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(\"å­¦ç”Ÿæˆç»©è¡¨\\n\")    f.write(\"=\" * 30 + \"\\n\")    f.write(f\"{'å§“å':&lt;10}{'å¹´é¾„':&lt;10}{'åˆ†æ•°':&lt;10}\\n\")    f.write(\"-\" * 30 + \"\\n\")        for student in data:        f.write(f\"{student['name']:&lt;10}{student['age']:&lt;10}{student['score']:&lt;10.1f}\\n\")with open(\"formatted_data.txt\", \"r\", encoding=\"utf-8\") as f:    print(f\"æ ¼å¼åŒ–å†™å…¥ç»“æœ:\\n{f.read()}\")# 5. CSVæ ¼å¼å†™å…¥print(\"\\n5. CSVæ ¼å¼å†™å…¥:\")csv_data = [    [\"å§“å\", \"å¹´é¾„\", \"åŸå¸‚\", \"èŒä¸š\"],    [\"å¼ ä¸‰\", \"25\", \"åŒ—äº¬\", \"å·¥ç¨‹å¸ˆ\"],    [\"æå››\", \"30\", \"ä¸Šæµ·\", \"è®¾è®¡å¸ˆ\"],    [\"ç‹äº”\", \"28\", \"å¹¿å·\", \"äº§å“ç»ç†\"]]with open(\"data.csv\", \"w\", encoding=\"utf-8\") as f:    for row in csv_data:        f.write(\",\".join(map(str, row)) + \"\\n\")with open(\"data.csv\", \"r\", encoding=\"utf-8\") as f:    print(f\"CSVå†™å…¥ç»“æœ:\\n{f.read()}\")# 6. JSONæ ¼å¼å†™å…¥print(\"\\n6. JSONæ ¼å¼å†™å…¥:\")import jsonjson_data = {    \"users\": [        {\"id\": 1, \"name\": \"å¼ ä¸‰\", \"email\": \"zhangsan@example.com\"},        {\"id\": 2, \"name\": \"æå››\", \"email\": \"lisi@example.com\"}    ],    \"settings\": {        \"theme\": \"dark\",        \"language\": \"zh-CN\"    }}with open(\"data.json\", \"w\", encoding=\"utf-8\") as f:    json.dump(json_data, f, ensure_ascii=False, indent=2)with open(\"data.json\", \"r\", encoding=\"utf-8\") as f:    print(f\"JSONå†™å…¥ç»“æœ:\\n{f.read()}\")# 7. å®æ—¶å†™å…¥å’Œåˆ·æ–°print(\"\\n7. å®æ—¶å†™å…¥å’Œåˆ·æ–°:\")with open(\"realtime_log.txt\", \"w\", encoding=\"utf-8\") as f:    for i in range(5):        timestamp = time.strftime(\"%Y-%m-%d %H:%M:%S\")        log_entry = f\"[{timestamp}] å¤„ç†ç¬¬ {i+1} é¡¹ä»»åŠ¡\\n\"        f.write(log_entry)        f.flush()  # å¼ºåˆ¶åˆ·æ–°åˆ°ç£ç›˜        print(f\"å·²å†™å…¥: {log_entry.strip()}\")        time.sleep(0.5)with open(\"realtime_log.txt\", \"r\", encoding=\"utf-8\") as f:    print(f\"\\nå®æ—¶æ—¥å¿—ç»“æœ:\\n{f.read()}\")# 8. è¯»å†™æ¨¡å¼ï¼ˆr+, w+, a+ï¼‰print(\"\\n8. è¯»å†™æ¨¡å¼ç¤ºä¾‹:\")# r+ æ¨¡å¼ï¼šè¯»å†™ï¼Œæ–‡ä»¶å¿…é¡»å­˜åœ¨with open(\"write_test.txt\", \"r+\", encoding=\"utf-8\") as f:    content = f.read()    print(f\"r+ æ¨¡å¼è¯»å–å†…å®¹é•¿åº¦: {len(content)} å­—ç¬¦\")        f.seek(0, 2)  # ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾    f.write(\"\\nr+ æ¨¡å¼è¿½åŠ çš„å†…å®¹\")        f.seek(0)  # å›åˆ°å¼€å¤´    updated_content = f.read()    print(f\"r+ æ¨¡å¼æ›´æ–°åé•¿åº¦: {len(updated_content)} å­—ç¬¦\")# w+ æ¨¡å¼ï¼šè¯»å†™ï¼Œæ¸…ç©ºæ–‡ä»¶å†…å®¹with open(\"w_plus_test.txt\", \"w+\", encoding=\"utf-8\") as f:    f.write(\"w+ æ¨¡å¼å†™å…¥çš„å†…å®¹\\n\")    f.write(\"ç¬¬äºŒè¡Œå†…å®¹\")        f.seek(0)  # å›åˆ°å¼€å¤´è¯»å–    content = f.read()    print(f\"w+ æ¨¡å¼å†…å®¹: {repr(content)}\")# a+ æ¨¡å¼ï¼šè¯»å†™ï¼Œè¿½åŠ æ¨¡å¼with open(\"a_plus_test.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(\"åˆå§‹å†…å®¹\\n\")with open(\"a_plus_test.txt\", \"a+\", encoding=\"utf-8\") as f:    f.write(\"a+ æ¨¡å¼è¿½åŠ å†…å®¹\\n\")        f.seek(0)  # å›åˆ°å¼€å¤´è¯»å–    content = f.read()    print(f\"a+ æ¨¡å¼å†…å®¹: {repr(content)}\")# 9. ç‹¬å åˆ›å»ºæ¨¡å¼ï¼ˆxï¼‰print(\"\\n9. ç‹¬å åˆ›å»ºæ¨¡å¼:\")try:    with open(\"exclusive_test.txt\", \"x\", encoding=\"utf-8\") as f:        f.write(\"ç‹¬å åˆ›å»ºçš„æ–‡ä»¶å†…å®¹\")    print(\"ç‹¬å åˆ›å»ºæˆåŠŸ\")except FileExistsError:    print(\"æ–‡ä»¶å·²å­˜åœ¨ï¼Œç‹¬å åˆ›å»ºå¤±è´¥\")# å†æ¬¡å°è¯•åˆ›å»ºåŒåæ–‡ä»¶try:    with open(\"exclusive_test.txt\", \"x\", encoding=\"utf-8\") as f:        f.write(\"è¿™ä¸ä¼šè¢«å†™å…¥\")except FileExistsError:    print(\"æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ— æ³•ç‹¬å åˆ›å»º\")# æ¸…ç†æµ‹è¯•æ–‡ä»¶test_files = [    \"write_test.txt\", \"multiline_test.txt\", \"formatted_data.txt\",    \"data.csv\", \"data.json\", \"realtime_log.txt\", \"w_plus_test.txt\",    \"a_plus_test.txt\", \"exclusive_test.txt\"]for filename in test_files:    try:        os.remove(filename)    except FileNotFoundError:        passprint(\"\\nå·²æ¸…ç†æµ‹è¯•æ–‡ä»¶\")äºŒè¿›åˆ¶æ–‡ä»¶æ“ä½œ# äºŒè¿›åˆ¶æ–‡ä»¶æ“ä½œprint(\"äºŒè¿›åˆ¶æ–‡ä»¶æ“ä½œç¤ºä¾‹:\")# 1. åˆ›å»ºäºŒè¿›åˆ¶æ•°æ®print(\"\\n1. åˆ›å»ºå’Œå†™å…¥äºŒè¿›åˆ¶æ•°æ®:\")binary_data = bytes([0x48, 0x65, 0x6C, 0x6C, 0x6F])  # \"Hello\" çš„ASCIIç print(f\"äºŒè¿›åˆ¶æ•°æ®: {binary_data}\")print(f\"è½¬æ¢ä¸ºå­—ç¬¦ä¸²: {binary_data.decode('ascii')}\")# å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶with open(\"binary_test.bin\", \"wb\") as f:    f.write(binary_data)    f.write(b\"\\x20World!\")  # æ·»åŠ  \" World!\"print(\"å·²å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶\")# 2. è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶print(\"\\n2. è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶:\")with open(\"binary_test.bin\", \"rb\") as f:    data = f.read()    print(f\"è¯»å–çš„äºŒè¿›åˆ¶æ•°æ®: {data}\")    print(f\"è½¬æ¢ä¸ºå­—ç¬¦ä¸²: {data.decode('ascii')}\")    print(f\"æ•°æ®é•¿åº¦: {len(data)} å­—èŠ‚\")# 3. åˆ†å—è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶print(\"\\n3. åˆ†å—è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶:\")with open(\"binary_test.bin\", \"rb\") as f:    chunk_size = 3    chunk_num = 1        while True:        chunk = f.read(chunk_size)        if not chunk:            break        print(f\"å— {chunk_num}: {chunk} -&gt; {chunk.decode('ascii', errors='ignore')}\")        chunk_num += 1# 4. å¤„ç†å›¾åƒæ–‡ä»¶ï¼ˆæ¨¡æ‹Ÿï¼‰print(\"\\n4. å¤„ç†å›¾åƒæ–‡ä»¶å¤´ä¿¡æ¯:\")# åˆ›å»ºæ¨¡æ‹Ÿçš„å›¾åƒæ–‡ä»¶å¤´image_header = b'\\x89PNG\\r\\n\\x1a\\n'  # PNGæ–‡ä»¶å¤´image_data = b'\\x00' * 100  # æ¨¡æ‹Ÿå›¾åƒæ•°æ®with open(\"image_test.png\", \"wb\") as f:    f.write(image_header)    f.write(image_data)# è¯»å–å¹¶æ£€æŸ¥æ–‡ä»¶å¤´with open(\"image_test.png\", \"rb\") as f:    header = f.read(8)    print(f\"æ–‡ä»¶å¤´: {header}\")        if header.startswith(b'\\x89PNG'):        print(\"è¿™æ˜¯ä¸€ä¸ªPNGæ–‡ä»¶\")    else:        print(\"è¿™ä¸æ˜¯PNGæ–‡ä»¶\")        # è·å–æ–‡ä»¶å¤§å°    f.seek(0, 2)  # ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾    file_size = f.tell()    print(f\"æ–‡ä»¶å¤§å°: {file_size} å­—èŠ‚\")# 5. æ•°å­—æ•°æ®çš„äºŒè¿›åˆ¶å­˜å‚¨print(\"\\n5. æ•°å­—æ•°æ®çš„äºŒè¿›åˆ¶å­˜å‚¨:\")import struct# æ‰“åŒ…æ•°å­—æ•°æ®numbers = [1, 2, 3, 4, 5]packed_data = struct.pack('5i', *numbers)  # 5ä¸ªæ•´æ•°print(f\"æ‰“åŒ…çš„æ•°æ®: {packed_data}\")print(f\"æ•°æ®é•¿åº¦: {len(packed_data)} å­—èŠ‚\")# å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶with open(\"numbers.bin\", \"wb\") as f:    f.write(packed_data)# è¯»å–å¹¶è§£åŒ…with open(\"numbers.bin\", \"rb\") as f:    data = f.read()    unpacked = struct.unpack('5i', data)    print(f\"è§£åŒ…çš„æ•°æ®: {unpacked}\")# 6. æ··åˆæ•°æ®ç±»å‹çš„äºŒè¿›åˆ¶å­˜å‚¨print(\"\\n6. æ··åˆæ•°æ®ç±»å‹å­˜å‚¨:\")# å­˜å‚¨å­—ç¬¦ä¸²é•¿åº¦ + å­—ç¬¦ä¸² + æ•´æ•° + æµ®ç‚¹æ•°text = \"Hello, Binary!\"text_bytes = text.encode('utf-8')text_length = len(text_bytes)integer_value = 42float_value = 3.14159with open(\"mixed_data.bin\", \"wb\") as f:    # å†™å…¥å­—ç¬¦ä¸²é•¿åº¦ï¼ˆ4å­—èŠ‚æ•´æ•°ï¼‰    f.write(struct.pack('I', text_length))    # å†™å…¥å­—ç¬¦ä¸²    f.write(text_bytes)    # å†™å…¥æ•´æ•°ï¼ˆ4å­—èŠ‚ï¼‰    f.write(struct.pack('i', integer_value))    # å†™å…¥æµ®ç‚¹æ•°ï¼ˆ8å­—èŠ‚åŒç²¾åº¦ï¼‰    f.write(struct.pack('d', float_value))# è¯»å–æ··åˆæ•°æ®with open(\"mixed_data.bin\", \"rb\") as f:    # è¯»å–å­—ç¬¦ä¸²é•¿åº¦    text_length = struct.unpack('I', f.read(4))[0]    print(f\"å­—ç¬¦ä¸²é•¿åº¦: {text_length}\")        # è¯»å–å­—ç¬¦ä¸²    text_data = f.read(text_length)    decoded_text = text_data.decode('utf-8')    print(f\"å­—ç¬¦ä¸²: {decoded_text}\")        # è¯»å–æ•´æ•°    integer_data = struct.unpack('i', f.read(4))[0]    print(f\"æ•´æ•°: {integer_data}\")        # è¯»å–æµ®ç‚¹æ•°    float_data = struct.unpack('d', f.read(8))[0]    print(f\"æµ®ç‚¹æ•°: {float_data}\")# 7. æ–‡ä»¶å¤åˆ¶ï¼ˆäºŒè¿›åˆ¶æ–¹å¼ï¼‰print(\"\\n7. äºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶:\")def copy_file_binary(source, destination, chunk_size=8192):    \"\"\"äºŒè¿›åˆ¶æ–¹å¼å¤åˆ¶æ–‡ä»¶\"\"\"    with open(source, \"rb\") as src, open(destination, \"wb\") as dst:        while True:            chunk = src.read(chunk_size)            if not chunk:                break            dst.write(chunk)    print(f\"æ–‡ä»¶å¤åˆ¶å®Œæˆ: {source} -&gt; {destination}\")# å¤åˆ¶ä¹‹å‰åˆ›å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶copy_file_binary(\"binary_test.bin\", \"binary_test_copy.bin\")# éªŒè¯å¤åˆ¶ç»“æœwith open(\"binary_test.bin\", \"rb\") as f1, open(\"binary_test_copy.bin\", \"rb\") as f2:    original = f1.read()    copied = f2.read()    print(f\"å¤åˆ¶éªŒè¯: {original == copied}\")# 8. å¤§æ–‡ä»¶å¤„ç†print(\"\\n8. å¤§æ–‡ä»¶å¤„ç†ç¤ºä¾‹:\")# åˆ›å»ºä¸€ä¸ªè¾ƒå¤§çš„äºŒè¿›åˆ¶æ–‡ä»¶large_data = b'A' * 10000  # 10KBçš„æ•°æ®with open(\"large_binary.bin\", \"wb\") as f:    f.write(large_data)# åˆ†å—å¤„ç†å¤§æ–‡ä»¶def process_large_binary_file(filename, chunk_size=1024):    \"\"\"åˆ†å—å¤„ç†å¤§äºŒè¿›åˆ¶æ–‡ä»¶\"\"\"    total_size = 0    chunk_count = 0        with open(filename, \"rb\") as f:        while True:            chunk = f.read(chunk_size)            if not chunk:                break                        chunk_count += 1            total_size += len(chunk)                        # è¿™é‡Œå¯ä»¥å¯¹chunkè¿›è¡Œå¤„ç†            # ä¾‹å¦‚ï¼šè®¡ç®—æ ¡éªŒå’Œã€å‹ç¼©ã€åŠ å¯†ç­‰                print(f\"å¤„ç†å®Œæˆ: {chunk_count} ä¸ªå—, æ€»å¤§å°: {total_size} å­—èŠ‚\")    return total_sizeprocessed_size = process_large_binary_file(\"large_binary.bin\")# æ¸…ç†äºŒè¿›åˆ¶æµ‹è¯•æ–‡ä»¶binary_test_files = [    \"binary_test.bin\", \"image_test.png\", \"numbers.bin\",    \"mixed_data.bin\", \"binary_test_copy.bin\", \"large_binary.bin\"]for filename in binary_test_files:    try:        os.remove(filename)    except FileNotFoundError:        passprint(\"\\nå·²æ¸…ç†äºŒè¿›åˆ¶æµ‹è¯•æ–‡ä»¶\")ç¼–ç å’Œé”™è¯¯å¤„ç†# ç¼–ç å’Œé”™è¯¯å¤„ç†print(\"ç¼–ç å’Œé”™è¯¯å¤„ç†ç¤ºä¾‹:\")# 1. ä¸åŒç¼–ç çš„æ–‡ä»¶å¤„ç†print(\"\\n1. ä¸åŒç¼–ç çš„æ–‡ä»¶å¤„ç†:\")# åˆ›å»ºåŒ…å«å„ç§å­—ç¬¦çš„æµ‹è¯•å†…å®¹test_content = \"\"\"è‹±æ–‡: Hello Worldä¸­æ–‡: ä½ å¥½ä¸–ç•Œæ—¥æ–‡: ã“ã‚“ã«ã¡ã¯ä¸–ç•ŒéŸ©æ–‡: ì•ˆë…•í•˜ì„¸ìš” ì„¸ê³„ä¿„æ–‡: ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€é˜¿æ‹‰ä¼¯æ–‡: Ù…Ø±Ø­Ø¨Ø§ Ø¨Ø§Ù„Ø¹Ø§Ù„Ù…è¡¨æƒ…ç¬¦å·: ğŸ˜€ğŸ˜ŠğŸ‰ç‰¹æ®Šç¬¦å·: Â©Â®â„¢â‚¬Â£Â¥æ•°å­¦ç¬¦å·: âˆ‘âˆâˆ«âˆšâˆ\"\"\"# ä½¿ç”¨ä¸åŒç¼–ç ä¿å­˜æ–‡ä»¶encodings = ['utf-8', 'utf-16', 'gbk', 'ascii']for encoding in encodings:    filename = f\"test_{encoding.replace('-', '_')}.txt\"    try:        with open(filename, \"w\", encoding=encoding) as f:            f.write(test_content)        print(f\"æˆåŠŸä½¿ç”¨ {encoding} ç¼–ç ä¿å­˜æ–‡ä»¶\")                # è¯»å–æ–‡ä»¶å¹¶æ˜¾ç¤ºå¤§å°        with open(filename, \"r\", encoding=encoding) as f:            content = f.read()            print(f\"  æ–‡ä»¶å¤§å°: {len(content)} å­—ç¬¦\")                except UnicodeEncodeError as e:        print(f\"ä½¿ç”¨ {encoding} ç¼–ç å¤±è´¥: {e}\")# 2. ç¼–ç æ£€æµ‹å’Œè½¬æ¢print(\"\\n2. ç¼–ç æ£€æµ‹å’Œè½¬æ¢:\")# å°è¯•ç”¨é”™è¯¯çš„ç¼–ç è¯»å–æ–‡ä»¶print(\"å°è¯•ç”¨ä¸åŒç¼–ç è¯»å–UTF-8æ–‡ä»¶:\")with open(\"test_utf_8.txt\", \"rb\") as f:    raw_data = f.read()    print(f\"åŸå§‹å­—èŠ‚æ•°æ®é•¿åº¦: {len(raw_data)} å­—èŠ‚\")# å°è¯•ä¸åŒç¼–ç è§£ç test_encodings = ['utf-8', 'gbk', 'latin-1', 'ascii']for encoding in test_encodings:    try:        decoded = raw_data.decode(encoding)        print(f\"ä½¿ç”¨ {encoding} è§£ç æˆåŠŸï¼Œé•¿åº¦: {len(decoded)} å­—ç¬¦\")        print(f\"  å‰50å­—ç¬¦: {decoded[:50]}...\")    except UnicodeDecodeError as e:        print(f\"ä½¿ç”¨ {encoding} è§£ç å¤±è´¥: {e}\")# 3. é”™è¯¯å¤„ç†ç­–ç•¥print(\"\\n3. é”™è¯¯å¤„ç†ç­–ç•¥:\")# åˆ›å»ºåŒ…å«æ— æ³•ç¼–ç å­—ç¬¦çš„å†…å®¹problematic_content = \"æ­£å¸¸æ–‡å­— \\udcff æ— æ•ˆå­—ç¬¦ \\udcfe æ›´å¤šæ–‡å­—\"error_strategies = ['strict', 'ignore', 'replace', 'xmlcharrefreplace', 'backslashreplace']for strategy in error_strategies:    filename = f\"error_test_{strategy}.txt\"    try:        with open(filename, \"w\", encoding=\"ascii\", errors=strategy) as f:            f.write(\"ASCII can handle this\")            # å°è¯•å†™å…¥éASCIIå­—ç¬¦            f.write(\"\\nä¸­æ–‡å­—ç¬¦æµ‹è¯•\")        print(f\"é”™è¯¯ç­–ç•¥ {strategy}: å†™å…¥æˆåŠŸ\")    except UnicodeEncodeError as e:        print(f\"é”™è¯¯ç­–ç•¥ {strategy}: å†™å…¥å¤±è´¥ - {e}\")# è¯»å–æ—¶çš„é”™è¯¯å¤„ç†print(\"\\nè¯»å–æ—¶çš„é”™è¯¯å¤„ç†:\")# åˆ›å»ºä¸€ä¸ªåŒ…å«æ··åˆç¼–ç çš„æ–‡ä»¶with open(\"mixed_encoding.txt\", \"wb\") as f:    f.write(\"Hello \".encode('utf-8'))    f.write(\"ä¸–ç•Œ\".encode('gbk'))  # æ•…æ„ä½¿ç”¨ä¸åŒç¼–ç     f.write(\" World\".encode('utf-8'))# å°è¯•ç”¨ä¸åŒé”™è¯¯ç­–ç•¥è¯»å–for strategy in ['strict', 'ignore', 'replace']:    try:        with open(\"mixed_encoding.txt\", \"r\", encoding=\"utf-8\", errors=strategy) as f:            content = f.read()            print(f\"é”™è¯¯ç­–ç•¥ {strategy}: {repr(content)}\")    except UnicodeDecodeError as e:        print(f\"é”™è¯¯ç­–ç•¥ {strategy}: è¯»å–å¤±è´¥ - {e}\")# 4. è‡ªåŠ¨ç¼–ç æ£€æµ‹ï¼ˆç®€å•ç‰ˆæœ¬ï¼‰print(\"\\n4. ç®€å•ç¼–ç æ£€æµ‹:\")def detect_encoding_simple(filename):    \"\"\"ç®€å•çš„ç¼–ç æ£€æµ‹\"\"\"    encodings_to_try = ['utf-8', 'gbk', 'utf-16', 'latin-1']        for encoding in encodings_to_try:        try:            with open(filename, \"r\", encoding=encoding) as f:                content = f.read()                return encoding, content        except UnicodeDecodeError:            continue        return None, None# æµ‹è¯•ç¼–ç æ£€æµ‹test_files = ['test_utf_8.txt', 'test_gbk.txt']for filename in test_files:    if os.path.exists(filename):        detected_encoding, content = detect_encoding_simple(filename)        if detected_encoding:            print(f\"æ–‡ä»¶ {filename} æ£€æµ‹åˆ°ç¼–ç : {detected_encoding}\")            print(f\"  å†…å®¹é¢„è§ˆ: {content[:50]}...\")        else:            print(f\"æ–‡ä»¶ {filename} æ— æ³•æ£€æµ‹ç¼–ç \")# 5. ç¼–ç è½¬æ¢å·¥å…·print(\"\\n5. ç¼–ç è½¬æ¢å·¥å…·:\")def convert_file_encoding(source_file, target_file, source_encoding, target_encoding):    \"\"\"è½¬æ¢æ–‡ä»¶ç¼–ç \"\"\"    try:        with open(source_file, \"r\", encoding=source_encoding) as src:            content = src.read()                with open(target_file, \"w\", encoding=target_encoding) as dst:            dst.write(content)                print(f\"ç¼–ç è½¬æ¢æˆåŠŸ: {source_encoding} -&gt; {target_encoding}\")        return True    except Exception as e:        print(f\"ç¼–ç è½¬æ¢å¤±è´¥: {e}\")        return False# è½¬æ¢UTF-8æ–‡ä»¶åˆ°GBKif os.path.exists(\"test_utf_8.txt\"):    success = convert_file_encoding(        \"test_utf_8.txt\", \"converted_gbk.txt\", \"utf-8\", \"gbk\"    )        if success:        # éªŒè¯è½¬æ¢ç»“æœ        with open(\"converted_gbk.txt\", \"r\", encoding=\"gbk\") as f:            converted_content = f.read()            print(f\"è½¬æ¢åå†…å®¹é•¿åº¦: {len(converted_content)} å­—ç¬¦\")# 6. BOMï¼ˆå­—èŠ‚é¡ºåºæ ‡è®°ï¼‰å¤„ç†print(\"\\n6. BOMå¤„ç†:\")# åˆ›å»ºå¸¦BOMçš„UTF-8æ–‡ä»¶with open(\"bom_test.txt\", \"wb\") as f:    f.write(b'\\xef\\xbb\\xbf')  # UTF-8 BOM    f.write(\"å¸¦BOMçš„UTF-8æ–‡ä»¶å†…å®¹\".encode('utf-8'))# è¯»å–å¸¦BOMçš„æ–‡ä»¶with open(\"bom_test.txt\", \"r\", encoding=\"utf-8-sig\") as f:    content_with_bom_handling = f.read()    print(f\"ä½¿ç”¨utf-8-sigè¯»å–: {repr(content_with_bom_handling)}\")with open(\"bom_test.txt\", \"r\", encoding=\"utf-8\") as f:    content_without_bom_handling = f.read()    print(f\"ä½¿ç”¨utf-8è¯»å–: {repr(content_without_bom_handling)}\")# 7. æ–‡ä»¶ç¼–ç ä¿¡æ¯è·å–print(\"\\n7. æ–‡ä»¶ç¼–ç ä¿¡æ¯:\")def analyze_file_encoding(filename):    \"\"\"åˆ†ææ–‡ä»¶ç¼–ç ä¿¡æ¯\"\"\"    try:        # è¯»å–æ–‡ä»¶çš„å‰å‡ ä¸ªå­—èŠ‚æ£€æŸ¥BOM        with open(filename, \"rb\") as f:            first_bytes = f.read(4)                    bom_info = \"\"        if first_bytes.startswith(b'\\xef\\xbb\\xbf'):            bom_info = \"UTF-8 BOM\"        elif first_bytes.startswith(b'\\xff\\xfe'):            bom_info = \"UTF-16 LE BOM\"        elif first_bytes.startswith(b'\\xfe\\xff'):            bom_info = \"UTF-16 BE BOM\"        else:            bom_info = \"æ— BOM\"                print(f\"æ–‡ä»¶ {filename}:\")        print(f\"  å‰4å­—èŠ‚: {first_bytes}\")        print(f\"  BOMä¿¡æ¯: {bom_info}\")                # è·å–æ–‡ä»¶å¤§å°        file_size = os.path.getsize(filename)        print(f\"  æ–‡ä»¶å¤§å°: {file_size} å­—èŠ‚\")            except Exception as e:        print(f\"åˆ†ææ–‡ä»¶ {filename} å¤±è´¥: {e}\")# åˆ†æä¸åŒç¼–ç çš„æ–‡ä»¶for filename in ['test_utf_8.txt', 'bom_test.txt']:    if os.path.exists(filename):        analyze_file_encoding(filename)# æ¸…ç†ç¼–ç æµ‹è¯•æ–‡ä»¶encoding_test_files = [    'test_utf_8.txt', 'test_utf_16.txt', 'test_gbk.txt',    'error_test_strict.txt', 'error_test_ignore.txt', 'error_test_replace.txt',    'error_test_xmlcharrefreplace.txt', 'error_test_backslashreplace.txt',    'mixed_encoding.txt', 'converted_gbk.txt', 'bom_test.txt']for filename in encoding_test_files:    try:        os.remove(filename)    except FileNotFoundError:        passprint(\"\\nå·²æ¸…ç†ç¼–ç æµ‹è¯•æ–‡ä»¶\")é«˜çº§æ–‡ä»¶æ“ä½œ# é«˜çº§æ–‡ä»¶æ“ä½œprint(\"é«˜çº§æ–‡ä»¶æ“ä½œç¤ºä¾‹:\")# 1. æ–‡ä»¶é”å®šï¼ˆç®€å•å®ç°ï¼‰print(\"\\n1. æ–‡ä»¶é”å®šæœºåˆ¶:\")import fcntlimport timeimport threadingdef write_with_lock(filename, content, delay=0):    \"\"\"å¸¦é”çš„æ–‡ä»¶å†™å…¥\"\"\"    try:        with open(filename, \"a\", encoding=\"utf-8\") as f:            # åœ¨Unixç³»ç»Ÿä¸Šä½¿ç”¨æ–‡ä»¶é”            if hasattr(fcntl, 'flock'):                fcntl.flock(f.fileno(), fcntl.LOCK_EX)                        f.write(f\"[{threading.current_thread().name}] {content}\\n\")            if delay:                time.sleep(delay)                        # é”ä¼šåœ¨æ–‡ä»¶å…³é—­æ—¶è‡ªåŠ¨é‡Šæ”¾        print(f\"çº¿ç¨‹ {threading.current_thread().name} å†™å…¥å®Œæˆ\")    except Exception as e:        print(f\"å†™å…¥å¤±è´¥: {e}\")# åˆ›å»ºå¤šä¸ªçº¿ç¨‹åŒæ—¶å†™å…¥æ–‡ä»¶lock_test_file = \"lock_test.txt\"if os.path.exists(lock_test_file):    os.remove(lock_test_file)threads = []for i in range(3):    thread = threading.Thread(        target=write_with_lock,        args=(lock_test_file, f\"æ¶ˆæ¯æ¥è‡ªçº¿ç¨‹{i}\", 0.5),        name=f\"Thread-{i}\"    )    threads.append(thread)    thread.start()for thread in threads:    thread.join()# æ£€æŸ¥å†™å…¥ç»“æœif os.path.exists(lock_test_file):    with open(lock_test_file, \"r\", encoding=\"utf-8\") as f:        print(f\"æ–‡ä»¶é”å®šæµ‹è¯•ç»“æœ:\\n{f.read()}\")    os.remove(lock_test_file)# 2. ä¸´æ—¶æ–‡ä»¶æ“ä½œprint(\"\\n2. ä¸´æ—¶æ–‡ä»¶æ“ä½œ:\")import tempfile# åˆ›å»ºä¸´æ—¶æ–‡ä»¶with tempfile.NamedTemporaryFile(mode=\"w+\", encoding=\"utf-8\", delete=False) as temp_file:    temp_filename = temp_file.name    temp_file.write(\"è¿™æ˜¯ä¸´æ—¶æ–‡ä»¶çš„å†…å®¹\\n\")    temp_file.write(\"ç¬¬äºŒè¡Œå†…å®¹\")    print(f\"åˆ›å»ºä¸´æ—¶æ–‡ä»¶: {temp_filename}\")# è¯»å–ä¸´æ—¶æ–‡ä»¶with open(temp_filename, \"r\", encoding=\"utf-8\") as f:    temp_content = f.read()    print(f\"ä¸´æ—¶æ–‡ä»¶å†…å®¹: {temp_content}\")# æ‰‹åŠ¨åˆ é™¤ä¸´æ—¶æ–‡ä»¶os.remove(temp_filename)print(\"ä¸´æ—¶æ–‡ä»¶å·²åˆ é™¤\")# ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨è‡ªåŠ¨åˆ é™¤ä¸´æ—¶æ–‡ä»¶with tempfile.NamedTemporaryFile(mode=\"w+\", encoding=\"utf-8\") as temp_file:    temp_file.write(\"è‡ªåŠ¨åˆ é™¤çš„ä¸´æ—¶æ–‡ä»¶\")    temp_file.seek(0)    content = temp_file.read()    print(f\"è‡ªåŠ¨åˆ é™¤ä¸´æ—¶æ–‡ä»¶å†…å®¹: {content}\")    print(f\"ä¸´æ—¶æ–‡ä»¶è·¯å¾„: {temp_file.name}\")# æ–‡ä»¶åœ¨è¿™é‡Œè‡ªåŠ¨åˆ é™¤# 3. å†…å­˜æ˜ å°„æ–‡ä»¶print(\"\\n3. å†…å­˜æ˜ å°„æ–‡ä»¶:\")import mmap# åˆ›å»ºæµ‹è¯•æ–‡ä»¶test_data = b\"Hello, Memory Mapped File! \" * 100with open(\"mmap_test.txt\", \"wb\") as f:    f.write(test_data)# ä½¿ç”¨å†…å­˜æ˜ å°„è¯»å–æ–‡ä»¶with open(\"mmap_test.txt\", \"r+b\") as f:    with mmap.mmap(f.fileno(), 0) as mm:        print(f\"å†…å­˜æ˜ å°„æ–‡ä»¶å¤§å°: {len(mm)} å­—èŠ‚\")        print(f\"å‰50å­—èŠ‚: {mm[:50]}\")                # æœç´¢å†…å®¹        pos = mm.find(b\"Memory\")        if pos != -1:            print(f\"æ‰¾åˆ° 'Memory' åœ¨ä½ç½®: {pos}\")                # ä¿®æ”¹å†…å®¹        mm[0:5] = b\"Hi!!!\"  # æ›¿æ¢å‰5ä¸ªå­—èŠ‚                # è¯»å–ä¿®æ”¹åçš„å†…å®¹        mm.seek(0)        modified_content = mm.read(50)        print(f\"ä¿®æ”¹åå‰50å­—èŠ‚: {modified_content}\")# éªŒè¯ä¿®æ”¹with open(\"mmap_test.txt\", \"rb\") as f:    content = f.read(50)    print(f\"æ–‡ä»¶ä¿®æ”¹éªŒè¯: {content}\")os.remove(\"mmap_test.txt\")# 4. æ–‡ä»¶ç›‘æ§ï¼ˆç®€å•å®ç°ï¼‰print(\"\\n4. æ–‡ä»¶ç›‘æ§:\")def monitor_file_changes(filename, check_interval=1, duration=5):    \"\"\"ç›‘æ§æ–‡ä»¶å˜åŒ–\"\"\"    if not os.path.exists(filename):        print(f\"æ–‡ä»¶ {filename} ä¸å­˜åœ¨\")        return        last_modified = os.path.getmtime(filename)    last_size = os.path.getsize(filename)        print(f\"å¼€å§‹ç›‘æ§æ–‡ä»¶: {filename}\")    print(f\"åˆå§‹ä¿®æ”¹æ—¶é—´: {time.ctime(last_modified)}\")    print(f\"åˆå§‹æ–‡ä»¶å¤§å°: {last_size} å­—èŠ‚\")        start_time = time.time()    while time.time() - start_time &lt; duration:        current_modified = os.path.getmtime(filename)        current_size = os.path.getsize(filename)                if current_modified != last_modified:            print(f\"æ–‡ä»¶å·²ä¿®æ”¹: {time.ctime(current_modified)}\")            last_modified = current_modified                if current_size != last_size:            print(f\"æ–‡ä»¶å¤§å°å˜åŒ–: {last_size} -&gt; {current_size} å­—èŠ‚\")            last_size = current_size                time.sleep(check_interval)        print(\"ç›‘æ§ç»“æŸ\")# åˆ›å»ºæµ‹è¯•æ–‡ä»¶å¹¶å¯åŠ¨ç›‘æ§monitor_test_file = \"monitor_test.txt\"with open(monitor_test_file, \"w\", encoding=\"utf-8\") as f:    f.write(\"åˆå§‹å†…å®¹\")# åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­ä¿®æ”¹æ–‡ä»¶def modify_file():    time.sleep(2)    with open(monitor_test_file, \"a\", encoding=\"utf-8\") as f:        f.write(\"\\næ·»åŠ çš„å†…å®¹\")        time.sleep(2)    with open(monitor_test_file, \"a\", encoding=\"utf-8\") as f:        f.write(\"\\næ›´å¤šå†…å®¹\")modify_thread = threading.Thread(target=modify_file)modify_thread.start()# ç›‘æ§æ–‡ä»¶ï¼ˆè¿™é‡Œç®€åŒ–ä¸ºçŸ­æ—¶é—´ï¼‰monitor_file_changes(monitor_test_file, check_interval=0.5, duration=3)modify_thread.join()os.remove(monitor_test_file)# 5. æ–‡ä»¶å‹ç¼©å’Œè§£å‹print(\"\\n5. æ–‡ä»¶å‹ç¼©å’Œè§£å‹:\")import gzipimport zipfile# åˆ›å»ºæµ‹è¯•æ•°æ®test_content = \"è¿™æ˜¯è¦å‹ç¼©çš„æµ‹è¯•å†…å®¹ã€‚\" * 100# gzipå‹ç¼©with open(\"test_data.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(test_content)original_size = os.path.getsize(\"test_data.txt\")# ä½¿ç”¨gzipå‹ç¼©with open(\"test_data.txt\", \"rb\") as f_in:    with gzip.open(\"test_data.txt.gz\", \"wb\") as f_out:        f_out.write(f_in.read())compressed_size = os.path.getsize(\"test_data.txt.gz\")compression_ratio = (1 - compressed_size / original_size) * 100print(f\"åŸå§‹æ–‡ä»¶å¤§å°: {original_size} å­—èŠ‚\")print(f\"å‹ç¼©æ–‡ä»¶å¤§å°: {compressed_size} å­—èŠ‚\")print(f\"å‹ç¼©ç‡: {compression_ratio:.2f}%\")# gzipè§£å‹with gzip.open(\"test_data.txt.gz\", \"rb\") as f_in:    with open(\"test_data_decompressed.txt\", \"wb\") as f_out:        f_out.write(f_in.read())# éªŒè¯è§£å‹ç»“æœwith open(\"test_data_decompressed.txt\", \"r\", encoding=\"utf-8\") as f:    decompressed_content = f.read()    print(f\"è§£å‹éªŒè¯: {decompressed_content == test_content}\")# ZIPå‹ç¼©å¤šä¸ªæ–‡ä»¶with zipfile.ZipFile(\"test_archive.zip\", \"w\") as zip_file:    zip_file.write(\"test_data.txt\")    zip_file.write(\"test_data_decompressed.txt\")print(f\"ZIPæ–‡ä»¶å¤§å°: {os.path.getsize('test_archive.zip')} å­—èŠ‚\")# åˆ—å‡ºZIPæ–‡ä»¶å†…å®¹with zipfile.ZipFile(\"test_archive.zip\", \"r\") as zip_file:    print(\"ZIPæ–‡ä»¶å†…å®¹:\")    for info in zip_file.infolist():        print(f\"  {info.filename}: {info.file_size} å­—èŠ‚\")# æ¸…ç†å‹ç¼©æµ‹è¯•æ–‡ä»¶compression_test_files = [    \"test_data.txt\", \"test_data.txt.gz\",     \"test_data_decompressed.txt\", \"test_archive.zip\"]for filename in compression_test_files:    try:        os.remove(filename)    except FileNotFoundError:        pass# 6. æ–‡ä»¶å¤‡ä»½å’Œç‰ˆæœ¬æ§åˆ¶print(\"\\n6. æ–‡ä»¶å¤‡ä»½å’Œç‰ˆæœ¬æ§åˆ¶:\")import shutilfrom datetime import datetimedef backup_file(filename, backup_dir=\"backups\"):    \"\"\"åˆ›å»ºæ–‡ä»¶å¤‡ä»½\"\"\"    if not os.path.exists(filename):        print(f\"æ–‡ä»¶ {filename} ä¸å­˜åœ¨\")        return None        # åˆ›å»ºå¤‡ä»½ç›®å½•    if not os.path.exists(backup_dir):        os.makedirs(backup_dir)        # ç”Ÿæˆå¤‡ä»½æ–‡ä»¶å    timestamp = datetime.now().strftime(\"%Y%m%d_%H%M%S\")    base_name = os.path.splitext(os.path.basename(filename))[0]    extension = os.path.splitext(filename)[1]    backup_filename = f\"{base_name}_{timestamp}{extension}\"    backup_path = os.path.join(backup_dir, backup_filename)        # å¤åˆ¶æ–‡ä»¶    shutil.copy2(filename, backup_path)    print(f\"å¤‡ä»½åˆ›å»º: {filename} -&gt; {backup_path}\")    return backup_path# åˆ›å»ºæµ‹è¯•æ–‡ä»¶å¹¶å¤‡ä»½test_file = \"backup_test.txt\"with open(test_file, \"w\", encoding=\"utf-8\") as f:    f.write(\"åŸå§‹ç‰ˆæœ¬çš„å†…å®¹\")backup1 = backup_file(test_file)# ä¿®æ”¹æ–‡ä»¶å¹¶å†æ¬¡å¤‡ä»½time.sleep(1)  # ç¡®ä¿æ—¶é—´æˆ³ä¸åŒwith open(test_file, \"w\", encoding=\"utf-8\") as f:    f.write(\"ä¿®æ”¹åçš„å†…å®¹\")backup2 = backup_file(test_file)# åˆ—å‡ºå¤‡ä»½æ–‡ä»¶if os.path.exists(\"backups\"):    print(\"å¤‡ä»½æ–‡ä»¶åˆ—è¡¨:\")    for backup_file in os.listdir(\"backups\"):        backup_path = os.path.join(\"backups\", backup_file)        print(f\"  {backup_file}: {os.path.getsize(backup_path)} å­—èŠ‚\")# æ¸…ç†å¤‡ä»½æµ‹è¯•if os.path.exists(test_file):    os.remove(test_file)if os.path.exists(\"backups\"):    shutil.rmtree(\"backups\")print(\"\\né«˜çº§æ–‡ä»¶æ“ä½œç¤ºä¾‹å®Œæˆ\")âš ï¸ æ³¨æ„äº‹é¡¹å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ# open()å‡½æ•°çš„å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µprint(\"open()å‡½æ•°å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ:\")# é™·é˜±1: å¿˜è®°å…³é—­æ–‡ä»¶print(\"\\né™·é˜±1: æ–‡ä»¶æœªæ­£ç¡®å…³é—­\")# é”™è¯¯æ–¹å¼print(\"é”™è¯¯æ–¹å¼ï¼ˆå¯èƒ½å¯¼è‡´èµ„æºæ³„éœ²ï¼‰:\")f = open(\"sample.txt\", \"w\", encoding=\"utf-8\")f.write(\"è¿™ä¸ªæ–‡ä»¶å¯èƒ½ä¸ä¼šè¢«æ­£ç¡®å…³é—­\")# å¿˜è®°è°ƒç”¨ f.close()# æ­£ç¡®æ–¹å¼1: æ‰‹åŠ¨å…³é—­print(\"æ­£ç¡®æ–¹å¼1ï¼ˆæ‰‹åŠ¨å…³é—­ï¼‰:\")f = open(\"sample.txt\", \"w\", encoding=\"utf-8\")try:    f.write(\"æ‰‹åŠ¨å…³é—­çš„æ–‡ä»¶\")finally:    f.close()# æ­£ç¡®æ–¹å¼2: ä½¿ç”¨withè¯­å¥ï¼ˆæ¨èï¼‰print(\"æ­£ç¡®æ–¹å¼2ï¼ˆwithè¯­å¥ï¼Œæ¨èï¼‰:\")with open(\"sample.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(\"è‡ªåŠ¨å…³é—­çš„æ–‡ä»¶\")# æ–‡ä»¶åœ¨è¿™é‡Œè‡ªåŠ¨å…³é—­# é™·é˜±2: ç¼–ç é—®é¢˜print(\"\\né™·é˜±2: ç¼–ç é—®é¢˜\")# åˆ›å»ºåŒ…å«ä¸­æ–‡çš„æ–‡ä»¶with open(\"chinese_test.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(\"ä¸­æ–‡å†…å®¹æµ‹è¯•\")# é”™è¯¯æ–¹å¼ï¼šä¸æŒ‡å®šç¼–ç æˆ–ä½¿ç”¨é”™è¯¯ç¼–ç try:    with open(\"chinese_test.txt\", \"r\") as f:  # å¯èƒ½ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç¼–ç         content = f.read()        print(f\"ç³»ç»Ÿé»˜è®¤ç¼–ç è¯»å–: {content}\")except UnicodeDecodeError as e:    print(f\"ç¼–ç é”™è¯¯: {e}\")# æ­£ç¡®æ–¹å¼ï¼šæ˜ç¡®æŒ‡å®šç¼–ç with open(\"chinese_test.txt\", \"r\", encoding=\"utf-8\") as f:    content = f.read()    print(f\"UTF-8ç¼–ç è¯»å–: {content}\")# é™·é˜±3: æ–‡ä»¶æ¨¡å¼æ··æ·†print(\"\\né™·é˜±3: æ–‡ä»¶æ¨¡å¼æ··æ·†\")# åˆ›å»ºæµ‹è¯•æ–‡ä»¶with open(\"mode_test.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(\"åŸå§‹å†…å®¹\")# é”™è¯¯ï¼šåœ¨åªè¯»æ¨¡å¼ä¸‹å°è¯•å†™å…¥try:    with open(\"mode_test.txt\", \"r\", encoding=\"utf-8\") as f:        f.write(\"å°è¯•å†™å…¥\")  # è¿™ä¼šå¤±è´¥except io.UnsupportedOperation as e:    print(f\"åªè¯»æ¨¡å¼å†™å…¥é”™è¯¯: {e}\")# é”™è¯¯ï¼šåœ¨å†™å…¥æ¨¡å¼ä¸‹å°è¯•è¯»å–ï¼ˆwæ¨¡å¼ä¼šæ¸…ç©ºæ–‡ä»¶ï¼‰with open(\"mode_test.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(\"æ–°å†…å®¹\")    try:        f.seek(0)        content = f.read()  # è¿™å¯èƒ½ä¸ä¼šæŒ‰é¢„æœŸå·¥ä½œ    except io.UnsupportedOperation as e:        print(f\"å†™å…¥æ¨¡å¼è¯»å–é”™è¯¯: {e}\")# æ­£ç¡®æ–¹å¼ï¼šä½¿ç”¨é€‚å½“çš„æ¨¡å¼with open(\"mode_test.txt\", \"r+\", encoding=\"utf-8\") as f:    original = f.read()    f.seek(0, 2)  # ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾    f.write(\"\\nè¿½åŠ å†…å®¹\")    f.seek(0)    updated = f.read()    print(f\"r+æ¨¡å¼æ“ä½œæˆåŠŸ: {len(updated)} &gt; {len(original)}\")# é™·é˜±4: è·¯å¾„é—®é¢˜print(\"\\né™·é˜±4: æ–‡ä»¶è·¯å¾„é—®é¢˜\")# ç›¸å¯¹è·¯å¾„ vs ç»å¯¹è·¯å¾„current_dir = os.getcwd()print(f\"å½“å‰å·¥ä½œç›®å½•: {current_dir}\")# ç›¸å¯¹è·¯å¾„relative_path = \"test_file.txt\"with open(relative_path, \"w\", encoding=\"utf-8\") as f:    f.write(\"ç›¸å¯¹è·¯å¾„æ–‡ä»¶\")# ç»å¯¹è·¯å¾„absolute_path = os.path.join(current_dir, \"test_file_abs.txt\")with open(absolute_path, \"w\", encoding=\"utf-8\") as f:    f.write(\"ç»å¯¹è·¯å¾„æ–‡ä»¶\")print(f\"ç›¸å¯¹è·¯å¾„æ–‡ä»¶: {os.path.exists(relative_path)}\")print(f\"ç»å¯¹è·¯å¾„æ–‡ä»¶: {os.path.exists(absolute_path)}\")# è·¯å¾„åˆ†éš”ç¬¦é—®é¢˜print(\"\\nè·¯å¾„åˆ†éš”ç¬¦å¤„ç†:\")# é”™è¯¯æ–¹å¼ï¼ˆç¡¬ç¼–ç è·¯å¾„åˆ†éš”ç¬¦ï¼‰# wrong_path = \"data\\\\files\\\\test.txt\"  # Windowsé£æ ¼# wrong_path = \"data/files/test.txt\"     # Unixé£æ ¼# æ­£ç¡®æ–¹å¼ï¼ˆä½¿ç”¨os.path.joinï¼‰correct_path = os.path.join(\"data\", \"files\", \"test.txt\")print(f\"æ­£ç¡®çš„è·¯å¾„: {correct_path}\")# é™·é˜±5: å¤§æ–‡ä»¶å¤„ç†print(\"\\né™·é˜±5: å¤§æ–‡ä»¶å¤„ç†\")# é”™è¯¯æ–¹å¼ï¼šä¸€æ¬¡æ€§è¯»å–å¤§æ–‡ä»¶print(\"é”™è¯¯æ–¹å¼ï¼ˆå¯èƒ½å¯¼è‡´å†…å­˜ä¸è¶³ï¼‰:\")# åˆ›å»ºä¸€ä¸ªè¾ƒå¤§çš„æµ‹è¯•æ–‡ä»¶large_content = \"å¤§æ–‡ä»¶å†…å®¹è¡Œ\\n\" * 10000with open(\"large_file.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(large_content)# è¿™ç§æ–¹å¼å¯¹äºéå¸¸å¤§çš„æ–‡ä»¶å¯èƒ½å¯¼è‡´å†…å­˜é—®é¢˜with open(\"large_file.txt\", \"r\", encoding=\"utf-8\") as f:    all_content = f.read()  # ä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰å†…å®¹    print(f\"ä¸€æ¬¡æ€§è¯»å–: {len(all_content)} å­—ç¬¦\")# æ­£ç¡®æ–¹å¼ï¼šåˆ†å—å¤„ç†print(\"æ­£ç¡®æ–¹å¼ï¼ˆåˆ†å—å¤„ç†ï¼‰:\")chunk_size = 1024  # 1KBå—total_chars = 0with open(\"large_file.txt\", \"r\", encoding=\"utf-8\") as f:    while True:        chunk = f.read(chunk_size)        if not chunk:            break        total_chars += len(chunk)        # å¤„ç†chunk...print(f\"åˆ†å—å¤„ç†æ€»å­—ç¬¦æ•°: {total_chars}\")# é™·é˜±6: æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥print(\"\\né™·é˜±6: æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥\")# é”™è¯¯æ–¹å¼ï¼šä¸æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨try:    with open(\"nonexistent_file.txt\", \"r\", encoding=\"utf-8\") as f:        content = f.read()except FileNotFoundError as e:    print(f\"æ–‡ä»¶ä¸å­˜åœ¨é”™è¯¯: {e}\")# æ­£ç¡®æ–¹å¼ï¼šå…ˆæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨filename = \"maybe_exists.txt\"if os.path.exists(filename):    with open(filename, \"r\", encoding=\"utf-8\") as f:        content = f.read()        print(f\"æ–‡ä»¶å­˜åœ¨ï¼Œè¯»å–æˆåŠŸ\")else:    print(f\"æ–‡ä»¶ {filename} ä¸å­˜åœ¨\")    # å¯ä»¥é€‰æ‹©åˆ›å»ºæ–‡ä»¶æˆ–é‡‡å–å…¶ä»–è¡ŒåŠ¨    with open(filename, \"w\", encoding=\"utf-8\") as f:        f.write(\"æ–°åˆ›å»ºçš„æ–‡ä»¶\")    print(f\"å·²åˆ›å»ºæ–‡ä»¶ {filename}\")# é™·é˜±7: ç¼“å†²åŒºé—®é¢˜print(\"\\né™·é˜±7: ç¼“å†²åŒºé—®é¢˜\")# åˆ›å»ºä¸€ä¸ªéœ€è¦å®æ—¶å†™å…¥çš„åœºæ™¯log_file = \"realtime.log\"with open(log_file, \"w\", encoding=\"utf-8\") as f:    for i in range(3):        f.write(f\"æ—¥å¿—æ¡ç›® {i+1}\\n\")        # ä¸åˆ·æ–°ç¼“å†²åŒºï¼Œå†…å®¹å¯èƒ½ä¸ä¼šç«‹å³å†™å…¥ç£ç›˜        print(f\"å†™å…¥æ¡ç›® {i+1}ï¼ˆå¯èƒ½è¿˜åœ¨ç¼“å†²åŒºï¼‰\")        time.sleep(0.5)print(\"\\nä½¿ç”¨flush()å¼ºåˆ¶åˆ·æ–°:\")with open(log_file, \"w\", encoding=\"utf-8\") as f:    for i in range(3):        f.write(f\"å®æ—¶æ—¥å¿—æ¡ç›® {i+1}\\n\")        f.flush()  # å¼ºåˆ¶åˆ·æ–°åˆ°ç£ç›˜        print(f\"å®æ—¶å†™å…¥æ¡ç›® {i+1}\")        time.sleep(0.5)# é™·é˜±8: å¼‚å¸¸å¤„ç†ä¸å½“print(\"\\né™·é˜±8: å¼‚å¸¸å¤„ç†\")# é”™è¯¯æ–¹å¼ï¼šæ•è·è¿‡äºå®½æ³›çš„å¼‚å¸¸try:    with open(\"test_exception.txt\", \"r\", encoding=\"utf-8\") as f:        content = f.read()except Exception as e:  # è¿‡äºå®½æ³›    print(f\"å‘ç”Ÿäº†æŸç§é”™è¯¯: {e}\")# æ­£ç¡®æ–¹å¼ï¼šæ•è·å…·ä½“çš„å¼‚å¸¸try:    with open(\"test_exception.txt\", \"r\", encoding=\"utf-8\") as f:        content = f.read()except FileNotFoundError:    print(\"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶\")    with open(\"test_exception.txt\", \"w\", encoding=\"utf-8\") as f:        f.write(\"æ–°åˆ›å»ºçš„æ–‡ä»¶å†…å®¹\")except PermissionError:    print(\"æ²¡æœ‰æƒé™è®¿é—®æ–‡ä»¶\")except UnicodeDecodeError:    print(\"æ–‡ä»¶ç¼–ç é—®é¢˜\")except OSError as e:    print(f\"æ“ä½œç³»ç»Ÿç›¸å…³é”™è¯¯: {e}\")# æ¸…ç†æµ‹è¯•æ–‡ä»¶test_files = [    \"sample.txt\", \"chinese_test.txt\", \"mode_test.txt\",     \"test_file.txt\", \"test_file_abs.txt\", \"large_file.txt\",    \"maybe_exists.txt\", \"realtime.log\", \"test_exception.txt\"]for filename in test_files:    try:        os.remove(filename)    except FileNotFoundError:        passprint(\"\\nå·²æ¸…ç†æ‰€æœ‰æµ‹è¯•æ–‡ä»¶\")ğŸ”§ æ€§èƒ½ä¼˜åŒ–æ–‡ä»¶æ“ä½œæ€§èƒ½å¯¹æ¯”# æ–‡ä»¶æ“ä½œæ€§èƒ½å¯¹æ¯”print(\"æ–‡ä»¶æ“ä½œæ€§èƒ½å¯¹æ¯”:\")import time# åˆ›å»ºæµ‹è¯•æ•°æ®test_lines = [f\"è¿™æ˜¯ç¬¬{i}è¡Œæµ‹è¯•æ•°æ®\\n\" for i in range(10000)]test_content = \"\".join(test_lines)print(f\"æµ‹è¯•æ•°æ®: {len(test_lines)} è¡Œ, {len(test_content)} å­—ç¬¦\")# æ€§èƒ½æµ‹è¯•1: ä¸åŒå†™å…¥æ–¹å¼print(\"\\n1. å†™å…¥æ€§èƒ½å¯¹æ¯”:\")# æ–¹æ³•1: é€è¡Œå†™å…¥start_time = time.time()with open(\"perf_test1.txt\", \"w\", encoding=\"utf-8\") as f:    for line in test_lines:        f.write(line)time1 = time.time() - start_time# æ–¹æ³•2: æ‰¹é‡å†™å…¥start_time = time.time()with open(\"perf_test2.txt\", \"w\", encoding=\"utf-8\") as f:    f.write(test_content)time2 = time.time() - start_time# æ–¹æ³•3: writelinesstart_time = time.time()with open(\"perf_test3.txt\", \"w\", encoding=\"utf-8\") as f:    f.writelines(test_lines)time3 = time.time() - start_timeprint(f\"é€è¡Œå†™å…¥: {time1:.6f}ç§’\")print(f\"æ‰¹é‡å†™å…¥: {time2:.6f}ç§’\")print(f\"writelines: {time3:.6f}ç§’\")print(f\"æœ€å¿«æ–¹æ³•: {'æ‰¹é‡å†™å…¥' if time2 &lt; min(time1, time3) else 'writelines' if time3 &lt; time1 else 'é€è¡Œå†™å…¥'}\")# æ€§èƒ½æµ‹è¯•2: ä¸åŒè¯»å–æ–¹å¼print(\"\\n2. è¯»å–æ€§èƒ½å¯¹æ¯”:\")# æ–¹æ³•1: read()å…¨éƒ¨è¯»å–start_time = time.time()with open(\"perf_test1.txt\", \"r\", encoding=\"utf-8\") as f:    content = f.read()time1 = time.time() - start_time# æ–¹æ³•2: readlines()start_time = time.time()with open(\"perf_test1.txt\", \"r\", encoding=\"utf-8\") as f:    lines = f.readlines()time2 = time.time() - start_time# æ–¹æ³•3: é€è¡Œè¿­ä»£start_time = time.time()lines_count = 0with open(\"perf_test1.txt\", \"r\", encoding=\"utf-8\") as f:    for line in f:        lines_count += 1time3 = time.time() - start_timeprint(f\"read()å…¨éƒ¨: {time1:.6f}ç§’\")print(f\"readlines(): {time2:.6f}ç§’\")print(f\"é€è¡Œè¿­ä»£: {time3:.6f}ç§’ (å¤„ç†äº†{lines_count}è¡Œ)\")# æ€§èƒ½æµ‹è¯•3: ç¼“å†²åŒºå¤§å°å½±å“print(\"\\n3. ç¼“å†²åŒºå¤§å°å½±å“:\")buffer_sizes = [1024, 8192, 65536]  # 1KB, 8KB, 64KBfor buffer_size in buffer_sizes:    start_time = time.time()    with open(\"perf_test1.txt\", \"r\", encoding=\"utf-8\", buffering=buffer_size) as f:        content = f.read()    elapsed = time.time() - start_time    print(f\"ç¼“å†²åŒº {buffer_size//1024}KB: {elapsed:.6f}ç§’\")# æ¸…ç†æ€§èƒ½æµ‹è¯•æ–‡ä»¶for i in range(1, 4):    try:        os.remove(f\"perf_test{i}.txt\")    except FileNotFoundError:        passprint(\"\\næ€§èƒ½æµ‹è¯•å®Œæˆ\")ğŸ“š ç›¸å…³å‡½æ•°å’Œæ¨¡å—ç›¸å…³å†…ç½®å‡½æ•°  print() - è¾“å‡ºåˆ°æ–‡ä»¶æˆ–æ ‡å‡†è¾“å‡º  input() - ä»æ ‡å‡†è¾“å…¥è¯»å–  iter() - åˆ›å»ºè¿­ä»£å™¨  next() - è·å–è¿­ä»£å™¨ä¸‹ä¸€ä¸ªå…ƒç´ ç›¸å…³æ ‡å‡†åº“æ¨¡å—  os - æ“ä½œç³»ç»Ÿæ¥å£  os.path - è·¯å¾„æ“ä½œ  pathlib - é¢å‘å¯¹è±¡çš„è·¯å¾„æ“ä½œ  io - æ ¸å¿ƒI/Oå·¥å…·  tempfile - ä¸´æ—¶æ–‡ä»¶å’Œç›®å½•  shutil - é«˜çº§æ–‡ä»¶æ“ä½œ  glob - æ–‡ä»¶åæ¨¡å¼åŒ¹é…  csv - CSVæ–‡ä»¶è¯»å†™  json - JSONæ•°æ®å¤„ç†  pickle - Pythonå¯¹è±¡åºåˆ—åŒ–ğŸ”— æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - open()  Pythonå®˜æ–¹æ–‡æ¡£ - æ–‡ä»¶å¯¹è±¡  Pythonå®˜æ–¹æ–‡æ¡£ - æ–‡ä»¶å’Œç›®å½•è®¿é—®  PEP 3116 - æ–°I/O  Real Python - æ–‡ä»¶å¤„ç†æŒ‡å—æœ€åæ›´æ–°: 2024-01-15",
        "url": "/docs/builtins/open/",
        "category": "builtins",
        "tags": ["æ–‡ä»¶æ“ä½œ","è¾“å…¥è¾“å‡º","æ–‡æœ¬å¤„ç†","äºŒè¿›åˆ¶"]
      }
      
    
  
    
      ,
      {
        "title": "operatoræ¨¡å—",
        "content": "operatoræ¨¡å—ğŸ“ æ¦‚è¿°operatoræ¨¡å—æä¾›äº†ä¸€å¥—ä¸Pythonå†…ç½®è¿ç®—ç¬¦å¯¹åº”çš„é«˜æ•ˆç‡å‡½æ•°ã€‚è®¸å¤šå‡½æ•°åä¸ç‰¹æ®Šæ–¹æ³•åç›¸åŒï¼Œåªæ˜¯æ²¡æœ‰åŒä¸‹åˆ’çº¿ã€‚è¯¥æ¨¡å—åŒ…å«å¯¹è±¡çš„æ¯”è¾ƒè¿ç®—ã€é€»è¾‘è¿ç®—ã€æ•°å­¦è¿ç®—ä»¥åŠåºåˆ—è¿ç®—ï¼Œè¿˜æä¾›äº†ä¸‰ä¸ªå¼ºå¤§çš„ç±»ï¼šattrgetterã€itemgetterå’Œmethodcallerï¼Œç”¨äºå‡½æ•°å¼ç¼–ç¨‹å’Œé«˜æ•ˆæ•°æ®å¤„ç†ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  ç†è§£operatoræ¨¡å—çš„ä½œç”¨å’Œä¼˜åŠ¿  æŒæ¡è¿ç®—ç¬¦åˆ°å‡½æ•°çš„æ˜ å°„å…³ç³»  å­¦ä¼šä½¿ç”¨attrgetterã€itemgetterã€methodcallerä¸‰ä¸ªæ ¸å¿ƒç±»  äº†è§£operatoræ¨¡å—åœ¨æ’åºå’Œæ•°æ®å¤„ç†ä¸­çš„åº”ç”¨  æŒæ¡æ€§èƒ½ä¼˜åŒ–æŠ€å·§ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•å’Œè¿ç®—ç¬¦  å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ  æ’åºå’Œæ•°æ®å¤„ç†åŸºç¡€ğŸ” è¯¦ç»†å†…å®¹è¿ç®—ç¬¦æ˜ å°„è¡¨operatoræ¨¡å—å°†Pythonè¿ç®—ç¬¦æ˜ å°„ä¸ºå¯¹åº”çš„å‡½æ•°ï¼Œæä¾›äº†æ›´é«˜çš„æ‰§è¡Œæ•ˆç‡ã€‚            æ“ä½œ      è¯­æ³•      å‡½æ•°                  åŠ æ³•      a + b      add(a, b)              å‡æ³•      a - b      sub(a, b)              ä¹˜æ³•      a * b      mul(a, b)              é™¤æ³•      a / b      truediv(a, b)              æ•´é™¤      a // b      floordiv(a, b)              å–æ¨¡      a % b      mod(a, b)              å¹‚è¿ç®—      a ** b      pow(a, b)              çŸ©é˜µä¹˜æ³•      a @ b      matmul(a, b)      æ¯”è¾ƒè¿ç®—ç¬¦import operator# æ¯”è¾ƒè¿ç®—ç¬¦å‡½æ•°print(operator.lt(3, 5))    # å°äº: Trueprint(operator.le(3, 5))    # å°äºç­‰äº: Trueprint(operator.eq(3, 3))    # ç­‰äº: Trueprint(operator.ne(3, 5))    # ä¸ç­‰äº: Trueprint(operator.gt(5, 3))    # å¤§äº: Trueprint(operator.ge(5, 3))    # å¤§äºç­‰äº: Trueé€»è¾‘è¿ç®—ç¬¦import operator# é€»è¾‘è¿ç®—print(operator.and_(True, False))   # é€»è¾‘ä¸: Falseprint(operator.or_(True, False))    # é€»è¾‘æˆ–: Trueprint(operator.not_(True))          # é€»è¾‘é: Falseprint(operator.xor(True, False))    # å¼‚æˆ–: True# æŒ‰ä½è¿ç®—print(operator.and_(5, 3))          # æŒ‰ä½ä¸: 1print(operator.or_(5, 3))           # æŒ‰ä½æˆ–: 7print(operator.xor(5, 3))           # æŒ‰ä½å¼‚æˆ–: 6print(operator.invert(5))           # æŒ‰ä½å–å: -6åºåˆ—æ“ä½œimport operator# åºåˆ—æ“ä½œdata = [1, 2, 3, 4, 5]print(operator.getitem(data, 2))        # è·å–ç´¢å¼•: 3print(operator.contains(data, 3))       # æˆå‘˜æµ‹è¯•: Trueprint(operator.countOf(data, 2))        # è®¡æ•°: 1print(operator.indexOf(data, 4))        # æŸ¥æ‰¾ç´¢å¼•: 3# åºåˆ—è¿æ¥list1 = [1, 2]list2 = [3, 4]print(operator.concat(list1, list2))    # è¿æ¥: [1, 2, 3, 4]attrgetterç±»attrgetterç”¨äºè·å–å¯¹è±¡çš„å±æ€§ï¼Œç‰¹åˆ«é€‚ç”¨äºæ’åºæ“ä½œã€‚from operator import attrgetterclass Student:    def __init__(self, name, age, score):        self.name = name        self.age = age        self.score = score        def __repr__(self):        return f'Student(name={self.name!r}, age={self.age}, score={self.score})'# åˆ›å»ºå­¦ç”Ÿåˆ—è¡¨students = [    Student(\"Alice\", 20, 85),    Student(\"Bob\", 19, 92),    Student(\"Charlie\", 21, 78),    Student(\"Diana\", 20, 95)]# æŒ‰å¹´é¾„æ’åºstudents_by_age = sorted(students, key=attrgetter('age'))print(\"æŒ‰å¹´é¾„æ’åº:\", students_by_age)# æŒ‰åˆ†æ•°æ’åºï¼ˆé™åºï¼‰students_by_score = sorted(students, key=attrgetter('score'), reverse=True)print(\"æŒ‰åˆ†æ•°æ’åº:\", students_by_score)# å¤šå±æ€§æ’åºï¼ˆå…ˆæŒ‰å¹´é¾„ï¼Œå†æŒ‰åˆ†æ•°ï¼‰students_multi = sorted(students, key=attrgetter('age', 'score'))print(\"å¤šå±æ€§æ’åº:\", students_multi)itemgetterç±»itemgetterç”¨äºè·å–å¯¹è±¡çš„é¡¹ï¼Œæ”¯æŒç´¢å¼•ã€é”®å’Œåˆ‡ç‰‡æ“ä½œã€‚åŸºæœ¬ç”¨æ³•from operator import itemgetter# å¤„ç†å…ƒç»„åˆ—è¡¨data = [    (\"Alice\", 25, 85),    (\"Bob\", 23, 92),    (\"Charlie\", 27, 78),    (\"Diana\", 24, 95)]# æŒ‰å¹´é¾„ï¼ˆç´¢å¼•1ï¼‰æ’åºsorted_by_age = sorted(data, key=itemgetter(1))print(\"æŒ‰å¹´é¾„æ’åº:\", sorted_by_age)# æŒ‰åˆ†æ•°ï¼ˆç´¢å¼•2ï¼‰æ’åºsorted_by_score = sorted(data, key=itemgetter(2), reverse=True)print(\"æŒ‰åˆ†æ•°æ’åº:\", sorted_by_score)å¤šé¡¹è·å–from operator import itemgetter# è·å–å¤šä¸ªé¡¹get_multiple = itemgetter(1, 3, 5)result = get_multiple('ABCDEFG')print(result)  # è¾“å‡º: ('B', 'D', 'F')# ä½¿ç”¨åˆ‡ç‰‡get_slice = itemgetter(slice(2, None))result = get_slice('ABCDEFG')print(result)  # è¾“å‡º: 'CDEFG'# å¤„ç†å­—å…¸åˆ—è¡¨inventory = [    {'name': 'apple', 'count': 3, 'price': 1.2},    {'name': 'banana', 'count': 2, 'price': 0.8},    {'name': 'orange', 'count': 5, 'price': 1.5}]# æŒ‰æ•°é‡æ’åºsorted_by_count = sorted(inventory, key=itemgetter('count'))print(\"æŒ‰æ•°é‡æ’åº:\", sorted_by_count)methodcallerç±»methodcallerç”¨äºè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Œæ”¯æŒä¼ é€’å‚æ•°ã€‚from operator import methodcallerimport mathclass Point:    def __init__(self, x, y):        self.x = x        self.y = y        def __repr__(self):        return f'Point({self.x}, {self.y})'        def distance(self, x, y):        \"\"\"è®¡ç®—åˆ°æŒ‡å®šç‚¹çš„è·ç¦»\"\"\"        return math.hypot(self.x - x, self.y - y)        def move(self, dx, dy):        \"\"\"ç§»åŠ¨ç‚¹çš„ä½ç½®\"\"\"        self.x += dx        self.y += dy        return self# åˆ›å»ºç‚¹åˆ—è¡¨points = [    Point(3, 4),    Point(1, 2),    Point(5, 0),    Point(2, 3)]# æŒ‰åˆ°åŸç‚¹çš„è·ç¦»æ’åºsorted_points = sorted(points, key=methodcaller('distance', 0, 0))print(\"æŒ‰è·ç¦»æ’åº:\", sorted_points)# æ‰¹é‡è°ƒç”¨æ–¹æ³•move_right = methodcaller('move', 1, 0)for point in points:    move_right(point)print(\"ç§»åŠ¨å:\", points)ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•from operator import itemgetter, attrgetter# æ•°æ®å¤„ç†ç¤ºä¾‹def process_sales_data():    \"\"\"å¤„ç†é”€å”®æ•°æ®\"\"\"    sales_data = [        {'product': 'iPhone', 'quantity': 100, 'price': 999},        {'product': 'iPad', 'quantity': 50, 'price': 599},        {'product': 'MacBook', 'quantity': 30, 'price': 1299},        {'product': 'AirPods', 'quantity': 200, 'price': 179}    ]        # æŒ‰ä»·æ ¼æ’åº    by_price = sorted(sales_data, key=itemgetter('price'), reverse=True)    print(\"æŒ‰ä»·æ ¼æ’åº:\", by_price)        # æŒ‰æ•°é‡æ’åº    by_quantity = sorted(sales_data, key=itemgetter('quantity'))    print(\"æŒ‰æ•°é‡æ’åº:\", by_quantity)        # è®¡ç®—æ€»æ”¶å…¥å¹¶æ’åº    for item in sales_data:        item['revenue'] = item['quantity'] * item['price']        by_revenue = sorted(sales_data, key=itemgetter('revenue'), reverse=True)    print(\"æŒ‰æ”¶å…¥æ’åº:\", by_revenue)process_sales_data()é«˜çº§ç”¨æ³•from operator import itemgetter, attrgetter, methodcallerfrom collections import namedtuple# ä½¿ç”¨namedtupleå’Œoperatorçš„ç»„åˆEmployee = namedtuple('Employee', ['name', 'department', 'salary', 'years'])employees = [    Employee('Alice', 'Engineering', 95000, 5),    Employee('Bob', 'Marketing', 75000, 3),    Employee('Charlie', 'Engineering', 105000, 8),    Employee('Diana', 'Sales', 85000, 4)]class EmployeeAnalyzer:    \"\"\"å‘˜å·¥æ•°æ®åˆ†æå™¨\"\"\"        def __init__(self, employees):        self.employees = employees        def sort_by_salary(self, reverse=True):        \"\"\"æŒ‰è–ªèµ„æ’åº\"\"\"        return sorted(self.employees, key=attrgetter('salary'), reverse=reverse)        def sort_by_department_and_salary(self):        \"\"\"æŒ‰éƒ¨é—¨å’Œè–ªèµ„æ’åº\"\"\"        return sorted(self.employees, key=attrgetter('department', 'salary'))        def get_top_earners(self, n=3):        \"\"\"è·å–æ”¶å…¥æœ€é«˜çš„Nä¸ªå‘˜å·¥\"\"\"        return self.sort_by_salary()[:n]        def group_by_department(self):        \"\"\"æŒ‰éƒ¨é—¨åˆ†ç»„\"\"\"        from itertools import groupby        sorted_emp = sorted(self.employees, key=attrgetter('department'))        return {dept: list(group) for dept, group in groupby(sorted_emp, key=attrgetter('department'))}# ä½¿ç”¨ç¤ºä¾‹analyzer = EmployeeAnalyzer(employees)print(\"è–ªèµ„æ’åº:\", analyzer.sort_by_salary())print(\"éƒ¨é—¨åˆ†ç»„:\", analyzer.group_by_department())å®é™…æ¡ˆä¾‹from operator import itemgetter, attrgetter, methodcallerimport timeclass LogEntry:    \"\"\"æ—¥å¿—æ¡ç›®ç±»\"\"\"        def __init__(self, timestamp, level, message, module):        self.timestamp = timestamp        self.level = level        self.message = message        self.module = module        def __repr__(self):        return f'LogEntry({self.timestamp}, {self.level}, {self.module})'        def format_message(self, format_type='simple'):        \"\"\"æ ¼å¼åŒ–æ¶ˆæ¯\"\"\"        if format_type == 'simple':            return f\"[{self.level}] {self.message}\"        elif format_type == 'detailed':            return f\"[{time.ctime(self.timestamp)}] [{self.level}] {self.module}: {self.message}\"        return self.messageclass LogAnalyzer:    \"\"\"æ—¥å¿—åˆ†æå™¨\"\"\"        def __init__(self):        self.logs = []        def add_log(self, timestamp, level, message, module):        \"\"\"æ·»åŠ æ—¥å¿—æ¡ç›®\"\"\"        self.logs.append(LogEntry(timestamp, level, message, module))        def sort_by_time(self, reverse=False):        \"\"\"æŒ‰æ—¶é—´æ’åº\"\"\"        return sorted(self.logs, key=attrgetter('timestamp'), reverse=reverse)        def sort_by_level(self):        \"\"\"æŒ‰æ—¥å¿—çº§åˆ«æ’åº\"\"\"        level_priority = {'DEBUG': 0, 'INFO': 1, 'WARNING': 2, 'ERROR': 3, 'CRITICAL': 4}        return sorted(self.logs, key=lambda log: level_priority.get(log.level, 0))        def filter_by_level(self, level):        \"\"\"æŒ‰çº§åˆ«è¿‡æ»¤\"\"\"        return [log for log in self.logs if log.level == level]        def format_all(self, format_type='simple'):        \"\"\"æ ¼å¼åŒ–æ‰€æœ‰æ—¥å¿—\"\"\"        formatter = methodcaller('format_message', format_type)        return [formatter(log) for log in self.logs]# ä½¿ç”¨ç¤ºä¾‹analyzer = LogAnalyzer()analyzer.add_log(time.time() - 3600, 'ERROR', 'Database connection failed', 'db')analyzer.add_log(time.time() - 1800, 'INFO', 'User logged in', 'auth')analyzer.add_log(time.time() - 900, 'WARNING', 'High memory usage', 'system')analyzer.add_log(time.time(), 'DEBUG', 'Processing request', 'api')print(\"æŒ‰æ—¶é—´æ’åº:\", analyzer.sort_by_time())print(\"æŒ‰çº§åˆ«æ’åº:\", analyzer.sort_by_level())print(\"æ ¼å¼åŒ–è¾“å‡º:\", analyzer.format_all('detailed'))âš ï¸ æ³¨æ„äº‹é¡¹  æ€§èƒ½ä¼˜åŠ¿: operatorå‡½æ•°é€šå¸¸æ¯”lambdaè¡¨è¾¾å¼æ›´å¿«ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§æ•°æ®é›†ä¸Š  å¯è¯»æ€§: å¯¹äºç®€å•æ“ä½œï¼Œoperatorå‡½æ•°å¯èƒ½æ¯”lambdaæ›´æ¸…æ™°  å†…å­˜æ•ˆç‡: operatorå‡½æ•°æ˜¯Cå®ç°çš„ï¼Œå†…å­˜å ç”¨æ›´å°‘  å¤šå±æ€§æ’åº: attrgetterå’Œitemgetteræ”¯æŒå¤šå±æ€§æ’åº  é”™è¯¯å¤„ç†: ä½¿ç”¨æ—¶è¦æ³¨æ„å±æ€§æˆ–é”®æ˜¯å¦å­˜åœ¨# æ€§èƒ½æ¯”è¾ƒç¤ºä¾‹import timefrom operator import itemgetterdata = [(i, i*2) for i in range(100000)]# ä½¿ç”¨lambdastart = time.time()sorted_lambda = sorted(data, key=lambda x: x[1])lambda_time = time.time() - start# ä½¿ç”¨itemgetterstart = time.time()sorted_itemgetter = sorted(data, key=itemgetter(1))itemgetter_time = time.time() - startprint(f\"Lambdaæ—¶é—´: {lambda_time:.4f}ç§’\")print(f\"itemgetteræ—¶é—´: {itemgetter_time:.4f}ç§’\")print(f\"æ€§èƒ½æå‡: {lambda_time/itemgetter_time:.2f}å€\")ğŸ”— ç›¸å…³å†…å®¹  functoolsæ¨¡å— - å‡½æ•°å¼ç¼–ç¨‹å·¥å…·  itertoolsæ¨¡å— - è¿­ä»£å™¨å·¥å…·  collectionsæ¨¡å— - ä¸“ç”¨å®¹å™¨æ•°æ®ç±»å‹  æ’åºç®—æ³• - æ’åºçš„åŸºç¡€çŸ¥è¯†ğŸ“š æ‰©å±•é˜…è¯»  Python operatoræ¨¡å—å®˜æ–¹æ–‡æ¡£  å‡½æ•°å¼ç¼–ç¨‹æŒ‡å—  Pythonæ€§èƒ½ä¼˜åŒ–æŠ€å·§ğŸ·ï¸ æ ‡ç­¾operator è¿ç®—ç¬¦ å‡½æ•°å¼ç¼–ç¨‹ æ ‡å‡†åº“ æ€§èƒ½ä¼˜åŒ– æ’åº æ•°æ®å¤„ç†æœ€åæ›´æ–°: 2024-01-01ä½œè€…: Pythonæ–‡æ¡£å›¢é˜Ÿç‰ˆæœ¬: 1.0",
        "url": "/docs/stdlib/operator/",
        "category": "stdlib",
        "tags": ["operator","è¿ç®—ç¬¦","å‡½æ•°å¼ç¼–ç¨‹","æ ‡å‡†åº“"]
      }
      
    
  
    
      ,
      {
        "title": "PythonåŒ…å’Œ__init__.pyæ–‡ä»¶",
        "content": "PythonåŒ…å’Œ__init__.pyæ–‡ä»¶ğŸ“ æ¦‚è¿°PythonåŒ…æ˜¯ç»„ç»‡å’Œç®¡ç†ä»£ç çš„é‡è¦æœºåˆ¶ï¼Œè€Œ__init__.pyæ–‡ä»¶æ˜¯åŒ…çš„æ ¸å¿ƒç»„ä»¶ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨PythonåŒ…çš„æ¦‚å¿µã€__init__.pyæ–‡ä»¶çš„ä½œç”¨ï¼Œä»¥åŠå¦‚ä½•æœ‰æ•ˆåœ°ç»„ç»‡å’Œç®¡ç†Pythoné¡¹ç›®ç»“æ„ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  ç†è§£Pythonæ¨¡å—å’ŒåŒ…çš„åŒºåˆ«  æŒæ¡__init__.pyæ–‡ä»¶çš„ä½œç”¨å’Œç”¨æ³•  å­¦ä¼šä½¿ç”¨åŒ…æ¥ç»„ç»‡é¡¹ç›®ç»“æ„  äº†è§£åŒ…çš„é«˜çº§ç‰¹æ€§å’Œæœ€ä½³å®è·µğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºç¡€è¯­æ³•  æ¨¡å—å¯¼å…¥æœºåˆ¶  æ–‡ä»¶å’Œç›®å½•æ“ä½œğŸ” è¯¦ç»†å†…å®¹æ¨¡å—ä¸åŒ…çš„åŸºæœ¬æ¦‚å¿µæ¨¡å—ï¼ˆModuleï¼‰æ¨¡å—æ˜¯ä¸€ä¸ªåŒ…å«Pythonä»£ç çš„.pyæ–‡ä»¶ï¼Œå¯ä»¥å®šä¹‰å‡½æ•°ã€ç±»å’Œå˜é‡ã€‚# math_tools.pydef add(a, b):    \"\"\"åŠ æ³•è¿ç®—\"\"\"    return a + bdef subtract(a, b):    \"\"\"å‡æ³•è¿ç®—\"\"\"    return a - bdef multiply(a, b):    \"\"\"ä¹˜æ³•è¿ç®—\"\"\"    return a * bä½¿ç”¨æ¨¡å—ï¼šimport math_toolsresult = math_tools.add(3, 5)  # è¾“å‡º: 8print(f\"3 + 5 = {result}\")åŒ…ï¼ˆPackageï¼‰åŒ…æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ç›®å½•ï¼Œç”¨äºç»„ç»‡ç›¸å…³çš„æ¨¡å—ã€‚math_utils/          # åŒ…ç›®å½•â”œâ”€â”€ __init__.py      # åŒ…åˆå§‹åŒ–æ–‡ä»¶â”œâ”€â”€ basic.py         # åŸºç¡€æ•°å­¦è¿ç®—æ¨¡å—â”œâ”€â”€ advanced.py      # é«˜çº§æ•°å­¦è¿ç®—æ¨¡å—â””â”€â”€ statistics.py    # ç»Ÿè®¡è¿ç®—æ¨¡å—init.pyæ–‡ä»¶çš„ä½œç”¨1. æ ‡è®°ç›®å½•ä¸ºPythonåŒ…__init__.pyæ–‡ä»¶çš„å­˜åœ¨æ˜ç¡®å‘Šè¯‰Pythonè§£é‡Šå™¨è¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªåŒ…ï¼š# math_utils/__init__.py# è¿™ä¸ªæ–‡ä»¶å¯ä»¥ä¸ºç©ºï¼Œä»…ä½œä¸ºåŒ…çš„æ ‡è¯†pass2. æ§åˆ¶åŒ…çš„å¯¼å…¥è¡Œä¸ºé€šè¿‡åœ¨__init__.pyä¸­ç¼–å†™ä»£ç ï¼Œå¯ä»¥è‡ªå®šä¹‰åŒ…çš„å¯¼å…¥è¡Œä¸ºï¼š# math_utils/__init__.pyfrom .basic import add, subtract, multiply, dividefrom .advanced import power, sqrt, factorialfrom .statistics import mean, median, mode# å®šä¹‰åŒ…çš„ç‰ˆæœ¬__version__ = \"1.0.0\"# å®šä¹‰å…¬å¼€æ¥å£__all__ = [    'add', 'subtract', 'multiply', 'divide',    'power', 'sqrt', 'factorial',    'mean', 'median', 'mode']ä½¿ç”¨åŒ…ï¼šimport math_utils# ç›´æ¥ä½¿ç”¨åŒ…ä¸­çš„å‡½æ•°result = math_utils.add(10, 5)print(f\"10 + 5 = {result}\")# æŸ¥çœ‹åŒ…ç‰ˆæœ¬print(f\"ç‰ˆæœ¬: {math_utils.__version__}\")3. åŒ…åˆå§‹åŒ–æ“ä½œ__init__.pyåœ¨åŒ…è¢«é¦–æ¬¡å¯¼å…¥æ—¶æ‰§è¡Œï¼Œå¯ä»¥è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼š# math_utils/__init__.pyimport logging# é…ç½®æ—¥å¿—logging.basicConfig(level=logging.INFO)logger = logging.getLogger(__name__)logger.info(\"æ•°å­¦å·¥å…·åŒ…å·²åŠ è½½\")# åˆå§‹åŒ–é…ç½®CONFIG = {    'precision': 10,    'use_cache': True}def get_config():    \"\"\"è·å–åŒ…é…ç½®\"\"\"    return CONFIG.copy()åŒ…çš„é«˜çº§ç‰¹æ€§åŠ¨æ€å¯¼å…¥å­æ¨¡å—# math_utils/__init__.pyimport osimport importlib# è·å–å½“å‰åŒ…è·¯å¾„package_path = os.path.dirname(__file__)# åŠ¨æ€å¯¼å…¥æ‰€æœ‰æ¨¡å—for filename in os.listdir(package_path):    if filename.endswith('.py') and filename != '__init__.py':        module_name = filename[:-3]  # å»æ‰.pyåç¼€        try:            importlib.import_module(f'{__name__}.{module_name}')            print(f\"å·²åŠ è½½æ¨¡å—: {module_name}\")        except ImportError as e:            print(f\"åŠ è½½æ¨¡å— {module_name} å¤±è´¥: {e}\")æ§åˆ¶å…¬å¼€æ¥å£# math_utils/__init__.pyfrom .basic import add, subtractfrom .advanced import power# åªæš´éœ²æŒ‡å®šçš„å‡½æ•°__all__ = ['add', 'subtract', 'power']# éšè—å†…éƒ¨å®ç°_internal_config = {'debug': False}def _internal_function():    \"\"\"å†…éƒ¨å‡½æ•°ï¼Œä¸å¯¹å¤–æš´éœ²\"\"\"    passæ‡’åŠ è½½æœºåˆ¶# math_utils/__init__.pyimport importlibfrom typing import Anyclass LazyLoader:    \"\"\"æ‡’åŠ è½½å™¨\"\"\"        def __init__(self, module_name: str):        self.module_name = module_name        self._module = None        def __getattr__(self, name: str) -&gt; Any:        if self._module is None:            self._module = importlib.import_module(f'{__name__}.{self.module_name}')        return getattr(self._module, name)# æ‡’åŠ è½½é«˜çº§æ¨¡å—advanced = LazyLoader('advanced')statistics = LazyLoader('statistics')å‚æ•°è¯´æ˜            ç‰¹æ€§      è¯´æ˜      ç¤ºä¾‹                  __init__.py      åŒ…åˆå§‹åŒ–æ–‡ä»¶      æ ‡è®°ç›®å½•ä¸ºåŒ…ï¼Œæ§åˆ¶å¯¼å…¥è¡Œä¸º              __all__      å…¬å¼€æ¥å£åˆ—è¡¨      __all__ = ['func1', 'func2']              __version__      åŒ…ç‰ˆæœ¬ä¿¡æ¯      __version__ = '1.0.0'              ç›¸å¯¹å¯¼å…¥      åŒ…å†…æ¨¡å—å¯¼å…¥      from .module import function              ç»å¯¹å¯¼å…¥      å®Œæ•´è·¯å¾„å¯¼å…¥      from package.module import function      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€åŒ…ç»“æ„# åˆ›å»ºä¸€ä¸ªç®€å•çš„å·¥å…·åŒ…# utils/__init__.pyfrom .string_utils import clean_text, format_namefrom .file_utils import read_file, write_filefrom .date_utils import format_date, parse_date__version__ = '1.0.0'__author__ = 'Pythonå¼€å‘å›¢é˜Ÿ'# åŒ…çº§åˆ«çš„é…ç½®DEFAULT_ENCODING = 'utf-8'DEFAULT_DATE_FORMAT = '%Y-%m-%d'é«˜çº§åŒ…ç®¡ç†# web_framework/__init__.pyfrom .core import Application, Request, Responsefrom .routing import Router, routefrom .middleware import Middlewarefrom .exceptions import FrameworkError# ç‰ˆæœ¬ç®¡ç†__version_info__ = (1, 2, 3)__version__ = '.'.join(map(str, __version_info__))# å¿«é€Ÿåˆ›å»ºåº”ç”¨çš„ä¾¿æ·å‡½æ•°def create_app(config=None):    \"\"\"åˆ›å»ºWebåº”ç”¨å®ä¾‹\"\"\"    app = Application()    if config:        app.config.update(config)    return app# åŒ…çº§åˆ«çš„è£…é¥°å™¨def quick_route(path, methods=['GET']):    \"\"\"å¿«é€Ÿè·¯ç”±è£…é¥°å™¨\"\"\"    def decorator(func):        # æ³¨å†Œè·¯ç”±é€»è¾‘        return func    return decoratorå®é™…æ¡ˆä¾‹ï¼šæ•°æ®å¤„ç†åŒ…# data_processor/__init__.pyimport loggingfrom typing import Dict, Any# é…ç½®æ—¥å¿—logging.basicConfig(level=logging.INFO)logger = logging.getLogger(__name__)# å¯¼å…¥æ ¸å¿ƒæ¨¡å—from .readers import CSVReader, JSONReader, XMLReaderfrom .processors import DataCleaner, DataTransformerfrom .writers import CSVWriter, JSONWriter# åŒ…é…ç½®CONFIG = {    'max_memory_usage': '1GB',    'chunk_size': 10000,    'parallel_processing': True}class DataPipeline:    \"\"\"æ•°æ®å¤„ç†ç®¡é“\"\"\"        def __init__(self, config: Dict[str, Any] = None):        self.config = {**CONFIG, **(config or {})}        self.steps = []        logger.info(f\"æ•°æ®ç®¡é“å·²åˆå§‹åŒ–ï¼Œé…ç½®: {self.config}\")        def add_step(self, step):        \"\"\"æ·»åŠ å¤„ç†æ­¥éª¤\"\"\"        self.steps.append(step)        return self        def process(self, data):        \"\"\"æ‰§è¡Œæ•°æ®å¤„ç†\"\"\"        for step in self.steps:            data = step.process(data)        return data# ä¾¿æ·å‡½æ•°def quick_csv_process(input_file: str, output_file: str, transformations: list):    \"\"\"å¿«é€ŸCSVå¤„ç†\"\"\"    pipeline = DataPipeline()        # æ·»åŠ è¯»å–æ­¥éª¤    reader = CSVReader(input_file)    pipeline.add_step(reader)        # æ·»åŠ è½¬æ¢æ­¥éª¤    for transform in transformations:        pipeline.add_step(transform)        # æ·»åŠ å†™å…¥æ­¥éª¤    writer = CSVWriter(output_file)    pipeline.add_step(writer)        return pipeline# åŒ…åˆå§‹åŒ–æ—¶çš„æ£€æŸ¥try:    import pandas as pd    HAS_PANDAS = True    logger.info(\"æ£€æµ‹åˆ°pandasï¼Œå¯ç”¨é«˜çº§åŠŸèƒ½\")except ImportError:    HAS_PANDAS = False    logger.warning(\"æœªå®‰è£…pandasï¼Œéƒ¨åˆ†åŠŸèƒ½ä¸å¯ç”¨\")__all__ = [    'DataPipeline', 'quick_csv_process',    'CSVReader', 'JSONReader', 'XMLReader',    'DataCleaner', 'DataTransformer',    'CSVWriter', 'JSONWriter']âš ï¸ æ³¨æ„äº‹é¡¹  __init__.pyæ–‡ä»¶åœ¨åŒ…è¢«é¦–æ¬¡å¯¼å…¥æ—¶æ‰§è¡Œï¼Œé¿å…åœ¨å…¶ä¸­æ”¾ç½®è€—æ—¶æ“ä½œ  ä½¿ç”¨ç›¸å¯¹å¯¼å…¥æ—¶æ³¨æ„å¾ªç¯å¯¼å…¥é—®é¢˜  __all__åˆ—è¡¨åº”è¯¥åªåŒ…å«å…¬å¼€çš„API  åŒ…çš„ç‰ˆæœ¬ä¿¡æ¯åº”è¯¥éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ  é¿å…åœ¨__init__.pyä¸­å¯¼å…¥è¿‡å¤šæ¨¡å—ï¼Œå¯èƒ½å½±å“å¯åŠ¨æ€§èƒ½ğŸ”— ç›¸å…³å†…å®¹  æ¨¡å—å¯¼å…¥æœºåˆ¶  å‘½åç©ºé—´å’Œä½œç”¨åŸŸ  é¢å‘å¯¹è±¡ç¼–ç¨‹ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - æ¨¡å—  Pythonå®˜æ–¹æ–‡æ¡£ - åŒ…  PEP 420 - éšå¼å‘½åç©ºé—´åŒ…ğŸ·ï¸ æ ‡ç­¾åŒ… æ¨¡å— __init__.py å¯¼å…¥ å‘½åç©ºé—´ é¡¹ç›®ç»„ç»‡æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ•™ç¨‹ç‰ˆæœ¬: 1.0",
        "url": "/docs/basics/packages/",
        "category": "basics",
        "tags": ["åŒ…","æ¨¡å—","__init__.py","å¯¼å…¥","å‘½åç©ºé—´"]
      }
      
    
  
    
      ,
      {
        "title": "Pendulumåº“",
        "content": "Pendulumåº“ğŸ“ æ¦‚è¿°Pendulumæ˜¯ä¸€ä¸ªPythonç¬¬ä¸‰æ–¹åº“ï¼Œæ—¨åœ¨æˆä¸ºæ ‡å‡†datetimeåº“çš„æ›¿ä»£å“ã€‚å®ƒæä¾›äº†æ›´ç›´è§‚çš„APIã€æ›´å¥½çš„æ—¶åŒºæ”¯æŒã€æ›´å¼ºå¤§çš„è§£æåŠŸèƒ½å’Œæœ¬åœ°åŒ–æ”¯æŒã€‚Pendulumå®Œå…¨å…¼å®¹datetimeï¼Œä½†æä¾›äº†æ›´å¤šä¾¿åˆ©çš„åŠŸèƒ½å’Œæ›´å¥½çš„æ€§èƒ½ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡Pendulumåº“çš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨  å­¦ä¼šä½¿ç”¨Pendulumè¿›è¡Œæ—¥æœŸæ—¶é—´åˆ›å»ºå’Œæ“ä½œ  äº†è§£Pendulumçš„æ—¶åŒºå¤„ç†å’Œè½¬æ¢  æŒæ¡æ—¥æœŸæ—¶é—´çš„è§£æå’Œæ ¼å¼åŒ–  å­¦ä¼šä½¿ç”¨Pendulumè¿›è¡Œæ—¥æœŸæ—¶é—´è®¡ç®—  äº†è§£æœ¬åœ°åŒ–å’Œäººæ€§åŒ–æ˜¾ç¤ºåŠŸèƒ½ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  äº†è§£datetimeæ¨¡å—çš„åŸºæœ¬æ¦‚å¿µ  åŒ…ç®¡ç†å·¥å…·pipçš„ä½¿ç”¨  æ—¶åŒºå’ŒUTCæ¦‚å¿µğŸ”§ å®‰è£…# ä½¿ç”¨pipå®‰è£…pip install pendulum# æˆ–ä½¿ç”¨condaå®‰è£…conda install -c conda-forge pendulumğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬å¯¼å…¥å’Œåˆ›å»ºimport pendulum# è·å–å½“å‰æ—¶é—´now = pendulum.now()print(f\"å½“å‰æ—¶é—´: {now}\")# è·å–UTCæ—¶é—´utc_now = pendulum.now('UTC')print(f\"UTCæ—¶é—´: {utc_now}\")# è·å–ç‰¹å®šæ—¶åŒºçš„æ—¶é—´beijing_now = pendulum.now('Asia/Shanghai')tokyo_now = pendulum.now('Asia/Tokyo')newyork_now = pendulum.now('America/New_York')print(f\"åŒ—äº¬æ—¶é—´: {beijing_now}\")print(f\"ä¸œäº¬æ—¶é—´: {tokyo_now}\")print(f\"çº½çº¦æ—¶é—´: {newyork_now}\")# è·å–ä»Šå¤©çš„æ—¥æœŸtoday = pendulum.today()print(f\"ä»Šå¤©: {today}\")# è·å–æ˜å¤©å’Œæ˜¨å¤©tomorrow = pendulum.tomorrow()yesterday = pendulum.yesterday()print(f\"æ˜å¤©: {tomorrow}\")print(f\"æ˜¨å¤©: {yesterday}\")åˆ›å»ºç‰¹å®šæ—¥æœŸæ—¶é—´# åˆ›å»ºç‰¹å®šæ—¥æœŸæ—¶é—´dt = pendulum.datetime(2024, 1, 1, 12, 30, 45)print(f\"æŒ‡å®šæ—¥æœŸæ—¶é—´: {dt}\")# åˆ›å»ºå¸¦æ—¶åŒºçš„æ—¥æœŸæ—¶é—´dt_with_tz = pendulum.datetime(2024, 1, 1, 12, 30, 45, tz='Asia/Shanghai')print(f\"å¸¦æ—¶åŒºçš„æ—¥æœŸæ—¶é—´: {dt_with_tz}\")# åˆ›å»ºæ—¥æœŸdate_only = pendulum.date(2024, 1, 1)print(f\"ä»…æ—¥æœŸ: {date_only}\")# åˆ›å»ºæ—¶é—´time_only = pendulum.time(12, 30, 45)print(f\"ä»…æ—¶é—´: {time_only}\")# ä»æ—¶é—´æˆ³åˆ›å»ºtimestamp = 1704110445dt_from_timestamp = pendulum.from_timestamp(timestamp)print(f\"ä»æ—¶é—´æˆ³åˆ›å»º: {dt_from_timestamp}\")# ä»æ—¶é—´æˆ³åˆ›å»ºï¼ˆæŒ‡å®šæ—¶åŒºï¼‰dt_from_timestamp_tz = pendulum.from_timestamp(timestamp, tz='Asia/Shanghai')print(f\"ä»æ—¶é—´æˆ³åˆ›å»º(å¸¦æ—¶åŒº): {dt_from_timestamp_tz}\")å­—ç¬¦ä¸²è§£æ# è§£æISOæ ¼å¼å­—ç¬¦ä¸²iso_dt = pendulum.parse('2024-01-01T12:30:45')print(f\"è§£æISOæ ¼å¼: {iso_dt}\")# è§£æå¸¦æ—¶åŒºçš„å­—ç¬¦ä¸²iso_with_tz = pendulum.parse('2024-01-01T12:30:45+08:00')print(f\"è§£æå¸¦æ—¶åŒº: {iso_with_tz}\")# è§£æå„ç§æ ¼å¼çš„å­—ç¬¦ä¸²formats = [    '2024-01-01',    '2024/01/01',    '01/01/2024',    '2024-01-01 12:30:45',    '2024å¹´1æœˆ1æ—¥',    'January 1, 2024',    '1st January 2024']print(\"\\nè§£æä¸åŒæ ¼å¼çš„å­—ç¬¦ä¸²:\")for fmt in formats:    try:        parsed = pendulum.parse(fmt)        print(f\"{fmt:20} -&gt; {parsed}\")    except Exception as e:        print(f\"{fmt:20} -&gt; è§£æå¤±è´¥: {e}\")# ä¸¥æ ¼æ¨¡å¼è§£ætry:    strict_parse = pendulum.parse('2024-13-01', strict=True)  # æ— æ•ˆæœˆä»½except Exception as e:    print(f\"ä¸¥æ ¼æ¨¡å¼è§£æå¤±è´¥: {e}\")# æŒ‡å®šé»˜è®¤æ—¶åŒºdefault_tz_parse = pendulum.parse('2024-01-01 12:30:45', tz='Asia/Shanghai')print(f\"æŒ‡å®šé»˜è®¤æ—¶åŒº: {default_tz_parse}\")æ ¼å¼åŒ–è¾“å‡ºdt = pendulum.now('Asia/Shanghai')# åŸºæœ¬æ ¼å¼åŒ–print(f\"ISOæ ¼å¼: {dt.to_iso8601_string()}\")print(f\"æ—¥æœŸå­—ç¬¦ä¸²: {dt.to_date_string()}\")print(f\"æ—¶é—´å­—ç¬¦ä¸²: {dt.to_time_string()}\")print(f\"æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²: {dt.to_datetime_string()}\")# è‡ªå®šä¹‰æ ¼å¼åŒ–formats = {    'æ ‡å‡†æ ¼å¼': 'YYYY-MM-DD HH:mm:ss',    'ä¸­æ–‡æ ¼å¼': 'YYYYå¹´MMæœˆDDæ—¥ HHæ—¶mmåˆ†ssç§’',    'ç¾å¼æ ¼å¼': 'MM/DD/YYYY hh:mm:ss A',    'æ¬§å¼æ ¼å¼': 'DD/MM/YYYY HH:mm:ss',    'ç®€çŸ­æ ¼å¼': 'YYMMDD_HHmmss',    'æ–‡ä»¶åæ ¼å¼': 'YYYY-MM-DD_HH-mm-ss',    'æ˜ŸæœŸæ ¼å¼': 'dddd, MMMM Do YYYY',    'ç›¸å¯¹æ ¼å¼': 'YYYY-MM-DD (dddd)'}print(\"\\nè‡ªå®šä¹‰æ ¼å¼åŒ–:\")for name, fmt in formats.items():    formatted = dt.format(fmt)    print(f\"{name}: {formatted}\")# æœ¬åœ°åŒ–æ ¼å¼åŒ–dt_cn = dt.in_timezone('Asia/Shanghai')print(f\"\\næœ¬åœ°åŒ–æ ¼å¼åŒ–:\")print(f\"ä¸­æ–‡: {dt_cn.format('YYYYå¹´MMæœˆDDæ—¥ dddd', locale='zh')}\")print(f\"è‹±æ–‡: {dt_cn.format('MMMM Do, YYYY (dddd)', locale='en')}\")print(f\"æ—¥æ–‡: {dt_cn.format('YYYYå¹´MMæœˆDDæ—¥ (dddd)', locale='ja')}\")æ—¶åŒºæ“ä½œ# åˆ›å»ºä¸åŒæ—¶åŒºçš„æ—¶é—´utc_time = pendulum.now('UTC')beijing_time = pendulum.now('Asia/Shanghai')tokyo_time = pendulum.now('Asia/Tokyo')london_time = pendulum.now('Europe/London')newyork_time = pendulum.now('America/New_York')print(\"ä¸–ç•Œæ—¶é—´:\")print(f\"UTC:    {utc_time.format('YYYY-MM-DD HH:mm:ss')}\")print(f\"åŒ—äº¬:   {beijing_time.format('YYYY-MM-DD HH:mm:ss')}\")print(f\"ä¸œäº¬:   {tokyo_time.format('YYYY-MM-DD HH:mm:ss')}\")print(f\"ä¼¦æ•¦:   {london_time.format('YYYY-MM-DD HH:mm:ss')}\")print(f\"çº½çº¦:   {newyork_time.format('YYYY-MM-DD HH:mm:ss')}\")# æ—¶åŒºè½¬æ¢base_time = pendulum.now('UTC')print(f\"\\næ—¶åŒºè½¬æ¢ (åŸºå‡†UTCæ—¶é—´: {base_time.format('HH:mm:ss')}):\")timezones = [    'Asia/Shanghai',    'Asia/Tokyo',     'Europe/London',    'America/New_York',    'America/Los_Angeles',    'Australia/Sydney']for tz in timezones:    converted = base_time.in_timezone(tz)    print(f\"{tz:20} {converted.format('HH:mm:ss (Z)')}\")# è·å–æ—¶åŒºä¿¡æ¯dt_with_tz = pendulum.now('Asia/Shanghai')print(f\"\\næ—¶åŒºä¿¡æ¯:\")print(f\"æ—¶åŒºåç§°: {dt_with_tz.timezone_name}\")print(f\"æ—¶åŒºç¼©å†™: {dt_with_tz.timezone.name}\")print(f\"UTCåç§»: {dt_with_tz.offset_hours}å°æ—¶\")print(f\"æ˜¯å¦å¤ä»¤æ—¶: {dt_with_tz.is_dst()}\")æ—¥æœŸæ—¶é—´è®¡ç®—# åŸºæœ¬åŠ å‡è¿ç®—base_dt = pendulum.now()print(f\"åŸºå‡†æ—¶é—´: {base_dt}\")# åŠ å‡æ—¶é—´print(f\"\\næ—¶é—´åŠ å‡:\")print(f\"1å°æ—¶å: {base_dt.add(hours=1)}\")print(f\"30åˆ†é’Ÿå: {base_dt.add(minutes=30)}\")print(f\"1å¤©å: {base_dt.add(days=1)}\")print(f\"1å‘¨å: {base_dt.add(weeks=1)}\")print(f\"1ä¸ªæœˆå: {base_dt.add(months=1)}\")print(f\"1å¹´å: {base_dt.add(years=1)}\")print(f\"\\næ—¶é—´å‡æ³•:\")print(f\"1å°æ—¶å‰: {base_dt.subtract(hours=1)}\")print(f\"1å¤©å‰: {base_dt.subtract(days=1)}\")print(f\"1ä¸ªæœˆå‰: {base_dt.subtract(months=1)}\")# å¤åˆè¿ç®—complex_add = base_dt.add(years=1, months=2, days=3, hours=4, minutes=5, seconds=6)print(f\"\\nå¤åˆåŠ æ³•: {complex_add}\")# æ—¶é—´å·®è®¡ç®—start_time = pendulum.datetime(2024, 1, 1, 9, 0, 0)end_time = pendulum.datetime(2024, 1, 1, 17, 30, 0)diff = end_time - start_timeprint(f\"\\næ—¶é—´å·®è®¡ç®—:\")print(f\"å¼€å§‹æ—¶é—´: {start_time}\")print(f\"ç»“æŸæ—¶é—´: {end_time}\")print(f\"æ—¶é—´å·®: {diff}\")print(f\"æ€»ç§’æ•°: {diff.total_seconds()}\")print(f\"æ€»å°æ—¶æ•°: {diff.total_seconds() / 3600}\")# ä½¿ç”¨diffæ–¹æ³•diff_obj = start_time.diff(end_time)print(f\"\\ndiffå¯¹è±¡:\")print(f\"å°æ—¶å·®: {diff_obj.in_hours()}\")print(f\"åˆ†é’Ÿå·®: {diff_obj.in_minutes()}\")print(f\"ç§’å·®: {diff_obj.in_seconds()}\")print(f\"å¤©å·®: {diff_obj.in_days()}\")äººæ€§åŒ–æ˜¾ç¤º# ç›¸å¯¹æ—¶é—´æ˜¾ç¤ºbase_time = pendulum.now()times = [    base_time.subtract(years=2),    base_time.subtract(months=3),    base_time.subtract(weeks=2),    base_time.subtract(days=5),    base_time.subtract(hours=3),    base_time.subtract(minutes=30),    base_time.subtract(seconds=45),    base_time.add(seconds=30),    base_time.add(minutes=15),    base_time.add(hours=2),    base_time.add(days=3),    base_time.add(weeks=1),    base_time.add(months=2),    base_time.add(years=1)]print(\"äººæ€§åŒ–æ—¶é—´æ˜¾ç¤º:\")for time_obj in times:    print(f\"{time_obj.format('YYYY-MM-DD HH:mm:ss'):20} -&gt; {time_obj.diff_for_humans()}\")# æœ¬åœ°åŒ–çš„äººæ€§åŒ–æ˜¾ç¤ºprint(f\"\\næœ¬åœ°åŒ–äººæ€§åŒ–æ˜¾ç¤º:\")for time_obj in times[:5]:    print(f\"è‹±æ–‡: {time_obj.diff_for_humans(locale='en')}\")    print(f\"ä¸­æ–‡: {time_obj.diff_for_humans(locale='zh')}\")    print(f\"æ—¥æ–‡: {time_obj.diff_for_humans(locale='ja')}\")    print(\"---\")æ—¥æœŸæ—¶é—´å±æ€§å’Œæ–¹æ³•dt = pendulum.now('Asia/Shanghai')print(\"æ—¥æœŸæ—¶é—´å±æ€§:\")print(f\"å¹´ä»½: {dt.year}\")print(f\"æœˆä»½: {dt.month}\")print(f\"æ—¥æœŸ: {dt.day}\")print(f\"å°æ—¶: {dt.hour}\")print(f\"åˆ†é’Ÿ: {dt.minute}\")print(f\"ç§’: {dt.second}\")print(f\"å¾®ç§’: {dt.microsecond}\")print(f\"æ˜ŸæœŸå‡ : {dt.day_of_week}\")print(f\"ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©: {dt.day_of_year}\")print(f\"ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨: {dt.week_of_year}\")print(f\"ä¸€æœˆä¸­çš„ç¬¬å‡ å‘¨: {dt.week_of_month}\")print(f\"å­£åº¦: {dt.quarter}\")print(f\"\\næ˜ŸæœŸå’Œæœˆä»½åç§°:\")print(f\"æ˜ŸæœŸåç§°: {dt.format('dddd')}\")print(f\"æœˆä»½åç§°: {dt.format('MMMM')}\")print(f\"æ˜ŸæœŸç¼©å†™: {dt.format('ddd')}\")print(f\"æœˆä»½ç¼©å†™: {dt.format('MMM')}\")print(f\"\\nå¸ƒå°”å±æ€§:\")print(f\"æ˜¯å¦é—°å¹´: {dt.is_leap_year()}\")print(f\"æ˜¯å¦å¤ä»¤æ—¶: {dt.is_dst()}\")print(f\"æ˜¯å¦è¿‡å»: {dt.is_past()}\")print(f\"æ˜¯å¦æœªæ¥: {dt.is_future()}\")print(f\"æ˜¯å¦ä»Šå¤©: {dt.is_today()}\")print(f\"æ˜¯å¦æ˜¨å¤©: {dt.is_yesterday()}\")print(f\"æ˜¯å¦æ˜å¤©: {dt.is_tomorrow()}\")print(f\"æ˜¯å¦å‘¨æœ«: {dt.is_weekend()}\")print(f\"æ˜¯å¦å·¥ä½œæ—¥: {dt.is_weekday()}\")# æœˆä»½å’Œå¹´ä»½çš„å¼€å§‹/ç»“æŸprint(f\"\\næ—¶é—´è¾¹ç•Œ:\")print(f\"æœˆåˆ: {dt.start_of('month')}\")print(f\"æœˆæœ«: {dt.end_of('month')}\")print(f\"å¹´åˆ: {dt.start_of('year')}\")print(f\"å¹´æœ«: {dt.end_of('year')}\")print(f\"å‘¨åˆ: {dt.start_of('week')}\")print(f\"å‘¨æœ«: {dt.end_of('week')}\")print(f\"æ—¥åˆ: {dt.start_of('day')}\")print(f\"æ—¥æœ«: {dt.end_of('day')}\")ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•def datetime_formatter():    \"\"\"æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–å·¥å…·\"\"\"    now = pendulum.now('Asia/Shanghai')        formats = {        'ISO': now.to_iso8601_string(),        'RFC': now.to_rfc3339_string(),        'æ—¶é—´æˆ³': str(now.timestamp()),        'æ—¥æœŸ': now.to_date_string(),        'æ—¶é—´': now.to_time_string(),        'ä¸­æ–‡': now.format('YYYYå¹´MMæœˆDDæ—¥ HHæ—¶mmåˆ†ssç§’'),        'æ–‡ä»¶å': now.format('YYYY-MM-DD_HH-mm-ss'),        'æ—¥å¿—': now.format('[YYYY-MM-DD HH:mm:ss]'),        'ç›¸å¯¹æ—¶é—´': now.diff_for_humans()    }        print(\"æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–:\")    for name, value in formats.items():        print(f\"{name:8}: {value}\")        return formats# ä½¿ç”¨ç¤ºä¾‹datetime_formatter()é«˜çº§ç”¨æ³•class TimeZoneConverter:    \"\"\"æ—¶åŒºè½¬æ¢å™¨\"\"\"        def __init__(self):        self.common_timezones = {            'UTC': 'UTC',            'åŒ—äº¬': 'Asia/Shanghai',            'ä¸œäº¬': 'Asia/Tokyo',            'é¦–å°”': 'Asia/Seoul',            'æ–°åŠ å¡': 'Asia/Singapore',            'æ‚‰å°¼': 'Australia/Sydney',            'ä¼¦æ•¦': 'Europe/London',            'å·´é»': 'Europe/Paris',            'çº½çº¦': 'America/New_York',            'æ´›æ‰çŸ¶': 'America/Los_Angeles',            'èŠåŠ å“¥': 'America/Chicago',            'å¤šä¼¦å¤š': 'America/Toronto'        }        def convert_time(self, time_str, from_tz, to_tz):        \"\"\"è½¬æ¢æ—¶é—´åˆ°ä¸åŒæ—¶åŒº\"\"\"        # è§£ææ—¶é—´å­—ç¬¦ä¸²        dt = pendulum.parse(time_str, tz=from_tz)                # è½¬æ¢åˆ°ç›®æ ‡æ—¶åŒº        converted = dt.in_timezone(to_tz)                return {            'original': dt,            'converted': converted,            'from_tz': from_tz,            'to_tz': to_tz        }        def world_clock(self, base_time=None):        \"\"\"ä¸–ç•Œæ—¶é’Ÿ\"\"\"        if base_time is None:            base_time = pendulum.now('UTC')        elif isinstance(base_time, str):            base_time = pendulum.parse(base_time, tz='UTC')                world_times = {}        for city, tz in self.common_timezones.items():            local_time = base_time.in_timezone(tz)            world_times[city] = {                'time': local_time,                'formatted': local_time.format('YYYY-MM-DD HH:mm:ss'),                'timezone': tz,                'offset': local_time.format('Z')            }                return world_times        def meeting_time_finder(self, participants_tz, duration_hours=1):        \"\"\"å¯»æ‰¾é€‚åˆå¤šæ—¶åŒºå‚ä¸è€…çš„ä¼šè®®æ—¶é—´\"\"\"        # å·¥ä½œæ—¶é—´èŒƒå›´ï¼ˆ9:00-18:00ï¼‰        work_start = 9        work_end = 18                base_date = pendulum.tomorrow('UTC').start_of('day')        suitable_times = []                # æ£€æŸ¥24å°æ—¶å†…çš„æ¯ä¸ªå°æ—¶        for hour in range(24):            meeting_time = base_date.add(hours=hour)            is_suitable = True                        participant_times = {}            for participant, tz in participants_tz.items():                local_time = meeting_time.in_timezone(tz)                participant_times[participant] = local_time                                # æ£€æŸ¥æ˜¯å¦åœ¨å·¥ä½œæ—¶é—´å†…                if not (work_start &lt;= local_time.hour &lt; work_end - duration_hours):                    is_suitable = False                    break                                # æ£€æŸ¥æ˜¯å¦ä¸ºå·¥ä½œæ—¥                if local_time.is_weekend():                    is_suitable = False                    break                        if is_suitable:                suitable_times.append({                    'utc_time': meeting_time,                    'participant_times': participant_times                })                return suitable_times        def display_world_clock(self):        \"\"\"æ˜¾ç¤ºä¸–ç•Œæ—¶é’Ÿ\"\"\"        world_times = self.world_clock()                print(\"ğŸŒ ä¸–ç•Œæ—¶é’Ÿ\")        print(\"=\" * 50)                for city, info in world_times.items():            time_str = info['formatted']            offset = info['offset']            print(f\"{city:8} {time_str} ({offset})\")                return world_times# ä½¿ç”¨ç¤ºä¾‹converter = TimeZoneConverter()# æ˜¾ç¤ºä¸–ç•Œæ—¶é’Ÿconverter.display_world_clock()# æ—¶åŒºè½¬æ¢result = converter.convert_time('2024-01-15 14:30:00', 'Asia/Shanghai', 'America/New_York')print(f\"\\næ—¶åŒºè½¬æ¢:\")print(f\"åŸæ—¶é—´: {result['original']} ({result['from_tz']})\")print(f\"è½¬æ¢å: {result['converted']} ({result['to_tz']})\")# å¯»æ‰¾ä¼šè®®æ—¶é—´participants = {    'å¼ ä¸‰': 'Asia/Shanghai',    'John': 'America/New_York',    'Tanaka': 'Asia/Tokyo',    'Smith': 'Europe/London'}suitable_times = converter.meeting_time_finder(participants)print(f\"\\né€‚åˆçš„ä¼šè®®æ—¶é—´:\")for i, time_slot in enumerate(suitable_times[:3], 1):    print(f\"\\né€‰é¡¹ {i}: {time_slot['utc_time'].format('YYYY-MM-DD HH:mm')} UTC\")    for participant, local_time in time_slot['participant_times'].items():        print(f\"  {participant:8}: {local_time.format('YYYY-MM-DD HH:mm')} ({local_time.timezone_name})\")å®é™…æ¡ˆä¾‹class EventManager:    \"\"\"äº‹ä»¶ç®¡ç†å™¨\"\"\"        def __init__(self, default_timezone='Asia/Shanghai'):        self.events = []        self.default_timezone = default_timezone        def add_event(self, title, start_time, duration=None, end_time=None,                   timezone=None, description=\"\", location=\"\"):        \"\"\"æ·»åŠ äº‹ä»¶\"\"\"        if timezone is None:            timezone = self.default_timezone                # è§£æå¼€å§‹æ—¶é—´        if isinstance(start_time, str):            start_dt = pendulum.parse(start_time, tz=timezone)        else:            start_dt = start_time                # è®¡ç®—ç»“æŸæ—¶é—´        if end_time:            if isinstance(end_time, str):                end_dt = pendulum.parse(end_time, tz=timezone)            else:                end_dt = end_time        elif duration:            if isinstance(duration, dict):                end_dt = start_dt.add(**duration)            else:                # å‡è®¾durationæ˜¯å°æ—¶æ•°                end_dt = start_dt.add(hours=duration)        else:            # é»˜è®¤1å°æ—¶            end_dt = start_dt.add(hours=1)                event = {            'id': len(self.events) + 1,            'title': title,            'start_time': start_dt,            'end_time': end_dt,            'duration': end_dt - start_dt,            'timezone': timezone,            'description': description,            'location': location,            'created_at': pendulum.now(timezone)        }                self.events.append(event)        return event['id']        def get_events_by_date_range(self, start_date, end_date, timezone=None):        \"\"\"è·å–æ—¥æœŸèŒƒå›´å†…çš„äº‹ä»¶\"\"\"        if timezone is None:            timezone = self.default_timezone                # è§£ææ—¥æœŸ        if isinstance(start_date, str):            start_dt = pendulum.parse(start_date, tz=timezone).start_of('day')        else:            start_dt = start_date.start_of('day')                if isinstance(end_date, str):            end_dt = pendulum.parse(end_date, tz=timezone).end_of('day')        else:            end_dt = end_date.end_of('day')                filtered_events = []        for event in self.events:            event_start = event['start_time'].in_timezone(timezone)            if start_dt &lt;= event_start &lt;= end_dt:                filtered_events.append(event)                # æŒ‰å¼€å§‹æ—¶é—´æ’åº        filtered_events.sort(key=lambda x: x['start_time'])        return filtered_events        def get_upcoming_events(self, days=7, timezone=None):        \"\"\"è·å–å³å°†åˆ°æ¥çš„äº‹ä»¶\"\"\"        if timezone is None:            timezone = self.default_timezone                now = pendulum.now(timezone)        future_date = now.add(days=days)                upcoming = []        for event in self.events:            event_start = event['start_time'].in_timezone(timezone)            if now &lt;= event_start &lt;= future_date:                upcoming.append(event)                upcoming.sort(key=lambda x: x['start_time'])        return upcoming        def generate_calendar_view(self, year, month, timezone=None):        \"\"\"ç”Ÿæˆæ—¥å†è§†å›¾\"\"\"        if timezone is None:            timezone = self.default_timezone                # è·å–æœˆä»½çš„ç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©        first_day = pendulum.datetime(year, month, 1, tz=timezone)        last_day = first_day.end_of('month')                # è·å–è¯¥æœˆçš„æ‰€æœ‰äº‹ä»¶        month_events = self.get_events_by_date_range(first_day, last_day, timezone)                # æŒ‰æ—¥æœŸåˆ†ç»„äº‹ä»¶        events_by_date = {}        for event in month_events:            event_date = event['start_time'].in_timezone(timezone).date()            if event_date not in events_by_date:                events_by_date[event_date] = []            events_by_date[event_date].append(event)                # ç”Ÿæˆæ—¥å†        calendar_str = f\"\\n{year}å¹´{month}æœˆ æ—¥å†\\n\"        calendar_str += \"=\" * 40 + \"\\n\"        calendar_str += \"æ—¥  ä¸€  äºŒ  ä¸‰  å››  äº”  å…­\\n\"        calendar_str += \"-\" * 40 + \"\\n\"                # è·å–æœˆä»½ç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡         first_weekday = first_day.day_of_week % 7  # è½¬æ¢ä¸º0=å‘¨æ—¥çš„æ ¼å¼                # å¡«å……ç¬¬ä¸€å‘¨çš„ç©ºç™½        calendar_str += \"   \" * first_weekday                # å¡«å……æ—¥æœŸ        current_date = first_day        while current_date.month == month:            day_str = f\"{current_date.day:2d}\"                        # æ£€æŸ¥æ˜¯å¦æœ‰äº‹ä»¶            if current_date.date() in events_by_date:                day_str += \"*\"  # æ ‡è®°æœ‰äº‹ä»¶çš„æ—¥æœŸ            else:                day_str += \" \"                        calendar_str += day_str                        # æ¢è¡Œå¤„ç†            if current_date.day_of_week % 7 == 6:  # å‘¨å…­                calendar_str += \"\\n\"                        current_date = current_date.add(days=1)                # æ·»åŠ äº‹ä»¶è¯¦æƒ…        if events_by_date:            calendar_str += \"\\n\\näº‹ä»¶è¯¦æƒ…:\\n\"            calendar_str += \"-\" * 40 + \"\\n\"                        for date, events in sorted(events_by_date.items()):                calendar_str += f\"\\n{date.format('MMæœˆDDæ—¥')} ({pendulum.instance(date).format('dddd')}):\")                for event in events:                    start_time = event['start_time'].in_timezone(timezone)                    end_time = event['end_time'].in_timezone(timezone)                    calendar_str += f\"\\n  {start_time.format('HH:mm')}-{end_time.format('HH:mm')} {event['title']}\"                    if event['location']:                        calendar_str += f\" @ {event['location']}\"                return calendar_str        def export_to_ical(self, filename):        \"\"\"å¯¼å‡ºä¸ºiCalæ ¼å¼\"\"\"        ical_content = \"BEGIN:VCALENDAR\\n\"        ical_content += \"VERSION:2.0\\n\"        ical_content += \"PRODID:-//Event Manager//Event Manager 1.0//EN\\n\"                for event in self.events:            ical_content += \"BEGIN:VEVENT\\n\"            ical_content += f\"UID:{event['id']}@eventmanager\\n\"            ical_content += f\"DTSTART:{event['start_time'].format('YYYYMMDDTHHmmss')}Z\\n\"            ical_content += f\"DTEND:{event['end_time'].format('YYYYMMDDTHHmmss')}Z\\n\"            ical_content += f\"SUMMARY:{event['title']}\\n\"            if event['description']:                ical_content += f\"DESCRIPTION:{event['description']}\\n\"            if event['location']:                ical_content += f\"LOCATION:{event['location']}\\n\"            ical_content += f\"CREATED:{event['created_at'].format('YYYYMMDDTHHmmss')}Z\\n\"            ical_content += \"END:VEVENT\\n\"                ical_content += \"END:VCALENDAR\\n\"                with open(filename, 'w', encoding='utf-8') as f:            f.write(ical_content)                print(f\"æ—¥å†å·²å¯¼å‡ºåˆ° {filename}\")# ä½¿ç”¨ç¤ºä¾‹manager = EventManager()# æ·»åŠ ä¸€äº›äº‹ä»¶manager.add_event(    \"é¡¹ç›®å¯åŠ¨ä¼šè®®\",    \"2024-01-15 09:00:00\",    duration={'hours': 2},    description=\"æ–°é¡¹ç›®å¯åŠ¨ä¼šè®®ï¼Œè®¨è®ºé¡¹ç›®è®¡åˆ’å’Œåˆ†å·¥\",    location=\"ä¼šè®®å®¤A\")manager.add_event(    \"å®¢æˆ·æ¼”ç¤º\",    \"2024-01-15 14:00:00\",    end_time=\"2024-01-15 16:00:00\",    description=\"å‘å®¢æˆ·æ¼”ç¤ºäº§å“åŠŸèƒ½\",    location=\"å®¢æˆ·åŠå…¬å®¤\")manager.add_event(    \"å›¢é˜Ÿå»ºè®¾æ´»åŠ¨\",    \"2024-01-20 10:00:00\",    duration={'hours': 4},    description=\"å›¢é˜Ÿæˆ·å¤–æ´»åŠ¨\",    location=\"å…¬å›­\")# è·å–å³å°†åˆ°æ¥çš„äº‹ä»¶upcoming = manager.get_upcoming_events(days=30)print(\"å³å°†åˆ°æ¥çš„äº‹ä»¶:\")for event in upcoming:    start_time = event['start_time']    print(f\"- {event['title']}: {start_time.format('MMæœˆDDæ—¥ HH:mm')} ({start_time.diff_for_humans()})\")# ç”Ÿæˆæ—¥å†è§†å›¾calendar_view = manager.generate_calendar_view(2024, 1)print(calendar_view)# å¯¼å‡ºæ—¥å†manager.export_to_ical('events.ics')âš ï¸ æ³¨æ„äº‹é¡¹  æ€§èƒ½: Pendulumæ¯”æ ‡å‡†datetimeç¨æ…¢ï¼Œä½†æä¾›æ›´å¤šåŠŸèƒ½  ä¾èµ–: Pendulumä¾èµ–äºç³»ç»Ÿçš„æ—¶åŒºæ•°æ®åº“  å…¼å®¹æ€§: è™½ç„¶å…¼å®¹datetimeï¼Œä½†æŸäº›æ“ä½œå¯èƒ½éœ€è¦è½¬æ¢  æœ¬åœ°åŒ–: éœ€è¦å®‰è£…ç›¸åº”çš„è¯­è¨€åŒ…æ‰èƒ½æ”¯æŒæœ¬åœ°åŒ–  æ—¶åŒºæ•°æ®: ç¡®ä¿æ—¶åŒºæ•°æ®åº“æ˜¯æœ€æ–°çš„  å†…å­˜ä½¿ç”¨: å¤§é‡æ—¥æœŸæ—¶é—´å¯¹è±¡å¯èƒ½å ç”¨è¾ƒå¤šå†…å­˜ğŸ”— ç›¸å…³å†…å®¹  datetimeæ¨¡å— - Pythonæ ‡å‡†æ—¥æœŸæ—¶é—´æ¨¡å—  timeæ¨¡å— - åŸºç¡€æ—¶é—´å¤„ç†åŠŸèƒ½  calendaræ¨¡å— - æ—¥å†ç›¸å…³åŠŸèƒ½ğŸ“š æ‰©å±•é˜…è¯»  Pendulumå®˜æ–¹æ–‡æ¡£  æ—¶åŒºæ•°æ®åº“  ISO 8601æ ‡å‡†  RFC 3339æ ‡å‡†  Pythonæ—¶é—´å¤„ç†æœ€ä½³å®è·µğŸ·ï¸ æ ‡ç­¾ç¬¬ä¸‰æ–¹åº“ æ—¥æœŸæ—¶é—´ æ—¶åŒº è§£æ æ ¼å¼åŒ– æœ¬åœ°åŒ– äººæ€§åŒ–æœ€åæ›´æ–°: 2024-01-01ä½œè€…: Pythonæ–‡æ¡£å›¢é˜Ÿç‰ˆæœ¬: 1.0",
        "url": "/docs/thirdparty/pendulum/",
        "category": "thirdparty",
        "tags": ["ç¬¬ä¸‰æ–¹åº“","æ—¥æœŸæ—¶é—´","æ—¶åŒº","è§£æ","æ ¼å¼åŒ–"]
      }
      
    
  
    
      ,
      {
        "title": "å¤šæ€æ€§",
        "content": "å¤šæ€æ€§æ¦‚è¿°å¤šæ€æ€§ï¼ˆPolymorphismï¼‰æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå…è®¸ä¸åŒç±»çš„å¯¹è±¡å¯¹åŒä¸€æ¶ˆæ¯åšå‡ºä¸åŒçš„å“åº”ã€‚åœ¨Pythonä¸­ï¼Œå¤šæ€æ€§ä¸»è¦é€šè¿‡æ–¹æ³•é‡å†™å’Œé¸­å­ç±»å‹æ¥å®ç°ï¼Œä½¿å¾—ä»£ç æ›´åŠ çµæ´»ã€å¯æ‰©å±•å’Œæ˜“äºç»´æŠ¤ã€‚å­¦ä¹ ç›®æ ‡é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†èƒ½å¤Ÿï¼š  ç†è§£å¤šæ€æ€§çš„åŸºæœ¬æ¦‚å¿µå’ŒåŸç†  æŒæ¡é€šè¿‡ç»§æ‰¿å’Œæ–¹æ³•é‡å†™å®ç°å¤šæ€  äº†è§£Pythonçš„é¸­å­ç±»å‹ç‰¹æ€§  å­¦ä¼šä½¿ç”¨isinstance()å’Œhasattr()è¿›è¡Œç±»å‹æ£€æŸ¥  èƒ½å¤Ÿè®¾è®¡æ”¯æŒå¤šæ€çš„ç±»ç»“æ„  ç†è§£å¤šæ€åœ¨å®é™…å¼€å‘ä¸­çš„åº”ç”¨åœºæ™¯å‰ç½®çŸ¥è¯†  Pythonç±»çš„å®šä¹‰å’Œå®ä¾‹åŒ–  ç±»çš„ç»§æ‰¿æœºåˆ¶  æ–¹æ³•çš„å®šä¹‰å’Œé‡å†™  é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€æ¦‚å¿µè¯¦ç»†å†…å®¹å¤šæ€çš„åŸºæœ¬æ¦‚å¿µå¤šæ€æ€§æŒ‡çš„æ˜¯åŒä¸€ä¸ªæ¥å£å¯ä»¥æœ‰å¤šç§ä¸åŒçš„å®ç°æ–¹å¼ã€‚åœ¨è¿è¡Œæ—¶ï¼Œç¨‹åºä¼šæ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹æ¥å†³å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œè€Œä¸æ˜¯æ ¹æ®å˜é‡çš„å£°æ˜ç±»å‹ã€‚åŸºæœ¬ç¤ºä¾‹class Animal:    def speak(self):        pass        def move(self):        print(\"åŠ¨ç‰©åœ¨ç§»åŠ¨\")class Dog(Animal):    def speak(self):        return \"æ±ªæ±ª!\"class Cat(Animal):    def speak(self):        return \"å–µå–µ!\"class Bird(Animal):    def speak(self):        return \"å•¾å•¾!\"        def move(self):        print(\"é¸Ÿå„¿åœ¨é£ç¿”\")# å¤šæ€çš„ä½“ç°def make_animal_speak(animal):    \"\"\"è¿™ä¸ªå‡½æ•°å¯ä»¥æ¥å—ä»»ä½•Animalç±»å‹çš„å¯¹è±¡\"\"\"    print(animal.speak())    animal.move()# ä½¿ç”¨ç¤ºä¾‹animals = [Dog(), Cat(), Bird()]for animal in animals:    make_animal_speak(animal)# è¾“å‡ºï¼š# æ±ªæ±ª!# åŠ¨ç‰©åœ¨ç§»åŠ¨# å–µå–µ!# åŠ¨ç‰©åœ¨ç§»åŠ¨# å•¾å•¾!# é¸Ÿå„¿åœ¨é£ç¿”æ–¹æ³•é‡å†™å®ç°å¤šæ€é€šè¿‡åœ¨å­ç±»ä¸­é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¯ä»¥å®ç°å¤šæ€æ€§ï¼šclass Shape:    \"\"\"å›¾å½¢åŸºç±»\"\"\"    def __init__(self, name):        self.name = name        def area(self):        raise NotImplementedError(\"å­ç±»å¿…é¡»å®ç°areaæ–¹æ³•\")        def perimeter(self):        raise NotImplementedError(\"å­ç±»å¿…é¡»å®ç°perimeteræ–¹æ³•\")        def describe(self):        return f\"è¿™æ˜¯ä¸€ä¸ª{self.name}\"class Rectangle(Shape):    def __init__(self, width, height):        super().__init__(\"çŸ©å½¢\")        self.width = width        self.height = height        def area(self):        return self.width * self.height        def perimeter(self):        return 2 * (self.width + self.height)class Circle(Shape):    def __init__(self, radius):        super().__init__(\"åœ†å½¢\")        self.radius = radius        def area(self):        return 3.14159 * self.radius ** 2        def perimeter(self):        return 2 * 3.14159 * self.radiusclass Triangle(Shape):    def __init__(self, a, b, c):        super().__init__(\"ä¸‰è§’å½¢\")        self.a = a        self.b = b        self.c = c        def area(self):        # ä½¿ç”¨æµ·ä¼¦å…¬å¼è®¡ç®—é¢ç§¯        s = (self.a + self.b + self.c) / 2        return (s * (s - self.a) * (s - self.b) * (s - self.c)) ** 0.5        def perimeter(self):        return self.a + self.b + self.c# å¤šæ€å‡½æ•°def print_shape_info(shape):    \"\"\"æ‰“å°å›¾å½¢ä¿¡æ¯çš„é€šç”¨å‡½æ•°\"\"\"    print(shape.describe())    print(f\"é¢ç§¯: {shape.area():.2f}\")    print(f\"å‘¨é•¿: {shape.perimeter():.2f}\")    print(\"-\" * 30)# ä½¿ç”¨ç¤ºä¾‹shapes = [    Rectangle(5, 3),    Circle(4),    Triangle(3, 4, 5)]for shape in shapes:    print_shape_info(shape)é¸­å­ç±»å‹Pythonæ”¯æŒé¸­å­ç±»å‹ï¼ˆDuck Typingï¼‰ï¼šâ€å¦‚æœå®ƒèµ°èµ·æ¥åƒé¸­å­ï¼Œå«èµ·æ¥åƒé¸­å­ï¼Œé‚£å®ƒå°±æ˜¯é¸­å­â€ã€‚è¿™æ„å‘³ç€å¯¹è±¡çš„ç±»å‹ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯å®ƒæ˜¯å¦å…·æœ‰æ‰€éœ€çš„æ–¹æ³•ã€‚class Duck:    def quack(self):        print(\"å˜å˜å˜!\")        def fly(self):        print(\"é¸­å­åœ¨é£\")class Airplane:    def quack(self):        print(\"é£æœºå¼•æ“å£°!\")        def fly(self):        print(\"é£æœºåœ¨é£\")class Dog:    def bark(self):        print(\"æ±ªæ±ª!\")# é¸­å­ç±»å‹çš„ä½“ç°def make_it_fly(obj):    \"\"\"åªè¦å¯¹è±¡æœ‰flyæ–¹æ³•å°±å¯ä»¥è°ƒç”¨\"\"\"    if hasattr(obj, 'fly'):        obj.fly()    else:        print(f\"{obj.__class__.__name__} ä¸èƒ½é£\")def make_it_quack(obj):    \"\"\"åªè¦å¯¹è±¡æœ‰quackæ–¹æ³•å°±å¯ä»¥è°ƒç”¨\"\"\"    if hasattr(obj, 'quack'):        obj.quack()    else:        print(f\"{obj.__class__.__name__} ä¸ä¼šå˜å˜å«\")# ä½¿ç”¨ç¤ºä¾‹objects = [Duck(), Airplane(), Dog()]for obj in objects:    print(f\"--- {obj.__class__.__name__} ---\")    make_it_fly(obj)    make_it_quack(obj)    print()ç±»å‹æ£€æŸ¥å’Œå¤šæ€åœ¨å¤šæ€ç¼–ç¨‹ä¸­ï¼Œæœ‰æ—¶éœ€è¦è¿›è¡Œç±»å‹æ£€æŸ¥ï¼šclass Vehicle:    def __init__(self, brand):        self.brand = brand        def start(self):        print(f\"{self.brand} å¯åŠ¨\")class Car(Vehicle):    def __init__(self, brand, doors):        super().__init__(brand)        self.doors = doors        def start(self):        print(f\"{self.brand} æ±½è½¦å¯åŠ¨ï¼Œæœ‰{self.doors}ä¸ªé—¨\")        def honk(self):        print(\"æ»´æ»´!\")class Motorcycle(Vehicle):    def __init__(self, brand, engine_size):        super().__init__(brand)        self.engine_size = engine_size        def start(self):        print(f\"{self.brand} æ‘©æ‰˜è½¦å¯åŠ¨ï¼Œ{self.engine_size}ccå¼•æ“\")        def wheelie(self):        print(\"æ‘©æ‰˜è½¦ç¿˜å¤´!\")def operate_vehicle(vehicle):    \"\"\"æ“ä½œäº¤é€šå·¥å…·çš„é€šç”¨å‡½æ•°\"\"\"    # å¤šæ€è°ƒç”¨    vehicle.start()        # ç±»å‹æ£€æŸ¥å’Œç‰¹å®šæ“ä½œ    if isinstance(vehicle, Car):        vehicle.honk()        print(\"è¿™æ˜¯ä¸€è¾†æ±½è½¦\")    elif isinstance(vehicle, Motorcycle):        vehicle.wheelie()        print(\"è¿™æ˜¯ä¸€è¾†æ‘©æ‰˜è½¦\")        # æ£€æŸ¥æ˜¯å¦æœ‰ç‰¹å®šæ–¹æ³•    if hasattr(vehicle, 'honk'):        print(\"è¿™ä¸ªäº¤é€šå·¥å…·å¯ä»¥é¸£ç¬›\")        print(f\"å“ç‰Œ: {vehicle.brand}\")    print(\"-\" * 30)# ä½¿ç”¨ç¤ºä¾‹vehicles = [    Car(\"å¥”é©°\", 4),    Motorcycle(\"å“ˆé›·\", 1200),    Vehicle(\"é€šç”¨å“ç‰Œ\")]for vehicle in vehicles:    operate_vehicle(vehicle)æŠ½è±¡åŸºç±»å’Œå¤šæ€ä½¿ç”¨æŠ½è±¡åŸºç±»å¯ä»¥æ›´å¥½åœ°å®šä¹‰å¤šæ€æ¥å£ï¼šfrom abc import ABC, abstractmethodclass Drawable(ABC):    \"\"\"å¯ç»˜åˆ¶å¯¹è±¡çš„æŠ½è±¡åŸºç±»\"\"\"        @abstractmethod    def draw(self):        \"\"\"ç»˜åˆ¶æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°\"\"\"        pass        @abstractmethod    def get_area(self):        \"\"\"è·å–é¢ç§¯ï¼Œå­ç±»å¿…é¡»å®ç°\"\"\"        pass        def display_info(self):        \"\"\"æ˜¾ç¤ºä¿¡æ¯ï¼Œé€šç”¨æ–¹æ³•\"\"\"        print(f\"ç»˜åˆ¶ {self.__class__.__name__}\")        self.draw()        print(f\"é¢ç§¯: {self.get_area()}\")class Square(Drawable):    def __init__(self, side):        self.side = side        def draw(self):        print(f\"ç»˜åˆ¶è¾¹é•¿ä¸º{self.side}çš„æ­£æ–¹å½¢\")        def get_area(self):        return self.side ** 2class Circle(Drawable):    def __init__(self, radius):        self.radius = radius        def draw(self):        print(f\"ç»˜åˆ¶åŠå¾„ä¸º{self.radius}çš„åœ†å½¢\")        def get_area(self):        return 3.14159 * self.radius ** 2# å¤šæ€å‡½æ•°def render_shapes(shapes):    \"\"\"æ¸²æŸ“å›¾å½¢åˆ—è¡¨\"\"\"    total_area = 0    for shape in shapes:        shape.display_info()        total_area += shape.get_area()        print()        print(f\"æ€»é¢ç§¯: {total_area:.2f}\")# ä½¿ç”¨ç¤ºä¾‹shapes = [Square(5), Circle(3), Square(2)]render_shapes(shapes)å®é™…åº”ç”¨æ¡ˆä¾‹æ¡ˆä¾‹1ï¼šæ”¯ä»˜ç³»ç»Ÿfrom abc import ABC, abstractmethodclass PaymentProcessor(ABC):    \"\"\"æ”¯ä»˜å¤„ç†å™¨æŠ½è±¡åŸºç±»\"\"\"        @abstractmethod    def process_payment(self, amount):        \"\"\"å¤„ç†æ”¯ä»˜\"\"\"        pass        @abstractmethod    def validate_payment_info(self, payment_info):        \"\"\"éªŒè¯æ”¯ä»˜ä¿¡æ¯\"\"\"        passclass CreditCardProcessor(PaymentProcessor):    def process_payment(self, amount):        print(f\"ä½¿ç”¨ä¿¡ç”¨å¡æ”¯ä»˜ Â¥{amount}\")        print(\"è¿æ¥é“¶è¡Œç½‘å…³...\")        print(\"æ”¯ä»˜æˆåŠŸ!\")        return True        def validate_payment_info(self, payment_info):        # éªŒè¯ä¿¡ç”¨å¡ä¿¡æ¯        card_number = payment_info.get('card_number', '')        if len(card_number) == 16:            print(\"ä¿¡ç”¨å¡ä¿¡æ¯éªŒè¯é€šè¿‡\")            return True        print(\"ä¿¡ç”¨å¡ä¿¡æ¯æ— æ•ˆ\")        return Falseclass AlipayProcessor(PaymentProcessor):    def process_payment(self, amount):        print(f\"ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜ Â¥{amount}\")        print(\"è°ƒç”¨æ”¯ä»˜å®API...\")        print(\"æ”¯ä»˜æˆåŠŸ!\")        return True        def validate_payment_info(self, payment_info):        # éªŒè¯æ”¯ä»˜å®ä¿¡æ¯        account = payment_info.get('account', '')        if '@' in account or len(account) == 11:            print(\"æ”¯ä»˜å®è´¦æˆ·éªŒè¯é€šè¿‡\")            return True        print(\"æ”¯ä»˜å®è´¦æˆ·æ— æ•ˆ\")        return Falseclass WechatPayProcessor(PaymentProcessor):    def process_payment(self, amount):        print(f\"ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜ Â¥{amount}\")        print(\"è°ƒç”¨å¾®ä¿¡æ”¯ä»˜API...\")        print(\"æ”¯ä»˜æˆåŠŸ!\")        return True        def validate_payment_info(self, payment_info):        # éªŒè¯å¾®ä¿¡æ”¯ä»˜ä¿¡æ¯        openid = payment_info.get('openid', '')        if len(openid) &gt; 10:            print(\"å¾®ä¿¡æ”¯ä»˜ä¿¡æ¯éªŒè¯é€šè¿‡\")            return True        print(\"å¾®ä¿¡æ”¯ä»˜ä¿¡æ¯æ— æ•ˆ\")        return Falseclass PaymentService:    \"\"\"æ”¯ä»˜æœåŠ¡ç±»\"\"\"        def __init__(self):        self.processors = {            'credit_card': CreditCardProcessor(),            'alipay': AlipayProcessor(),            'wechat': WechatPayProcessor()        }        def process_order_payment(self, payment_method, amount, payment_info):        \"\"\"å¤„ç†è®¢å•æ”¯ä»˜\"\"\"        processor = self.processors.get(payment_method)                if not processor:            print(f\"ä¸æ”¯æŒçš„æ”¯ä»˜æ–¹å¼: {payment_method}\")            return False                print(f\"å¼€å§‹å¤„ç†æ”¯ä»˜ï¼Œæ–¹å¼: {payment_method}\")                # å¤šæ€è°ƒç”¨ï¼šä¸åŒçš„å¤„ç†å™¨æœ‰ä¸åŒçš„å®ç°        if processor.validate_payment_info(payment_info):            return processor.process_payment(amount)        else:            print(\"æ”¯ä»˜ä¿¡æ¯éªŒè¯å¤±è´¥\")            return False# ä½¿ç”¨ç¤ºä¾‹payment_service = PaymentService()# ä¸åŒçš„æ”¯ä»˜æ–¹å¼orders = [    {        'method': 'credit_card',        'amount': 299.99,        'info': {'card_number': '1234567890123456'}    },    {        'method': 'alipay',        'amount': 199.50,        'info': {'account': 'user@example.com'}    },    {        'method': 'wechat',        'amount': 99.00,        'info': {'openid': 'wx_openid_12345'}    }]for order in orders:    print(\"=\" * 40)    success = payment_service.process_order_payment(        order['method'],         order['amount'],         order['info']    )    print(f\"æ”¯ä»˜ç»“æœ: {'æˆåŠŸ' if success else 'å¤±è´¥'}\")    print()æ¡ˆä¾‹2ï¼šæ–‡ä»¶å¤„ç†ç³»ç»Ÿfrom abc import ABC, abstractmethodimport jsonimport csvimport xml.etree.ElementTree as ETclass FileProcessor(ABC):    \"\"\"æ–‡ä»¶å¤„ç†å™¨æŠ½è±¡åŸºç±»\"\"\"        @abstractmethod    def read_file(self, filepath):        \"\"\"è¯»å–æ–‡ä»¶\"\"\"        pass        @abstractmethod    def write_file(self, filepath, data):        \"\"\"å†™å…¥æ–‡ä»¶\"\"\"        pass        @abstractmethod    def get_file_type(self):        \"\"\"è·å–æ–‡ä»¶ç±»å‹\"\"\"        passclass JSONProcessor(FileProcessor):    def read_file(self, filepath):        try:            with open(filepath, 'r', encoding='utf-8') as f:                return json.load(f)        except Exception as e:            print(f\"è¯»å–JSONæ–‡ä»¶å¤±è´¥: {e}\")            return None        def write_file(self, filepath, data):        try:            with open(filepath, 'w', encoding='utf-8') as f:                json.dump(data, f, ensure_ascii=False, indent=2)            print(f\"JSONæ–‡ä»¶å†™å…¥æˆåŠŸ: {filepath}\")            return True        except Exception as e:            print(f\"å†™å…¥JSONæ–‡ä»¶å¤±è´¥: {e}\")            return False        def get_file_type(self):        return \"JSON\"class CSVProcessor(FileProcessor):    def read_file(self, filepath):        try:            data = []            with open(filepath, 'r', encoding='utf-8') as f:                reader = csv.DictReader(f)                for row in reader:                    data.append(dict(row))            return data        except Exception as e:            print(f\"è¯»å–CSVæ–‡ä»¶å¤±è´¥: {e}\")            return None        def write_file(self, filepath, data):        try:            if not data:                return False                        with open(filepath, 'w', newline='', encoding='utf-8') as f:                writer = csv.DictWriter(f, fieldnames=data[0].keys())                writer.writeheader()                writer.writerows(data)            print(f\"CSVæ–‡ä»¶å†™å…¥æˆåŠŸ: {filepath}\")            return True        except Exception as e:            print(f\"å†™å…¥CSVæ–‡ä»¶å¤±è´¥: {e}\")            return False        def get_file_type(self):        return \"CSV\"class XMLProcessor(FileProcessor):    def read_file(self, filepath):        try:            tree = ET.parse(filepath)            root = tree.getroot()            return self._xml_to_dict(root)        except Exception as e:            print(f\"è¯»å–XMLæ–‡ä»¶å¤±è´¥: {e}\")            return None        def _xml_to_dict(self, element):        \"\"\"å°†XMLå…ƒç´ è½¬æ¢ä¸ºå­—å…¸\"\"\"        result = {}        for child in element:            if len(child) == 0:                result[child.tag] = child.text            else:                result[child.tag] = self._xml_to_dict(child)        return result        def write_file(self, filepath, data):        try:            root = ET.Element(\"root\")            self._dict_to_xml(root, data)            tree = ET.ElementTree(root)            tree.write(filepath, encoding='utf-8', xml_declaration=True)            print(f\"XMLæ–‡ä»¶å†™å…¥æˆåŠŸ: {filepath}\")            return True        except Exception as e:            print(f\"å†™å…¥XMLæ–‡ä»¶å¤±è´¥: {e}\")            return False        def _dict_to_xml(self, parent, data):        \"\"\"å°†å­—å…¸è½¬æ¢ä¸ºXMLå…ƒç´ \"\"\"        if isinstance(data, dict):            for key, value in data.items():                child = ET.SubElement(parent, str(key))                self._dict_to_xml(child, value)        else:            parent.text = str(data)        def get_file_type(self):        return \"XML\"class FileManager:    \"\"\"æ–‡ä»¶ç®¡ç†å™¨\"\"\"        def __init__(self):        self.processors = {            '.json': JSONProcessor(),            '.csv': CSVProcessor(),            '.xml': XMLProcessor()        }        def get_processor(self, filepath):        \"\"\"æ ¹æ®æ–‡ä»¶æ‰©å±•åè·å–å¤„ç†å™¨\"\"\"        import os        _, ext = os.path.splitext(filepath.lower())        return self.processors.get(ext)        def process_file(self, input_path, output_path=None):        \"\"\"å¤„ç†æ–‡ä»¶\"\"\"        processor = self.get_processor(input_path)                if not processor:            print(f\"ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹: {input_path}\")            return False                print(f\"ä½¿ç”¨{processor.get_file_type()}å¤„ç†å™¨\")                # å¤šæ€è°ƒç”¨ï¼šä¸åŒå¤„ç†å™¨æœ‰ä¸åŒçš„è¯»å–æ–¹å¼        data = processor.read_file(input_path)                if data is None:            return False                print(f\"æˆåŠŸè¯»å–{processor.get_file_type()}æ–‡ä»¶\")        print(f\"æ•°æ®å†…å®¹: {data}\")                # å¦‚æœæŒ‡å®šäº†è¾“å‡ºè·¯å¾„ï¼Œåˆ™å†™å…¥æ–‡ä»¶        if output_path:            output_processor = self.get_processor(output_path)            if output_processor:                # å¤šæ€è°ƒç”¨ï¼šä¸åŒå¤„ç†å™¨æœ‰ä¸åŒçš„å†™å…¥æ–¹å¼                return output_processor.write_file(output_path, data)                return True# ä½¿ç”¨ç¤ºä¾‹ï¼ˆéœ€è¦å®é™…çš„æ–‡ä»¶æ¥æµ‹è¯•ï¼‰file_manager = FileManager()# ç¤ºä¾‹æ•°æ®sample_data = [    {\"name\": \"å¼ ä¸‰\", \"age\": 25, \"city\": \"åŒ—äº¬\"},    {\"name\": \"æå››\", \"age\": 30, \"city\": \"ä¸Šæµ·\"}]# æ¼”ç¤ºå¤šæ€æ€§processors = [JSONProcessor(), CSVProcessor(), XMLProcessor()]for processor in processors:    print(f\"\\n=== {processor.get_file_type()} å¤„ç†å™¨ ===\")    filename = f\"test.{processor.get_file_type().lower()}\"        # å¤šæ€è°ƒç”¨ï¼šæ¯ä¸ªå¤„ç†å™¨éƒ½æœ‰è‡ªå·±çš„å†™å…¥å®ç°    if processor.write_file(filename, sample_data):        # å¤šæ€è°ƒç”¨ï¼šæ¯ä¸ªå¤„ç†å™¨éƒ½æœ‰è‡ªå·±çš„è¯»å–å®ç°        read_data = processor.read_file(filename)        print(f\"è¯»å–çš„æ•°æ®: {read_data}\")æ³¨æ„äº‹é¡¹  æ¥å£ä¸€è‡´æ€§ï¼šå¤šæ€è¦æ±‚å­ç±»ä¿æŒä¸çˆ¶ç±»ç›¸åŒçš„æ¥å£  é‡Œæ°æ›¿æ¢åŸåˆ™ï¼šå­ç±»å¯¹è±¡åº”è¯¥èƒ½å¤Ÿæ›¿æ¢çˆ¶ç±»å¯¹è±¡è€Œä¸å½±å“ç¨‹åºæ­£ç¡®æ€§  é¿å…ç±»å‹æ£€æŸ¥ï¼šå°½é‡é¿å…ä½¿ç”¨isinstance()è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä¼˜å…ˆä½¿ç”¨é¸­å­ç±»å‹  åˆç†ä½¿ç”¨æŠ½è±¡ç±»ï¼šä½¿ç”¨æŠ½è±¡åŸºç±»å¯ä»¥æ›´å¥½åœ°å®šä¹‰å¤šæ€æ¥å£  æ€§èƒ½è€ƒè™‘ï¼šå¤šæ€è°ƒç”¨å¯èƒ½æ¯”ç›´æ¥è°ƒç”¨ç¨æ…¢ï¼Œä½†é€šå¸¸å¯ä»¥å¿½ç•¥ç›¸å…³å†…å®¹  ç±»çš„ç»§æ‰¿ - å¤šæ€çš„åŸºç¡€  æŠ½è±¡ç±» - å®šä¹‰å¤šæ€æ¥å£  è®¾è®¡æ¨¡å¼ - å¤šæ€åœ¨è®¾è®¡æ¨¡å¼ä¸­çš„åº”ç”¨  æ¥å£è®¾è®¡ - è®¾è®¡æ”¯æŒå¤šæ€çš„æ¥å£æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ï¼šå¤šæ€å’Œé¸­å­ç±»å‹  ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸­å…³äºå¤šæ€çš„åº”ç”¨  SOLIDåŸåˆ™ä¸­çš„å¼€é—­åŸåˆ™å’Œé‡Œæ°æ›¿æ¢åŸåˆ™  å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å¤šæ€æ¦‚å¿µ",
        "url": "/docs/basics/polymorphism/",
        "category": "PythonåŸºç¡€",
        "tags": ["é¢å‘å¯¹è±¡","å¤šæ€","ç»§æ‰¿","æ–¹æ³•é‡å†™"]
      }
      
    
  
    
      ,
      {
        "title": "pow() - å¹‚è¿ç®—å‡½æ•°",
        "content": "pow() - å¹‚è¿ç®—å‡½æ•°ğŸ“ æ¦‚è¿°pow() æ˜¯Pythonä¸­ç”¨äºè®¡ç®—å¹‚è¿ç®—çš„å†…ç½®å‡½æ•°ã€‚å®ƒå¯ä»¥è®¡ç®— x çš„ y æ¬¡å¹‚ï¼Œè¿˜æ”¯æŒæ¨¡è¿ç®—ï¼ˆx^y mod zï¼‰ï¼Œè¿™åœ¨å¯†ç å­¦ã€æ•°è®ºå’Œå¤§æ•°è¿ç®—ä¸­éå¸¸æœ‰ç”¨ã€‚ç›¸æ¯”äº ** è¿ç®—ç¬¦ï¼Œpow() å‡½æ•°åœ¨å¤„ç†å¤§æ•°çš„æ¨¡å¹‚è¿ç®—æ—¶å…·æœ‰æ˜¾è‘—çš„æ€§èƒ½ä¼˜åŠ¿ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡pow()å‡½æ•°çš„åŸºæœ¬è¯­æ³•å’Œç”¨æ³•  ç†è§£å¹‚è¿ç®—çš„æ•°å­¦åŸç†å’Œåº”ç”¨  å­¦ä¼šä½¿ç”¨æ¨¡å¹‚è¿ç®—è¿›è¡Œé«˜æ•ˆè®¡ç®—  äº†è§£pow()ä¸**è¿ç®—ç¬¦çš„åŒºåˆ«å’Œé€‰æ‹©  æŒæ¡åœ¨å¯†ç å­¦å’Œæ•°è®ºä¸­çš„åº”ç”¨ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ•´æ•°ã€æµ®ç‚¹æ•°ï¼‰  æ•°å­¦åŸºç¡€ï¼ˆæŒ‡æ•°ã€å¯¹æ•°æ¦‚å¿µï¼‰  æ¨¡è¿ç®—åŸºç¡€  å¤§æ•°è¿ç®—æ¦‚å¿µğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µpow() å‡½æ•°å®ç°äº†æ•°å­¦ä¸­çš„å¹‚è¿ç®—ï¼Œå³è®¡ç®—åº•æ•°çš„æŒ‡æ•°æ¬¡å¹‚ã€‚å½“æä¾›ç¬¬ä¸‰ä¸ªå‚æ•°æ—¶ï¼Œå®ƒä¼šè®¡ç®—æ¨¡å¹‚è¿ç®—ï¼Œè¿™åœ¨å¤„ç†å¤§æ•°æ—¶æ¯”å…ˆè®¡ç®—å¹‚å†å–æ¨¡è¦é«˜æ•ˆå¾—å¤šã€‚è¯­æ³•æ ¼å¼# åŸºæœ¬å¹‚è¿ç®—pow(base, exp)# æ¨¡å¹‚è¿ç®—pow(base, exp, mod)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      è¯´æ˜                  base      number      æ˜¯      åº•æ•°              exp      number      æ˜¯      æŒ‡æ•°              mod      int      å¦      æ¨¡æ•°ï¼ˆä»…æ”¯æŒæ•´æ•°ï¼‰      è¿”å›å€¼  ä¸¤å‚æ•°å½¢å¼: è¿”å› base^exp çš„ç»“æœ  ä¸‰å‚æ•°å½¢å¼: è¿”å› (base^exp) % mod çš„ç»“æœ  è¿”å›ç±»å‹: æ ¹æ®è¾“å…¥å‚æ•°ç±»å‹ç¡®å®šï¼ˆintã€floatã€complexç­‰ï¼‰ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€å¹‚è¿ç®—# åŸºç¡€å¹‚è¿ç®—ç¤ºä¾‹print(\"åŸºç¡€å¹‚è¿ç®—ç¤ºä¾‹:\")# 1. åŸºæœ¬æ•´æ•°å¹‚è¿ç®—print(\"\\n1. åŸºæœ¬æ•´æ•°å¹‚è¿ç®—:\")base_exp_pairs = [    (2, 3),      # 2çš„3æ¬¡æ–¹    (5, 4),      # 5çš„4æ¬¡æ–¹    (10, 6),     # 10çš„6æ¬¡æ–¹    (-2, 3),     # è´Ÿæ•°çš„å¥‡æ•°æ¬¡æ–¹    (-2, 4),     # è´Ÿæ•°çš„å¶æ•°æ¬¡æ–¹    (3, 0),      # ä»»ä½•æ•°çš„0æ¬¡æ–¹    (0, 5),      # 0çš„æ­£æ•°æ¬¡æ–¹]for base, exp in base_exp_pairs:    result_pow = pow(base, exp)    result_operator = base ** exp    print(f\"pow({base}, {exp}) = {result_pow}\")    print(f\"{base} ** {exp} = {result_operator}\")    print(f\"ç»“æœä¸€è‡´: {result_pow == result_operator}\")    print()# 2. æµ®ç‚¹æ•°å¹‚è¿ç®—print(\"2. æµ®ç‚¹æ•°å¹‚è¿ç®—:\")float_cases = [    (2.5, 3),        # å°æ•°åº•æ•°ï¼Œæ•´æ•°æŒ‡æ•°    (4, 0.5),        # æ•´æ•°åº•æ•°ï¼Œå°æ•°æŒ‡æ•°ï¼ˆå¼€æ–¹ï¼‰    (2.5, 2.5),      # å°æ•°åº•æ•°ï¼Œå°æ•°æŒ‡æ•°    (9, 1/2),        # å¼€å¹³æ–¹æ ¹    (27, 1/3),       # å¼€ç«‹æ–¹æ ¹    (16, 1/4),       # å¼€å››æ¬¡æ–¹æ ¹]for base, exp in float_cases:    result = pow(base, exp)    print(f\"pow({base}, {exp}) = {result:.6f}\")        # éªŒè¯å¼€æ–¹è¿ç®—    if exp == 0.5 or exp == 1/2:        sqrt_result = base ** 0.5        print(f\"  éªŒè¯å¼€æ–¹: {base}^0.5 = {sqrt_result:.6f}\")    print()# 3. è´ŸæŒ‡æ•°è¿ç®—print(\"3. è´ŸæŒ‡æ•°è¿ç®—:\")negative_exp_cases = [    (2, -3),     # 2çš„-3æ¬¡æ–¹ = 1/8    (5, -2),     # 5çš„-2æ¬¡æ–¹ = 1/25    (10, -4),    # 10çš„-4æ¬¡æ–¹ = 0.0001    (0.5, -2),   # 0.5çš„-2æ¬¡æ–¹ = 4]for base, exp in negative_exp_cases:    result = pow(base, exp)    manual_calc = 1 / (base ** abs(exp))    print(f\"pow({base}, {exp}) = {result}\")    print(f\"æ‰‹åŠ¨è®¡ç®—: 1/{base}^{abs(exp)} = {manual_calc}\")    print(f\"ç»“æœä¸€è‡´: {abs(result - manual_calc) &lt; 1e-10}\")    print()# 4. å¤æ•°å¹‚è¿ç®—print(\"4. å¤æ•°å¹‚è¿ç®—:\")complex_cases = [    (1+1j, 2),       # å¤æ•°çš„å¹³æ–¹    (2+3j, 3),       # å¤æ•°çš„ç«‹æ–¹    (1j, 4),         # è™šæ•°å•ä½çš„4æ¬¡æ–¹    (-1, 0.5),       # è´Ÿæ•°çš„å¼€æ–¹ï¼ˆäº§ç”Ÿå¤æ•°ï¼‰]for base, exp in complex_cases:    result = pow(base, exp)    print(f\"pow({base}, {exp}) = {result}\")    print(f\"  å®éƒ¨: {result.real:.6f}\")    print(f\"  è™šéƒ¨: {result.imag:.6f}\")    print(f\"  æ¨¡é•¿: {abs(result):.6f}\")    print()# 5. ç‰¹æ®Šå€¼å’Œè¾¹ç•Œæƒ…å†µprint(\"5. ç‰¹æ®Šå€¼å’Œè¾¹ç•Œæƒ…å†µ:\")special_cases = [    (0, 0),          # 0çš„0æ¬¡æ–¹ï¼ˆæ•°å­¦ä¸Šæœªå®šä¹‰ï¼ŒPythonè¿”å›1ï¼‰    (1, float('inf')), # 1çš„æ— ç©·æ¬¡æ–¹    (2, float('inf')), # å¤§äº1çš„æ•°çš„æ— ç©·æ¬¡æ–¹    (0.5, float('inf')), # å°äº1çš„æ•°çš„æ— ç©·æ¬¡æ–¹    (float('inf'), 2), # æ— ç©·å¤§çš„å¹³æ–¹    (float('nan'), 2), # NaNçš„å¹‚è¿ç®—]for base, exp in special_cases:    try:        result = pow(base, exp)        print(f\"pow({base}, {exp}) = {result}\")    except Exception as e:        print(f\"pow({base}, {exp}) é”™è¯¯: {e}\")æ¨¡å¹‚è¿ç®—# æ¨¡å¹‚è¿ç®—ç¤ºä¾‹print(\"æ¨¡å¹‚è¿ç®—ç¤ºä¾‹:\")# 1. åŸºæœ¬æ¨¡å¹‚è¿ç®—print(\"\\n1. åŸºæœ¬æ¨¡å¹‚è¿ç®—:\")mod_cases = [    (2, 10, 1000),   # 2^10 mod 1000    (3, 20, 100),    # 3^20 mod 100    (7, 15, 13),     # 7^15 mod 13    (123, 456, 789), # å¤§æ•°æ¨¡å¹‚è¿ç®—]for base, exp, mod in mod_cases:    # ä½¿ç”¨pow()çš„ä¸‰å‚æ•°å½¢å¼    result_efficient = pow(base, exp, mod)        # ä¼ ç»Ÿæ–¹æ³•ï¼ˆå…ˆè®¡ç®—å¹‚å†å–æ¨¡ï¼‰    if exp &lt;= 20:  # åªå¯¹å°æŒ‡æ•°è¿›è¡Œä¼ ç»Ÿè®¡ç®—ï¼Œé¿å…æº¢å‡º        result_traditional = (base ** exp) % mod        print(f\"pow({base}, {exp}, {mod}) = {result_efficient}\")        print(f\"({base}^{exp}) % {mod} = {result_traditional}\")        print(f\"ç»“æœä¸€è‡´: {result_efficient == result_traditional}\")    else:        print(f\"pow({base}, {exp}, {mod}) = {result_efficient}\")        print(f\"(ä¼ ç»Ÿæ–¹æ³•å› æ•°å€¼è¿‡å¤§è·³è¿‡éªŒè¯)\")    print()# 2. æ€§èƒ½å¯¹æ¯”ï¼šæ¨¡å¹‚è¿ç®— vs ä¼ ç»Ÿæ–¹æ³•print(\"2. æ€§èƒ½å¯¹æ¯”:\")import time# å¤§æ•°æ¨¡å¹‚è¿ç®—æ€§èƒ½æµ‹è¯•large_base = 12345large_exp = 67890large_mod = 98765print(f\"è®¡ç®— {large_base}^{large_exp} mod {large_mod}\")# ä½¿ç”¨pow()çš„é«˜æ•ˆæ¨¡å¹‚è¿ç®—start_time = time.time()efficient_result = pow(large_base, large_exp, large_mod)efficient_time = time.time() - start_timeprint(f\"pow()æ–¹æ³•: {efficient_result} (è€—æ—¶: {efficient_time:.6f}ç§’)\")# æ³¨æ„ï¼šä¼ ç»Ÿæ–¹æ³•å¯¹äºå¦‚æ­¤å¤§çš„æŒ‡æ•°ä¼šéå¸¸æ…¢ï¼Œè¿™é‡Œåªåšæ¼”ç¤ºprint(\"ä¼ ç»Ÿæ–¹æ³• (base^exp) % mod å¯¹äºå¤§æŒ‡æ•°ä¼šéå¸¸æ…¢ï¼Œå·²è·³è¿‡\")# 3. æ¨¡å¹‚è¿ç®—çš„æ•°å­¦æ€§è´¨print(\"\\n3. æ¨¡å¹‚è¿ç®—çš„æ•°å­¦æ€§è´¨:\")# è´¹é©¬å°å®šç†éªŒè¯ï¼šå¦‚æœpæ˜¯è´¨æ•°ï¼Œaä¸è¢«pæ•´é™¤ï¼Œåˆ™a^(p-1) â‰¡ 1 (mod p)primes = [7, 11, 13, 17, 19]bases = [2, 3, 5, 6]print(\"è´¹é©¬å°å®šç†éªŒè¯ (a^(p-1) â‰¡ 1 mod p):\")for p in primes:    print(f\"\\nè´¨æ•° p = {p}:\")    for a in bases:        if a % p != 0:  # aä¸è¢«pæ•´é™¤            result = pow(a, p-1, p)            print(f\"  {a}^{p-1} mod {p} = {result} {'âœ“' if result == 1 else 'âœ—'}\")# 4. æ¬§æ‹‰å®šç†éªŒè¯print(\"\\n4. æ¬§æ‹‰å®šç†ç›¸å…³è®¡ç®—:\")def gcd(a, b):    \"\"\"è®¡ç®—æœ€å¤§å…¬çº¦æ•°\"\"\"    while b:        a, b = b, a % b    return adef euler_phi(n):    \"\"\"è®¡ç®—æ¬§æ‹‰å‡½æ•°Ï†(n)\"\"\"    result = n    p = 2    while p * p &lt;= n:        if n % p == 0:            while n % p == 0:                n //= p            result -= result // p        p += 1    if n &gt; 1:        result -= result // n    return result# éªŒè¯æ¬§æ‹‰å®šç†ï¼šå¦‚æœgcd(a,n)=1ï¼Œåˆ™a^Ï†(n) â‰¡ 1 (mod n)test_n = [15, 21, 35]test_a = [2, 4, 8]print(\"æ¬§æ‹‰å®šç†éªŒè¯ (a^Ï†(n) â‰¡ 1 mod n, å½“gcd(a,n)=1):\")for n in test_n:    phi_n = euler_phi(n)    print(f\"\\nn = {n}, Ï†({n}) = {phi_n}:\")    for a in test_a:        if gcd(a, n) == 1:            result = pow(a, phi_n, n)            print(f\"  {a}^{phi_n} mod {n} = {result} {'âœ“' if result == 1 else 'âœ—'}\")        else:            print(f\"  {a}ä¸{n}ä¸äº’è´¨ï¼Œè·³è¿‡\")# 5. æ¨¡é€†å…ƒè®¡ç®—print(\"\\n5. æ¨¡é€†å…ƒè®¡ç®—:\")def mod_inverse(a, m):    \"\"\"è®¡ç®—aåœ¨æ¨¡mä¸‹çš„é€†å…ƒ\"\"\"    if gcd(a, m) != 1:        return None  # é€†å…ƒä¸å­˜åœ¨        # ä½¿ç”¨è´¹é©¬å°å®šç†ï¼šå¦‚æœmæ˜¯è´¨æ•°ï¼Œåˆ™a^(m-2) â‰¡ a^(-1) (mod m)    # æˆ–ä½¿ç”¨æ¬§æ‹‰å®šç†ï¼ša^(Ï†(m)-1) â‰¡ a^(-1) (mod m)    phi_m = euler_phi(m)    return pow(a, phi_m - 1, m)# æµ‹è¯•æ¨¡é€†å…ƒinverse_tests = [    (3, 7),   # 3åœ¨æ¨¡7ä¸‹çš„é€†å…ƒ    (5, 11),  # 5åœ¨æ¨¡11ä¸‹çš„é€†å…ƒ    (7, 13),  # 7åœ¨æ¨¡13ä¸‹çš„é€†å…ƒ]print(\"æ¨¡é€†å…ƒè®¡ç®—:\")for a, m in inverse_tests:    inverse = mod_inverse(a, m)    if inverse:        # éªŒè¯ï¼ša * inverse â‰¡ 1 (mod m)        verification = (a * inverse) % m        print(f\"{a}åœ¨æ¨¡{m}ä¸‹çš„é€†å…ƒ: {inverse}\")        print(f\"éªŒè¯: ({a} * {inverse}) mod {m} = {verification} {'âœ“' if verification == 1 else 'âœ—'}\")    else:        print(f\"{a}åœ¨æ¨¡{m}ä¸‹æ²¡æœ‰é€†å…ƒ\")    print()å¯†ç å­¦åº”ç”¨# å¯†ç å­¦åº”ç”¨ç¤ºä¾‹print(\"å¯†ç å­¦åº”ç”¨ç¤ºä¾‹:\")# 1. RSAåŠ å¯†ç®—æ³•çš„æ ¸å¿ƒè®¡ç®—print(\"\\n1. RSAåŠ å¯†ç®—æ³•æ ¸å¿ƒ:\")class SimpleRSA:    \"\"\"ç®€åŒ–çš„RSAå®ç°ï¼ˆä»…ç”¨äºæ¼”ç¤ºï¼‰\"\"\"        def __init__(self, p, q):        \"\"\"åˆå§‹åŒ–RSAå‚æ•°\"\"\"        self.p = p  # è´¨æ•°p        self.q = q  # è´¨æ•°q        self.n = p * q  # æ¨¡æ•°n        self.phi_n = (p - 1) * (q - 1)  # æ¬§æ‹‰å‡½æ•°å€¼                # é€‰æ‹©å…¬é’¥æŒ‡æ•°eï¼ˆé€šå¸¸é€‰æ‹©65537ï¼‰        self.e = 65537        if gcd(self.e, self.phi_n) != 1:            self.e = 3  # å¤‡é€‰å€¼                # è®¡ç®—ç§é’¥æŒ‡æ•°d        self.d = self.mod_inverse(self.e, self.phi_n)        def mod_inverse(self, a, m):        \"\"\"è®¡ç®—æ¨¡é€†å…ƒ\"\"\"        def extended_gcd(a, b):            if a == 0:                return b, 0, 1            gcd, x1, y1 = extended_gcd(b % a, a)            x = y1 - (b // a) * x1            y = x1            return gcd, x, y                gcd, x, _ = extended_gcd(a % m, m)        if gcd != 1:            return None        return (x % m + m) % m        def encrypt(self, message):        \"\"\"åŠ å¯†æ¶ˆæ¯\"\"\"        return pow(message, self.e, self.n)        def decrypt(self, ciphertext):        \"\"\"è§£å¯†æ¶ˆæ¯\"\"\"        return pow(ciphertext, self.d, self.n)        def get_public_key(self):        \"\"\"è·å–å…¬é’¥\"\"\"        return (self.e, self.n)        def get_private_key(self):        \"\"\"è·å–ç§é’¥\"\"\"        return (self.d, self.n)# åˆ›å»ºRSAå®ä¾‹ï¼ˆä½¿ç”¨å°è´¨æ•°è¿›è¡Œæ¼”ç¤ºï¼‰rsa = SimpleRSA(61, 53)  # ä¸¤ä¸ªè´¨æ•°print(f\"RSAå‚æ•°:\")print(f\"  p = {rsa.p}, q = {rsa.q}\")print(f\"  n = {rsa.n}\")print(f\"  Ï†(n) = {rsa.phi_n}\")print(f\"  å…¬é’¥: (e={rsa.e}, n={rsa.n})\")print(f\"  ç§é’¥: (d={rsa.d}, n={rsa.n})\")# åŠ å¯†å’Œè§£å¯†æ¼”ç¤ºmessages = [42, 123, 456, 789]print(f\"\\nåŠ å¯†è§£å¯†æ¼”ç¤º:\")for msg in messages:    if msg &lt; rsa.n:  # æ¶ˆæ¯å¿…é¡»å°äºn        encrypted = rsa.encrypt(msg)        decrypted = rsa.decrypt(encrypted)                print(f\"åŸå§‹æ¶ˆæ¯: {msg}\")        print(f\"åŠ å¯†å: {encrypted}\")        print(f\"è§£å¯†å: {decrypted}\")        print(f\"æ­£ç¡®æ€§: {'âœ“' if msg == decrypted else 'âœ—'}\")        print()# 2. Diffie-Hellmanå¯†é’¥äº¤æ¢print(\"2. Diffie-Hellmanå¯†é’¥äº¤æ¢:\")class DiffieHellman:    \"\"\"Diffie-Hellmanå¯†é’¥äº¤æ¢æ¼”ç¤º\"\"\"        def __init__(self, p, g):        \"\"\"åˆå§‹åŒ–DHå‚æ•°\"\"\"        self.p = p  # å¤§è´¨æ•°        self.g = g  # ç”Ÿæˆå…ƒ        def generate_private_key(self):        \"\"\"ç”Ÿæˆç§é’¥ï¼ˆéšæœºæ•°ï¼‰\"\"\"        import random        return random.randint(2, self.p - 2)        def generate_public_key(self, private_key):        \"\"\"ç”Ÿæˆå…¬é’¥\"\"\"        return pow(self.g, private_key, self.p)        def compute_shared_secret(self, private_key, other_public_key):        \"\"\"è®¡ç®—å…±äº«å¯†é’¥\"\"\"        return pow(other_public_key, private_key, self.p)# DHå¯†é’¥äº¤æ¢æ¼”ç¤ºdh = DiffieHellman(2357, 2)  # ä½¿ç”¨è´¨æ•°2357å’Œç”Ÿæˆå…ƒ2# Aliceç”Ÿæˆå¯†é’¥å¯¹alice_private = dh.generate_private_key()alice_public = dh.generate_public_key(alice_private)# Bobç”Ÿæˆå¯†é’¥å¯¹bob_private = dh.generate_private_key()bob_public = dh.generate_public_key(bob_private)# è®¡ç®—å…±äº«å¯†é’¥alice_shared = dh.compute_shared_secret(alice_private, bob_public)bob_shared = dh.compute_shared_secret(bob_private, alice_public)print(f\"DHå¯†é’¥äº¤æ¢:\")print(f\"  å…¬å…±å‚æ•°: p={dh.p}, g={dh.g}\")print(f\"  Aliceç§é’¥: {alice_private}\")print(f\"  Aliceå…¬é’¥: {alice_public}\")print(f\"  Bobç§é’¥: {bob_private}\")print(f\"  Bobå…¬é’¥: {bob_public}\")print(f\"  Aliceè®¡ç®—çš„å…±äº«å¯†é’¥: {alice_shared}\")print(f\"  Bobè®¡ç®—çš„å…±äº«å¯†é’¥: {bob_shared}\")print(f\"  å¯†é’¥ä¸€è‡´: {'âœ“' if alice_shared == bob_shared else 'âœ—'}\")# 3. æ•°å­—ç­¾åï¼ˆç®€åŒ–ç‰ˆï¼‰print(\"\\n3. æ•°å­—ç­¾åæ¼”ç¤º:\")class SimpleSignature:    \"\"\"ç®€åŒ–çš„æ•°å­—ç­¾åæ–¹æ¡ˆ\"\"\"        def __init__(self, p, g):        self.p = p        self.g = g        self.private_key = None        self.public_key = None        def generate_keys(self):        \"\"\"ç”Ÿæˆå¯†é’¥å¯¹\"\"\"        import random        self.private_key = random.randint(2, self.p - 2)        self.public_key = pow(self.g, self.private_key, self.p)        def sign(self, message_hash):        \"\"\"ç­¾åï¼ˆç®€åŒ–ç‰ˆï¼‰\"\"\"        import random        k = random.randint(2, self.p - 2)        r = pow(self.g, k, self.p)                # ç®€åŒ–çš„ç­¾åè®¡ç®—        s = (message_hash + self.private_key * r) % (self.p - 1)        return (r, s)        def verify(self, message_hash, signature, public_key):        \"\"\"éªŒè¯ç­¾å\"\"\"        r, s = signature                # ç®€åŒ–çš„éªŒè¯è®¡ç®—        v1 = pow(self.g, message_hash, self.p)        v2 = (pow(public_key, r, self.p) * pow(r, s, self.p)) % self.p                return v1 == v2# æ•°å­—ç­¾åæ¼”ç¤ºsigner = SimpleSignature(2357, 2)signer.generate_keys()message_hash = 12345  # ç®€åŒ–çš„æ¶ˆæ¯å“ˆå¸Œsignature = signer.sign(message_hash)is_valid = signer.verify(message_hash, signature, signer.public_key)print(f\"æ•°å­—ç­¾å:\")print(f\"  ç§é’¥: {signer.private_key}\")print(f\"  å…¬é’¥: {signer.public_key}\")print(f\"  æ¶ˆæ¯å“ˆå¸Œ: {message_hash}\")print(f\"  ç­¾å: {signature}\")print(f\"  éªŒè¯ç»“æœ: {'âœ“' if is_valid else 'âœ—'}\")# 4. å¿«é€Ÿå¹‚ç®—æ³•å®ç°print(\"\\n4. å¿«é€Ÿå¹‚ç®—æ³•å®ç°:\")def fast_power(base, exp, mod=None):    \"\"\"å¿«é€Ÿå¹‚ç®—æ³•å®ç°ï¼ˆæ•™å­¦ç”¨é€”ï¼‰\"\"\"    result = 1    base = base % mod if mod else base        while exp &gt; 0:        # å¦‚æœæŒ‡æ•°æ˜¯å¥‡æ•°ï¼Œå°†å½“å‰åº•æ•°ä¹˜åˆ°ç»“æœä¸­        if exp % 2 == 1:            result = (result * base) % mod if mod else result * base                # æŒ‡æ•°é™¤ä»¥2ï¼Œåº•æ•°å¹³æ–¹        exp = exp &gt;&gt; 1  # ç­‰ä»·äº exp // 2        base = (base * base) % mod if mod else base * base        return result# æµ‹è¯•å¿«é€Ÿå¹‚ç®—æ³•test_cases = [    (2, 10, 1000),    (3, 20, 100),    (7, 100, 13),]print(\"å¿«é€Ÿå¹‚ç®—æ³•æµ‹è¯•:\")for base, exp, mod in test_cases:    builtin_result = pow(base, exp, mod)    custom_result = fast_power(base, exp, mod)        print(f\"pow({base}, {exp}, {mod}) = {builtin_result}\")    print(f\"fast_power({base}, {exp}, {mod}) = {custom_result}\")    print(f\"ç»“æœä¸€è‡´: {'âœ“' if builtin_result == custom_result else 'âœ—'}\")    print()ç§‘å­¦è®¡ç®—åº”ç”¨# ç§‘å­¦è®¡ç®—åº”ç”¨ç¤ºä¾‹print(\"ç§‘å­¦è®¡ç®—åº”ç”¨ç¤ºä¾‹:\")# 1. å¤åˆ©è®¡ç®—print(\"\\n1. å¤åˆ©è®¡ç®—:\")def compound_interest(principal, rate, time, compound_frequency=1):    \"\"\"å¤åˆ©è®¡ç®—\"\"\"    # A = P(1 + r/n)^(nt)    # P: æœ¬é‡‘, r: å¹´åˆ©ç‡, t: æ—¶é—´(å¹´), n: å¤åˆ©é¢‘ç‡    amount = principal * pow(1 + rate/compound_frequency, compound_frequency * time)    return amountdef continuous_compound_interest(principal, rate, time):    \"\"\"è¿ç»­å¤åˆ©è®¡ç®—\"\"\"    # A = Pe^(rt)    import math    return principal * math.exp(rate * time)# å¤åˆ©è®¡ç®—ç¤ºä¾‹principal = 10000  # æœ¬é‡‘rate = 0.05        # å¹´åˆ©ç‡5%time = 10          # 10å¹´print(f\"æœ¬é‡‘: ${principal}\")print(f\"å¹´åˆ©ç‡: {rate*100}%\")print(f\"æ—¶é—´: {time}å¹´\")print()compound_frequencies = [    (1, \"å¹´å¤åˆ©\"),    (4, \"å­£åº¦å¤åˆ©\"),    (12, \"æœˆå¤åˆ©\"),    (365, \"æ—¥å¤åˆ©\"),]for freq, name in compound_frequencies:    amount = compound_interest(principal, rate, time, freq)    interest = amount - principal    print(f\"{name}: ${amount:.2f} (åˆ©æ¯: ${interest:.2f})\")# è¿ç»­å¤åˆ©continuous_amount = continuous_compound_interest(principal, rate, time)continuous_interest = continuous_amount - principalprint(f\"è¿ç»­å¤åˆ©: ${continuous_amount:.2f} (åˆ©æ¯: ${continuous_interest:.2f})\")# 2. äººå£å¢é•¿æ¨¡å‹print(\"\\n2. äººå£å¢é•¿æ¨¡å‹:\")def exponential_growth(initial_population, growth_rate, time):    \"\"\"æŒ‡æ•°å¢é•¿æ¨¡å‹\"\"\"    # P(t) = P0 * e^(rt)    import math    return initial_population * math.exp(growth_rate * time)def discrete_growth(initial_population, growth_rate, time):    \"\"\"ç¦»æ•£å¢é•¿æ¨¡å‹\"\"\"    # P(t) = P0 * (1 + r)^t    return initial_population * pow(1 + growth_rate, time)# äººå£å¢é•¿è®¡ç®—initial_pop = 1000000  # åˆå§‹äººå£100ä¸‡growth_rate = 0.02     # å¹´å¢é•¿ç‡2%years = [5, 10, 20, 50]print(f\"åˆå§‹äººå£: {initial_pop:,}\")print(f\"å¹´å¢é•¿ç‡: {growth_rate*100}%\")print()for year in years:    exp_pop = exponential_growth(initial_pop, growth_rate, year)    discrete_pop = discrete_growth(initial_pop, growth_rate, year)        print(f\"{year}å¹´å:\")    print(f\"  æŒ‡æ•°å¢é•¿æ¨¡å‹: {exp_pop:,.0f}\")    print(f\"  ç¦»æ•£å¢é•¿æ¨¡å‹: {discrete_pop:,.0f}\")    print(f\"  å·®å¼‚: {abs(exp_pop - discrete_pop):,.0f}\")    print()# 3. æ”¾å°„æ€§è¡°å˜print(\"3. æ”¾å°„æ€§è¡°å˜:\")def radioactive_decay(initial_amount, half_life, time):    \"\"\"æ”¾å°„æ€§è¡°å˜è®¡ç®—\"\"\"    # N(t) = N0 * (1/2)^(t/t_half)    # ç­‰ä»·äº N(t) = N0 * 2^(-t/t_half)    return initial_amount * pow(0.5, time / half_life)def decay_constant_formula(initial_amount, decay_constant, time):    \"\"\"ä½¿ç”¨è¡°å˜å¸¸æ•°çš„å…¬å¼\"\"\"    # N(t) = N0 * e^(-Î»t)    import math    return initial_amount * math.exp(-decay_constant * time)# æ”¾å°„æ€§è¡°å˜ç¤ºä¾‹elements = [    (\"ç¢³-14\", 5730, 1000),      # åŠè¡°æœŸ5730å¹´ï¼Œåˆå§‹é‡1000    (\"é“€-238\", 4.468e9, 1000),  # åŠè¡°æœŸ44.68äº¿å¹´    (\"æ°¡-222\", 3.8, 1000),      # åŠè¡°æœŸ3.8å¤©]for element, half_life, initial in elements:    print(f\"\\n{element} (åŠè¡°æœŸ: {half_life}):\")        # è®¡ç®—ä¸åŒæ—¶é—´ç‚¹çš„å‰©ä½™é‡    time_points = [half_life * i for i in [0.5, 1, 2, 3, 5]]        for t in time_points:        remaining = radioactive_decay(initial, half_life, t)        percentage = (remaining / initial) * 100                print(f\"  {t:.1f}æ—¶é—´å•ä½å: {remaining:.2f} ({percentage:.1f}%)\")# 4. åŒ–å­¦ååº”åŠ¨åŠ›å­¦print(\"\\n4. åŒ–å­¦ååº”åŠ¨åŠ›å­¦:\")def first_order_reaction(initial_concentration, rate_constant, time):    \"\"\"ä¸€çº§ååº”åŠ¨åŠ›å­¦\"\"\"    # [A] = [A]0 * e^(-kt)    import math    return initial_concentration * math.exp(-rate_constant * time)def nth_order_reaction(initial_concentration, rate_constant, time, order):    \"\"\"nçº§ååº”åŠ¨åŠ›å­¦ï¼ˆç®€åŒ–ï¼‰\"\"\"    if order == 1:        return first_order_reaction(initial_concentration, rate_constant, time)    else:        # ç®€åŒ–çš„nçº§ååº”å…¬å¼        return initial_concentration / pow(1 + (order-1) * rate_constant * initial_concentration**(order-1) * time, 1/(order-1))# ååº”åŠ¨åŠ›å­¦è®¡ç®—initial_conc = 1.0  # åˆå§‹æµ“åº¦ mol/Lrate_constant = 0.1  # é€Ÿç‡å¸¸æ•°times = [0, 5, 10, 20, 50]print(f\"åˆå§‹æµ“åº¦: {initial_conc} mol/L\")print(f\"é€Ÿç‡å¸¸æ•°: {rate_constant} sâ»Â¹\")print()for order in [1, 2]:    print(f\"{order}çº§ååº”:\")    for t in times:        if order == 1:            conc = first_order_reaction(initial_conc, rate_constant, t)        else:            conc = nth_order_reaction(initial_conc, rate_constant, t, order)                print(f\"  t={t}s: [{conc:.4f}] mol/L\")    print()# 5. ä¿¡å·å¤„ç†ä¸­çš„å¹‚è¿ç®—print(\"5. ä¿¡å·å¤„ç†åº”ç”¨:\")def signal_power(amplitude, time, frequency, phase=0):    \"\"\"ä¿¡å·åŠŸç‡è®¡ç®—\"\"\"    import math    # æ­£å¼¦ä¿¡å·: A * sin(2Ï€ft + Ï†)    signal_value = amplitude * math.sin(2 * math.pi * frequency * time + phase)    # åŠŸç‡ = ä¿¡å·å€¼çš„å¹³æ–¹    return pow(signal_value, 2)def rms_value(amplitude):    \"\"\"RMSå€¼è®¡ç®—\"\"\"    # æ­£å¼¦æ³¢çš„RMSå€¼ = å³°å€¼ / âˆš2    return amplitude / pow(2, 0.5)def db_conversion(power_ratio):    \"\"\"åŠŸç‡æ¯”è½¬æ¢ä¸ºåˆ†è´\"\"\"    import math    return 10 * math.log10(power_ratio)# ä¿¡å·å¤„ç†ç¤ºä¾‹amplitude = 5.0    # æŒ¯å¹…frequency = 50.0   # é¢‘ç‡ Hztime_points = [i * 0.001 for i in range(20)]  # æ—¶é—´ç‚¹print(f\"ä¿¡å·å‚æ•°: æŒ¯å¹…={amplitude}V, é¢‘ç‡={frequency}Hz\")print(f\"RMSå€¼: {rms_value(amplitude):.3f}V\")print()print(\"æ—¶é—´ç‚¹\\tä¿¡å·å€¼\\t\\tåŠŸç‡\")for t in time_points[:10]:  # åªæ˜¾ç¤ºå‰10ä¸ªç‚¹    signal_val = amplitude * pow(math.sin(2 * math.pi * frequency * t), 1)    power = signal_power(amplitude, t, frequency)    print(f\"{t:.3f}s\\t{signal_val:6.3f}V\\t\\t{power:.3f}W\")# åŠŸç‡æ¯”è¾ƒreference_power = 1.0signal_powers = [0.1, 1.0, 10.0, 100.0]print(f\"\\nåŠŸç‡æ¯”è¾ƒ (å‚è€ƒåŠŸç‡: {reference_power}W):\")for power in signal_powers:    ratio = power / reference_power    db_value = db_conversion(ratio)    print(f\"{power}W: {ratio}å€, {db_value:.1f}dB\")âš ï¸ æ³¨æ„äº‹é¡¹å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ# pow()å‡½æ•°çš„å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µprint(\"pow()å‡½æ•°å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ:\")# é™·é˜±1: pow() vs ** è¿ç®—ç¬¦çš„é€‰æ‹©print(\"\\né™·é˜±1: pow() vs ** è¿ç®—ç¬¦\")import time# åŸºæœ¬å¹‚è¿ç®—æ€§èƒ½å¯¹æ¯”base, exp = 2, 1000start = time.time()result1 = pow(base, exp)time1 = time.time() - startstart = time.time()result2 = base ** exptime2 = time.time() - startprint(f\"pow({base}, {exp}): {time1:.8f}ç§’\")print(f\"{base} ** {exp}: {time2:.8f}ç§’\")print(f\"ç»“æœä¸€è‡´: {result1 == result2}\")# æ¨¡å¹‚è¿ç®—çš„å·¨å¤§æ€§èƒ½å·®å¼‚print(\"\\næ¨¡å¹‚è¿ç®—æ€§èƒ½å·®å¼‚:\")large_base, large_exp, mod = 123456, 789012, 345678# pow()çš„ä¸‰å‚æ•°å½¢å¼ï¼ˆé«˜æ•ˆï¼‰start = time.time()efficient_result = pow(large_base, large_exp, mod)efficient_time = time.time() - startprint(f\"pow({large_base}, {large_exp}, {mod}): {efficient_time:.8f}ç§’\")print(f\"ç»“æœ: {efficient_result}\")# ä¼ ç»Ÿæ–¹æ³•ä¼šéå¸¸æ…¢ï¼Œè¿™é‡Œåªåšè¯´æ˜print(\"(base ** exp) % mod æ–¹æ³•å¯¹äºå¤§æ•°ä¼šæå…¶ç¼“æ…¢ï¼Œå·²è·³è¿‡\")print(\"\\næœ€ä½³å®è·µ:\")print(\"- å¯¹äºæ¨¡å¹‚è¿ç®—ï¼Œå§‹ç»ˆä½¿ç”¨pow(base, exp, mod)\")print(\"- å¯¹äºç®€å•å¹‚è¿ç®—ï¼Œpow()å’Œ**æ€§èƒ½ç›¸è¿‘\")print(\"- åœ¨å¯†ç å­¦åº”ç”¨ä¸­ï¼Œå¿…é¡»ä½¿ç”¨pow()çš„ä¸‰å‚æ•°å½¢å¼\")# é™·é˜±2: æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜print(\"\\né™·é˜±2: æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜\")# å¤§æŒ‡æ•°çš„æµ®ç‚¹æ•°è¿ç®—å¯èƒ½å¯¼è‡´ç²¾åº¦ä¸¢å¤±test_cases = [    (1.1, 100),    (0.9, 100),    (1.01, 1000),    (2.0, 0.5),  # å¼€æ–¹è¿ç®—]print(\"æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ç¤ºä¾‹:\")for base, exp in test_cases:    result = pow(base, exp)    print(f\"pow({base}, {exp}) = {result}\")        # å¯¹äºå¼€æ–¹ï¼ŒéªŒè¯ç»“æœ    if exp == 0.5:        verification = result * result        print(f\"  éªŒè¯: {result}Â² = {verification} (æœŸæœ›: {base})\")        print(f\"  è¯¯å·®: {abs(verification - base)}\")    print()print(\"è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨decimalæ¨¡å—è¿›è¡Œé«˜ç²¾åº¦è®¡ç®—\")from decimal import Decimal, getcontextgetcontext().prec = 50  # è®¾ç½®50ä½ç²¾åº¦decimal_base = Decimal('1.1')decimal_exp = 100decimal_result = decimal_base ** decimal_expprint(f\"Decimalè®¡ç®—: {decimal_base}^{decimal_exp} = {decimal_result}\")# é™·é˜±3: å¤æ•°å¹‚è¿ç®—çš„åˆ†æ”¯åˆ‡å‰²print(\"\\né™·é˜±3: å¤æ•°å¹‚è¿ç®—çš„åˆ†æ”¯åˆ‡å‰²\")# å¤æ•°å¹‚è¿ç®—å¯èƒ½æœ‰å¤šä¸ªå€¼complex_cases = [    (-1, 0.5),      # (-1)^(1/2) = i    (-8, 1/3),      # (-8)^(1/3) çš„ä¸»å€¼    (1j, 2),        # i^2 = -1    (1+1j, 1+1j),   # å¤æ•°åº•æ•°å’ŒæŒ‡æ•°]print(\"å¤æ•°å¹‚è¿ç®—:\")for base, exp in complex_cases:    result = pow(base, exp)    print(f\"pow({base}, {exp}) = {result}\")    print(f\"  æ¨¡é•¿: {abs(result):.6f}\")    print(f\"  å¹…è§’: {math.atan2(result.imag, result.real):.6f} å¼§åº¦\")    print()print(\"æ³¨æ„: Pythonè¿”å›ä¸»å€¼ï¼Œå¤æ•°å¹‚è¿ç®—å¯èƒ½æœ‰å¤šä¸ªæ•°å­¦ä¸Šæ­£ç¡®çš„å€¼\")# é™·é˜±4: æ•´æ•°æº¢å‡ºï¼ˆåœ¨å…¶ä»–è¯­è¨€ä¸­ï¼‰print(\"\\né™·é˜±4: å¤§æ•´æ•°å¤„ç†\")# Pythonè‡ªåŠ¨å¤„ç†å¤§æ•´æ•°ï¼Œä½†è¦æ³¨æ„æ€§èƒ½large_numbers = [    (2, 100),    (2, 1000),    (2, 10000),    (10, 100),]print(\"å¤§æ•´æ•°å¹‚è¿ç®—:\")for base, exp in large_numbers:    start = time.time()    result = pow(base, exp)    elapsed = time.time() - start        result_str = str(result)    if len(result_str) &gt; 50:        display_result = result_str[:20] + \"...\" + result_str[-20:]    else:        display_result = result_str        print(f\"pow({base}, {exp}): {display_result}\")    print(f\"  ä½æ•°: {len(result_str)}\")    print(f\"  è€—æ—¶: {elapsed:.6f}ç§’\")    print()# é™·é˜±5: æ¨¡è¿ç®—çš„å‚æ•°é™åˆ¶print(\"é™·é˜±5: æ¨¡è¿ç®—å‚æ•°é™åˆ¶\")# æ¨¡æ•°å¿…é¡»æ˜¯æ­£æ•´æ•°invalid_mod_cases = [    (2, 3, 0),      # æ¨¡æ•°ä¸º0    (2, 3, -5),     # è´Ÿæ¨¡æ•°    (2, 3, 3.5),    # æµ®ç‚¹æ¨¡æ•°]print(\"æ— æ•ˆçš„æ¨¡è¿ç®—å‚æ•°:\")for base, exp, mod in invalid_mod_cases:    try:        result = pow(base, exp, mod)        print(f\"pow({base}, {exp}, {mod}) = {result}\")    except Exception as e:        print(f\"pow({base}, {exp}, {mod}) é”™è¯¯: {type(e).__name__}: {e}\")# è´ŸæŒ‡æ•°çš„æ¨¡è¿ç®—éœ€è¦æ¨¡é€†å…ƒå­˜åœ¨print(\"\\nè´ŸæŒ‡æ•°æ¨¡è¿ç®—:\")negative_exp_cases = [    (2, -1, 7),     # 2^(-1) mod 7ï¼Œéœ€è¦2åœ¨æ¨¡7ä¸‹çš„é€†å…ƒ    (3, -2, 10),    # 3^(-2) mod 10ï¼Œéœ€è¦3åœ¨æ¨¡10ä¸‹çš„é€†å…ƒ    (2, -1, 4),     # 2^(-1) mod 4ï¼Œ2å’Œ4ä¸äº’è´¨ï¼Œæ— é€†å…ƒ]for base, exp, mod in negative_exp_cases:    try:        result = pow(base, exp, mod)        print(f\"pow({base}, {exp}, {mod}) = {result}\")                # éªŒè¯ç»“æœ        verification = (base * result) % mod        print(f\"  éªŒè¯: ({base} * {result}) mod {mod} = {verification}\")    except Exception as e:        print(f\"pow({base}, {exp}, {mod}) é”™è¯¯: {type(e).__name__}: {e}\")    print()# æœ€ä½³å®è·µæ€»ç»“print(\"æœ€ä½³å®è·µæ€»ç»“:\")print(\"1. æ¨¡å¹‚è¿ç®—å¿…é¡»ä½¿ç”¨pow(base, exp, mod)ï¼Œä¸è¦ç”¨(base**exp)%mod\")print(\"2. å¯¹äºé«˜ç²¾åº¦è®¡ç®—ï¼Œè€ƒè™‘ä½¿ç”¨decimalæ¨¡å—\")print(\"3. å¤æ•°å¹‚è¿ç®—è¦ç†è§£åˆ†æ”¯åˆ‡å‰²çš„æ¦‚å¿µ\")print(\"4. å¤§æ•´æ•°è¿ç®—è¦è€ƒè™‘æ€§èƒ½å½±å“\")print(\"5. æ¨¡è¿ç®—çš„æ¨¡æ•°å¿…é¡»æ˜¯æ­£æ•´æ•°\")print(\"6. è´ŸæŒ‡æ•°æ¨¡è¿ç®—è¦æ±‚åº•æ•°ä¸æ¨¡æ•°äº’è´¨\")print(\"7. åœ¨å¯†ç å­¦åº”ç”¨ä¸­ï¼Œè¦éªŒè¯å‚æ•°çš„æœ‰æ•ˆæ€§\")print(\"8. å¯¹äºç§‘å­¦è®¡ç®—ï¼Œè¦è€ƒè™‘æ•°å€¼ç¨³å®šæ€§\")ğŸ”§ æ€§èƒ½ä¼˜åŒ–pow() æ€§èƒ½ä¼˜åŒ–æŠ€å·§# pow() æ€§èƒ½ä¼˜åŒ–æŠ€å·§print(\"pow() æ€§èƒ½ä¼˜åŒ–æŠ€å·§:\")import timeimport random# 1. æ‰¹é‡æ¨¡å¹‚è¿ç®—ä¼˜åŒ–print(\"\\n1. æ‰¹é‡æ¨¡å¹‚è¿ç®—ä¼˜åŒ–:\")# ç”Ÿæˆæµ‹è¯•æ•°æ®random.seed(42)test_data = [(random.randint(1, 1000), random.randint(1, 1000), random.randint(1, 1000))              for _ in range(10000)]# æ–¹æ³•1: ç›´æ¥è®¡ç®—def batch_pow_direct(data):    return [pow(base, exp, mod) for base, exp, mod in data]# æ–¹æ³•2: é¢„å¤„ç†ç›¸åŒæ¨¡æ•°çš„æƒ…å†µdef batch_pow_grouped(data):    from collections import defaultdict        # æŒ‰æ¨¡æ•°åˆ†ç»„    grouped = defaultdict(list)    for i, (base, exp, mod) in enumerate(data):        grouped[mod].append((i, base, exp))        results = [0] * len(data)        # å¯¹æ¯ä¸ªæ¨¡æ•°ç»„è¿›è¡Œæ‰¹é‡è®¡ç®—    for mod, group in grouped.items():        for i, base, exp in group:            results[i] = pow(base, exp, mod)        return results# æ€§èƒ½æµ‹è¯•start = time.time()result1 = batch_pow_direct(test_data[:1000])time1 = time.time() - startstart = time.time()result2 = batch_pow_grouped(test_data[:1000])time2 = time.time() - startprint(f\"ç›´æ¥è®¡ç®—: {time1:.6f}ç§’\")print(f\"åˆ†ç»„è®¡ç®—: {time2:.6f}ç§’\")print(f\"ç»“æœä¸€è‡´: {result1 == result2}\")print(f\"æ€§èƒ½å·®å¼‚: {abs(time1 - time2):.6f}ç§’\")# 2. ç¼“å­˜ä¼˜åŒ–print(\"\\n2. ç¼“å­˜ä¼˜åŒ–:\")class PowCache:    \"\"\"å¹‚è¿ç®—ç¼“å­˜å™¨\"\"\"        def __init__(self, max_size=10000):        self.cache = {}        self.max_size = max_size        def pow_cached(self, base, exp, mod=None):        \"\"\"å¸¦ç¼“å­˜çš„å¹‚è¿ç®—\"\"\"        key = (base, exp, mod)                if key in self.cache:            return self.cache[key]                if mod is None:            result = pow(base, exp)        else:            result = pow(base, exp, mod)                # ç®€å•çš„ç¼“å­˜å¤§å°æ§åˆ¶        if len(self.cache) &lt; self.max_size:            self.cache[key] = result                return result        def clear_cache(self):        self.cache.clear()# åˆ›å»ºé‡å¤æ•°æ®è¿›è¡Œç¼“å­˜æµ‹è¯•repeated_data = [(random.randint(1, 100), random.randint(1, 50), random.randint(1, 100))                  for _ in range(100)] * 100random.shuffle(repeated_data)cache_pow = PowCache()# æ— ç¼“å­˜æµ‹è¯•start = time.time()no_cache_results = [pow(base, exp, mod) for base, exp, mod in repeated_data]no_cache_time = time.time() - start# æœ‰ç¼“å­˜æµ‹è¯•start = time.time()cache_results = [cache_pow.pow_cached(base, exp, mod) for base, exp, mod in repeated_data]cache_time = time.time() - startprint(f\"æ•°æ®é‡: {len(repeated_data)}\")print(f\"ç¼“å­˜å¤§å°: {len(cache_pow.cache)}\")print(f\"æ— ç¼“å­˜: {no_cache_time:.6f}ç§’\")print(f\"æœ‰ç¼“å­˜: {cache_time:.6f}ç§’\")print(f\"æ€§èƒ½æå‡: {(no_cache_time/cache_time):.2f}x\")print(f\"ç»“æœä¸€è‡´: {no_cache_results == cache_results}\")# 3. é¢„è®¡ç®—ä¼˜åŒ–print(\"\\n3. é¢„è®¡ç®—ä¼˜åŒ–:\")class PrecomputedPowers:    \"\"\"é¢„è®¡ç®—å¹‚æ¬¡è¡¨\"\"\"        def __init__(self, base, max_exp, mod=None):        self.base = base        self.mod = mod        self.powers = {}                # é¢„è®¡ç®—å¹‚æ¬¡è¡¨        current_power = 1        for exp in range(max_exp + 1):            if mod:                self.powers[exp] = current_power % mod                current_power = (current_power * base) % mod            else:                self.powers[exp] = current_power                current_power *= base        def get_power(self, exp):        \"\"\"è·å–é¢„è®¡ç®—çš„å¹‚\"\"\"        return self.powers.get(exp)        def compute_power(self, exp):        \"\"\"è®¡ç®—å¹‚ï¼ˆä½¿ç”¨é¢„è®¡ç®—è¡¨ä¼˜åŒ–ï¼‰\"\"\"        if exp in self.powers:            return self.powers[exp]                # å¦‚æœè¶…å‡ºé¢„è®¡ç®—èŒƒå›´ï¼Œä½¿ç”¨æ ‡å‡†æ–¹æ³•        if self.mod:            return pow(self.base, exp, self.mod)        else:            return pow(self.base, exp)# é¢„è®¡ç®—æµ‹è¯•base, mod = 3, 1000max_precompute = 100precomputed = PrecomputedPowers(base, max_precompute, mod)# æµ‹è¯•æŒ‡æ•°åˆ—è¡¨test_exponents = [random.randint(0, max_precompute) for _ in range(1000)]# æ ‡å‡†è®¡ç®—start = time.time()standard_results = [pow(base, exp, mod) for exp in test_exponents]standard_time = time.time() - start# é¢„è®¡ç®—æ–¹æ³•start = time.time()precomputed_results = [precomputed.get_power(exp) for exp in test_exponents]precomputed_time = time.time() - startprint(f\"åº•æ•°: {base}, æ¨¡æ•°: {mod}\")print(f\"é¢„è®¡ç®—èŒƒå›´: 0-{max_precompute}\")print(f\"æµ‹è¯•æ¬¡æ•°: {len(test_exponents)}\")print(f\"æ ‡å‡†è®¡ç®—: {standard_time:.6f}ç§’\")print(f\"é¢„è®¡ç®—: {precomputed_time:.6f}ç§’\")print(f\"æ€§èƒ½æå‡: {(standard_time/precomputed_time):.2f}x\")print(f\"ç»“æœä¸€è‡´: {standard_results == precomputed_results}\")# 4. äºŒè¿›åˆ¶æŒ‡æ•°ä¼˜åŒ–print(\"\\n4. äºŒè¿›åˆ¶æŒ‡æ•°ä¼˜åŒ–:\")def optimized_pow_mod(base, exp, mod):    \"\"\"ä¼˜åŒ–çš„æ¨¡å¹‚è¿ç®—\"\"\"    if mod == 1:        return 0        result = 1    base = base % mod        while exp &gt; 0:        # å¦‚æœæŒ‡æ•°çš„æœ€ä½ä½æ˜¯1        if exp &amp; 1:            result = (result * base) % mod                # æŒ‡æ•°å³ç§»ä¸€ä½ï¼Œåº•æ•°å¹³æ–¹        exp &gt;&gt;= 1        base = (base * base) % mod        return result# æµ‹è¯•äºŒè¿›åˆ¶æŒ‡æ•°ä¼˜åŒ–large_cases = [    (123, 456789, 1000),    (789, 123456, 10000),    (456, 789012, 100000),]print(\"äºŒè¿›åˆ¶æŒ‡æ•°ä¼˜åŒ–æµ‹è¯•:\")for base, exp, mod in large_cases:    # å†…ç½®powå‡½æ•°    start = time.time()    builtin_result = pow(base, exp, mod)    builtin_time = time.time() - start        # ä¼˜åŒ–å®ç°    start = time.time()    optimized_result = optimized_pow_mod(base, exp, mod)    optimized_time = time.time() - start        print(f\"\\npow({base}, {exp}, {mod}):\")    print(f\"  å†…ç½®å‡½æ•°: {builtin_result} ({builtin_time:.8f}ç§’)\")    print(f\"  ä¼˜åŒ–å®ç°: {optimized_result} ({optimized_time:.8f}ç§’)\")    print(f\"  ç»“æœä¸€è‡´: {builtin_result == optimized_result}\")    print(f\"  æ€§èƒ½æ¯”è¾ƒ: {optimized_time/builtin_time:.2f}x\")# 5. å¹¶è¡Œè®¡ç®—ä¼˜åŒ–print(\"\\n5. å¹¶è¡Œè®¡ç®—ä¼˜åŒ–:\")try:    from concurrent.futures import ThreadPoolExecutor, ProcessPoolExecutor    import multiprocessing        def compute_pow_batch(args):        \"\"\"æ‰¹é‡è®¡ç®—å¹‚è¿ç®—\"\"\"        return [pow(base, exp, mod) for base, exp, mod in args]        # ç”Ÿæˆå¤§é‡æµ‹è¯•æ•°æ®    large_test_data = [(random.randint(1, 1000), random.randint(1, 1000), random.randint(1, 1000))                        for _ in range(10000)]        # ä¸²è¡Œè®¡ç®—    start = time.time()    serial_results = [pow(base, exp, mod) for base, exp, mod in large_test_data]    serial_time = time.time() - start        # å¹¶è¡Œè®¡ç®—ï¼ˆçº¿ç¨‹æ± ï¼‰    chunk_size = len(large_test_data) // 4    chunks = [large_test_data[i:i+chunk_size] for i in range(0, len(large_test_data), chunk_size)]        start = time.time()    with ThreadPoolExecutor(max_workers=4) as executor:        parallel_results = []        futures = [executor.submit(compute_pow_batch, chunk) for chunk in chunks]        for future in futures:            parallel_results.extend(future.result())    parallel_time = time.time() - start        print(f\"æ•°æ®é‡: {len(large_test_data)}\")    print(f\"ä¸²è¡Œè®¡ç®—: {serial_time:.6f}ç§’\")    print(f\"å¹¶è¡Œè®¡ç®—: {parallel_time:.6f}ç§’\")    print(f\"æ€§èƒ½æå‡: {(serial_time/parallel_time):.2f}x\")    print(f\"ç»“æœä¸€è‡´: {serial_results == parallel_results}\")    except ImportError:    print(\"å¹¶å‘æ¨¡å—ä¸å¯ç”¨ï¼Œè·³è¿‡å¹¶è¡Œè®¡ç®—æµ‹è¯•\")print(\"\\næ€§èƒ½ä¼˜åŒ–æ€»ç»“:\")print(\"1. å¯¹äºé‡å¤è®¡ç®—ï¼Œä½¿ç”¨ç¼“å­˜å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½\")print(\"2. é¢„è®¡ç®—å¸¸ç”¨çš„å¹‚æ¬¡è¡¨é€‚ç”¨äºå›ºå®šåº•æ•°çš„åœºæ™¯\")print(\"3. Pythonçš„å†…ç½®pow()å·²ç»é«˜åº¦ä¼˜åŒ–ï¼Œè‡ªå®šä¹‰å®ç°é€šå¸¸ä¸ä¼šæ›´å¿«\")print(\"4. å¯¹äºå¤§é‡ç‹¬ç«‹è®¡ç®—ï¼Œå¯ä»¥è€ƒè™‘å¹¶è¡Œå¤„ç†\")print(\"5. åˆ†ç»„å¤„ç†ç›¸åŒæ¨¡æ•°çš„è®¡ç®—å¯èƒ½å¸¦æ¥å°å¹…ä¼˜åŒ–\")print(\"6. åœ¨å¯†ç å­¦åº”ç”¨ä¸­ï¼Œè¦å¹³è¡¡æ€§èƒ½å’Œå®‰å…¨æ€§\")ğŸ“š ç›¸å…³å‡½æ•°å’Œæ¨¡å—ç›¸å…³å†…ç½®å‡½æ•°  abs() - ç»å¯¹å€¼å‡½æ•°  round() - æ•°å­—å››èˆäº”å…¥å‡½æ•°  int() - æ•´æ•°è½¬æ¢å‡½æ•°  float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•°  divmod() - é™¤æ³•å’Œå–æ¨¡è¿ç®—ç›¸å…³æ ‡å‡†åº“æ¨¡å—  math - æ•°å­¦å‡½æ•°ï¼ˆåŒ…æ‹¬sqrt, log, expç­‰ï¼‰  decimal - åè¿›åˆ¶æµ®ç‚¹è¿ç®—  fractions - åˆ†æ•°è¿ç®—  cmath - å¤æ•°æ•°å­¦å‡½æ•°  random - éšæœºæ•°ç”Ÿæˆ  secrets - å¯†ç å­¦å®‰å…¨çš„éšæœºæ•°ç›¸å…³ç¬¬ä¸‰æ–¹åº“  numpy - æ•°å€¼è®¡ç®—ï¼ˆåŒ…æ‹¬é«˜æ•ˆçš„å¹‚è¿ç®—ï¼‰  sympy - ç¬¦å·æ•°å­¦è®¡ç®—  cryptography - å¯†ç å­¦åº“  gmpy2 - é«˜æ€§èƒ½å¤šç²¾åº¦è¿ç®—ğŸ”— æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - pow()  å¿«é€Ÿå¹‚ç®—æ³•  æ¨¡å¹‚è¿ç®—  RSAåŠ å¯†ç®—æ³•  è´¹é©¬å°å®šç†  æ¬§æ‹‰å®šç†ğŸ·ï¸ æ ‡ç­¾æ•°å­¦è¿ç®— å¹‚è¿ç®— æŒ‡æ•° æ¨¡è¿ç®— å¯†ç å­¦ å¿«é€Ÿå¹‚ å¤§æ•°è¿ç®—æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/pow/",
        "category": "builtins",
        "tags": ["æ•°å­¦è¿ç®—","å¹‚è¿ç®—","æŒ‡æ•°","æ¨¡è¿ç®—"]
      }
      
    
  
    
      ,
      {
        "title": "print() - è¾“å‡ºå‡½æ•°",
        "content": "print() - è¾“å‡ºå‡½æ•°ğŸ“ æ¦‚è¿°print() æ˜¯Pythonä¸­æœ€å¸¸ç”¨çš„å†…ç½®å‡½æ•°ä¹‹ä¸€ï¼Œç”¨äºå°†å¯¹è±¡æ‰“å°åˆ°æ–‡æœ¬æµæ–‡ä»¶ï¼Œé€šå¸¸æ˜¯æ ‡å‡†è¾“å‡ºï¼ˆæ§åˆ¶å°ï¼‰ã€‚å®ƒæ”¯æŒå¤šç§å‚æ•°å’Œæ ¼å¼åŒ–é€‰é¡¹ï¼Œæ˜¯è°ƒè¯•å’Œè¾“å‡ºä¿¡æ¯çš„é‡è¦å·¥å…·ã€‚1ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡print()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£print()å‡½æ•°çš„å„ç§å‚æ•°  å­¦ä¼šä½¿ç”¨print()è¿›è¡Œæ ¼å¼åŒ–è¾“å‡º  äº†è§£è¾“å‡ºé‡å®šå‘çš„æ–¹æ³•ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  å­—ç¬¦ä¸²çš„åŸºæœ¬æ¦‚å¿µ  æ–‡ä»¶æ“ä½œåŸºç¡€ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µprint() å‡½æ•°å°†ç»™å®šçš„å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆå¦‚æœå®ƒä»¬è¿˜ä¸æ˜¯å­—ç¬¦ä¸²çš„è¯ï¼‰ï¼Œå¹¶å°†å®ƒä»¬å†™å…¥åˆ°æŒ‡å®šçš„æ–‡æœ¬æµï¼Œé»˜è®¤ä¸º sys.stdoutã€‚è¯­æ³•æ ¼å¼print(*objects, sep=' ', end='\\n', file=sys.stdout, flush=False)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  *objects      any      å¦      æ—       è¦æ‰“å°çš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯å¤šä¸ª              sep      str      å¦      â€™ â€˜      å¤šä¸ªå¯¹è±¡ä¹‹é—´çš„åˆ†éš”ç¬¦              end      str      å¦      â€˜\\nâ€™      æ‰“å°ç»“æŸåæ·»åŠ çš„å­—ç¬¦              file      file-like      å¦      sys.stdout      è¾“å‡ºçš„æ–‡ä»¶å¯¹è±¡              flush      bool      å¦      False      æ˜¯å¦å¼ºåˆ¶åˆ·æ–°è¾“å‡ºç¼“å†²åŒº      è¿”å›å€¼            ç±»å‹      è¯´æ˜                  None      å‡½æ•°ä¸è¿”å›ä»»ä½•å€¼      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# åŸºæœ¬è¾“å‡ºprint(\"Hello, World!\")# è¾“å‡º: Hello, World!# è¾“å‡ºå¤šä¸ªå¯¹è±¡print(\"å§“å:\", \"å¼ ä¸‰\", \"å¹´é¾„:\", 25)# è¾“å‡º: å§“å: å¼ ä¸‰ å¹´é¾„: 25# è¾“å‡ºå˜é‡name = \"æå››\"age = 30print(\"å§“å:\", name, \"å¹´é¾„:\", age)# è¾“å‡º: å§“å: æå›› å¹´é¾„: 30é«˜çº§ç”¨æ³•# è‡ªå®šä¹‰åˆ†éš”ç¬¦print(\"è‹¹æœ\", \"é¦™è•‰\", \"æ©™å­\", sep=\"-\")# è¾“å‡º: è‹¹æœ-é¦™è•‰-æ©™å­# è‡ªå®šä¹‰ç»“æŸç¬¦print(\"ç¬¬ä¸€è¡Œ\", end=\"\")print(\"ç¬¬äºŒè¡Œ\")# è¾“å‡º: ç¬¬ä¸€è¡Œç¬¬äºŒè¡Œ# è¾“å‡ºåˆ°æ–‡ä»¶with open(\"output.txt\", \"w\", encoding=\"utf-8\") as f:    print(\"è¿™æ˜¯å†™å…¥æ–‡ä»¶çš„å†…å®¹\", file=f)# å¼ºåˆ¶åˆ·æ–°ç¼“å†²åŒºimport timefor i in range(5):    print(f\"è®¡æ•°: {i}\", flush=True)    time.sleep(1)  # ç«‹å³æ˜¾ç¤ºï¼Œä¸ç­‰å¾…ç¼“å†²åŒºæ»¡å®é™…æ¡ˆä¾‹# æ ¼å¼åŒ–è¾“å‡ºå­¦ç”Ÿä¿¡æ¯def print_student_info(students):    \"\"\"æ‰“å°å­¦ç”Ÿä¿¡æ¯è¡¨\"\"\"    print(\"å­¦ç”Ÿä¿¡æ¯è¡¨\")    print(\"=\" * 30)    print(\"å§“å\\tå¹´é¾„\\tæˆç»©\")    print(\"-\" * 30)        for student in students:        print(f\"{student['name']}\\t{student['age']}\\t{student['score']}\")        print(\"=\" * 30)# ä½¿ç”¨ç¤ºä¾‹students = [    {\"name\": \"å¼ ä¸‰\", \"age\": 20, \"score\": 85},    {\"name\": \"æå››\", \"age\": 21, \"score\": 92},    {\"name\": \"ç‹äº”\", \"age\": 19, \"score\": 78}]print_student_info(students)âš ï¸ æ³¨æ„äº‹é¡¹  print() å‡½æ•°ä¼šè‡ªåŠ¨åœ¨è¾“å‡ºæœ«å°¾æ·»åŠ æ¢è¡Œç¬¦ï¼Œå¯ä»¥é€šè¿‡ end å‚æ•°ä¿®æ”¹  å½“è¾“å‡ºå¤§é‡æ•°æ®æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨ flush=True ç¡®ä¿åŠæ—¶æ˜¾ç¤º  è¾“å‡ºåˆ°æ–‡ä»¶æ—¶ï¼Œè®°å¾—æ­£ç¡®å¤„ç†æ–‡ä»¶ç¼–ç   åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé¿å…ä½¿ç”¨ print() è¿›è¡Œæ—¥å¿—è®°å½•ï¼Œåº”ä½¿ç”¨ä¸“é—¨çš„æ—¥å¿—æ¨¡å—ğŸ”— ç›¸å…³å†…å®¹  input() - è¾“å…¥å‡½æ•°  format() - æ ¼å¼åŒ–å‡½æ•°  f-string - æ ¼å¼åŒ–å­—ç¬¦ä¸²ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - print()  Pythonè¾“å…¥è¾“å‡ºæ•™ç¨‹ğŸ·ï¸ æ ‡ç­¾è¾“å‡º æ ¼å¼åŒ– è°ƒè¯• æ§åˆ¶å° æ–‡ä»¶è¾“å‡ºæœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/print/",
        "category": "builtins",
        "tags": ["è¾“å‡º","æ ¼å¼åŒ–","è°ƒè¯•"]
      }
      
    
  
    
      ,
      {
        "title": "raiseã€assertå…³é”®å­—",
        "content": "raiseã€assertå…³é”®å­—æ¦‚è¿°raise å’Œ assert æ˜¯ Python ä¸­ç”¨äºå¼‚å¸¸å¤„ç†å’Œç¨‹åºè°ƒè¯•çš„ä¸¤ä¸ªé‡è¦å…³é”®å­—ã€‚raise ç”¨äºä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œ assert ç”¨äºåœ¨å¼€å‘é˜¶æ®µè¿›è¡Œæ¡ä»¶æ–­è¨€ï¼Œå¸®åŠ©å‘ç°ç¨‹åºä¸­çš„é€»è¾‘é”™è¯¯ã€‚å­¦ä¹ ç›®æ ‡é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†æŒæ¡ï¼š  raise è¯­å¥çš„è¯­æ³•å’Œä½¿ç”¨æ–¹æ³•  assert è¯­å¥çš„è¯­æ³•å’Œä½¿ç”¨åœºæ™¯  æ ‡å‡†å¼‚å¸¸ç±»å‹å’Œè‡ªå®šä¹‰å¼‚å¸¸  å¼‚å¸¸å¤„ç†çš„æœ€ä½³å®è·µ  æ–­è¨€åœ¨è°ƒè¯•å’Œæµ‹è¯•ä¸­çš„åº”ç”¨å‰ç½®çŸ¥è¯†  Python åŸºç¡€è¯­æ³•  å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼ˆtry-except-finallyï¼‰  ç±»å’Œå¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µè¯¦ç»†å†…å®¹raise è¯­å¥åŸºæœ¬è¯­æ³•raise [exception [, args [, traceback]]]å…¶ä¸­ï¼š  exception æ˜¯å¼‚å¸¸çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯å¼‚å¸¸ç±»çš„å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼‚å¸¸ç±»  args æ˜¯å¼‚å¸¸çš„å‚æ•°ï¼Œå¯ä»¥æ˜¯å…ƒç»„æˆ–å­—ç¬¦ä¸²  traceback æ˜¯å¼‚å¸¸çš„è¿½è¸ªä¿¡æ¯ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰åŸºæœ¬ä½¿ç”¨# æŠ›å‡ºæ ‡å‡†å¼‚å¸¸def divide(a, b):    if b == 0:        raise ValueError(\"é™¤æ•°ä¸èƒ½ä¸ºé›¶\")    return a / btry:    result = divide(10, 0)except ValueError as e:    print(f\"æ•è·åˆ°å¼‚å¸¸: {e}\")é‡æ–°æŠ›å‡ºå¼‚å¸¸def process_data(data):    try:        # ä¸€äº›å¯èƒ½å¼•å‘å¼‚å¸¸çš„ä»£ç         result = 1 / data        return result    except ZeroDivisionError as e:        # è®°å½•å¼‚å¸¸å¹¶é‡æ–°å¼•å‘        print(f\"å¤„ç†æ•°æ®æ—¶å‘ç”Ÿé”™è¯¯: {e}\")        raise  # é‡æ–°æŠ›å‡ºå½“å‰å¼‚å¸¸    except Exception as e:        # å¤„ç†å…¶ä»–ç±»å‹çš„å¼‚å¸¸        print(f\"æœªé¢„æœŸçš„é”™è¯¯: {e}\")        raise  # é‡æ–°æŠ›å‡ºå¼‚å¸¸try:    process_data(0)except ZeroDivisionError:    print(\"åœ¨ä¸Šå±‚å¤„ç†é™¤é›¶é”™è¯¯\")å¼‚å¸¸é“¾def convert_to_int(value):    try:        return int(value)    except ValueError as e:        # ä½¿ç”¨ raise...from åˆ›å»ºå¼‚å¸¸é“¾        raise TypeError(f\"æ— æ³•å°† '{value}' è½¬æ¢ä¸ºæ•´æ•°\") from etry:    convert_to_int(\"abc\")except TypeError as e:    print(f\"å¼‚å¸¸: {e}\")    print(f\"åŸå› : {e.__cause__}\")æ ‡å‡†å¼‚å¸¸ç±»å‹å¸¸è§å†…ç½®å¼‚å¸¸# ValueError - å€¼é”™è¯¯def validate_age(age):    if age &lt; 0 or age &gt; 150:        raise ValueError(f\"å¹´é¾„å¿…é¡»åœ¨ 0-150 ä¹‹é—´ï¼Œå¾—åˆ°: {age}\")    return age# TypeError - ç±»å‹é”™è¯¯def add_numbers(a, b):    if not isinstance(a, (int, float)) or not isinstance(b, (int, float)):        raise TypeError(\"å‚æ•°å¿…é¡»æ˜¯æ•°å­—ç±»å‹\")    return a + b# IndexError - ç´¢å¼•é”™è¯¯def get_item(items, index):    if index &gt;= len(items) or index &lt; -len(items):        raise IndexError(f\"ç´¢å¼• {index} è¶…å‡ºèŒƒå›´ [0, {len(items)-1}]\")    return items[index]# KeyError - é”®é”™è¯¯def get_config_value(config, key):    if key not in config:        raise KeyError(f\"é…ç½®é¡¹ '{key}' ä¸å­˜åœ¨\")    return config[key]# ä½¿ç”¨ç¤ºä¾‹try:    validate_age(-5)except ValueError as e:    print(f\"å¹´é¾„éªŒè¯å¤±è´¥: {e}\")try:    add_numbers(\"hello\", 5)except TypeError as e:    print(f\"ç±»å‹é”™è¯¯: {e}\")è‡ªå®šä¹‰å¼‚å¸¸åŸºæœ¬è‡ªå®šä¹‰å¼‚å¸¸class CustomError(Exception):    \"\"\"è‡ªå®šä¹‰å¼‚å¸¸åŸºç±»\"\"\"    passclass ValidationError(CustomError):    \"\"\"æ•°æ®éªŒè¯å¼‚å¸¸\"\"\"    def __init__(self, message, field=None):        super().__init__(message)        self.field = fieldclass BusinessLogicError(CustomError):    \"\"\"ä¸šåŠ¡é€»è¾‘å¼‚å¸¸\"\"\"    def __init__(self, message, error_code=None):        super().__init__(message)        self.error_code = error_code# ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸def validate_user_data(user_data):    if 'name' not in user_data:        raise ValidationError(\"ç”¨æˆ·åä¸èƒ½ä¸ºç©º\", field='name')        if 'email' not in user_data:        raise ValidationError(\"é‚®ç®±ä¸èƒ½ä¸ºç©º\", field='email')        if '@' not in user_data['email']:        raise ValidationError(\"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®\", field='email')def process_order(order):    if order['amount'] &lt;= 0:        raise BusinessLogicError(\"è®¢å•é‡‘é¢å¿…é¡»å¤§äº0\", error_code='INVALID_AMOUNT')        if order['status'] != 'pending':        raise BusinessLogicError(\"åªèƒ½å¤„ç†å¾…å¤„ç†çŠ¶æ€çš„è®¢å•\", error_code='INVALID_STATUS')# å¼‚å¸¸å¤„ç†ç¤ºä¾‹try:    validate_user_data({'name': 'Alice'})except ValidationError as e:    print(f\"éªŒè¯é”™è¯¯: {e}, å­—æ®µ: {e.field}\")try:    process_order({'amount': -100, 'status': 'completed'})except BusinessLogicError as e:    print(f\"ä¸šåŠ¡é€»è¾‘é”™è¯¯: {e}, é”™è¯¯ç : {e.error_code}\")å¼‚å¸¸å±‚æ¬¡ç»“æ„class APIError(Exception):    \"\"\"API å¼‚å¸¸åŸºç±»\"\"\"    def __init__(self, message, status_code=500):        super().__init__(message)        self.status_code = status_codeclass ClientError(APIError):    \"\"\"å®¢æˆ·ç«¯é”™è¯¯ (4xx)\"\"\"    def __init__(self, message, status_code=400):        super().__init__(message, status_code)class ServerError(APIError):    \"\"\"æœåŠ¡å™¨é”™è¯¯ (5xx)\"\"\"    def __init__(self, message, status_code=500):        super().__init__(message, status_code)class NotFoundError(ClientError):    \"\"\"èµ„æºæœªæ‰¾åˆ°é”™è¯¯\"\"\"    def __init__(self, resource):        super().__init__(f\"èµ„æº '{resource}' æœªæ‰¾åˆ°\", 404)        self.resource = resourceclass UnauthorizedError(ClientError):    \"\"\"æœªæˆæƒé”™è¯¯\"\"\"    def __init__(self, message=\"æœªæˆæƒè®¿é—®\"):        super().__init__(message, 401)# ä½¿ç”¨å¼‚å¸¸å±‚æ¬¡ç»“æ„def api_handler(request):    try:        if not request.get('auth_token'):            raise UnauthorizedError()                resource_id = request.get('resource_id')        if not resource_id:            raise NotFoundError('resource')                # æ¨¡æ‹Ÿå¤„ç†é€»è¾‘        return {'status': 'success'}        except ClientError as e:        return {'error': str(e), 'status_code': e.status_code}    except ServerError as e:        return {'error': 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯', 'status_code': e.status_code}    except Exception as e:        return {'error': 'æœªçŸ¥é”™è¯¯', 'status_code': 500}# æµ‹è¯•result = api_handler({'resource_id': None})print(result)  # {'error': \"èµ„æº 'resource' æœªæ‰¾åˆ°\", 'status_code': 404}assert è¯­å¥åŸºæœ¬è¯­æ³•assert expression [, message]ç­‰ä»·äºï¼šif not expression:    raise AssertionError(message)åŸºæœ¬ä½¿ç”¨def calculate_average(numbers):    assert len(numbers) &gt; 0, \"æ•°å­—åˆ—è¡¨ä¸èƒ½ä¸ºç©º\"    assert all(isinstance(n, (int, float)) for n in numbers), \"æ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯æ•°å­—\"        return sum(numbers) / len(numbers)# æ­£å¸¸ä½¿ç”¨result = calculate_average([1, 2, 3, 4, 5])print(f\"å¹³å‡å€¼: {result}\")# è§¦å‘æ–­è¨€try:    calculate_average([])except AssertionError as e:    print(f\"æ–­è¨€å¤±è´¥: {e}\")try:    calculate_average([1, 2, \"3\", 4])except AssertionError as e:    print(f\"æ–­è¨€å¤±è´¥: {e}\")è°ƒè¯•æ¨¡å¼å’Œä¼˜åŒ–æ¨¡å¼# æ£€æŸ¥å½“å‰æ˜¯å¦ä¸ºè°ƒè¯•æ¨¡å¼print(f\"è°ƒè¯•æ¨¡å¼: {__debug__}\")def debug_function(x):    assert x &gt; 0, \"x å¿…é¡»æ˜¯æ­£æ•°\"        if __debug__:        print(f\"è°ƒè¯•ä¿¡æ¯: å¤„ç†å€¼ {x}\")        return x * 2# åœ¨è°ƒè¯•æ¨¡å¼ä¸‹è¿è¡Œresult = debug_function(5)print(f\"ç»“æœ: {result}\")# æ³¨æ„ï¼šä½¿ç”¨ python -O script.py è¿è¡Œæ—¶ï¼Œæ–­è¨€ä¼šè¢«ç¦ç”¨æ–­è¨€çš„æœ€ä½³å®è·µclass BankAccount:    def __init__(self, initial_balance=0):        assert initial_balance &gt;= 0, \"åˆå§‹ä½™é¢ä¸èƒ½ä¸ºè´Ÿæ•°\"        self._balance = initial_balance        def deposit(self, amount):        assert amount &gt; 0, \"å­˜æ¬¾é‡‘é¢å¿…é¡»å¤§äº0\"        self._balance += amount                # åç½®æ¡ä»¶æ–­è¨€        assert self._balance &gt;= amount, \"ä½™é¢æ›´æ–°é”™è¯¯\"        def withdraw(self, amount):        # å‰ç½®æ¡ä»¶æ–­è¨€        assert amount &gt; 0, \"å–æ¬¾é‡‘é¢å¿…é¡»å¤§äº0\"        assert amount &lt;= self._balance, \"ä½™é¢ä¸è¶³\"                old_balance = self._balance        self._balance -= amount                # åç½®æ¡ä»¶æ–­è¨€        assert self._balance == old_balance - amount, \"ä½™é¢è®¡ç®—é”™è¯¯\"        assert self._balance &gt;= 0, \"ä½™é¢ä¸èƒ½ä¸ºè´Ÿæ•°\"        @property    def balance(self):        # ä¸å˜é‡æ–­è¨€        assert self._balance &gt;= 0, \"ä½™é¢ä¸èƒ½ä¸ºè´Ÿæ•°\"        return self._balance# ä½¿ç”¨ç¤ºä¾‹account = BankAccount(100)account.deposit(50)print(f\"å­˜æ¬¾åä½™é¢: {account.balance}\")account.withdraw(30)print(f\"å–æ¬¾åä½™é¢: {account.balance}\")# è§¦å‘æ–­è¨€try:    account.withdraw(200)  # ä½™é¢ä¸è¶³except AssertionError as e:    print(f\"æ–­è¨€å¤±è´¥: {e}\")å®é™…åº”ç”¨åœºæ™¯1. è¾“å…¥éªŒè¯class UserValidator:    @staticmethod    def validate_email(email):        if not isinstance(email, str):            raise TypeError(\"é‚®ç®±å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹\")                if '@' not in email:            raise ValueError(\"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®ï¼šç¼ºå°‘ @ ç¬¦å·\")                if email.count('@') != 1:            raise ValueError(\"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®ï¼š@ ç¬¦å·æ•°é‡é”™è¯¯\")                local, domain = email.split('@')        if not local or not domain:            raise ValueError(\"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®ï¼šæœ¬åœ°éƒ¨åˆ†æˆ–åŸŸåéƒ¨åˆ†ä¸ºç©º\")                return True        @staticmethod    def validate_password(password):        if not isinstance(password, str):            raise TypeError(\"å¯†ç å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹\")                if len(password) &lt; 8:            raise ValueError(\"å¯†ç é•¿åº¦è‡³å°‘ä¸º8ä½\")                if not any(c.isupper() for c in password):            raise ValueError(\"å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯\")                if not any(c.islower() for c in password):            raise ValueError(\"å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯\")                if not any(c.isdigit() for c in password):            raise ValueError(\"å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªæ•°å­—\")                return True# ä½¿ç”¨éªŒè¯å™¨def register_user(email, password):    try:        UserValidator.validate_email(email)        UserValidator.validate_password(password)        print(f\"ç”¨æˆ·æ³¨å†ŒæˆåŠŸ: {email}\")        return True    except (TypeError, ValueError) as e:        print(f\"æ³¨å†Œå¤±è´¥: {e}\")        return False# æµ‹è¯•register_user(\"user@example.com\", \"Password123\")register_user(\"invalid-email\", \"weak\")2. é…ç½®éªŒè¯class ConfigurationError(Exception):    \"\"\"é…ç½®é”™è¯¯å¼‚å¸¸\"\"\"    passclass ConfigValidator:    @staticmethod    def validate_database_config(config):        required_keys = ['host', 'port', 'database', 'username']                for key in required_keys:            if key not in config:                raise ConfigurationError(f\"ç¼ºå°‘å¿…éœ€çš„é…ç½®é¡¹: {key}\")                # éªŒè¯ç«¯å£å·        port = config['port']        if not isinstance(port, int) or port &lt;= 0 or port &gt; 65535:            raise ConfigurationError(f\"ç«¯å£å·æ— æ•ˆ: {port}\")                # éªŒè¯ä¸»æœºå        host = config['host']        if not isinstance(host, str) or not host.strip():            raise ConfigurationError(\"ä¸»æœºåä¸èƒ½ä¸ºç©º\")                return True        @staticmethod    def validate_api_config(config):        assert 'base_url' in config, \"API é…ç½®å¿…é¡»åŒ…å« base_url\"        assert 'timeout' in config, \"API é…ç½®å¿…é¡»åŒ…å« timeout\"                timeout = config['timeout']        assert isinstance(timeout, (int, float)), \"timeout å¿…é¡»æ˜¯æ•°å­—\"        assert timeout &gt; 0, \"timeout å¿…é¡»å¤§äº 0\"                base_url = config['base_url']        assert isinstance(base_url, str), \"base_url å¿…é¡»æ˜¯å­—ç¬¦ä¸²\"        assert base_url.startswith(('http://', 'https://')), \"base_url å¿…é¡»ä»¥ http:// æˆ– https:// å¼€å¤´\"# ä½¿ç”¨é…ç½®éªŒè¯def load_config(config_data):    try:        if 'database' in config_data:            ConfigValidator.validate_database_config(config_data['database'])                if 'api' in config_data:            ConfigValidator.validate_api_config(config_data['api'])                print(\"é…ç½®éªŒè¯é€šè¿‡\")        return config_data        except (ConfigurationError, AssertionError) as e:        print(f\"é…ç½®éªŒè¯å¤±è´¥: {e}\")        raise# æµ‹è¯•é…ç½®valid_config = {    'database': {        'host': 'localhost',        'port': 5432,        'database': 'mydb',        'username': 'user'    },    'api': {        'base_url': 'https://api.example.com',        'timeout': 30    }}load_config(valid_config)3. å•å…ƒæµ‹è¯•ä¸­çš„æ–­è¨€class TestCalculator:    def __init__(self):        self.test_count = 0        self.passed_count = 0        def assert_equal(self, actual, expected, message=\"\"):        self.test_count += 1        try:            assert actual == expected, f\"æœŸæœ› {expected}ï¼Œå®é™… {actual}. {message}\"            self.passed_count += 1            print(f\"âœ“ æµ‹è¯•é€šè¿‡: {message or 'å€¼ç›¸ç­‰'}\")        except AssertionError as e:            print(f\"âœ— æµ‹è¯•å¤±è´¥: {e}\")            raise        def assert_raises(self, exception_type, func, *args, **kwargs):        self.test_count += 1        try:            func(*args, **kwargs)            print(f\"âœ— æµ‹è¯•å¤±è´¥: æœŸæœ›æŠ›å‡º {exception_type.__name__} å¼‚å¸¸\")            assert False, f\"æœŸæœ›æŠ›å‡º {exception_type.__name__} å¼‚å¸¸ï¼Œä½†æ²¡æœ‰å¼‚å¸¸è¢«æŠ›å‡º\"        except exception_type:            self.passed_count += 1            print(f\"âœ“ æµ‹è¯•é€šè¿‡: æ­£ç¡®æŠ›å‡º {exception_type.__name__} å¼‚å¸¸\")        except Exception as e:            print(f\"âœ— æµ‹è¯•å¤±è´¥: æœŸæœ› {exception_type.__name__}ï¼Œå®é™… {type(e).__name__}\")            raise        def run_tests(self):        print(\"å¼€å§‹è¿è¡Œæµ‹è¯•...\")                # æµ‹è¯•æ­£å¸¸åŠŸèƒ½        self.assert_equal(2 + 2, 4, \"åŸºæœ¬åŠ æ³•\")        self.assert_equal(10 - 5, 5, \"åŸºæœ¬å‡æ³•\")                # æµ‹è¯•å¼‚å¸¸æƒ…å†µ        def divide_by_zero():            return 1 / 0                self.assert_raises(ZeroDivisionError, divide_by_zero)                print(f\"\\næµ‹è¯•ç»“æœ: {self.passed_count}/{self.test_count} é€šè¿‡\")# è¿è¡Œæµ‹è¯•tester = TestCalculator()tester.run_tests()å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ1. æ–­è¨€çš„ä½¿ç”¨åœºæ™¯# âœ“ æ­£ç¡®ï¼šç”¨äºè°ƒè¯•å’Œå¼€å‘é˜¶æ®µçš„æ£€æŸ¥def calculate_factorial(n):    assert isinstance(n, int), \"n å¿…é¡»æ˜¯æ•´æ•°\"    assert n &gt;= 0, \"n å¿…é¡»æ˜¯éè´Ÿæ•°\"        if n &lt;= 1:        return 1    return n * calculate_factorial(n - 1)# âœ— é”™è¯¯ï¼šä¸è¦ç”¨æ–­è¨€å¤„ç†ç”¨æˆ·è¾“å…¥def bad_user_input_handler(user_input):    # è¿™æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºæ–­è¨€å¯èƒ½è¢«ç¦ç”¨    assert user_input.isdigit(), \"è¾“å…¥å¿…é¡»æ˜¯æ•°å­—\"    return int(user_input)# âœ“ æ­£ç¡®ï¼šç”¨å¼‚å¸¸å¤„ç†ç”¨æˆ·è¾“å…¥def good_user_input_handler(user_input):    if not user_input.isdigit():        raise ValueError(\"è¾“å…¥å¿…é¡»æ˜¯æ•°å­—\")    return int(user_input)2. å¼‚å¸¸ä¿¡æ¯çš„æ¸…æ™°æ€§# âœ— é”™è¯¯ï¼šå¼‚å¸¸ä¿¡æ¯ä¸å¤Ÿæ¸…æ™°def bad_example(data):    if not data:        raise ValueError(\"é”™è¯¯\")# âœ“ æ­£ç¡®ï¼šæä¾›æ¸…æ™°çš„å¼‚å¸¸ä¿¡æ¯def good_example(data):    if not data:        raise ValueError(\"æ•°æ®ä¸èƒ½ä¸ºç©ºæˆ– None\")        if not isinstance(data, list):        raise TypeError(f\"æœŸæœ› list ç±»å‹ï¼Œå¾—åˆ° {type(data).__name__}\")        if len(data) == 0:        raise ValueError(\"æ•°æ®åˆ—è¡¨ä¸èƒ½ä¸ºç©º\")3. å¼‚å¸¸å¤„ç†çš„å±‚æ¬¡class DataProcessor:    def __init__(self):        self.processed_count = 0        def process_item(self, item):        \"\"\"å¤„ç†å•ä¸ªé¡¹ç›®ï¼Œå¯èƒ½æŠ›å‡ºå…·ä½“å¼‚å¸¸\"\"\"        if not isinstance(item, dict):            raise TypeError(f\"é¡¹ç›®å¿…é¡»æ˜¯å­—å…¸ç±»å‹ï¼Œå¾—åˆ° {type(item).__name__}\")                if 'id' not in item:            raise KeyError(\"é¡¹ç›®å¿…é¡»åŒ…å« 'id' å­—æ®µ\")                if 'value' not in item:            raise KeyError(\"é¡¹ç›®å¿…é¡»åŒ…å« 'value' å­—æ®µ\")                # å¤„ç†é€»è¾‘        self.processed_count += 1        return {'id': item['id'], 'processed_value': item['value'] * 2}        def process_batch(self, items):        \"\"\"æ‰¹é‡å¤„ç†ï¼Œæ•è·å¹¶é‡æ–°åŒ…è£…å¼‚å¸¸\"\"\"        if not isinstance(items, list):            raise TypeError(\"items å¿…é¡»æ˜¯åˆ—è¡¨ç±»å‹\")                results = []        errors = []                for i, item in enumerate(items):            try:                result = self.process_item(item)                results.append(result)            except (TypeError, KeyError) as e:                error_info = {                    'index': i,                    'item': item,                    'error': str(e),                    'error_type': type(e).__name__                }                errors.append(error_info)                if errors:            raise ValueError(f\"æ‰¹é‡å¤„ç†å¤±è´¥ï¼Œ{len(errors)} ä¸ªé¡¹ç›®å‡ºé”™: {errors}\")                return results# ä½¿ç”¨ç¤ºä¾‹processor = DataProcessor()# æ­£å¸¸å¤„ç†valid_items = [    {'id': 1, 'value': 10},    {'id': 2, 'value': 20}]try:    results = processor.process_batch(valid_items)    print(f\"å¤„ç†æˆåŠŸ: {results}\")except ValueError as e:    print(f\"æ‰¹é‡å¤„ç†å¤±è´¥: {e}\")# å¼‚å¸¸å¤„ç†invalid_items = [    {'id': 1, 'value': 10},    {'id': 2},  # ç¼ºå°‘ value å­—æ®µ    \"invalid\"   # ä¸æ˜¯å­—å…¸ç±»å‹]try:    results = processor.process_batch(invalid_items)except ValueError as e:    print(f\"æ‰¹é‡å¤„ç†å¤±è´¥: {e}\")ç›¸å…³å‡½æ•°ä¸æ¨¡å—å†…ç½®å‡½æ•°  isinstance() - ç±»å‹æ£€æŸ¥ï¼Œå¸¸ä¸å¼‚å¸¸å¤„ç†é…åˆä½¿ç”¨  hasattr() - å±æ€§æ£€æŸ¥  callable() - å¯è°ƒç”¨å¯¹è±¡æ£€æŸ¥æ ‡å‡†åº“æ¨¡å—  traceback - å¼‚å¸¸è¿½è¸ªä¿¡æ¯å¤„ç†  logging - æ—¥å¿—è®°å½•ï¼Œå¸¸ç”¨äºè®°å½•å¼‚å¸¸ä¿¡æ¯  warnings - è­¦å‘Šå¤„ç†  unittest - å•å…ƒæµ‹è¯•æ¡†æ¶ï¼ŒåŒ…å«ä¸°å¯Œçš„æ–­è¨€æ–¹æ³•ç¬¬ä¸‰æ–¹åº“  pytest - æµ‹è¯•æ¡†æ¶ï¼Œæä¾›å¼ºå¤§çš„æ–­è¨€åŠŸèƒ½  pydantic - æ•°æ®éªŒè¯åº“  marshmallow - åºåˆ—åŒ–å’ŒéªŒè¯åº“æ‰©å±•é˜…è¯»  Python å®˜æ–¹æ–‡æ¡£ - å¼‚å¸¸å¤„ç†  Python å®˜æ–¹æ–‡æ¡£ - å†…ç½®å¼‚å¸¸  PEP 3134 - Exception Chaining and Embedded Tracebacks  Python å®˜æ–¹æ–‡æ¡£ - assert è¯­å¥ç›¸å…³æ ‡ç­¾Python å¼‚å¸¸å¤„ç† raise assert è°ƒè¯• é”™è¯¯å¤„ç† æ–­è¨€ è‡ªå®šä¹‰å¼‚å¸¸ ç¨‹åºå¥å£®æ€§",
        "url": "/docs/basics/raise-assert/",
        "category": "é¡µé¢",
        "tags": []
      }
      
    
  
    
      ,
      {
        "title": "range() - èŒƒå›´å‡½æ•°",
        "content": "range() - èŒƒå›´å‡½æ•°ğŸ“ æ¦‚è¿°range() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºç”Ÿæˆä¸å¯å˜çš„æ•´æ•°åºåˆ—ã€‚å®ƒæ˜¯ä¸€ä¸ªåºåˆ—ç±»å‹ï¼Œå¸¸ç”¨äºforå¾ªç¯ä¸­æ§åˆ¶è¿­ä»£æ¬¡æ•°ã€‚rangeå¯¹è±¡æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œåªåœ¨éœ€è¦æ—¶æ‰ç”Ÿæˆæ•°å€¼ï¼Œå› æ­¤å†…å­˜æ•ˆç‡å¾ˆé«˜ã€‚1ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡range()å‡½æ•°çš„ä¸‰ç§è°ƒç”¨å½¢å¼  ç†è§£rangeå¯¹è±¡çš„ç‰¹æ€§å’Œä¼˜åŠ¿  å­¦ä¼šåœ¨å¾ªç¯ä¸­ä½¿ç”¨range()  äº†è§£range()çš„å†…å­˜æ•ˆç‡ç‰¹ç‚¹ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬è¯­æ³•  forå¾ªç¯çš„åŸºæœ¬æ¦‚å¿µ  åºåˆ—å’Œè¿­ä»£å™¨çš„ç†è§£  æ•´æ•°è¿ç®—ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µrange() å‡½æ•°è¿”å›ä¸€ä¸ªrangeå¯¹è±¡ï¼Œè¡¨ç¤ºä¸å¯å˜çš„æ•°å­—åºåˆ—ã€‚å®ƒæ”¯æŒä¸‰ç§è°ƒç”¨å½¢å¼ï¼Œå¯ä»¥æŒ‡å®šèµ·å§‹å€¼ã€ç»“æŸå€¼å’Œæ­¥é•¿ã€‚è¯­æ³•æ ¼å¼# å•å‚æ•°å½¢å¼ï¼šä»0å¼€å§‹åˆ°stop-1range(stop)# åŒå‚æ•°å½¢å¼ï¼šä»startå¼€å§‹åˆ°stop-1range(start, stop)# ä¸‰å‚æ•°å½¢å¼ï¼šä»startå¼€å§‹åˆ°stop-1ï¼Œæ­¥é•¿ä¸ºsteprange(start, stop, step)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  start      int      å¦      0      åºåˆ—çš„èµ·å§‹å€¼ï¼ˆåŒ…å«ï¼‰              stop      int      æ˜¯      æ—       åºåˆ—çš„ç»“æŸå€¼ï¼ˆä¸åŒ…å«ï¼‰              step      int      å¦      1      åºåˆ—çš„æ­¥é•¿      è¿”å›å€¼            ç±»å‹      è¯´æ˜                  range      ä¸å¯å˜çš„æ•´æ•°åºåˆ—å¯¹è±¡      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# å•å‚æ•°å½¢å¼ï¼šrange(stop)print(list(range(5)))        # [0, 1, 2, 3, 4]print(list(range(0)))        # []# åŒå‚æ•°å½¢å¼ï¼šrange(start, stop)print(list(range(2, 8)))     # [2, 3, 4, 5, 6, 7]print(list(range(5, 5)))     # []# ä¸‰å‚æ•°å½¢å¼ï¼šrange(start, stop, step)print(list(range(0, 10, 2))) # [0, 2, 4, 6, 8]print(list(range(10, 0, -1))) # [10, 9, 8, 7, 6, 5, 4, 3, 2, 1]print(list(range(1, 10, 3))) # [1, 4, 7]# è´Ÿæ•°æ­¥é•¿print(list(range(5, 0, -1))) # [5, 4, 3, 2, 1]print(list(range(10, 0, -2))) # [10, 8, 6, 4, 2]é«˜çº§ç”¨æ³•# åœ¨forå¾ªç¯ä¸­ä½¿ç”¨for i in range(5):    print(f\"ç¬¬{i+1}æ¬¡å¾ªç¯\")# ç”Ÿæˆç´¢å¼•fruits = [\"è‹¹æœ\", \"é¦™è•‰\", \"æ©™å­\"]for i in range(len(fruits)):    print(f\"ç´¢å¼•{i}: {fruits[i]}\")# å€’åºè¿­ä»£for i in range(len(fruits)-1, -1, -1):    print(f\"å€’åº: {fruits[i]}\")# rangeå¯¹è±¡çš„ç‰¹æ€§r = range(1000000)  # åˆ›å»ºå¤§èŒƒå›´ï¼Œä½†ä¸å ç”¨å¤§é‡å†…å­˜print(len(r))       # 1000000print(r[999999])    # 999999print(500000 in r)  # True# rangeå¯¹è±¡æ”¯æŒåˆ‡ç‰‡print(list(r[10:20:2]))  # [10, 12, 14, 16, 18]# rangeå¯¹è±¡æ˜¯ä¸å¯å˜çš„# r[0] = 10  # è¿™ä¼šå¼•å‘TypeErrorå®é™…æ¡ˆä¾‹# ä¹ä¹ä¹˜æ³•è¡¨def multiplication_table():    \"\"\"æ‰“å°ä¹ä¹ä¹˜æ³•è¡¨\"\"\"    for i in range(1, 10):        for j in range(1, i + 1):            print(f\"{j}Ã—{i}={i*j}\", end=\"\\t\")        print()  # æ¢è¡Œ# æ•°å­—é‡‘å­—å¡”def number_pyramid(height):    \"\"\"æ‰“å°æ•°å­—é‡‘å­—å¡”\"\"\"    for i in range(1, height + 1):        # æ‰“å°ç©ºæ ¼        for j in range(height - i):            print(\" \", end=\"\")        # æ‰“å°æ•°å­—        for k in range(1, i + 1):            print(k, end=\"\")        # æ‰“å°å€’åºæ•°å­—        for l in range(i - 1, 0, -1):            print(l, end=\"\")        print()  # æ¢è¡Œ# æ‰¹é‡å¤„ç†æ•°æ®def process_data_in_batches(data, batch_size):    \"\"\"åˆ†æ‰¹å¤„ç†æ•°æ®\"\"\"    total_items = len(data)    for i in range(0, total_items, batch_size):        batch = data[i:i + batch_size]        print(f\"å¤„ç†æ‰¹æ¬¡ {i//batch_size + 1}: {len(batch)} ä¸ªé¡¹ç›®\")        # è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„å¤„ç†é€»è¾‘        for item in batch:            print(f\"  å¤„ç†é¡¹ç›®: {item}\")# ä½¿ç”¨ç¤ºä¾‹data = list(range(1, 26))  # 1åˆ°25çš„æ•°å­—process_data_in_batches(data, 5)# ç”Ÿæˆç­‰å·®æ•°åˆ—def arithmetic_sequence(first, last, step):    \"\"\"ç”Ÿæˆç­‰å·®æ•°åˆ—\"\"\"    if step &gt; 0:        return list(range(first, last + 1, step))    else:        return list(range(first, last - 1, step))print(arithmetic_sequence(2, 20, 3))   # [2, 5, 8, 11, 14, 17, 20]print(arithmetic_sequence(20, 2, -3))  # [20, 17, 14, 11, 8, 5, 2]âš ï¸ æ³¨æ„äº‹é¡¹  rangeå¯¹è±¡æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œä¸ä¼šç«‹å³ç”Ÿæˆæ‰€æœ‰æ•°å€¼  rangeçš„å‚æ•°å¿…é¡»æ˜¯æ•´æ•°ï¼Œä¸æ”¯æŒæµ®ç‚¹æ•°  å½“stepä¸º0æ—¶ä¼šå¼•å‘ValueError  rangeå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œä¸èƒ½ä¿®æ”¹å…¶å…ƒç´   è´Ÿæ­¥é•¿æ—¶ï¼Œstartåº”è¯¥å¤§äºstop# å¸¸è§é”™è¯¯ç¤ºä¾‹# range(1.5, 10)     # TypeError: 'float' object cannot be interpreted as an integer# range(1, 10, 0)    # ValueError: range() arg 3 must not be zero# ç©ºrangeçš„æƒ…å†µprint(list(range(5, 1)))     # [] (stepä¸ºæ­£æ•°ï¼Œä½†start &gt; stop)print(list(range(1, 5, -1))) # [] (stepä¸ºè´Ÿæ•°ï¼Œä½†start &lt; stop)# æ­£ç¡®çš„è´Ÿæ­¥é•¿ç”¨æ³•print(list(range(5, 1, -1))) # [5, 4, 3, 2]ğŸ”— ç›¸å…³å†…å®¹  enumerate() - æšä¸¾å‡½æ•°  zip() - æ‰“åŒ…å‡½æ•°  list() - åˆ—è¡¨æ„é€ å‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - range()  Pythonåºåˆ—ç±»å‹è¯¦è§£  Pythonè¿­ä»£å™¨å’Œç”Ÿæˆå™¨ğŸ·ï¸ æ ‡ç­¾åºåˆ— è¿­ä»£ å¾ªç¯ æ•°å­—ç”Ÿæˆ å†…å­˜æ•ˆç‡æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/range/",
        "category": "builtins",
        "tags": ["åºåˆ—","è¿­ä»£","å¾ªç¯"]
      }
      
    
  
    
      ,
      {
        "title": "reversed() - åè½¬å‡½æ•°",
        "content": "reversed() - åè½¬å‡½æ•°ğŸ“ æ¦‚è¿°reversed() æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºè¿”å›ä¸€ä¸ªåè½¬çš„è¿­ä»£å™¨ã€‚å®ƒå¯ä»¥å¤„ç†åºåˆ—ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ï¼‰æˆ–å®ç°äº†__reversed__()æ–¹æ³•çš„å¯¹è±¡ã€‚1ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡reversed()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•  ç†è§£reversed()è¿”å›è¿­ä»£å™¨çš„ç‰¹æ€§  å­¦ä¼šå¤„ç†ä¸åŒç±»å‹çš„åºåˆ—  äº†è§£reversed()ä¸åˆ‡ç‰‡åè½¬çš„åŒºåˆ«  æŒæ¡åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨æŠ€å·§ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹  åºåˆ—ç±»å‹ï¼ˆåˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ï¼‰  è¿­ä»£å™¨å’Œç”Ÿæˆå™¨çš„æ¦‚å¿µ  åˆ‡ç‰‡æ“ä½œçš„åŸºæœ¬ç†è§£ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µreversed() å‡½æ•°æ¥å—ä¸€ä¸ªåºåˆ—ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªåè½¬çš„è¿­ä»£å™¨å¯¹è±¡ã€‚è¿™ä¸ªè¿­ä»£å™¨å¯ä»¥ç”¨äºéå†åºåˆ—ä¸­çš„å…ƒç´ ï¼Œä½†é¡ºåºæ˜¯ç›¸åçš„ã€‚è¯­æ³•æ ¼å¼reversed(seq)å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      é»˜è®¤å€¼      è¯´æ˜                  seq      sequence      æ˜¯      æ—       è¦åè½¬çš„åºåˆ—å¯¹è±¡      è¿”å›å€¼            ç±»å‹      è¯´æ˜                  reverse_iterator      åè½¬çš„è¿­ä»£å™¨å¯¹è±¡      ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€ç”¨æ³•# åè½¬åˆ—è¡¨numbers = [1, 2, 3, 4, 5]reversed_numbers = reversed(numbers)print(type(reversed_numbers))  # &lt;class 'list_reverseiterator'&gt;print(list(reversed_numbers))  # [5, 4, 3, 2, 1]print(numbers)                 # [1, 2, 3, 4, 5] (åŸåˆ—è¡¨ä¸å˜)# åè½¬å­—ç¬¦ä¸²text = \"hello\"reversed_text = reversed(text)print(list(reversed_text))     # ['o', 'l', 'l', 'e', 'h']print(''.join(reversed(text))) # \"olleh\"# åè½¬å…ƒç»„data = (1, 2, 3, 4)reversed_data = reversed(data)print(tuple(reversed_data))    # (4, 3, 2, 1)# åè½¬rangeå¯¹è±¡range_obj = range(5)print(list(reversed(range_obj)))  # [4, 3, 2, 1, 0]# ä½¿ç”¨forå¾ªç¯éå†åè½¬çš„åºåˆ—words = ['apple', 'banana', 'cherry']print(\"æ­£å‘éå†:\")for word in words:    print(word)print(\"\\nåå‘éå†:\")for word in reversed(words):    print(word)# åè½¬å­—å…¸çš„é”®ï¼ˆPython 3.7+å­—å…¸æœ‰åºï¼‰data_dict = {'a': 1, 'b': 2, 'c': 3}print(\"æ­£å‘é”®:\", list(data_dict.keys()))print(\"åå‘é”®:\", list(reversed(data_dict.keys())))print(\"åå‘å€¼:\", list(reversed(data_dict.values())))print(\"åå‘é¡¹:\", list(reversed(data_dict.items())))è¿­ä»£å™¨ç‰¹æ€§# reversed()è¿”å›è¿­ä»£å™¨ï¼Œåªèƒ½éå†ä¸€æ¬¡numbers = [1, 2, 3, 4, 5]rev_iter = reversed(numbers)print(\"ç¬¬ä¸€æ¬¡éå†:\")for num in rev_iter:    print(num, end=' ')  # 5 4 3 2 1print(\"\\nç¬¬äºŒæ¬¡éå†:\")for num in rev_iter:    print(num, end=' ')  # æ— è¾“å‡ºï¼Œè¿­ä»£å™¨å·²è€—å°½# å¦‚éœ€å¤šæ¬¡ä½¿ç”¨ï¼Œé‡æ–°åˆ›å»ºè¿­ä»£å™¨print(\"\\né‡æ–°åˆ›å»ºè¿­ä»£å™¨:\")rev_iter = reversed(numbers)for num in rev_iter:    print(num, end=' ')  # 5 4 3 2 1# æˆ–è€…è½¬æ¢ä¸ºåˆ—è¡¨rev_list = list(reversed(numbers))print(\"\\nè½¬æ¢ä¸ºåˆ—è¡¨åå¤šæ¬¡ä½¿ç”¨:\")print(rev_list)  # [5, 4, 3, 2, 1]print(rev_list)  # [5, 4, 3, 2, 1]# ä½¿ç”¨next()å‡½æ•°é€ä¸ªè·å–å…ƒç´ rev_iter = reversed([1, 2, 3])print(\"\\nä½¿ç”¨next()è·å–å…ƒç´ :\")print(next(rev_iter))  # 3print(next(rev_iter))  # 2print(next(rev_iter))  # 1# print(next(rev_iter))  # StopIterationå¼‚å¸¸# å®‰å…¨ä½¿ç”¨next()withé»˜è®¤å€¼rev_iter = reversed([1, 2, 3])while True:    value = next(rev_iter, None)    if value is None:        break    print(f\"å€¼: {value}\")ä¸åˆ‡ç‰‡åè½¬çš„æ¯”è¾ƒ# æ–¹æ³•1: ä½¿ç”¨reversed()numbers = [1, 2, 3, 4, 5]method1 = list(reversed(numbers))print(f\"reversed(): {method1}\")# æ–¹æ³•2: ä½¿ç”¨åˆ‡ç‰‡method2 = numbers[::-1]print(f\"åˆ‡ç‰‡[::-1]: {method2}\")# æ€§èƒ½æ¯”è¾ƒimport timelarge_list = list(range(1000000))# æµ‹è¯•reversed()start = time.time()result1 = list(reversed(large_list))time1 = time.time() - start# æµ‹è¯•åˆ‡ç‰‡start = time.time()result2 = large_list[::-1]time2 = time.time() - startprint(f\"\\nreversed()è€—æ—¶: {time1:.4f}ç§’\")print(f\"åˆ‡ç‰‡[::-1]è€—æ—¶: {time2:.4f}ç§’\")print(f\"åˆ‡ç‰‡æ›´å¿«: {time1/time2:.2f}å€\")# å†…å­˜ä½¿ç”¨å·®å¼‚print(f\"\\nreversed()è¿”å›: {type(reversed(numbers))}\")print(f\"åˆ‡ç‰‡è¿”å›: {type(numbers[::-1])}\")# reversed()çš„ä¼˜åŠ¿ï¼šæƒ°æ€§æ±‚å€¼def demonstrate_lazy_evaluation():    \"\"\"æ¼”ç¤ºæƒ°æ€§æ±‚å€¼çš„ä¼˜åŠ¿\"\"\"    large_range = range(1000000)        # reversed()ä¸ä¼šç«‹å³åˆ›å»ºæ‰€æœ‰å…ƒç´     rev_iter = reversed(large_range)    print(f\"åˆ›å»ºreversedè¿­ä»£å™¨: {type(rev_iter)}\")        # åªè·å–å‰3ä¸ªå…ƒç´     first_three = []    for i, value in enumerate(rev_iter):        if i &gt;= 3:            break        first_three.append(value)        print(f\"å‰3ä¸ªåè½¬å…ƒç´ : {first_three}\")    return first_threedemonstrate_lazy_evaluation()é«˜çº§ç”¨æ³•# è‡ªå®šä¹‰ç±»å®ç°__reversed__æ–¹æ³•class CustomSequence:    def __init__(self, data):        self.data = data        def __len__(self):        return len(self.data)        def __getitem__(self, index):        return self.data[index]        def __reversed__(self):        \"\"\"è‡ªå®šä¹‰åè½¬é€»è¾‘\"\"\"        print(\"è°ƒç”¨è‡ªå®šä¹‰__reversed__æ–¹æ³•\")        for i in range(len(self.data) - 1, -1, -1):            yield self.data[i]        def __repr__(self):        return f\"CustomSequence({self.data})\"custom_seq = CustomSequence([1, 2, 3, 4, 5])print(f\"åŸåºåˆ—: {custom_seq}\")print(f\"åè½¬å: {list(reversed(custom_seq))}\")# å¤„ç†åµŒå¥—ç»“æ„nested_list = [[1, 2], [3, 4], [5, 6]]print(f\"\\nåŸåµŒå¥—åˆ—è¡¨: {nested_list}\")print(f\"åè½¬å¤–å±‚: {list(reversed(nested_list))}\")# åè½¬æ¯ä¸ªå­åˆ—è¡¨reversed_nested = [list(reversed(sublist)) for sublist in reversed(nested_list)]print(f\"å®Œå…¨åè½¬: {reversed_nested}\")# å­—ç¬¦ä¸²å¤„ç†def reverse_words_in_sentence(sentence):    \"\"\"åè½¬å¥å­ä¸­æ¯ä¸ªå•è¯ï¼Œä½†ä¿æŒå•è¯é¡ºåº\"\"\"    words = sentence.split()    reversed_words = [''.join(reversed(word)) for word in words]    return ' '.join(reversed_words)def reverse_sentence_order(sentence):    \"\"\"åè½¬å¥å­ä¸­å•è¯çš„é¡ºåº\"\"\"    words = sentence.split()    return ' '.join(reversed(words))sentence = \"Hello World Python\"print(f\"\\nåŸå¥å­: {sentence}\")print(f\"åè½¬å•è¯å†…å®¹: {reverse_words_in_sentence(sentence)}\")print(f\"åè½¬å•è¯é¡ºåº: {reverse_sentence_order(sentence)}\")# æ•°æ®ç»“æ„æ“ä½œclass Stack:    \"\"\"ä½¿ç”¨åˆ—è¡¨å®ç°çš„æ ˆ\"\"\"    def __init__(self):        self.items = []        def push(self, item):        self.items.append(item)        def pop(self):        if self.items:            return self.items.pop()        return None        def peek(self):        if self.items:            return self.items[-1]        return None        def reverse_view(self):        \"\"\"è¿”å›æ ˆçš„åè½¬è§†å›¾ï¼ˆä¸ä¿®æ”¹åŸæ ˆï¼‰\"\"\"        return list(reversed(self.items))        def __repr__(self):        return f\"Stack({self.items})\"stack = Stack()for i in range(1, 6):    stack.push(i)print(f\"\\næ ˆå†…å®¹: {stack}\")print(f\"åè½¬è§†å›¾: {stack.reverse_view()}\")print(f\"æ ˆé¡¶å…ƒç´ : {stack.peek()}\")å®é™…æ¡ˆä¾‹# å›æ–‡æ£€æŸ¥def is_palindrome(text):    \"\"\"æ£€æŸ¥æ–‡æœ¬æ˜¯å¦ä¸ºå›æ–‡\"\"\"    # æ¸…ç†æ–‡æœ¬ï¼šç§»é™¤ç©ºæ ¼å’Œæ ‡ç‚¹ï¼Œè½¬ä¸ºå°å†™    import re    cleaned = re.sub(r'[^a-zA-Z0-9]', '', text.lower())        # æ–¹æ³•1ï¼šä½¿ç”¨reversed()    return cleaned == ''.join(reversed(cleaned))        # æ–¹æ³•2ï¼šä½¿ç”¨åˆ‡ç‰‡ï¼ˆæ›´ç®€æ´ï¼‰    # return cleaned == cleaned[::-1]test_texts = [    \"A man a plan a canal Panama\",    \"race a car\",    \"hello\",    \"Madam\",    \"12321\"]print(\"å›æ–‡æ£€æŸ¥:\")for text in test_texts:    result = is_palindrome(text)    print(f\"'{text}' -&gt; {result}\")# æ–‡ä»¶è¡Œåè½¬å¤„ç†def reverse_file_lines(content):    \"\"\"åè½¬æ–‡ä»¶è¡Œçš„é¡ºåº\"\"\"    lines = content.strip().split('\\n')    return '\\n'.join(reversed(lines))sample_content = \"\"\"ç¬¬ä¸€è¡Œç¬¬äºŒè¡Œç¬¬ä¸‰è¡Œç¬¬å››è¡Œ\"\"\"print(f\"\\nåŸæ–‡ä»¶å†…å®¹:\\n{sample_content}\")print(f\"\\nåè½¬å:\\n{reverse_file_lines(sample_content)}\")# æ•°æ®åˆ†æï¼šæ—¶é—´åºåˆ—åè½¬class TimeSeriesData:    def __init__(self, timestamps, values):        self.timestamps = timestamps        self.values = values        def reverse_chronological(self):        \"\"\"æŒ‰æ—¶é—´å€’åºæ’åˆ—\"\"\"        rev_timestamps = list(reversed(self.timestamps))        rev_values = list(reversed(self.values))        return TimeSeriesData(rev_timestamps, rev_values)        def get_recent_data(self, n=5):        \"\"\"è·å–æœ€è¿‘nä¸ªæ•°æ®ç‚¹\"\"\"        recent_timestamps = []        recent_values = []                for i, (timestamp, value) in enumerate(zip(reversed(self.timestamps),                                                    reversed(self.values))):            if i &gt;= n:                break            recent_timestamps.append(timestamp)            recent_values.append(value)                return list(reversed(recent_timestamps)), list(reversed(recent_values))        def __repr__(self):        return f\"TimeSeriesData(len={len(self.timestamps)})\"# æ¨¡æ‹Ÿæ—¶é—´åºåˆ—æ•°æ®timestamps = ['2024-01-01', '2024-01-02', '2024-01-03', '2024-01-04', '2024-01-05']values = [100, 105, 98, 110, 115]ts_data = TimeSeriesData(timestamps, values)print(f\"\\nåŸæ—¶é—´åºåˆ—: {list(zip(ts_data.timestamps, ts_data.values))}\")reversed_data = ts_data.reverse_chronological()print(f\"åè½¬æ—¶é—´åºåˆ—: {list(zip(reversed_data.timestamps, reversed_data.values))}\")recent_times, recent_vals = ts_data.get_recent_data(3)print(f\"æœ€è¿‘3ä¸ªæ•°æ®ç‚¹: {list(zip(recent_times, recent_vals))}\")# ç®—æ³•åº”ç”¨ï¼šåè½¬é“¾è¡¨æ¨¡æ‹Ÿclass ListNode:    def __init__(self, val=0, next=None):        self.val = val        self.next = next        def __repr__(self):        return f\"ListNode({self.val})\"class LinkedList:    def __init__(self, values=None):        self.head = None        if values:            for val in values:                self.append(val)        def append(self, val):        new_node = ListNode(val)        if not self.head:            self.head = new_node        else:            current = self.head            while current.next:                current = current.next            current.next = new_node        def to_list(self):        \"\"\"è½¬æ¢ä¸ºPythonåˆ—è¡¨\"\"\"        result = []        current = self.head        while current:            result.append(current.val)            current = current.next        return result        def reverse_using_builtin(self):        \"\"\"ä½¿ç”¨å†…ç½®å‡½æ•°åè½¬\"\"\"        values = self.to_list()        reversed_values = list(reversed(values))        return LinkedList(reversed_values)        def __repr__(self):        return f\"LinkedList({self.to_list()})\"# æµ‹è¯•é“¾è¡¨åè½¬original_list = LinkedList([1, 2, 3, 4, 5])print(f\"\\nåŸé“¾è¡¨: {original_list}\")reversed_list = original_list.reverse_using_builtin()print(f\"åè½¬é“¾è¡¨: {reversed_list}\")# æ¸¸æˆå¼€å‘ï¼šæ’¤é”€æ“ä½œclass GameState:    def __init__(self):        self.history = []        self.current_state = {\"player_pos\": (0, 0), \"score\": 0}        def save_state(self):        \"\"\"ä¿å­˜å½“å‰çŠ¶æ€\"\"\"        self.history.append(self.current_state.copy())        def make_move(self, new_pos, score_change):        \"\"\"æ‰§è¡Œç§»åŠ¨\"\"\"        self.save_state()        self.current_state[\"player_pos\"] = new_pos        self.current_state[\"score\"] += score_change        def undo_moves(self, steps=1):        \"\"\"æ’¤é”€æŒ‡å®šæ­¥æ•°çš„ç§»åŠ¨\"\"\"        if len(self.history) &lt; steps:            steps = len(self.history)                # ä½¿ç”¨reversed()è·å–æœ€è¿‘çš„çŠ¶æ€        recent_states = list(reversed(self.history))[:steps]                if recent_states:            # æ¢å¤åˆ°æŒ‡å®šæ­¥æ•°å‰çš„çŠ¶æ€            self.current_state = recent_states[-1].copy()            # ç§»é™¤æ’¤é”€çš„å†å²è®°å½•            self.history = self.history[:-steps]        def get_move_history(self):        \"\"\"è·å–ç§»åŠ¨å†å²ï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰\"\"\"        return list(reversed(self.history))        def __repr__(self):        return f\"GameState(pos={self.current_state['player_pos']}, score={self.current_state['score']})\"# æµ‹è¯•æ¸¸æˆçŠ¶æ€ç®¡ç†game = GameState()print(f\"\\nåˆå§‹çŠ¶æ€: {game}\")# æ‰§è¡Œä¸€ç³»åˆ—ç§»åŠ¨moves = [((1, 0), 10), ((2, 0), 15), ((2, 1), 20), ((3, 1), 25)]for pos, score in moves:    game.make_move(pos, score)    print(f\"ç§»åŠ¨åˆ° {pos}ï¼Œå¾—åˆ† +{score}: {game}\")print(f\"\\nç§»åŠ¨å†å²: {[state['player_pos'] for state in game.get_move_history()]}\")# æ’¤é”€æ“ä½œprint(\"\\næ’¤é”€2æ­¥:\")game.undo_moves(2)print(f\"æ’¤é”€åçŠ¶æ€: {game}\")print(f\"å‰©ä½™å†å²: {[state['player_pos'] for state in game.get_move_history()]}\")âš ï¸ æ³¨æ„äº‹é¡¹  reversed() è¿”å›è¿­ä»£å™¨ï¼Œåªèƒ½éå†ä¸€æ¬¡  ä¸æ˜¯æ‰€æœ‰å¯¹è±¡éƒ½æ”¯æŒ reversed()ï¼Œéœ€è¦æ˜¯åºåˆ—æˆ–å®ç° __reversed__() æ–¹æ³•  å¯¹äºå¤§æ•°æ®é›†ï¼Œreversed() æ¯”åˆ‡ç‰‡æ›´èŠ‚çœå†…å­˜  å­—å…¸åœ¨Python 3.7+ä¸­ä¿æŒæ’å…¥é¡ºåºï¼Œå¯ä»¥ä½¿ç”¨ reversed()# é”™è¯¯ç¤ºä¾‹å’Œè§£å†³æ–¹æ¡ˆ# 1. ä¸æ”¯æŒreversed()çš„å¯¹è±¡try:    result = reversed({1, 2, 3})  # é›†åˆä¸æ”¯æŒreversed()except TypeError as e:    print(f\"é”™è¯¯: {e}\")    # è§£å†³æ–¹æ¡ˆï¼šå…ˆè½¬æ¢ä¸ºåˆ—è¡¨    result = list(reversed(list({1, 2, 3})))    print(f\"è§£å†³æ–¹æ¡ˆ: {result}\")# 2. è¿­ä»£å™¨è€—å°½é—®é¢˜numbers = [1, 2, 3, 4, 5]rev_iter = reversed(numbers)# ç¬¬ä¸€æ¬¡ä½¿ç”¨first_use = list(rev_iter)print(f\"ç¬¬ä¸€æ¬¡ä½¿ç”¨: {first_use}\")# ç¬¬äºŒæ¬¡ä½¿ç”¨ï¼ˆè¿­ä»£å™¨å·²è€—å°½ï¼‰second_use = list(rev_iter)print(f\"ç¬¬äºŒæ¬¡ä½¿ç”¨: {second_use}\")  # []# è§£å†³æ–¹æ¡ˆï¼šé‡æ–°åˆ›å»ºæˆ–è½¬æ¢ä¸ºåˆ—è¡¨rev_list = list(reversed(numbers))print(f\"è½¬æ¢ä¸ºåˆ—è¡¨: {rev_list}\")# 3. å†…å­˜ä½¿ç”¨è€ƒè™‘import syslarge_list = list(range(100000))# reversed()è¿”å›è¿­ä»£å™¨ï¼ˆå†…å­˜å‹å¥½ï¼‰rev_iter = reversed(large_list)print(f\"è¿­ä»£å™¨å¤§å°: {sys.getsizeof(rev_iter)} bytes\")# åˆ‡ç‰‡åˆ›å»ºæ–°åˆ—è¡¨ï¼ˆå†…å­˜æ¶ˆè€—å¤§ï¼‰rev_slice = large_list[::-1]print(f\"åˆ‡ç‰‡åˆ—è¡¨å¤§å°: {sys.getsizeof(rev_slice)} bytes\")# 4. å­—ç¬¦ä¸²åè½¬çš„ä¸åŒæ–¹æ³•text = \"hello world\"# æ–¹æ³•1ï¼šreversed() + joinmethod1 = ''.join(reversed(text))print(f\"reversed(): {method1}\")# æ–¹æ³•2ï¼šåˆ‡ç‰‡method2 = text[::-1]print(f\"åˆ‡ç‰‡: {method2}\")# æ€§èƒ½æ¯”è¾ƒimport timeittext = \"hello world\" * 1000time1 = timeit.timeit(lambda: ''.join(reversed(text)), number=10000)time2 = timeit.timeit(lambda: text[::-1], number=10000)print(f\"\\nreversed()è€—æ—¶: {time1:.4f}ç§’\")print(f\"åˆ‡ç‰‡è€—æ—¶: {time2:.4f}ç§’\")print(f\"åˆ‡ç‰‡æ›´å¿«: {time1/time2:.2f}å€\")ğŸ”— ç›¸å…³å†…å®¹  sorted() - æ’åºå‡½æ•°  list.reverse() - åˆ—è¡¨åè½¬æ–¹æ³•  slice - åˆ‡ç‰‡æ“ä½œ  iter() - è¿­ä»£å™¨å‡½æ•°ğŸ“š æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - reversed()  Pythonè¿­ä»£å™¨å’Œç”Ÿæˆå™¨  åºåˆ—ç±»å‹æ“ä½œğŸ·ï¸ æ ‡ç­¾åè½¬ åºåˆ— è¿­ä»£å™¨ æƒ°æ€§æ±‚å€¼ å†…å­˜ä¼˜åŒ–æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/reversed/",
        "category": "builtins",
        "tags": ["åè½¬","åºåˆ—","è¿­ä»£å™¨"]
      }
      
    
  
    
      ,
      {
        "title": "round() - æ•°å­—å››èˆäº”å…¥å‡½æ•°",
        "content": "round() - æ•°å­—å››èˆäº”å…¥å‡½æ•°ğŸ“ æ¦‚è¿°round() æ˜¯Pythonä¸­ç”¨äºæ•°å­—å››èˆäº”å…¥çš„å†…ç½®å‡½æ•°ã€‚å®ƒå¯ä»¥å°†æµ®ç‚¹æ•°å››èˆäº”å…¥åˆ°æŒ‡å®šçš„å°æ•°ä½æ•°ï¼Œæˆ–è€…å°†æ•°å­—å››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ã€‚è¿™ä¸ªå‡½æ•°åœ¨æ•°æ®å¤„ç†ã€è´¢åŠ¡è®¡ç®—ã€ç§‘å­¦è®¡ç®—ç­‰åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦æ§åˆ¶æ•°å­—ç²¾åº¦çš„æƒ…å†µä¸‹ã€‚ğŸ¯ å­¦ä¹ ç›®æ ‡  æŒæ¡round()å‡½æ•°çš„åŸºæœ¬è¯­æ³•å’Œç”¨æ³•  ç†è§£å››èˆäº”å…¥çš„è§„åˆ™å’Œç‰¹æ®Šæƒ…å†µ  å­¦ä¼šå¤„ç†ä¸åŒç²¾åº¦çš„æ•°å­—å››èˆäº”å…¥  äº†è§£æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ  æŒæ¡åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨æŠ€å·§ğŸ“‹ å‰ç½®çŸ¥è¯†  PythonåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ•´æ•°ã€æµ®ç‚¹æ•°ï¼‰  æ•°å­¦åŸºç¡€ï¼ˆå››èˆäº”å…¥æ¦‚å¿µï¼‰  æµ®ç‚¹æ•°è¡¨ç¤ºå’Œç²¾åº¦æ¦‚å¿µ  Pythonæ•°å­—è¿ç®—åŸºç¡€ğŸ” è¯¦ç»†å†…å®¹åŸºæœ¬æ¦‚å¿µround() å‡½æ•°å®ç°äº†â€é“¶è¡Œå®¶èˆå…¥â€ï¼ˆä¹Ÿç§°ä¸ºâ€å››èˆå…­å…¥äº”æˆåŒâ€ï¼‰è§„åˆ™ï¼Œè¿™æ˜¯IEEE 754æ ‡å‡†æ¨èçš„èˆå…¥æ–¹å¼ã€‚å½“è¦èˆå…¥çš„æ•°å­—æ­£å¥½æ˜¯5æ—¶ï¼Œä¼šèˆå…¥åˆ°æœ€è¿‘çš„å¶æ•°ã€‚è¯­æ³•æ ¼å¼round(number[, ndigits])å‚æ•°è¯´æ˜            å‚æ•°å      ç±»å‹      å¿…éœ€      è¯´æ˜                  number      int/float      æ˜¯      è¦è¿›è¡Œå››èˆäº”å…¥çš„æ•°å­—              ndigits      int      å¦      ä¿ç•™çš„å°æ•°ä½æ•°ï¼Œé»˜è®¤ä¸º0      è¿”å›å€¼  å½“ndigitsçœç•¥æˆ–ä¸ºNoneæ—¶: è¿”å›intç±»å‹ï¼Œå››èˆäº”å…¥åˆ°æœ€è¿‘çš„æ•´æ•°  å½“ndigitsä¸ºæ­£æ•´æ•°æ—¶: è¿”å›floatç±»å‹ï¼Œä¿ç•™æŒ‡å®šä½æ•°çš„å°æ•°  å½“ndigitsä¸ºè´Ÿæ•´æ•°æ—¶: è¿”å›floatç±»å‹ï¼Œå››èˆäº”å…¥åˆ°åä½ã€ç™¾ä½ç­‰ğŸ’¡ å®é™…åº”ç”¨åŸºç¡€å››èˆäº”å…¥æ“ä½œ# åŸºç¡€å››èˆäº”å…¥ç¤ºä¾‹print(\"åŸºç¡€å››èˆäº”å…¥æ“ä½œ:\")# 1. åŸºæœ¬æ•´æ•°å››èˆäº”å…¥print(\"\\n1. åŸºæœ¬æ•´æ•°å››èˆäº”å…¥:\")test_numbers = [3.2, 3.7, 3.5, 4.5, -3.2, -3.7, -3.5, -4.5]for num in test_numbers:    rounded = round(num)    print(f\"round({num}) = {rounded} (ç±»å‹: {type(rounded).__name__})\")# 2. é“¶è¡Œå®¶èˆå…¥è§„åˆ™æ¼”ç¤ºprint(\"\\n2. é“¶è¡Œå®¶èˆå…¥è§„åˆ™ (äº”æˆåŒ):\")# å½“å°æ•°éƒ¨åˆ†æ­£å¥½æ˜¯0.5æ—¶çš„ç‰¹æ®Šæƒ…å†µspecial_cases = [0.5, 1.5, 2.5, 3.5, 4.5, 5.5, -0.5, -1.5, -2.5]for num in special_cases:    rounded = round(num)    print(f\"round({num}) = {rounded} ({'å¶æ•°' if rounded % 2 == 0 else 'å¥‡æ•°'})\")print(\"\\né“¶è¡Œå®¶èˆå…¥è§„åˆ™è¯´æ˜:\")print(\"- å½“å°æ•°éƒ¨åˆ† &lt; 0.5 æ—¶ï¼Œå‘ä¸‹èˆå…¥\")print(\"- å½“å°æ•°éƒ¨åˆ† &gt; 0.5 æ—¶ï¼Œå‘ä¸Šèˆå…¥\")print(\"- å½“å°æ•°éƒ¨åˆ† = 0.5 æ—¶ï¼Œèˆå…¥åˆ°æœ€è¿‘çš„å¶æ•°\")print(\"- è¿™ç§æ–¹å¼å¯ä»¥å‡å°‘èˆå…¥è¯¯å·®çš„ç´¯ç§¯\")# 3. ä¸åŒæ•°æ®ç±»å‹çš„å¤„ç†print(\"\\n3. ä¸åŒæ•°æ®ç±»å‹å¤„ç†:\")from decimal import Decimalimport fractionstest_values = [    3.14159,                    # æµ®ç‚¹æ•°    Decimal('3.14159'),         # Decimalç±»å‹    fractions.Fraction(22, 7),  # åˆ†æ•°    5,                          # æ•´æ•°    True,                       # å¸ƒå°”å€¼]for value in test_values:    try:        result = round(value)        print(f\"round({value}) = {result} (è¾“å…¥ç±»å‹: {type(value).__name__}, è¾“å‡ºç±»å‹: {type(result).__name__})\")    except Exception as e:        print(f\"round({value}) å¤±è´¥: {e}\")# 4. è¾¹ç•Œæƒ…å†µå’Œç‰¹æ®Šå€¼print(\"\\n4. è¾¹ç•Œæƒ…å†µå’Œç‰¹æ®Šå€¼:\")special_values = [    0.0,                # é›¶    -0.0,               # è´Ÿé›¶    float('inf'),       # æ­£æ— ç©·    float('-inf'),      # è´Ÿæ— ç©·    float('nan'),       # éæ•°å­—    1e-10,              # æå°æ•°    1e10,               # æå¤§æ•°]for value in special_values:    try:        result = round(value)        print(f\"round({value}) = {result}\")    except Exception as e:        print(f\"round({value}) é”™è¯¯: {e}\")æŒ‡å®šç²¾åº¦çš„å››èˆäº”å…¥# æŒ‡å®šç²¾åº¦çš„å››èˆäº”å…¥ç¤ºä¾‹print(\"æŒ‡å®šç²¾åº¦çš„å››èˆäº”å…¥:\")# 1. ä¿ç•™å°æ•°ä½æ•°print(\"\\n1. ä¿ç•™ä¸åŒå°æ•°ä½æ•°:\")pi = 3.141592653589793for digits in range(6):    rounded = round(pi, digits)    print(f\"round({pi}, {digits}) = {rounded} (ç±»å‹: {type(rounded).__name__})\")# 2. è´Ÿæ•°ç²¾åº¦ - å››èˆäº”å…¥åˆ°åä½ã€ç™¾ä½ç­‰print(\"\\n2. è´Ÿæ•°ç²¾åº¦å››èˆäº”å…¥:\")large_number = 123456.789for digits in range(-4, 1):    rounded = round(large_number, digits)    print(f\"round({large_number}, {digits}) = {rounded}\")print(\"\\nè´Ÿæ•°ç²¾åº¦è¯´æ˜:\")print(\"-1: å››èˆäº”å…¥åˆ°åä½\")print(\"-2: å››èˆäº”å…¥åˆ°ç™¾ä½\")print(\"-3: å››èˆäº”å…¥åˆ°åƒä½\")print(\"ä»¥æ­¤ç±»æ¨...\")# 3. è´¢åŠ¡è®¡ç®—ä¸­çš„ç²¾åº¦æ§åˆ¶print(\"\\n3. è´¢åŠ¡è®¡ç®—ç²¾åº¦æ§åˆ¶:\")# æ¨¡æ‹Ÿå•†å“ä»·æ ¼è®¡ç®—prices = [19.99, 25.678, 100.005, 0.999]tax_rate = 0.08  # 8%ç¨ç‡print(\"å•†å“ä»·æ ¼è®¡ç®— (å«ç¨):\")for price in prices:    tax = price * tax_rate    total = price + tax        # ä¸åŒçš„èˆå…¥ç­–ç•¥    total_rounded_2 = round(total, 2)  # ä¿ç•™2ä½å°æ•°    total_rounded_1 = round(total, 1)  # ä¿ç•™1ä½å°æ•°    total_rounded_0 = round(total)     # å››èˆäº”å…¥åˆ°æ•´æ•°        print(f\"\\nåŸä»·: ${price:.3f}\")    print(f\"ç¨é¢: ${tax:.3f}\")    print(f\"æ€»ä»·: ${total:.6f}\")    print(f\"  ä¿ç•™2ä½: ${total_rounded_2}\")    print(f\"  ä¿ç•™1ä½: ${total_rounded_1}\")    print(f\"  æ•´æ•°: ${total_rounded_0}\")# 4. ç§‘å­¦è®¡ç®—ä¸­çš„ç²¾åº¦å¤„ç†print(\"\\n4. ç§‘å­¦è®¡ç®—ç²¾åº¦å¤„ç†:\")import math# è®¡ç®—åœ†çš„é¢ç§¯å’Œå‘¨é•¿radius = 5.7area = math.pi * radius ** 2circumference = 2 * math.pi * radiusprint(f\"åŠå¾„: {radius}\")print(f\"é¢ç§¯: {area}\")print(f\"å‘¨é•¿: {circumference}\")print(\"\\nä¸åŒç²¾åº¦çš„ç»“æœ:\")for precision in [0, 1, 2, 3, 4, 5]:    area_rounded = round(area, precision)    circ_rounded = round(circumference, precision)    print(f\"ç²¾åº¦{precision}: é¢ç§¯={area_rounded}, å‘¨é•¿={circ_rounded}\")# 5. æ•°æ®åˆ†æä¸­çš„æ•°å€¼å¤„ç†print(\"\\n5. æ•°æ®åˆ†ææ•°å€¼å¤„ç†:\")# æ¨¡æ‹Ÿæµ‹é‡æ•°æ®measurements = [23.456789, 24.123456, 22.987654, 25.345678, 23.876543]print(\"åŸå§‹æµ‹é‡æ•°æ®:\")for i, measurement in enumerate(measurements, 1):    print(f\"æµ‹é‡{i}: {measurement}\")# è®¡ç®—ç»Ÿè®¡å€¼average = sum(measurements) / len(measurements)variance = sum((x - average) ** 2 for x in measurements) / len(measurements)std_dev = math.sqrt(variance)print(f\"\\nç»Ÿè®¡ç»“æœ:\")print(f\"å¹³å‡å€¼: {average}\")print(f\"æ–¹å·®: {variance}\")print(f\"æ ‡å‡†å·®: {std_dev}\")print(f\"\\nå››èˆäº”å…¥åçš„ç»Ÿè®¡ç»“æœ:\")for precision in [1, 2, 3, 4]:    print(f\"ç²¾åº¦{precision}:\")    print(f\"  å¹³å‡å€¼: {round(average, precision)}\")    print(f\"  æ–¹å·®: {round(variance, precision)}\")    print(f\"  æ ‡å‡†å·®: {round(std_dev, precision)}\")æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ# æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆprint(\"æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ:\")# 1. æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜æ¼”ç¤ºprint(\"\\n1. æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜:\")# ç»å…¸çš„æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜result1 = 0.1 + 0.2print(f\"0.1 + 0.2 = {result1}\")print(f\"0.1 + 0.2 == 0.3: {result1 == 0.3}\")print(f\"repr(0.1 + 0.2): {repr(result1)}\")# æ›´å¤šç²¾åº¦é—®é¢˜ç¤ºä¾‹problematic_calculations = [    (0.1 + 0.1 + 0.1, 0.3),    (1.1 + 2.2, 3.3),    (0.1 * 3, 0.3),    (1.0 / 3 * 3, 1.0),]print(\"\\næ›´å¤šç²¾åº¦é—®é¢˜ç¤ºä¾‹:\")for calc, expected in problematic_calculations:    print(f\"{calc} == {expected}: {calc == expected}\")    print(f\"  å®é™…å€¼: {repr(calc)}\")    print(f\"  æœŸæœ›å€¼: {repr(expected)}\")    print(f\"  å·®å€¼: {abs(calc - expected)}\")    print()# 2. ä½¿ç”¨round()è§£å†³ç²¾åº¦é—®é¢˜print(\"2. ä½¿ç”¨round()è§£å†³ç²¾åº¦é—®é¢˜:\")def safe_round_compare(a, b, precision=10):    \"\"\"å®‰å…¨çš„æµ®ç‚¹æ•°æ¯”è¾ƒ\"\"\"    return round(a, precision) == round(b, precision)for calc, expected in problematic_calculations:    is_equal_direct = calc == expected    is_equal_rounded = safe_round_compare(calc, expected)        print(f\"è®¡ç®—: {calc} vs æœŸæœ›: {expected}\")    print(f\"  ç›´æ¥æ¯”è¾ƒ: {is_equal_direct}\")    print(f\"  å››èˆäº”å…¥æ¯”è¾ƒ: {is_equal_rounded}\")    print(f\"  å››èˆäº”å…¥åçš„å€¼: {round(calc, 10)}\")    print()# 3. ä¸åŒç²¾åº¦çš„å½±å“print(\"3. ä¸åŒç²¾åº¦å¯¹æ¯”è¾ƒçš„å½±å“:\")test_value = 0.1 + 0.2expected_value = 0.3print(f\"æµ‹è¯•å€¼: {repr(test_value)}\")print(f\"æœŸæœ›å€¼: {repr(expected_value)}\")print(f\"å·®å€¼: {abs(test_value - expected_value)}\")print(\"\\nä¸åŒç²¾åº¦ä¸‹çš„æ¯”è¾ƒç»“æœ:\")for precision in range(15, 0, -1):    rounded_test = round(test_value, precision)    rounded_expected = round(expected_value, precision)    is_equal = rounded_test == rounded_expected        print(f\"ç²¾åº¦{precision:2d}: {rounded_test} == {rounded_expected} -&gt; {is_equal}\")# 4. ä½¿ç”¨Decimalè§£å†³ç²¾åº¦é—®é¢˜print(\"\\n4. ä½¿ç”¨Decimalè§£å†³ç²¾åº¦é—®é¢˜:\")from decimal import Decimal, getcontext# è®¾ç½®Decimalç²¾åº¦getcontext().prec = 28print(\"Decimal vs float æ¯”è¾ƒ:\")# ä½¿ç”¨Decimalè¿›è¡Œç²¾ç¡®è®¡ç®—decimal_result = Decimal('0.1') + Decimal('0.2')float_result = 0.1 + 0.2print(f\"Decimal('0.1') + Decimal('0.2') = {decimal_result}\")print(f\"0.1 + 0.2 = {float_result}\")print(f\"Decimalç»“æœ == 0.3: {decimal_result == Decimal('0.3')}\")print(f\"floatç»“æœ == 0.3: {float_result == 0.3}\")# Decimalçš„å››èˆäº”å…¥print(\"\\nDecimalçš„å››èˆäº”å…¥:\")decimal_pi = Decimal('3.141592653589793')for precision in range(6):    rounded_decimal = round(decimal_pi, precision)    print(f\"round(Decimal(Ï€), {precision}) = {rounded_decimal} (ç±»å‹: {type(rounded_decimal).__name__})\")# 5. å®ç”¨çš„ç²¾åº¦å¤„ç†å‡½æ•°print(\"\\n5. å®ç”¨çš„ç²¾åº¦å¤„ç†å‡½æ•°:\")def round_to_precision(value, precision=2):    \"\"\"å››èˆäº”å…¥åˆ°æŒ‡å®šç²¾åº¦\"\"\"    return round(float(value), precision)def is_close(a, b, rel_tol=1e-09, abs_tol=0.0):    \"\"\"æ£€æŸ¥ä¸¤ä¸ªæ•°æ˜¯å¦æ¥è¿‘ï¼ˆPython 3.5+æœ‰math.iscloseï¼‰\"\"\"    return abs(a - b) &lt;= max(rel_tol * max(abs(a), abs(b)), abs_tol)def format_currency(amount, precision=2):    \"\"\"æ ¼å¼åŒ–è´§å¸é‡‘é¢\"\"\"    rounded = round(amount, precision)    return f\"${rounded:.{precision}f}\"def round_to_nearest(value, nearest=0.05):    \"\"\"å››èˆäº”å…¥åˆ°æœ€è¿‘çš„æŒ‡å®šå€¼ï¼ˆå¦‚0.05ï¼‰\"\"\"    return round(value / nearest) * nearest# æµ‹è¯•å®ç”¨å‡½æ•°test_values = [3.14159, 2.71828, 1.41421, 0.1 + 0.2]print(\"å®ç”¨å‡½æ•°æµ‹è¯•:\")for value in test_values:    print(f\"\\nåŸå€¼: {value}\")    print(f\"  ç²¾åº¦2: {round_to_precision(value, 2)}\")    print(f\"  ç²¾åº¦4: {round_to_precision(value, 4)}\")    print(f\"  è´§å¸æ ¼å¼: {format_currency(value)}\")    print(f\"  æœ€è¿‘0.05: {round_to_nearest(value, 0.05)}\")    print(f\"  æœ€è¿‘0.25: {round_to_nearest(value, 0.25)}\")    print(f\"  ä¸Ï€æ¥è¿‘: {is_close(value, 3.14159)}\")é«˜çº§åº”ç”¨å’Œæœ€ä½³å®è·µ# é«˜çº§åº”ç”¨å’Œæœ€ä½³å®è·µprint(\"round()å‡½æ•°é«˜çº§åº”ç”¨å’Œæœ€ä½³å®è·µ:\")# 1. æ‰¹é‡æ•°æ®å¤„ç†print(\"\\n1. æ‰¹é‡æ•°æ®å¤„ç†:\")import random# ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®random.seed(42)data = [random.uniform(0, 100) for _ in range(10)]print(\"åŸå§‹æ•°æ®:\")for i, value in enumerate(data):    print(f\"  {i+1:2d}: {value:.6f}\")# æ‰¹é‡å››èˆäº”å…¥rounded_data = [round(x, 2) for x in data]print(\"\\nå››èˆäº”å…¥å (ä¿ç•™2ä½):\")for i, (original, rounded) in enumerate(zip(data, rounded_data)):    print(f\"  {i+1:2d}: {original:.6f} -&gt; {rounded}\")# ä½¿ç”¨mapè¿›è¡Œæ‰¹é‡å¤„ç†rounded_data_map = list(map(lambda x: round(x, 3), data))print(\"\\nä½¿ç”¨mapå››èˆäº”å…¥ (ä¿ç•™3ä½):\")for i, rounded in enumerate(rounded_data_map):    print(f\"  {i+1:2d}: {rounded}\")# 2. æ¡ä»¶å››èˆäº”å…¥print(\"\\n2. æ¡ä»¶å››èˆäº”å…¥:\")def smart_round(value, min_precision=0, max_precision=4):    \"\"\"æ™ºèƒ½å››èˆäº”å…¥ï¼šæ ¹æ®æ•°å€¼å¤§å°é€‰æ‹©ç²¾åº¦\"\"\"    if abs(value) &gt;= 1000:        return round(value, min_precision)    elif abs(value) &gt;= 100:        return round(value, min_precision + 1)    elif abs(value) &gt;= 10:        return round(value, min_precision + 2)    elif abs(value) &gt;= 1:        return round(value, min_precision + 3)    else:        return round(value, max_precision)test_values = [0.123456, 1.23456, 12.3456, 123.456, 1234.56, 12345.6]print(\"æ™ºèƒ½å››èˆäº”å…¥ç»“æœ:\")for value in test_values:    smart_rounded = smart_round(value)    print(f\"  {value:10.6f} -&gt; {smart_rounded}\")# 3. ç»Ÿè®¡æ•°æ®çš„å››èˆäº”å…¥print(\"\\n3. ç»Ÿè®¡æ•°æ®å››èˆäº”å…¥:\")class StatisticsRounder:    \"\"\"ç»Ÿè®¡æ•°æ®å››èˆäº”å…¥å™¨\"\"\"        def __init__(self, precision=2):        self.precision = precision        def round_statistics(self, data):        \"\"\"è®¡ç®—å¹¶å››èˆäº”å…¥ç»Ÿè®¡æ•°æ®\"\"\"        if not data:            return {}                n = len(data)        mean = sum(data) / n        variance = sum((x - mean) ** 2 for x in data) / n        std_dev = variance ** 0.5                # è®¡ç®—å…¶ä»–ç»Ÿè®¡é‡        sorted_data = sorted(data)        median = (sorted_data[n//2] + sorted_data[(n-1)//2]) / 2        min_val = min(data)        max_val = max(data)        range_val = max_val - min_val                return {            'count': n,            'mean': round(mean, self.precision),            'median': round(median, self.precision),            'variance': round(variance, self.precision),            'std_dev': round(std_dev, self.precision),            'min': round(min_val, self.precision),            'max': round(max_val, self.precision),            'range': round(range_val, self.precision)        }# æµ‹è¯•ç»Ÿè®¡å››èˆäº”å…¥test_data = [23.456, 24.123, 22.987, 25.345, 23.876, 24.567, 23.234, 25.123]stats_rounder = StatisticsRounder(precision=3)stats = stats_rounder.round_statistics(test_data)print(\"ç»Ÿè®¡æ•°æ®å››èˆäº”å…¥ç»“æœ:\")for key, value in stats.items():    print(f\"  {key}: {value}\")# 4. é‡‘èè®¡ç®—ä¸­çš„å››èˆäº”å…¥print(\"\\n4. é‡‘èè®¡ç®—å››èˆäº”å…¥:\")class FinancialCalculator:    \"\"\"é‡‘èè®¡ç®—å™¨\"\"\"        @staticmethod    def compound_interest(principal, rate, time, precision=2):        \"\"\"å¤åˆ©è®¡ç®—\"\"\"        amount = principal * (1 + rate) ** time        return round(amount, precision)        @staticmethod    def monthly_payment(principal, annual_rate, years, precision=2):        \"\"\"æœˆä¾›è®¡ç®—\"\"\"        monthly_rate = annual_rate / 12        num_payments = years * 12                if monthly_rate == 0:            payment = principal / num_payments        else:            payment = principal * (monthly_rate * (1 + monthly_rate) ** num_payments) / \\                      ((1 + monthly_rate) ** num_payments - 1)                return round(payment, precision)        @staticmethod    def investment_return(initial, final, years, precision=4):        \"\"\"æŠ•èµ„å›æŠ¥ç‡è®¡ç®—\"\"\"        if years == 0 or initial == 0:            return 0                annual_return = (final / initial) ** (1 / years) - 1        return round(annual_return * 100, precision)  # è¿”å›ç™¾åˆ†æ¯”# æµ‹è¯•é‡‘èè®¡ç®—calc = FinancialCalculator()print(\"é‡‘èè®¡ç®—ç¤ºä¾‹:\")# å¤åˆ©è®¡ç®—principal = 10000rate = 0.05  # 5%time = 10final_amount = calc.compound_interest(principal, rate, time)print(f\"å¤åˆ©è®¡ç®—: æœ¬é‡‘${principal}, åˆ©ç‡{rate*100}%, {time}å¹´å = ${final_amount}\")# æœˆä¾›è®¡ç®—loan_amount = 300000annual_rate = 0.04  # 4%years = 30monthly_payment = calc.monthly_payment(loan_amount, annual_rate, years)print(f\"æœˆä¾›è®¡ç®—: è´·æ¬¾${loan_amount}, å¹´åˆ©ç‡{annual_rate*100}%, {years}å¹´ = ${monthly_payment}/æœˆ\")# æŠ•èµ„å›æŠ¥ç‡initial_investment = 10000final_value = 25000investment_years = 8return_rate = calc.investment_return(initial_investment, final_value, investment_years)print(f\"æŠ•èµ„å›æŠ¥: åˆå§‹${initial_investment}, æœ€ç»ˆ${final_value}, {investment_years}å¹´ = {return_rate}%å¹´åŒ–æ”¶ç›Š\")# 5. æ€§èƒ½ä¼˜åŒ–æŠ€å·§print(\"\\n5. æ€§èƒ½ä¼˜åŒ–æŠ€å·§:\")import time# åˆ›å»ºå¤§é‡æµ‹è¯•æ•°æ®large_data = [random.uniform(0, 1000) for _ in range(100000)]# æ–¹æ³•1: ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼start_time = time.time()rounded_list_comp = [round(x, 2) for x in large_data]time_list_comp = time.time() - start_time# æ–¹æ³•2: ä½¿ç”¨mapå‡½æ•°start_time = time.time()rounded_map = list(map(lambda x: round(x, 2), large_data))time_map = time.time() - start_time# æ–¹æ³•3: ä½¿ç”¨numpy (å¦‚æœå¯ç”¨)try:    import numpy as np    np_array = np.array(large_data)        start_time = time.time()    rounded_numpy = np.round(np_array, 2)    time_numpy = time.time() - start_time        print(f\"NumPyæ–¹æ³•: {time_numpy:.6f}ç§’\")except ImportError:    print(\"NumPyæœªå®‰è£…ï¼Œè·³è¿‡NumPyæµ‹è¯•\")    time_numpy = Noneprint(f\"æ•°æ®é‡: {len(large_data):,} ä¸ªæ•°å­—\")print(f\"åˆ—è¡¨æ¨å¯¼å¼: {time_list_comp:.6f}ç§’\")print(f\"mapå‡½æ•°: {time_map:.6f}ç§’\")if time_numpy:    fastest = min(time_list_comp, time_map, time_numpy)    if fastest == time_list_comp:        fastest_method = \"åˆ—è¡¨æ¨å¯¼å¼\"    elif fastest == time_map:        fastest_method = \"mapå‡½æ•°\"    else:        fastest_method = \"NumPy\"else:    fastest = min(time_list_comp, time_map)    fastest_method = \"åˆ—è¡¨æ¨å¯¼å¼\" if fastest == time_list_comp else \"mapå‡½æ•°\"print(f\"æœ€å¿«æ–¹æ³•: {fastest_method}\")# 6. é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µprint(\"\\n6. é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ:\")def safe_round(value, ndigits=None):    \"\"\"å®‰å…¨çš„å››èˆäº”å…¥å‡½æ•°\"\"\"    try:        if ndigits is None:            return round(value)        else:            return round(value, ndigits)    except (TypeError, ValueError, OverflowError) as e:        print(f\"å››èˆäº”å…¥é”™è¯¯: {e}\")        return None    except Exception as e:        print(f\"æœªçŸ¥é”™è¯¯: {e}\")        return None# æµ‹è¯•è¾¹ç•Œæƒ…å†µtest_cases = [    (3.14159, 2),           # æ­£å¸¸æƒ…å†µ    (\"3.14159\", 2),         # å­—ç¬¦ä¸²æ•°å­—    (None, 2),              # Noneå€¼    (3.14159, \"2\"),         # å­—ç¬¦ä¸²ç²¾åº¦    (float('inf'), 2),      # æ— ç©·å¤§    (float('nan'), 2),      # NaN    (complex(3, 4), 2),     # å¤æ•°    (3.14159, -100),        # æå¤§è´Ÿç²¾åº¦    (3.14159, 100),         # æå¤§æ­£ç²¾åº¦]print(\"è¾¹ç•Œæƒ…å†µæµ‹è¯•:\")for value, ndigits in test_cases:    result = safe_round(value, ndigits)    print(f\"safe_round({repr(value)}, {repr(ndigits)}) = {result}\")âš ï¸ æ³¨æ„äº‹é¡¹å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ# round()å‡½æ•°çš„å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µprint(\"round()å‡½æ•°å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ:\")# é™·é˜±1: é“¶è¡Œå®¶èˆå…¥è§„åˆ™print(\"\\né™·é˜±1: é“¶è¡Œå®¶èˆå…¥è§„åˆ™\")print(\"å¾ˆå¤šäººæœŸæœ›çš„ä¼ ç»Ÿå››èˆäº”å…¥ vs å®é™…çš„é“¶è¡Œå®¶èˆå…¥:\")test_values = [0.5, 1.5, 2.5, 3.5, 4.5, 5.5]for value in test_values:    rounded = round(value)    expected_traditional = int(value + 0.5)  # ä¼ ç»Ÿå››èˆäº”å…¥    print(f\"round({value}) = {rounded}, ä¼ ç»Ÿå››èˆäº”å…¥æœŸæœ›: {expected_traditional}, ä¸€è‡´: {rounded == expected_traditional}\")print(\"\\nè§£å†³æ–¹æ¡ˆ: å¦‚æœéœ€è¦ä¼ ç»Ÿå››èˆäº”å…¥ï¼Œå¯ä»¥è‡ªå®šä¹‰å‡½æ•°\")def traditional_round(x):    \"\"\"ä¼ ç»Ÿå››èˆäº”å…¥\"\"\"    return int(x + 0.5) if x &gt;= 0 else int(x - 0.5)print(\"ä¼ ç»Ÿå››èˆäº”å…¥ç»“æœ:\")for value in test_values:    trad_rounded = traditional_round(value)    bank_rounded = round(value)    print(f\"{value}: ä¼ ç»Ÿ={trad_rounded}, é“¶è¡Œå®¶={bank_rounded}\")# é™·é˜±2: æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜print(\"\\né™·é˜±2: æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜\")# çœ‹ä¼¼ç®€å•çš„è®¡ç®—å¯èƒ½äº§ç”Ÿæ„å¤–ç»“æœproblematic_values = [    2.675,   # æœŸæœ›å››èˆäº”å…¥åˆ°2.68ï¼Œä½†å¯èƒ½å¾—åˆ°2.67    1.005,   # æœŸæœ›å››èˆäº”å…¥åˆ°1.01ï¼Œä½†å¯èƒ½å¾—åˆ°1.0    0.545,   # æœŸæœ›å››èˆäº”å…¥åˆ°0.55ï¼Œä½†å¯èƒ½å¾—åˆ°0.54]print(\"æµ®ç‚¹æ•°ç²¾åº¦å¯¼è‡´çš„æ„å¤–ç»“æœ:\")for value in problematic_values:    rounded_2 = round(value, 2)    print(f\"round({value}, 2) = {rounded_2}\")    print(f\"  å†…éƒ¨è¡¨ç¤º: {repr(value)}\")    print(f\"  æœŸæœ›ç»“æœ: {value + 0.005:.2f} (å¯èƒ½ä¸åŒ)\")    print()print(\"è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨Decimalè¿›è¡Œç²¾ç¡®è®¡ç®—\")from decimal import Decimal, ROUND_HALF_UPfor value in problematic_values:    decimal_value = Decimal(str(value))    rounded_decimal = decimal_value.quantize(Decimal('0.01'), rounding=ROUND_HALF_UP)    print(f\"Decimal('{value}').quantize(0.01) = {rounded_decimal}\")# é™·é˜±3: è¿”å›ç±»å‹çš„å˜åŒ–print(\"\\né™·é˜±3: è¿”å›ç±»å‹çš„å˜åŒ–\")test_number = 3.7result_no_digits = round(test_number)      # è¿”å›intresult_with_digits = round(test_number, 1) # è¿”å›floatprint(f\"round({test_number}) = {result_no_digits} (ç±»å‹: {type(result_no_digits).__name__})\")print(f\"round({test_number}, 1) = {result_with_digits} (ç±»å‹: {type(result_with_digits).__name__})\")print(\"\\næ³¨æ„: å³ä½¿ndigits=0ï¼Œè¿”å›ç±»å‹ä¹Ÿæ˜¯float\")result_zero_digits = round(test_number, 0)print(f\"round({test_number}, 0) = {result_zero_digits} (ç±»å‹: {type(result_zero_digits).__name__})\")# é™·é˜±4: è´Ÿæ•°ç²¾åº¦çš„ç†è§£print(\"\\né™·é˜±4: è´Ÿæ•°ç²¾åº¦çš„ç†è§£\")test_value = 1234.5678print(f\"åŸå§‹å€¼: {test_value}\")for ndigits in range(-3, 4):    rounded = round(test_value, ndigits)    print(f\"round({test_value}, {ndigits:2d}) = {rounded:10.4f}\")print(\"\\nè´Ÿæ•°ç²¾åº¦è¯´æ˜:\")print(\"-3: å››èˆäº”å…¥åˆ°åƒä½ (1000çš„å€æ•°)\")print(\"-2: å››èˆäº”å…¥åˆ°ç™¾ä½ (100çš„å€æ•°)\")print(\"-1: å››èˆäº”å…¥åˆ°åä½ (10çš„å€æ•°)\")print(\" 0: å››èˆäº”å…¥åˆ°ä¸ªä½ (æ•´æ•°)\")print(\" 1: ä¿ç•™1ä½å°æ•°\")print(\" 2: ä¿ç•™2ä½å°æ•°\")print(\" 3: ä¿ç•™3ä½å°æ•°\")# é™·é˜±5: é“¾å¼å››èˆäº”å…¥çš„ç´¯ç§¯è¯¯å·®print(\"\\né™·é˜±5: é“¾å¼å››èˆäº”å…¥çš„ç´¯ç§¯è¯¯å·®\")original_value = 1.23456789# é€æ­¥å››èˆäº”å…¥step1 = round(original_value, 6)step2 = round(step1, 4)step3 = round(step2, 2)step4 = round(step3, 0)# ç›´æ¥å››èˆäº”å…¥direct = round(original_value, 0)print(f\"åŸå§‹å€¼: {original_value}\")print(f\"é€æ­¥å››èˆäº”å…¥: {original_value} -&gt; {step1} -&gt; {step2} -&gt; {step3} -&gt; {step4}\")print(f\"ç›´æ¥å››èˆäº”å…¥: {original_value} -&gt; {direct}\")print(f\"ç»“æœä¸€è‡´: {step4 == direct}\")# æ›´æ˜æ˜¾çš„ä¾‹å­problematic_value = 2.5555step_by_step = round(round(round(problematic_value, 3), 2), 1)direct_round = round(problematic_value, 1)print(f\"\\næ›´æ˜æ˜¾çš„ä¾‹å­:\")print(f\"åŸå§‹å€¼: {problematic_value}\")print(f\"é€æ­¥: {problematic_value} -&gt; {round(problematic_value, 3)} -&gt; {round(round(problematic_value, 3), 2)} -&gt; {step_by_step}\")print(f\"ç›´æ¥: {problematic_value} -&gt; {direct_round}\")print(f\"ç»“æœä¸€è‡´: {step_by_step == direct_round}\")# æœ€ä½³å®è·µæ€»ç»“print(\"\\næœ€ä½³å®è·µæ€»ç»“:\")print(\"1. äº†è§£é“¶è¡Œå®¶èˆå…¥è§„åˆ™ï¼Œå¿…è¦æ—¶ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°\")print(\"2. å¯¹äºç²¾ç¡®çš„åè¿›åˆ¶è®¡ç®—ï¼Œä½¿ç”¨Decimalç±»\")print(\"3. æ³¨æ„round()å‡½æ•°çš„è¿”å›ç±»å‹å˜åŒ–\")print(\"4. ç†è§£è´Ÿæ•°ç²¾åº¦çš„å«ä¹‰\")print(\"5. é¿å…é“¾å¼å››èˆäº”å…¥ï¼Œç›´æ¥å››èˆäº”å…¥åˆ°ç›®æ ‡ç²¾åº¦\")print(\"6. åœ¨é‡‘èè®¡ç®—ä¸­ï¼Œè€ƒè™‘ä½¿ç”¨ä¸“é—¨çš„é‡‘èåº“\")print(\"7. æµ‹è¯•è¾¹ç•Œæƒ…å†µå’Œç‰¹æ®Šå€¼\")print(\"8. æ–‡æ¡£åŒ–ä½ çš„èˆå…¥ç­–ç•¥å’Œç²¾åº¦è¦æ±‚\")ğŸ”§ æ€§èƒ½ä¼˜åŒ–round() æ€§èƒ½ä¼˜åŒ–æŠ€å·§# round() æ€§èƒ½ä¼˜åŒ–æŠ€å·§print(\"round() æ€§èƒ½ä¼˜åŒ–æŠ€å·§:\")import timeimport random# åˆ›å»ºæµ‹è¯•æ•°æ®random.seed(42)test_data = [random.uniform(0, 1000) for _ in range(100000)]print(f\"æµ‹è¯•æ•°æ®é‡: {len(test_data):,} ä¸ªæ•°å­—\")# ä¼˜åŒ–æŠ€å·§1: é¿å…é‡å¤çš„ç²¾åº¦å‚æ•°print(\"\\n1. é¿å…é‡å¤çš„ç²¾åº¦å‚æ•°:\")# ä½æ•ˆæ–¹å¼ï¼šæ¯æ¬¡è°ƒç”¨éƒ½ä¼ é€’ç²¾åº¦å‚æ•°def slow_round_list(data, precision):    return [round(x, precision) for x in data]# é«˜æ•ˆæ–¹å¼ï¼šä½¿ç”¨functools.partialé¢„è®¾ç²¾åº¦from functools import partialdef fast_round_list(data, precision):    round_func = partial(round, ndigits=precision)    return [round_func(x) for x in data]# æ€§èƒ½æµ‹è¯•start = time.time()result1 = slow_round_list(test_data[:10000], 2)time1 = time.time() - startstart = time.time()result2 = fast_round_list(test_data[:10000], 2)time2 = time.time() - startprint(f\"ä¼ ç»Ÿæ–¹å¼: {time1:.6f}ç§’\")print(f\"partialæ–¹å¼: {time2:.6f}ç§’\")print(f\"æ€§èƒ½æå‡: {(time1/time2):.2f}x\")print(f\"ç»“æœä¸€è‡´: {result1 == result2}\")# ä¼˜åŒ–æŠ€å·§2: ä½¿ç”¨numpyè¿›è¡Œæ‰¹é‡æ“ä½œprint(\"\\n2. ä½¿ç”¨numpyè¿›è¡Œæ‰¹é‡æ“ä½œ:\")try:    import numpy as np        # è½¬æ¢ä¸ºnumpyæ•°ç»„    np_data = np.array(test_data[:50000])        # PythonåŸç”Ÿæ–¹æ³•    start = time.time()    python_result = [round(x, 2) for x in test_data[:50000]]    python_time = time.time() - start        # NumPyæ–¹æ³•    start = time.time()    numpy_result = np.round(np_data, 2)    numpy_time = time.time() - start        print(f\"PythonåŸç”Ÿ: {python_time:.6f}ç§’\")    print(f\"NumPyæ–¹æ³•: {numpy_time:.6f}ç§’\")    print(f\"æ€§èƒ½æå‡: {(python_time/numpy_time):.2f}x\")        # éªŒè¯ç»“æœä¸€è‡´æ€§ï¼ˆå…è®¸å°çš„æµ®ç‚¹è¯¯å·®ï¼‰    max_diff = max(abs(a - b) for a, b in zip(python_result[:100], numpy_result[:100]))    print(f\"æœ€å¤§å·®å¼‚: {max_diff}\")    except ImportError:    print(\"NumPyæœªå®‰è£…ï¼Œè·³è¿‡NumPyæ€§èƒ½æµ‹è¯•\")# ä¼˜åŒ–æŠ€å·§3: ç¼“å­˜å¸¸ç”¨çš„å››èˆäº”å…¥ç»“æœprint(\"\\n3. ç¼“å­˜å¸¸ç”¨çš„å››èˆäº”å…¥ç»“æœ:\")class RoundCache:    \"\"\"å››èˆäº”å…¥ç¼“å­˜å™¨\"\"\"        def __init__(self, max_cache_size=10000):        self.cache = {}        self.max_cache_size = max_cache_size        def round_cached(self, value, ndigits=0):        \"\"\"å¸¦ç¼“å­˜çš„å››èˆäº”å…¥\"\"\"        key = (value, ndigits)                if key in self.cache:            return self.cache[key]                result = round(value, ndigits)                # ç®€å•çš„ç¼“å­˜å¤§å°æ§åˆ¶        if len(self.cache) &lt; self.max_cache_size:            self.cache[key] = result                return result        def clear_cache(self):        \"\"\"æ¸…ç©ºç¼“å­˜\"\"\"        self.cache.clear()# åˆ›å»ºé‡å¤æ•°æ®è¿›è¡Œæµ‹è¯•repeated_data = [round(random.uniform(0, 100), 1) for _ in range(1000)] * 50random.shuffle(repeated_data)cache_rounder = RoundCache()# æ— ç¼“å­˜æµ‹è¯•start = time.time()no_cache_result = [round(x, 2) for x in repeated_data]no_cache_time = time.time() - start# æœ‰ç¼“å­˜æµ‹è¯•start = time.time()cache_result = [cache_rounder.round_cached(x, 2) for x in repeated_data]cache_time = time.time() - startprint(f\"æ•°æ®é‡: {len(repeated_data):,} (åŒ…å«é‡å¤)\")print(f\"ç¼“å­˜å¤§å°: {len(cache_rounder.cache)}\")print(f\"æ— ç¼“å­˜: {no_cache_time:.6f}ç§’\")print(f\"æœ‰ç¼“å­˜: {cache_time:.6f}ç§’\")print(f\"æ€§èƒ½æå‡: {(no_cache_time/cache_time):.2f}x\")print(f\"ç»“æœä¸€è‡´: {no_cache_result == cache_result}\")# ä¼˜åŒ–æŠ€å·§4: é¢„è®¡ç®—å¸¸ç”¨ç²¾åº¦çš„ä¹˜æ•°print(\"\\n4. é¢„è®¡ç®—ç²¾åº¦ä¹˜æ•°ä¼˜åŒ–:\")class FastRounder:    \"\"\"å¿«é€Ÿå››èˆäº”å…¥å™¨\"\"\"        def __init__(self):        # é¢„è®¡ç®—å¸¸ç”¨ç²¾åº¦çš„ä¹˜æ•°        self.multipliers = {i: 10**i for i in range(-10, 11)}        def fast_round(self, value, ndigits=0):        \"\"\"ä¼˜åŒ–çš„å››èˆäº”å…¥\"\"\"        if ndigits in self.multipliers:            multiplier = self.multipliers[ndigits]            return round(value * multiplier) / multiplier        else:            return round(value, ndigits)fast_rounder = FastRounder()# æ€§èƒ½æµ‹è¯•test_subset = test_data[:20000]# æ ‡å‡†roundstart = time.time()standard_result = [round(x, 3) for x in test_subset]standard_time = time.time() - start# ä¼˜åŒ–roundstart = time.time()fast_result = [fast_rounder.fast_round(x, 3) for x in test_subset]fast_time = time.time() - startprint(f\"æ ‡å‡†round: {standard_time:.6f}ç§’\")print(f\"ä¼˜åŒ–round: {fast_time:.6f}ç§’\")print(f\"æ€§èƒ½å·®å¼‚: {abs(standard_time - fast_time):.6f}ç§’\")# éªŒè¯ç»“æœä¸€è‡´æ€§max_diff = max(abs(a - b) for a, b in zip(standard_result[:100], fast_result[:100]))print(f\"æœ€å¤§å·®å¼‚: {max_diff}\")# ä¼˜åŒ–æŠ€å·§5: å‘é‡åŒ–æ“ä½œprint(\"\\n5. å‘é‡åŒ–æ“ä½œå¯¹æ¯”:\")def vectorized_round(data, precision):    \"\"\"å‘é‡åŒ–å››èˆäº”å…¥\"\"\"    multiplier = 10 ** precision    return [round(x * multiplier) / multiplier for x in data]def batch_round(data, precision, batch_size=1000):    \"\"\"æ‰¹é‡å¤„ç†å››èˆäº”å…¥\"\"\"    result = []    for i in range(0, len(data), batch_size):        batch = data[i:i+batch_size]        batch_result = [round(x, precision) for x in batch]        result.extend(batch_result)    return result# æ€§èƒ½å¯¹æ¯”test_subset = test_data[:30000]methods = [    (\"æ ‡å‡†æ–¹æ³•\", lambda data: [round(x, 2) for x in data]),    (\"å‘é‡åŒ–\", lambda data: vectorized_round(data, 2)),    (\"æ‰¹é‡å¤„ç†\", lambda data: batch_round(data, 2, 1000)),]print(\"ä¸åŒæ–¹æ³•æ€§èƒ½å¯¹æ¯”:\")results = {}for name, method in methods:    start = time.time()    result = method(test_subset)    elapsed = time.time() - start    results[name] = (elapsed, result)    print(f\"  {name}: {elapsed:.6f}ç§’\")# éªŒè¯ç»“æœä¸€è‡´æ€§first_result = list(results.values())[0][1]for name, (time_taken, result) in results.items():    if name != list(results.keys())[0]:        max_diff = max(abs(a - b) for a, b in zip(first_result[:100], result[:100]))        print(f\"  {name}ä¸æ ‡å‡†æ–¹æ³•æœ€å¤§å·®å¼‚: {max_diff}\")print(\"\\næ€§èƒ½ä¼˜åŒ–æ€»ç»“:\")print(\"1. ä½¿ç”¨functools.partialé¢„è®¾å¸¸ç”¨å‚æ•°\")print(\"2. å¯¹äºå¤§é‡æ•°æ®ï¼Œè€ƒè™‘ä½¿ç”¨NumPy\")print(\"3. ç¼“å­˜é‡å¤è®¡ç®—çš„ç»“æœ\")print(\"4. é¢„è®¡ç®—å¸¸ç”¨çš„ç²¾åº¦ä¹˜æ•°\")print(\"5. æ ¹æ®æ•°æ®ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„æ‰¹é‡å¤„ç†ç­–ç•¥\")print(\"6. åœ¨æ€§èƒ½å…³é”®çš„ä»£ç ä¸­ï¼Œè¿›è¡ŒåŸºå‡†æµ‹è¯•\")print(\"7. è€ƒè™‘ä½¿ç”¨ä¸“é—¨çš„æ•°å€¼è®¡ç®—åº“\")ğŸ“š ç›¸å…³å‡½æ•°å’Œæ¨¡å—ç›¸å…³å†…ç½®å‡½æ•°  abs() - ç»å¯¹å€¼å‡½æ•°  int() - æ•´æ•°è½¬æ¢å‡½æ•°  float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•°  min() - æœ€å°å€¼å‡½æ•°  max() - æœ€å¤§å€¼å‡½æ•°  sum() - æ±‚å’Œå‡½æ•°ç›¸å…³æ ‡å‡†åº“æ¨¡å—  decimal - åè¿›åˆ¶æµ®ç‚¹è¿ç®—  fractions - åˆ†æ•°è¿ç®—  math - æ•°å­¦å‡½æ•°  statistics - ç»Ÿè®¡å‡½æ•°  random - éšæœºæ•°ç”Ÿæˆç›¸å…³ç¬¬ä¸‰æ–¹åº“  numpy - æ•°å€¼è®¡ç®—  pandas - æ•°æ®åˆ†æ  scipy - ç§‘å­¦è®¡ç®—ğŸ”— æ‰©å±•é˜…è¯»  Pythonå®˜æ–¹æ–‡æ¡£ - round()  Pythonå®˜æ–¹æ–‡æ¡£ - æµ®ç‚¹è¿ç®—  IEEE 754æ ‡å‡†  é“¶è¡Œå®¶èˆå…¥æ³•  Decimalæ¨¡å—æ–‡æ¡£ğŸ·ï¸ æ ‡ç­¾æ•°å­¦è¿ç®— æ•°å­—å¤„ç† ç²¾åº¦æ§åˆ¶ å››èˆäº”å…¥ æµ®ç‚¹æ•° é“¶è¡Œå®¶èˆå…¥æœ€åæ›´æ–°: 2024-01-15ä½œè€…: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆç‰ˆæœ¬: 1.0",
        "url": "/docs/builtins/round/",
        "category": "builtins",
        "tags": ["æ•°å­¦è¿ç®—","æ•°å­—å¤„ç†","ç²¾åº¦æ§åˆ¶","å››èˆäº”å…¥"]
      }
      
    
  
    
  
    
      ,
      {
        "title": "set() - é›†åˆæ„é€ å‡½æ•°",
        "content": "# set() - é›†åˆæ„é€ å‡½æ•°## ğŸ“ æ¦‚è¿°`set()` æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºåˆ›å»ºé›†åˆå¯¹è±¡æˆ–å°†å…¶ä»–å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºé›†åˆã€‚é›†åˆæ˜¯Pythonä¸­çš„å¯å˜å®¹å™¨ç±»å‹ï¼Œå­˜å‚¨å”¯ä¸€çš„ã€æ— åºçš„å…ƒç´ ï¼Œæ”¯æŒé«˜æ•ˆçš„æˆå‘˜æµ‹è¯•ã€å»é‡å’Œé›†åˆè¿ç®—æ“ä½œï¼Œæ˜¯æ•°æ®å¤„ç†ä¸­é‡è¦çš„æ•°æ®ç»“æ„ã€‚## ğŸ¯ å­¦ä¹ ç›®æ ‡- æŒæ¡set()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•- ç†è§£é›†åˆçš„ç‰¹æ€§å’Œåº”ç”¨åœºæ™¯- å­¦ä¼šä½¿ç”¨é›†åˆè¿›è¡Œå»é‡å’Œé›†åˆè¿ç®—- äº†è§£é›†åˆçš„æ€§èƒ½ç‰¹ç‚¹å’Œæœ€ä½³å®è·µ## ğŸ“‹ å‰ç½®çŸ¥è¯†- PythonåŸºæœ¬æ•°æ®ç±»å‹- å¯è¿­ä»£å¯¹è±¡æ¦‚å¿µ- å“ˆå¸Œè¡¨åŸºç¡€- é›†åˆè®ºåŸºç¡€æ¦‚å¿µ## ğŸ” è¯¦ç»†å†…å®¹### åŸºæœ¬æ¦‚å¿µé›†åˆï¼ˆsetï¼‰æ˜¯Pythonä¸­çš„å¯å˜å®¹å™¨ç±»å‹ï¼Œå­˜å‚¨å”¯ä¸€çš„ã€æ— åºçš„å¯å“ˆå¸Œå…ƒç´ ã€‚`set()` å‡½æ•°æä¾›äº†åˆ›å»ºé›†åˆçš„æ ‡å‡†æ–¹å¼ï¼Œæ”¯æŒä»å„ç§å¯è¿­ä»£å¯¹è±¡æ„å»ºé›†åˆï¼Œå…·æœ‰è‡ªåŠ¨å»é‡çš„ç‰¹æ€§ã€‚### è¯­æ³•æ ¼å¼```python# åˆ›å»ºç©ºé›†åˆset()# ä»å¯è¿­ä»£å¯¹è±¡åˆ›å»ºset(iterable)```### å‚æ•°è¯´æ˜| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ ||--------|------|------|--------|---------|| iterable | iterable | å¦ | æ—  | å¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ |### è¿”å›å€¼- **ç±»å‹**: set- **è¯´æ˜**: æ–°åˆ›å»ºçš„é›†åˆå¯¹è±¡ï¼ŒåŒ…å«å¯è¿­ä»£å¯¹è±¡ä¸­çš„å”¯ä¸€å…ƒç´ ## ğŸ’¡ å®é™…åº”ç”¨### åŸºç¡€ç”¨æ³•```python# åˆ›å»ºç©ºé›†åˆempty_set = set()print(f\"ç©ºé›†åˆ: {empty_set}\")  # è¾“å‡º: ç©ºé›†åˆ: set()print(f\"ç±»å‹: {type(empty_set)}\")  # è¾“å‡º: ç±»å‹: print(f\"é•¿åº¦: {len(empty_set)}\")  # è¾“å‡º: é•¿åº¦: 0# æ³¨æ„ï¼šä¸èƒ½ç”¨{}åˆ›å»ºç©ºé›†åˆï¼Œ{}åˆ›å»ºçš„æ˜¯ç©ºå­—å…¸empty_dict = {}print(f\"ç©ºå­—å…¸ç±»å‹: {type(empty_dict)}\")  # è¾“å‡º: ç©ºå­—å…¸ç±»å‹: # ä»åˆ—è¡¨åˆ›å»ºé›†åˆï¼ˆè‡ªåŠ¨å»é‡ï¼‰list_with_duplicates = [1, 2, 3, 2, 4, 1, 5, 3]set_from_list = set(list_with_duplicates)print(f\"åŸåˆ—è¡¨: {list_with_duplicates}\")print(f\"è½¬æ¢åé›†åˆ: {set_from_list}\")  # è¾“å‡º: è½¬æ¢åé›†åˆ: {1, 2, 3, 4, 5}# ä»å­—ç¬¦ä¸²åˆ›å»ºé›†åˆstring_set = set(\"hello world\")print(f\"å­—ç¬¦ä¸²é›†åˆ: {string_set}\")  # è¾“å‡º: å­—ç¬¦ä¸²é›†åˆ: {'h', 'e', 'l', 'o', ' ', 'w', 'r', 'd'}# ä»å…ƒç»„åˆ›å»ºé›†åˆtuple_set = set((1, 2, 3, 4, 5))print(f\"å…ƒç»„é›†åˆ: {tuple_set}\")  # è¾“å‡º: å…ƒç»„é›†åˆ: {1, 2, 3, 4, 5}# ä»rangeåˆ›å»ºé›†åˆrange_set = set(range(5))print(f\"rangeé›†åˆ: {range_set}\")  # è¾“å‡º: rangeé›†åˆ: {0, 1, 2, 3, 4}# ä»å­—å…¸åˆ›å»ºé›†åˆï¼ˆåªåŒ…å«é”®ï¼‰dict_keys = {'a': 1, 'b': 2, 'c': 3}keys_set = set(dict_keys)print(f\"å­—å…¸é”®é›†åˆ: {keys_set}\")  # è¾“å‡º: å­—å…¸é”®é›†åˆ: {'a', 'b', 'c'}# ä»å­—å…¸å€¼åˆ›å»ºé›†åˆvalues_set = set(dict_keys.values())print(f\"å­—å…¸å€¼é›†åˆ: {values_set}\")  # è¾“å‡º: å­—å…¸å€¼é›†åˆ: {1, 2, 3}# é›†åˆå­—é¢é‡è¯­æ³•literal_set = {1, 2, 3, 4, 5}print(f\"å­—é¢é‡é›†åˆ: {literal_set}\")  # è¾“å‡º: å­—é¢é‡é›†åˆ: {1, 2, 3, 4, 5}print(f\"ä¸set()ç­‰ä»·: {literal_set == set([1, 2, 3, 4, 5])}\")  # è¾“å‡º: ä¸set()ç­‰ä»·: True# åµŒå¥—å¯è¿­ä»£å¯¹è±¡nested_list = [[1, 2], [3, 4], [1, 2], [5, 6]]# æ³¨æ„ï¼šä¸èƒ½ç›´æ¥ä»åµŒå¥—åˆ—è¡¨åˆ›å»ºé›†åˆï¼Œå› ä¸ºåˆ—è¡¨ä¸å¯å“ˆå¸Œtry:    nested_set = set(nested_list)except TypeError as e:    print(f\"åµŒå¥—åˆ—è¡¨é”™è¯¯: {e}\")# æ­£ç¡®æ–¹å¼ï¼šè½¬æ¢ä¸ºå…ƒç»„nested_tuples = [tuple(item) for item in nested_list]nested_set = set(nested_tuples)print(f\"åµŒå¥—å…ƒç»„é›†åˆ: {nested_set}\")  # è¾“å‡º: åµŒå¥—å…ƒç»„é›†åˆ: {(1, 2), (3, 4), (5, 6)}```### æ•°æ®å»é‡```python# åŸºæœ¬å»é‡def remove_duplicates(data):    \"\"\"ç§»é™¤é‡å¤å…ƒç´ \"\"\"    return list(set(data))# æµ‹è¯•æ•°æ®å»é‡test_data = [1, 2, 3, 2, 4, 1, 5, 3, 6, 4]print(f\"åŸå§‹æ•°æ®: {test_data}\")print(f\"å»é‡å: {remove_duplicates(test_data)}\")# ä¿æŒé¡ºåºçš„å»é‡def remove_duplicates_ordered(data):    \"\"\"ä¿æŒåŸå§‹é¡ºåºçš„å»é‡\"\"\"    seen = set()    result = []    for item in data:        if item not in seen:            seen.add(item)            result.append(item)    return resultprint(f\"ä¿æŒé¡ºåºå»é‡: {remove_duplicates_ordered(test_data)}\")# å­—ç¬¦ä¸²å»é‡text = \"hello world programming\"unique_chars = set(text)print(f\"åŸæ–‡æœ¬: '{text}'\")print(f\"å”¯ä¸€å­—ç¬¦: {sorted(unique_chars)}\")print(f\"å­—ç¬¦æ•°é‡: {len(unique_chars)}\")# å•è¯å»é‡sentence = \"the quick brown fox jumps over the lazy dog the fox is quick\"words = sentence.split()unique_words = set(words)print(f\"\\nåŸå¥å­: {sentence}\")print(f\"æ‰€æœ‰å•è¯: {words}\")print(f\"å”¯ä¸€å•è¯: {sorted(unique_words)}\")print(f\"å•è¯æ€»æ•°: {len(words)}, å”¯ä¸€å•è¯æ•°: {len(unique_words)}\")# å¤æ‚æ•°æ®ç»“æ„å»é‡students = [    {'name': 'Alice', 'age': 20, 'major': 'CS'},    {'name': 'Bob', 'age': 21, 'major': 'Math'},    {'name': 'Alice', 'age': 20, 'major': 'CS'},  # é‡å¤    {'name': 'Charlie', 'age': 19, 'major': 'Physics'},    {'name': 'Bob', 'age': 21, 'major': 'Math'},  # é‡å¤]# å­—å…¸ä¸èƒ½ç›´æ¥æ”¾å…¥é›†åˆï¼Œéœ€è¦è½¬æ¢def deduplicate_dicts(dict_list, key_func=None):    \"\"\"å­—å…¸åˆ—è¡¨å»é‡\"\"\"    if key_func is None:        # ä½¿ç”¨æ‰€æœ‰é”®å€¼å¯¹ä½œä¸ºæ ‡è¯†        key_func = lambda d: tuple(sorted(d.items()))        seen_keys = set()    result = []        for item in dict_list:        key = key_func(item)        if key not in seen_keys:            seen_keys.add(key)            result.append(item)        return resultunique_students = deduplicate_dicts(students)print(f\"\\nå­¦ç”Ÿæ€»æ•°: {len(students)}\")print(f\"å»é‡åå­¦ç”Ÿæ•°: {len(unique_students)}\")for student in unique_students:    print(f\"  {student}\")# æŒ‰ç‰¹å®šå­—æ®µå»é‡unique_by_name = deduplicate_dicts(students, lambda d: d['name'])print(f\"\\næŒ‰å§“åå»é‡:\")for student in unique_by_name:    print(f\"  {student}\")# æ–‡ä»¶å†…å®¹å»é‡def deduplicate_lines(text):    \"\"\"æ–‡æœ¬è¡Œå»é‡\"\"\"    lines = text.strip().split('\\n')    unique_lines = []    seen = set()        for line in lines:        line = line.strip()        if line and line not in seen:            seen.add(line)            unique_lines.append(line)        return '\\n'.join(unique_lines)sample_text = \"\"\"applebananaapplecherrybananadateapplefig\"\"\"print(f\"\\nåŸå§‹æ–‡æœ¬:\")print(sample_text)print(f\"\\nå»é‡å:\")print(deduplicate_lines(sample_text))```### é›†åˆè¿ç®—```python# åŸºæœ¬é›†åˆè¿ç®—set_a = {1, 2, 3, 4, 5}set_b = {4, 5, 6, 7, 8}set_c = {1, 2, 3}print(f\"é›†åˆA: {set_a}\")print(f\"é›†åˆB: {set_b}\")print(f\"é›†åˆC: {set_c}\")# å¹¶é›†ï¼ˆunionï¼‰union_ab = set_a | set_b  # æˆ–è€… set_a.union(set_b)print(f\"\\nA âˆª B: {union_ab}\")print(f\"A.union(B): {set_a.union(set_b)}\")# äº¤é›†ï¼ˆintersectionï¼‰intersection_ab = set_a & set_b  # æˆ–è€… set_a.intersection(set_b)print(f\"A âˆ© B: {intersection_ab}\")print(f\"A.intersection(B): {set_a.intersection(set_b)}\")# å·®é›†ï¼ˆdifferenceï¼‰difference_ab = set_a - set_b  # æˆ–è€… set_a.difference(set_b)difference_ba = set_b - set_aprint(f\"A - B: {difference_ab}\")print(f\"B - A: {difference_ba}\")# å¯¹ç§°å·®é›†ï¼ˆsymmetric differenceï¼‰sym_diff_ab = set_a ^ set_b  # æˆ–è€… set_a.symmetric_difference(set_b)print(f\"A â–³ B: {sym_diff_ab}\")print(f\"A.symmetric_difference(B): {set_a.symmetric_difference(set_b)}\")# å­é›†å’Œè¶…é›†æ£€æŸ¥print(f\"\\nå­é›†å’Œè¶…é›†å…³ç³»:\")print(f\"C âŠ† A (Cæ˜¯Açš„å­é›†): {set_c = set_c}\")print(f\"A âŠƒ C (Aæ˜¯Cçš„çœŸè¶…é›†): {set_a > set_c}\")# ä¸ç›¸äº¤æ£€æŸ¥print(f\"Aå’ŒBä¸ç›¸äº¤: {set_a.isdisjoint(set_b)}\")print(f\"Aå’Œ{10, 11, 12}ä¸ç›¸äº¤: {set_a.isdisjoint({10, 11, 12})}\")# å¤šé›†åˆè¿ç®—sets = [set_a, set_b, set_c]all_union = set().union(*sets)all_intersection = set_a.intersection(*sets[1:])print(f\"\\nå¤šé›†åˆè¿ç®—:\")print(f\"æ‰€æœ‰é›†åˆå¹¶é›†: {all_union}\")print(f\"æ‰€æœ‰é›†åˆäº¤é›†: {all_intersection}\")# å®é™…åº”ç”¨ï¼šæƒé™ç®¡ç†user_permissions = {    'alice': {'read', 'write', 'execute'},    'bob': {'read', 'write'},    'charlie': {'read'},    'admin': {'read', 'write', 'execute', 'delete', 'admin'}}required_permissions = {'read', 'write'}admin_permissions = {'admin', 'delete'}print(f\"\\næƒé™ç®¡ç†ç¤ºä¾‹:\")for user, perms in user_permissions.items():    has_required = required_permissions = 2:        common_words = text_vocabularies[0]        for vocab in text_vocabularies[1:]:            common_words &= vocab                print(f\"æ‰€æœ‰æ–‡æœ¬å…±åŒè¯æ±‡: {len(common_words)}\")        if common_words:            print(f\"å…±åŒè¯æ±‡: {sorted(common_words)}\")        # è®¡ç®—æ¯ä¸ªæ–‡æœ¬çš„ç‹¬ç‰¹è¯æ±‡    for i, vocab in enumerate(text_vocabularies):        unique_words = vocab        for j, other_vocab in enumerate(text_vocabularies):            if i != j:                unique_words -= other_vocab                print(f\"æ–‡æœ¬{i+1}ç‹¬ç‰¹è¯æ±‡: {len(unique_words)}\")        if unique_words:            print(f\"  {sorted(unique_words)}\")        return {        'total_vocabulary': all_words,        'text_vocabularies': text_vocabularies,        'common_words': common_words if len(text_vocabularies) >= 2 else set()    }# æµ‹è¯•æ–‡æœ¬åˆ†æsample_texts = [    \"Python is a powerful programming language\",    \"Programming with Python is fun and easy\",    \"Machine learning uses Python for data analysis\"]analysis = analyze_text_vocabulary(sample_texts)# æ¨èç³»ç»Ÿï¼šåŸºäºé›†åˆçš„ç›¸ä¼¼åº¦def calculate_jaccard_similarity(set1, set2):    \"\"\"è®¡ç®—Jaccardç›¸ä¼¼åº¦\"\"\"    intersection = len(set1 & set2)    union = len(set1 | set2)    return intersection / union if union > 0 else 0def recommend_items(user_items, all_user_items, threshold=0.3):    \"\"\"åŸºäºç”¨æˆ·ç‰©å“é›†åˆçš„æ¨è\"\"\"    recommendations = set()        for other_user, other_items in all_user_items.items():        similarity = calculate_jaccard_similarity(user_items, other_items)                if similarity >= threshold:            # æ¨èå…¶ä»–ç”¨æˆ·æœ‰ä½†å½“å‰ç”¨æˆ·æ²¡æœ‰çš„ç‰©å“            new_items = other_items - user_items            recommendations.update(new_items)            print(f\"ä¸ç”¨æˆ·{other_user}ç›¸ä¼¼åº¦: {similarity:.3f}, æ–°ç‰©å“: {new_items}\")        return recommendations# ç”¨æˆ·è´­ä¹°è®°å½•user_purchases = {    'alice': {'laptop', 'mouse', 'keyboard', 'monitor'},    'bob': {'laptop', 'mouse', 'headphones', 'webcam'},    'charlie': {'tablet', 'stylus', 'case', 'charger'},    'diana': {'laptop', 'mouse', 'keyboard', 'headphones'},    'eve': {'monitor', 'keyboard', 'speakers', 'webcam'}}current_user_items = {'laptop', 'mouse'}print(f\"\\nå½“å‰ç”¨æˆ·ç‰©å“: {current_user_items}\")print(f\"æ¨èç‰©å“:\")recommended = recommend_items(current_user_items, user_purchases)print(f\"\\næœ€ç»ˆæ¨è: {recommended}\")# æ•°æ®è´¨é‡æ£€æŸ¥def check_data_quality(datasets):    \"\"\"æ£€æŸ¥æ•°æ®é›†è´¨é‡\"\"\"    print(\"æ•°æ®è´¨é‡æ£€æŸ¥:\")        for name, data in datasets.items():        data_set = set(data)        duplicates = len(data) - len(data_set)                print(f\"\\n{name}:\")        print(f\"  æ€»è®°å½•æ•°: {len(data)}\")        print(f\"  å”¯ä¸€è®°å½•æ•°: {len(data_set)}\")        print(f\"  é‡å¤è®°å½•æ•°: {duplicates}\")        print(f\"  é‡å¤ç‡: {duplicates/len(data)*100:.1f}%\")                # æ£€æŸ¥ç©ºå€¼        empty_values = sum(1 for item in data if not item or str(item).strip() == '')        print(f\"  ç©ºå€¼æ•°é‡: {empty_values}\")                # æ£€æŸ¥æ•°æ®ç±»å‹ä¸€è‡´æ€§        types = set(type(item).__name__ for item in data_set)        print(f\"  æ•°æ®ç±»å‹: {types}\")                if len(types) > 1:            print(f\"  âš ï¸ è­¦å‘Šï¼šæ•°æ®ç±»å‹ä¸ä¸€è‡´\")# æµ‹è¯•æ•°æ®è´¨é‡æ£€æŸ¥test_datasets = {    'user_ids': [1, 2, 3, 2, 4, 5, 1, 6, 7, 3],    'emails': ['a@test.com', 'b@test.com', '', 'c@test.com', 'a@test.com', None],    'scores': [85, 92, 78, 85, 90, 88, 92, 76, 85]}check_data_quality(test_datasets)```### æ€§èƒ½ä¼˜åŒ–```pythonimport timeimport random# æˆå‘˜æµ‹è¯•æ€§èƒ½æ¯”è¾ƒdef performance_comparison():    \"\"\"æ€§èƒ½æ¯”è¾ƒæµ‹è¯•\"\"\"    # åˆ›å»ºæµ‹è¯•æ•°æ®    n = 100000    test_list = list(range(n))    test_set = set(test_list)    test_tuple = tuple(test_list)        # éšæœºé€‰æ‹©æµ‹è¯•å…ƒç´     test_elements = random.sample(test_list, 1000)        print(f\"æ€§èƒ½æµ‹è¯•ï¼ˆæ•°æ®é‡: {n:,}ï¼Œæµ‹è¯•æ¬¡æ•°: {len(test_elements)}ï¼‰:\")        # åˆ—è¡¨æˆå‘˜æµ‹è¯•    start_time = time.time()    for element in test_elements:        _ = element in test_list    list_time = time.time() - start_time        # é›†åˆæˆå‘˜æµ‹è¯•    start_time = time.time()    for element in test_elements:        _ = element in test_set    set_time = time.time() - start_time        # å…ƒç»„æˆå‘˜æµ‹è¯•    start_time = time.time()    for element in test_elements:        _ = element in test_tuple    tuple_time = time.time() - start_time        print(f\"åˆ—è¡¨æŸ¥æ‰¾æ—¶é—´: {list_time:.6f}ç§’\")    print(f\"é›†åˆæŸ¥æ‰¾æ—¶é—´: {set_time:.6f}ç§’\")    print(f\"å…ƒç»„æŸ¥æ‰¾æ—¶é—´: {tuple_time:.6f}ç§’\")        if set_time > 0:        print(f\"é›†åˆæ¯”åˆ—è¡¨å¿«: {list_time/set_time:.1f}å€\")        print(f\"é›†åˆæ¯”å…ƒç»„å¿«: {tuple_time/set_time:.1f}å€\")performance_comparison()# é›†åˆæ“ä½œæ€§èƒ½def set_operations_performance():    \"\"\"é›†åˆæ“ä½œæ€§èƒ½æµ‹è¯•\"\"\"    # åˆ›å»ºå¤§å‹é›†åˆ    set1 = set(range(50000))    set2 = set(range(25000, 75000))        print(f\"\\né›†åˆæ“ä½œæ€§èƒ½æµ‹è¯•:\")    print(f\"é›†åˆ1å¤§å°: {len(set1):,}\")    print(f\"é›†åˆ2å¤§å°: {len(set2):,}\")        operations = [        ('å¹¶é›†', lambda: set1 | set2),        ('äº¤é›†', lambda: set1 & set2),        ('å·®é›†', lambda: set1 - set2),        ('å¯¹ç§°å·®é›†', lambda: set1 ^ set2)    ]        for name, operation in operations:        start_time = time.time()        result = operation()        end_time = time.time()                print(f\"{name}: {end_time - start_time:.6f}ç§’, ç»“æœå¤§å°: {len(result):,}\")set_operations_performance()# å†…å­˜ä½¿ç”¨æ¯”è¾ƒimport sysdef memory_comparison():    \"\"\"å†…å­˜ä½¿ç”¨æ¯”è¾ƒ\"\"\"    data = list(range(10000))        # ä¸åŒæ•°æ®ç»“æ„çš„å†…å­˜ä½¿ç”¨    list_obj = list(data)    set_obj = set(data)    tuple_obj = tuple(data)        print(f\"\\nå†…å­˜ä½¿ç”¨æ¯”è¾ƒï¼ˆ{len(data):,}ä¸ªå…ƒç´ ï¼‰:\")    print(f\"åˆ—è¡¨: {sys.getsizeof(list_obj):,} å­—èŠ‚\")    print(f\"é›†åˆ: {sys.getsizeof(set_obj):,} å­—èŠ‚\")    print(f\"å…ƒç»„: {sys.getsizeof(tuple_obj):,} å­—èŠ‚\")        # è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å¹³å‡å†…å­˜å¼€é”€    print(f\"\\næ¯å…ƒç´ å†…å­˜å¼€é”€:\")    print(f\"åˆ—è¡¨: {sys.getsizeof(list_obj)/len(data):.2f} å­—èŠ‚/å…ƒç´ \")    print(f\"é›†åˆ: {sys.getsizeof(set_obj)/len(data):.2f} å­—èŠ‚/å…ƒç´ \")    print(f\"å…ƒç»„: {sys.getsizeof(tuple_obj)/len(data):.2f} å­—èŠ‚/å…ƒç´ \")memory_comparison()# é›†åˆåˆ›å»ºæ–¹å¼æ€§èƒ½æ¯”è¾ƒdef creation_performance():    \"\"\"é›†åˆåˆ›å»ºæ€§èƒ½æ¯”è¾ƒ\"\"\"    data = list(range(10000))        print(f\"\\né›†åˆåˆ›å»ºæ€§èƒ½æ¯”è¾ƒ:\")        # æ–¹æ³•1: set()æ„é€ å‡½æ•°    start_time = time.time()    set1 = set(data)    time1 = time.time() - start_time        # æ–¹æ³•2: é›†åˆæ¨å¯¼å¼    start_time = time.time()    set2 = {x for x in data}    time2 = time.time() - start_time        # æ–¹æ³•3: å¾ªç¯æ·»åŠ     start_time = time.time()    set3 = set()    for x in data:        set3.add(x)    time3 = time.time() - start_time        # æ–¹æ³•4: å­—é¢é‡ï¼ˆå°æ•°æ®é›†ï¼‰    small_data = list(range(100))    start_time = time.time()    set4 = {0, 1, 2, 3, 4}  # ç¤ºä¾‹    time4 = time.time() - start_time        print(f\"set()æ„é€ : {time1:.6f}ç§’\")    print(f\"é›†åˆæ¨å¯¼å¼: {time2:.6f}ç§’\")    print(f\"å¾ªç¯æ·»åŠ : {time3:.6f}ç§’\")        # éªŒè¯ç»“æœä¸€è‡´æ€§    print(f\"\\nç»“æœä¸€è‡´æ€§æ£€æŸ¥:\")    print(f\"set1 == set2: {set1 == set2}\")    print(f\"set2 == set3: {set2 == set3}\")creation_performance()```## âš ï¸ æ³¨æ„äº‹é¡¹### å…ƒç´ è¦æ±‚```python# é›†åˆå…ƒç´ å¿…é¡»æ˜¯å¯å“ˆå¸Œçš„print(\"é›†åˆå…ƒç´ è¦æ±‚:\")# æœ‰æ•ˆçš„å…ƒç´ ç±»å‹valid_elements = {    'string',    42,    3.14,    (1, 2, 3),    frozenset([1, 2, 3]),    True}print(f\"æœ‰æ•ˆå…ƒç´ é›†åˆ: {valid_elements}\")# æ— æ•ˆçš„å…ƒç´ ç±»å‹print(\"\\næ— æ•ˆå…ƒç´ ç±»å‹ç¤ºä¾‹:\")invalid_elements = [    ([1, 2, 3], \"åˆ—è¡¨\"),    ({1, 2, 3}, \"é›†åˆ\"),    ({'a': 1}, \"å­—å…¸\")]for invalid_element, description in invalid_elements:    try:        test_set = {invalid_element}    except TypeError as e:        print(f\"  {description}: {e}\")# å¯å˜å¯¹è±¡çš„å¤„ç†print(\"\\nå¯å˜å¯¹è±¡å¤„ç†:\")original_list = [1, 2, 3]print(f\"åŸå§‹åˆ—è¡¨: {original_list}\")# è½¬æ¢ä¸ºä¸å¯å˜ç±»å‹immutable_tuple = tuple(original_list)test_set = {immutable_tuple}print(f\"è½¬æ¢ä¸ºå…ƒç»„åå¯ä»¥åŠ å…¥é›†åˆ: {test_set}\")# åµŒå¥—ç»“æ„çš„å¤„ç†nested_data = [[1, 2], [3, 4], [1, 2]]print(f\"\\nåµŒå¥—åˆ—è¡¨: {nested_data}\")# è½¬æ¢ä¸ºå¯å“ˆå¸Œçš„å…ƒç»„hashable_data = [tuple(item) for item in nested_data]unique_tuples = set(hashable_data)print(f\"è½¬æ¢ä¸ºå…ƒç»„é›†åˆ: {unique_tuples}\")# è‡ªå®šä¹‰å¯¹è±¡çš„å“ˆå¸Œclass Point:    def __init__(self, x, y):        self.x = x        self.y = y        def __hash__(self):        return hash((self.x, self.y))        def __eq__(self, other):        return isinstance(other, Point) and self.x == other.x and self.y == other.y        def __repr__(self):        return f\"Point({self.x}, {self.y})\"# æµ‹è¯•è‡ªå®šä¹‰å¯¹è±¡points = [Point(1, 2), Point(3, 4), Point(1, 2), Point(5, 6)]point_set = set(points)print(f\"\\nç‚¹å¯¹è±¡é›†åˆ: {point_set}\")print(f\"åŸå§‹ç‚¹æ•°: {len(points)}, å”¯ä¸€ç‚¹æ•°: {len(point_set)}\")```### å¸¸è§é™·é˜±```python# ç©ºé›†åˆåˆ›å»ºé™·é˜±print(\"ç©ºé›†åˆåˆ›å»ºé™·é˜±:\")# é”™è¯¯æ–¹å¼empty_dict = {}  # è¿™æ˜¯å­—å…¸ï¼Œä¸æ˜¯é›†åˆprint(f\"{{}} çš„ç±»å‹: {type(empty_dict)}\")# æ­£ç¡®æ–¹å¼empty_set = set()print(f\"set() çš„ç±»å‹: {type(empty_set)}\")# é›†åˆæ˜¯æ— åºçš„print(\"\\né›†åˆæ— åºæ€§:\")for i in range(3):    test_set = set([3, 1, 4, 1, 5, 9, 2, 6])    print(f\"ç¬¬{i+1}æ¬¡åˆ›å»º: {test_set}\")# é›†åˆä¿®æ”¹æ—¶çš„è¿­ä»£é™·é˜±print(\"\\nè¿­ä»£æ—¶ä¿®æ”¹é›†åˆçš„é™·é˜±:\")test_set = {1, 2, 3, 4, 5, 6}print(f\"åŸå§‹é›†åˆ: {test_set}\")# é”™è¯¯çš„æ–¹å¼ï¼ˆå¯èƒ½å¯¼è‡´RuntimeErrorï¼‰try:    for item in test_set:        if item % 2 == 0:            test_set.remove(item)  # åœ¨è¿­ä»£æ—¶ä¿®æ”¹é›†åˆexcept RuntimeError as e:    print(f\"è¿­ä»£æ—¶ä¿®æ”¹é”™è¯¯: {e}\")# æ­£ç¡®çš„æ–¹å¼1ï¼šå…ˆæ”¶é›†è¦åˆ é™¤çš„å…ƒç´ test_set = {1, 2, 3, 4, 5, 6}to_remove = []for item in test_set:    if item % 2 == 0:        to_remove.append(item)for item in to_remove:    test_set.remove(item)print(f\"æ­£ç¡®åˆ é™¤å: {test_set}\")# æ­£ç¡®çš„æ–¹å¼2ï¼šä½¿ç”¨é›†åˆæ¨å¯¼å¼original_set = {1, 2, 3, 4, 5, 6}filtered_set = {item for item in original_set if item % 2 != 0}print(f\"æ¨å¯¼å¼è¿‡æ»¤: {filtered_set}\")# é›†åˆä¸åˆ—è¡¨çš„è½¬æ¢é¡ºåºé—®é¢˜print(\"\\né›†åˆä¸åˆ—è¡¨è½¬æ¢çš„é¡ºåºé—®é¢˜:\")original_list = [3, 1, 4, 1, 5, 9, 2, 6, 5]print(f\"åŸå§‹åˆ—è¡¨: {original_list}\")# é€šè¿‡é›†åˆå»é‡ä¼šä¸¢å¤±é¡ºåºdeduped_unordered = list(set(original_list))print(f\"é›†åˆå»é‡ï¼ˆæ— åºï¼‰: {deduped_unordered}\")# ä¿æŒé¡ºåºçš„å»é‡def ordered_unique(lst):    seen = set()    result = []    for item in lst:        if item not in seen:            seen.add(item)            result.append(item)    return resultdeduped_ordered = ordered_unique(original_list)print(f\"ä¿æŒé¡ºåºå»é‡: {deduped_ordered}\")# é›†åˆæ¯”è¾ƒçš„é™·é˜±print(\"\\né›†åˆæ¯”è¾ƒé™·é˜±:\")set1 = {1, 2, 3}set2 = {3, 2, 1}set3 = {1, 2}print(f\"set1: {set1}\")print(f\"set2: {set2}\")print(f\"set3: {set3}\")print(f\"set1 == set2: {set1 == set2}\")  # Trueï¼Œé›†åˆç›¸ç­‰ä¸è€ƒè™‘é¡ºåºprint(f\"set1 > set3: {set1 > set3}\")    # Trueï¼Œset1æ˜¯set3çš„è¶…é›†print(f\"set3  set5  # è¿™ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œä½†ç»“æœæ˜¯False    print(f\"{set4} > {set5}: {result}\")  # Falseï¼Œå› ä¸º{10}ä¸åŒ…å«{1,2,3}except Exception as e:    print(f\"æ¯”è¾ƒé”™è¯¯: {e}\")# é›†åˆçš„æµ…æ‹·è´é—®é¢˜print(\"\\né›†åˆæµ…æ‹·è´é—®é¢˜:\")original_set = {(1, [2, 3]), (4, [5, 6])}  # è¿™ä¼šå‡ºé”™ï¼Œå› ä¸ºåˆ—è¡¨ä¸å¯å“ˆå¸Œ# æ­£ç¡®çš„æ–¹å¼original_set = {(1, (2, 3)), (4, (5, 6))}copied_set = set(original_set)  # æµ…æ‹·è´print(f\"åŸå§‹é›†åˆ: {original_set}\")print(f\"æ‹·è´é›†åˆ: {copied_set}\")print(f\"æ˜¯å¦åŒä¸€å¯¹è±¡: {original_set is copied_set}\")print(f\"å†…å®¹æ˜¯å¦ç›¸ç­‰: {original_set == copied_set}\")# å¯¹äºåŒ…å«å¯å˜å¯¹è±¡çš„æƒ…å†µï¼Œéœ€è¦æ·±æ‹·è´import copyclass MutablePoint:    def __init__(self, x, y):        self.x = x        self.y = y        self.metadata = []        def __hash__(self):        return hash((self.x, self.y))        def __eq__(self, other):        return isinstance(other, MutablePoint) and self.x == other.x and self.y == other.y        def __repr__(self):        return f\"MutablePoint({self.x}, {self.y}, {self.metadata})\"point1 = MutablePoint(1, 2)point1.metadata.append(\"info\")original_set = {point1}shallow_copy = set(original_set)deep_copy = copy.deepcopy(original_set)print(f\"\\nå¯å˜å¯¹è±¡é›†åˆ:\")print(f\"åŸå§‹: {original_set}\")print(f\"æµ…æ‹·è´: {shallow_copy}\")print(f\"æ·±æ‹·è´: {deep_copy}\")# ä¿®æ”¹åŸå§‹å¯¹è±¡point1.metadata.append(\"modified\")print(f\"\\nä¿®æ”¹å:\")print(f\"åŸå§‹: {original_set}\")print(f\"æµ…æ‹·è´: {shallow_copy}\")print(f\"æ·±æ‹·è´: {deep_copy}\")```## ğŸ”— ç›¸å…³å†…å®¹### ç›¸å…³å‡½æ•°- [list() - åˆ—è¡¨æ„é€ å‡½æ•°](list.md) - åˆ›å»ºåˆ—è¡¨- [tuple() - å…ƒç»„æ„é€ å‡½æ•°](tuple.md) - åˆ›å»ºå…ƒç»„- [dict() - å­—å…¸æ„é€ å‡½æ•°](dict.md) - åˆ›å»ºå­—å…¸- [frozenset() - ä¸å¯å˜é›†åˆ](frozenset.md) - åˆ›å»ºä¸å¯å˜é›†åˆ- [len() - é•¿åº¦å‡½æ•°](len.md) - è·å–é•¿åº¦- [any() - ä»»æ„ä¸ºçœŸ](any.md) - æ£€æŸ¥ä»»æ„å…ƒç´ - [all() - å…¨éƒ¨ä¸ºçœŸ](all.md) - æ£€æŸ¥æ‰€æœ‰å…ƒç´ ### ç›¸å…³æ¨¡å—- [collectionsæ¨¡å—](../stdlib/collections.md) - å®¹å™¨æ•°æ®ç±»å‹- [itertoolsæ¨¡å—](../stdlib/itertools.md) - è¿­ä»£å·¥å…·- [copyæ¨¡å—](../stdlib/copy.md) - æ‹·è´æ“ä½œ- [operatoræ¨¡å—](../stdlib/operator.md) - æ“ä½œç¬¦å‡½æ•°### ç›¸å…³æ¦‚å¿µ- [é›†åˆæ¨å¯¼å¼](../basics/set-comprehensions.md) - é›†åˆç”Ÿæˆ- [å“ˆå¸Œè¡¨](../advanced/hash-tables.md) - åº•å±‚å®ç°- [é›†åˆè®º](../math/set-theory.md) - æ•°å­¦åŸºç¡€- [æ•°æ®ç»“æ„](../basics/data-structures.md) - æ•°æ®ç»„ç»‡## ğŸ“š æ‰©å±•é˜…è¯»- [Pythonå®˜æ–¹æ–‡æ¡£ - set()](https://docs.python.org/3/library/functions.html#func-set)- [Pythonå®˜æ–¹æ–‡æ¡£ - é›†åˆç±»å‹](https://docs.python.org/3/library/stdtypes.html#set)- [é›†åˆæ¨å¯¼å¼](https://docs.python.org/3/tutorial/datastructures.html#sets)- [é›†åˆæ“ä½œ](https://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset)## ğŸ·ï¸ æ ‡ç­¾`ç±»å‹è½¬æ¢` `å®¹å™¨` `é›†åˆ` `å¯å˜ç±»å‹` `å“ˆå¸Œè¡¨` `å»é‡` `é›†åˆè¿ç®—`---**æœ€åæ›´æ–°**: 2024-01-15  **ä½œè€…**: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ  **ç‰ˆæœ¬**: 1.0",
        "url": "/docs/builtins/set/",
        "category": "builtins",
        "tags": ["ç±»å‹è½¬æ¢","å®¹å™¨","é›†åˆ","å¯å˜"]
      }
      
    
  
    
      ,
      {
        "title": "slice() - åˆ‡ç‰‡å¯¹è±¡åˆ›å»ºå‡½æ•°",
        "content": "# slice() - åˆ‡ç‰‡å¯¹è±¡åˆ›å»ºå‡½æ•°## ğŸ“ æ¦‚è¿°`slice()` æ˜¯Pythonä¸­ç”¨äºåˆ›å»ºåˆ‡ç‰‡å¯¹è±¡çš„å†…ç½®å‡½æ•°ã€‚åˆ‡ç‰‡å¯¹è±¡å¯ä»¥ç”¨äºå¯¹åºåˆ—ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰è¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼Œæä¾›äº†æ¯”ç›´æ¥ä½¿ç”¨åˆ‡ç‰‡è¯­æ³•æ›´çµæ´»çš„æ–¹å¼æ¥å¤„ç†åºåˆ—æ•°æ®ã€‚é€šè¿‡sliceå¯¹è±¡ï¼Œå¯ä»¥å®ç°åŠ¨æ€åˆ‡ç‰‡ã€åˆ‡ç‰‡å¤ç”¨å’Œæ›´å¤æ‚çš„åºåˆ—æ“ä½œã€‚## ğŸ¯ å­¦ä¹ ç›®æ ‡- æŒæ¡slice()å‡½æ•°çš„åŸºæœ¬è¯­æ³•å’Œç”¨æ³•- ç†è§£åˆ‡ç‰‡å¯¹è±¡çš„å·¥ä½œåŸç†å’Œåº”ç”¨åœºæ™¯- å­¦ä¼šä½¿ç”¨sliceå¯¹è±¡è¿›è¡Œå¤æ‚çš„åºåˆ—æ“ä½œ- äº†è§£sliceå¯¹è±¡ä¸åˆ‡ç‰‡è¯­æ³•çš„å…³ç³»å’ŒåŒºåˆ«- æŒæ¡åœ¨æ•°æ®å¤„ç†å’Œç®—æ³•ä¸­çš„å®é™…åº”ç”¨## ğŸ“‹ å‰ç½®çŸ¥è¯†- Pythonåºåˆ—ç±»å‹ï¼ˆåˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ï¼‰- åŸºæœ¬çš„åˆ‡ç‰‡è¯­æ³• [start:stop:step]- ç´¢å¼•å’Œè´Ÿç´¢å¼•çš„æ¦‚å¿µ- è¿­ä»£å™¨å’Œç”Ÿæˆå™¨åŸºç¡€## ğŸ” è¯¦ç»†å†…å®¹### åŸºæœ¬æ¦‚å¿µ`slice()` å‡½æ•°åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°è£…äº†åˆ‡ç‰‡æ“ä½œçš„å‚æ•°ï¼ˆstartã€stopã€stepï¼‰ã€‚åˆ‡ç‰‡å¯¹è±¡å¯ä»¥è¢«ä¼ é€’ç»™åºåˆ—çš„ `__getitem__` æ–¹æ³•ï¼Œå®ç°ä¸åˆ‡ç‰‡è¯­æ³•ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æä¾›äº†æ›´å¥½çš„å¯é‡ç”¨æ€§å’ŒåŠ¨æ€æ€§ã€‚### è¯­æ³•æ ¼å¼```python# å•å‚æ•°å½¢å¼ï¼ˆåªæŒ‡å®šstopï¼‰slice(stop)# åŒå‚æ•°å½¢å¼ï¼ˆæŒ‡å®šstartå’Œstopï¼‰slice(start, stop)# ä¸‰å‚æ•°å½¢å¼ï¼ˆæŒ‡å®šstartã€stopå’Œstepï¼‰slice(start, stop, step)```### å‚æ•°è¯´æ˜| å‚æ•°å | ç±»å‹ | å¿…éœ€ | è¯´æ˜ ||--------|------|------|---------|| start | intæˆ–None | å¦ | åˆ‡ç‰‡èµ·å§‹ä½ç½®ï¼ˆåŒ…å«ï¼‰ï¼Œé»˜è®¤ä¸ºNone || stop | intæˆ–None | æ˜¯ | åˆ‡ç‰‡ç»“æŸä½ç½®ï¼ˆä¸åŒ…å«ï¼‰ || step | intæˆ–None | å¦ | åˆ‡ç‰‡æ­¥é•¿ï¼Œé»˜è®¤ä¸ºNoneï¼ˆå³1ï¼‰ |### è¿”å›å€¼- **è¿”å›ç±»å‹**: sliceå¯¹è±¡- **å±æ€§**: startã€stopã€stepä¸‰ä¸ªå±æ€§- **æ–¹æ³•**: indices()æ–¹æ³•ç”¨äºè®¡ç®—å®é™…çš„ç´¢å¼•å€¼## ğŸ’¡ å®é™…åº”ç”¨### åŸºç¡€åˆ‡ç‰‡å¯¹è±¡æ“ä½œ```python# åŸºç¡€åˆ‡ç‰‡å¯¹è±¡æ“ä½œç¤ºä¾‹print(\"åŸºç¡€åˆ‡ç‰‡å¯¹è±¡æ“ä½œç¤ºä¾‹:\")# 1. åˆ›å»ºä¸åŒç±»å‹çš„åˆ‡ç‰‡å¯¹è±¡print(\"\\n1. åˆ›å»ºåˆ‡ç‰‡å¯¹è±¡:\")# å•å‚æ•°ï¼šslice(stop)slice1 = slice(5)print(f\"slice(5): start={slice1.start}, stop={slice1.stop}, step={slice1.step}\")# åŒå‚æ•°ï¼šslice(start, stop)slice2 = slice(2, 8)print(f\"slice(2, 8): start={slice2.start}, stop={slice2.stop}, step={slice2.step}\")# ä¸‰å‚æ•°ï¼šslice(start, stop, step)slice3 = slice(1, 10, 2)print(f\"slice(1, 10, 2): start={slice3.start}, stop={slice3.stop}, step={slice3.step}\")# è´Ÿæ•°å‚æ•°slice4 = slice(-5, -1)print(f\"slice(-5, -1): start={slice4.start}, stop={slice4.stop}, step={slice4.step}\")# Noneå‚æ•°slice5 = slice(None, None, -1)  # åå‘åˆ‡ç‰‡print(f\"slice(None, None, -1): start={slice5.start}, stop={slice5.stop}, step={slice5.step}\")# 2. ä½¿ç”¨åˆ‡ç‰‡å¯¹è±¡æ“ä½œåºåˆ—print(\"\\n2. ä½¿ç”¨åˆ‡ç‰‡å¯¹è±¡æ“ä½œåºåˆ—:\")# æµ‹è¯•æ•°æ®test_list = list(range(20))  # [0, 1, 2, ..., 19]test_string = \"Hello, World! Python is awesome!\"test_tuple = tuple(range(15))print(f\"æµ‹è¯•åˆ—è¡¨: {test_list}\")print(f\"æµ‹è¯•å­—ç¬¦ä¸²: '{test_string}'\")print(f\"æµ‹è¯•å…ƒç»„: {test_tuple}\")print()# åº”ç”¨ä¸åŒçš„åˆ‡ç‰‡å¯¹è±¡slices_to_test = [    (slice(5), \"å‰5ä¸ªå…ƒç´ \"),    (slice(2, 8), \"ç´¢å¼•2åˆ°7\"),    (slice(1, 10, 2), \"ç´¢å¼•1åˆ°9ï¼Œæ­¥é•¿2\"),    (slice(-5, -1), \"å€’æ•°ç¬¬5åˆ°ç¬¬2ä¸ª\"),    (slice(None, None, -1), \"åå‘å…¨éƒ¨\"),    (slice(None, 10), \"ä»å¼€å§‹åˆ°ç´¢å¼•9\"),    (slice(10, None), \"ä»ç´¢å¼•10åˆ°ç»“æŸ\"),    (slice(None, None, 3), \"æ¯éš”3ä¸ªå–ä¸€ä¸ª\"),]for slice_obj, description in slices_to_test:    print(f\"{description} - {slice_obj}:\")        # åº”ç”¨åˆ°åˆ—è¡¨    list_result = test_list[slice_obj]    print(f\"  åˆ—è¡¨ç»“æœ: {list_result}\")        # åº”ç”¨åˆ°å­—ç¬¦ä¸²    string_result = test_string[slice_obj]    print(f\"  å­—ç¬¦ä¸²ç»“æœ: '{string_result}'\")        # åº”ç”¨åˆ°å…ƒç»„    tuple_result = test_tuple[slice_obj]    print(f\"  å…ƒç»„ç»“æœ: {tuple_result}\")    print()# 3. åˆ‡ç‰‡å¯¹è±¡ä¸åˆ‡ç‰‡è¯­æ³•çš„ç­‰ä»·æ€§print(\"3. åˆ‡ç‰‡å¯¹è±¡ä¸åˆ‡ç‰‡è¯­æ³•çš„ç­‰ä»·æ€§:\")test_data = list(range(10))print(f\"æµ‹è¯•æ•°æ®: {test_data}\")print()equivalence_tests = [    (slice(3), \"[:3]\"),    (slice(2, 7), \"[2:7]\"),    (slice(1, 9, 2), \"[1:9:2]\"),    (slice(None, None, -1), \"[::-1]\"),    (slice(-3, None), \"[-3:]\"),]for slice_obj, syntax in equivalence_tests:    slice_result = test_data[slice_obj]    syntax_result = eval(f\"test_data{syntax}\")        print(f\"sliceå¯¹è±¡ {slice_obj}: {slice_result}\")    print(f\"åˆ‡ç‰‡è¯­æ³• {syntax}: {syntax_result}\")    print(f\"ç»“æœç›¸åŒ: {slice_result == syntax_result}\")    print()# 4. indices()æ–¹æ³•çš„ä½¿ç”¨print(\"4. indices()æ–¹æ³•çš„ä½¿ç”¨:\")# indices()æ–¹æ³•å°†åˆ‡ç‰‡å¯¹è±¡çš„å‚æ•°è½¬æ¢ä¸ºå®é™…çš„ç´¢å¼•å€¼test_length = 10test_slices = [    slice(5),    slice(2, 8),    slice(1, 20, 2),  # stopè¶…å‡ºèŒƒå›´    slice(-3, -1),    slice(None, None, -1),    slice(-10, 15),   # startå’Œstopéƒ½è¶…å‡ºèŒƒå›´]print(f\"åºåˆ—é•¿åº¦: {test_length}\")print()for slice_obj in test_slices:    indices = slice_obj.indices(test_length)    start, stop, step = indices        print(f\"åˆ‡ç‰‡å¯¹è±¡: {slice_obj}\")    print(f\"å®é™…ç´¢å¼•: start={start}, stop={stop}, step={step}\")        # éªŒè¯ç»“æœ    test_seq = list(range(test_length))    slice_result = test_seq[slice_obj]    manual_result = test_seq[start:stop:step]        print(f\"åˆ‡ç‰‡ç»“æœ: {slice_result}\")    print(f\"æ‰‹åŠ¨ç´¢å¼•: {manual_result}\")    print(f\"ç»“æœä¸€è‡´: {slice_result == manual_result}\")    print()```### åŠ¨æ€åˆ‡ç‰‡å’Œåˆ‡ç‰‡å¤ç”¨```python# åŠ¨æ€åˆ‡ç‰‡å’Œåˆ‡ç‰‡å¤ç”¨åº”ç”¨print(\"åŠ¨æ€åˆ‡ç‰‡å’Œåˆ‡ç‰‡å¤ç”¨åº”ç”¨:\")# 1. åŠ¨æ€åˆ‡ç‰‡ç”Ÿæˆprint(\"\\n1. åŠ¨æ€åˆ‡ç‰‡ç”Ÿæˆ:\")def create_slice_from_config(config):    \"\"\"æ ¹æ®é…ç½®åˆ›å»ºåˆ‡ç‰‡å¯¹è±¡\"\"\"    start = config.get('start')    stop = config.get('stop')    step = config.get('step')        if step is not None:        return slice(start, stop, step)    elif start is not None:        return slice(start, stop)    else:        return slice(stop)# æµ‹è¯•ä¸åŒé…ç½®configs = [    {'stop': 5},    {'start': 2, 'stop': 8},    {'start': 1, 'stop': 10, 'step': 2},    {'start': None, 'stop': None, 'step': -1},    {'start': -5, 'stop': -1},]test_data = list(range(15))print(f\"æµ‹è¯•æ•°æ®: {test_data}\")print()for i, config in enumerate(configs, 1):    slice_obj = create_slice_from_config(config)    result = test_data[slice_obj]        print(f\"é…ç½® {i}: {config}\")    print(f\"ç”Ÿæˆåˆ‡ç‰‡: {slice_obj}\")    print(f\"ç»“æœ: {result}\")    print()# 2. åˆ‡ç‰‡å¯¹è±¡å¤ç”¨print(\"2. åˆ‡ç‰‡å¯¹è±¡å¤ç”¨:\")class DataProcessor:    \"\"\"æ•°æ®å¤„ç†å™¨ï¼Œä½¿ç”¨é¢„å®šä¹‰çš„åˆ‡ç‰‡å¯¹è±¡\"\"\"        def __init__(self):        # é¢„å®šä¹‰å¸¸ç”¨çš„åˆ‡ç‰‡å¯¹è±¡        self.slices = {            'head': slice(5),           # å‰5ä¸ªå…ƒç´             'tail': slice(-5, None),    # å5ä¸ªå…ƒç´             'even': slice(None, None, 2),  # å¶æ•°ç´¢å¼•            'odd': slice(1, None, 2),   # å¥‡æ•°ç´¢å¼•            'reverse': slice(None, None, -1),  # åå‘            'middle': slice(2, -2),     # å»æ‰é¦–å°¾å„2ä¸ª            'sample': slice(None, None, 3),  # æ¯3ä¸ªå–1ä¸ª        }        def process(self, data, operation):        \"\"\"ä½¿ç”¨æŒ‡å®šæ“ä½œå¤„ç†æ•°æ®\"\"\"        if operation not in self.slices:            raise ValueError(f\"æœªçŸ¥æ“ä½œ: {operation}\")                slice_obj = self.slices[operation]        return data[slice_obj]        def get_slice_info(self, operation):        \"\"\"è·å–åˆ‡ç‰‡ä¿¡æ¯\"\"\"        if operation not in self.slices:            return None        return self.slices[operation]# æµ‹è¯•æ•°æ®å¤„ç†å™¨processor = DataProcessor()test_datasets = [    list(range(20)),    \"abcdefghijklmnopqrstuvwxyz\",    tuple(range(1, 16)),]operations = ['head', 'tail', 'even', 'odd', 'reverse', 'middle', 'sample']for i, data in enumerate(test_datasets, 1):    print(f\"\\næ•°æ®é›† {i}: {data}\")    print(f\"ç±»å‹: {type(data).__name__}\")    print()        for op in operations:        try:            result = processor.process(data, op)            slice_info = processor.get_slice_info(op)            print(f\"  {op:8} ({slice_info}): {result}\")        except Exception as e:            print(f\"  {op:8}: é”™è¯¯ - {e}\")# 3. æ¡ä»¶åˆ‡ç‰‡print(\"\\n3. æ¡ä»¶åˆ‡ç‰‡:\")def conditional_slice(data, condition):    \"\"\"æ ¹æ®æ¡ä»¶åˆ›å»ºåˆ‡ç‰‡\"\"\"    length = len(data)        if condition == 'first_half':        return slice(length // 2)    elif condition == 'second_half':        return slice(length // 2, None)    elif condition == 'first_quarter':        return slice(length // 4)    elif condition == 'last_quarter':        return slice(-length // 4, None)    elif condition == 'middle_half':        quarter = length // 4        return slice(quarter, -quarter)    elif condition == 'skip_edges':        return slice(1, -1)    else:        return slice(None)  # å…¨éƒ¨# æµ‹è¯•æ¡ä»¶åˆ‡ç‰‡test_data = list(range(24))  # 24ä¸ªå…ƒç´ ä¾¿äºåˆ†å‰²conditions = ['first_half', 'second_half', 'first_quarter', 'last_quarter', 'middle_half', 'skip_edges']print(f\"æµ‹è¯•æ•°æ®: {test_data}\")print(f\"æ•°æ®é•¿åº¦: {len(test_data)}\")print()for condition in conditions:    slice_obj = conditional_slice(test_data, condition)    result = test_data[slice_obj]        print(f\"{condition:12}: {slice_obj} â†’ {result}\")# 4. åˆ‡ç‰‡å¯¹è±¡çš„ç»„åˆå’Œå˜æ¢print(\"\\n4. åˆ‡ç‰‡å¯¹è±¡çš„ç»„åˆå’Œå˜æ¢:\")class SliceTransformer:    \"\"\"åˆ‡ç‰‡å˜æ¢å™¨\"\"\"        @staticmethod    def reverse_slice(slice_obj, length):        \"\"\"åè½¬åˆ‡ç‰‡å¯¹è±¡\"\"\"        start, stop, step = slice_obj.indices(length)                # è®¡ç®—åè½¬åçš„å‚æ•°        if step > 0:            new_start = stop - 1 if stop > 0 else length - 1            new_stop = start - 1 if start > 0 else -1            new_step = -step        else:            new_start = stop + 1 if stop = len(data):            return data, slice(None)                step = len(data) / n_samples        indices = [int(i * step) for i in range(n_samples)]                # åˆ›å»ºå¤šä¸ªåˆ‡ç‰‡å¯¹è±¡        slices = [slice(i, i+1) for i in indices]        samples = [data[s][0] for s in slices]  # æ¯ä¸ªåˆ‡ç‰‡åªæœ‰ä¸€ä¸ªå…ƒç´                 return samples, slices        @staticmethod    def stratified_sample(data, strata_size):        \"\"\"åˆ†å±‚é‡‡æ ·\"\"\"        n_strata = len(data) // strata_size        samples = []        slices = []                for i in range(n_strata):            start = i * strata_size            end = start + strata_size            stratum_slice = slice(start, end)                        # ä»æ¯å±‚ä¸­å–ä¸­é—´å…ƒç´             middle_idx = start + strata_size // 2            sample_slice = slice(middle_idx, middle_idx + 1)                        samples.extend(data[sample_slice])            slices.append(sample_slice)                return samples, slices        @staticmethod    def skip_sample(data, skip_pattern):        \"\"\"è·³è·ƒé‡‡æ ·\"\"\"        samples = []        slices = []                i = 0        pattern_idx = 0                while i = self.ndim:            raise ValueError(f\"ç»´åº¦{dim}è¶…å‡ºèŒƒå›´ï¼Œæœ€å¤§ç»´åº¦ä¸º{self.ndim-1}\")                # è®¡ç®—è¯¥ç»´åº¦çš„å®é™…ç´¢å¼•        start, stop, step = slice_obj.indices(self.shape[dim])                # ç”Ÿæˆè¯¥ç»´åº¦çš„æ‰€æœ‰æœ‰æ•ˆç´¢å¼•        dim_indices = list(range(start, stop, step))                return dim_indices# æµ‹è¯•å¤šç»´åˆ‡ç‰‡# æ¨¡æ‹Ÿä¸€ä¸ª3x4x5çš„ä¸‰ç»´æ•°ç»„shape = (3, 4, 5)slicer = MultiDimSlicer(shape)# åˆ›å»ºæµ‹è¯•æ•°æ®ï¼ˆçº¿æ€§å­˜å‚¨ï¼‰total_elements = shape[0] * shape[1] * shape[2]linear_data = list(range(total_elements))print(f\"å¤šç»´æ•°ç»„å½¢çŠ¶: {shape}\")print(f\"æ€»å…ƒç´ æ•°: {total_elements}\")print()# æµ‹è¯•ä¸åŒç»´åº¦çš„åˆ‡ç‰‡test_slices = [    (0, slice(2), \"ç¬¬0ç»´å–å‰2ä¸ª\"),    (1, slice(1, 3), \"ç¬¬1ç»´å–ç´¢å¼•1-2\"),    (2, slice(None, None, 2), \"ç¬¬2ç»´æ¯éš”ä¸€ä¸ªå–ä¸€ä¸ª\"),]for dim, slice_obj, description in test_slices:    indices = slicer.create_slice_for_dim(dim, slice_obj)        print(f\"{description}:\")    print(f\"  åˆ‡ç‰‡å¯¹è±¡: {slice_obj}\")    print(f\"  ç»´åº¦{dim}çš„ç´¢å¼•: {indices}\")        # ç¤ºä¾‹ï¼šè·å–ç¬¬ä¸€ä¸ª\"åˆ‡ç‰‡\"çš„ä¸€äº›å…ƒç´     if dim == 0:        # å–ç¬¬0ç»´çš„ç¬¬ä¸€ä¸ªç´¢å¼•å¯¹åº”çš„æ‰€æœ‰å…ƒç´         first_idx = indices[0]        sample_elements = []        for j in range(shape[1]):            for k in range(shape[2]):                linear_idx = slicer.linear_index(first_idx, j, k)                sample_elements.append(linear_data[linear_idx])        print(f\"  ç¬¬{first_idx}å±‚çš„å‰10ä¸ªå…ƒç´ : {sample_elements[:10]}...\")        print()```## âš ï¸ æ³¨æ„äº‹é¡¹### å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ```python# slice()å‡½æ•°çš„å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µprint(\"slice()å‡½æ•°å¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µ:\")# é™·é˜±1: Noneå€¼çš„å«ä¹‰print(\"\\né™·é˜±1: Noneå€¼çš„å«ä¹‰\")# Noneåœ¨ä¸åŒä½ç½®æœ‰ä¸åŒå«ä¹‰test_data = list(range(10))print(f\"æµ‹è¯•æ•°æ®: {test_data}\")print()none_cases = [    (slice(None), \"slice(None) - ç­‰ä»·äº [:]\"),    (slice(None, 5), \"slice(None, 5) - ç­‰ä»·äº [:5]\"),    (slice(2, None), \"slice(2, None) - ç­‰ä»·äº [2:]\"),    (slice(None, None, 2), \"slice(None, None, 2) - ç­‰ä»·äº [::2]\"),    (slice(None, None, None), \"slice(None, None, None) - ç­‰ä»·äº [:]\"),]for slice_obj, description in none_cases:    result = test_data[slice_obj]    print(f\"{description}:\")    print(f\"  ç»“æœ: {result}\")    print(f\"  start={slice_obj.start}, stop={slice_obj.stop}, step={slice_obj.step}\")    print()print(\"é‡è¦æç¤º:\")print(\"- start=None è¡¨ç¤ºä»åºåˆ—å¼€å§‹\")print(\"- stop=None è¡¨ç¤ºåˆ°åºåˆ—ç»“æŸ\")print(\"- step=None è¡¨ç¤ºæ­¥é•¿ä¸º1\")# é™·é˜±2: è´Ÿæ•°ç´¢å¼•å’Œæ­¥é•¿print(\"\\né™·é˜±2: è´Ÿæ•°ç´¢å¼•å’Œæ­¥é•¿\")negative_cases = [    (slice(-3), \"slice(-3) - ä»å¼€å§‹åˆ°å€’æ•°ç¬¬3ä¸ªï¼ˆä¸åŒ…å«ï¼‰\"),    (slice(-5, -1), \"slice(-5, -1) - å€’æ•°ç¬¬5åˆ°ç¬¬2ä¸ª\"),    (slice(None, None, -1), \"slice(None, None, -1) - åå‘å…¨éƒ¨\"),    (slice(-1, -5, -1), \"slice(-1, -5, -1) - ä»å€’æ•°ç¬¬1åˆ°ç¬¬5ä¸ªï¼Œåå‘\"),    (slice(8, 2, -2), \"slice(8, 2, -2) - ä»ç´¢å¼•8åˆ°2ï¼Œåå‘æ­¥é•¿2\"),]print(f\"æµ‹è¯•æ•°æ®: {test_data}\")print()for slice_obj, description in negative_cases:    try:        result = test_data[slice_obj]        indices = slice_obj.indices(len(test_data))                print(f\"{description}:\")        print(f\"  åˆ‡ç‰‡å¯¹è±¡: {slice_obj}\")        print(f\"  å®é™…ç´¢å¼•: {indices}\")        print(f\"  ç»“æœ: {result}\")    except Exception as e:        print(f\"{description}: é”™è¯¯ - {e}\")    print()print(\"è´Ÿæ•°è§„åˆ™:\")print(\"- è´Ÿæ•°ç´¢å¼•ä»åºåˆ—æœ«å°¾å¼€å§‹è®¡ç®—\")print(\"- è´Ÿæ•°æ­¥é•¿è¡¨ç¤ºåå‘éå†\")print(\"- åå‘åˆ‡ç‰‡æ—¶ï¼Œstartåº”è¯¥å¤§äºstop\")# é™·é˜±3: ç©ºåˆ‡ç‰‡å’Œè¾¹ç•Œæƒ…å†µprint(\"\\né™·é˜±3: ç©ºåˆ‡ç‰‡å’Œè¾¹ç•Œæƒ…å†µ\")empty_cases = [    (slice(5, 5), \"ç›¸åŒstartå’Œstop\"),    (slice(5, 3), \"startå¤§äºstopï¼ˆæ­£å‘æ­¥é•¿ï¼‰\"),    (slice(3, 5, -1), \"startå°äºstopï¼ˆè´Ÿå‘æ­¥é•¿ï¼‰\"),    (slice(10, 20), \"è¶…å‡ºåºåˆ—èŒƒå›´\"),    (slice(-20, -10), \"è´Ÿæ•°è¶…å‡ºèŒƒå›´\"),    (slice(0, 0), \"é›¶é•¿åº¦åˆ‡ç‰‡\"),]print(f\"æµ‹è¯•æ•°æ®: {test_data}\")print()for slice_obj, description in empty_cases:    result = test_data[slice_obj]    indices = slice_obj.indices(len(test_data))        print(f\"{description}:\")    print(f\"  åˆ‡ç‰‡å¯¹è±¡: {slice_obj}\")    print(f\"  å®é™…ç´¢å¼•: {indices}\")    print(f\"  ç»“æœ: {result}\")    print(f\"  æ˜¯å¦ä¸ºç©º: {len(result) == 0}\")    print()print(\"è¾¹ç•Œè§„åˆ™:\")print(\"- è¶…å‡ºèŒƒå›´çš„ç´¢å¼•ä¼šè¢«è‡ªåŠ¨è°ƒæ•´\")print(\"- ä¸åˆç†çš„start/stopç»„åˆä¼šäº§ç”Ÿç©ºåˆ‡ç‰‡\")print(\"- indices()æ–¹æ³•æ€»æ˜¯è¿”å›æœ‰æ•ˆçš„ç´¢å¼•å€¼\")# é™·é˜±4: æ­¥é•¿ä¸º0çš„é”™è¯¯print(\"\\né™·é˜±4: æ­¥é•¿ä¸º0çš„é”™è¯¯\")print(\"å°è¯•åˆ›å»ºæ­¥é•¿ä¸º0çš„åˆ‡ç‰‡:\")try:    invalid_slice = slice(0, 5, 0)    print(f\"åˆ‡ç‰‡å¯¹è±¡åˆ›å»ºæˆåŠŸ: {invalid_slice}\")        # ä½†æ˜¯ä½¿ç”¨æ—¶ä¼šå‡ºé”™    result = test_data[invalid_slice]except ValueError as e:    print(f\"é”™è¯¯: {e}\")except Exception as e:    print(f\"å…¶ä»–é”™è¯¯: {type(e).__name__}: {e}\")print(\"\\né‡è¦æç¤º: æ­¥é•¿ä¸èƒ½ä¸º0\")# é™·é˜±5: åˆ‡ç‰‡å¯¹è±¡çš„ä¸å¯å˜æ€§print(\"\\né™·é˜±5: åˆ‡ç‰‡å¯¹è±¡çš„ä¸å¯å˜æ€§\")original_slice = slice(1, 5, 2)print(f\"åŸå§‹åˆ‡ç‰‡: {original_slice}\")print(f\"å±æ€§: start={original_slice.start}, stop={original_slice.stop}, step={original_slice.step}\")# å°è¯•ä¿®æ”¹åˆ‡ç‰‡å¯¹è±¡çš„å±æ€§print(\"\\nå°è¯•ä¿®æ”¹åˆ‡ç‰‡å¯¹è±¡å±æ€§:\")try:    original_slice.start = 2except AttributeError as e:    print(f\"æ— æ³•ä¿®æ”¹start: {e}\")try:    original_slice.stop = 8except AttributeError as e:    print(f\"æ— æ³•ä¿®æ”¹stop: {e}\")try:    original_slice.step = 3except AttributeError as e:    print(f\"æ— æ³•ä¿®æ”¹step: {e}\")print(\"\\nåˆ‡ç‰‡å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œéœ€è¦åˆ›å»ºæ–°å¯¹è±¡æ¥æ”¹å˜å‚æ•°\")# æ­£ç¡®çš„æ–¹å¼ï¼šåˆ›å»ºæ–°çš„åˆ‡ç‰‡å¯¹è±¡new_slice = slice(original_slice.start + 1, original_slice.stop + 3, original_slice.step)print(f\"æ–°åˆ‡ç‰‡å¯¹è±¡: {new_slice}\")# é™·é˜±6: æ€§èƒ½è€ƒè™‘print(\"\\né™·é˜±6: æ€§èƒ½è€ƒè™‘\")import time# æ¯”è¾ƒåˆ‡ç‰‡å¯¹è±¡å’Œç›´æ¥åˆ‡ç‰‡çš„æ€§èƒ½large_data = list(range(100000))iterations = 10000# æ–¹æ³•1: ç›´æ¥ä½¿ç”¨åˆ‡ç‰‡è¯­æ³•start_time = time.time()for _ in range(iterations):    result = large_data[10:1000:5]direct_time = time.time() - start_time# æ–¹æ³•2: ä½¿ç”¨åˆ‡ç‰‡å¯¹è±¡slice_obj = slice(10, 1000, 5)start_time = time.time()for _ in range(iterations):    result = large_data[slice_obj]slice_time = time.time() - start_timeprint(f\"æ€§èƒ½æ¯”è¾ƒ ({iterations}æ¬¡æ“ä½œ):\")print(f\"ç›´æ¥åˆ‡ç‰‡è¯­æ³•: {direct_time:.6f}ç§’\")print(f\"åˆ‡ç‰‡å¯¹è±¡: {slice_time:.6f}ç§’\")print(f\"æ€§èƒ½å·®å¼‚: {abs(direct_time - slice_time):.6f}ç§’\")if slice_time < direct_time:    print(\"åˆ‡ç‰‡å¯¹è±¡ç¨å¿«ï¼ˆå¯èƒ½ç”±äºå¯¹è±¡å¤ç”¨ï¼‰\")else:    print(\"ç›´æ¥åˆ‡ç‰‡ç¨å¿«ï¼ˆé¿å…äº†å¯¹è±¡åˆ›å»ºå¼€é”€ï¼‰\")print(\"\\næ€§èƒ½å»ºè®®:\")print(\"- å¯¹äºä¸€æ¬¡æ€§ä½¿ç”¨ï¼Œç›´æ¥åˆ‡ç‰‡è¯­æ³•æ›´ç®€æ´\")print(\"- å¯¹äºé‡å¤ä½¿ç”¨ç›¸åŒåˆ‡ç‰‡ï¼Œåˆ‡ç‰‡å¯¹è±¡æ›´é«˜æ•ˆ\")print(\"- å¯¹äºåŠ¨æ€ç”Ÿæˆçš„åˆ‡ç‰‡ï¼Œåˆ‡ç‰‡å¯¹è±¡æ›´çµæ´»\")# æœ€ä½³å®è·µæ€»ç»“print(\"\\næœ€ä½³å®è·µæ€»ç»“:\")print(\"1. ç†è§£Noneåœ¨åˆ‡ç‰‡ä¸­çš„ç‰¹æ®Šå«ä¹‰\")print(\"2. æ³¨æ„è´Ÿæ•°ç´¢å¼•å’Œæ­¥é•¿çš„è¡Œä¸º\")print(\"3. å¤„ç†å¯èƒ½äº§ç”Ÿç©ºåˆ‡ç‰‡çš„è¾¹ç•Œæƒ…å†µ\")print(\"4. é¿å…ä½¿ç”¨æ­¥é•¿ä¸º0\")print(\"5. è®°ä½åˆ‡ç‰‡å¯¹è±¡æ˜¯ä¸å¯å˜çš„\")print(\"6. æ ¹æ®ä½¿ç”¨åœºæ™¯é€‰æ‹©åˆ‡ç‰‡è¯­æ³•æˆ–åˆ‡ç‰‡å¯¹è±¡\")print(\"7. ä½¿ç”¨indices()æ–¹æ³•è·å–å®é™…çš„ç´¢å¼•å€¼\")print(\"8. åœ¨å¤æ‚çš„åºåˆ—æ“ä½œä¸­ï¼Œåˆ‡ç‰‡å¯¹è±¡æä¾›æ›´å¥½çš„å¯è¯»æ€§\")```## ğŸ”§ æ€§èƒ½ä¼˜åŒ–### slice() æ€§èƒ½ä¼˜åŒ–æŠ€å·§```python# slice() æ€§èƒ½ä¼˜åŒ–æŠ€å·§print(\"slice() æ€§èƒ½ä¼˜åŒ–æŠ€å·§:\")import time# 1. åˆ‡ç‰‡å¯¹è±¡å¤ç”¨print(\"\\n1. åˆ‡ç‰‡å¯¹è±¡å¤ç”¨:\")# ç”Ÿæˆæµ‹è¯•æ•°æ®large_data = list(range(100000))iterations = 50000# æ–¹æ³•1: æ¯æ¬¡åˆ›å»ºæ–°çš„åˆ‡ç‰‡å¯¹è±¡def method1_create_each_time(data, iterations):    results = []    for _ in range(iterations):        slice_obj = slice(100, 1000, 10)        result = data[slice_obj]        results.append(len(result))  # åªè®°å½•é•¿åº¦é¿å…å†…å­˜é—®é¢˜    return results# æ–¹æ³•2: å¤ç”¨åˆ‡ç‰‡å¯¹è±¡def method2_reuse_slice(data, iterations):    slice_obj = slice(100, 1000, 10)  # åˆ›å»ºä¸€æ¬¡    results = []    for _ in range(iterations):        result = data[slice_obj]        results.append(len(result))    return results# æ€§èƒ½æµ‹è¯•print(f\"æµ‹è¯•æ•°æ®å¤§å°: {len(large_data)}\")print(f\"è¿­ä»£æ¬¡æ•°: {iterations}\")print()start_time = time.time()results1 = method1_create_each_time(large_data, iterations)time1 = time.time() - start_timestart_time = time.time()results2 = method2_reuse_slice(large_data, iterations)time2 = time.time() - start_timeprint(f\"æ¯æ¬¡åˆ›å»ºåˆ‡ç‰‡å¯¹è±¡: {time1:.6f}ç§’\")print(f\"å¤ç”¨åˆ‡ç‰‡å¯¹è±¡: {time2:.6f}ç§’\")print(f\"æ€§èƒ½æå‡: {time1/time2:.2f}x\")print(f\"ç»“æœä¸€è‡´: {results1 == results2}\")# 2. æ‰¹é‡åˆ‡ç‰‡æ“ä½œä¼˜åŒ–print(\"\\n2. æ‰¹é‡åˆ‡ç‰‡æ“ä½œä¼˜åŒ–:\")class BatchSlicer:    \"\"\"æ‰¹é‡åˆ‡ç‰‡å¤„ç†å™¨\"\"\"        def __init__(self):        self.slice_cache = {}        def get_slice(self, start, stop, step=None):        \"\"\"è·å–ç¼“å­˜çš„åˆ‡ç‰‡å¯¹è±¡\"\"\"        key = (start, stop, step)        if key not in self.slice_cache:            self.slice_cache[key] = slice(start, stop, step)        return self.slice_cache[key]        def batch_slice_cached(self, data, slice_params):        \"\"\"ä½¿ç”¨ç¼“å­˜çš„æ‰¹é‡åˆ‡ç‰‡\"\"\"        results = []        for start, stop, step in slice_params:            slice_obj = self.get_slice(start, stop, step)            results.append(data[slice_obj])        return results        def batch_slice_direct(self, data, slice_params):        \"\"\"ç›´æ¥æ‰¹é‡åˆ‡ç‰‡\"\"\"        results = []        for start, stop, step in slice_params:            slice_obj = slice(start, stop, step)            results.append(data[slice_obj])        return results        def get_cache_stats(self):        return {            'cache_size': len(self.slice_cache),            'cached_slices': list(self.slice_cache.keys())        }# æµ‹è¯•æ‰¹é‡åˆ‡ç‰‡batch_slicer = BatchSlicer()test_data = list(range(1000))# åˆ›å»ºé‡å¤çš„åˆ‡ç‰‡å‚æ•°ï¼ˆæ¨¡æ‹Ÿå®é™…ä½¿ç”¨åœºæ™¯ï¼‰slice_params = [    (0, 100, 2),    (50, 150, 3),    (0, 100, 2),  # é‡å¤    (200, 300, 1),    (50, 150, 3),  # é‡å¤    (0, 100, 2),  # é‡å¤] * 1000  # é‡å¤1000æ¬¡print(f\"åˆ‡ç‰‡å‚æ•°æ•°é‡: {len(slice_params)}\")print(f\"å”¯ä¸€åˆ‡ç‰‡æ•°é‡: {len(set(slice_params))}\")# æ€§èƒ½æ¯”è¾ƒstart_time = time.time()results_direct = batch_slicer.batch_slice_direct(test_data, slice_params)time_direct = time.time() - start_timestart_time = time.time()results_cached = batch_slicer.batch_slice_cached(test_data, slice_params)time_cached = time.time() - start_timestats = batch_slicer.get_cache_stats()print(f\"\\nç›´æ¥åˆ›å»º: {time_direct:.6f}ç§’\")print(f\"ç¼“å­˜å¤ç”¨: {time_cached:.6f}ç§’\")print(f\"æ€§èƒ½æå‡: {time_direct/time_cached:.2f}x\")print(f\"ç¼“å­˜å¤§å°: {stats['cache_size']}\")print(f\"ç»“æœä¸€è‡´: {len(results_direct) == len(results_cached)}\")# 3. å†…å­˜ä¼˜åŒ–çš„åˆ‡ç‰‡æ“ä½œprint(\"\\n3. å†…å­˜ä¼˜åŒ–çš„åˆ‡ç‰‡æ“ä½œ:\")class MemoryEfficientSlicer:    \"\"\"å†…å­˜é«˜æ•ˆçš„åˆ‡ç‰‡å™¨\"\"\"        @staticmethod    def lazy_slice_generator(data, slice_obj):        \"\"\"æƒ°æ€§åˆ‡ç‰‡ç”Ÿæˆå™¨\"\"\"        start, stop, step = slice_obj.indices(len(data))        for i in range(start, stop, step):            yield data[i]        @staticmethod    def chunked_slice_processing(data, slice_obj, chunk_size=1000):        \"\"\"åˆ†å—å¤„ç†å¤§åˆ‡ç‰‡\"\"\"        start, stop, step = slice_obj.indices(len(data))                # è®¡ç®—å®é™…éœ€è¦å¤„ç†çš„ç´¢å¼•        indices = list(range(start, stop, step))                # åˆ†å—å¤„ç†        for i in range(0, len(indices), chunk_size):            chunk_indices = indices[i:i+chunk_size]            chunk_data = [data[idx] for idx in chunk_indices]            yield chunk_data        @staticmethod    def slice_with_condition(data, slice_obj, condition_func):        \"\"\"å¸¦æ¡ä»¶çš„åˆ‡ç‰‡\"\"\"        start, stop, step = slice_obj.indices(len(data))        for i in range(start, stop, step):            item = data[i]            if condition_func(item):                yield item# æµ‹è¯•å†…å­˜ä¼˜åŒ–mem_slicer = MemoryEfficientSlicer()large_test_data = list(range(100000))large_slice = slice(1000, 50000, 5)print(f\"å¤§æ•°æ®é›†å¤§å°: {len(large_test_data)}\")print(f\"åˆ‡ç‰‡èŒƒå›´: {large_slice}\")# æ–¹æ³•1: ä¼ ç»Ÿåˆ‡ç‰‡ï¼ˆä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜ï¼‰start_time = time.time()traditional_result = large_test_data[large_slice]traditional_time = time.time() - start_timetraditional_memory = len(traditional_result) * 8  # ä¼°ç®—å†…å­˜ä½¿ç”¨ï¼ˆæ¯ä¸ªintçº¦8å­—èŠ‚ï¼‰print(f\"\\nä¼ ç»Ÿåˆ‡ç‰‡:\")print(f\"  æ—¶é—´: {traditional_time:.6f}ç§’\")print(f\"  ç»“æœé•¿åº¦: {len(traditional_result)}\")print(f\"  ä¼°ç®—å†…å­˜: {traditional_memory / 1024:.2f} KB\")# æ–¹æ³•2: æƒ°æ€§ç”Ÿæˆå™¨start_time = time.time()lazy_generator = mem_slicer.lazy_slice_generator(large_test_data, large_slice)lazy_result = list(lazy_generator)  # è½¬æ¢ä¸ºåˆ—è¡¨ä»¥ä¾¿æ¯”è¾ƒlazy_time = time.time() - start_timeprint(f\"\\næƒ°æ€§ç”Ÿæˆå™¨:\")print(f\"  æ—¶é—´: {lazy_time:.6f}ç§’\")print(f\"  ç»“æœé•¿åº¦: {len(lazy_result)}\")print(f\"  ç»“æœä¸€è‡´: {traditional_result == lazy_result}\")# æ–¹æ³•3: åˆ†å—å¤„ç†start_time = time.time()chunked_results = []for chunk in mem_slicer.chunked_slice_processing(large_test_data, large_slice, 1000):    chunked_results.extend(chunk)chunked_time = time.time() - start_timeprint(f\"\\nåˆ†å—å¤„ç†:\")print(f\"  æ—¶é—´: {chunked_time:.6f}ç§’\")print(f\"  ç»“æœé•¿åº¦: {len(chunked_results)}\")print(f\"  ç»“æœä¸€è‡´: {traditional_result == chunked_results}\")# æ–¹æ³•4: å¸¦æ¡ä»¶çš„åˆ‡ç‰‡start_time = time.time()condition_result = list(mem_slicer.slice_with_condition(    large_test_data, large_slice, lambda x: x % 10 == 0))condition_time = time.time() - start_timeprint(f\"\\næ¡ä»¶åˆ‡ç‰‡ï¼ˆåªå–èƒ½è¢«10æ•´é™¤çš„æ•°ï¼‰:\")print(f\"  æ—¶é—´: {condition_time:.6f}ç§’\")print(f\"  ç»“æœé•¿åº¦: {len(condition_result)}\")print(f\"  å‰10ä¸ªç»“æœ: {condition_result[:10]}\")# 4. å¹¶è¡Œåˆ‡ç‰‡å¤„ç†print(\"\\n4. å¹¶è¡Œåˆ‡ç‰‡å¤„ç†:\")try:    from concurrent.futures import ThreadPoolExecutor, ProcessPoolExecutor    import multiprocessing        class ParallelSlicer:        \"\"\"å¹¶è¡Œåˆ‡ç‰‡å¤„ç†å™¨\"\"\"                @staticmethod        def slice_chunk(args):            \"\"\"å¤„ç†å•ä¸ªåˆ‡ç‰‡å—\"\"\"            data, slice_obj = args            return data[slice_obj]                @staticmethod        def parallel_multi_slice(data, slice_objects, max_workers=None):            \"\"\"å¹¶è¡Œå¤„ç†å¤šä¸ªåˆ‡ç‰‡\"\"\"            if max_workers is None:                max_workers = min(len(slice_objects), multiprocessing.cpu_count())                        args = [(data, slice_obj) for slice_obj in slice_objects]                        with ThreadPoolExecutor(max_workers=max_workers) as executor:                results = list(executor.map(ParallelSlicer.slice_chunk, args))                        return results        # æµ‹è¯•å¹¶è¡Œåˆ‡ç‰‡    parallel_slicer = ParallelSlicer()        # åˆ›å»ºå¤šä¸ªå¤§åˆ‡ç‰‡    multi_slices = [        slice(0, 20000, 2),        slice(10000, 30000, 3),        slice(5000, 25000, 4),        slice(15000, 35000, 5),    ]        test_data_parallel = list(range(50000))        # ä¸²è¡Œå¤„ç†    start_time = time.time()    serial_results = [test_data_parallel[s] for s in multi_slices]    serial_time = time.time() - start_time        # å¹¶è¡Œå¤„ç†    start_time = time.time()    parallel_results = parallel_slicer.parallel_multi_slice(test_data_parallel, multi_slices)    parallel_time = time.time() - start_time        print(f\"å¤šåˆ‡ç‰‡å¤„ç† ({len(multi_slices)}ä¸ªåˆ‡ç‰‡):\")    print(f\"ä¸²è¡Œå¤„ç†: {serial_time:.6f}ç§’\")    print(f\"å¹¶è¡Œå¤„ç†: {parallel_time:.6f}ç§’\")    print(f\"æ€§èƒ½æå‡: {serial_time/parallel_time:.2f}x\")    print(f\"ç»“æœä¸€è‡´: {serial_results == parallel_results}\")    except ImportError:    print(\"å¹¶å‘æ¨¡å—ä¸å¯ç”¨ï¼Œè·³è¿‡å¹¶è¡Œå¤„ç†æµ‹è¯•\")print(\"\\næ€§èƒ½ä¼˜åŒ–æ€»ç»“:\")print(\"1. å¤ç”¨åˆ‡ç‰‡å¯¹è±¡å¯ä»¥é¿å…é‡å¤åˆ›å»ºçš„å¼€é”€\")print(\"2. ç¼“å­˜å¸¸ç”¨çš„åˆ‡ç‰‡å¯¹è±¡å¯ä»¥æ˜¾è‘—æå‡æ‰¹é‡æ“ä½œæ€§èƒ½\")print(\"3. å¯¹äºå¤§æ•°æ®é›†ï¼Œè€ƒè™‘ä½¿ç”¨ç”Ÿæˆå™¨é¿å…å†…å­˜å³°å€¼\")print(\"4. åˆ†å—å¤„ç†å¯ä»¥åœ¨å†…å­˜å’Œæ€§èƒ½ä¹‹é—´æ‰¾åˆ°å¹³è¡¡\")print(\"5. å¹¶è¡Œå¤„ç†é€‚ç”¨äºå¤šä¸ªç‹¬ç«‹çš„å¤§åˆ‡ç‰‡æ“ä½œ\")print(\"6. å¸¦æ¡ä»¶çš„åˆ‡ç‰‡å¯ä»¥å‡å°‘ä¸å¿…è¦çš„æ•°æ®å¤„ç†\")print(\"7. æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç­–ç•¥\")```## ğŸ“š ç›¸å…³å‡½æ•°å’Œæ¨¡å—### ç›¸å…³å†…ç½®å‡½æ•°- [`range()`](./range.md) - èŒƒå›´ç”Ÿæˆå‡½æ•°- [`len()`](./len.md) - é•¿åº¦è·å–å‡½æ•°- [`enumerate()`](./enumerate.md) - æšä¸¾å‡½æ•°- [`zip()`](./zip.md) - å¹¶è¡Œè¿­ä»£å‡½æ•°- [`reversed()`](./reversed.md) - åå‘è¿­ä»£å‡½æ•°- [`list()`](./list.md) - åˆ—è¡¨æ„é€ å‡½æ•°- [`tuple()`](./tuple.md) - å…ƒç»„æ„é€ å‡½æ•°### ç›¸å…³æ ‡å‡†åº“æ¨¡å—- `itertools` - è¿­ä»£å·¥å…·ï¼ˆåŒ…æ‹¬isliceç­‰åˆ‡ç‰‡ç›¸å…³å‡½æ•°ï¼‰- `operator` - å‡½æ•°å½¢å¼çš„è¿ç®—ç¬¦ï¼ˆåŒ…æ‹¬itemgetterï¼‰- `collections` - é›†åˆç±»å‹ï¼ˆåŒ…æ‹¬dequeç­‰æ”¯æŒåˆ‡ç‰‡çš„ç±»å‹ï¼‰- `array` - æ•°ç»„ç±»å‹ï¼ˆæ”¯æŒé«˜æ•ˆçš„åˆ‡ç‰‡æ“ä½œï¼‰### ç›¸å…³ç¬¬ä¸‰æ–¹åº“- `numpy` - æ•°å€¼è®¡ç®—ï¼ˆæä¾›å¼ºå¤§çš„å¤šç»´æ•°ç»„åˆ‡ç‰‡åŠŸèƒ½ï¼‰- `pandas` - æ•°æ®åˆ†æï¼ˆæä¾›DataFrameå’ŒSeriesçš„åˆ‡ç‰‡æ“ä½œï¼‰- `dask` - å¹¶è¡Œè®¡ç®—ï¼ˆæä¾›å¤§æ•°æ®é›†çš„åˆ†å¸ƒå¼åˆ‡ç‰‡ï¼‰## ğŸ”— æ‰©å±•é˜…è¯»- [Pythonå®˜æ–¹æ–‡æ¡£ - slice()](https://docs.python.org/3/library/functions.html#slice)- [Pythonå®˜æ–¹æ–‡æ¡£ - åºåˆ—ç±»å‹](https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range)- [åˆ‡ç‰‡è¯­æ³•è¯¦è§£](https://docs.python.org/3/reference/expressions.html#slicings)- [æ•°æ®æ¨¡å‹ - __getitem__](https://docs.python.org/3/reference/datamodel.html#object.__getitem__)- [itertools.islice](https://docs.python.org/3/library/itertools.html#itertools.islice)## ğŸ·ï¸ æ ‡ç­¾`åºåˆ—æ“ä½œ` `åˆ‡ç‰‡` `ç´¢å¼•` `æ•°æ®è®¿é—®` `æ€§èƒ½ä¼˜åŒ–` `å†…å­˜ç®¡ç†` `ç®—æ³•å®ç°`---**æœ€åæ›´æ–°**: 2024-01-15  **ä½œè€…**: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ  **ç‰ˆæœ¬**: 1.0",
        "url": "/docs/builtins/slice/",
        "category": "builtins",
        "tags": ["åºåˆ—æ“ä½œ","åˆ‡ç‰‡","ç´¢å¼•","æ•°æ®è®¿é—®"]
      }
      
    
  
    
      ,
      {
        "title": "sorted() - æ’åºå‡½æ•°",
        "content": "# sorted() - æ’åºå‡½æ•°## ğŸ“ æ¦‚è¿°`sorted()` æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºå¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ’åºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ’åºåˆ—è¡¨ã€‚ä¸åˆ—è¡¨çš„`sort()`æ–¹æ³•ä¸åŒï¼Œ`sorted()`ä¸ä¼šä¿®æ”¹åŸå§‹å¯¹è±¡ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„æ’åºåˆ—è¡¨ã€‚1## ğŸ¯ å­¦ä¹ ç›®æ ‡- æŒæ¡sorted()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•- ç†è§£keyå‚æ•°çš„ä½¿ç”¨æ–¹æ³•- å­¦ä¼šä½¿ç”¨reverseå‚æ•°æ§åˆ¶æ’åºæ–¹å‘- äº†è§£sorted()ä¸list.sort()çš„åŒºåˆ«- æŒæ¡å¤æ‚æ•°æ®ç»“æ„çš„æ’åºæŠ€å·§## ğŸ“‹ å‰ç½®çŸ¥è¯†- PythonåŸºæœ¬æ•°æ®ç±»å‹- åˆ—è¡¨å’Œå…ƒç»„çš„ä½¿ç”¨- å‡½æ•°å’Œlambdaè¡¨è¾¾å¼- æ¯”è¾ƒè¿ç®—ç¬¦çš„ç†è§£## ğŸ” è¯¦ç»†å†…å®¹### åŸºæœ¬æ¦‚å¿µ`sorted()` å‡½æ•°æ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å…ƒç´ çš„æ–°æ’åºåˆ—è¡¨ã€‚æ’åºæ˜¯ç¨³å®šçš„ï¼Œè¿™æ„å‘³ç€å½“å¤šä¸ªè®°å½•å…·æœ‰ç›¸åŒçš„é”®æ—¶ï¼Œå®ƒä»¬çš„åŸå§‹é¡ºåºä¼šè¢«ä¿ç•™ã€‚### è¯­æ³•æ ¼å¼```pythonsorted(iterable, *, key=None, reverse=False)```### å‚æ•°è¯´æ˜| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ ||--------|------|------|--------|---------|| iterable | iterable | æ˜¯ | æ—  | è¦æ’åºçš„å¯è¿­ä»£å¯¹è±¡ || key | function | å¦ | None | æŒ‡å®šæ’åºé”®çš„å‡½æ•° || reverse | bool | å¦ | False | æ˜¯å¦é€†åºæ’åˆ— |### è¿”å›å€¼| ç±»å‹ | è¯´æ˜ ||------|------|| list | åŒ…å«æ’åºåå…ƒç´ çš„æ–°åˆ—è¡¨ |## ğŸ’¡ å®é™…åº”ç”¨### åŸºç¡€ç”¨æ³•```python# åŸºæœ¬æ’åºnumbers = [3, 1, 4, 1, 5, 9, 2, 6]print(sorted(numbers))  # [1, 1, 2, 3, 4, 5, 6, 9]print(numbers)          # [3, 1, 4, 1, 5, 9, 2, 6] (åŸåˆ—è¡¨ä¸å˜)# å­—ç¬¦ä¸²æ’åºwords = ['banana', 'apple', 'cherry', 'date']print(sorted(words))    # ['apple', 'banana', 'cherry', 'date']# é€†åºæ’åˆ—print(sorted(numbers, reverse=True))  # [9, 6, 5, 4, 3, 2, 1, 1]# å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åºtext = \"python\"print(sorted(text))     # ['h', 'n', 'o', 'p', 't', 'y']# å¯¹å…ƒç»„æ’åºtuples = [(1, 'one'), (3, 'three'), (2, 'two')]print(sorted(tuples))   # [(1, 'one'), (2, 'two'), (3, 'three')]# å¯¹é›†åˆæ’åºnum_set = {3, 1, 4, 1, 5}print(sorted(num_set))  # [1, 3, 4, 5]# å¯¹å­—å…¸çš„é”®æ’åºdata = {'c': 3, 'a': 1, 'b': 2}print(sorted(data))           # ['a', 'b', 'c']print(sorted(data.keys()))    # ['a', 'b', 'c']print(sorted(data.values()))  # [1, 2, 3]print(sorted(data.items()))   # [('a', 1), ('b', 2), ('c', 3)]```### ä½¿ç”¨keyå‚æ•°```python# æŒ‰å­—ç¬¦ä¸²é•¿åº¦æ’åºwords = ['python', 'java', 'c', 'javascript', 'go']print(sorted(words, key=len))  # ['c', 'go', 'java', 'python', 'javascript']# æŒ‰ç»å¯¹å€¼æ’åºnumbers = [-5, 2, -1, 3, -4]print(sorted(numbers, key=abs))  # [-1, 2, 3, -4, -5]# å¿½ç•¥å¤§å°å†™æ’åºwords = ['Apple', 'banana', 'Cherry', 'date']print(sorted(words))                    # ['Apple', 'Cherry', 'banana', 'date']print(sorted(words, key=str.lower))     # ['Apple', 'banana', 'Cherry', 'date']# æŒ‰å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦æ’åºwords = ['hello', 'world', 'python', 'code']print(sorted(words, key=lambda x: x[-1]))  # ['code', 'hello', 'world', 'python']# å¤æ‚å¯¹è±¡æ’åºclass Student:    def __init__(self, name, age, grade):        self.name = name        self.age = age        self.grade = grade        def __repr__(self):        return f\"Student('{self.name}', {self.age}, {self.grade})\"students = [    Student('Alice', 20, 85),    Student('Bob', 19, 92),    Student('Charlie', 21, 78),    Student('Diana', 20, 95)]# æŒ‰å¹´é¾„æ’åºprint(\"æŒ‰å¹´é¾„æ’åº:\")for student in sorted(students, key=lambda s: s.age):    print(student)# æŒ‰æˆç»©æ’åºï¼ˆé™åºï¼‰print(\"\\næŒ‰æˆç»©æ’åºï¼ˆé™åºï¼‰:\")for student in sorted(students, key=lambda s: s.grade, reverse=True):    print(student)# æŒ‰å§“åæ’åºprint(\"\\næŒ‰å§“åæ’åº:\")for student in sorted(students, key=lambda s: s.name):    print(student)# å¤šçº§æ’åºï¼šå…ˆæŒ‰å¹´é¾„ï¼Œå†æŒ‰æˆç»©print(\"\\nå¤šçº§æ’åºï¼ˆå¹´é¾„å‡åºï¼Œæˆç»©é™åºï¼‰:\")for student in sorted(students, key=lambda s: (s.age, -s.grade)):    print(student)```### é«˜çº§ç”¨æ³•```python# ä½¿ç”¨operatoræ¨¡å—è¿›è¡Œæ’åºfrom operator import itemgetter, attrgetter# æŒ‰å…ƒç»„çš„ç¬¬äºŒä¸ªå…ƒç´ æ’åºdata = [('Alice', 25), ('Bob', 20), ('Charlie', 30)]print(sorted(data, key=itemgetter(1)))  # [('Bob', 20), ('Alice', 25), ('Charlie', 30)]# æŒ‰å­—å…¸çš„å€¼æ’åºscores = {'Alice': 85, 'Bob': 92, 'Charlie': 78}print(sorted(scores.items(), key=itemgetter(1)))  # [('Charlie', 78), ('Alice', 85), ('Bob', 92)]# æŒ‰å¯¹è±¡å±æ€§æ’åºprint(\"ä½¿ç”¨attrgetteræŒ‰æˆç»©æ’åº:\")for student in sorted(students, key=attrgetter('grade')):    print(student)# å¤šå±æ€§æ’åºprint(\"\\nå¤šå±æ€§æ’åºï¼ˆå¹´é¾„ï¼Œç„¶åå§“åï¼‰:\")for student in sorted(students, key=attrgetter('age', 'name')):    print(student)# è‡ªå®šä¹‰æ’åºå‡½æ•°def custom_sort_key(item):    \"\"\"è‡ªå®šä¹‰æ’åºé”®å‡½æ•°\"\"\"    if isinstance(item, str):        return (0, item.lower())  # å­—ç¬¦ä¸²ä¼˜å…ˆï¼ŒæŒ‰å­—æ¯é¡ºåº    elif isinstance(item, int):        return (1, item)          # æ•°å­—å…¶æ¬¡ï¼ŒæŒ‰æ•°å€¼å¤§å°    else:        return (2, str(item))     # å…¶ä»–ç±»å‹æœ€åï¼Œè½¬ä¸ºå­—ç¬¦ä¸²mixed_data = ['banana', 42, 'apple', 17, 'cherry', 3]print(sorted(mixed_data, key=custom_sort_key))# ['apple', 'banana', 'cherry', 3, 17, 42]# ç¨³å®šæ’åºç¤ºä¾‹data = [('Alice', 'A'), ('Bob', 'B'), ('Alice', 'C'), ('Bob', 'D')]print(\"åŸå§‹æ•°æ®:\", data)print(\"æŒ‰ç¬¬ä¸€ä¸ªå…ƒç´ æ’åºï¼ˆç¨³å®šï¼‰:\", sorted(data, key=itemgetter(0)))# [('Alice', 'A'), ('Alice', 'C'), ('Bob', 'B'), ('Bob', 'D')]# é“¾å¼æ’åºï¼ˆå¤šæ¬¡æ’åºï¼‰data = [('Alice', 25, 85), ('Bob', 20, 92), ('Charlie', 25, 78), ('Diana', 20, 95)]print(\"\\nåŸå§‹æ•°æ®:\", data)# å…ˆæŒ‰æˆç»©æ’åºï¼Œå†æŒ‰å¹´é¾„æ’åºï¼ˆä¿æŒæˆç»©çš„ç›¸å¯¹é¡ºåºï¼‰result = sorted(data, key=itemgetter(2))  # å…ˆæŒ‰æˆç»©result = sorted(result, key=itemgetter(1))  # å†æŒ‰å¹´é¾„ï¼ˆç¨³å®šæ’åºï¼‰print(\"é“¾å¼æ’åºç»“æœ:\", result)```### å®é™…æ¡ˆä¾‹```python# æ–‡ä»¶å¤§å°æ’åºimport osfrom pathlib import Pathdef get_file_info(directory):    \"\"\"è·å–ç›®å½•ä¸­æ–‡ä»¶ä¿¡æ¯\"\"\"    files = []    try:        for file_path in Path(directory).iterdir():            if file_path.is_file():                size = file_path.stat().st_size                files.append({                    'name': file_path.name,                    'size': size,                    'path': str(file_path)                })    except Exception as e:        print(f\"è¯»å–ç›®å½•å¤±è´¥: {e}\")    return files# æ¨¡æ‹Ÿæ–‡ä»¶æ•°æ®files = [    {'name': 'document.pdf', 'size': 1024000, 'path': '/docs/document.pdf'},    {'name': 'image.jpg', 'size': 512000, 'path': '/images/image.jpg'},    {'name': 'script.py', 'size': 2048, 'path': '/scripts/script.py'},    {'name': 'data.csv', 'size': 256000, 'path': '/data/data.csv'}]print(\"æŒ‰æ–‡ä»¶å¤§å°æ’åºï¼ˆä»å°åˆ°å¤§ï¼‰:\")for file in sorted(files, key=lambda f: f['size']):    print(f\"{file['name']}: {file['size']} bytes\")print(\"\\næŒ‰æ–‡ä»¶åæ’åº:\")for file in sorted(files, key=lambda f: f['name']):    print(f\"{file['name']}: {file['size']} bytes\")# å­¦ç”Ÿæˆç»©åˆ†æclass GradeAnalyzer:    def __init__(self, students):        self.students = students        def top_students(self, n=3):        \"\"\"è·å–å‰nåå­¦ç”Ÿ\"\"\"        return sorted(self.students, key=lambda s: s.grade, reverse=True)[:n]        def students_by_age_group(self):        \"\"\"æŒ‰å¹´é¾„åˆ†ç»„å¹¶æ’åº\"\"\"        return sorted(self.students, key=lambda s: (s.age, -s.grade))        def grade_distribution(self):        \"\"\"æˆç»©åˆ†å¸ƒåˆ†æ\"\"\"        grades = sorted([s.grade for s in self.students])        return {            'min': grades[0],            'max': grades[-1],            'median': grades[len(grades)//2],            'sorted_grades': grades        }analyzer = GradeAnalyzer(students)print(\"\\nå‰3åå­¦ç”Ÿ:\")for student in analyzer.top_students(3):    print(student)print(\"\\næŒ‰å¹´é¾„åˆ†ç»„ï¼ˆå¹´é¾„å‡åºï¼Œæˆç»©é™åºï¼‰:\")for student in analyzer.students_by_age_group():    print(student)print(\"\\næˆç»©åˆ†å¸ƒ:\")distribution = analyzer.grade_distribution()for key, value in distribution.items():    print(f\"{key}: {value}\")# æ•°æ®å¤„ç†ç®¡é“def process_sales_data(sales):    \"\"\"å¤„ç†é”€å”®æ•°æ®\"\"\"    # æŒ‰é”€å”®é¢æ’åºï¼ˆé™åºï¼‰    sorted_by_amount = sorted(sales, key=lambda x: x['amount'], reverse=True)        # æŒ‰æ—¥æœŸæ’åº    sorted_by_date = sorted(sales, key=lambda x: x['date'])        # æŒ‰é”€å”®å‘˜å’Œé‡‘é¢æ’åº    sorted_by_salesperson = sorted(sales, key=lambda x: (x['salesperson'], -x['amount']))        return {        'by_amount': sorted_by_amount,        'by_date': sorted_by_date,        'by_salesperson': sorted_by_salesperson    }# æ¨¡æ‹Ÿé”€å”®æ•°æ®sales_data = [    {'date': '2024-01-15', 'salesperson': 'Alice', 'amount': 1500},    {'date': '2024-01-10', 'salesperson': 'Bob', 'amount': 2000},    {'date': '2024-01-12', 'salesperson': 'Alice', 'amount': 1200},    {'date': '2024-01-08', 'salesperson': 'Charlie', 'amount': 1800},    {'date': '2024-01-14', 'salesperson': 'Bob', 'amount': 2200}]processed = process_sales_data(sales_data)print(\"\\næŒ‰é”€å”®é¢æ’åºï¼ˆé™åºï¼‰:\")for sale in processed['by_amount'][:3]:  # æ˜¾ç¤ºå‰3å    print(f\"{sale['date']}: {sale['salesperson']} - ${sale['amount']}\")print(\"\\næŒ‰é”€å”®å‘˜åˆ†ç»„æ’åº:\")for sale in processed['by_salesperson']:    print(f\"{sale['salesperson']}: ${sale['amount']} ({sale['date']})\")# æ–‡æœ¬åˆ†ædef analyze_text(text):    \"\"\"åˆ†ææ–‡æœ¬ä¸­çš„å•è¯\"\"\"    import re    from collections import Counter        # æå–å•è¯    words = re.findall(r'\\b\\w+\\b', text.lower())    word_count = Counter(words)        # æŒ‰é¢‘ç‡æ’åº    by_frequency = sorted(word_count.items(), key=lambda x: x[1], reverse=True)        # æŒ‰å­—æ¯é¡ºåºæ’åº    by_alphabet = sorted(word_count.items(), key=lambda x: x[0])        # æŒ‰é•¿åº¦æ’åº    by_length = sorted(word_count.items(), key=lambda x: len(x[0]), reverse=True)        return {        'by_frequency': by_frequency,        'by_alphabet': by_alphabet,        'by_length': by_length    }sample_text = \"\"\"Python is a powerful programming language. Python is easy to learn and Python is widely used in data science, web development, and automation.Programming with Python is fun and productive.\"\"\"analysis = analyze_text(sample_text)print(\"\\nè¯é¢‘åˆ†æï¼ˆå‰5ä¸ªï¼‰:\")for word, count in analysis['by_frequency'][:5]:    print(f\"{word}: {count}\")print(\"\\næŒ‰é•¿åº¦æ’åºï¼ˆå‰5ä¸ªï¼‰:\")for word, count in analysis['by_length'][:5]:    print(f\"{word} ({len(word)}å­—ç¬¦): {count}\")# é…ç½®æ–‡ä»¶æ’åºdef sort_config_items(config):    \"\"\"æ’åºé…ç½®é¡¹\"\"\"    if isinstance(config, dict):        # æŒ‰é”®åæ’åº        sorted_items = sorted(config.items())        return dict(sorted_items)    elif isinstance(config, list):        # å¦‚æœæ˜¯å­—å…¸åˆ—è¡¨ï¼ŒæŒ‰ç¬¬ä¸€ä¸ªé”®æ’åº        if config and isinstance(config[0], dict):            first_key = list(config[0].keys())[0]            return sorted(config, key=lambda x: x.get(first_key, ''))        else:            return sorted(config)    return configconfig_data = {    'database': {        'host': 'localhost',        'port': 5432,        'name': 'mydb'    },    'api': {        'timeout': 30,        'retries': 3,        'base_url': 'https://api.example.com'    },    'logging': {        'level': 'INFO',        'file': 'app.log'    }}print(\"\\næ’åºåçš„é…ç½®:\")sorted_config = sort_config_items(config_data)for section, settings in sorted_config.items():    print(f\"[{section}]\")    sorted_settings = sort_config_items(settings)    for key, value in sorted_settings.items():        print(f\"  {key} = {value}\")    print()```## âš ï¸ æ³¨æ„äº‹é¡¹- `sorted()` è¿”å›æ–°åˆ—è¡¨ï¼Œä¸ä¿®æ”¹åŸå¯¹è±¡- æ’åºæ˜¯ç¨³å®šçš„ï¼Œç›¸ç­‰å…ƒç´ ä¿æŒåŸæœ‰é¡ºåº- keyå‡½æ•°åº”è¯¥è¿”å›å¯æ¯”è¾ƒçš„å€¼- å¯¹äºå¤æ‚æ’åºï¼Œè€ƒè™‘ä½¿ç”¨å¤šæ¬¡æ’åºæˆ–å…ƒç»„é”®```python# sorted() vs list.sort() å¯¹æ¯”original = [3, 1, 4, 1, 5]# sorted() è¿”å›æ–°åˆ—è¡¨sorted_list = sorted(original)print(f\"åŸåˆ—è¡¨: {original}\")        # [3, 1, 4, 1, 5]print(f\"æ’åºç»“æœ: {sorted_list}\")    # [1, 1, 3, 4, 5]# list.sort() ä¿®æ”¹åŸåˆ—è¡¨original.sort()print(f\"sort()å: {original}\")      # [1, 1, 3, 4, 5]# æ€§èƒ½è€ƒè™‘import timelarge_list = list(range(10000, 0, -1))# æµ‹è¯•sorted()start = time.time()result1 = sorted(large_list)time1 = time.time() - start# æµ‹è¯•list.sort()large_list2 = large_list.copy()start = time.time()large_list2.sort()time2 = time.time() - startprint(f\"\\nsorted()è€—æ—¶: {time1:.4f}ç§’\")print(f\"list.sort()è€—æ—¶: {time2:.4f}ç§’\")print(f\"list.sort()æ›´å¿«: {time1/time2:.2f}å€\")# é”™è¯¯å¤„ç†try:    # ä¸åŒç±»å‹æ— æ³•æ¯”è¾ƒ    mixed = [1, 'hello', 3.14]    result = sorted(mixed)  # TypeErrorexcept TypeError as e:    print(f\"\\næ’åºé”™è¯¯: {e}\")    # è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨keyå‡½æ•°    result = sorted(mixed, key=str)    print(f\"ä½¿ç”¨strä½œä¸ºkey: {result}\")# å¤„ç†Noneå€¼data_with_none = [3, None, 1, None, 2]try:    result = sorted(data_with_none)  # TypeErrorexcept TypeError as e:    print(f\"\\nNoneå€¼æ’åºé”™è¯¯: {e}\")    # è§£å†³æ–¹æ¡ˆï¼šå°†Noneæ”¾åœ¨æœ€å    result = sorted(data_with_none, key=lambda x: (x is None, x))    print(f\"å¤„ç†Noneå€¼: {result}\")```## ğŸ”— ç›¸å…³å†…å®¹- [list.sort() - åˆ—è¡¨æ’åºæ–¹æ³•](../list.md#sort)- [min() - æœ€å°å€¼å‡½æ•°](../min.md)- [max() - æœ€å¤§å€¼å‡½æ•°](../max.md)- [reversed() - åè½¬å‡½æ•°](../reversed.md)## ğŸ“š æ‰©å±•é˜…è¯»- [Pythonå®˜æ–¹æ–‡æ¡£ - sorted()](https://docs.python.org/3/library/functions.html#sorted)- [Pythonæ’åºæŒ‡å—](https://docs.python.org/3/howto/sorting.html)- [operatoræ¨¡å—æ–‡æ¡£](https://docs.python.org/3/library/operator.html)## ğŸ·ï¸ æ ‡ç­¾`æ’åº` `åºåˆ—` `è¿­ä»£å™¨` `ç¨³å®šæ’åº` `keyå‡½æ•°`---**æœ€åæ›´æ–°**: 2024-01-15  **ä½œè€…**: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ  **ç‰ˆæœ¬**: 1.0",
        "url": "/docs/builtins/sorted/",
        "category": "builtins",
        "tags": ["æ’åº","åºåˆ—","è¿­ä»£å™¨"]
      }
      
    
  
    
      ,
      {
        "title": "str() - å­—ç¬¦ä¸²è½¬æ¢å‡½æ•°",
        "content": "# str() - å­—ç¬¦ä¸²è½¬æ¢å‡½æ•°## ğŸ“ æ¦‚è¿°`str()` æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºå°†å„ç§æ•°æ®ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæˆ–è€…åˆ›å»ºæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚å®ƒæ˜¯æœ€å¸¸ç”¨çš„ç±»å‹è½¬æ¢å‡½æ•°ä¹‹ä¸€ï¼Œæ”¯æŒç¼–ç å‚æ•°ç”¨äºå­—èŠ‚åºåˆ—çš„è§£ç ã€‚## ğŸ¯ å­¦ä¹ ç›®æ ‡- æŒæ¡str()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•- ç†è§£ä¸åŒæ•°æ®ç±»å‹åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢è§„åˆ™- å­¦ä¼šä½¿ç”¨ç¼–ç å‚æ•°å¤„ç†å­—èŠ‚æ•°æ®- äº†è§£å­—ç¬¦ä¸²è¡¨ç¤ºå’Œæ˜¾ç¤ºçš„åŒºåˆ«## ğŸ“‹ å‰ç½®çŸ¥è¯†- PythonåŸºæœ¬æ•°æ®ç±»å‹- å­—ç¬¦ç¼–ç åŸºç¡€æ¦‚å¿µ- å­—èŠ‚å’Œå­—ç¬¦ä¸²çš„åŒºåˆ«## ğŸ” è¯¦ç»†å†…å®¹### åŸºæœ¬æ¦‚å¿µ`str()` å‡½æ•°å°†è¾“å…¥å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¡¨ç¤ºã€‚å¯¹äºè‡ªå®šä¹‰å¯¹è±¡ï¼Œå®ƒä¼šè°ƒç”¨å¯¹è±¡çš„ `__str__()` æ–¹æ³•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è°ƒç”¨ `__repr__()` æ–¹æ³•ã€‚### è¯­æ³•æ ¼å¼```python# æ— å‚æ•°è°ƒç”¨ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²str()# è½¬æ¢å¯¹è±¡ä¸ºå­—ç¬¦ä¸²str(object)# ä»å­—èŠ‚åºåˆ—è§£ç ä¸ºå­—ç¬¦ä¸²str(object, encoding='utf-8', errors='strict')```### å‚æ•°è¯´æ˜| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ ||--------|------|------|--------|---------|| object | any | å¦ | æ—  | è¦è½¬æ¢çš„å¯¹è±¡ || encoding | str | å¦ | 'utf-8' | å­—èŠ‚è§£ç æ—¶ä½¿ç”¨çš„ç¼–ç  || errors | str | å¦ | 'strict' | ç¼–ç é”™è¯¯çš„å¤„ç†æ–¹å¼ |### è¿”å›å€¼- **ç±»å‹**: str- **è¯´æ˜**: è½¬æ¢åçš„å­—ç¬¦ä¸²å¯¹è±¡## ğŸ’¡ å®é™…åº”ç”¨### åŸºç¡€ç”¨æ³•```python# æ— å‚æ•°è°ƒç”¨result = str()  # è¿”å›ç©ºå­—ç¬¦ä¸²print(f\"æ— å‚æ•°è°ƒç”¨: '{result}'\")  # è¾“å‡º: æ— å‚æ•°è°ƒç”¨: ''print(f\"é•¿åº¦: {len(result)}\")      # è¾“å‡º: é•¿åº¦: 0# æ•°å€¼è½¬æ¢int_num = 42float_num = 3.14159complex_num = 3 + 4jprint(f\"æ•´æ•°è½¬æ¢: '{str(int_num)}'\")      # è¾“å‡º: æ•´æ•°è½¬æ¢: '42'print(f\"æµ®ç‚¹æ•°è½¬æ¢: '{str(float_num)}'\")   # è¾“å‡º: æµ®ç‚¹æ•°è½¬æ¢: '3.14159'print(f\"å¤æ•°è½¬æ¢: '{str(complex_num)}'\")   # è¾“å‡º: å¤æ•°è½¬æ¢: '(3+4j)'# å¸ƒå°”å€¼è½¬æ¢print(f\"Trueè½¬æ¢: '{str(True)}'\")   # è¾“å‡º: Trueè½¬æ¢: 'True'print(f\"Falseè½¬æ¢: '{str(False)}'\") # è¾“å‡º: Falseè½¬æ¢: 'False'```### å®¹å™¨ç±»å‹è½¬æ¢```python# åˆ—è¡¨è½¬æ¢my_list = [1, 2, 3, 'hello']list_str = str(my_list)print(f\"åˆ—è¡¨è½¬æ¢: {list_str}\")  # è¾“å‡º: åˆ—è¡¨è½¬æ¢: [1, 2, 3, 'hello']# å­—å…¸è½¬æ¢my_dict = {'name': 'å¼ ä¸‰', 'age': 25}dict_str = str(my_dict)print(f\"å­—å…¸è½¬æ¢: {dict_str}\")  # è¾“å‡º: å­—å…¸è½¬æ¢: {'name': 'å¼ ä¸‰', 'age': 25}# å…ƒç»„è½¬æ¢my_tuple = (1, 2, 3)tuple_str = str(my_tuple)print(f\"å…ƒç»„è½¬æ¢: {tuple_str}\")  # è¾“å‡º: å…ƒç»„è½¬æ¢: (1, 2, 3)# é›†åˆè½¬æ¢my_set = {1, 2, 3}set_str = str(my_set)print(f\"é›†åˆè½¬æ¢: {set_str}\")  # è¾“å‡º: é›†åˆè½¬æ¢: {1, 2, 3}```### å­—èŠ‚åºåˆ—è§£ç ```python# UTF-8ç¼–ç çš„å­—èŠ‚åºåˆ—utf8_bytes = 'ä½ å¥½ä¸–ç•Œ'.encode('utf-8')print(f\"å­—èŠ‚åºåˆ—: {utf8_bytes}\")# è§£ç ä¸ºå­—ç¬¦ä¸²decoded_str = str(utf8_bytes, encoding='utf-8')print(f\"è§£ç ç»“æœ: {decoded_str}\")  # è¾“å‡º: è§£ç ç»“æœ: ä½ å¥½ä¸–ç•Œ# ä¸åŒç¼–ç ç¤ºä¾‹text = \"Hello ä¸–ç•Œ\"encodings = ['utf-8', 'utf-16', 'gbk']for encoding in encodings:    try:        # ç¼–ç ä¸ºå­—èŠ‚        encoded_bytes = text.encode(encoding)        print(f\"\\n{encoding}ç¼–ç :\")        print(f\"  å­—èŠ‚åºåˆ—: {encoded_bytes}\")                # è§£ç å›å­—ç¬¦ä¸²        decoded = str(encoded_bytes, encoding=encoding)        print(f\"  è§£ç ç»“æœ: {decoded}\")            except UnicodeEncodeError as e:        print(f\"  {encoding}ç¼–ç å¤±è´¥: {e}\")```### é”™è¯¯å¤„ç†æ¨¡å¼```python# åŒ…å«æ— æ•ˆå­—èŠ‚çš„åºåˆ—invalid_bytes = b'\\xff\\xfe\\x00H\\x00e\\x00l\\x00l\\x00o'# ä¸åŒçš„é”™è¯¯å¤„ç†æ¨¡å¼error_modes = ['strict', 'ignore', 'replace', 'xmlcharrefreplace']for mode in error_modes:    try:        result = str(invalid_bytes, encoding='utf-8', errors=mode)        print(f\"{mode}æ¨¡å¼: '{result}'\")    except UnicodeDecodeError as e:        print(f\"{mode}æ¨¡å¼: è§£ç é”™è¯¯ - {e}\")# è¾“å‡ºç¤ºä¾‹:# strictæ¨¡å¼: è§£ç é”™è¯¯ - 'utf-8' codec can't decode byte 0xff in position 0# ignoreæ¨¡å¼: 'Hello'# replaceæ¨¡å¼: 'ï¿½ï¿½Hello'# xmlcharrefreplaceæ¨¡å¼: '&#255;&#254;&#0;H&#0;e&#0;l&#0;l&#0;o'```### è‡ªå®šä¹‰å¯¹è±¡è½¬æ¢```pythonclass Person:    def __init__(self, name, age):        self.name = name        self.age = age        def __str__(self):        \"\"\"å®šä¹‰å­—ç¬¦ä¸²è¡¨ç¤º\"\"\"        return f\"{self.name}({self.age}å²)\"        def __repr__(self):        \"\"\"å®šä¹‰å¼€å‘è€…è¡¨ç¤º\"\"\"        return f\"Person(name='{self.name}', age={self.age})\"class Student:    def __init__(self, name, grade):        self.name = name        self.grade = grade        # åªå®šä¹‰__repr__ï¼Œæ²¡æœ‰__str__    def __repr__(self):        return f\"Student(name='{self.name}', grade='{self.grade}')\"# æµ‹è¯•è‡ªå®šä¹‰å¯¹è±¡person = Person(\"å¼ ä¸‰\", 25)student = Student(\"æå››\", \"é«˜ä¸‰\")print(f\"Person str(): {str(person)}\")    # è°ƒç”¨__str__print(f\"Person repr(): {repr(person)}\")  # è°ƒç”¨__repr__print(f\"Student str(): {str(student)}\")  # è°ƒç”¨__repr__ï¼ˆå› ä¸ºæ²¡æœ‰__str__ï¼‰print(f\"Student repr(): {repr(student)}\") # è°ƒç”¨__repr__```### å®é™…æ¡ˆä¾‹ï¼šæ•°æ®æ ¼å¼åŒ–```pythondef format_data_report(data_dict):    \"\"\"æ ¼å¼åŒ–æ•°æ®æŠ¥å‘Š\"\"\"    report_lines = []    report_lines.append(\"=\" * 50)    report_lines.append(\"æ•°æ®æŠ¥å‘Š\")    report_lines.append(\"=\" * 50)        for key, value in data_dict.items():        # æ ¹æ®æ•°æ®ç±»å‹è¿›è¡Œä¸åŒçš„æ ¼å¼åŒ–        if isinstance(value, (int, float)):            if isinstance(value, float):                formatted_value = f\"{value:.2f}\"            else:                formatted_value = str(value)        elif isinstance(value, list):            if len(value)  å­—èŠ‚decoded = str(encoded, 'utf-8')  # å­—èŠ‚ -> å­—ç¬¦ä¸²print(f\"åŸå§‹æ–‡æœ¬: {text}\")print(f\"ç¼–ç å: {encoded}\")print(f\"è§£ç å: {decoded}\")print(f\"æ˜¯å¦ç›¸ç­‰: {text == decoded}\")# é”™è¯¯ç¤ºä¾‹ï¼šç¼–ç ä¸åŒ¹é…try:    wrong_decode = str(encoded, 'ascii')  # ç”¨ASCIIè§£ç UTF-8except UnicodeDecodeError as e:    print(f\"è§£ç é”™è¯¯: {e}\")```### å†…å­˜ä½¿ç”¨```pythonimport sys# å­—ç¬¦ä¸²å†…å­˜ä½¿ç”¨short_str = \"hello\"long_str = \"hello\" * 1000print(f\"çŸ­å­—ç¬¦ä¸²å†…å­˜: {sys.getsizeof(short_str)} å­—èŠ‚\")print(f\"é•¿å­—ç¬¦ä¸²å†…å­˜: {sys.getsizeof(long_str)} å­—èŠ‚\")# å­—ç¬¦ä¸²é©»ç•™ï¼ˆstring interningï¼‰a = \"hello\"b = \"hello\"c = str(\"hello\")print(f\"\\nå­—ç¬¦ä¸²é©»ç•™:\")print(f\"a is b: {a is b}\")  # Trueï¼Œå°å­—ç¬¦ä¸²ä¼šè¢«é©»ç•™print(f\"a is c: {a is c}\")  # Trueï¼Œç›¸åŒå†…å®¹print(f\"id(a): {id(a)}\")print(f\"id(b): {id(b)}\")print(f\"id(c): {id(c)}\")```## ğŸ”— ç›¸å…³å†…å®¹### ç›¸å…³å‡½æ•°- [repr() - å¯¹è±¡è¡¨ç¤ºå‡½æ•°](repr.md) - è·å–å¯¹è±¡çš„å¼€å‘è€…è¡¨ç¤º- [ascii() - ASCIIè¡¨ç¤ºå‡½æ•°](ascii.md) - è·å–ASCIIå­—ç¬¦ä¸²è¡¨ç¤º- [format() - æ ¼å¼åŒ–å‡½æ•°](format.md) - æ ¼å¼åŒ–å€¼- [int() - æ•´æ•°è½¬æ¢å‡½æ•°](int.md) - è½¬æ¢ä¸ºæ•´æ•°- [float() - æµ®ç‚¹æ•°è½¬æ¢å‡½æ•°](float.md) - è½¬æ¢ä¸ºæµ®ç‚¹æ•°- [bool() - å¸ƒå°”è½¬æ¢å‡½æ•°](bool.md) - è½¬æ¢ä¸ºå¸ƒå°”å€¼### å­—ç¬¦ä¸²æ–¹æ³•- [å­—ç¬¦ä¸²æ–¹æ³•è¯¦è§£](../basics/string-methods.md) - å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•- [å­—ç¬¦ä¸²æ ¼å¼åŒ–](../basics/string-formatting.md) - æ ¼å¼åŒ–æŠ€å·§- [æ­£åˆ™è¡¨è¾¾å¼](../stdlib/regex.md) - æ¨¡å¼åŒ¹é…### ç›¸å…³æ¦‚å¿µ- [å­—ç¬¦ç¼–ç ](../advanced/character-encoding.md) - ç¼–ç è¯¦è§£- [Pythonæ•°æ®ç±»å‹](../basics/data-types.md) - åŸºæœ¬æ•°æ®ç±»å‹- [å¼‚å¸¸å¤„ç†](../basics/exceptions.md) - å¼‚å¸¸å¤„ç†æœºåˆ¶## ğŸ“š æ‰©å±•é˜…è¯»- [Pythonå®˜æ–¹æ–‡æ¡£ - str()](https://docs.python.org/3/library/functions.html#func-str)- [Pythonå­—ç¬¦ä¸²æ–¹æ³•](https://docs.python.org/3/library/stdtypes.html#string-methods)- [Unicodeå’Œå­—ç¬¦ç¼–ç ](https://docs.python.org/3/howto/unicode.html)- [å­—ç¬¦ä¸²æ ¼å¼åŒ–](https://docs.python.org/3/library/string.html#format-string-syntax)## ğŸ·ï¸ æ ‡ç­¾`ç±»å‹è½¬æ¢` `å­—ç¬¦ä¸²` `ç¼–ç è§£ç ` `æ–‡æœ¬å¤„ç†` `æ ¼å¼åŒ–`---**æœ€åæ›´æ–°**: 2024-01-15  **ä½œè€…**: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ  **ç‰ˆæœ¬**: 1.0",
        "url": "/docs/builtins/str/",
        "category": "builtins",
        "tags": ["ç±»å‹è½¬æ¢","å­—ç¬¦ä¸²","æ–‡æœ¬å¤„ç†"]
      }
      
    
  
    
      ,
      {
        "title": "sum() - æ±‚å’Œå‡½æ•°",
        "content": "# sum() - æ±‚å’Œå‡½æ•°## ğŸ“ æ¦‚è¿°`sum()` æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºè®¡ç®—å¯è¿­ä»£å¯¹è±¡ä¸­æ‰€æœ‰æ•°å€¼çš„æ€»å’Œã€‚å®ƒæ˜¯æ•°æ®åˆ†æå’Œæ•°å€¼è®¡ç®—ä¸­æœ€å¸¸ç”¨çš„å‡½æ•°ä¹‹ä¸€ï¼Œæ”¯æŒæ•´æ•°ã€æµ®ç‚¹æ•°ä»¥åŠä»»ä½•å®šä¹‰äº†åŠ æ³•è¿ç®—çš„å¯¹è±¡ã€‚## ğŸ¯ å­¦ä¹ ç›®æ ‡- æŒæ¡sum()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•- ç†è§£startå‚æ•°çš„ä½œç”¨- å­¦ä¼šå¤„ç†ä¸åŒæ•°æ®ç±»å‹çš„æ±‚å’Œ- äº†è§£æ€§èƒ½ä¼˜åŒ–æŠ€å·§## ğŸ“‹ å‰ç½®çŸ¥è¯†- PythonåŸºæœ¬æ•°æ®ç±»å‹- å¯è¿­ä»£å¯¹è±¡æ¦‚å¿µ- ç®—æœ¯è¿ç®—ç¬¦åŸºç¡€- åˆ—è¡¨æ¨å¯¼å¼åŸºç¡€## ğŸ” è¯¦ç»†å†…å®¹### åŸºæœ¬æ¦‚å¿µ`sum()` å‡½æ•°é€šè¿‡åŠ æ³•è¿ç®—ç¬¦ `+` ç´¯åŠ å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚å®ƒä»å·¦åˆ°å³ä¾æ¬¡ç›¸åŠ ï¼Œæ”¯æŒæ•°å€¼ç±»å‹ä»¥åŠä»»ä½•å®ç°äº† `__add__` æ–¹æ³•çš„å¯¹è±¡ã€‚### è¯­æ³•æ ¼å¼```pythonsum(iterable, start=0)```### å‚æ•°è¯´æ˜| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ ||--------|------|------|--------|---------|| iterable | iterable | æ˜¯ | æ—  | åŒ…å«æ•°å€¼çš„å¯è¿­ä»£å¯¹è±¡ || start | number | å¦ | 0 | æ±‚å’Œçš„èµ·å§‹å€¼ |### è¿”å›å€¼- **ç±»å‹**: ä¸å…ƒç´ ç±»å‹ç›¸å…³çš„æ•°å€¼ç±»å‹- **è¯´æ˜**: æ‰€æœ‰å…ƒç´ çš„æ€»å’ŒåŠ ä¸Šèµ·å§‹å€¼## ğŸ’¡ å®é™…åº”ç”¨### åŸºç¡€ç”¨æ³•```python# æ•´æ•°åˆ—è¡¨æ±‚å’Œnumbers = [1, 2, 3, 4, 5]total = sum(numbers)print(f\"sum({numbers}) = {total}\")  # è¾“å‡º: sum([1, 2, 3, 4, 5]) = 15# æµ®ç‚¹æ•°æ±‚å’Œfloat_numbers = [1.5, 2.3, 3.7, 4.1]float_total = sum(float_numbers)print(f\"æµ®ç‚¹æ•°æ±‚å’Œ: {float_total}\")  # è¾“å‡º: æµ®ç‚¹æ•°æ±‚å’Œ: 11.6# å…ƒç»„æ±‚å’Œtuple_numbers = (10, 20, 30, 40)tuple_total = sum(tuple_numbers)print(f\"å…ƒç»„æ±‚å’Œ: {tuple_total}\")  # è¾“å‡º: å…ƒç»„æ±‚å’Œ: 100# ç”Ÿæˆå™¨æ±‚å’Œgen_numbers = (x for x in range(1, 6))gen_total = sum(gen_numbers)print(f\"ç”Ÿæˆå™¨æ±‚å’Œ: {gen_total}\")  # è¾“å‡º: ç”Ÿæˆå™¨æ±‚å’Œ: 15# ç©ºåºåˆ—æ±‚å’Œempty_sum = sum([])print(f\"ç©ºåˆ—è¡¨æ±‚å’Œ: {empty_sum}\")  # è¾“å‡º: ç©ºåˆ—è¡¨æ±‚å’Œ: 0# rangeå¯¹è±¡æ±‚å’Œrange_sum = sum(range(1, 11))  # 1åˆ°10çš„å’Œprint(f\"1åˆ°10çš„å’Œ: {range_sum}\")  # è¾“å‡º: 1åˆ°10çš„å’Œ: 55```### ä½¿ç”¨startå‚æ•°```python# æŒ‡å®šèµ·å§‹å€¼numbers = [1, 2, 3, 4, 5]sum_with_start = sum(numbers, 10)print(f\"ä»10å¼€å§‹æ±‚å’Œ: {sum_with_start}\")  # è¾“å‡º: ä»10å¼€å§‹æ±‚å’Œ: 25# è´Ÿæ•°èµ·å§‹å€¼sum_negative_start = sum(numbers, -5)print(f\"ä»-5å¼€å§‹æ±‚å’Œ: {sum_negative_start}\")  # è¾“å‡º: ä»-5å¼€å§‹æ±‚å’Œ: 10# æµ®ç‚¹æ•°èµ·å§‹å€¼sum_float_start = sum(numbers, 2.5)print(f\"ä»2.5å¼€å§‹æ±‚å’Œ: {sum_float_start}\")  # è¾“å‡º: ä»2.5å¼€å§‹æ±‚å’Œ: 17.5# å¤æ•°èµ·å§‹å€¼complex_numbers = [1, 2, 3]sum_complex_start = sum(complex_numbers, 1+2j)print(f\"å¤æ•°èµ·å§‹å€¼æ±‚å’Œ: {sum_complex_start}\")  # è¾“å‡º: å¤æ•°èµ·å§‹å€¼æ±‚å’Œ: (7+2j)# å®é™…åº”ç”¨ï¼šè®¡ç®—æ€»ä»·ï¼ˆå«ç¨ï¼‰prices = [19.99, 29.99, 39.99, 49.99]tax_rate = 0.08subtotal = sum(prices)tax = subtotal * tax_ratetotal_with_tax = sum(prices, tax)print(f\"å•†å“ä»·æ ¼: {prices}\")print(f\"å°è®¡: ${subtotal:.2f}\")print(f\"ç¨è´¹: ${tax:.2f}\")print(f\"æ€»è®¡: ${total_with_tax:.2f}\")```### åˆ—è¡¨æ¨å¯¼å¼ä¸sumç»“åˆ```python# è®¡ç®—å¹³æ–¹å’Œnumbers = [1, 2, 3, 4, 5]square_sum = sum(x**2 for x in numbers)print(f\"å¹³æ–¹å’Œ: {square_sum}\")  # è¾“å‡º: å¹³æ–¹å’Œ: 55# æ¡ä»¶æ±‚å’Œall_numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]even_sum = sum(x for x in all_numbers if x % 2 == 0)odd_sum = sum(x for x in all_numbers if x % 2 == 1)print(f\"å¶æ•°å’Œ: {even_sum}\")  # è¾“å‡º: å¶æ•°å’Œ: 30print(f\"å¥‡æ•°å’Œ: {odd_sum}\")    # è¾“å‡º: å¥‡æ•°å’Œ: 25# åµŒå¥—åˆ—è¡¨æ±‚å’Œmatrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]matrix_sum = sum(sum(row) for row in matrix)print(f\"çŸ©é˜µæ€»å’Œ: {matrix_sum}\")  # è¾“å‡º: çŸ©é˜µæ€»å’Œ: 45# å­—å…¸å€¼æ±‚å’Œscores = {'Alice': 85, 'Bob': 92, 'Charlie': 78, 'Diana': 96}total_score = sum(scores.values())average_score = total_score / len(scores)print(f\"æ€»åˆ†: {total_score}\")print(f\"å¹³å‡åˆ†: {average_score:.2f}\")# å¤æ‚æ¡ä»¶æ±‚å’Œstudents = [    {'name': 'å¼ ä¸‰', 'age': 20, 'score': 85, 'grade': 'A'},    {'name': 'æå››', 'age': 19, 'score': 92, 'grade': 'A'},    {'name': 'ç‹äº”', 'age': 21, 'score': 78, 'grade': 'B'},    {'name': 'èµµå…­', 'age': 18, 'score': 88, 'grade': 'A'}]# Açº§å­¦ç”Ÿæ€»åˆ†a_grade_total = sum(s['score'] for s in students if s['grade'] == 'A')print(f\"Açº§å­¦ç”Ÿæ€»åˆ†: {a_grade_total}\")# æˆå¹´å­¦ç”Ÿæ€»åˆ†adult_total = sum(s['score'] for s in students if s['age'] >= 20)print(f\"æˆå¹´å­¦ç”Ÿæ€»åˆ†: {adult_total}\")# é«˜åˆ†å­¦ç”Ÿæ•°é‡ï¼ˆä½¿ç”¨å¸ƒå°”å€¼æ±‚å’Œï¼‰high_score_count = sum(1 for s in students if s['score'] >= 85)print(f\"é«˜åˆ†å­¦ç”Ÿæ•°é‡: {high_score_count}\")```### å®é™…æ¡ˆä¾‹ï¼šè´¢åŠ¡æ•°æ®åˆ†æ```pythondef analyze_financial_data(transactions):    \"\"\"åˆ†æè´¢åŠ¡äº¤æ˜“æ•°æ®\"\"\"    if not transactions:        return {}        # æ€»æ”¶å…¥å’Œæ”¯å‡º    total_income = sum(t['amount'] for t in transactions if t['amount'] > 0)    total_expense = sum(abs(t['amount']) for t in transactions if t['amount']  0) if total_income > 0 else 0    avg_expense = total_expense / sum(1 for t in transactions if t['amount']  0 else 0        return {        'total_income': total_income,        'total_expense': total_expense,        'net_income': net_income,        'categories': categories,        'monthly_totals': monthly_totals,        'averages': {            'transaction': avg_transaction,            'income': avg_income,            'expense': avg_expense        },        'transaction_count': len(transactions)    }# æµ‹è¯•è´¢åŠ¡æ•°æ®financial_transactions = [    {'date': '2024-01-15', 'amount': 3000, 'category': 'å·¥èµ„', 'description': 'æœˆè–ª'},    {'date': '2024-01-16', 'amount': -800, 'category': 'æˆ¿ç§Ÿ', 'description': 'æˆ¿ç§Ÿæ”¯ä»˜'},    {'date': '2024-01-17', 'amount': -200, 'category': 'é£Ÿç‰©', 'description': 'è¶…å¸‚è´­ç‰©'},    {'date': '2024-01-18', 'amount': -50, 'category': 'äº¤é€š', 'description': 'åœ°é“å¡å……å€¼'},    {'date': '2024-01-20', 'amount': 500, 'category': 'å…¼èŒ', 'description': 'å‘¨æœ«å…¼èŒ'},    {'date': '2024-02-01', 'amount': -300, 'category': 'å¨±ä¹', 'description': 'çœ‹ç”µå½±è´­ç‰©'},    {'date': '2024-02-05', 'amount': 3000, 'category': 'å·¥èµ„', 'description': 'æœˆè–ª'},    {'date': '2024-02-10', 'amount': -150, 'category': 'é£Ÿç‰©', 'description': 'é¤å…ç”¨é¤'}]analysis = analyze_financial_data(financial_transactions)print(\"è´¢åŠ¡åˆ†ææŠ¥å‘Š:\")print(f\"æ€»æ”¶å…¥: Â¥{analysis['total_income']:.2f}\")print(f\"æ€»æ”¯å‡º: Â¥{analysis['total_expense']:.2f}\")print(f\"å‡€æ”¶å…¥: Â¥{analysis['net_income']:.2f}\")print(f\"äº¤æ˜“ç¬”æ•°: {analysis['transaction_count']}\")print(f\"å¹³å‡äº¤æ˜“é¢: Â¥{analysis['averages']['transaction']:.2f}\")print(\"\\næŒ‰ç±»åˆ«ç»Ÿè®¡:\")for category, amount in analysis['categories'].items():    print(f\"  {category}: Â¥{amount:.2f}\")print(\"\\næŒ‰æœˆä»½ç»Ÿè®¡:\")for month, total in analysis['monthly_totals'].items():    print(f\"  {month}: Â¥{total:.2f}\")```### æ•°å­¦è®¡ç®—åº”ç”¨```pythonimport mathdef calculate_statistics(data):    \"\"\"è®¡ç®—åŸºæœ¬ç»Ÿè®¡é‡\"\"\"    if not data:        return None        n = len(data)    total = sum(data)    mean = total / n        # æ–¹å·®å’Œæ ‡å‡†å·®    variance = sum((x - mean) ** 2 for x in data) / n    std_dev = math.sqrt(variance)        # æ ·æœ¬æ–¹å·®å’Œæ ‡å‡†å·®    sample_variance = sum((x - mean) ** 2 for x in data) / (n - 1) if n > 1 else 0    sample_std_dev = math.sqrt(sample_variance) if n > 1 else 0        return {        'count': n,        'sum': total,        'mean': mean,        'variance': variance,        'std_dev': std_dev,        'sample_variance': sample_variance,        'sample_std_dev': sample_std_dev    }def weighted_average(values, weights):    \"\"\"è®¡ç®—åŠ æƒå¹³å‡å€¼\"\"\"    if len(values) != len(weights):        raise ValueError(\"å€¼å’Œæƒé‡çš„æ•°é‡å¿…é¡»ç›¸ç­‰\")        weighted_sum = sum(v * w for v, w in zip(values, weights))    weight_sum = sum(weights)        return weighted_sum / weight_sum if weight_sum != 0 else 0def moving_average(data, window_size):    \"\"\"è®¡ç®—ç§»åŠ¨å¹³å‡å€¼\"\"\"    if window_size > len(data):        return []        moving_averages = []    for i in range(len(data) - window_size + 1):        window = data[i:i + window_size]        avg = sum(window) / window_size        moving_averages.append(avg)        return moving_averagesdef cumulative_sum(data):    \"\"\"è®¡ç®—ç´¯ç§¯å’Œ\"\"\"    cumsum = []    running_total = 0    for value in data:        running_total += value        cumsum.append(running_total)    return cumsum# æµ‹è¯•æ•°æ®test_data = [10, 15, 20, 25, 30, 35, 40, 45, 50]# åŸºæœ¬ç»Ÿè®¡stats = calculate_statistics(test_data)print(\"åŸºæœ¬ç»Ÿè®¡é‡:\")for key, value in stats.items():    print(f\"  {key}: {value:.4f}\")# åŠ æƒå¹³å‡scores = [85, 90, 78, 92, 88]weights = [0.2, 0.3, 0.1, 0.25, 0.15]weighted_avg = weighted_average(scores, weights)print(f\"\\nåŠ æƒå¹³å‡åˆ†: {weighted_avg:.2f}\")# ç§»åŠ¨å¹³å‡stock_prices = [100, 102, 98, 105, 103, 107, 104, 109, 106, 111]ma_3 = moving_average(stock_prices, 3)print(f\"\\nè‚¡ä»·: {stock_prices}\")print(f\"3æ—¥ç§»åŠ¨å¹³å‡: {[f'{x:.2f}' for x in ma_3]}\")# ç´¯ç§¯å’Œdaily_sales = [120, 150, 180, 200, 175, 190, 210]cumsum = cumulative_sum(daily_sales)print(f\"\\næ¯æ—¥é”€å”®: {daily_sales}\")print(f\"ç´¯ç§¯é”€å”®: {cumsum}\")print(f\"æ€»é”€å”®é¢: {sum(daily_sales)}\")```### å­—ç¬¦ä¸²å’Œåºåˆ—æ“ä½œ```python# å­—ç¬¦ä¸²ä¸èƒ½ç›´æ¥ç”¨sumï¼ˆä¼šæŠ¥é”™ï¼‰try:    result = sum(['hello', 'world'])except TypeError as e:    print(f\"å­—ç¬¦ä¸²æ±‚å’Œé”™è¯¯: {e}\")# æ­£ç¡®çš„å­—ç¬¦ä¸²è¿æ¥æ–¹å¼strings = ['hello', ' ', 'world', '!']concatenated = ''.join(strings)  # æ¨èæ–¹å¼print(f\"å­—ç¬¦ä¸²è¿æ¥: '{concatenated}'\")# ä½¿ç”¨sumè¿æ¥å­—ç¬¦ä¸²ï¼ˆä¸æ¨èï¼Œæ€§èƒ½å·®ï¼‰# concatenated_sum = sum(strings, '')  # è¿™ä¼šæŠ¥é”™# ä½†å¯ä»¥ç”¨äºå…¶ä»–å¯ç›¸åŠ çš„å¯¹è±¡lists = [[1, 2], [3, 4], [5, 6]]flattened = sum(lists, [])print(f\"åˆ—è¡¨å±•å¹³: {flattened}\")# æ›´å¥½çš„åˆ—è¡¨å±•å¹³æ–¹å¼from itertools import chainflattened_better = list(chain.from_iterable(lists))print(f\"æ›´å¥½çš„å±•å¹³: {flattened_better}\")# é›†åˆæ“ä½œsets = [{1, 2}, {2, 3}, {3, 4}]union_set = sum(sets, set())  # æ±‚å¹¶é›†print(f\"é›†åˆå¹¶é›†: {union_set}\")# è®¡æ•°å™¨æ“ä½œfrom collections import Countercounters = [Counter('hello'), Counter('world'), Counter('python')]total_counter = sum(counters, Counter())print(f\"è®¡æ•°å™¨æ±‚å’Œ: {total_counter}\")# è‡ªå®šä¹‰å¯¹è±¡çš„æ±‚å’Œclass Vector:    def __init__(self, x, y):        self.x = x        self.y = y        def __add__(self, other):        return Vector(self.x + other.x, self.y + other.y)        def __repr__(self):        return f\"Vector({self.x}, {self.y})\"vectors = [Vector(1, 2), Vector(3, 4), Vector(5, 6)]vector_sum = sum(vectors, Vector(0, 0))print(f\"å‘é‡æ±‚å’Œ: {vector_sum}\")```## âš ï¸ æ³¨æ„äº‹é¡¹### æ•°æ®ç±»å‹å…¼å®¹æ€§```python# æ··åˆæ•°æ®ç±»å‹mixed_numbers = [1, 2.5, 3, 4.7]mixed_sum = sum(mixed_numbers)print(f\"æ··åˆç±»å‹æ±‚å’Œ: {mixed_sum}, ç±»å‹: {type(mixed_sum)}\")# å¸ƒå°”å€¼æ±‚å’Œï¼ˆTrue=1, False=0ï¼‰bool_values = [True, False, True, True, False]bool_sum = sum(bool_values)print(f\"å¸ƒå°”å€¼æ±‚å’Œ: {bool_sum}\")  # è¾“å‡º: 3# å¤æ•°æ±‚å’Œcomplex_numbers = [1+2j, 3+4j, 5+6j]complex_sum = sum(complex_numbers)print(f\"å¤æ•°æ±‚å’Œ: {complex_sum}\")# ä¸å…¼å®¹çš„ç±»å‹try:    incompatible = [1, '2', 3]    result = sum(incompatible)except TypeError as e:    print(f\"ç±»å‹ä¸å…¼å®¹: {e}\")```### æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜```python# æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜float_list = [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1]float_sum = sum(float_list)print(f\"æµ®ç‚¹æ•°æ±‚å’Œ: {float_sum}\")print(f\"æ˜¯å¦ç­‰äº1.0: {float_sum == 1.0}\")print(f\"å·®å€¼: {abs(float_sum - 1.0)}\")# ä½¿ç”¨decimalæ¨¡å—æé«˜ç²¾åº¦from decimal import Decimaldecimal_list = [Decimal('0.1')] * 10decimal_sum = sum(decimal_list)print(f\"Decimalæ±‚å’Œ: {decimal_sum}\")print(f\"æ˜¯å¦ç­‰äº1.0: {decimal_sum == Decimal('1.0')}\")# ä½¿ç”¨fractionsæ¨¡å—from fractions import Fractionfraction_list = [Fraction(1, 10)] * 10fraction_sum = sum(fraction_list)print(f\"Fractionæ±‚å’Œ: {fraction_sum}\")print(f\"è½¬æ¢ä¸ºæµ®ç‚¹æ•°: {float(fraction_sum)}\")```### æ€§èƒ½ä¼˜åŒ–```pythonimport timeimport numpy as np# ç”Ÿæˆå¤§é‡æµ‹è¯•æ•°æ®large_data = list(range(1000000))# æ–¹æ³•1ï¼šå†…ç½®sumå‡½æ•°start_time = time.time()result1 = sum(large_data)time1 = time.time() - start_time# æ–¹æ³•2ï¼šæ‰‹åŠ¨å¾ªç¯start_time = time.time()total = 0for num in large_data:    total += numresult2 = totaltime2 = time.time() - start_time# æ–¹æ³•3ï¼šnumpyæ•°ç»„ï¼ˆå¦‚æœå¯ç”¨ï¼‰try:    np_array = np.array(large_data)    start_time = time.time()    result3 = np.sum(np_array)    time3 = time.time() - start_time        print(f\"æ€§èƒ½æ¯”è¾ƒï¼ˆæ•°æ®é‡: {len(large_data)}ï¼‰:\")    print(f\"å†…ç½®sum(): {time1:.6f}ç§’, ç»“æœ: {result1}\")    print(f\"æ‰‹åŠ¨å¾ªç¯: {time2:.6f}ç§’, ç»“æœ: {result2}\")    print(f\"numpy.sum(): {time3:.6f}ç§’, ç»“æœ: {result3}\")    print(f\"numpyå¿« {time1/time3:.2f} å€\")except ImportError:    print(f\"æ€§èƒ½æ¯”è¾ƒï¼ˆæ•°æ®é‡: {len(large_data)}ï¼‰:\")    print(f\"å†…ç½®sum(): {time1:.6f}ç§’, ç»“æœ: {result1}\")    print(f\"æ‰‹åŠ¨å¾ªç¯: {time2:.6f}ç§’, ç»“æœ: {result2}\")# å†…å­˜ä¼˜åŒ–ï¼šä½¿ç”¨ç”Ÿæˆå™¨def large_number_generator(n):    \"\"\"ç”Ÿæˆå¤§é‡æ•°å­—çš„ç”Ÿæˆå™¨\"\"\"    for i in range(n):        yield i# ç”Ÿæˆå™¨æ±‚å’Œï¼ˆå†…å­˜å‹å¥½ï¼‰start_time = time.time()gen_sum = sum(large_number_generator(1000000))time_gen = time.time() - start_timeprint(f\"ç”Ÿæˆå™¨æ±‚å’Œ: {time_gen:.6f}ç§’, ç»“æœ: {gen_sum}\")```### è¾¹ç•Œæƒ…å†µå¤„ç†```python# ç©ºåºåˆ—empty_sum = sum([])print(f\"ç©ºåˆ—è¡¨æ±‚å’Œ: {empty_sum}\")# å•å…ƒç´ åºåˆ—single_sum = sum([42])print(f\"å•å…ƒç´ æ±‚å’Œ: {single_sum}\")# åŒ…å«é›¶çš„åºåˆ—with_zeros = [1, 0, 2, 0, 3]zero_sum = sum(with_zeros)print(f\"åŒ…å«é›¶çš„æ±‚å’Œ: {zero_sum}\")# è´Ÿæ•°æ±‚å’Œnegative_numbers = [-1, -2, -3, -4, -5]negative_sum = sum(negative_numbers)print(f\"è´Ÿæ•°æ±‚å’Œ: {negative_sum}\")# æå¤§æ•°å€¼large_numbers = [10**100, 10**100, 10**100]large_sum = sum(large_numbers)print(f\"æå¤§æ•°æ±‚å’Œ: {large_sum}\")# æ— ç©·å¤§inf_numbers = [float('inf'), 1, 2, 3]inf_sum = sum(inf_numbers)print(f\"åŒ…å«æ— ç©·å¤§çš„æ±‚å’Œ: {inf_sum}\")# NaNå€¼nan_numbers = [1, 2, float('nan'), 4]nan_sum = sum(nan_numbers)print(f\"åŒ…å«NaNçš„æ±‚å’Œ: {nan_sum}\")```## ğŸ”— ç›¸å…³å†…å®¹### ç›¸å…³å‡½æ•°- [min() - æœ€å°å€¼å‡½æ•°](min.md) - æ‰¾æœ€å°å€¼- [max() - æœ€å¤§å€¼å‡½æ•°](max.md) - æ‰¾æœ€å¤§å€¼- [len() - é•¿åº¦å‡½æ•°](len.md) - è·å–é•¿åº¦- [abs() - ç»å¯¹å€¼å‡½æ•°](abs.md) - ç»å¯¹å€¼è®¡ç®—- [round() - å››èˆäº”å…¥å‡½æ•°](round.md) - æ•°å€¼èˆå…¥- [pow() - å¹‚è¿ç®—å‡½æ•°](pow.md) - å¹‚è¿ç®—### ç›¸å…³æ¨¡å—- [mathæ¨¡å—](../stdlib/math.md) - æ•°å­¦å‡½æ•°- [statisticsæ¨¡å—](../stdlib/statistics.md) - ç»Ÿè®¡å‡½æ•°- [decimalæ¨¡å—](../stdlib/decimal.md) - ç²¾ç¡®å°æ•°- [fractionsæ¨¡å—](../stdlib/fractions.md) - åˆ†æ•°è¿ç®—- [numpyæ¨¡å—](../third-party/numpy.md) - æ•°å€¼è®¡ç®—### ç›¸å…³æ¦‚å¿µ- [ç®—æœ¯è¿ç®—ç¬¦](../basics/arithmetic-operators.md) - æ•°å­¦è¿ç®—- [ç”Ÿæˆå™¨è¡¨è¾¾å¼](../advanced/generator-expressions.md) - å†…å­˜ä¼˜åŒ–- [åˆ—è¡¨æ¨å¯¼å¼](../basics/list-comprehensions.md) - æ•°æ®å¤„ç†- [æµ®ç‚¹æ•°ç²¾åº¦](../advanced/floating-point-precision.md) - ç²¾åº¦é—®é¢˜## ğŸ“š æ‰©å±•é˜…è¯»- [Pythonå®˜æ–¹æ–‡æ¡£ - sum()](https://docs.python.org/3/library/functions.html#sum)- [æµ®ç‚¹æ•°ç®—æœ¯](https://docs.python.org/3/tutorial/floatingpoint.html)- [æ•°å€¼ç±»å‹](https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex)- [decimalæ¨¡å—æ–‡æ¡£](https://docs.python.org/3/library/decimal.html)## ğŸ·ï¸ æ ‡ç­¾`æ•°å­¦è¿ç®—` `åºåˆ—æ“ä½œ` `èšåˆ` `ç»Ÿè®¡` `æ•°å€¼è®¡ç®—`---**æœ€åæ›´æ–°**: 2024-01-15  **ä½œè€…**: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ  **ç‰ˆæœ¬**: 1.0",
        "url": "/docs/builtins/sum/",
        "category": "builtins",
        "tags": ["æ•°å­¦è¿ç®—","åºåˆ—æ“ä½œ","èšåˆ"]
      }
      
    
  
    
      ,
      {
        "title": "timeæ¨¡å—",
        "content": "# timeæ¨¡å—## ğŸ“ æ¦‚è¿°timeæ¨¡å—æ˜¯Pythonæ ‡å‡†åº“ä¸­å¤„ç†æ—¶é—´çš„åŸºç¡€æ¨¡å—ï¼Œæä¾›äº†ä¸æ—¶é—´ç›¸å…³çš„å„ç§å‡½æ•°ã€‚å®ƒä¸»è¦ç”¨äºè·å–å½“å‰æ—¶é—´ã€æ—¶é—´æ ¼å¼åŒ–ã€ç¨‹åºå»¶æ—¶ç­‰æ“ä½œã€‚timeæ¨¡å—åŸºäºUnixæ—¶é—´æˆ³ï¼ˆä»1970å¹´1æœˆ1æ—¥00:00:00 UTCå¼€å§‹çš„ç§’æ•°ï¼‰è¿›è¡Œæ—¶é—´è®¡ç®—ã€‚## ğŸ¯ å­¦ä¹ ç›®æ ‡- æŒæ¡timeæ¨¡å—çš„åŸºæœ¬æ—¶é—´è·å–å‡½æ•°- å­¦ä¼šæ—¶é—´æ ¼å¼åŒ–å’Œè§£æ- äº†è§£ç¨‹åºå»¶æ—¶å’Œæ€§èƒ½æµ‹é‡- ç†è§£æ—¶é—´æˆ³å’Œç»“æ„åŒ–æ—¶é—´çš„è½¬æ¢- æŒæ¡æ—¶åŒºç›¸å…³çš„æ—¶é—´å¤„ç†## ğŸ“‹ å‰ç½®çŸ¥è¯†- PythonåŸºæœ¬è¯­æ³•- äº†è§£Unixæ—¶é—´æˆ³æ¦‚å¿µ- åŸºæœ¬çš„æ—¥æœŸæ—¶é—´æ¦‚å¿µ## ğŸ” è¯¦ç»†å†…å®¹### æ—¶é—´è·å–å‡½æ•°#### è·å–å½“å‰æ—¶é—´æˆ³```pythonimport time# è·å–å½“å‰æ—¶é—´æˆ³ï¼ˆæµ®ç‚¹æ•°ï¼ŒåŒ…å«å¾®ç§’ï¼‰current_timestamp = time.time()print(f\"å½“å‰æ—¶é—´æˆ³: {current_timestamp}\")# è¾“å‡º: å½“å‰æ—¶é—´æˆ³: 1704067200.123456# è·å–å•è°ƒæ—¶é’Ÿæ—¶é—´ï¼ˆç”¨äºæµ‹é‡æ—¶é—´é—´éš”ï¼‰monotonic_time = time.monotonic()print(f\"å•è°ƒæ—¶é’Ÿæ—¶é—´: {monotonic_time}\")# è·å–æ€§èƒ½è®¡æ•°å™¨ï¼ˆæœ€é«˜ç²¾åº¦ï¼‰perf_time = time.perf_counter()print(f\"æ€§èƒ½è®¡æ•°å™¨: {perf_time}\")```#### è·å–ç»“æ„åŒ–æ—¶é—´```python# è·å–å½“å‰æœ¬åœ°æ—¶é—´çš„ç»“æ„åŒ–æ—¶é—´local_time = time.localtime()print(f\"æœ¬åœ°æ—¶é—´: {local_time}\")# è¾“å‡º: time.struct_time(tm_year=2024, tm_mon=1, tm_mday=1, ...)# è·å–UTCæ—¶é—´çš„ç»“æ„åŒ–æ—¶é—´utc_time = time.gmtime()print(f\"UTCæ—¶é—´: {utc_time}\")# ä»æ—¶é—´æˆ³è½¬æ¢ä¸ºç»“æ„åŒ–æ—¶é—´timestamp = 1704067200struct_time = time.localtime(timestamp)print(f\"æŒ‡å®šæ—¶é—´æˆ³çš„æœ¬åœ°æ—¶é—´: {struct_time}\")```### æ—¶é—´æ ¼å¼åŒ–#### strftime - æ ¼å¼åŒ–æ—¶é—´```python# å°†ç»“æ„åŒ–æ—¶é—´æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²current_time = time.localtime()# å¸¸ç”¨æ ¼å¼åŒ–formatted_time = time.strftime(\"%Y-%m-%d %H:%M:%S\", current_time)print(f\"æ ‡å‡†æ ¼å¼: {formatted_time}\")# è¾“å‡º: æ ‡å‡†æ ¼å¼: 2024-01-01 12:00:00# ä¸­æ–‡æ ¼å¼åŒ–chinese_format = time.strftime(\"%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%Måˆ†%Sç§’\", current_time)print(f\"ä¸­æ–‡æ ¼å¼: {chinese_format}\")# å…¶ä»–å¸¸ç”¨æ ¼å¼formats = {    \"ISOæ ¼å¼\": \"%Y-%m-%dT%H:%M:%S\",    \"ç¾å¼æ ¼å¼\": \"%m/%d/%Y %I:%M:%S %p\",    \"æ¬§å¼æ ¼å¼\": \"%d/%m/%Y %H:%M:%S\",    \"ç®€çŸ­æ ¼å¼\": \"%y%m%d_%H%M%S\"}for name, fmt in formats.items():    result = time.strftime(fmt, current_time)    print(f\"{name}: {result}\")```#### strptime - è§£ææ—¶é—´å­—ç¬¦ä¸²```python# å°†æ—¶é—´å­—ç¬¦ä¸²è§£æä¸ºç»“æ„åŒ–æ—¶é—´time_string = \"2024-01-01 12:30:45\"parsed_time = time.strptime(time_string, \"%Y-%m-%d %H:%M:%S\")print(f\"è§£æç»“æœ: {parsed_time}\")# è§£æä¸åŒæ ¼å¼çš„æ—¶é—´å­—ç¬¦ä¸²time_formats = [    (\"2024/01/01 12:30:45\", \"%Y/%m/%d %H:%M:%S\"),    (\"01-Jan-2024 12:30\", \"%d-%b-%Y %H:%M\"),    (\"240101_123045\", \"%y%m%d_%H%M%S\")]for time_str, fmt in time_formats:    try:        parsed = time.strptime(time_str, fmt)        print(f\"'{time_str}' è§£æä¸º: {parsed.tm_year}-{parsed.tm_mon:02d}-{parsed.tm_mday:02d}\")    except ValueError as e:        print(f\"è§£æå¤±è´¥: {e}\")```### æ—¶é—´è½¬æ¢```python# ç»“æ„åŒ–æ—¶é—´è½¬æ¢ä¸ºæ—¶é—´æˆ³struct_time = time.localtime()timestamp = time.mktime(struct_time)print(f\"ç»“æ„åŒ–æ—¶é—´è½¬æ—¶é—´æˆ³: {timestamp}\")# æ—¶é—´æˆ³è½¬æ¢ä¸ºå¯è¯»å­—ç¬¦ä¸²timestamp = time.time()readable_time = time.ctime(timestamp)print(f\"æ—¶é—´æˆ³è½¬å¯è¯»æ ¼å¼: {readable_time}\")# è¾“å‡º: Mon Jan  1 12:00:00 2024# ç›´æ¥è·å–å½“å‰æ—¶é—´çš„å¯è¯»æ ¼å¼current_readable = time.ctime()print(f\"å½“å‰æ—¶é—´: {current_readable}\")```### ç¨‹åºå»¶æ—¶```python# ç¨‹åºæš‚åœæŒ‡å®šç§’æ•°print(\"å¼€å§‹å»¶æ—¶...\")time.sleep(2)  # æš‚åœ2ç§’print(\"å»¶æ—¶ç»“æŸ\")# ç²¾ç¡®å»¶æ—¶ç¤ºä¾‹start_time = time.perf_counter()time.sleep(1.5)end_time = time.perf_counter()actual_delay = end_time - start_timeprint(f\"é¢„æœŸå»¶æ—¶: 1.5ç§’, å®é™…å»¶æ—¶: {actual_delay:.3f}ç§’\")# å¾ªç¯ä¸­çš„å»¶æ—¶for i in range(3):    print(f\"ç¬¬{i+1}æ¬¡æ‰§è¡Œ\")    time.sleep(0.5)  # æ¯æ¬¡é—´éš”0.5ç§’```### æ ¼å¼åŒ–ä»£ç è¡¨| ä»£ç  | å«ä¹‰ | ç¤ºä¾‹ ||------|------|------|| %Y | å››ä½å¹´ä»½ | 2024 || %y | ä¸¤ä½å¹´ä»½ | 24 || %m | æœˆä»½(01-12) | 01 || %B | æœˆä»½å…¨å | January || %b | æœˆä»½ç®€ç§° | Jan || %d | æ—¥æœŸ(01-31) | 01 || %H | å°æ—¶(00-23) | 12 || %I | å°æ—¶(01-12) | 12 || %M | åˆ†é’Ÿ(00-59) | 30 || %S | ç§’(00-59) | 45 || %p | AM/PM | PM || %A | æ˜ŸæœŸå…¨å | Monday || %a | æ˜ŸæœŸç®€ç§° | Mon || %w | æ˜ŸæœŸæ•°å­—(0-6) | 1 || %j | å¹´ä¸­ç¬¬å‡ å¤© | 001 || %U | å¹´ä¸­ç¬¬å‡ å‘¨ | 01 || %Z | æ—¶åŒºåç§° | CST |## ğŸ’¡ å®é™…åº”ç”¨### åŸºç¡€ç”¨æ³•```pythondef get_current_time_info():    \"\"\"è·å–å½“å‰æ—¶é—´çš„è¯¦ç»†ä¿¡æ¯\"\"\"    current = time.time()    local_time = time.localtime(current)        info = {        'æ—¶é—´æˆ³': current,        'æ ‡å‡†æ ¼å¼': time.strftime('%Y-%m-%d %H:%M:%S', local_time),        'ä¸­æ–‡æ ¼å¼': time.strftime('%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%Måˆ†%Sç§’', local_time),        'æ˜ŸæœŸ': time.strftime('%A', local_time),        'å¹´ä¸­ç¬¬å‡ å¤©': local_time.tm_yday,        'æ˜¯å¦å¤ä»¤æ—¶': 'æ˜¯' if local_time.tm_isdst else 'å¦'    }        return info# ä½¿ç”¨ç¤ºä¾‹time_info = get_current_time_info()for key, value in time_info.items():    print(f\"{key}: {value}\")```### é«˜çº§ç”¨æ³•```pythonclass TimeTracker:    \"\"\"æ—¶é—´è¿½è¸ªå™¨ç±»\"\"\"        def __init__(self):        self.start_times = {}        self.records = []        def start_timer(self, name):        \"\"\"å¼€å§‹è®¡æ—¶\"\"\"        self.start_times[name] = time.perf_counter()        print(f\"å¼€å§‹è®¡æ—¶: {name}\")        def stop_timer(self, name):        \"\"\"åœæ­¢è®¡æ—¶\"\"\"        if name not in self.start_times:            print(f\"é”™è¯¯: æ²¡æœ‰æ‰¾åˆ°åä¸º'{name}'çš„è®¡æ—¶å™¨\")            return None                elapsed = time.perf_counter() - self.start_times[name]        record = {            'name': name,            'duration': elapsed,            'timestamp': time.time(),            'formatted_time': time.strftime('%Y-%m-%d %H:%M:%S')        }                self.records.append(record)        del self.start_times[name]                print(f\"è®¡æ—¶ç»“æŸ: {name}, è€—æ—¶: {elapsed:.3f}ç§’\")        return elapsed        def get_summary(self):        \"\"\"è·å–è®¡æ—¶æ‘˜è¦\"\"\"        if not self.records:            return \"æš‚æ— è®¡æ—¶è®°å½•\"                total_time = sum(record['duration'] for record in self.records)        avg_time = total_time / len(self.records)                summary = f\"æ€»è®¡æ—¶è®°å½•: {len(self.records)}ä¸ª\\n\"        summary += f\"æ€»è€—æ—¶: {total_time:.3f}ç§’\\n\"        summary += f\"å¹³å‡è€—æ—¶: {avg_time:.3f}ç§’\\n\\n\"        summary += \"è¯¦ç»†è®°å½•:\\n\"                for record in self.records:            summary += f\"- {record['name']}: {record['duration']:.3f}ç§’ ({record['formatted_time']})\\n\"                return summary# ä½¿ç”¨ç¤ºä¾‹tracker = TimeTracker()tracker.start_timer(\"æ•°æ®å¤„ç†\")time.sleep(1.2)  # æ¨¡æ‹Ÿæ•°æ®å¤„ç†tracker.stop_timer(\"æ•°æ®å¤„ç†\")tracker.start_timer(\"æ–‡ä»¶æ“ä½œ\")time.sleep(0.8)  # æ¨¡æ‹Ÿæ–‡ä»¶æ“ä½œtracker.stop_timer(\"æ–‡ä»¶æ“ä½œ\")print(\"\\n\" + tracker.get_summary())```### å®é™…æ¡ˆä¾‹```pythonimport timeimport osclass LogManager:    \"\"\"æ—¥å¿—ç®¡ç†å™¨\"\"\"        def __init__(self, log_file=\"app.log\"):        self.log_file = log_file        def log(self, level, message):        \"\"\"è®°å½•æ—¥å¿—\"\"\"        timestamp = time.time()        formatted_time = time.strftime('%Y-%m-%d %H:%M:%S', time.localtime(timestamp))                log_entry = f\"[{formatted_time}] [{level}] {message}\\n\"                with open(self.log_file, 'a', encoding='utf-8') as f:            f.write(log_entry)                print(log_entry.strip())        def info(self, message):        \"\"\"è®°å½•ä¿¡æ¯æ—¥å¿—\"\"\"        self.log(\"INFO\", message)        def warning(self, message):        \"\"\"è®°å½•è­¦å‘Šæ—¥å¿—\"\"\"        self.log(\"WARNING\", message)        def error(self, message):        \"\"\"è®°å½•é”™è¯¯æ—¥å¿—\"\"\"        self.log(\"ERROR\", message)        def get_log_stats(self):        \"\"\"è·å–æ—¥å¿—ç»Ÿè®¡ä¿¡æ¯\"\"\"        if not os.path.exists(self.log_file):            return \"æ—¥å¿—æ–‡ä»¶ä¸å­˜åœ¨\"                with open(self.log_file, 'r', encoding='utf-8') as f:            lines = f.readlines()                stats = {            'total_lines': len(lines),            'info_count': sum(1 for line in lines if '[INFO]' in line),            'warning_count': sum(1 for line in lines if '[WARNING]' in line),            'error_count': sum(1 for line in lines if '[ERROR]' in line)        }                if lines:            # è§£æç¬¬ä¸€æ¡å’Œæœ€åä¸€æ¡æ—¥å¿—çš„æ—¶é—´            first_line = lines[0]            last_line = lines[-1]                        try:                first_time_str = first_line.split('] [')[0][1:]                last_time_str = last_line.split('] [')[0][1:]                                first_time = time.strptime(first_time_str, '%Y-%m-%d %H:%M:%S')                last_time = time.strptime(last_time_str, '%Y-%m-%d %H:%M:%S')                                first_timestamp = time.mktime(first_time)                last_timestamp = time.mktime(last_time)                                duration = last_timestamp - first_timestamp                stats['duration_seconds'] = duration                stats['first_log_time'] = first_time_str                stats['last_log_time'] = last_time_str            except:                stats['duration_seconds'] = 0                return stats# ä½¿ç”¨ç¤ºä¾‹logger = LogManager(\"demo.log\")logger.info(\"åº”ç”¨ç¨‹åºå¯åŠ¨\")time.sleep(0.1)logger.warning(\"é…ç½®æ–‡ä»¶ç¼ºå°‘æŸäº›å‚æ•°\")time.sleep(0.1)logger.error(\"æ•°æ®åº“è¿æ¥å¤±è´¥\")time.sleep(0.1)logger.info(\"åº”ç”¨ç¨‹åºå…³é—­\")# è·å–ç»Ÿè®¡ä¿¡æ¯stats = logger.get_log_stats()print(\"\\næ—¥å¿—ç»Ÿè®¡:\")for key, value in stats.items():    print(f\"{key}: {value}\")```## âš ï¸ æ³¨æ„äº‹é¡¹- **æ—¶åŒºé—®é¢˜**: `time.localtime()`è¿”å›æœ¬åœ°æ—¶é—´ï¼Œ`time.gmtime()`è¿”å›UTCæ—¶é—´- **ç²¾åº¦é™åˆ¶**: `time.time()`çš„ç²¾åº¦å–å†³äºç³»ç»Ÿï¼Œé€šå¸¸ä¸ºå¾®ç§’çº§- **æ€§èƒ½æµ‹é‡**: ä½¿ç”¨`time.perf_counter()`è€Œä¸æ˜¯`time.time()`è¿›è¡Œæ€§èƒ½æµ‹é‡- **çº¿ç¨‹å®‰å…¨**: timeæ¨¡å—çš„å¤§éƒ¨åˆ†å‡½æ•°éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„- **å¹³å°å·®å¼‚**: æŸäº›å‡½æ•°åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸Šå¯èƒ½æœ‰ç»†å¾®å·®åˆ«- **å¤ä»¤æ—¶**: åœ¨å¤„ç†æœ¬åœ°æ—¶é—´æ—¶è¦æ³¨æ„å¤ä»¤æ—¶çš„å½±å“## ğŸ”— ç›¸å…³å†…å®¹- [datetimeæ¨¡å—](datetime/) - æ›´é«˜çº§çš„æ—¥æœŸæ—¶é—´å¤„ç†- [calendaræ¨¡å—](calendar/) - æ—¥å†ç›¸å…³åŠŸèƒ½- [å†…ç½®å‡½æ•°](../builtins/) - äº†è§£ç›¸å…³çš„å†…ç½®å‡½æ•°## ğŸ“š æ‰©å±•é˜…è¯»- [Python timeæ¨¡å—å®˜æ–¹æ–‡æ¡£](https://docs.python.org/3/library/time.html)- [Unixæ—¶é—´æˆ³è¯¦è§£](https://en.wikipedia.org/wiki/Unix_time)- [æ—¶åŒºå’Œå¤ä»¤æ—¶å¤„ç†](https://docs.python.org/3/library/datetime.html#timezone-objects)## ğŸ·ï¸ æ ‡ç­¾`æ—¶é—´` `æ—¶é—´æˆ³` `æ ¼å¼åŒ–` `å»¶æ—¶` `æ€§èƒ½æµ‹é‡` `æ ‡å‡†åº“`---**æœ€åæ›´æ–°**: 2024-01-01  **ä½œè€…**: Pythonæ–‡æ¡£å›¢é˜Ÿ  **ç‰ˆæœ¬**: 1.0",
        "url": "/docs/stdlib/time/",
        "category": "stdlib",
        "tags": ["æ—¶é—´","æ—¶é—´æˆ³","æ ¼å¼åŒ–","æ ‡å‡†åº“"]
      }
      
    
  
    
      ,
      {
        "title": "tuple() - å…ƒç»„æ„é€ å‡½æ•°",
        "content": "# tuple() - å…ƒç»„æ„é€ å‡½æ•°## ğŸ“ æ¦‚è¿°`tuple()` æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå…ƒç»„å¯¹è±¡æˆ–å°†å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºå…ƒç»„ã€‚å…ƒç»„æ˜¯Pythonä¸­çš„ä¸å¯å˜åºåˆ—ç±»å‹ï¼Œå…·æœ‰æœ‰åºã€ä¸å¯å˜ã€å…è®¸é‡å¤å…ƒç´ çš„ç‰¹æ€§ï¼Œå¸¸ç”¨äºå­˜å‚¨ä¸éœ€è¦ä¿®æ”¹çš„æ•°æ®é›†åˆã€‚## ğŸ¯ å­¦ä¹ ç›®æ ‡- æŒæ¡tuple()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•- ç†è§£å…ƒç»„çš„ç‰¹æ€§å’Œåº”ç”¨åœºæ™¯- å­¦ä¼šä¸åŒç±»å‹åˆ°å…ƒç»„çš„è½¬æ¢- äº†è§£å…ƒç»„çš„æ€§èƒ½ä¼˜åŠ¿## ğŸ“‹ å‰ç½®çŸ¥è¯†- PythonåŸºæœ¬æ•°æ®ç±»å‹- å¯è¿­ä»£å¯¹è±¡æ¦‚å¿µ- åºåˆ—ç±»å‹åŸºç¡€- ä¸å¯å˜å¯¹è±¡æ¦‚å¿µ## ğŸ” è¯¦ç»†å†…å®¹### åŸºæœ¬æ¦‚å¿µå…ƒç»„ï¼ˆtupleï¼‰æ˜¯Pythonä¸­çš„ä¸å¯å˜åºåˆ—ç±»å‹ï¼Œä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½ä¿®æ”¹å…¶å†…å®¹ã€‚`tuple()` å‡½æ•°å¯ä»¥åˆ›å»ºç©ºå…ƒç»„æˆ–å°†å…¶ä»–å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºå…ƒç»„ï¼Œåœ¨éœ€è¦ä¸å¯å˜æ•°æ®ç»“æ„çš„åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚### è¯­æ³•æ ¼å¼```python# åˆ›å»ºç©ºå…ƒç»„tuple()# ä»å¯è¿­ä»£å¯¹è±¡åˆ›å»ºå…ƒç»„tuple(iterable)```### å‚æ•°è¯´æ˜| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ ||--------|------|------|--------|---------|| iterable | iterable | å¦ | æ—  | å¯è¿­ä»£å¯¹è±¡ï¼ˆå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€é›†åˆç­‰ï¼‰ |### è¿”å›å€¼- **ç±»å‹**: tuple- **è¯´æ˜**: æ–°åˆ›å»ºçš„å…ƒç»„å¯¹è±¡## ğŸ’¡ å®é™…åº”ç”¨### åŸºç¡€ç”¨æ³•```python# åˆ›å»ºç©ºå…ƒç»„empty_tuple = tuple()print(f\"ç©ºå…ƒç»„: {empty_tuple}\")  # è¾“å‡º: ç©ºå…ƒç»„: ()print(f\"ç±»å‹: {type(empty_tuple)}\")  # è¾“å‡º: ç±»å‹: print(f\"é•¿åº¦: {len(empty_tuple)}\")  # è¾“å‡º: é•¿åº¦: 0# ç­‰ä»·çš„åˆ›å»ºæ–¹å¼empty_tuple2 = ()print(f\"å­—é¢é‡åˆ›å»º: {empty_tuple2}\")  # è¾“å‡º: å­—é¢é‡åˆ›å»º: ()# ä»åˆ—è¡¨åˆ›å»ºå…ƒç»„list_data = [1, 2, 3, 4, 5]list_to_tuple = tuple(list_data)print(f\"åˆ—è¡¨è½¬å…ƒç»„: {list_to_tuple}\")  # è¾“å‡º: åˆ—è¡¨è½¬å…ƒç»„: (1, 2, 3, 4, 5)# ä»å­—ç¬¦ä¸²åˆ›å»ºå…ƒç»„string_to_tuple = tuple(\"hello\")print(f\"å­—ç¬¦ä¸²è½¬å…ƒç»„: {string_to_tuple}\")  # è¾“å‡º: å­—ç¬¦ä¸²è½¬å…ƒç»„: ('h', 'e', 'l', 'l', 'o')# ä»é›†åˆåˆ›å»ºå…ƒç»„set_data = {3, 1, 4, 1, 5, 9, 2, 6}set_to_tuple = tuple(set_data)print(f\"é›†åˆè½¬å…ƒç»„: {set_to_tuple}\")  # è¾“å‡º: é›†åˆè½¬å…ƒç»„: (1, 2, 3, 4, 5, 6, 9) (é¡ºåºå¯èƒ½ä¸åŒ)# ä»rangeå¯¹è±¡åˆ›å»ºå…ƒç»„range_to_tuple = tuple(range(5))print(f\"rangeè½¬å…ƒç»„: {range_to_tuple}\")  # è¾“å‡º: rangeè½¬å…ƒç»„: (0, 1, 2, 3, 4)# ä»å­—å…¸åˆ›å»ºå…ƒç»„ï¼ˆé»˜è®¤æ˜¯é”®ï¼‰dict_data = {'a': 1, 'b': 2, 'c': 3}dict_keys_to_tuple = tuple(dict_data)print(f\"å­—å…¸é”®è½¬å…ƒç»„: {dict_keys_to_tuple}\")  # è¾“å‡º: å­—å…¸é”®è½¬å…ƒç»„: ('a', 'b', 'c')# å­—å…¸å€¼è½¬å…ƒç»„dict_values_to_tuple = tuple(dict_data.values())print(f\"å­—å…¸å€¼è½¬å…ƒç»„: {dict_values_to_tuple}\")  # è¾“å‡º: å­—å…¸å€¼è½¬å…ƒç»„: (1, 2, 3)# å­—å…¸é¡¹è½¬å…ƒç»„dict_items_to_tuple = tuple(dict_data.items())print(f\"å­—å…¸é¡¹è½¬å…ƒç»„: {dict_items_to_tuple}\")  # è¾“å‡º: å­—å…¸é¡¹è½¬å…ƒç»„: (('a', 1), ('b', 2), ('c', 3))# å•å…ƒç´ å…ƒç»„ï¼ˆæ³¨æ„é€—å·ï¼‰single_element = tuple([42])print(f\"å•å…ƒç´ å…ƒç»„: {single_element}\")  # è¾“å‡º: å•å…ƒç´ å…ƒç»„: (42,)# å­—é¢é‡å•å…ƒç´ å…ƒç»„single_literal = (42,)  # æ³¨æ„é€—å·print(f\"å­—é¢é‡å•å…ƒç´ : {single_literal}\")  # è¾“å‡º: å­—é¢é‡å•å…ƒç´ : (42,)# ä¸å¸¦é€—å·ä¸æ˜¯å…ƒç»„not_tuple = (42)  # è¿™åªæ˜¯æ‹¬å·åŒ…å›´çš„æ•´æ•°print(f\"ä¸æ˜¯å…ƒç»„: {not_tuple}, ç±»å‹: {type(not_tuple)}\")  # è¾“å‡º: ä¸æ˜¯å…ƒç»„: 42, ç±»å‹: ```### å…ƒç»„çš„ä¸å¯å˜æ€§```python# å…ƒç»„ä¸å¯å˜æ€§æ¼”ç¤ºoriginal_tuple = (1, 2, 3, 4, 5)print(f\"åŸå§‹å…ƒç»„: {original_tuple}\")# å°è¯•ä¿®æ”¹å…ƒç»„ï¼ˆä¼šæŠ¥é”™ï¼‰try:    original_tuple[0] = 10except TypeError as e:    print(f\"ä¿®æ”¹å…ƒç»„é”™è¯¯: {e}\")# å°è¯•åˆ é™¤å…ƒç»„å…ƒç´ ï¼ˆä¼šæŠ¥é”™ï¼‰try:    del original_tuple[0]except TypeError as e:    print(f\"åˆ é™¤å…ƒç»„å…ƒç´ é”™è¯¯: {e}\")# å°è¯•æ·»åŠ å…ƒç´ ï¼ˆä¼šæŠ¥é”™ï¼‰try:    original_tuple.append(6)except AttributeError as e:    print(f\"æ·»åŠ å…ƒç´ é”™è¯¯: {e}\")# ä½†å¯ä»¥é‡æ–°èµ‹å€¼æ•´ä¸ªå…ƒç»„original_tuple = (10, 20, 30)print(f\"é‡æ–°èµ‹å€¼å: {original_tuple}\")# å…ƒç»„è¿æ¥ï¼ˆåˆ›å»ºæ–°å…ƒç»„ï¼‰tuple1 = (1, 2, 3)tuple2 = (4, 5, 6)combined = tuple1 + tuple2print(f\"å…ƒç»„è¿æ¥: {tuple1} + {tuple2} = {combined}\")# å…ƒç»„é‡å¤repeated = tuple1 * 3print(f\"å…ƒç»„é‡å¤: {tuple1} * 3 = {repeated}\")# åŒ…å«å¯å˜å¯¹è±¡çš„å…ƒç»„mutable_content = ([1, 2], [3, 4])print(f\"åŒ…å«åˆ—è¡¨çš„å…ƒç»„: {mutable_content}\")# å¯ä»¥ä¿®æ”¹å†…éƒ¨çš„å¯å˜å¯¹è±¡mutable_content[0].append(3)print(f\"ä¿®æ”¹å†…éƒ¨åˆ—è¡¨å: {mutable_content}\")# ä½†ä¸èƒ½æ›¿æ¢å…ƒç»„ä¸­çš„å…ƒç´ try:    mutable_content[0] = [10, 20]except TypeError as e:    print(f\"æ›¿æ¢å…ƒç»„å…ƒç´ é”™è¯¯: {e}\")```### å…ƒç»„ä½œä¸ºå­—å…¸é”®```python# å…ƒç»„å¯ä»¥ä½œä¸ºå­—å…¸é”®ï¼ˆå› ä¸ºä¸å¯å˜ï¼‰coordinate_data = {    (0, 0): \"åŸç‚¹\",    (1, 0): \"xè½´ä¸Šçš„ç‚¹\",    (0, 1): \"yè½´ä¸Šçš„ç‚¹\",    (1, 1): \"å¯¹è§’çº¿ä¸Šçš„ç‚¹\"}print(\"åæ ‡å­—å…¸:\")for coord, description in coordinate_data.items():    print(f\"  {coord}: {description}\")# æŸ¥æ‰¾ç‰¹å®šåæ ‡point = (1, 1)if point in coordinate_data:    print(f\"ç‚¹ {point} çš„æè¿°: {coordinate_data[point]}\")# å¤æ‚çš„å…ƒç»„é”®student_grades = {    ('å¼ ä¸‰', 'æ•°å­¦'): 95,    ('å¼ ä¸‰', 'è‹±è¯­'): 87,    ('æå››', 'æ•°å­¦'): 92,    ('æå››', 'è‹±è¯­'): 89,    ('ç‹äº”', 'æ•°å­¦'): 78,    ('ç‹äº”', 'è‹±è¯­'): 94}print(\"\\nå­¦ç”Ÿæˆç»©:\")for (name, subject), grade in student_grades.items():    print(f\"  {name} - {subject}: {grade}åˆ†\")# æŒ‰å­¦ç”ŸæŸ¥è¯¢student_name = 'å¼ ä¸‰'student_scores = {subject: grade for (name, subject), grade in student_grades.items() if name == student_name}print(f\"\\n{student_name}çš„æˆç»©: {student_scores}\")# æŒ‰ç§‘ç›®æŸ¥è¯¢subject_name = 'æ•°å­¦'subject_scores = {name: grade for (name, subject), grade in student_grades.items() if subject == subject_name}print(f\"{subject_name}æˆç»©: {subject_scores}\")# åˆ—è¡¨ä¸èƒ½ä½œä¸ºå­—å…¸é”®ï¼ˆå› ä¸ºå¯å˜ï¼‰try:    invalid_dict = {[1, 2]: \"value\"}except TypeError as e:    print(f\"\\nåˆ—è¡¨ä½œä¸ºé”®çš„é”™è¯¯: {e}\")# ä½†å¯ä»¥å°†åˆ—è¡¨è½¬æ¢ä¸ºå…ƒç»„ä½œä¸ºé”®list_key = [1, 2, 3]tuple_key = tuple(list_key)valid_dict = {tuple_key: \"è¿™æ˜¯æœ‰æ•ˆçš„\"}print(f\"å…ƒç»„é”®å­—å…¸: {valid_dict}\")```### å‡½æ•°è¿”å›å¤šä¸ªå€¼```python# å‡½æ•°è¿”å›å…ƒç»„ï¼ˆå¤šä¸ªå€¼ï¼‰def calculate_stats(numbers):    \"\"\"è®¡ç®—ç»Ÿè®¡ä¿¡æ¯ï¼Œè¿”å›å¤šä¸ªå€¼\"\"\"    if not numbers:        return 0, 0, 0, 0  # è¿”å›å…ƒç»„        total = sum(numbers)    count = len(numbers)    average = total / count    maximum = max(numbers)    minimum = min(numbers)        return total, count, average, maximum, minimum  # è‡ªåŠ¨æ‰“åŒ…ä¸ºå…ƒç»„# ä½¿ç”¨å‡½æ•°test_numbers = [10, 20, 30, 40, 50]result = calculate_stats(test_numbers)print(f\"ç»Ÿè®¡ç»“æœï¼ˆå…ƒç»„ï¼‰: {result}\")print(f\"ç»“æœç±»å‹: {type(result)}\")# å…ƒç»„è§£åŒ…total, count, avg, max_val, min_val = calculate_stats(test_numbers)print(f\"\\nè§£åŒ…ç»“æœ:\")print(f\"  æ€»å’Œ: {total}\")print(f\"  æ•°é‡: {count}\")print(f\"  å¹³å‡å€¼: {avg:.2f}\")print(f\"  æœ€å¤§å€¼: {max_val}\")print(f\"  æœ€å°å€¼: {min_val}\")# éƒ¨åˆ†è§£åŒ…total, count, *rest = calculate_stats(test_numbers)print(f\"\\néƒ¨åˆ†è§£åŒ…:\")print(f\"  æ€»å’Œ: {total}\")print(f\"  æ•°é‡: {count}\")print(f\"  å…¶ä½™: {rest}\")# å¿½ç•¥æŸäº›å€¼total, _, avg, *_ = calculate_stats(test_numbers)print(f\"\\nå¿½ç•¥éƒ¨åˆ†å€¼:\")print(f\"  æ€»å’Œ: {total}\")print(f\"  å¹³å‡å€¼: {avg:.2f}\")# å‘½åå…ƒç»„ï¼ˆæ›´å¥½çš„é€‰æ‹©ï¼‰from collections import namedtupleStats = namedtuple('Stats', ['total', 'count', 'average', 'maximum', 'minimum'])def calculate_named_stats(numbers):    \"\"\"è¿”å›å‘½åå…ƒç»„\"\"\"    if not numbers:        return Stats(0, 0, 0, 0, 0)        total = sum(numbers)    count = len(numbers)    average = total / count    maximum = max(numbers)    minimum = min(numbers)        return Stats(total, count, average, maximum, minimum)# ä½¿ç”¨å‘½åå…ƒç»„named_result = calculate_named_stats(test_numbers)print(f\"\\nå‘½åå…ƒç»„ç»“æœ: {named_result}\")print(f\"  æ€»å’Œ: {named_result.total}\")print(f\"  å¹³å‡å€¼: {named_result.average:.2f}\")print(f\"  æœ€å¤§å€¼: {named_result.maximum}\")```### æ•°æ®ç»“æ„å’Œç®—æ³•åº”ç”¨```python# åæ ‡å’Œå‡ ä½•è®¡ç®—def distance_between_points(point1, point2):    \"\"\"è®¡ç®—ä¸¤ç‚¹é—´è·ç¦»\"\"\"    x1, y1 = point1    x2, y2 = point2    return ((x2 - x1) ** 2 + (y2 - y1) ** 2) ** 0.5# å®šä¹‰ç‚¹points = [    (0, 0),    (3, 4),    (1, 1),    (5, 0),    (2, 3)]print(\"ç‚¹åæ ‡:\")for i, point in enumerate(points):    print(f\"  ç‚¹{i+1}: {point}\")# è®¡ç®—æ‰€æœ‰ç‚¹åˆ°åŸç‚¹çš„è·ç¦»origin = (0, 0)distances = []for point in points:    dist = distance_between_points(origin, point)    distances.append((point, dist))print(\"\\nåˆ°åŸç‚¹çš„è·ç¦»:\")for point, dist in distances:    print(f\"  {point}: {dist:.2f}\")# æ‰¾æœ€è¿‘å’Œæœ€è¿œçš„ç‚¹closest = min(distances, key=lambda x: x[1])farthest = max(distances, key=lambda x: x[1])print(f\"\\næœ€è¿‘ç‚¹: {closest[0]}, è·ç¦»: {closest[1]:.2f}\")print(f\"æœ€è¿œç‚¹: {farthest[0]}, è·ç¦»: {farthest[1]:.2f}\")# å…ƒç»„åœ¨æ’åºä¸­çš„åº”ç”¨students = [    ('Alice', 85, 20),    ('Bob', 92, 19),    ('Charlie', 78, 21),    ('Diana', 96, 20),    ('Eve', 89, 18)]print(\"\\nå­¦ç”Ÿä¿¡æ¯ (å§“å, æˆç»©, å¹´é¾„):\")for student in students:    print(f\"  {student}\")# æŒ‰æˆç»©æ’åºby_score = sorted(students, key=lambda x: x[1], reverse=True)print(\"\\næŒ‰æˆç»©æ’åº:\")for name, score, age in by_score:    print(f\"  {name}: {score}åˆ†, {age}å²\")# æŒ‰å¹´é¾„æ’åºby_age = sorted(students, key=lambda x: x[2])print(\"\\næŒ‰å¹´é¾„æ’åº:\")for name, score, age in by_age:    print(f\"  {name}: {score}åˆ†, {age}å²\")# å¤šæ¡ä»¶æ’åºï¼šå…ˆæŒ‰æˆç»©é™åºï¼Œå†æŒ‰å¹´é¾„å‡åºmulti_sort = sorted(students, key=lambda x: (-x[1], x[2]))print(\"\\nå¤šæ¡ä»¶æ’åºï¼ˆæˆç»©é™åºï¼Œå¹´é¾„å‡åºï¼‰:\")for name, score, age in multi_sort:    print(f\"  {name}: {score}åˆ†, {age}å²\")```### é…ç½®å’Œå¸¸é‡å®šä¹‰```python# ä½¿ç”¨å…ƒç»„å®šä¹‰é…ç½®å¸¸é‡COLORS = (    (255, 0, 0),    # çº¢è‰²    (0, 255, 0),    # ç»¿è‰²    (0, 0, 255),    # è“è‰²    (255, 255, 0),  # é»„è‰²    (255, 0, 255),  # ç´«è‰²    (0, 255, 255),  # é’è‰²)COLOR_NAMES = (    'çº¢è‰²', 'ç»¿è‰²', 'è“è‰²',     'é»„è‰²', 'ç´«è‰²', 'é’è‰²')print(\"é¢œè‰²é…ç½®:\")for i, (color, name) in enumerate(zip(COLORS, COLOR_NAMES)):    print(f\"  {name}: RGB{color}\")# æ•°æ®åº“è¿æ¥é…ç½®DATABASE_CONFIGS = (    ('localhost', 5432, 'mydb', 'user1', 'pass1'),    ('192.168.1.100', 5432, 'testdb', 'user2', 'pass2'),    ('prod.example.com', 5432, 'proddb', 'user3', 'pass3'),)print(\"\\næ•°æ®åº“é…ç½®:\")for i, (host, port, db, user, password) in enumerate(DATABASE_CONFIGS):    print(f\"  é…ç½®{i+1}: {host}:{port}/{db} (ç”¨æˆ·: {user})\")# æ¸¸æˆä¸­çš„æ–¹å‘å®šä¹‰DIRECTIONS = (    (0, 1),   # ä¸Š    (1, 0),   # å³    (0, -1),  # ä¸‹    (-1, 0),  # å·¦)DIRECTION_NAMES = ('ä¸Š', 'å³', 'ä¸‹', 'å·¦')def move_player(position, direction_index):    \"\"\"ç§»åŠ¨ç©å®¶ä½ç½®\"\"\"    x, y = position    dx, dy = DIRECTIONS[direction_index]    return (x + dx, y + dy)# æµ‹è¯•ç©å®¶ç§»åŠ¨player_pos = (5, 5)print(f\"\\nç©å®¶åˆå§‹ä½ç½®: {player_pos}\")for i, direction_name in enumerate(DIRECTION_NAMES):    new_pos = move_player(player_pos, i)    print(f\"  å‘{direction_name}ç§»åŠ¨: {new_pos}\")# HTTPçŠ¶æ€ç å®šä¹‰HTTP_STATUS = (    (200, 'OK'),    (201, 'Created'),    (400, 'Bad Request'),    (401, 'Unauthorized'),    (404, 'Not Found'),    (500, 'Internal Server Error'),)print(\"\\nHTTPçŠ¶æ€ç :\")for code, message in HTTP_STATUS:    print(f\"  {code}: {message}\")# åˆ›å»ºçŠ¶æ€ç å­—å…¸status_dict = dict(HTTP_STATUS)print(f\"\\nçŠ¶æ€ç 404çš„å«ä¹‰: {status_dict[404]}\")```### å®é™…æ¡ˆä¾‹ï¼šæ•°æ®åˆ†æ```pythondef analyze_sales_by_region(sales_data):    \"\"\"æŒ‰åœ°åŒºåˆ†æé”€å”®æ•°æ®\"\"\"    # ä½¿ç”¨å…ƒç»„å­˜å‚¨åœ°åŒºä¿¡æ¯ (åœ°åŒºå, é”€å”®é¢, é”€å”®é‡)    region_stats = []        # æŒ‰åœ°åŒºåˆ†ç»„    regions = {}    for record in sales_data:        region = record['region']        if region not in regions:            regions[region] = []        regions[region].append(record)        # è®¡ç®—æ¯ä¸ªåœ°åŒºçš„ç»Ÿè®¡ä¿¡æ¯    for region, records in regions.items():        total_amount = sum(r['amount'] for r in records)        total_quantity = sum(r['quantity'] for r in records)        avg_price = total_amount / total_quantity if total_quantity > 0 else 0                # å­˜å‚¨ä¸ºå…ƒç»„        region_stat = (region, total_amount, total_quantity, avg_price, len(records))        region_stats.append(region_stat)        # æŒ‰é”€å”®é¢æ’åº    region_stats.sort(key=lambda x: x[1], reverse=True)        return tuple(region_stats)  # è¿”å›å…ƒç»„ï¼Œè¡¨ç¤ºä¸å¯å˜çš„ç»“æœ# æµ‹è¯•é”€å”®æ•°æ®sales_records = [    {'region': 'åŒ—äº¬', 'amount': 10000, 'quantity': 100, 'product': 'A'},    {'region': 'ä¸Šæµ·', 'amount': 15000, 'quantity': 120, 'product': 'B'},    {'region': 'å¹¿å·', 'amount': 8000, 'quantity': 80, 'product': 'A'},    {'region': 'åŒ—äº¬', 'amount': 12000, 'quantity': 90, 'product': 'C'},    {'region': 'ä¸Šæµ·', 'amount': 9000, 'quantity': 75, 'product': 'A'},    {'region': 'æ·±åœ³', 'amount': 11000, 'quantity': 95, 'product': 'B'},    {'region': 'å¹¿å·', 'amount': 7000, 'quantity': 70, 'product': 'C'},]analysis_result = analyze_sales_by_region(sales_records)print(\"åœ°åŒºé”€å”®åˆ†æç»“æœ:\")print(f\"{'åœ°åŒº': {result}\")        else:            print(f\"ä»ç¼“å­˜è·å–: {key} -> {cache[key]}\")                return cache[key]        wrapper.cache = cache    return wrapper@memoize_with_tuple_keydef expensive_calculation(x, y, operation='add'):    \"\"\"æ¨¡æ‹Ÿè€—æ—¶è®¡ç®—\"\"\"    import time    time.sleep(0.1)  # æ¨¡æ‹Ÿè®¡ç®—æ—¶é—´        if operation == 'add':        return x + y    elif operation == 'multiply':        return x * y    elif operation == 'power':        return x ** y    else:        return 0# æµ‹è¯•ç¼“å­˜print(\"æµ‹è¯•è®°å¿†åŒ–ç¼“å­˜:\")result1 = expensive_calculation(2, 3, operation='add')result2 = expensive_calculation(2, 3, operation='add')  # åº”è¯¥ä»ç¼“å­˜è·å–result3 = expensive_calculation(2, 3, operation='multiply')result4 = expensive_calculation(2, 3, operation='multiply')  # åº”è¯¥ä»ç¼“å­˜è·å–print(f\"\\nç¼“å­˜å†…å®¹:\")for key, value in expensive_calculation.cache.items():    print(f\"  {key} -> {value}\")# æ–æ³¢é‚£å¥‘æ•°åˆ—ç¼“å­˜fib_cache = {}def fibonacci_with_cache(n):    \"\"\"å¸¦ç¼“å­˜çš„æ–æ³¢é‚£å¥‘æ•°åˆ—\"\"\"    key = (n,)  # ä½¿ç”¨å…ƒç»„ä½œä¸ºé”®        if key in fib_cache:        return fib_cache[key]        if n  0:    print(f\"  å…ƒç»„å¿« {list_access_time/tuple_access_time:.2f} å€\")```### å…ƒç»„çš„é™·é˜±```python# å•å…ƒç´ å…ƒç»„çš„é™·é˜±print(\"å•å…ƒç´ å…ƒç»„é™·é˜±:\")not_tuple = (42)  # è¿™ä¸æ˜¯å…ƒç»„ï¼real_tuple = (42,)  # è¿™æ‰æ˜¯å…ƒç»„print(f\"(42) çš„ç±»å‹: {type(not_tuple)}\")print(f\"(42,) çš„ç±»å‹: {type(real_tuple)}\")# å‡½æ•°å‚æ•°ä¸­çš„é™·é˜±def print_coordinates(point):    \"\"\"æ‰“å°åæ ‡ç‚¹\"\"\"    x, y = point  # æœŸæœ›pointæ˜¯åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„    print(f\"åæ ‡: ({x}, {y})\")# æ­£ç¡®ç”¨æ³•print_coordinates((3, 4))# é”™è¯¯ç”¨æ³•try:    print_coordinates(3, 4)  # ä¼ é€’äº†ä¸¤ä¸ªå‚æ•°è€Œä¸æ˜¯ä¸€ä¸ªå…ƒç»„except TypeError as e:    print(f\"å‚æ•°é”™è¯¯: {e}\")# å…ƒç»„è§£åŒ…çš„é™·é˜±data = (1, 2, 3, 4, 5)# æ­£ç¡®è§£åŒ…a, b, c, d, e = dataprint(f\"å®Œå…¨è§£åŒ…: a={a}, b={b}, c={c}, d={d}, e={e}\")# éƒ¨åˆ†è§£åŒ…first, *middle, last = dataprint(f\"éƒ¨åˆ†è§£åŒ…: first={first}, middle={middle}, last={last}\")# è§£åŒ…æ•°é‡ä¸åŒ¹é…try:    x, y = data  # è¯•å›¾å°†5ä¸ªå…ƒç´ è§£åŒ…ä¸º2ä¸ªå˜é‡except ValueError as e:    print(f\"è§£åŒ…é”™è¯¯: {e}\")# åµŒå¥—å…ƒç»„çš„ä¿®æ”¹é™·é˜±nested_tuple = ([1, 2], [3, 4])print(f\"åµŒå¥—å…ƒç»„: {nested_tuple}\")# å¯ä»¥ä¿®æ”¹å†…éƒ¨çš„å¯å˜å¯¹è±¡nested_tuple[0].append(3)print(f\"ä¿®æ”¹å†…éƒ¨åˆ—è¡¨å: {nested_tuple}\")# ä½†ä¸èƒ½æ›¿æ¢å…ƒç»„ä¸­çš„å…ƒç´ try:    nested_tuple[0] = [10, 20]except TypeError as e:    print(f\"æ›¿æ¢å…ƒç´ é”™è¯¯: {e}\")```### ç±»å‹è½¬æ¢æ³¨æ„äº‹é¡¹```python# å­—ç¬¦ä¸²è½¬å…ƒç»„string_data = \"hello\"char_tuple = tuple(string_data)print(f\"å­—ç¬¦ä¸²è½¬å…ƒç»„: {char_tuple}\")# å¦‚æœæƒ³è¦å•ä¸ªå­—ç¬¦ä¸²å…ƒç´ çš„å…ƒç»„single_string_tuple = (string_data,)print(f\"å•å­—ç¬¦ä¸²å…ƒç»„: {single_string_tuple}\")# æ•°å­—è½¬å…ƒç»„ï¼ˆéœ€è¦å…ˆè½¬ä¸ºå¯è¿­ä»£å¯¹è±¡ï¼‰number = 12345try:    digit_tuple = tuple(number)except TypeError as e:    print(f\"æ•°å­—ç›´æ¥è½¬å…ƒç»„é”™è¯¯: {e}\")# æ­£ç¡®æ–¹å¼ï¼šå…ˆè½¬ä¸ºå­—ç¬¦ä¸²digit_tuple = tuple(str(number))print(f\"æ•°å­—è½¬å…ƒç»„: {digit_tuple}\")# æˆ–è€…è½¬ä¸ºæ•°å­—åˆ—è¡¨digit_list_tuple = tuple(int(d) for d in str(number))print(f\"æ•°å­—åˆ—è¡¨å…ƒç»„: {digit_list_tuple}\")# Noneå€¼å¤„ç†try:    none_tuple = tuple(None)except TypeError as e:    print(f\"Noneè½¬å…ƒç»„é”™è¯¯: {e}\")# å®‰å…¨çš„å…ƒç»„è½¬æ¢å‡½æ•°def safe_tuple_conversion(obj):    \"\"\"å®‰å…¨çš„å…ƒç»„è½¬æ¢\"\"\"    if obj is None:        return ()    if isinstance(obj, (str, bytes)):        return tuple(obj)    try:        return tuple(obj)    except TypeError:        return (obj,)  # åŒ…è£…ä¸ºå•å…ƒç´ å…ƒç»„# æµ‹è¯•å®‰å…¨è½¬æ¢test_values = [None, \"hello\", [1, 2, 3], 42, (4, 5, 6), {7, 8, 9}]print(\"\\nå®‰å…¨è½¬æ¢æµ‹è¯•:\")for value in test_values:    result = safe_tuple_conversion(value)    print(f\"  {value} -> {result}\")```### å…ƒç»„ä¸åˆ—è¡¨çš„é€‰æ‹©```python# ä½•æ—¶ä½¿ç”¨å…ƒç»„ vs åˆ—è¡¨çš„æŒ‡å¯¼åŸåˆ™print(\"å…ƒç»„ vs åˆ—è¡¨é€‰æ‹©æŒ‡å—:\")print(\"\\nä½¿ç”¨å…ƒç»„çš„åœºæ™¯:\")print(\"  1. æ•°æ®ä¸éœ€è¦ä¿®æ”¹ï¼ˆé…ç½®ã€å¸¸é‡ï¼‰\")print(\"  2. ä½œä¸ºå­—å…¸é”®\")print(\"  3. å‡½æ•°è¿”å›å¤šä¸ªå€¼\")print(\"  4. åæ ‡ã€RGBå€¼ç­‰å›ºå®šç»“æ„\")print(\"  5. æ€§èƒ½è¦æ±‚é«˜çš„åœºæ™¯\")print(\"\\nä½¿ç”¨åˆ—è¡¨çš„åœºæ™¯:\")print(\"  1. æ•°æ®éœ€è¦ä¿®æ”¹ï¼ˆæ·»åŠ ã€åˆ é™¤ã€æ’åºï¼‰\")print(\"  2. æ•°æ®é‡å¯èƒ½å˜åŒ–\")print(\"  3. éœ€è¦åˆ—è¡¨ç‰¹æœ‰çš„æ–¹æ³•ï¼ˆappendã€removeç­‰ï¼‰\")print(\"  4. æ•°æ®å¤„ç†å’Œåˆ†æ\")# å®é™…ç¤ºä¾‹å¯¹æ¯”print(\"\\nå®é™…ç¤ºä¾‹:\")# é…ç½®æ•°æ® - ä½¿ç”¨å…ƒç»„DATABASE_CONFIG = ('localhost', 5432, 'mydb', 'user', 'password')print(f\"æ•°æ®åº“é…ç½®ï¼ˆå…ƒç»„ï¼‰: {DATABASE_CONFIG}\")# è´­ç‰©è½¦ - ä½¿ç”¨åˆ—è¡¨shopping_cart = ['è‹¹æœ', 'é¦™è•‰', 'æ©™å­']shopping_cart.append('è‘¡è„')  # å¯ä»¥ä¿®æ”¹print(f\"è´­ç‰©è½¦ï¼ˆåˆ—è¡¨ï¼‰: {shopping_cart}\")# åæ ‡ç‚¹ - ä½¿ç”¨å…ƒç»„point = (10, 20)print(f\"åæ ‡ç‚¹ï¼ˆå…ƒç»„ï¼‰: {point}\")# å­¦ç”Ÿæˆç»© - ä½¿ç”¨åˆ—è¡¨ï¼ˆå¯èƒ½éœ€è¦ä¿®æ”¹ï¼‰student_scores = [85, 92, 78, 96]student_scores.append(89)  # æ·»åŠ æ–°æˆç»©print(f\"å­¦ç”Ÿæˆç»©ï¼ˆåˆ—è¡¨ï¼‰: {student_scores}\")# RGBé¢œè‰² - ä½¿ç”¨å…ƒç»„red_color = (255, 0, 0)print(f\"çº¢è‰²RGBï¼ˆå…ƒç»„ï¼‰: {red_color}\")# æ—¥å¿—è®°å½• - ä½¿ç”¨åˆ—è¡¨ï¼ˆä¼šä¸æ–­æ·»åŠ ï¼‰log_entries = []log_entries.append(('2024-01-15 10:00:00', 'INFO', 'ç³»ç»Ÿå¯åŠ¨'))log_entries.append(('2024-01-15 10:01:00', 'DEBUG', 'è¿æ¥æ•°æ®åº“'))print(f\"æ—¥å¿—è®°å½•ï¼ˆåˆ—è¡¨åŒ…å«å…ƒç»„ï¼‰: {log_entries}\")```## ğŸ”— ç›¸å…³å†…å®¹### ç›¸å…³å‡½æ•°- [list() - åˆ—è¡¨æ„é€ å‡½æ•°](list.md) - åˆ›å»ºåˆ—è¡¨- [set() - é›†åˆæ„é€ å‡½æ•°](set.md) - åˆ›å»ºé›†åˆ- [dict() - å­—å…¸æ„é€ å‡½æ•°](dict.md) - åˆ›å»ºå­—å…¸- [str() - å­—ç¬¦ä¸²æ„é€ å‡½æ•°](str.md) - åˆ›å»ºå­—ç¬¦ä¸²- [len() - é•¿åº¦å‡½æ•°](len.md) - è·å–é•¿åº¦- [enumerate() - æšä¸¾å‡½æ•°](enumerate.md) - æšä¸¾ç´¢å¼•### ç›¸å…³æ¨¡å—- [collectionsæ¨¡å—](../stdlib/collections.md) - å®¹å™¨æ•°æ®ç±»å‹- [itertoolsæ¨¡å—](../stdlib/itertools.md) - è¿­ä»£å·¥å…·- [operatoræ¨¡å—](../stdlib/operator.md) - æ“ä½œç¬¦å‡½æ•°- [copyæ¨¡å—](../stdlib/copy.md) - æ‹·è´æ“ä½œ### ç›¸å…³æ¦‚å¿µ- [åºåˆ—ç±»å‹](../basics/sequence-types.md) - åºåˆ—æ“ä½œ- [ä¸å¯å˜å¯¹è±¡](../basics/immutable-objects.md) - ä¸å¯å˜æ€§- [å…ƒç»„è§£åŒ…](../basics/tuple-unpacking.md) - è§£åŒ…æ“ä½œ- [å‘½åå…ƒç»„](../advanced/named-tuples.md) - ç»“æ„åŒ–æ•°æ®## ğŸ“š æ‰©å±•é˜…è¯»- [Pythonå®˜æ–¹æ–‡æ¡£ - tuple()](https://docs.python.org/3/library/functions.html#func-tuple)- [Pythonå®˜æ–¹æ–‡æ¡£ - å…ƒç»„ç±»å‹](https://docs.python.org/3/library/stdtypes.html#tuple)- [åºåˆ—ç±»å‹æ“ä½œ](https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range)- [æ•°æ®ç»“æ„](https://docs.python.org/3/tutorial/datastructures.html)## ğŸ·ï¸ æ ‡ç­¾`ç±»å‹è½¬æ¢` `å®¹å™¨` `åºåˆ—` `ä¸å¯å˜` `æ•°æ®ç»“æ„`---**æœ€åæ›´æ–°**: 2024-01-15  **ä½œè€…**: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ  **ç‰ˆæœ¬**: 1.0",
        "url": "/docs/builtins/tuple/",
        "category": "builtins",
        "tags": ["ç±»å‹è½¬æ¢","å®¹å™¨","åºåˆ—","ä¸å¯å˜"]
      }
      
    
  
    
      ,
      {
        "title": "type() - ç±»å‹å‡½æ•°",
        "content": "# type() - ç±»å‹å‡½æ•°## ğŸ“ æ¦‚è¿°`type()` æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œå…·æœ‰ä¸¤ç§ä¸»è¦ç”¨æ³•ï¼šä½œä¸ºå•å‚æ•°å‡½æ•°æ—¶è¿”å›å¯¹è±¡çš„ç±»å‹ï¼Œä½œä¸ºä¸‰å‚æ•°å‡½æ•°æ—¶å¯ä»¥åŠ¨æ€åˆ›å»ºæ–°çš„ç±»å‹å¯¹è±¡ã€‚å®ƒæ˜¯Pythonç±»å‹ç³»ç»Ÿå’Œå…ƒç¼–ç¨‹çš„é‡è¦å·¥å…·ã€‚1## ğŸ¯ å­¦ä¹ ç›®æ ‡- æŒæ¡type()å‡½æ•°çš„ä¸¤ç§ç”¨æ³•- ç†è§£type()ä¸isinstance()çš„åŒºåˆ«- å­¦ä¼šä½¿ç”¨type()è¿›è¡Œç±»å‹æ£€æŸ¥- äº†è§£åŠ¨æ€åˆ›å»ºç±»çš„æ–¹æ³•## ğŸ“‹ å‰ç½®çŸ¥è¯†- PythonåŸºæœ¬æ•°æ®ç±»å‹- ç±»å’Œå¯¹è±¡çš„æ¦‚å¿µ- ç»§æ‰¿çš„åŸºæœ¬ç†è§£- å…ƒç±»çš„åˆæ­¥æ¦‚å¿µ## ğŸ” è¯¦ç»†å†…å®¹### åŸºæœ¬æ¦‚å¿µ`type()` å‡½æ•°æœ‰ä¸¤ç§å½¢å¼ï¼š1. `type(object)` - è¿”å›å¯¹è±¡çš„ç±»å‹2. `type(name, bases, dict)` - åˆ›å»ºæ–°çš„ç±»å‹å¯¹è±¡### è¯­æ³•æ ¼å¼```python# è·å–å¯¹è±¡ç±»å‹type(object)# åˆ›å»ºæ–°ç±»å‹type(name, bases, dict, **kwds)```### å‚æ•°è¯´æ˜#### å•å‚æ•°å½¢å¼| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ ||--------|------|------|--------|---------|| object | any | æ˜¯ | æ—  | è¦æ£€æŸ¥ç±»å‹çš„å¯¹è±¡ |#### ä¸‰å‚æ•°å½¢å¼| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ ||--------|------|------|--------|---------|| name | str | æ˜¯ | æ—  | ç±»çš„åç§° || bases | tuple | æ˜¯ | æ—  | åŸºç±»å…ƒç»„ || dict | dict | æ˜¯ | æ—  | ç±»çš„å‘½åç©ºé—´å­—å…¸ || **kwds | any | å¦ | æ—  | ä¼ é€’ç»™å…ƒç±»çš„å…³é”®å­—å‚æ•° |### è¿”å›å€¼| ç±»å‹ | è¯´æ˜ ||------|------|| type | å¯¹è±¡çš„ç±»å‹æˆ–æ–°åˆ›å»ºçš„ç±»å‹å¯¹è±¡ |## ğŸ’¡ å®é™…åº”ç”¨### åŸºç¡€ç”¨æ³•```python# è·å–åŸºæœ¬æ•°æ®ç±»å‹print(type(42))          # print(type(3.14))        # print(type(\"hello\"))     # print(type([1, 2, 3]))   # print(type({\"a\": 1}))    # # è·å–è‡ªå®šä¹‰ç±»çš„ç±»å‹class Person:    def __init__(self, name):        self.name = nameperson = Person(\"å¼ ä¸‰\")print(type(person))      # print(type(Person))      # # ç±»å‹æ¯”è¾ƒif type(person) == Person:    print(\"personæ˜¯Personç±»çš„å®ä¾‹\")```### é«˜çº§ç”¨æ³•```python# type()ä¸isinstance()çš„åŒºåˆ«class Animal:    passclass Dog(Animal):    passdog = Dog()# type()ä¸è€ƒè™‘ç»§æ‰¿å…³ç³»print(type(dog) == Dog)     # Trueprint(type(dog) == Animal)  # False# isinstance()è€ƒè™‘ç»§æ‰¿å…³ç³»print(isinstance(dog, Dog))     # Trueprint(isinstance(dog, Animal))  # True# åŠ¨æ€åˆ›å»ºç±»def init_method(self, name):    self.name = namedef say_hello(self):    return f\"Hello, I'm {self.name}\"# ä½¿ç”¨type()åˆ›å»ºç±»Student = type('Student', (), {    '__init__': init_method,    'say_hello': say_hello,    'school': 'æ¸…åå¤§å­¦'  # ç±»å±æ€§})# ä½¿ç”¨åŠ¨æ€åˆ›å»ºçš„ç±»student = Student(\"æå››\")print(student.say_hello())  # Hello, I'm æå››print(student.school)       # æ¸…åå¤§å­¦```### å®é™…æ¡ˆä¾‹```python# ç±»å‹æ£€æŸ¥è£…é¥°å™¨def type_check(*expected_types):    \"\"\"ç±»å‹æ£€æŸ¥è£…é¥°å™¨\"\"\"    def decorator(func):        def wrapper(*args, **kwargs):            for i, arg in enumerate(args):                if i \"```## ğŸ”— ç›¸å…³å†…å®¹- [isinstance() - å®ä¾‹æ£€æŸ¥å‡½æ•°](../isinstance.md)- [issubclass() - å­ç±»æ£€æŸ¥å‡½æ•°](../issubclass.md)- [hasattr() - å±æ€§æ£€æŸ¥å‡½æ•°](../hasattr.md)## ğŸ“š æ‰©å±•é˜…è¯»- [Pythonå®˜æ–¹æ–‡æ¡£ - type()](https://docs.python.org/3/library/functions.html#type)- [Pythonæ•°æ®æ¨¡å‹ - å…ƒç±»](https://docs.python.org/3/reference/datamodel.html#metaclasses)- [Pythonç±»å‹ç³»ç»Ÿè¯¦è§£](https://docs.python.org/3/library/typing.html)## ğŸ·ï¸ æ ‡ç­¾`ç±»å‹æ£€æŸ¥` `å¯¹è±¡` `å…ƒç±»` `åŠ¨æ€åˆ›å»º` `åå°„`---**æœ€åæ›´æ–°**: 2024-01-15  **ä½œè€…**: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ  **ç‰ˆæœ¬**: 1.0",
        "url": "/docs/builtins/type/",
        "category": "builtins",
        "tags": ["ç±»å‹æ£€æŸ¥","å¯¹è±¡","å…ƒç±»"]
      }
      
    
  
    
      ,
      {
        "title": "typingæ¨¡å—ï¼šç±»å‹æç¤º",
        "content": "# typingæ¨¡å—ï¼šç±»å‹æç¤º## ğŸ“ æ¦‚è¿°Pythonçš„`typing`æ¨¡å—ä¸ºç±»å‹æç¤º(Type Hints)æä¾›è¿è¡Œæ—¶æ”¯æŒã€‚ä»Python 3.5ç‰ˆæœ¬å¼€å§‹ï¼Œtypingä½œä¸ºæ ‡å‡†åº“å¼•å…¥ï¼Œæ”¯æŒå‡½æ•°æ³¨è§£åŠŸèƒ½ï¼Œå¯ä»¥é…åˆç±»å‹æ£€æŸ¥å·¥å…·å¦‚mypyå®ç°é™æ€ç±»å‹æ£€æŸ¥ã€‚**é‡è¦æç¤º**ï¼šç±»å‹æç¤ºå¯¹ç¨‹åºè¿è¡Œæ²¡æœ‰ä»»ä½•å½±å“ï¼Œä»…ç”¨äºé™æ€åˆ†æå’Œä»£ç æ–‡æ¡£åŒ–ã€‚## ğŸ¯ å­¦ä¹ ç›®æ ‡- ç†è§£ç±»å‹æç¤ºçš„æ¦‚å¿µå’Œä½œç”¨- æŒæ¡åŸºæœ¬ç±»å‹æ³¨è§£çš„ä½¿ç”¨æ–¹æ³•- å­¦ä¼šä½¿ç”¨æ³›å‹ç±»å‹å’Œç±»å‹å˜é‡- äº†è§£è”åˆç±»å‹å’Œå¯é€‰ç±»å‹- æŒæ¡å¤æ‚ç±»å‹çš„å®šä¹‰å’Œä½¿ç”¨## ğŸ“‹ å‰ç½®çŸ¥è¯†- PythonåŸºç¡€è¯­æ³•- å‡½æ•°å®šä¹‰å’Œè°ƒç”¨- é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€- è£…é¥°å™¨çš„åŸºæœ¬æ¦‚å¿µ## ğŸ” è¯¦ç»†å†…å®¹### åŸºæœ¬æ¦‚å¿µç±»å‹æç¤ºæ˜¯ä¸€ç§ä¸ºPythonä»£ç æ·»åŠ ç±»å‹ä¿¡æ¯çš„æ–¹å¼ï¼Œä¸»è¦ä¼˜åŠ¿ï¼š- **ä»£ç å¯è¯»æ€§**ï¼šæ˜ç¡®å‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹- **é™æ€æ£€æŸ¥**ï¼šé…åˆå·¥å…·è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œæå‰å‘ç°é”™è¯¯- **IDEæ”¯æŒ**ï¼šæä¾›æ›´å¥½çš„ä»£ç è¡¥å…¨å’Œé”™è¯¯æç¤º- **æ–‡æ¡£åŒ–**ï¼šç±»å‹ä¿¡æ¯æœ¬èº«å°±æ˜¯å¾ˆå¥½çš„æ–‡æ¡£### æ ¸å¿ƒç±»å‹å’Œå·¥å…·| ç±»å‹/å·¥å…· | è¯´æ˜ ||-----------|------|| Any | ä»»æ„ç±»å‹ || Union | è”åˆç±»å‹ || Optional | å¯é€‰ç±»å‹ || List, Dict, Tuple | å®¹å™¨ç±»å‹ || Callable | å¯è°ƒç”¨ç±»å‹ || TypeVar | ç±»å‹å˜é‡ || Generic | æ³›å‹åŸºç±» || Literal | å­—é¢é‡ç±»å‹ || TypedDict | ç±»å‹åŒ–å­—å…¸ || NewType | æ–°ç±»å‹å®šä¹‰ |## ğŸ’¡ å®é™…åº”ç”¨### åŸºç¡€ç±»å‹æ³¨è§£```pythonfrom typing import List, Dict, Tuple, Optional# åŸºæœ¬ç±»å‹æ³¨è§£def greet(name: str) -> str:    \"\"\"é—®å€™å‡½æ•°\"\"\"    return f\"Hello, {name}!\"# å®¹å™¨ç±»å‹æ³¨è§£def process_numbers(numbers: List[int]) -> Dict[str, int]:    \"\"\"å¤„ç†æ•°å­—åˆ—è¡¨ï¼Œè¿”å›ç»Ÿè®¡ä¿¡æ¯\"\"\"    return {        \"count\": len(numbers),        \"sum\": sum(numbers),        \"max\": max(numbers) if numbers else 0,        \"min\": min(numbers) if numbers else 0    }# å…ƒç»„ç±»å‹æ³¨è§£def get_coordinates() -> Tuple[float, float]:    \"\"\"è·å–åæ ‡ç‚¹\"\"\"    return (3.14, 2.71)# ä½¿ç”¨ç¤ºä¾‹result = greet(\"å¼ ä¸‰\")print(result)  # Hello, å¼ ä¸‰!stats = process_numbers([1, 2, 3, 4, 5])print(stats)  # {'count': 5, 'sum': 15, 'max': 5, 'min': 1}coords = get_coordinates()print(f\"åæ ‡: ({coords[0]}, {coords[1]})\")  # åæ ‡: (3.14, 2.71)```### ç±»å‹åˆ«å```pythonfrom typing import List, Dict# å®šä¹‰ç±»å‹åˆ«åVector = List[float]Matrix = List[Vector]StudentGrades = Dict[str, List[int]]def scale_vector(scalar: float, vector: Vector) -> Vector:    \"\"\"å‘é‡ç¼©æ”¾\"\"\"    return [scalar * num for num in vector]def multiply_matrices(a: Matrix, b: Matrix) -> Matrix:    \"\"\"çŸ©é˜µä¹˜æ³•ï¼ˆç®€åŒ–ç‰ˆï¼‰\"\"\"    # ç®€åŒ–å®ç°ï¼Œä»…ä½œç¤ºä¾‹    if not a or not b or len(a[0]) != len(b):        return []        result = []    for i in range(len(a)):        row = []        for j in range(len(b[0])):            sum_val = sum(a[i][k] * b[k][j] for k in range(len(b)))            row.append(sum_val)        result.append(row)    return resultdef calculate_average_grade(grades: StudentGrades) -> Dict[str, float]:    \"\"\"è®¡ç®—å­¦ç”Ÿå¹³å‡æˆç»©\"\"\"    return {        student: sum(scores) / len(scores) if scores else 0.0        for student, scores in grades.items()    }# ä½¿ç”¨ç¤ºä¾‹vec = [1.0, 2.0, 3.0]scaled = scale_vector(2.0, vec)print(f\"ç¼©æ”¾åçš„å‘é‡: {scaled}\")  # ç¼©æ”¾åçš„å‘é‡: [2.0, 4.0, 6.0]student_data: StudentGrades = {    \"å¼ ä¸‰\": [85, 90, 78],    \"æå››\": [92, 88, 95],    \"ç‹äº”\": [76, 82, 89]}averages = calculate_average_grade(student_data)for student, avg in averages.items():    print(f\"{student}çš„å¹³å‡æˆç»©: {avg:.2f}\")```### NewTypeçš„ä½¿ç”¨```pythonfrom typing import NewType# åˆ›å»ºæ–°ç±»å‹UserId = NewType('UserId', int)ProductId = NewType('ProductId', int)Price = NewType('Price', float)def get_user_info(user_id: UserId) -> str:    \"\"\"è·å–ç”¨æˆ·ä¿¡æ¯\"\"\"    return f\"ç”¨æˆ·ID: {user_id}\"def get_product_price(product_id: ProductId) -> Price:    \"\"\"è·å–äº§å“ä»·æ ¼\"\"\"    # æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢    prices = {1001: 99.99, 1002: 149.99, 1003: 79.99}    return Price(prices.get(product_id, 0.0))def calculate_total(price: Price, quantity: int) -> Price:    \"\"\"è®¡ç®—æ€»ä»·\"\"\"    return Price(price * quantity)# ä½¿ç”¨ç¤ºä¾‹user = UserId(12345)product = ProductId(1001)user_info = get_user_info(user)print(user_info)  # ç”¨æˆ·ID: 12345unit_price = get_product_price(product)total_price = calculate_total(unit_price, 3)print(f\"å•ä»·: {unit_price}, æ€»ä»·: {total_price}\")  # å•ä»·: 99.99, æ€»ä»·: 299.97# NewTypeæä¾›ç±»å‹å®‰å…¨# get_user_info(product)  # ç±»å‹æ£€æŸ¥å™¨ä¼šæŠ¥é”™```### Anyç±»å‹```pythonfrom typing import Any, Listdef process_data(data: Any) -> str:    \"\"\"å¤„ç†ä»»æ„ç±»å‹çš„æ•°æ®\"\"\"    if isinstance(data, str):        return f\"å­—ç¬¦ä¸²: {data}\"    elif isinstance(data, (int, float)):        return f\"æ•°å­—: {data}\"    elif isinstance(data, list):        return f\"åˆ—è¡¨ï¼Œé•¿åº¦: {len(data)}\"    else:        return f\"å…¶ä»–ç±»å‹: {type(data).__name__}\"def flexible_function(value: Any) -> Any:    \"\"\"çµæ´»çš„å‡½æ•°ï¼Œå¯ä»¥å¤„ç†ä»»ä½•ç±»å‹\"\"\"    # Anyç±»å‹å¯ä»¥èµ‹å€¼ç»™ä»»ä½•å…¶ä»–ç±»å‹    result: str = str(value)  # ä¸ä¼šæœ‰ç±»å‹æ£€æŸ¥é”™è¯¯    return result# ä½¿ç”¨ç¤ºä¾‹print(process_data(\"Hello\"))      # å­—ç¬¦ä¸²: Helloprint(process_data(42))           # æ•°å­—: 42print(process_data([1, 2, 3]))    # åˆ—è¡¨ï¼Œé•¿åº¦: 3print(process_data({\"key\": \"value\"}))  # å…¶ä»–ç±»å‹: dict```### Unionå’ŒOptional```pythonfrom typing import Union, Optional, List# Unionç±»å‹ï¼šå¯ä»¥æ˜¯å¤šç§ç±»å‹ä¹‹ä¸€def format_value(value: Union[int, float, str]) -> str:    \"\"\"æ ¼å¼åŒ–ä¸åŒç±»å‹çš„å€¼\"\"\"    if isinstance(value, (int, float)):        return f\"æ•°å€¼: {value:.2f}\"    else:        return f\"æ–‡æœ¬: {value}\"# Optionalç±»å‹ï¼šå¯ä»¥æ˜¯æŒ‡å®šç±»å‹æˆ–Nonedef find_user(user_id: int) -> Optional[str]:    \"\"\"æŸ¥æ‰¾ç”¨æˆ·ï¼Œå¯èƒ½è¿”å›None\"\"\"    users = {1: \"å¼ ä¸‰\", 2: \"æå››\", 3: \"ç‹äº”\"}    return users.get(user_id)def safe_divide(a: float, b: float) -> Optional[float]:    \"\"\"å®‰å…¨é™¤æ³•ï¼Œé™¤é›¶æ—¶è¿”å›None\"\"\"    if b == 0:        return None    return a / bdef process_optional_list(items: Optional[List[int]]) -> int:    \"\"\"å¤„ç†å¯é€‰çš„åˆ—è¡¨\"\"\"    if items is None:        return 0    return sum(items)# ä½¿ç”¨ç¤ºä¾‹print(format_value(3.14159))    # æ•°å€¼: 3.14print(format_value(\"Hello\"))    # æ–‡æœ¬: Hellouser = find_user(1)if user:    print(f\"æ‰¾åˆ°ç”¨æˆ·: {user}\")   # æ‰¾åˆ°ç”¨æˆ·: å¼ ä¸‰else:    print(\"ç”¨æˆ·ä¸å­˜åœ¨\")result = safe_divide(10, 2)if result is not None:    print(f\"é™¤æ³•ç»“æœ: {result}\")  # é™¤æ³•ç»“æœ: 5.0print(process_optional_list([1, 2, 3]))  # 6print(process_optional_list(None))       # 0```### Callableç±»å‹```pythonfrom typing import Callable, List# å®šä¹‰å‡½æ•°ç±»å‹MathOperation = Callable[[float, float], float]Validator = Callable[[str], bool]Transformer = Callable[[List[int]], List[int]]def add(x: float, y: float) -> float:    \"\"\"åŠ æ³•è¿ç®—\"\"\"    return x + ydef multiply(x: float, y: float) -> float:    \"\"\"ä¹˜æ³•è¿ç®—\"\"\"    return x * ydef apply_operation(a: float, b: float, operation: MathOperation) -> float:    \"\"\"åº”ç”¨æ•°å­¦è¿ç®—\"\"\"    return operation(a, b)def is_email(text: str) -> bool:    \"\"\"ç®€å•çš„é‚®ç®±éªŒè¯\"\"\"    return \"@\" in text and \".\" in textdef is_phone(text: str) -> bool:    \"\"\"ç®€å•çš„ç”µè¯éªŒè¯\"\"\"    return text.isdigit() and len(text) >= 10def validate_input(value: str, validator: Validator) -> bool:    \"\"\"éªŒè¯è¾“å…¥\"\"\"    return validator(value)def double_values(numbers: List[int]) -> List[int]:    \"\"\"å°†æ‰€æœ‰æ•°å­—ç¿»å€\"\"\"    return [x * 2 for x in numbers]def filter_even(numbers: List[int]) -> List[int]:    \"\"\"è¿‡æ»¤å¶æ•°\"\"\"    return [x for x in numbers if x % 2 == 0]def transform_list(data: List[int], transformer: Transformer) -> List[int]:    \"\"\"è½¬æ¢åˆ—è¡¨\"\"\"    return transformer(data)# ä½¿ç”¨ç¤ºä¾‹print(apply_operation(5, 3, add))       # 8.0print(apply_operation(5, 3, multiply))  # 15.0print(validate_input(\"test@example.com\", is_email))  # Trueprint(validate_input(\"1234567890\", is_phone))        # Truenumbers = [1, 2, 3, 4, 5]print(transform_list(numbers, double_values))  # [2, 4, 6, 8, 10]print(transform_list(numbers, filter_even))    # [2, 4]```### TypeVarå’Œæ³›å‹```pythonfrom typing import TypeVar, Generic, List, Optional# å®šä¹‰ç±»å‹å˜é‡T = TypeVar('T')K = TypeVar('K')V = TypeVar('V')# æ³›å‹å‡½æ•°def first_element(items: List[T]) -> Optional[T]:    \"\"\"è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ \"\"\"    return items[0] if items else Nonedef last_element(items: List[T]) -> Optional[T]:    \"\"\"è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ \"\"\"    return items[-1] if items else Nonedef swap_pair(a: T, b: T) -> tuple[T, T]:    \"\"\"äº¤æ¢ä¸¤ä¸ªç›¸åŒç±»å‹çš„å€¼\"\"\"    return b, a# æ³›å‹ç±»class Stack(Generic[T]):    \"\"\"æ³›å‹æ ˆå®ç°\"\"\"        def __init__(self) -> None:        self._items: List[T] = []        def push(self, item: T) -> None:        \"\"\"å…¥æ ˆ\"\"\"        self._items.append(item)        def pop(self) -> Optional[T]:        \"\"\"å‡ºæ ˆ\"\"\"        return self._items.pop() if self._items else None        def peek(self) -> Optional[T]:        \"\"\"æŸ¥çœ‹æ ˆé¡¶å…ƒç´ \"\"\"        return self._items[-1] if self._items else None        def is_empty(self) -> bool:        \"\"\"æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º\"\"\"        return len(self._items) == 0        def size(self) -> int:        \"\"\"è·å–æ ˆçš„å¤§å°\"\"\"        return len(self._items)class KeyValueStore(Generic[K, V]):    \"\"\"æ³›å‹é”®å€¼å­˜å‚¨\"\"\"        def __init__(self) -> None:        self._data: dict[K, V] = {}        def set(self, key: K, value: V) -> None:        \"\"\"è®¾ç½®é”®å€¼å¯¹\"\"\"        self._data[key] = value        def get(self, key: K) -> Optional[V]:        \"\"\"è·å–å€¼\"\"\"        return self._data.get(key)        def keys(self) -> List[K]:        \"\"\"è·å–æ‰€æœ‰é”®\"\"\"        return list(self._data.keys())        def values(self) -> List[V]:        \"\"\"è·å–æ‰€æœ‰å€¼\"\"\"        return list(self._data.values())# ä½¿ç”¨ç¤ºä¾‹print(first_element([1, 2, 3]))      # 1print(first_element([\"a\", \"b\"]))     # aprint(last_element([1.1, 2.2]))      # 2.2a, b = swap_pair(\"hello\", \"world\")print(f\"äº¤æ¢å: {a}, {b}\")  # äº¤æ¢å: world, hello# ä½¿ç”¨æ³›å‹æ ˆint_stack: Stack[int] = Stack()int_stack.push(1)int_stack.push(2)int_stack.push(3)print(f\"æ ˆé¡¶å…ƒç´ : {int_stack.peek()}\")  # æ ˆé¡¶å…ƒç´ : 3print(f\"å‡ºæ ˆ: {int_stack.pop()}\")       # å‡ºæ ˆ: 3str_stack: Stack[str] = Stack()str_stack.push(\"Python\")str_stack.push(\"typing\")print(f\"å­—ç¬¦ä¸²æ ˆå¤§å°: {str_stack.size()}\")  # å­—ç¬¦ä¸²æ ˆå¤§å°: 2# ä½¿ç”¨æ³›å‹é”®å€¼å­˜å‚¨user_store: KeyValueStore[int, str] = KeyValueStore()user_store.set(1, \"å¼ ä¸‰\")user_store.set(2, \"æå››\")print(f\"ç”¨æˆ·1: {user_store.get(1)}\")  # ç”¨æˆ·1: å¼ ä¸‰config_store: KeyValueStore[str, bool] = KeyValueStore()config_store.set(\"debug\", True)config_store.set(\"production\", False)print(f\"é…ç½®é¡¹: {config_store.keys()}\")  # é…ç½®é¡¹: ['debug', 'production']```### Literalç±»å‹```pythonfrom typing import Literal, Union# å­—é¢é‡ç±»å‹Mode = Literal[\"read\", \"write\", \"append\"]LogLevel = Literal[\"DEBUG\", \"INFO\", \"WARNING\", \"ERROR\"]Direction = Literal[\"up\", \"down\", \"left\", \"right\"]def open_file(filename: str, mode: Mode) -> str:    \"\"\"æ‰“å¼€æ–‡ä»¶\"\"\"    return f\"ä»¥{mode}æ¨¡å¼æ‰“å¼€æ–‡ä»¶: {filename}\"def log_message(message: str, level: LogLevel = \"INFO\") -> None:    \"\"\"è®°å½•æ—¥å¿—\"\"\"    print(f\"[{level}] {message}\")def move_character(direction: Direction, steps: int = 1) -> str:    \"\"\"ç§»åŠ¨è§’è‰²\"\"\"    return f\"å‘{direction}ç§»åŠ¨{steps}æ­¥\"# å¸ƒå°”å­—é¢é‡def validate_data(data: str, strict: Literal[True]) -> bool:    \"\"\"ä¸¥æ ¼éªŒè¯æ¨¡å¼\"\"\"    return len(data) > 0 and data.isalnum()def validate_data_flexible(data: str, strict: Literal[False]) -> bool:    \"\"\"å®½æ¾éªŒè¯æ¨¡å¼\"\"\"    return len(data) > 0# æ•°å­—å­—é¢é‡HttpStatus = Literal[200, 404, 500]def handle_response(status: HttpStatus) -> str:    \"\"\"å¤„ç†HTTPå“åº”\"\"\"    if status == 200:        return \"è¯·æ±‚æˆåŠŸ\"    elif status == 404:        return \"èµ„æºæœªæ‰¾åˆ°\"    elif status == 500:        return \"æœåŠ¡å™¨é”™è¯¯\"    else:        return \"æœªçŸ¥çŠ¶æ€\"  # è¿™è¡Œä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ# ä½¿ç”¨ç¤ºä¾‹print(open_file(\"data.txt\", \"read\"))     # ä»¥readæ¨¡å¼æ‰“å¼€æ–‡ä»¶: data.txtlog_message(\"ç³»ç»Ÿå¯åŠ¨\", \"INFO\")           # [INFO] ç³»ç»Ÿå¯åŠ¨log_message(\"å‘ç”Ÿé”™è¯¯\", \"ERROR\")          # [ERROR] å‘ç”Ÿé”™è¯¯print(move_character(\"up\", 3))           # å‘upç§»åŠ¨3æ­¥print(move_character(\"left\"))            # å‘leftç§»åŠ¨1æ­¥print(validate_data(\"abc123\", True))     # Trueprint(validate_data_flexible(\"hello!\", False))  # Trueprint(handle_response(200))              # è¯·æ±‚æˆåŠŸprint(handle_response(404))              # èµ„æºæœªæ‰¾åˆ°```### TypedDict```pythonfrom typing import TypedDict, List, Optional# å®šä¹‰ç±»å‹åŒ–å­—å…¸class Person(TypedDict):    name: str    age: int    email: strclass Product(TypedDict):    id: int    name: str    price: float    in_stock: boolclass Order(TypedDict):    order_id: str    customer: Person    items: List[Product]    total: float    status: Literal[\"pending\", \"processing\", \"shipped\", \"delivered\"]# å¯é€‰å­—æ®µçš„TypedDictclass UserProfile(TypedDict, total=False):    username: str      # å¿…éœ€å­—æ®µ    email: str         # å¿…éœ€å­—æ®µ    phone: Optional[str]     # å¯é€‰å­—æ®µ    address: Optional[str]   # å¯é€‰å­—æ®µ    bio: Optional[str]       # å¯é€‰å­—æ®µdef create_person(name: str, age: int, email: str) -> Person:    \"\"\"åˆ›å»ºäººå‘˜ä¿¡æ¯\"\"\"    return {        \"name\": name,        \"age\": age,        \"email\": email    }def calculate_order_total(items: List[Product]) -> float:    \"\"\"è®¡ç®—è®¢å•æ€»é¢\"\"\"    return sum(item[\"price\"] for item in items if item[\"in_stock\"])def process_order(order: Order) -> str:    \"\"\"å¤„ç†è®¢å•\"\"\"    customer_name = order[\"customer\"][\"name\"]    item_count = len(order[\"items\"])    total = order[\"total\"]    status = order[\"status\"]        return f\"å®¢æˆ·{customer_name}çš„è®¢å•åŒ…å«{item_count}ä»¶å•†å“ï¼Œæ€»é¢{total:.2f}å…ƒï¼ŒçŠ¶æ€ï¼š{status}\"def update_user_profile(profile: UserProfile, **updates) -> UserProfile:    \"\"\"æ›´æ–°ç”¨æˆ·èµ„æ–™\"\"\"    updated_profile = profile.copy()    for key, value in updates.items():        if key in UserProfile.__annotations__:            updated_profile[key] = value    return updated_profile# ä½¿ç”¨ç¤ºä¾‹person1 = create_person(\"å¼ ä¸‰\", 30, \"zhangsan@example.com\")print(f\"åˆ›å»ºç”¨æˆ·: {person1['name']}, å¹´é¾„: {person1['age']}\")products: List[Product] = [    {\"id\": 1, \"name\": \"ç¬”è®°æœ¬ç”µè„‘\", \"price\": 5999.99, \"in_stock\": True},    {\"id\": 2, \"name\": \"æ— çº¿é¼ æ ‡\", \"price\": 199.99, \"in_stock\": True},    {\"id\": 3, \"name\": \"æœºæ¢°é”®ç›˜\", \"price\": 899.99, \"in_stock\": False}]total_amount = calculate_order_total(products)print(f\"å¯è´­ä¹°å•†å“æ€»é¢: {total_amount:.2f}å…ƒ\")order: Order = {    \"order_id\": \"ORD-2024-001\",    \"customer\": person1,    \"items\": products[:2],  # åªåŒ…å«æœ‰åº“å­˜çš„å•†å“    \"total\": 6199.98,    \"status\": \"pending\"}print(process_order(order))# ç”¨æˆ·èµ„æ–™ç¤ºä¾‹user_profile: UserProfile = {    \"username\": \"zhangsan\",    \"email\": \"zhangsan@example.com\"}updated_profile = update_user_profile(    user_profile,     phone=\"13800138000\",     bio=\"Pythonå¼€å‘è€…\")print(f\"æ›´æ–°åçš„èµ„æ–™: {updated_profile}\")```### å®é™…æ¡ˆä¾‹ï¼šAPIå“åº”å¤„ç†```pythonfrom typing import TypedDict, List, Optional, Union, Literalimport json# å®šä¹‰APIå“åº”ç±»å‹class ApiResponse(TypedDict):    success: bool    message: str    data: Optional[dict]    errors: Optional[List[str]]class UserData(TypedDict):    id: int    username: str    email: str    created_at: str    is_active: boolclass PaginationInfo(TypedDict):    page: int    per_page: int    total: int    pages: intclass UserListResponse(TypedDict):    success: bool    data: List[UserData]    pagination: PaginationInfo# APIçŠ¶æ€ç±»å‹ApiStatus = Literal[\"success\", \"error\", \"loading\"]HttpMethod = Literal[\"GET\", \"POST\", \"PUT\", \"DELETE\"]class ApiClient:    \"\"\"APIå®¢æˆ·ç«¯ç±»\"\"\"        def __init__(self, base_url: str) -> None:        self.base_url = base_url        def make_request(self,                     endpoint: str,                     method: HttpMethod = \"GET\",                     data: Optional[dict] = None) -> ApiResponse:        \"\"\"å‘é€APIè¯·æ±‚\"\"\"        # æ¨¡æ‹ŸAPIè¯·æ±‚        if endpoint == \"/users\" and method == \"GET\":            return {                \"success\": True,                \"message\": \"ç”¨æˆ·åˆ—è¡¨è·å–æˆåŠŸ\",                \"data\": {                    \"users\": [                        {                            \"id\": 1,                            \"username\": \"zhangsan\",                            \"email\": \"zhangsan@example.com\",                            \"created_at\": \"2024-01-01T00:00:00Z\",                            \"is_active\": True                        }                    ]                },                \"errors\": None            }        else:            return {                \"success\": False,                \"message\": \"è¯·æ±‚å¤±è´¥\",                \"data\": None,                \"errors\": [\"ç«¯ç‚¹ä¸å­˜åœ¨\"]            }        def get_users(self, page: int = 1, per_page: int = 10) -> UserListResponse:        \"\"\"è·å–ç”¨æˆ·åˆ—è¡¨\"\"\"        # æ¨¡æ‹Ÿåˆ†é¡µç”¨æˆ·æ•°æ®        users: List[UserData] = [            {                \"id\": i,                \"username\": f\"user{i}\",                \"email\": f\"user{i}@example.com\",                \"created_at\": \"2024-01-01T00:00:00Z\",                \"is_active\": True            }            for i in range(1, per_page + 1)        ]                return {            \"success\": True,            \"data\": users,            \"pagination\": {                \"page\": page,                \"per_page\": per_page,                \"total\": 100,                \"pages\": 10            }        }def handle_api_response(response: ApiResponse) -> str:    \"\"\"å¤„ç†APIå“åº”\"\"\"    if response[\"success\"]:        return f\"è¯·æ±‚æˆåŠŸ: {response['message']}\"    else:        errors = response.get(\"errors\", [])        error_msg = \", \".join(errors) if errors else \"æœªçŸ¥é”™è¯¯\"        return f\"è¯·æ±‚å¤±è´¥: {error_msg}\"def format_user_info(user: UserData) -> str:    \"\"\"æ ¼å¼åŒ–ç”¨æˆ·ä¿¡æ¯\"\"\"    status = \"æ´»è·ƒ\" if user[\"is_active\"] else \"éæ´»è·ƒ\"    return f\"ç”¨æˆ· {user['username']} ({user['email']}) - {status}\"# ä½¿ç”¨ç¤ºä¾‹client = ApiClient(\"https://api.example.com\")# è·å–ç”¨æˆ·åˆ—è¡¨user_response = client.get_users(page=1, per_page=5)if user_response[\"success\"]:    users = user_response[\"data\"]    pagination = user_response[\"pagination\"]        print(f\"è·å–åˆ° {len(users)} ä¸ªç”¨æˆ· (ç¬¬{pagination['page']}é¡µï¼Œå…±{pagination['pages']}é¡µ)\")    for user in users:        print(f\"  - {format_user_info(user)}\")else:    print(\"è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥\")# æµ‹è¯•APIè¯·æ±‚api_response = client.make_request(\"/users\", \"GET\")print(handle_api_response(api_response))```## âš ï¸ æ³¨æ„äº‹é¡¹- **è¿è¡Œæ—¶æ— å½±å“**ï¼šç±»å‹æç¤ºä¸ä¼šå½±å“ç¨‹åºçš„å®é™…è¿è¡Œ- **å·¥å…·æ”¯æŒ**ï¼šéœ€è¦é…åˆmypyã€PyCharmç­‰å·¥å…·æ‰èƒ½å‘æŒ¥ä½œç”¨- **æ¸è¿›å¼é‡‡ç”¨**ï¼šå¯ä»¥é€æ­¥ä¸ºç°æœ‰ä»£ç æ·»åŠ ç±»å‹æç¤º- **æ€§èƒ½è€ƒè™‘**ï¼šå¤æ‚çš„ç±»å‹æ£€æŸ¥å¯èƒ½å½±å“å¯¼å…¥æ—¶é—´- **ç‰ˆæœ¬å…¼å®¹æ€§**ï¼šæŸäº›ç‰¹æ€§éœ€è¦è¾ƒæ–°çš„Pythonç‰ˆæœ¬- **æ³›å‹é™åˆ¶**ï¼šè¿‡åº¦ä½¿ç”¨æ³›å‹å¯èƒ½ä½¿ä»£ç å¤æ‚åŒ–## ğŸ”— ç›¸å…³å†…å®¹- [dataclassesæ¨¡å—](../dataclasses.md) - æ•°æ®ç±»ä¸ç±»å‹æç¤º- [abcæ¨¡å—](../abc.md) - æŠ½è±¡åŸºç±»- [functoolsæ¨¡å—](../functools.md) - å‡½æ•°å·¥å…·## ğŸ“š æ‰©å±•é˜…è¯»- [Pythonå®˜æ–¹æ–‡æ¡£ - typingæ¨¡å—](https://docs.python.org/3/library/typing.html)- [PEP 484 - Type Hints](https://www.python.org/dev/peps/pep-0484/)- [mypyå®˜æ–¹æ–‡æ¡£](https://mypy.readthedocs.io/)- [Real Python - Python Type Checking Guide](https://realpython.com/python-type-checking/)## ğŸ·ï¸ æ ‡ç­¾`typing` `ç±»å‹æç¤º` `ç±»å‹æ£€æŸ¥` `æ³›å‹` `é™æ€åˆ†æ`---**æœ€åæ›´æ–°**: 2024-01-15  **ä½œè€…**: Pythonæ–‡æ¡£å›¢é˜Ÿ  **ç‰ˆæœ¬**: 1.0",
        "url": "/docs/stdlib/typing/",
        "category": "stdlib",
        "tags": ["typing","ç±»å‹æç¤º","ç±»å‹æ£€æŸ¥","æ³›å‹","é™æ€åˆ†æ"]
      }
      
    
  
    
      ,
      {
        "title": "å˜é‡ä¸æ•°æ®ç±»å‹",
        "content": "# å˜é‡ä¸æ•°æ®ç±»å‹## ğŸ“ æ¦‚è¿°å˜é‡æ˜¯ç¼–ç¨‹çš„åŸºç¡€æ¦‚å¿µï¼Œç”¨äºå­˜å‚¨å’Œæ“ä½œæ•°æ®ã€‚Pythonæä¾›äº†ä¸°å¯Œçš„æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰åŸºæœ¬ç±»å‹ï¼Œä»¥åŠåˆ—è¡¨ã€å­—å…¸ç­‰å¤åˆç±»å‹ã€‚## ğŸ¯ å­¦ä¹ ç›®æ ‡- ç†è§£å˜é‡çš„æ¦‚å¿µå’Œå‘½åè§„åˆ™- æŒæ¡Pythonçš„åŸºæœ¬æ•°æ®ç±»å‹- å­¦ä¼šè¿›è¡Œç±»å‹è½¬æ¢å’Œç±»å‹æ£€æŸ¥- äº†è§£å¯å˜å’Œä¸å¯å˜å¯¹è±¡çš„åŒºåˆ«## ğŸ“‹ å‰ç½®çŸ¥è¯†- PythonåŸºæœ¬è¯­æ³•- äº†è§£è®¡ç®—æœºå†…å­˜çš„æ¦‚å¿µ## ğŸ” è¯¦ç»†å†…å®¹### å˜é‡å®šä¹‰åœ¨Pythonä¸­ï¼Œå˜é‡ä¸éœ€è¦å£°æ˜ç±»å‹ï¼Œç›´æ¥èµ‹å€¼å³å¯åˆ›å»ºã€‚```python# å˜é‡èµ‹å€¼name = \"Python\"age = 30height = 1.75is_student = True```### å˜é‡å‘½åè§„åˆ™| è§„åˆ™ | è¯´æ˜ | ç¤ºä¾‹ ||------|------|------|| å­—æ¯å¼€å¤´ | å¿…é¡»ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´ | `name`, `_private` || å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ | åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ | `user_name`, `age2` || åŒºåˆ†å¤§å°å†™ | å¤§å°å†™æ•æ„Ÿ | `Name` â‰  `name` || ä¸èƒ½æ˜¯å…³é”®å­— | ä¸èƒ½ä½¿ç”¨Pythonä¿ç•™å­— | ä¸èƒ½ç”¨ `if`, `for` ç­‰ |### åŸºæœ¬æ•°æ®ç±»å‹#### æ•°å­—ç±»å‹```python# æ•´æ•° (int)count = 42negative = -10big_number = 1000000# æµ®ç‚¹æ•° (float)pi = 3.14159temperature = -5.5scientific = 1.5e-4  # ç§‘å­¦è®¡æ•°æ³•# å¤æ•° (complex)complex_num = 3 + 4jprint(complex_num.real)  # å®éƒ¨: 3.0print(complex_num.imag)  # è™šéƒ¨: 4.0```#### å­—ç¬¦ä¸²ç±»å‹```python# å­—ç¬¦ä¸² (str)single_quote = 'Hello'double_quote = \"World\"multi_line = \"\"\"è¿™æ˜¯ä¸€ä¸ªå¤šè¡Œå­—ç¬¦ä¸²\"\"\"# å­—ç¬¦ä¸²æ ¼å¼åŒ–name = \"Alice\"age = 25message = f\"æˆ‘æ˜¯{name}ï¼Œä»Šå¹´{age}å²\"  # f-stringprint(message)  # è¾“å‡º: æˆ‘æ˜¯Aliceï¼Œä»Šå¹´25å²```#### å¸ƒå°”ç±»å‹```python# å¸ƒå°”å€¼ (bool)is_active = Trueis_finished = False# å¸ƒå°”è¿ç®—result = True and False  # Falseresult = True or False   # Trueresult = not True        # False```### å¤åˆæ•°æ®ç±»å‹#### åˆ—è¡¨ (List)```python# åˆ—è¡¨ - å¯å˜ã€æœ‰åºfruits = [\"è‹¹æœ\", \"é¦™è•‰\", \"æ©™å­\"]numbers = [1, 2, 3, 4, 5]mixed = [\"æ–‡æœ¬\", 42, True, 3.14]# åˆ—è¡¨æ“ä½œfruits.append(\"è‘¡è„\")     # æ·»åŠ å…ƒç´ fruits[0] = \"çº¢è‹¹æœ\"      # ä¿®æ”¹å…ƒç´ print(len(fruits))        # è·å–é•¿åº¦```#### å…ƒç»„ (Tuple)```python# å…ƒç»„ - ä¸å¯å˜ã€æœ‰åºcoordinates = (10, 20)colors = (\"çº¢\", \"ç»¿\", \"è“\")single_item = (42,)  # å•å…ƒç´ å…ƒç»„éœ€è¦é€—å·# å…ƒç»„è§£åŒ…x, y = coordinatesprint(f\"åæ ‡: ({x}, {y})\")  # è¾“å‡º: åæ ‡: (10, 20)```#### å­—å…¸ (Dictionary)```python# å­—å…¸ - å¯å˜ã€æ— åºï¼ˆPython 3.7+ä¿æŒæ’å…¥é¡ºåºï¼‰student = {    \"name\": \"å¼ ä¸‰\",    \"age\": 20,    \"grade\": \"A\"}# å­—å…¸æ“ä½œstudent[\"major\"] = \"è®¡ç®—æœºç§‘å­¦\"  # æ·»åŠ é”®å€¼å¯¹print(student[\"name\"])           # è®¿é—®å€¼print(student.get(\"phone\", \"æœªæä¾›\"))  # å®‰å…¨è®¿é—®```#### é›†åˆ (Set)```python# é›†åˆ - å¯å˜ã€æ— åºã€ä¸é‡å¤unique_numbers = {1, 2, 3, 4, 5}colors = {\"çº¢\", \"ç»¿\", \"è“\"}# é›†åˆæ“ä½œunique_numbers.add(6)        # æ·»åŠ å…ƒç´ unique_numbers.remove(1)     # åˆ é™¤å…ƒç´ print(3 in unique_numbers)   # æˆå‘˜æ£€æŸ¥```### ç±»å‹è½¬æ¢```python# æ˜¾å¼ç±»å‹è½¬æ¢num_str = \"123\"num_int = int(num_str)      # å­—ç¬¦ä¸²è½¬æ•´æ•°num_float = float(num_str)  # å­—ç¬¦ä¸²è½¬æµ®ç‚¹æ•°# æ•°å­—è½¬å­—ç¬¦ä¸²age = 25age_str = str(age)# åˆ—è¡¨å’Œå…ƒç»„äº’è½¬list_data = [1, 2, 3]tuple_data = tuple(list_data)  # åˆ—è¡¨è½¬å…ƒç»„back_to_list = list(tuple_data)  # å…ƒç»„è½¬åˆ—è¡¨```### ç±»å‹æ£€æŸ¥```python# æ£€æŸ¥å˜é‡ç±»å‹value = 42print(type(value))           # print(isinstance(value, int)) # True# æ£€æŸ¥å¤šç§ç±»å‹print(isinstance(value, (int, float)))  # True```## ğŸ’¡ å®é™…åº”ç”¨### åŸºç¡€ç”¨æ³•```python# ç”¨æˆ·ä¿¡æ¯ç®¡ç†def create_user_profile():    \"\"\"åˆ›å»ºç”¨æˆ·æ¡£æ¡ˆ\"\"\"    profile = {        \"username\": input(\"è¯·è¾“å…¥ç”¨æˆ·å: \"),        \"age\": int(input(\"è¯·è¾“å…¥å¹´é¾„: \")),        \"hobbies\": [],        \"is_active\": True    }    return profile# ä½¿ç”¨ç¤ºä¾‹user = create_user_profile()print(f\"ç”¨æˆ· {user['username']} åˆ›å»ºæˆåŠŸï¼\")```### é«˜çº§ç”¨æ³•```python# æ•°æ®éªŒè¯å’Œè½¬æ¢def validate_and_convert(data):    \"\"\"éªŒè¯å¹¶è½¬æ¢æ•°æ®ç±»å‹\"\"\"    result = {}        # å¤„ç†å¹´é¾„    if 'age' in data:        try:            result['age'] = int(data['age'])            if result['age']  150:                raise ValueError(\"å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´\")        except ValueError as e:            print(f\"å¹´é¾„è½¬æ¢é”™è¯¯: {e}\")            result['age'] = None        # å¤„ç†é‚®ç®±åˆ—è¡¨    if 'emails' in data:        if isinstance(data['emails'], str):            result['emails'] = [data['emails']]        elif isinstance(data['emails'], list):            result['emails'] = data['emails']        else:            result['emails'] = []        return result```### å®é™…æ¡ˆä¾‹```python# å­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿclass StudentGradeManager:    \"\"\"å­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿ\"\"\"        def __init__(self):        self.students = {}  # å­—å…¸å­˜å‚¨å­¦ç”Ÿä¿¡æ¯        def add_student(self, student_id, name, grades=None):        \"\"\"æ·»åŠ å­¦ç”Ÿ\"\"\"        if grades is None:            grades = []                self.students[student_id] = {            'name': str(name),            'grades': list(grades),            'average': 0.0        }        self._calculate_average(student_id)        def add_grade(self, student_id, grade):        \"\"\"æ·»åŠ æˆç»©\"\"\"        if student_id in self.students:            try:                grade = float(grade)                if 0  float:    \"\"\"è®¡ç®—çŸ©å½¢é¢ç§¯\"\"\"    return length * width```## ğŸ”— ç›¸å…³å†…å®¹- [æ§åˆ¶æµç¨‹](control-flow/) - å­¦ä¹ å¦‚ä½•ä½¿ç”¨å˜é‡è¿›è¡Œæ¡ä»¶åˆ¤æ–­- [å‡½æ•°å®šä¹‰](functions/) - äº†è§£å˜é‡åœ¨å‡½æ•°ä¸­çš„ä½œç”¨åŸŸ- [å†…ç½®å‡½æ•°](../builtins/) - å­¦ä¹ æ“ä½œä¸åŒæ•°æ®ç±»å‹çš„å†…ç½®å‡½æ•°## ğŸ“š æ‰©å±•é˜…è¯»- [Pythonæ•°æ®æ¨¡å‹å®˜æ–¹æ–‡æ¡£](https://docs.python.org/3/reference/datamodel.html)- [PEP 484 - ç±»å‹æç¤º](https://www.python.org/dev/peps/pep-0484/)- [Pythonå†…å­˜ç®¡ç†æœºåˆ¶](https://docs.python.org/3/c-api/memory.html)## ğŸ·ï¸ æ ‡ç­¾`å˜é‡` `æ•°æ®ç±»å‹` `åŸºç¡€è¯­æ³•` `ç±»å‹è½¬æ¢` `å†…å­˜ç®¡ç†`---**æœ€åæ›´æ–°**: 2024-01-01  **ä½œè€…**: Pythonæ–‡æ¡£å›¢é˜Ÿ  **ç‰ˆæœ¬**: 1.0",
        "url": "/docs/basics/variables/",
        "category": "basics",
        "tags": ["å˜é‡","æ•°æ®ç±»å‹","åŸºç¡€è¯­æ³•"]
      }
      
    
  
    
      ,
      {
        "title": "withå…³é”®å­—",
        "content": "# withå…³é”®å­—## æ¦‚è¿°Python ä¸­çš„ `with` è¯­å¥ç”¨äºä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆcontext managerï¼‰å®šä¹‰çš„æ–¹æ³•åŒ…è£…å—çš„æ‰§è¡Œï¼Œå®ƒå…è®¸å°†å¸¸è§çš„ `try...except...finally` ä½¿ç”¨æ¨¡å¼å°è£…èµ·æ¥ä»¥æ–¹ä¾¿é‡ç”¨ã€‚`with` è¯­å¥ç¡®ä¿åœ¨ä½¿ç”¨èµ„æºçš„ä»£ç å®Œæˆè¿è¡Œæ—¶èƒ½å¤Ÿ\"æ¸…ç†\"èµ„æºï¼Œå³ä½¿æŠ›å‡ºå¼‚å¸¸ä¹Ÿæ˜¯å¦‚æ­¤ã€‚## å­¦ä¹ ç›®æ ‡é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†æŒæ¡ï¼š- with è¯­å¥çš„åŸºæœ¬è¯­æ³•å’Œæ‰§è¡ŒåŸç†- ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„æ¦‚å¿µå’Œå®ç°- è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„æ–¹æ³•- with è¯­å¥çš„å®é™…åº”ç”¨åœºæ™¯- å¼‚å¸¸å¤„ç†å’Œèµ„æºç®¡ç†çš„æœ€ä½³å®è·µ## å‰ç½®çŸ¥è¯†- Python åŸºç¡€è¯­æ³•- å¼‚å¸¸å¤„ç†æœºåˆ¶- ç±»å’Œå¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µ- æ–‡ä»¶æ“ä½œåŸºç¡€## è¯¦ç»†å†…å®¹### åŸºæœ¬è¯­æ³•```pythonwith EXPRESSION [as TARGET]:    SUITE```### æ‰§è¡Œè¿‡ç¨‹`with` è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š1. è¯„ä¼°ä¸Šä¸‹æ–‡è¡¨è¾¾å¼ä»¥è·å¾—ä¸Šä¸‹æ–‡ç®¡ç†å™¨2. ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„ `__enter__()` è¢«åŠ è½½ä»¥å¤‡åç”¨3. ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„ `__exit__()` è¢«åŠ è½½ä»¥å¤‡åç”¨4. ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„ `__enter__()` æ–¹æ³•è¢«è°ƒç”¨5. å¦‚æœ TARGET åŒ…å«åœ¨ with è¯­å¥ä¸­ï¼Œåˆ™å°† `__enter__()` çš„è¿”å›å€¼èµ‹å€¼ç»™å®ƒ6. SUITE è¢«æ‰§è¡Œ7. ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„ `__exit__()` æ–¹æ³•è¢«è°ƒç”¨### åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹#### æ–‡ä»¶æ“ä½œ```python# ä¼ ç»Ÿæ–¹å¼file = open('example.txt', 'r')try:    content = file.read()    print(content)finally:    file.close()# ä½¿ç”¨ with è¯­å¥with open('example.txt', 'r') as file:    content = file.read()    print(content)# æ–‡ä»¶ä¼šè‡ªåŠ¨å…³é—­ï¼Œå³ä½¿å‘ç”Ÿå¼‚å¸¸```#### å¤šä¸ªèµ„æºç®¡ç†```python# åŒæ—¶ç®¡ç†å¤šä¸ªæ–‡ä»¶with open('input.txt', 'r') as infile, open('output.txt', 'w') as outfile:    data = infile.read()    outfile.write(data.upper())# ä¸¤ä¸ªæ–‡ä»¶éƒ½ä¼šè‡ªåŠ¨å…³é—­```### è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨#### åŸºäºç±»çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨```pythonclass FileManager:    def __init__(self, filename, mode):        self.filename = filename        self.mode = mode        self.file = None        def __enter__(self):        print(f\"æ‰“å¼€æ–‡ä»¶: {self.filename}\")        self.file = open(self.filename, self.mode)        return self.file        def __exit__(self, exc_type, exc_val, exc_tb):        print(f\"å…³é—­æ–‡ä»¶: {self.filename}\")        if self.file:            self.file.close()                # è¿”å› False è¡¨ç¤ºä¸æŠ‘åˆ¶å¼‚å¸¸        # è¿”å› True è¡¨ç¤ºæŠ‘åˆ¶å¼‚å¸¸        if exc_type is not None:            print(f\"å‘ç”Ÿå¼‚å¸¸: {exc_type.__name__}: {exc_val}\")        return False# ä½¿ç”¨è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨with FileManager('test.txt', 'w') as f:    f.write('Hello, World!')    # å¦‚æœè¿™é‡Œå‘ç”Ÿå¼‚å¸¸ï¼Œæ–‡ä»¶ä»ä¼šè¢«æ­£ç¡®å…³é—­```#### æ•°æ®åº“è¿æ¥ç®¡ç†å™¨```pythonclass DatabaseConnection:    def __init__(self, host, port, database):        self.host = host        self.port = port        self.database = database        self.connection = None        def __enter__(self):        print(f\"è¿æ¥åˆ°æ•°æ®åº“: {self.host}:{self.port}/{self.database}\")        # è¿™é‡Œåº”è¯¥æ˜¯å®é™…çš„æ•°æ®åº“è¿æ¥ä»£ç         self.connection = f\"connection_to_{self.database}\"        return self.connection        def __exit__(self, exc_type, exc_val, exc_tb):        print(\"å…³é—­æ•°æ®åº“è¿æ¥\")        if self.connection:            # è¿™é‡Œåº”è¯¥æ˜¯å®é™…çš„è¿æ¥å…³é—­ä»£ç             self.connection = None                if exc_type is not None:            print(f\"æ•°æ®åº“æ“ä½œå¼‚å¸¸: {exc_type.__name__}\")            # å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œäº‹åŠ¡å›æ»š            return False  # ä¸æŠ‘åˆ¶å¼‚å¸¸        else:            # å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œäº‹åŠ¡æäº¤            print(\"æ•°æ®åº“æ“ä½œæˆåŠŸ\")            return False# ä½¿ç”¨æ•°æ®åº“è¿æ¥ç®¡ç†å™¨with DatabaseConnection('localhost', 5432, 'mydb') as conn:    print(f\"ä½¿ç”¨è¿æ¥: {conn}\")    # æ‰§è¡Œæ•°æ®åº“æ“ä½œ```### ä½¿ç”¨ contextlib æ¨¡å—#### @contextmanager è£…é¥°å™¨```pythonfrom contextlib import contextmanagerimport time@contextmanagerdef timer():    start_time = time.time()    print(\"å¼€å§‹è®¡æ—¶\")    try:        yield start_time    finally:        end_time = time.time()        print(f\"æ‰§è¡Œæ—¶é—´: {end_time - start_time:.2f} ç§’\")# ä½¿ç”¨è®¡æ—¶å™¨with timer() as start:    time.sleep(1)    print(\"æ‰§è¡Œä¸€äº›è€—æ—¶æ“ä½œ\")```#### ä¸´æ—¶ç›®å½•ç®¡ç†```pythonfrom contextlib import contextmanagerimport tempfileimport shutilimport os@contextmanagerdef temporary_directory():    temp_dir = tempfile.mkdtemp()    print(f\"åˆ›å»ºä¸´æ—¶ç›®å½•: {temp_dir}\")    try:        yield temp_dir    finally:        print(f\"åˆ é™¤ä¸´æ—¶ç›®å½•: {temp_dir}\")        shutil.rmtree(temp_dir)# ä½¿ç”¨ä¸´æ—¶ç›®å½•with temporary_directory() as temp_dir:    # åœ¨ä¸´æ—¶ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶    file_path = os.path.join(temp_dir, 'temp_file.txt')    with open(file_path, 'w') as f:        f.write('ä¸´æ—¶æ–‡ä»¶å†…å®¹')    print(f\"ä¸´æ—¶æ–‡ä»¶åˆ›å»ºåœ¨: {file_path}\")# ä¸´æ—¶ç›®å½•å’Œæ–‡ä»¶ä¼šè‡ªåŠ¨åˆ é™¤```### å¼‚å¸¸å¤„ç†#### å¼‚å¸¸ä¿¡æ¯è·å–```pythonclass ExceptionHandler:    def __enter__(self):        print(\"è¿›å…¥ä¸Šä¸‹æ–‡\")        return self        def __exit__(self, exc_type, exc_val, exc_tb):        print(\"é€€å‡ºä¸Šä¸‹æ–‡\")        if exc_type is not None:            print(f\"å¼‚å¸¸ç±»å‹: {exc_type}\")            print(f\"å¼‚å¸¸å€¼: {exc_val}\")            print(f\"å¼‚å¸¸å›æº¯: {exc_tb}\")            # è¿”å› True æŠ‘åˆ¶å¼‚å¸¸ï¼Œè¿”å› False æˆ– None ä¸æŠ‘åˆ¶            return False        return False# æµ‹è¯•å¼‚å¸¸å¤„ç†with ExceptionHandler():    print(\"æ­£å¸¸æ‰§è¡Œ\")    raise ValueError(\"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å¼‚å¸¸\")    print(\"è¿™è¡Œä¸ä¼šæ‰§è¡Œ\")```#### å¼‚å¸¸æŠ‘åˆ¶ç¤ºä¾‹```pythonclass IgnoreException:    def __init__(self, *exception_types):        self.exception_types = exception_types        def __enter__(self):        return self        def __exit__(self, exc_type, exc_val, exc_tb):        if exc_type is not None:            if issubclass(exc_type, self.exception_types):                print(f\"å¿½ç•¥å¼‚å¸¸: {exc_type.__name__}: {exc_val}\")                return True  # æŠ‘åˆ¶å¼‚å¸¸        return False# ä½¿ç”¨å¼‚å¸¸æŠ‘åˆ¶with IgnoreException(ValueError, TypeError):    print(\"å¼€å§‹æ‰§è¡Œ\")    raise ValueError(\"è¿™ä¸ªå¼‚å¸¸ä¼šè¢«å¿½ç•¥\")    print(\"è¿™è¡Œä¸ä¼šæ‰§è¡Œ\")print(\"ç¨‹åºç»§ç»­æ‰§è¡Œ\")```## å®é™…åº”ç”¨åœºæ™¯### 1. çº¿ç¨‹é”ç®¡ç†```pythonimport threadingfrom contextlib import contextmanagerclass ThreadSafeLock:    def __init__(self):        self._lock = threading.Lock()        def __enter__(self):        print(\"è·å–é”\")        self._lock.acquire()        return self        def __exit__(self, exc_type, exc_val, exc_tb):        print(\"é‡Šæ”¾é”\")        self._lock.release()        return False# ä½¿ç”¨çº¿ç¨‹é”lock = ThreadSafeLock()shared_resource = 0def worker():    global shared_resource    with lock:        # ä¸´ç•ŒåŒºä»£ç         temp = shared_resource        temp += 1        shared_resource = temp        print(f\"Worker updated resource to: {shared_resource}\")# åˆ›å»ºå¤šä¸ªçº¿ç¨‹threads = []for i in range(3):    t = threading.Thread(target=worker)    threads.append(t)    t.start()for t in threads:    t.join()```### 2. é…ç½®ç®¡ç†```pythonfrom contextlib import contextmanagerclass ConfigManager:    def __init__(self):        self.config = {'debug': False, 'log_level': 'INFO'}        @contextmanager    def temporary_config(self, **kwargs):        # ä¿å­˜åŸå§‹é…ç½®        original_config = self.config.copy()                # åº”ç”¨ä¸´æ—¶é…ç½®        self.config.update(kwargs)        print(f\"åº”ç”¨ä¸´æ—¶é…ç½®: {kwargs}\")                try:            yield self.config        finally:            # æ¢å¤åŸå§‹é…ç½®            self.config = original_config            print(\"æ¢å¤åŸå§‹é…ç½®\")# ä½¿ç”¨é…ç½®ç®¡ç†å™¨config_manager = ConfigManager()print(f\"åŸå§‹é…ç½®: {config_manager.config}\")with config_manager.temporary_config(debug=True, log_level='DEBUG'):    print(f\"ä¸´æ—¶é…ç½®: {config_manager.config}\")    # åœ¨è¿™ä¸ªå—ä¸­ä½¿ç”¨è°ƒè¯•é…ç½®print(f\"æ¢å¤åé…ç½®: {config_manager.config}\")```### 3. æ€§èƒ½ç›‘æ§```pythonfrom contextlib import contextmanagerimport timeimport psutilimport os@contextmanagerdef performance_monitor(operation_name):    # è®°å½•å¼€å§‹çŠ¶æ€    start_time = time.time()    process = psutil.Process(os.getpid())    start_memory = process.memory_info().rss / 1024 / 1024  # MB        print(f\"å¼€å§‹ç›‘æ§æ“ä½œ: {operation_name}\")    print(f\"åˆå§‹å†…å­˜ä½¿ç”¨: {start_memory:.2f} MB\")        try:        yield    finally:        # è®°å½•ç»“æŸçŠ¶æ€        end_time = time.time()        end_memory = process.memory_info().rss / 1024 / 1024  # MB                execution_time = end_time - start_time        memory_diff = end_memory - start_memory                print(f\"æ“ä½œå®Œæˆ: {operation_name}\")        print(f\"æ‰§è¡Œæ—¶é—´: {execution_time:.2f} ç§’\")        print(f\"å†…å­˜å˜åŒ–: {memory_diff:+.2f} MB\")        print(f\"æœ€ç»ˆå†…å­˜ä½¿ç”¨: {end_memory:.2f} MB\")# ä½¿ç”¨æ€§èƒ½ç›‘æ§with performance_monitor(\"å¤§æ•°æ®å¤„ç†\"):    # æ¨¡æ‹Ÿä¸€äº›è€—æ—¶å’Œå†…å­˜å¯†é›†çš„æ“ä½œ    data = [i ** 2 for i in range(1000000)]    time.sleep(0.5)    result = sum(data)    print(f\"è®¡ç®—ç»“æœ: {result}\")```### 4. HTTP è¯·æ±‚ä¼šè¯ç®¡ç†```pythonfrom contextlib import contextmanagerimport requests@contextmanagerdef http_session(base_url, headers=None, timeout=30):    session = requests.Session()        if headers:        session.headers.update(headers)        # è®¾ç½®åŸºç¡€ URL    session.base_url = base_url        print(f\"åˆ›å»º HTTP ä¼šè¯: {base_url}\")        try:        yield session    finally:        session.close()        print(\"å…³é—­ HTTP ä¼šè¯\")# ä½¿ç”¨ HTTP ä¼šè¯ç®¡ç†headers = {    'User-Agent': 'MyApp/1.0',    'Accept': 'application/json'}with http_session('https://api.example.com', headers=headers) as session:    # åœ¨è¿™ä¸ªå—ä¸­ä½¿ç”¨ä¼šè¯è¿›è¡Œå¤šä¸ªè¯·æ±‚    # response1 = session.get('/users')    # response2 = session.post('/data', json={'key': 'value'})    print(\"æ‰§è¡Œ HTTP è¯·æ±‚...\")```## å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ### 1. __exit__ æ–¹æ³•çš„è¿”å›å€¼```pythonclass ExampleContext:    def __enter__(self):        return self        def __exit__(self, exc_type, exc_val, exc_tb):        if exc_type is not None:            print(f\"æ•è·åˆ°å¼‚å¸¸: {exc_val}\")            # è¿”å› True ä¼šæŠ‘åˆ¶å¼‚å¸¸            # è¿”å› False æˆ– None ä¼šä¼ æ’­å¼‚å¸¸            return True  # æŠ‘åˆ¶å¼‚å¸¸        return False# å¼‚å¸¸è¢«æŠ‘åˆ¶ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œwith ExampleContext():    raise ValueError(\"æµ‹è¯•å¼‚å¸¸\")    print(\"ç¨‹åºç»§ç»­æ‰§è¡Œ\")  # è¿™è¡Œä¼šè¢«æ‰§è¡Œ```### 2. åµŒå¥—ä¸Šä¸‹æ–‡ç®¡ç†å™¨```python# æ–¹æ³•1ï¼šåµŒå¥— with è¯­å¥with open('file1.txt', 'r') as f1:    with open('file2.txt', 'w') as f2:        data = f1.read()        f2.write(data.upper())# æ–¹æ³•2ï¼šä½¿ç”¨é€—å·åˆ†éš”ï¼ˆæ¨èï¼‰with open('file1.txt', 'r') as f1, open('file2.txt', 'w') as f2:    data = f1.read()    f2.write(data.upper())# æ–¹æ³•3ï¼šä½¿ç”¨ ExitStackï¼ˆå¤æ‚åœºæ™¯ï¼‰from contextlib import ExitStackwith ExitStack() as stack:    f1 = stack.enter_context(open('file1.txt', 'r'))    f2 = stack.enter_context(open('file2.txt', 'w'))        data = f1.read()    f2.write(data.upper())```### 3. èµ„æºæ¸…ç†çš„é‡è¦æ€§```python# é”™è¯¯ç¤ºä¾‹ï¼šæ²¡æœ‰æ­£ç¡®æ¸…ç†èµ„æºclass BadResource:    def __init__(self, name):        self.name = name        self.resource = f\"resource_{name}\"        def __enter__(self):        print(f\"è·å–èµ„æº: {self.resource}\")        return self.resource        def __exit__(self, exc_type, exc_val, exc_tb):        # å¿˜è®°æ¸…ç†èµ„æº        pass# æ­£ç¡®ç¤ºä¾‹ï¼šç¡®ä¿èµ„æºæ¸…ç†class GoodResource:    def __init__(self, name):        self.name = name        self.resource = None        def __enter__(self):        self.resource = f\"resource_{self.name}\"        print(f\"è·å–èµ„æº: {self.resource}\")        return self.resource        def __exit__(self, exc_type, exc_val, exc_tb):        if self.resource:            print(f\"æ¸…ç†èµ„æº: {self.resource}\")            self.resource = None        return False```## ç›¸å…³å‡½æ•°ä¸æ¨¡å—### å†…ç½®å‡½æ•°- `open()` - æ–‡ä»¶æ“ä½œçš„å†…ç½®ä¸Šä¸‹æ–‡ç®¡ç†å™¨- `iter()` - æŸäº›è¿­ä»£å™¨ä¹Ÿæ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†åè®®### æ ‡å‡†åº“æ¨¡å—- `contextlib` - ä¸Šä¸‹æ–‡ç®¡ç†å·¥å…·  - `@contextmanager` - è£…é¥°å™¨ï¼Œç®€åŒ–ä¸Šä¸‹æ–‡ç®¡ç†å™¨åˆ›å»º  - `ExitStack` - åŠ¨æ€ç®¡ç†å¤šä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨  - `closing()` - ä¸ºæœ‰ close() æ–¹æ³•çš„å¯¹è±¡æä¾›ä¸Šä¸‹æ–‡ç®¡ç†  - `suppress()` - æŠ‘åˆ¶æŒ‡å®šå¼‚å¸¸- `threading` - çº¿ç¨‹é”ç­‰åŒæ­¥åŸè¯­éƒ½æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†- `multiprocessing` - è¿›ç¨‹é”ç­‰ä¹Ÿæ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†### ç¬¬ä¸‰æ–¹åº“- `requests` - HTTP ä¼šè¯ç®¡ç†- `sqlite3` - æ•°æ®åº“è¿æ¥å’Œäº‹åŠ¡ç®¡ç†- `psycopg2` - PostgreSQL æ•°æ®åº“è¿æ¥ç®¡ç†## æ‰©å±•é˜…è¯»- [PEP 343 - The \"with\" Statement](https://www.python.org/dev/peps/pep-0343/)- [Python å®˜æ–¹æ–‡æ¡£ - with è¯­å¥](https://docs.python.org/3/reference/compound_stmts.html#the-with-statement)- [Python å®˜æ–¹æ–‡æ¡£ - contextlib æ¨¡å—](https://docs.python.org/3/library/contextlib.html)- [ä¸Šä¸‹æ–‡ç®¡ç†å™¨å’Œ with è¯­å¥](https://docs.python.org/3/library/stdtypes.html#context-manager-types)## ç›¸å…³æ ‡ç­¾`Python` `ä¸Šä¸‹æ–‡ç®¡ç†å™¨` `èµ„æºç®¡ç†` `å¼‚å¸¸å¤„ç†` `withè¯­å¥` `contextlib` `æ–‡ä»¶æ“ä½œ` `å†…å­˜ç®¡ç†`",
        "url": "/docs/basics/with/",
        "category": "é¡µé¢",
        "tags": []
      }
      
    
  
    
      ,
      {
        "title": "yieldå…³é”®å­—",
        "content": "# yieldå…³é”®å­—## æ¦‚è¿°`yield` æ˜¯ Python ä¸­ç”¨äºåˆ›å»ºç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰çš„å…³é”®å­—ã€‚ä¸ `return` ä¸åŒï¼Œ`yield` ä¼šæš‚åœå‡½æ•°çš„æ‰§è¡Œå¹¶è¿”å›ä¸€ä¸ªå€¼ï¼Œå½“å†æ¬¡è°ƒç”¨æ—¶ä¼šä»æš‚åœçš„åœ°æ–¹ç»§ç»­æ‰§è¡Œã€‚è¿™ç§æœºåˆ¶ä½¿å¾—ç”Ÿæˆå™¨èƒ½å¤ŸæŒ‰éœ€äº§ç”Ÿæ•°æ®ï¼Œå®ç°å†…å­˜é«˜æ•ˆçš„è¿­ä»£ã€‚## å­¦ä¹ ç›®æ ‡é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å°†æŒæ¡ï¼š- yield å…³é”®å­—çš„åŸºæœ¬è¯­æ³•å’Œå·¥ä½œåŸç†- ç”Ÿæˆå™¨å‡½æ•°çš„åˆ›å»ºå’Œä½¿ç”¨- ç”Ÿæˆå™¨è¡¨è¾¾å¼çš„è¯­æ³•- yield from è¯­å¥çš„ä½¿ç”¨- åç¨‹çš„åŸºæœ¬æ¦‚å¿µå’Œåº”ç”¨- ç”Ÿæˆå™¨åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨åœºæ™¯## å‰ç½®çŸ¥è¯†- Python åŸºç¡€è¯­æ³•- å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨- è¿­ä»£å™¨å’Œå¯è¿­ä»£å¯¹è±¡çš„æ¦‚å¿µ- å¼‚å¸¸å¤„ç†æœºåˆ¶## è¯¦ç»†å†…å®¹### yield åŸºæœ¬è¯­æ³•#### ç®€å•ç”Ÿæˆå™¨```pythondef simple_generator():    print(\"å¼€å§‹æ‰§è¡Œ\")    yield 1    print(\"ç¬¬ä¸€æ¬¡æš‚åœåç»§ç»­\")    yield 2    print(\"ç¬¬äºŒæ¬¡æš‚åœåç»§ç»­\")    yield 3    print(\"ç”Ÿæˆå™¨ç»“æŸ\")# åˆ›å»ºç”Ÿæˆå™¨å¯¹è±¡gen = simple_generator()print(f\"ç”Ÿæˆå™¨å¯¹è±¡: {gen}\")# é€æ­¥è·å–å€¼print(f\"ç¬¬ä¸€ä¸ªå€¼: {next(gen)}\")print(f\"ç¬¬äºŒä¸ªå€¼: {next(gen)}\")print(f\"ç¬¬ä¸‰ä¸ªå€¼: {next(gen)}\")# å°è¯•è·å–ä¸‹ä¸€ä¸ªå€¼ä¼šå¼•å‘ StopIterationtry:    next(gen)except StopIteration:    print(\"ç”Ÿæˆå™¨å·²è€—å°½\")```#### å¸¦å‚æ•°çš„ç”Ÿæˆå™¨```pythondef countdown(n):    \"\"\"å€’è®¡æ—¶ç”Ÿæˆå™¨\"\"\"    print(f\"å¼€å§‹å€’è®¡æ—¶ä» {n}\")    while n > 0:        yield n        n -= 1    print(\"å€’è®¡æ—¶ç»“æŸ\")# ä½¿ç”¨ç”Ÿæˆå™¨for num in countdown(5):    print(f\"å€’è®¡æ—¶: {num}\")print(\"\\nä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼å¯¹æ¯”:\")# ç”Ÿæˆå™¨è¡¨è¾¾å¼gen_expr = (x * 2 for x in range(5))print(f\"ç”Ÿæˆå™¨è¡¨è¾¾å¼: {gen_expr}\")print(f\"ç”Ÿæˆå™¨å†…å®¹: {list(gen_expr)}\")```#### æ— é™ç”Ÿæˆå™¨```pythondef fibonacci():    \"\"\"æ–æ³¢é‚£å¥‘æ•°åˆ—ç”Ÿæˆå™¨\"\"\"    a, b = 0, 1    while True:        yield a        a, b = b, a + bdef prime_numbers():    \"\"\"è´¨æ•°ç”Ÿæˆå™¨\"\"\"    def is_prime(n):        if n = 10:        break    print(num, end=\" \")print()print(\"\\nå‰10ä¸ªè´¨æ•°:\")prime_gen = prime_numbers()for i, prime in enumerate(prime_gen):    if i >= 10:        break    print(prime, end=\" \")print()```### ç”Ÿæˆå™¨çš„é«˜çº§ç‰¹æ€§#### send() æ–¹æ³•```pythondef interactive_generator():    \"\"\"å¯ä»¥æ¥æ”¶å¤–éƒ¨è¾“å…¥çš„ç”Ÿæˆå™¨\"\"\"    print(\"ç”Ÿæˆå™¨å¯åŠ¨\")    value = yield \"è¯·å‘é€ä¸€ä¸ªå€¼\"        while value is not None:        print(f\"æ”¶åˆ°å€¼: {value}\")        if isinstance(value, str):            response = f\"å¤„ç†å­—ç¬¦ä¸²: {value.upper()}\"        elif isinstance(value, (int, float)):            response = f\"å¤„ç†æ•°å­—: {value * 2}\"        else:            response = f\"å¤„ç†å…¶ä»–ç±»å‹: {type(value).__name__}\"                value = yield response        print(\"ç”Ÿæˆå™¨ç»“æŸ\")# ä½¿ç”¨ send() æ–¹æ³•gen = interactive_generator()print(next(gen))  # å¯åŠ¨ç”Ÿæˆå™¨print(gen.send(\"hello\"))print(gen.send(42))print(gen.send([1, 2, 3]))# ç»“æŸç”Ÿæˆå™¨try:    gen.send(None)except StopIteration:    print(\"ç”Ÿæˆå™¨å·²ç»“æŸ\")```#### throw() å’Œ close() æ–¹æ³•```pythondef robust_generator():    \"\"\"å…·æœ‰å¼‚å¸¸å¤„ç†çš„ç”Ÿæˆå™¨\"\"\"    try:        print(\"ç”Ÿæˆå™¨å¼€å§‹\")        yield 1                print(\"ç»§ç»­æ‰§è¡Œ\")        yield 2                print(\"å³å°†ç»“æŸ\")        yield 3            except ValueError as e:        print(f\"æ•è·åˆ° ValueError: {e}\")        yield f\"é”™è¯¯å¤„ç†: {e}\"        except GeneratorExit:        print(\"ç”Ÿæˆå™¨è¢«å…³é—­\")        # ä¸èƒ½åœ¨ GeneratorExit å¤„ç†ä¸­ä½¿ç”¨ yield        finally:        print(\"ç”Ÿæˆå™¨æ¸…ç†\")# æµ‹è¯•å¼‚å¸¸å¤„ç†gen = robust_generator()print(f\"ç¬¬ä¸€ä¸ªå€¼: {next(gen)}\")# å‘ç”Ÿæˆå™¨æŠ›å‡ºå¼‚å¸¸try:    result = gen.throw(ValueError, \"æµ‹è¯•å¼‚å¸¸\")    print(f\"å¼‚å¸¸å¤„ç†ç»“æœ: {result}\")except StopIteration:    print(\"ç”Ÿæˆå™¨åœ¨å¼‚å¸¸å¤„ç†åç»“æŸ\")# æµ‹è¯•å…³é—­ç”Ÿæˆå™¨gen2 = robust_generator()print(f\"ç¬¬ä¸€ä¸ªå€¼: {next(gen2)}\")gen2.close()  # å…³é—­ç”Ÿæˆå™¨```### yield from è¯­å¥#### åŸºæœ¬ç”¨æ³•```pythondef sub_generator():    \"\"\"å­ç”Ÿæˆå™¨\"\"\"    yield \"æ¥è‡ªå­ç”Ÿæˆå™¨çš„å€¼1\"    yield \"æ¥è‡ªå­ç”Ÿæˆå™¨çš„å€¼2\"    yield \"æ¥è‡ªå­ç”Ÿæˆå™¨çš„å€¼3\"    return \"å­ç”Ÿæˆå™¨è¿”å›å€¼\"def delegating_generator():    \"\"\"å§”æ‰˜ç”Ÿæˆå™¨\"\"\"    yield \"å¼€å§‹\"        # ä½¿ç”¨ yield from å§”æ‰˜ç»™å­ç”Ÿæˆå™¨    result = yield from sub_generator()    print(f\"å­ç”Ÿæˆå™¨è¿”å›: {result}\")        yield \"ç»“æŸ\"# ä½¿ç”¨å§”æ‰˜ç”Ÿæˆå™¨for value in delegating_generator():    print(value)```#### å¤æ‚çš„ yield from ç¤ºä¾‹```pythondef flatten(nested_list):    \"\"\"æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨\"\"\"    for item in nested_list:        if isinstance(item, list):            yield from flatten(item)  # é€’å½’å¤„ç†åµŒå¥—åˆ—è¡¨        else:            yield itemdef chain_generators(*generators):    \"\"\"é“¾æ¥å¤šä¸ªç”Ÿæˆå™¨\"\"\"    for gen in generators:        yield from gen# æµ‹è¯•æ‰å¹³åŒ–nested = [1, [2, 3], [4, [5, 6]], 7]flat_list = list(flatten(nested))print(f\"æ‰å¹³åŒ–ç»“æœ: {flat_list}\")# æµ‹è¯•ç”Ÿæˆå™¨é“¾æ¥def gen1():    yield 1    yield 2def gen2():    yield 3    yield 4def gen3():    yield 5    yield 6chained = chain_generators(gen1(), gen2(), gen3())print(f\"é“¾æ¥ç»“æœ: {list(chained)}\")```### åç¨‹åŸºç¡€#### ç®€å•åç¨‹```pythondef simple_coroutine():    \"\"\"ç®€å•åç¨‹ç¤ºä¾‹\"\"\"    print(\"åç¨‹å¯åŠ¨\")        while True:        value = yield        if value is None:            break        print(f\"åç¨‹å¤„ç†: {value}\")        print(\"åç¨‹ç»“æŸ\")def data_processor():    \"\"\"æ•°æ®å¤„ç†åç¨‹\"\"\"    total = 0    count = 0        while True:        value = yield        if value is None:            break                if isinstance(value, (int, float)):            total += value            count += 1            avg = total / count            print(f\"æ¥æ”¶: {value}, æ€»å’Œ: {total}, å¹³å‡å€¼: {avg:.2f}\")        else:            print(f\"å¿½ç•¥éæ•°å­—å€¼: {value}\")# ä½¿ç”¨åç¨‹coro = data_processor()next(coro)  # å¯åŠ¨åç¨‹# å‘é€æ•°æ®coro.send(10)coro.send(20)coro.send(\"hello\")  # éæ•°å­—å€¼coro.send(30)coro.send(None)  # ç»“æŸåç¨‹```#### åç¨‹è£…é¥°å™¨```pythondef coroutine_decorator(func):    \"\"\"åç¨‹è£…é¥°å™¨ï¼Œè‡ªåŠ¨å¯åŠ¨åç¨‹\"\"\"    def wrapper(*args, **kwargs):        gen = func(*args, **kwargs)        next(gen)  # è‡ªåŠ¨å¯åŠ¨        return gen    return wrapper@coroutine_decoratordef auto_started_coroutine():    \"\"\"è‡ªåŠ¨å¯åŠ¨çš„åç¨‹\"\"\"    print(\"åç¨‹å·²è‡ªåŠ¨å¯åŠ¨\")        while True:        value = yield        if value is None:            break        print(f\"å¤„ç†: {value}\")# ä½¿ç”¨è‡ªåŠ¨å¯åŠ¨çš„åç¨‹coro = auto_started_coroutine()coro.send(\"ç¬¬ä¸€ä¸ªå€¼\")coro.send(\"ç¬¬äºŒä¸ªå€¼\")coro.send(None)```## å®é™…åº”ç”¨åœºæ™¯### 1. å¤§æ–‡ä»¶å¤„ç†```pythondef read_large_file(filename, chunk_size=1024):    \"\"\"é€å—è¯»å–å¤§æ–‡ä»¶\"\"\"    try:        with open(filename, 'r', encoding='utf-8') as file:            while True:                chunk = file.read(chunk_size)                if not chunk:                    break                yield chunk    except FileNotFoundError:        print(f\"æ–‡ä»¶ {filename} ä¸å­˜åœ¨\")        returndef process_log_file(filename):    \"\"\"å¤„ç†æ—¥å¿—æ–‡ä»¶\"\"\"    line_count = 0    error_count = 0        try:        with open(filename, 'r', encoding='utf-8') as file:            for line in file:                line_count += 1                                # å¤„ç†æ¯ä¸€è¡Œ                if 'ERROR' in line.upper():                    error_count += 1                    yield {                        'line_number': line_count,                        'content': line.strip(),                        'type': 'error'                    }                elif 'WARNING' in line.upper():                    yield {                        'line_number': line_count,                        'content': line.strip(),                        'type': 'warning'                    }                                # æ¯å¤„ç†1000è¡ŒæŠ¥å‘Šä¸€æ¬¡è¿›åº¦                if line_count % 1000 == 0:                    yield {                        'line_number': line_count,                        'content': f\"å·²å¤„ç† {line_count} è¡Œï¼Œå‘ç° {error_count} ä¸ªé”™è¯¯\",                        'type': 'progress'                    }        except FileNotFoundError:        yield {            'line_number': 0,            'content': f\"æ–‡ä»¶ {filename} ä¸å­˜åœ¨\",            'type': 'error'        }# åˆ›å»ºç¤ºä¾‹æ—¥å¿—æ–‡ä»¶sample_log = \"\"\"INFO: åº”ç”¨å¯åŠ¨DEBUG: è¿æ¥æ•°æ®åº“ERROR: æ•°æ®åº“è¿æ¥å¤±è´¥WARNING: é‡è¯•è¿æ¥INFO: è¿æ¥æˆåŠŸERROR: æŸ¥è¯¢è¶…æ—¶INFO: åº”ç”¨å…³é—­\"\"\"with open('sample.log', 'w', encoding='utf-8') as f:    f.write(sample_log)# å¤„ç†æ—¥å¿—æ–‡ä»¶print(\"å¤„ç†æ—¥å¿—æ–‡ä»¶:\")for event in process_log_file('sample.log'):    print(f\"[{event['type'].upper()}] è¡Œ {event['line_number']}: {event['content']}\")```### 2. æ•°æ®æµå¤„ç†```pythonclass DataPipeline:    \"\"\"æ•°æ®å¤„ç†ç®¡é“\"\"\"        def __init__(self):        self.processors = []        def add_processor(self, processor):        \"\"\"æ·»åŠ å¤„ç†å™¨\"\"\"        self.processors.append(processor)        def process(self, data_stream):        \"\"\"å¤„ç†æ•°æ®æµ\"\"\"        current_stream = data_stream                for processor in self.processors:            current_stream = processor(current_stream)                yield from current_streamdef data_source(count=10):    \"\"\"æ•°æ®æºç”Ÿæˆå™¨\"\"\"    for i in range(count):        yield {'id': i, 'value': i * 2, 'status': 'raw'}def filter_processor(data_stream):    \"\"\"è¿‡æ»¤å¤„ç†å™¨\"\"\"    for item in data_stream:        if item['value'] % 4 == 0:  # åªä¿ç•™å€¼èƒ½è¢«4æ•´é™¤çš„é¡¹            yield itemdef transform_processor(data_stream):    \"\"\"è½¬æ¢å¤„ç†å™¨\"\"\"    for item in data_stream:        item['value'] = item['value'] ** 2  # å¹³æ–¹        item['status'] = 'transformed'        yield itemdef validate_processor(data_stream):    \"\"\"éªŒè¯å¤„ç†å™¨\"\"\"    for item in data_stream:        if item['value']  {new_state.__name__}\")                        self.state = new_state                        state_gen = self.state(self.context)                        next(state_gen)  # å¯åŠ¨æ–°çŠ¶æ€                                except StopIteration:                    print(\"çŠ¶æ€æœºç»“æŸ\")                    break                except StopIteration:            print(\"çŠ¶æ€æœºç»“æŸ\")def idle_state(context):    \"\"\"ç©ºé—²çŠ¶æ€\"\"\"    print(\"è¿›å…¥ç©ºé—²çŠ¶æ€\")        while True:        event = yield        print(f\"ç©ºé—²çŠ¶æ€æ”¶åˆ°äº‹ä»¶: {event}\")                if event == 'start':            yield working_state        elif event == 'shutdown':            yield shutdown_statedef working_state(context):    \"\"\"å·¥ä½œçŠ¶æ€\"\"\"    print(\"è¿›å…¥å·¥ä½œçŠ¶æ€\")    context['work_count'] = context.get('work_count', 0)        while True:        event = yield        print(f\"å·¥ä½œçŠ¶æ€æ”¶åˆ°äº‹ä»¶: {event}\")                if event == 'work':            context['work_count'] += 1            print(f\"å®Œæˆå·¥ä½œï¼Œæ€»è®¡: {context['work_count']}\")        elif event == 'pause':            yield paused_state        elif event == 'stop':            yield idle_state        elif event == 'shutdown':            yield shutdown_statedef paused_state(context):    \"\"\"æš‚åœçŠ¶æ€\"\"\"    print(\"è¿›å…¥æš‚åœçŠ¶æ€\")        while True:        event = yield        print(f\"æš‚åœçŠ¶æ€æ”¶åˆ°äº‹ä»¶: {event}\")                if event == 'resume':            yield working_state        elif event == 'stop':            yield idle_state        elif event == 'shutdown':            yield shutdown_statedef shutdown_state(context):    \"\"\"å…³é—­çŠ¶æ€\"\"\"    print(\"è¿›å…¥å…³é—­çŠ¶æ€\")    print(f\"æœ€ç»ˆå·¥ä½œè®¡æ•°: {context.get('work_count', 0)}\")    return  # ç»“æŸçŠ¶æ€æœº# ä½¿ç”¨çŠ¶æ€æœºevents = ['start', 'work', 'work', 'pause', 'resume', 'work', 'stop', 'shutdown']sm = StateMachine()sm.run(idle_state, events)```### 4. ç½‘ç»œçˆ¬è™«```pythonimport timeimport randomdef url_generator(base_urls, max_depth=2):    \"\"\"URL ç”Ÿæˆå™¨\"\"\"    visited = set()    queue = [(url, 0) for url in base_urls]        while queue:        url, depth = queue.pop(0)                if url in visited or depth > max_depth:            continue                visited.add(url)        yield url, depth                # æ¨¡æ‹Ÿå‘ç°æ–°é“¾æ¥        if depth = 10:  # é™åˆ¶çˆ¬å–æ•°é‡        break```## å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ### 1. ç”Ÿæˆå™¨çš„ä¸€æ¬¡æ€§ä½¿ç”¨```python# âœ— é”™è¯¯ï¼šå°è¯•å¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªç”Ÿæˆå™¨def bad_example():    gen = (x * 2 for x in range(5))        print(\"ç¬¬ä¸€æ¬¡ä½¿ç”¨:\")    for value in gen:        print(value)        print(\"ç¬¬äºŒæ¬¡ä½¿ç”¨:\")    for value in gen:  # è¿™é‡Œä¸ä¼šè¾“å‡ºä»»ä½•å†…å®¹        print(value)# âœ“ æ­£ç¡®ï¼šæ¯æ¬¡åˆ›å»ºæ–°çš„ç”Ÿæˆå™¨def good_example():    def create_generator():        return (x * 2 for x in range(5))        print(\"ç¬¬ä¸€æ¬¡ä½¿ç”¨:\")    for value in create_generator():        print(value)        print(\"ç¬¬äºŒæ¬¡ä½¿ç”¨:\")    for value in create_generator():        print(value)bad_example()print(\"\\n\" + \"=\"*30 + \"\\n\")good_example()```### 2. å†…å­˜æ•ˆç‡å¯¹æ¯”```pythonimport sysdef memory_comparison():    \"\"\"å†…å­˜ä½¿ç”¨å¯¹æ¯”\"\"\"        # åˆ—è¡¨æ–¹å¼ï¼ˆå ç”¨å¤§é‡å†…å­˜ï¼‰    large_list = [x * 2 for x in range(1000000)]    print(f\"åˆ—è¡¨å¤§å°: {sys.getsizeof(large_list)} bytes\")        # ç”Ÿæˆå™¨æ–¹å¼ï¼ˆå ç”¨å¾ˆå°‘å†…å­˜ï¼‰    large_gen = (x * 2 for x in range(1000000))    print(f\"ç”Ÿæˆå™¨å¤§å°: {sys.getsizeof(large_gen)} bytes\")        # ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†å¤§æ•°æ®    def process_large_data():        total = 0        count = 0                for value in large_gen:            total += value            count += 1                        if count >= 1000:  # åªå¤„ç†å‰1000ä¸ª                break                return total / count        avg = process_large_data()    print(f\"å‰1000ä¸ªæ•°çš„å¹³å‡å€¼: {avg}\")memory_comparison()```### 3. å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ```pythondef safe_generator(data):    \"\"\"å®‰å…¨çš„ç”Ÿæˆå™¨ï¼ŒåŒ…å«å¼‚å¸¸å¤„ç†\"\"\"    try:        for item in data:            if item is None:                continue                        try:                # å°è¯•å¤„ç†æ¯ä¸ªé¡¹ç›®                if isinstance(item, str):                    yield item.upper()                elif isinstance(item, (int, float)):                    yield item * 2                else:                    yield f\"æœªçŸ¥ç±»å‹: {type(item).__name__}\"                        except Exception as e:                # å¤„ç†å•ä¸ªé¡¹ç›®çš„å¼‚å¸¸                yield f\"å¤„ç†é”™è¯¯: {e}\"        except Exception as e:        # å¤„ç†æ•´ä½“å¼‚å¸¸        print(f\"ç”Ÿæˆå™¨å¼‚å¸¸: {e}\")        yield \"ç”Ÿæˆå™¨å‘ç”Ÿé”™è¯¯\"        finally:        print(\"ç”Ÿæˆå™¨æ¸…ç†\")# æµ‹è¯•å¼‚å¸¸å¤„ç†test_data = [\"hello\", 42, None, [1, 2, 3], \"world\"]print(\"å®‰å…¨ç”Ÿæˆå™¨æµ‹è¯•:\")for result in safe_generator(test_data):    print(result)```### 4. æ€§èƒ½ä¼˜åŒ–æŠ€å·§```pythonimport timefrom functools import wrapsdef timing_decorator(func):    \"\"\"è®¡æ—¶è£…é¥°å™¨\"\"\"    @wraps(func)    def wrapper(*args, **kwargs):        start = time.time()        result = func(*args, **kwargs)        end = time.time()        print(f\"{func.__name__} æ‰§è¡Œæ—¶é—´: {end - start:.4f} ç§’\")        return result    return wrapper@timing_decoratordef list_approach(n):    \"\"\"åˆ—è¡¨æ–¹å¼\"\"\"    return [x * 2 for x in range(n) if x % 2 == 0]@timing_decoratordef generator_approach(n):    \"\"\"ç”Ÿæˆå™¨æ–¹å¼\"\"\"    return list(x * 2 for x in range(n) if x % 2 == 0)@timing_decoratordef lazy_generator_approach(n):    \"\"\"æƒ°æ€§ç”Ÿæˆå™¨æ–¹å¼\"\"\"    def gen():        for x in range(n):            if x % 2 == 0:                yield x * 2    return gen()# æ€§èƒ½æµ‹è¯•n = 100000print(\"æ€§èƒ½å¯¹æ¯”æµ‹è¯•:\")list_result = list_approach(n)generator_result = generator_approach(n)lazy_gen = lazy_generator_approach(n)print(f\"\\nç»“æœé•¿åº¦å¯¹æ¯”:\")print(f\"åˆ—è¡¨é•¿åº¦: {len(list_result)}\")print(f\"ç”Ÿæˆå™¨è½¬åˆ—è¡¨é•¿åº¦: {len(generator_result)}\")print(f\"æƒ°æ€§ç”Ÿæˆå™¨å‰10ä¸ª: {[next(lazy_gen) for _ in range(10)]}\")```## ç›¸å…³å‡½æ•°ä¸æ¨¡å—### å†…ç½®å‡½æ•°- `next()` - è·å–ç”Ÿæˆå™¨çš„ä¸‹ä¸€ä¸ªå€¼- `iter()` - åˆ›å»ºè¿­ä»£å™¨- `enumerate()` - æšä¸¾è¿­ä»£å™¨- `zip()` - å¹¶è¡Œè¿­ä»£å¤šä¸ªåºåˆ—### æ ‡å‡†åº“æ¨¡å—- `itertools` - è¿­ä»£å™¨å·¥å…·ï¼Œæä¾›å¼ºå¤§çš„ç”Ÿæˆå™¨åŠŸèƒ½- `functools` - å‡½æ•°å·¥å…·ï¼ŒåŒ…å«ç”Ÿæˆå™¨ç›¸å…³è£…é¥°å™¨- `collections.abc` - æŠ½è±¡åŸºç±»ï¼Œå®šä¹‰ç”Ÿæˆå™¨æ¥å£- `asyncio` - å¼‚æ­¥ç¼–ç¨‹ï¼ŒåŸºäºåç¨‹### ç¬¬ä¸‰æ–¹åº“- `more-itertools` - æ‰©å±•çš„è¿­ä»£å™¨å·¥å…·- `toolz` - å‡½æ•°å¼ç¼–ç¨‹å·¥å…·- `asyncio` - å¼‚æ­¥ç”Ÿæˆå™¨æ”¯æŒ## æ‰©å±•é˜…è¯»- [Python å®˜æ–¹æ–‡æ¡£ - ç”Ÿæˆå™¨](https://docs.python.org/3/tutorial/classes.html#generators)- [PEP 255 - Simple Generators](https://www.python.org/dev/peps/pep-0255/)- [PEP 342 - Coroutines via Enhanced Generators](https://www.python.org/dev/peps/pep-0342/)- [PEP 380 - Syntax for Delegating to a Subgenerator](https://www.python.org/dev/peps/pep-0380/)- [Python å®˜æ–¹æ–‡æ¡£ - itertools æ¨¡å—](https://docs.python.org/3/library/itertools.html)## ç›¸å…³æ ‡ç­¾`Python` `ç”Ÿæˆå™¨` `yield` `è¿­ä»£å™¨` `åç¨‹` `å†…å­˜ä¼˜åŒ–` `æƒ°æ€§æ±‚å€¼` `å‡½æ•°å¼ç¼–ç¨‹` `æ•°æ®æµå¤„ç†`",
        "url": "/docs/basics/yield/",
        "category": "é¡µé¢",
        "tags": []
      }
      
    
  
    
      ,
      {
        "title": "zip() - æ‰“åŒ…å‡½æ•°",
        "content": "# zip() - æ‰“åŒ…å‡½æ•°## ğŸ“ æ¦‚è¿°`zip()` æ˜¯Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºå°†å¤šä¸ªå¯è¿­ä»£å¯¹è±¡çš„å¯¹åº”å…ƒç´ æ‰“åŒ…æˆå…ƒç»„ã€‚å®ƒè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¯ä»¥åŒæ—¶éå†å¤šä¸ªåºåˆ—ï¼Œåœ¨æ•°æ®å¤„ç†å’Œå¹¶è¡Œè¿­ä»£ä¸­éå¸¸æœ‰ç”¨ã€‚1## ğŸ¯ å­¦ä¹ ç›®æ ‡- æŒæ¡zip()å‡½æ•°çš„åŸºæœ¬ç”¨æ³•- ç†è§£zip()çš„è¡Œä¸ºç‰¹ç‚¹å’Œé™åˆ¶- å­¦ä¼šä½¿ç”¨zip()è¿›è¡Œæ•°æ®ç»„åˆå’Œè½¬æ¢- äº†è§£zip()åœ¨å®é™…ç¼–ç¨‹ä¸­çš„åº”ç”¨åœºæ™¯## ğŸ“‹ å‰ç½®çŸ¥è¯†- PythonåŸºæœ¬è¯­æ³•- å¯è¿­ä»£å¯¹è±¡çš„æ¦‚å¿µ- å…ƒç»„å’Œåˆ—è¡¨çš„åŸºæœ¬æ“ä½œ- forå¾ªç¯å’Œå…ƒç»„è§£åŒ…## ğŸ” è¯¦ç»†å†…å®¹### åŸºæœ¬æ¦‚å¿µ`zip()` å‡½æ•°æ¥å—å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚è¯¥è¿­ä»£å™¨ç”Ÿæˆå…ƒç»„ï¼Œæ¯ä¸ªå…ƒç»„åŒ…å«æ¥è‡ªå„ä¸ªå¯è¿­ä»£å¯¹è±¡çš„å¯¹åº”ä½ç½®çš„å…ƒç´ ã€‚å½“æœ€çŸ­çš„å¯è¿­ä»£å¯¹è±¡è€—å°½æ—¶ï¼Œè¿­ä»£åœæ­¢ã€‚### è¯­æ³•æ ¼å¼```pythonzip(*iterables)```### å‚æ•°è¯´æ˜| å‚æ•°å | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ ||--------|------|------|--------|---------|| *iterables | iterable | å¦ | æ—  | é›¶ä¸ªæˆ–å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ |### è¿”å›å€¼| ç±»å‹ | è¯´æ˜ ||------|------|| zip | è¿­ä»£å™¨ï¼Œäº§ç”Ÿå…ƒç»„åºåˆ— |## ğŸ’¡ å®é™…åº”ç”¨### åŸºç¡€ç”¨æ³•```python# åŸºæœ¬æ‰“åŒ…names = [\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\"]ages = [25, 30, 35]for name, age in zip(names, ages):    print(f\"{name}ä»Šå¹´{age}å²\")# è¾“å‡º:# å¼ ä¸‰ä»Šå¹´25å²# æå››ä»Šå¹´30å²# ç‹äº”ä»Šå¹´35å²# è½¬æ¢ä¸ºåˆ—è¡¨æŸ¥çœ‹ç»“æœprint(list(zip(names, ages)))  # [('å¼ ä¸‰', 25), ('æå››', 30), ('ç‹äº”', 35)]# ä¸‰ä¸ªåˆ—è¡¨çš„ç»„åˆnames = [\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\"]ages = [25, 30, 35]cities = [\"åŒ—äº¬\", \"ä¸Šæµ·\", \"å¹¿å·\"]for name, age, city in zip(names, ages, cities):    print(f\"{name}ï¼Œ{age}å²ï¼Œæ¥è‡ª{city}\")# ç©ºå‚æ•°è°ƒç”¨print(list(zip()))  # []# å•ä¸ªå‚æ•°numbers = [1, 2, 3]print(list(zip(numbers)))  # [(1,), (2,), (3,)]```### é«˜çº§ç”¨æ³•```python# é•¿åº¦ä¸åŒçš„åºåˆ—list1 = [1, 2, 3, 4, 5]list2 = ['a', 'b', 'c']print(list(zip(list1, list2)))  # [(1, 'a'), (2, 'b'), (3, 'c')]# æ³¨æ„ï¼šè¾ƒé•¿çš„åºåˆ—ä¸­çš„é¢å¤–å…ƒç´ è¢«å¿½ç•¥# å­—ç¬¦ä¸²çš„zipword1 = \"hello\"word2 = \"world\"for char1, char2 in zip(word1, word2):    print(f\"{char1}-{char2}\")# è¾“å‡º: h-w, e-o, l-r, l-l, o-d# è§£åŒ…æ“ä½œï¼ˆè½¬ç½®ï¼‰matrix = [(1, 2, 3), (4, 5, 6), (7, 8, 9)]print(list(zip(*matrix)))  # [(1, 4, 7), (2, 5, 8), (3, 6, 9)]# åˆ›å»ºå­—å…¸keys = ['name', 'age', 'city']values = ['å¼ ä¸‰', 25, 'åŒ—äº¬']person = dict(zip(keys, values))print(person)  # {'name': 'å¼ ä¸‰', 'age': 25, 'city': 'åŒ—äº¬'}# å¹¶è¡Œå¤„ç†å¤šä¸ªåˆ—è¡¨numbers1 = [1, 2, 3, 4]numbers2 = [10, 20, 30, 40]sums = [x + y for x, y in zip(numbers1, numbers2)]print(sums)  # [11, 22, 33, 44]```### å®é™…æ¡ˆä¾‹```python# æ•°æ®è¡¨æ ¼å¤„ç†def create_table(headers, *rows):    \"\"\"åˆ›å»ºç®€å•çš„æ•°æ®è¡¨æ ¼\"\"\"    # æ‰“å°è¡¨å¤´    print(\"|\", end=\"\")    for header in headers:        print(f\" {header:^10} |\", end=\"\")    print()        # æ‰“å°åˆ†éš”çº¿    print(\"|\" + \"-\" * (12 * len(headers) + 1) + \"|\")        # æ‰“å°æ•°æ®è¡Œ    for row in rows:        print(\"|\", end=\"\")        for item in row:            print(f\" {str(item):^10} |\", end=\"\")        print()# ä½¿ç”¨ç¤ºä¾‹headers = [\"å§“å\", \"å¹´é¾„\", \"åŸå¸‚\"]row1 = [\"å¼ ä¸‰\", 25, \"åŒ—äº¬\"]row2 = [\"æå››\", 30, \"ä¸Šæµ·\"]row3 = [\"ç‹äº”\", 35, \"å¹¿å·\"]create_table(headers, row1, row2, row3)# æ•°æ®ç»Ÿè®¡åˆ†ædef analyze_scores(subjects, scores):    \"\"\"åˆ†æå„ç§‘æˆç»©\"\"\"    print(\"æˆç»©åˆ†ææŠ¥å‘Š:\")    print(\"-\" * 30)        total_score = 0    for subject, score in zip(subjects, scores):        print(f\"{subject}: {score}åˆ†\")        total_score += score        average = total_score / len(scores)    print(\"-\" * 30)    print(f\"æ€»åˆ†: {total_score}åˆ†\")    print(f\"å¹³å‡åˆ†: {average:.2f}åˆ†\")        return total_score, average# ä½¿ç”¨ç¤ºä¾‹subjects = [\"è¯­æ–‡\", \"æ•°å­¦\", \"è‹±è¯­\", \"ç‰©ç†\", \"åŒ–å­¦\"]scores = [85, 92, 78, 88, 90]analyze_scores(subjects, scores)# æ–‡ä»¶å¯¹æ¯”def compare_files(file1_lines, file2_lines):    \"\"\"é€è¡Œå¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶\"\"\"    differences = []    for line_num, (line1, line2) in enumerate(zip(file1_lines, file2_lines), 1):        if line1.strip() != line2.strip():            differences.append({                'line': line_num,                'file1': line1.strip(),                'file2': line2.strip()            })        if differences:        print(f\"å‘ç° {len(differences)} å¤„å·®å¼‚:\")        for diff in differences:            print(f\"ç¬¬{diff['line']}è¡Œ:\")            print(f\"  æ–‡ä»¶1: {diff['file1']}\")            print(f\"  æ–‡ä»¶2: {diff['file2']}\")    else:        print(\"ä¸¤ä¸ªæ–‡ä»¶å†…å®¹ç›¸åŒ\")        return differences# åæ ‡å˜æ¢def transform_coordinates(x_coords, y_coords, dx=0, dy=0):    \"\"\"åæ ‡å¹³ç§»å˜æ¢\"\"\"    transformed = []    for x, y in zip(x_coords, y_coords):        new_x = x + dx        new_y = y + dy        transformed.append((new_x, new_y))    return transformed# ä½¿ç”¨ç¤ºä¾‹original_x = [1, 2, 3, 4]original_y = [1, 4, 9, 16]transformed_coords = transform_coordinates(original_x, original_y, dx=10, dy=5)print(f\"åŸåæ ‡: {list(zip(original_x, original_y))}\")print(f\"å˜æ¢å: {transformed_coords}\")# æ•°æ®éªŒè¯def validate_user_data(names, emails, ages):    \"\"\"éªŒè¯ç”¨æˆ·æ•°æ®\"\"\"    errors = []        for i, (name, email, age) in enumerate(zip(names, emails, ages)):        # éªŒè¯å§“å        if not name or len(name.strip()) == 0:            errors.append(f\"ç¬¬{i+1}è¡Œ: å§“åä¸èƒ½ä¸ºç©º\")                # éªŒè¯é‚®ç®±        if '@' not in email:            errors.append(f\"ç¬¬{i+1}è¡Œ: é‚®ç®±æ ¼å¼ä¸æ­£ç¡®\")                # éªŒè¯å¹´é¾„        if not isinstance(age, int) or age  150:            errors.append(f\"ç¬¬{i+1}è¡Œ: å¹´é¾„å¿…é¡»æ˜¯0-150ä¹‹é—´çš„æ•´æ•°\")        if errors:        print(\"æ•°æ®éªŒè¯å¤±è´¥:\")        for error in errors:            print(f\"  - {error}\")        return False    else:        print(\"æ•°æ®éªŒè¯é€šè¿‡\")        return True# æµ‹è¯•æ•°æ®test_names = [\"å¼ ä¸‰\", \"\", \"ç‹äº”\"]test_emails = [\"zhangsan@email.com\", \"lisi.email.com\", \"wangwu@email.com\"]test_ages = [25, 30, 200]validate_user_data(test_names, test_emails, test_ages)```## âš ï¸ æ³¨æ„äº‹é¡¹- `zip()` ä»¥æœ€çŸ­çš„å¯è¿­ä»£å¯¹è±¡ä¸ºå‡†ï¼Œè¾ƒé•¿å¯¹è±¡çš„å¤šä½™å…ƒç´ ä¼šè¢«å¿½ç•¥- `zip()` è¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œåªèƒ½éå†ä¸€æ¬¡- å¦‚æœéœ€è¦å¤„ç†ä¸åŒé•¿åº¦çš„åºåˆ—ï¼Œè€ƒè™‘ä½¿ç”¨ `itertools.zip_longest()`- ç©ºçš„zip()è°ƒç”¨è¿”å›ç©ºè¿­ä»£å™¨```python# é•¿åº¦ä¸åŒçš„å¤„ç†from itertools import zip_longestlist1 = [1, 2, 3, 4, 5]list2 = ['a', 'b', 'c']# æ ‡å‡†zip()ä¼šæˆªæ–­print(list(zip(list1, list2)))  # [(1, 'a'), (2, 'b'), (3, 'c')]# zip_longest()ä¼šå¡«å……ç¼ºå¤±å€¼print(list(zip_longest(list1, list2, fillvalue='X')))# [(1, 'a'), (2, 'b'), (3, 'c'), (4, 'X'), (5, 'X')]# è¿­ä»£å™¨ç‰¹æ€§data1 = [1, 2, 3]data2 = ['a', 'b', 'c']zip_obj = zip(data1, data2)# ç¬¬ä¸€æ¬¡éå†print(\"ç¬¬ä¸€æ¬¡:\", list(zip_obj))  # [(1, 'a'), (2, 'b'), (3, 'c')]# ç¬¬äºŒæ¬¡éå†ï¼ˆç©ºç»“æœï¼‰print(\"ç¬¬äºŒæ¬¡:\", list(zip_obj))  # []```## ğŸ”— ç›¸å…³å†…å®¹- [enumerate() - æšä¸¾å‡½æ•°](../enumerate.md)- [map() - æ˜ å°„å‡½æ•°](../map.md)- [itertoolsæ¨¡å— - è¿­ä»£å·¥å…·](../../stdlib/itertools.md)## ğŸ“š æ‰©å±•é˜…è¯»- [Pythonå®˜æ–¹æ–‡æ¡£ - zip()](https://docs.python.org/3/library/functions.html#zip)- [itertools.zip_longest()](https://docs.python.org/3/library/itertools.html#itertools.zip_longest)- [Pythonå¾ªç¯æŠ€å·§](https://docs.python.org/3/tutorial/datastructures.html#looping-techniques)## ğŸ·ï¸ æ ‡ç­¾`è¿­ä»£` `æ‰“åŒ…` `å¹¶è¡Œ` `æ•°æ®ç»„åˆ` `è½¬ç½®`---**æœ€åæ›´æ–°**: 2024-01-15  **ä½œè€…**: Pythonæ–‡æ¡£å·¥ç¨‹å¸ˆ  **ç‰ˆæœ¬**: 1.0",
        "url": "/docs/builtins/zip/",
        "category": "builtins",
        "tags": ["è¿­ä»£","æ‰“åŒ…","å¹¶è¡Œ"]
      }
      
    
  
    
  
    
  
    
  
    
  
  
]